(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"./bundles/dropdowns.js":function(e,t,i){"use strict";i.r(t);var s=i("../node_modules/@babel/runtime/helpers/typeof.js"),l=i.n(s);window.sf=window.sf||{},window.sf.dropdowns=function(e){var t="",i="",s=[];function a(e,l,a,o,n){var r;if(t+=String.fromCharCode(e),setTimeout((function(){t=""}),1e3),t=o?t.toLowerCase():t,i===t){for(var h=0;h<s.length;h++)if(s[h].classList.contains("e-active")){r=h;break}return s[r+=1]}var p=l,u=t.length,c=void 0;h=a=a?a+1:0;s=[];do{h===p.length&&(h=-1),c=p[r=-1===h?0:h],(n?o?c.textContent.trim().toLowerCase():c.textContent.trim():o?c.innerText.toLowerCase():c.innerText).substr(0,u)===t&&s.push(p[r]),h++}while(h!==a);return i=t,s[0]}function o(e,t,i,s){var l=t;s=null==s||s;var a={item:null,index:null};if(e&&e.length){for(var o=e.length,n=s?e.toLocaleLowerCase():e,r=0,h=l;r<h.length;r++){var p=h[r],u=(s?p.textContent.toLocaleLowerCase():p.textContent).replace(/^\s+|\s+$/g,"");if("Equal"===i&&u===n||"StartsWith"===i&&u.substr(0,o)===n)return a.item=p,a.index=r,{item:p,index:r}}return a}return a}function n(e,t,i,s,l){if(""!==t){var a=i?"gim":"gm";t=/^[a-zA-Z0-9- ]*$/.test(t)?t:t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),function e(t,i,s){for(var l=0;t.childNodes&&l<t.childNodes.length;l++){if(3===t.childNodes[l].nodeType){t=s&&t.classList.contains("e-highlight")?t.parentElement:t,s&&t.getAttribute("data-value")?t.innerHTML=t.getAttribute("data-value").replace(i,'<span class="e-highlight">$1</span>'):t.innerHTML=t.innerHTML.replace(i,'<span class="e-highlight">$1</span>');break}e(t.childNodes[l],i,s)}}(e,new RegExp("StartsWith"===s?"^("+t+")":"EndsWith"===s?"("+t+")$":"("+t+")",a),l)}}var r,h,p,u,c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),d=function(e,t,i,s){var a,o=arguments.length,n=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===("undefined"==typeof Reflect?"undefined":l()(Reflect))&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(n=(o<3?a(n):o>3?a(t,i,n):a(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n},f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),d([sf.base.Property()],t.prototype,"text",void 0),d([sf.base.Property()],t.prototype,"value",void 0),d([sf.base.Property()],t.prototype,"iconCss",void 0),d([sf.base.Property()],t.prototype,"groupBy",void 0),d([sf.base.Property()],t.prototype,"htmlAttributes",void 0),t}(sf.base.ChildProperty),m={root:"e-dropdownbase",rtl:"e-rtl",content:"e-content",selected:"e-active",hover:"e-hover",noData:"e-nodata",fixedHead:"e-fixed-head",focus:"e-item-focus",li:"e-list-item",group:"e-list-group-item",disabled:"e-disabled",grouping:"e-dd-group"},v=function(e){function t(t,i){return e.call(this,t,i)||this}return c(t,e),t.prototype.getPropObject=function(e,t,i){var s=new Object,l=new Object;s[e]=t[e],l[e]=i[e];var a=new Object;return a.newProperty=s,a.oldProperty=l,a},t.prototype.getValueByText=function(e,t,i){var s=null;return sf.base.isNullOrUndefined(this.listData)||(s=t?this.checkValueCase(e,!0,i):this.checkValueCase(e,!1,i)),s},t.prototype.checkValueCase=function(e,t,i,s){var l=this,a=null;s&&(a=e);var o=this.listData,n=this.fields,r=this.typeOfData(o).typeof;if("string"===r||"number"===r||"boolean"===r)for(var h=0,p=o;h<p.length;h++){var u=p[h];sf.base.isNullOrUndefined(u)||(i?a=this.checkingAccent(String(u),e,t):t?this.checkIgnoreCase(String(u),e)&&(a=this.getItemValue(String(u),e,t)):this.checkNonIgnoreCase(String(u),e)&&(a=this.getItemValue(String(u),e,t,s)))}else t?o.filter((function(t){var i=sf.base.getValue(n.value,t);!sf.base.isNullOrUndefined(i)&&l.checkIgnoreCase(sf.base.getValue(n.text,t).toString(),e)&&(a=sf.base.getValue(n.value,t))})):s?o.filter((function(e){var t=sf.base.getValue(n.value,e);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(a)||t.toString()!==a.toString()||(a=sf.base.getValue(n.text,e))})):o.filter((function(t){l.checkNonIgnoreCase(sf.base.getValue(n.text,t),e)&&(a=sf.base.getValue(n.value,t))}));return a},t.prototype.checkingAccent=function(e,t,i){var s=sf.data.DataUtil.ignoreDiacritics(String(e)),l=sf.data.DataUtil.ignoreDiacritics(t.toString()),a=null;return i?this.checkIgnoreCase(s,l)&&(a=this.getItemValue(String(e),t,i)):this.checkNonIgnoreCase(String(e),t)&&(a=this.getItemValue(String(e),t,i)),a},t.prototype.checkIgnoreCase=function(e,t){return String(e).toLowerCase()===t.toString().toLowerCase()},t.prototype.checkNonIgnoreCase=function(e,t){return String(e)===t.toString()},t.prototype.getItemValue=function(e,t,i,s){var l=this.listData,a=this.typeOfData(l).typeof;return s?e.toString():i?"string"===a?String(e):this.getFormattedValue(String(e)):"string"===a?t:this.getFormattedValue(t)},t.prototype.templateCompiler=function(e){var t=!1;if(e)try{t=!!document.querySelectorAll(e).length}catch(e){t=!1}return t},t.prototype.l10nUpdate=function(e){var t="listbox"===this.getModuleName()?this.ulElement:this.list;if("No Records Found"!==this.noRecordsTemplate||"The Request Failed"!==this.actionFailureTemplate){this.DropDownBaseresetBlazorTemplates(!1,!1,!0,!0);var i=e?this.actionFailureTemplate:this.noRecordsTemplate,s=e?this.actionFailureTemplateId:this.noRecordsTemplateId;t.innerHTML="";for(var l=0,a=(this.templateCompiler(i)?sf.base.compile(document.querySelector(i).innerHTML.trim()):sf.base.compile(i))({},null,null,s,this.isStringTemplate);l<a.length;l++){var o=a[l];t.appendChild(o)}this.DropDownBaseupdateBlazorTemplates(!1,!1,!e,e,!1,!1,!1,!1)}else{var n=new sf.base.L10n(this.getLocaleName(),{},this.locale);""!==n.getConstant("actionFailureTemplate")?this.l10n=n:this.l10n=new sf.base.L10n("listbox"===this.getModuleName()?"listbox":"dropdowns",{noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"},this.locale);var r=e?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate");if("listbox"===this.getModuleName()){var h=this.createElement("li");h.textContent=r,t.appendChild(h),h.classList.add("e-list-nrt")}else t.innerHTML=r}},t.prototype.getLocaleName=function(){return"drop-down-base"},t.prototype.getTextByValue=function(e){return this.checkValueCase(e,!1,!1,!0)},t.prototype.getFormattedValue=function(e){if(this.listData&&this.listData.length){var t=this.typeOfData(this.listData);if(sf.base.isBlazor()&&sf.base.isNullOrUndefined(e)||"null"===e)return null;if("number"==typeof sf.base.getValue(this.fields.value?this.fields.value:"value",t.item)||"number"===t.typeof)return parseFloat(e);if("boolean"==typeof sf.base.getValue(this.fields.value?this.fields.value:"value",t.item)||"boolean"===t.typeof)return"true"===e}return e},t.prototype.setEnableRtl=function(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?sf.base.addClass(this.enableRtlElements,m.rtl):sf.base.removeClass(this.enableRtlElements,m.rtl)},t.prototype.initialize=function(){if(this.bindEvent=!0,this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate","UL"===this.element.tagName){var e=sf.lists.ListBase.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(e,this.fields)}else if("SELECT"===this.element.tagName){(this.dataSource instanceof Array?this.dataSource.length>0:!sf.base.isNullOrUndefined(this.dataSource))||this.renderItemsBySelect()}else this.setListData(this.dataSource,this.fields,this.query)},t.prototype.DropDownBaseupdateBlazorTemplates=function(e,t,i,s,l,a,o,n){this.isStringTemplate||(this.itemTemplate&&e&&sf.base.updateBlazorTemplate(this.itemTemplateId,"ItemTemplate",this,n),this.groupTemplate&&t&&sf.base.updateBlazorTemplate(this.groupTemplateId,"GroupTemplate",this,n),this.noRecordsTemplate&&i&&sf.base.updateBlazorTemplate(this.noRecordsTemplateId,"NoRecordsTemplate",this,n),this.actionFailureTemplate&&s&&sf.base.updateBlazorTemplate(this.actionFailureTemplateId,"ActionFailureTemplate",this,n),l&&sf.base.updateBlazorTemplate(this.valueTemplateId,"ValueTemplate",this,n),a&&sf.base.updateBlazorTemplate(this.headerTemplateId,"HeaderTemplate",this),o&&sf.base.updateBlazorTemplate(this.footerTemplateId,"FooterTemplate",this))},t.prototype.DropDownBaseresetBlazorTemplates=function(e,t,i,s,l,a,o){this.isStringTemplate||(this.itemTemplate&&e&&sf.base.resetBlazorTemplate(this.itemTemplateId,"ItemTemplate"),this.groupTemplate&&t&&sf.base.resetBlazorTemplate(this.groupTemplateId,"GroupTemplate"),this.noRecordsTemplate&&i&&sf.base.resetBlazorTemplate(this.noRecordsTemplateId,"NoRecordsTemplate"),this.actionFailureTemplate&&s&&sf.base.resetBlazorTemplate(this.actionFailureTemplateId,"ActionFailureTemplate"),l&&sf.base.resetBlazorTemplate(this.valueTemplateId,"ValueTemplate"),a&&sf.base.resetBlazorTemplate(this.headerTemplateId,"HeaderTemplate"),o&&sf.base.resetBlazorTemplate(this.footerTemplateId,"FooterTemplate"))},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},t.prototype.updateDataAttribute=function(e){for(var t=["class","style","id","type"],i={},s=0;s<this.element.attributes.length;s++)-1!==t.indexOf(this.element.attributes[s].name)||"dropdownlist"===this.getModuleName()&&"readonly"===this.element.attributes[s].name||(i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));sf.base.extend(i,e,i),this.setProperties({htmlAttributes:i},!0)},t.prototype.renderItemsBySelect=function(){var e=this.element,t={value:"value",text:"text"},i=[],s=e.querySelectorAll("select>optgroup"),l=e.querySelectorAll("select>option");if(this.getJSONfromOption(i,l,t),s.length){for(var a=0;a<s.length;a++){var o=s[a],n={};n[t.text]=o.label,n.isHeader=!0;var r=o.querySelectorAll("option");i.push(n),this.getJSONfromOption(i,r,t)}e.querySelectorAll("select>option")}this.fields.text=t.text,this.fields.value=t.value,this.resetList(i,t)},t.prototype.getJSONfromOption=function(e,t,i){for(var s=0,l=t;s<l.length;s++){var a=l[s],o={};o[i.text]=a.innerText,o[i.value]=a.getAttribute(i.value)?a.getAttribute(i.value):a.innerText,e.push(o)}},t.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=this.element.id+"ItemTemplate",this.valueTemplateId=this.element.id+"ValueTemplate",this.groupTemplateId=this.element.id+"GroupTemplate",this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate"},t.prototype.setListData=function(e,t,i){var s,l=this;t=t||this.fields,this.isActive=!0;var a={cancel:!1,data:e,query:i};this.trigger("actionBegin",a,(function(i){if(!i.cancel)if(l.showSpinner(),e instanceof sf.data.DataManager){if(l.isRequested=!0,l.isDataFetched)return void l.emptyDataRequest(t);i.data.executeQuery(l.getQuery(i.query)).then((function(e){l.trigger("actionComplete",e,(function(e){if(!e.cancel){var i=e.result;0===i.length&&(l.isDataFetched=!0),s=l.renderItems(i,t),l.onActionComplete(s,i,e),l.groupTemplate&&l.renderGroupTemplate(s),l.isRequested=!1,l.bindChildItems(i,s,t,e)}}))})).catch((function(e){l.isRequested=!1,l.onActionFailure(e),l.hideSpinner()}))}else{var a=new sf.data.DataManager(i.data),o={cancel:!1,result:l.getQuery(i.query).executeLocal(a)};l.trigger("actionComplete",o,(function(e){e.cancel||(s=l.renderItems(e.result,t),l.onActionComplete(s,e.result),l.groupTemplate&&l.renderGroupTemplate(s),l.bindChildItems(e.result,s,t))}))}}))},t.prototype.bindChildItems=function(e,t,i,s){var l=this;e.length>=100&&"autocomplete"===this.getModuleName()?setTimeout((function(){var a=l.remainingItems(l.sortedData,i);sf.base.append(a,t),l.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1),l.liCollections=l.list.querySelectorAll("."+m.li),l.updateListValues(),l.raiseDataBound(e,s)}),0):this.raiseDataBound(e,s)},t.prototype.updateListValues=function(){},t.prototype.findListElement=function(e,t,i,s){var l=null;if(e)for(var a=[].slice.call(e.querySelectorAll(t)),o=0;o<a.length;o++)if(a[o].getAttribute(i)===s+""){l=a[o];break}return l},t.prototype.raiseDataBound=function(e,t){this.hideSpinner();var i={items:e,e:t};this.trigger("dataBound",i)},t.prototype.remainingItems=function(e,t){var i=new sf.data.DataManager(e).executeLocal((new sf.data.Query).skip(100));if(this.itemTemplate){var s=this.templateListItem(i,t);return[].slice.call(s.childNodes)}var l=this.typeOfData(i).typeof;return"string"===l||"number"===l||"boolean"===l?sf.lists.ListBase.createListItemFromArray(this.createElement,i,!0,this.listOption(i,t)):sf.lists.ListBase.createListItemFromJson(this.createElement,i,this.listOption(i,t),1,!0)},t.prototype.emptyDataRequest=function(e){var t=[];this.onActionComplete(this.renderItems(t,e),t),this.isRequested=!1,this.hideSpinner()},t.prototype.showSpinner=function(){},t.prototype.hideSpinner=function(){},t.prototype.onActionFailure=function(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),sf.base.addClass([this.list],m.noData)},t.prototype.onActionComplete=function(e,t,i){this.listData=t,sf.base.isBlazor()&&this.isServerRendered&&"listbox"===this.getModuleName()?(sf.base.remove(this.list.querySelector(".e-list-parent")),sf.base.remove(this.list.querySelector(".e-hidden-select"))):this.list.innerHTML="",this.fixedHeaderElement=sf.base.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement:null,this.list.appendChild(e),this.liCollections=this.list.querySelectorAll("."+m.li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,t,this.bindEvent)},t.prototype.postRender=function(e,t,i){var s=e.querySelector("."+m.li),l=e.querySelector("."+m.selected);s&&!l&&s.classList.add(m.focus),t.length<=0?(this.l10nUpdate(),sf.base.addClass([e],m.noData)):e.classList.remove(m.noData)},t.prototype.getQuery=function(e){return e||(this.query?this.query:new sf.data.Query)},t.prototype.renderGroupTemplate=function(e){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+m.group)){var t=this.dataSource,i={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},s=e.querySelectorAll("."+m.group);if(this.templateCompiler(this.groupTemplate)){var l=document.querySelector(this.groupTemplate).innerHTML.trim();sf.lists.ListBase.renderGroupTemplate(l,t,this.fields.properties,s,i)}else sf.lists.ListBase.renderGroupTemplate(this.groupTemplate,t,this.fields.properties,s,i);this.DropDownBaseupdateBlazorTemplates(!1,!0,!1,!1,!1,!1,!1,!1)}},t.prototype.createListItems=function(e,t){e&&t.groupBy||this.element.querySelector("optgroup")?(t.groupBy&&("None"!==this.sortOrder&&(e=this.getSortedDataSource(e)),e=sf.lists.ListBase.groupDataSource(e,t.properties,this.sortOrder)),sf.base.addClass([this.list],m.grouping)):e=this.getSortedDataSource(e);var i=this.listOption(e,t),s=e.length>100?new sf.data.DataManager(e).executeLocal((new sf.data.Query).take(100)):e;return this.sortedData=e,sf.lists.ListBase.createList(this.createElement,"autocomplete"===this.getModuleName()?s:e,i,!0)},t.prototype.listOption=function(e,t){var i=!sf.base.isNullOrUndefined(t.iconCss),s=sf.base.isNullOrUndefined(t.properties)?t:t.properties,l=null!==t.text||null!==t.value?{fields:s,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}};return sf.base.extend({},l,t,!0)},t.prototype.setFloatingHeader=function(e){sf.base.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:m.fixedHead}),this.list.querySelector("li").classList.contains(m.group)||(this.fixedHeaderElement.style.display="none"),sf.base.prepend([this.fixedHeaderElement],this.list),this.setFixedHeader()),sf.base.isNullOrUndefined(this.fixedHeaderElement)||"0"!==this.fixedHeaderElement.style.zIndex||this.setFixedHeader(),this.scrollStop(e)},t.prototype.scrollStop=function(e){for(var t=e.target,i=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10),s=Math.round(t.scrollTop/i),l=this.list.querySelectorAll("li"),a=s;a>-1;a--){if(!sf.base.isNullOrUndefined(l[a])&&l[a].classList.contains(m.group)){var o=l[a];this.fixedHeaderElement.innerHTML=o.innerHTML,this.fixedHeaderElement.style.top=e.target.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},t.prototype.renderItems=function(e,t){var i;if(this.itemTemplate&&e){var s=e;s&&t.groupBy?("None"!==this.sortOrder&&(s=this.getSortedDataSource(s)),s=sf.lists.ListBase.groupDataSource(s,t.properties,this.sortOrder)):s=this.getSortedDataSource(s),this.sortedData=s;var l=s.length>100?new sf.data.DataManager(s).executeLocal((new sf.data.Query).take(100)):s;i=this.templateListItem("autocomplete"===this.getModuleName()?l:s,t);var a="listbox"===this.getModuleName();this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1,!1,!1,!1,a)}else i=this.createListItems(e,t);return i},t.prototype.templateListItem=function(e,t){this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1);var i=this.listOption(e,t);if(i.templateID=this.itemTemplateId,i.isStringTemplate=this.isStringTemplate,this.templateCompiler(this.itemTemplate)){var s=document.querySelector(this.itemTemplate).innerHTML.trim();return sf.lists.ListBase.renderContentTemplate(this.createElement,s,e,t.properties,i)}return sf.lists.ListBase.renderContentTemplate(this.createElement,this.itemTemplate,e,t.properties,i)},t.prototype.typeOfData=function(e){for(var t={typeof:null,item:null},i=0;!sf.base.isNullOrUndefined(e)&&i<e.length;i++){if(!sf.base.isNullOrUndefined(e[i]))if(!("string"==typeof e[i]||"number"==typeof e[i]||"boolean"==typeof e[i]?sf.base.isNullOrUndefined(e[i]):sf.base.isNullOrUndefined(sf.base.getValue(this.fields.value?this.fields.value:"value",e[i]))))return{typeof:l()(e[i]),item:e[i]}}return t},t.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var e=0;this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10));var t=this.liCollections[0].offsetWidth-e;this.fixedHeaderElement.style.width=t.toString()+"px",sf.base.setStyleAttribute(this.fixedHeaderElement,{zIndex:10});var i=this.ulElement.querySelector("."+m.group);this.fixedHeaderElement.innerHTML=i.innerHTML},t.prototype.getSortedDataSource=function(e){if(e&&"None"!==this.sortOrder){var t=this.fields.text?this.fields.text:"text";e=sf.lists.ListBase.getDataSource(e,sf.lists.ListBase.addSorting(this.sortOrder,t))}return e},t.prototype.getIndexByValue=function(e){for(var t,i=this.getItems(),s=0;s<i.length;s++)if(!sf.base.isNullOrUndefined(e)&&i[s].getAttribute("data-value")===e.toString()){t=s;break}return t},t.prototype.dispatchEvent=function(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)},t.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.fields.text=this.fields.value:!this.fields.value&&this.fields.text?this.fields.value=this.fields.text:this.fields.value||this.fields.text||(this.fields.value=this.fields.text="text")},t.prototype.resetList=function(e,t,i){if(this.list){if("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)!(e instanceof Array?e.length>0:!sf.base.isNullOrUndefined(e))&&this.selectData&&this.selectData.length>0&&(e=this.selectData);this.setListData(e,t,i)}},t.prototype.updateSelectElementData=function(e){e&&sf.base.isNullOrUndefined(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},t.prototype.updateSelection=function(){},t.prototype.renderList=function(){this.render()},t.prototype.updateDataSource=function(e){this.resetList(this.dataSource)},t.prototype.setUpdateInitial=function(e,t){this.isDataFetched=!1;for(var i={},s=0;e.length>s;s++)t[e[s]]&&"fields"===e[s]?this.setFields():t[e[s]]&&(i[e[s]]=t[e[s]]);Object.keys(i).length>0&&(-1===Object.keys(i).indexOf("dataSource")&&(i.dataSource=this.dataSource),this.updateDataSource(i))},t.prototype.onPropertyChanged=function(e,t){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e),this.setUpdateInitial(["sortOrder","itemTemplate"],e);for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var l=this.ulElement.querySelector("."+m.group);this.fixedHeaderElement.innerHTML=l.innerHTML}break;case"locale":this.list&&!sf.base.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex()}}},t.prototype.render=function(e){this.list=this.createElement("div",{className:m.content,attrs:{tabindex:"0"}}),this.list.classList.add(m.root),this.setFields();var t={duration:300,selector:"."+m.li};this.rippleFun=sf.base.rippleEffect(this.list,t);var i=this.element.querySelector("select>optgroup");if(!this.fields.groupBy&&sf.base.isNullOrUndefined(i)||this.isGroupChecking||sf.base.EventHandler.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),sf.base.removeClass([this.element],m.root),this.element.style.display="none";var s=this.createElement("div");this.element.parentElement.insertBefore(s,this.element),s.appendChild(this.element),s.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),e||this.initialize()},t.prototype.getModuleName=function(){return"dropdownbase"},t.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+m.li)},t.prototype.addItem=function(e,t){(!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1);var i,s=this.getItems().length,l=this.list.querySelector("."+m.selected);e=e instanceof Array?e:[e],i=sf.base.isNullOrUndefined(t)||t<0||t>s-1?s:t;var a=this.fields;e&&a.groupBy&&(e=sf.lists.ListBase.groupDataSource(e,a.properties));for(var o=[],n=0;n<e.length;n++){var r=e[n],h=r.isHeader,p=this.createElement("li",{className:h?m.group:m.li,id:"option-add-"+n}),u=r instanceof Object?sf.base.getValue(a.text,r):r;if(h&&(p.innerText=u),this.itemTemplate&&!h){var c=sf.base.compile(this.itemTemplate);sf.base.append(c(r,null,null,this.itemTemplateId,this.isStringTemplate),p),this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1)}else h||p.appendChild(document.createTextNode(u));p.setAttribute("data-value",r instanceof Object?sf.base.getValue(a.value,r):r),p.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:p}),o.push(p),this.listData.push(r),this.updateActionCompleteData(p,r),this.trigger("beforeItemRender",{element:p,item:r})}if(0===s&&sf.base.isNullOrUndefined(this.list.querySelector("ul")))this.list.innerHTML="",this.list.classList.remove(m.noData),this.list.appendChild(this.ulElement),this.liCollections=o,sf.base.append(o,this.ulElement),this.updateAddItemList(this.list,s);else{"listbox"===this.getModuleName()&&0===s&&(this.ulElement.innerHTML="");var d=[];for(n=0;n<e.length;n++){for(var f=this.ulElement.querySelectorAll(".e-list-group-item"),v=0;v<f.length;v++)d[v]=f[v].innerText;if(d.indexOf(o[n].innerText)>-1&&a.groupBy){for(v=0;v<f.length;v++)if(d[v]===o[n].innerText){this.ulElement.insertBefore(o[n+1],f[v+1]),n+=1;break}}else this.liCollections[i]?this.liCollections[i].parentNode.insertBefore(o[n],this.liCollections[i]):this.ulElement.appendChild(o[n]);var b=[].slice.call(this.liCollections);b.splice(i,0,o[n]),this.liCollections=b,i+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}(l||0===t)&&this.updateSelection()},t.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var s=["required","aria-required","form"],l=0;l<s.length;l++)if(e.getAttribute(s[l])){var a=e.getAttribute(s[l]);t.setAttribute(s[l],a),e.removeAttribute(s[l])}},t.prototype.setZIndex=function(){},t.prototype.updateActionCompleteData=function(e,t){},t.prototype.updateAddItemList=function(e,t){},t.prototype.updateDataList=function(){},t.prototype.getDataByValue=function(e){if(!sf.base.isNullOrUndefined(this.listData)){var t=this.typeOfData(this.listData).typeof;if("string"===t||"number"===t||"boolean"===t)for(var i=0,s=this.listData;i<s.length;i++){var l=s[i];if(!sf.base.isNullOrUndefined(l)&&l===e)return l}else for(var a=0,o=this.listData;a<o.length;a++){l=o[a];if(!sf.base.isNullOrUndefined(l)&&sf.base.getValue(this.fields.value?this.fields.value:"value",l)===e)return l}}return null},t.prototype.destroy=function(){document.body.contains(this.list)&&(sf.base.EventHandler.remove(this.list,"scroll",this.setFloatingHeader),sf.base.isNullOrUndefined(this.rippleFun)||this.rippleFun(),sf.base.detach(this.list)),e.prototype.destroy.call(this)},d([sf.base.Complex({text:null,value:null,iconCss:null,groupBy:null},f)],t.prototype,"fields",void 0),d([sf.base.Property(!1)],t.prototype,"enablePersistence",void 0),d([sf.base.Property(null)],t.prototype,"itemTemplate",void 0),d([sf.base.Property(null)],t.prototype,"groupTemplate",void 0),d([sf.base.Property("No Records Found")],t.prototype,"noRecordsTemplate",void 0),d([sf.base.Property("The Request Failed")],t.prototype,"actionFailureTemplate",void 0),d([sf.base.Property("None")],t.prototype,"sortOrder",void 0),d([sf.base.Property(!0)],t.prototype,"enabled",void 0),d([sf.base.Property([])],t.prototype,"dataSource",void 0),d([sf.base.Property(null)],t.prototype,"query",void 0),d([sf.base.Property("StartsWith")],t.prototype,"filterType",void 0),d([sf.base.Property(!0)],t.prototype,"ignoreCase",void 0),d([sf.base.Property(1e3)],t.prototype,"zIndex",void 0),d([sf.base.Property(!1)],t.prototype,"ignoreAccent",void 0),d([sf.base.Property()],t.prototype,"locale",void 0),d([sf.base.Event()],t.prototype,"actionBegin",void 0),d([sf.base.Event()],t.prototype,"actionComplete",void 0),d([sf.base.Event()],t.prototype,"actionFailure",void 0),d([sf.base.Event()],t.prototype,"select",void 0),d([sf.base.Event()],t.prototype,"dataBound",void 0),d([sf.base.Event()],t.prototype,"created",void 0),d([sf.base.Event()],t.prototype,"destroyed",void 0),t=d([sf.base.NotifyPropertyChanges],t)}(sf.base.Component),b=(h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),y=function(e,t,i,s){var a,o=arguments.length,n=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===("undefined"==typeof Reflect?"undefined":l()(Reflect))&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(n=(o<3?a(n):o>3?a(t,i,n):a(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n},g={root:"e-dropdownlist",hover:m.hover,selected:m.selected,rtl:m.rtl,li:m.li,disable:m.disabled,base:m.root,focus:m.focus,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},C={container:null,buttons:[]},E=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.previousValue=null,s}return b(t,e),t.prototype.preRender=function(){var t=sf.base.isBlazor()&&this.isServerRendered;this.isServerBlazor=!!t,this.isServerBlazor?this.initializeData():(this.element.style.opacity="0",this.initializeData(),e.prototype.preRender.call(this)),this.activeIndex=this.index,this.queryString=""},t.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.renderList=function(t){this.isServerBlazor?this.interopAdaptor.invokeMethodAsync("OnServerRenderList",this.beforePopupOpen,!1):(e.prototype.render.call(this,t),this.wireListEvents())},t.prototype.floatLabelChange=function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var e=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?sf.base.classList(e,["e-label-top"],["e-label-bottom"]):sf.base.classList(e,["e-label-bottom"],["e-label-top"])}},t.prototype.resetHandler=function(e){e.preventDefault(),this.clearAll(e)},t.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!sf.base.isNullOrUndefined(this.ulElement)){var e=this.ulElement.querySelector("."+g.li);e&&e.classList.add(g.focus)}},t.prototype.clearAll=function(e,t){!sf.base.isNullOrUndefined(t)&&(sf.base.isNullOrUndefined(t)||!sf.base.isNullOrUndefined(t.dataSource)&&(t.dataSource instanceof sf.data.DataManager||0!==t.dataSource.length))||(this.isActive=!0,this.resetSelection(t));var i=this.getItemData();this.previousValue!==i.value&&this.onChangeEvent(e)},t.prototype.resetSelection=function(e){if(this.list)if(sf.base.isNullOrUndefined(e)||!sf.base.isNullOrUndefined(e.dataSource)&&(e.dataSource instanceof sf.data.DataManager||0!==e.dataSource.length)){if(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!sf.base.isNullOrUndefined(this.actionCompleteData.ulElement)&&!sf.base.isNullOrUndefined(this.actionCompleteData.list)){var t=this.actionCompleteData.ulElement.querySelector("li"),i=this.ulElement&&this.ulElement.querySelector("li");"EJS-COMBOBOX"===this.element.tagName&&t&&i&&t.childElementCount>0&&i.childElementCount>0&&t.textContent!==i.textContent&&this.itemTemplate&&this.cloneElements(),this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list)}this.resetFocusElement()}else this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource);this.isServerBlazor||(this.hiddenElement.innerHTML=""),this.inputElement.value="",this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(sf.base.detach(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},t.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if("class"===i){var s=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==s&&sf.base.addClass([this.inputWrapper.container],s.split(" "))}else if("disabled"===i&&"disabled"===this.htmlAttributes[i])this.enabled=!1,this.setEnable();else if("readonly"!==i||sf.base.isNullOrUndefined(this.htmlAttributes[i]))if("style"===i)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[i]);else{var l=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"];"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||l.push("tabindex"),0===i.indexOf("data")||["name","required"].indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[i]):l.indexOf(i)>-1?"placeholder"===i?sf.inputs.Input.setPlaceholder(this.htmlAttributes[i],this.inputElement):this.inputElement.setAttribute(i,this.htmlAttributes[i]):this.inputWrapper.container.setAttribute(i,this.htmlAttributes[i])}else this.readonly=!0,this.dataBind()}"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.inputWrapper.container.removeAttribute("tabindex")},t.prototype.getAriaAttributes=function(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},t.prototype.setEnableRtl=function(){sf.inputs.Input.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},t.prototype.setEnable=function(){sf.inputs.Input.setEnabled(this.enabled,this.inputElement),this.enabled?(sf.base.removeClass([this.inputWrapper.container],g.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),sf.base.addClass([this.inputWrapper.container],g.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"drop-down-list"},t.prototype.preventTabIndex=function(e){"dropdownlist"===this.getModuleName()&&(e.tabIndex=-1)},t.prototype.targetElement=function(){return this.inputWrapper.container},t.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},t.prototype.getElementByText=function(e){return this.getElementByValue(this.getValueByText(e))},t.prototype.getElementByValue=function(e){for(var t,i=0,s=this.getItems();i<s.length;i++){var l=s[i];if(this.getFormattedValue(l.getAttribute("data-value"))===e){t=l;break}}return t},t.prototype.initValue=function(){this.renderList(),this.dataSource instanceof sf.data.DataManager?this.initRemoteRender=!0:this.updateValues()},t.prototype.updateValues=function(){if(sf.base.isNullOrUndefined(this.value))if(this.text&&sf.base.isNullOrUndefined(this.value)){var e=this.getElementByText(this.text);if(sf.base.isNullOrUndefined(e))return void this.setProperties({text:null});this.setSelection(e,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),sf.inputs.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onBlur=function(e){if(this.enabled){var t=e.relatedTarget,i=e.target,s=this.isPreventBlur;this.isPreventBlur=!1,!s||this.isDocumentClick||!this.isPopupOpen||sf.base.isNullOrUndefined(i)&&(this.isFilterLayout()||!sf.base.isNullOrUndefined(t))?this.isDocumentClick||!sf.base.isNullOrUndefined(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(g.mobileFilter)?this.beforePopupOpen||(this.isDocumentClick=!1):(("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&t!==this.inputElement&&(document.activeElement!==t||document.activeElement===t&&i.classList.contains(g.inputFocus))||sf.base.isNullOrUndefined(t)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&i!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(t)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(e),this.isTabKey=!1),!this.isRequested||this.isPopupOpen||this.isPreventBlur||(this.isActive=!1,this.beforePopupOpen=!1)):"dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus()}},t.prototype.focusOutAction=function(e){this.isInteracted=!1,this.focusOut(e),this.onFocusOut()},t.prototype.onFocusOut=function(){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&sf.base.addClass([this.inputWrapper.clearButton],g.clearIconHide),this.trigger("blur"))},t.prototype.onFocus=function(e){if(!this.isInteracted){this.isInteracted=!0;var t={isInteracted:!!e,event:e};this.trigger("focus",t)}this.updateIconState()},t.prototype.resetValueHandler=function(e){var t=sf.base.closest(this.inputElement,"form");if(t&&e.target===t){var i=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=i}},t.prototype.wireEvent=function(){sf.base.EventHandler.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),sf.base.EventHandler.add(this.inputWrapper.container,"focus",this.focusIn,this),sf.base.EventHandler.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()},t.prototype.bindCommonEvent=function(){sf.base.EventHandler.add(this.targetElement(),"blur",this.onBlur,this);var e=sf.base.closest(this.inputElement,"form");e&&sf.base.EventHandler.add(e,"reset",this.resetValueHandler,this),sf.base.Browser.isDevice?this.keyboardModule=new sf.base.KeyboardEvents(this.targetElement(),{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.keyboardModule=new sf.base.KeyboardEvents(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},t.prototype.bindClearEvent=function(){this.showClearButton&&sf.base.EventHandler.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},t.prototype.unBindCommonEvent=function(){sf.base.EventHandler.remove(this.targetElement(),"blur",this.onBlur);var e=sf.base.closest(this.inputElement,"form");e&&sf.base.EventHandler.remove(e,"reset",this.resetValueHandler),sf.base.Browser.isDevice||this.keyboardModule.destroy(),this.showClearButton&&sf.base.EventHandler.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},t.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?sf.base.addClass([this.inputWrapper.clearButton],g.clearIconHide):sf.base.removeClass([this.inputWrapper.clearButton],g.clearIconHide))},t.prototype.wireListEvents=function(){sf.base.EventHandler.add(this.list,"click",this.onMouseClick,this),sf.base.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),sf.base.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},t.prototype.onSearch=function(e){32!==e.charCode&&13!==e.charCode&&(void 0===this.list&&(this.isServerBlazor?(this.isServerIncrementalSearch=!0,this.interopAdaptor.invokeMethodAsync("OnServerRenderList",!0,!1)):this.renderList()),this.searchKeyEvent=e,this.onServerIncrementalSearch(e))},t.prototype.onServerIncrementalSearch=function(e){this.isRequested||sf.base.isNullOrUndefined(this.list)||sf.base.isNullOrUndefined(this.list.querySelector("li"))||!this.enabled||this.readonly||this.incrementalSearch(e)},t.prototype.onMouseClick=function(e){var t=e.target,i=(t.classList,sf.base.closest(t,"."+m.li));if(this.isValidLI(i))if(this.setSelection(i,e),sf.base.Browser.isDevice&&this.isFilterLayout())history.back();else{this.closePopup(100)}},t.prototype.onMouseOver=function(e){var t=sf.base.closest(e.target,"."+m.li);this.setHover(t)},t.prototype.setHover=function(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains(m.hover)&&(this.removeHover(),sf.base.addClass([e],m.hover))},t.prototype.onMouseLeave=function(e){this.removeHover()},t.prototype.removeHover=function(){if(this.list){var e=this.list.querySelectorAll("."+m.hover);e&&e.length&&sf.base.removeClass(e,m.hover)}},t.prototype.isValidLI=function(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")},t.prototype.incrementalSearch=function(e){if(this.liCollections.length>0){var t=a(e.charCode,this.liCollections,this.activeIndex,!0,this.isServerBlazor);sf.base.isNullOrUndefined(t)||(this.setSelection(t,e),this.setScrollPosition())}},t.prototype.hideSpinner=function(){sf.base.isNullOrUndefined(this.spinnerElement)||(sf.popups.hideSpinner(this.spinnerElement),sf.base.removeClass([this.spinnerElement],g.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.showSpinner=function(){sf.base.isNullOrUndefined(this.spinnerElement)&&(this.spinnerElement=sf.base.Browser.isDevice&&!sf.base.isNullOrUndefined(this.filterInputObj)&&this.filterInputObj.buttons[1]||!sf.base.isNullOrUndefined(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],sf.base.addClass([this.spinnerElement],g.disableIcon),sf.popups.createSpinner({target:this.spinnerElement,width:sf.base.Browser.isDevice?"16px":"14px"},this.createElement),sf.popups.showSpinner(this.spinnerElement))},t.prototype.keyActionHandler=function(e){if(this.enabled){var t="pageUp"===e.action||"pageDown"===e.action,i="dropdownlist"!==this.getModuleName()&&("home"===e.action||"end"===e.action);this.isEscapeKey="escape"===e.action,this.isTabKey=!this.isPopupOpen&&"tab"===e.action;var s="down"===e.action||"up"===e.action||"home"===e.action||"end"===e.action,l="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action;if((!(this.isEditTextBox()||t||i)||this.isPopupOpen)&&!this.readonly){var a="tab"===e.action||"close"===e.action;if(void 0!==this.list||this.isRequested||a||"escape"===e.action||(this.searchKeyEvent=e,this.renderList()),((!this.isServerBlazor||"open"!==e.action&&"space"!==e.action)&&sf.base.isNullOrUndefined(this.list)||!sf.base.isNullOrUndefined(this.liCollections)&&l&&0===this.liCollections.length||this.isRequested)&&(!this.isServerBlazor||!s))return;switch((a&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===e.action)&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,this.isTyped=!l&&"escape"!==e.action&&this.isTyped,e.action){case"down":case"up":this.updateUpDownAction(e);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":case"end":this.updateHomeEndAction(e);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup();break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(e),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"tab":this.selectCurrentValueOnTab(e);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}}}},t.prototype.updateUpDownAction=function(e){if(this.isServerBlazor&&sf.base.isNullOrUndefined(this.list))this.isServerNavigation=!0,this.interopAdaptor.invokeMethodAsync("OnServerRenderList",!0,!1);else{this.isServerNavigation=!1;var t=this.list.querySelector("."+g.focus);if(this.isSelectFocusItem(t))this.setSelection(t,e);else{var i,s="down"===e.action?this.activeIndex+1:this.activeIndex-1,l=0;"autocomplete"===this.getModuleName()&&(l="down"===e.action&&sf.base.isNullOrUndefined(this.activeIndex)?0:this.liCollections.length-1,s=s<0?this.liCollections.length-1:s===this.liCollections.length?0:s),i=sf.base.isNullOrUndefined(this.activeIndex)?this.liCollections[l]:this.liCollections[s],sf.base.isNullOrUndefined(i)||this.setSelection(i,e)}e.preventDefault()}},t.prototype.updateHomeEndAction=function(e){if("dropdownlist"===this.getModuleName())if(this.isServerBlazor&&sf.base.isNullOrUndefined(this.list))this.isServerNavigation=!0,this.interopAdaptor.invokeMethodAsync("OnServerRenderList",!0,!1);else{this.isServerNavigation=!1;var t=0;if(t="home"===e.action?0:this.getItems().length-1,e.preventDefault(),this.activeIndex===t)return;this.setSelection(this.liCollections[t],e)}},t.prototype.selectCurrentValueOnTab=function(e){"autocomplete"===this.getModuleName()?this.selectCurrentItem(e):this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))},t.prototype.mobileKeyActionHandler=function(e){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0!==this.list||this.isRequested||(this.searchKeyEvent=e,this.renderList()),sf.base.isNullOrUndefined(this.list)||!sf.base.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===e.action&&this.selectCurrentItem(e)}},t.prototype.selectCurrentItem=function(e){if(this.isPopupOpen){var t=this.list.querySelector("."+g.focus);t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(),this.focusDropDown(e)}else this.showPopup()},t.prototype.isSelectFocusItem=function(e){return!sf.base.isNullOrUndefined(e)},t.prototype.getPageCount=function(){var e=this.list.classList.contains(m.noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))},t.prototype.pageUpSelection=function(e,t){var i=e>=0?this.liCollections[e+1]:this.liCollections[0];this.setSelection(i,t)},t.prototype.pageDownSelection=function(e,t){var i=this.getItems(),s=e<=i.length?this.liCollections[e-1]:this.liCollections[i.length-1];this.setSelection(s,t)},t.prototype.unWireEvent=function(){sf.base.EventHandler.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),sf.base.EventHandler.remove(this.inputWrapper.container,"keypress",this.onSearch),sf.base.EventHandler.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()},t.prototype.unWireListEvents=function(){sf.base.EventHandler.remove(this.list,"click",this.onMouseClick),sf.base.EventHandler.remove(this.list,"mouseover",this.onMouseOver),sf.base.EventHandler.remove(this.list,"mouseout",this.onMouseLeave)},t.prototype.checkSelector=function(e){return"#"+e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")},t.prototype.onDocumentClick=function(e){var t=e.target;if(!sf.base.isNullOrUndefined(this.popupObj)&&sf.base.closest(t,this.checkSelector(this.popupObj.element.id))||this.inputWrapper.container.contains(e.target))t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()&&!this.allowFiltering&&sf.base.Browser.isDevice&&t===this.inputWrapper.buttons[0]||(this.isPreventBlur=(sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault());else if(this.inputWrapper.container.classList.contains(g.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var i=this.isRequested;this.isInteracted=!1,this.hidePopup(e),i||(this.onFocusOut(),this.inputWrapper.container.classList.remove(g.inputFocus))}},t.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(g.inputFocus))},t.prototype.focusDropDown=function(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)},t.prototype.dropDownClick=function(e){if(3!==e.which&&2!==e.button&&!this.targetElement().classList.contains(g.disable)&&this.inputWrapper.clearButton!==e.target){var t=e.target;if(t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()||e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen?(this.hidePopup(),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup());var i=this,s=sf.base.isBlazor()?1e3:100;this.isSecondClick||setTimeout((function(){i.cloneElements(),i.isSecondClick=!0}),s)}}},t.prototype.cloneElements=function(){if(this.list){var e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}},t.prototype.updateSelectedItem=function(e,t,i,s){var l=this;this.removeSelection(),e.classList.add(m.selected),this.removeHover();var a=this.getFormattedValue(e.getAttribute("data-value")),o=this.getDataByValue(a);if(this.initial||i||sf.base.isNullOrUndefined(t))this.selectEventCallback(e,t,i,o,a),this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("OnServerItemData",this.itemData),s&&this.setSelectOptions(e,t);else{var n=this.detachChanges(o);this.isSelected=!0;var r={e:t,item:e,itemData:n,isInteracted:!!t,cancel:!1};this.trigger("select",r,(function(n){n.cancel?e.classList.remove(m.selected):(l.selectEventCallback(e,t,i,o,a),l.isServerBlazor&&l.interopAdaptor.invokeMethodAsync("OnServerItemData",l.itemData),s&&l.setSelectOptions(e,t))}))}},t.prototype.selectEventCallback=function(e,t,i,s,l){this.previousItemData=sf.base.isNullOrUndefined(this.itemData)?null:this.itemData,this.item=e,this.itemData=s;var a=this.list.querySelector("."+m.focus);a&&sf.base.removeClass([a],m.focus),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(l)},t.prototype.activeItem=function(e){this.isValidLI(e)&&!e.classList.contains(m.selected)&&(this.removeSelection(),e.classList.add(m.selected),this.removeHover(),e.setAttribute("aria-selected","true"))},t.prototype.setValue=function(e){var t=this.getItemData();return null===t.value?sf.base.isBlazor()&&null!==t.text||""!==t.text?sf.inputs.Input.setValue(t.text,this.inputElement,this.floatLabelType,this.showClearButton):sf.inputs.Input.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):sf.inputs.Input.setValue(t.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("OnServerValueTemplate",t),this.valueTemplate&&null!==this.itemData&&!this.isServerBlazor?(this.DropDownBaseresetBlazorTemplates(!1,!1,!1,!1,!0),this.setValueTemplate()):this.inputElement.previousSibling===this.valueTempElement&&(sf.base.detach(this.valueTempElement),this.inputElement.style.display="block"),this.previousValue===t.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)},t.prototype.setSelection=function(e,t){this.isValidLI(e)&&!e.classList.contains(m.selected)?this.updateSelectedItem(e,t,!1,!0):this.setSelectOptions(e,t)},t.prototype.setSelectOptions=function(e,t){this.list&&this.removeHover(),this.previousSelectedLI=sf.base.isNullOrUndefined(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,this.setValue(t)||(this.isPopupOpen&&(sf.base.attributes(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),this.isFilterLayout()&&this.filterInput&&sf.base.attributes(this.filterInput,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})),(!this.isPopupOpen&&!sf.base.isNullOrUndefined(e)||this.isPopupOpen&&!sf.base.isNullOrUndefined(t)&&("keydown"!==t.type||"keydown"===t.type&&"enter"===t.action))&&(this.isSelectCustom=!1,this.onChangeEvent(t)),!this.isPopupOpen||sf.base.isNullOrUndefined(this.selectedLI)||null===this.itemData||t&&"click"===t.type||this.setScrollPosition(t),"mozilla"!==sf.base.Browser.info.name&&(sf.base.attributes(this.inputElement,{"aria-label":this.inputElement.value}),sf.base.attributes(this.targetElement(),{"aria-describedby":this.inputElement.id}),this.targetElement().removeAttribute("aria-live")))},t.prototype.dropdownCompiler=function(e){var t=!1;if(e)try{t=!!document.querySelectorAll(e).length}catch(e){t=!1}return t},t.prototype.setValueTemplate=function(){this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:g.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.valueTempElement.innerHTML="";for(var e=sf.base.isBlazor()?JSON.parse(JSON.stringify(this.itemData)):this.itemData,t=0,i=(this.dropdownCompiler(this.valueTemplate)?sf.base.compile(document.querySelector(this.valueTemplate).innerHTML.trim()):sf.base.compile(this.valueTemplate))(e,null,null,this.valueTemplateId,this.isStringTemplate);t<i.length;t++){var s=i[t];this.valueTempElement.appendChild(s)}this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!0,!0,!0)},t.prototype.removeSelection=function(){if(this.list){var e=this.list.querySelectorAll("."+m.selected);e.length&&(sf.base.removeClass(e,m.selected),e[0].removeAttribute("aria-selected"))}},t.prototype.getItemData=function(){var e,t,i,s=this.fields;return e=this.itemData,sf.base.isNullOrUndefined(e)||(t=sf.base.getValue(s.value,e),i=sf.base.getValue(s.text,e)),{value:sf.base.isNullOrUndefined(e)||sf.base.isUndefined(t)?e:t,text:sf.base.isNullOrUndefined(e)||sf.base.isUndefined(t)?e:i}},t.prototype.onChangeEvent=function(e){var t=this.getItemData(),i=this.isSelectCustom?null:this.activeIndex;this.setProperties({index:i,text:t.text,value:t.value},!0),this.detachChangeEvent(e)},t.prototype.detachChanges=function(e){return"string"==typeof e||"boolean"==typeof e||"number"==typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e},t.prototype.detachChangeEvent=function(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=sf.base.isNullOrUndefined(this.text)?"":this.text,!this.initial){var t=this.detachChanges(this.itemData),i=void 0;i="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();var s={e:e,item:this.item,itemData:t,previousItem:this.previousSelectedLI,previousItemData:i,isInteracted:!!e,value:this.value,element:this.element};this.trigger("change",s)}!sf.base.isNullOrUndefined(this.value)&&""!==this.value||"Always"===this.floatLabelType||sf.base.removeClass([this.inputWrapper.container],"e-valid-input")},t.prototype.setHiddenValue=function(){if(sf.base.isNullOrUndefined(this.value))this.isServerBlazor||(this.hiddenElement.innerHTML="");else if(this.isServerBlazor&&this.hiddenElement.querySelector("option"))(e=this.hiddenElement.querySelector("option")).textContent=this.text,e.setAttribute("value",this.value.toString());else if(!this.isServerBlazor){var e;this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",(e=this.hiddenElement.querySelector("option")).setAttribute("value",this.value.toString())}},t.prototype.onFilterUp=function(e){if(e.ctrlKey&&86===e.keyCode||!this.isValidKey&&40!==e.keyCode&&38!==e.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,e.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(e)),this.preventAltUp=!1,e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0||""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"autocomplete"===this.getModuleName()&&this.hidePopup()),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}},t.prototype.onFilterDown=function(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},t.prototype.removeFillSelection=function(){if(this.isInteracted){var e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}},t.prototype.getQuery=function(e){var t;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){t=e?e.clone():this.query?this.query.clone():new sf.data.Query;var i=""===this.typedString?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof sf.data.DataManager||"string"!==s)&&"number"!==s){var l=this.fields.text?this.fields.text:"";t.where(l,i,this.typedString,this.ignoreCase,this.ignoreAccent)}else t.where("",i,this.typedString,this.ignoreCase,this.ignoreAccent)}else t=e||(this.query?this.query:new sf.data.Query);return t},t.prototype.getSelectionPoints=function(){var e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},t.prototype.searchLists=function(e){var t=this;(this.isTyped=!0,this.activeIndex=null,this.filterInput.parentElement.querySelector("."+g.clearIcon))&&(this.filterInput.parentElement.querySelector("."+g.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible");if(this.isDataFetched=!1,this.isFiltering())if(this.isServerBlazor)this.beforePopupOpen="combobox"===this.getModuleName()&&this.isFiltering()&&!this.beforePopupOpen?!this.beforePopupOpen:this.beforePopupOpen,""===this.filterInput.value&&"dropdownlist"!==this.getModuleName()?this.interopAdaptor.invokeMethodAsync("OnServerRenderList",this.beforePopupOpen,!1):this.interopAdaptor.invokeMethodAsync("OnServerFilter",this.filterInput.value);else{var i={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(e,s,l){i.cancel||(t.isCustomFilter=!0,t.filteringAction(e,s,l))},baseEventArgs:e,cancel:!1};this.trigger("filtering",i,(function(e){e.cancel||t.isCustomFilter||e.preventDefaultAction||t.filteringAction(t.dataSource,null,t.fields)}))}},t.prototype.filter=function(e,t,i){this.isCustomFilter=!0,this.filteringAction(e,t,i)},t.prototype.filteringAction=function(e,t,i){sf.base.isNullOrUndefined(this.filterInput)||(this.beforePopupOpen=!0,""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,t=""===this.filterInput.value.trim()?null:t,this.resetList(e,i,t)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,sf.base.isNullOrUndefined(this.actionCompleteData.ulElement)||sf.base.isNullOrUndefined(this.actionCompleteData.list)||this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,sf.base.isNullOrUndefined(this.itemData)||"dropdownlist"!==this.getModuleName()||(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0))},t.prototype.setSearchBox=function(e){if(this.isFiltering()){var t=e.querySelector("."+g.filterParent)?e.querySelector("."+g.filterParent):this.createElement("span",{className:g.filterParent});this.isServerBlazor&&(t.innerHTML=""),this.filterInput=this.createElement("input",{attrs:{type:"text"},className:g.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var i=!1;return sf.base.Browser.isDevice&&(i=!0),this.filterInputObj=sf.inputs.Input.createInput({element:this.filterInput,buttons:i?[g.backIcon,g.filterBarClearIcon]:[g.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),sf.base.append([this.filterInputObj.container],t),sf.base.prepend([t],e),sf.base.attributes(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":this.selectedLI?this.selectedLI.id:null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+g.clearIcon),!sf.base.Browser.isDevice&&this.clearIconElement&&(sf.base.EventHandler.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),sf.base.Browser.isDevice?this.searchKeyModule=new sf.base.KeyboardEvents(this.filterInput,{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.searchKeyModule=new sf.base.KeyboardEvents(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),sf.base.EventHandler.add(this.filterInput,"input",this.onInput,this),sf.base.EventHandler.add(this.filterInput,"keyup",this.onFilterUp,this),sf.base.EventHandler.add(this.filterInput,"keydown",this.onFilterDown,this),sf.base.EventHandler.add(this.filterInput,"blur",this.onBlur,this),sf.base.EventHandler.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return C},t.prototype.onInput=function(e){this.isValidKey=!0,sf.base.Browser.isDevice&&"mozilla"===sf.base.Browser.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(e))},t.prototype.pasteHandler=function(e){var t=this;setTimeout((function(){t.typedString=t.filterInput.value,t.searchLists(e)}))},t.prototype.onActionFailure=function(t){e.prototype.onActionFailure.call(this,t),this.beforePopupOpen&&this.renderPopup()},t.prototype.onActionComplete=function(t,i,s,l){var a=this;if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){var o=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(e.prototype.onActionComplete.call(this,t,i,s),this.updateSelectElementData(this.allowFiltering),this.isRequested&&!sf.base.isNullOrUndefined(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!sf.base.isNullOrUndefined(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,sf.base.isNullOrUndefined(t)||sf.base.attributes(t,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender&&(this.initial=!0,this.activeIndex=this.index,this.updateValues(),this.initRemoteRender=!1,this.initial=!1,this.value&&this.dataSource instanceof sf.data.DataManager)){var n=sf.base.isNullOrUndefined(this.fields.value)?this.fields.text:this.fields.value;i.some((function(e){return e[n]===a.value}))||this.dataSource.executeQuery(this.getQuery(this.query).where(new sf.data.Predicate(n,"equal",this.value))).then((function(e){e.result.length>0&&(a.addItem(e.result,i.length),a.updateValues())}))}"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&(this.actionCompleteData.isUpdated&&(this.isCustomFilter||this.isFilterFocus||!(this.dataSource instanceof sf.data.DataManager||!sf.base.isNullOrUndefined(this.dataSource)&&!sf.base.isNullOrUndefined(this.dataSource.length)&&0!==this.dataSource.length))||(this.actionCompleteData={ulElement:t.cloneNode(!0),list:i,isUpdated:!0}),this.addNewItem(i,o),sf.base.isNullOrUndefined(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup()}},t.prototype.addNewItem=function(e,t){var i=this;if(!sf.base.isNullOrUndefined(this.itemData)&&!sf.base.isNullOrUndefined(t)){var s=this.getItemData().value;e.some((function(e){return("string"==typeof e||"number"==typeof e)&&e===s||sf.base.getValue(i.fields.value,e)===s}))||this.addItem(this.itemData)}},t.prototype.updateActionCompleteData=function(e,t){"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(t)<0&&this.actionCompleteData.list.push(t))},t.prototype.focusIndexItem=function(){var e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);var t=this.findListElement(this.list,"li","data-value",e);this.selectedLI=t,this.activeItem(t),this.removeFocus()},t.prototype.updateSelection=function(){var e=this.list.querySelector("."+m.selected);e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+m.li).classList.add(g.focus))},t.prototype.removeFocus=function(){var e=this.list.querySelectorAll("."+g.focus);e&&e.length&&sf.base.removeClass(e,g.focus)},t.prototype.renderPopup=function(){var e=this;if(this.popupObj&&document.body.contains(this.popupObj.element))this.refreshPopup();else{this.trigger("beforeOpen",{cancel:!1},(function(t){if(t.cancel)e.beforePopupOpen=!1;else{var i=e.serverPopupEle?e.serverPopupEle:e.createElement("div",{id:e.element.id+"_popup",className:"e-ddl e-popup "+(null!=e.cssClass?e.cssClass:"")}),s=e.setSearchBox(i);if(e.listHeight=sf.base.formatUnit(e.popupHeight),e.headerTemplate&&!e.isServerBlazor&&e.setHeaderTemplate(i),sf.base.append([e.list],i),e.footerTemplate&&!e.isServerBlazor&&e.setFooterTemplate(i),e.isServerRendered&&i&&i.querySelector(".e-ddl-footer")&&i.appendChild(i.querySelector(".e-ddl-footer")),document.body.appendChild(i),e.updateServerPopup(i),i.style.visibility="hidden","auto"!==e.popupHeight){if(e.searchBoxHeight=0,sf.base.isNullOrUndefined(s.container)||(e.searchBoxHeight=s.container.parentElement.getBoundingClientRect().height,e.listHeight=(parseInt(e.listHeight,10)-e.searchBoxHeight).toString()+"px"),e.headerTemplate||e.isServerRendered&&i&&i.querySelector(".e-ddl-header")){e.header=e.header?e.header:i.querySelector(".e-ddl-header");var l=Math.round(e.header.getBoundingClientRect().height);e.listHeight=(parseInt(e.listHeight,10)-(l+e.searchBoxHeight)).toString()+"px"}if(e.footerTemplate||e.isServerRendered&&i&&i.querySelector(".e-ddl-footer")){e.footer=e.footer?e.footer:i.querySelector(".e-ddl-footer");l=Math.round(e.footer.getBoundingClientRect().height);e.listHeight=(parseInt(e.listHeight,10)-(l+e.searchBoxHeight)).toString()+"px"}e.list.style.maxHeight=(parseInt(e.listHeight,10)-2).toString()+"px",i.style.maxHeight=sf.base.formatUnit(e.popupHeight)}else i.style.height="auto";var a=0,o=void 0;if(!sf.base.isNullOrUndefined(e.selectedLI)&&!sf.base.isNullOrUndefined(e.activeIndex)&&e.activeIndex>=0?e.setScrollPosition():e.list.scrollTop=0,sf.base.Browser.isDevice&&!e.allowFiltering&&("dropdownlist"===e.getModuleName()||e.isDropDownClick&&"combobox"===e.getModuleName())){a=e.getOffsetValue(i);var n=e.isEmptyList()?e.list:e.liCollections[0];o=-(parseInt(getComputedStyle(n).textIndent,10)-parseInt(getComputedStyle(e.inputElement).paddingLeft,10)+parseInt(getComputedStyle(e.inputElement.parentElement).borderLeftWidth,10))}e.getFocusElement(),e.createPopup(i,a,o),e.checkCollision(i),sf.base.Browser.isDevice&&(e.popupObj.element.classList.add(g.device),("dropdownlist"===e.getModuleName()||"combobox"===e.getModuleName()&&!e.allowFiltering&&e.isDropDownClick)&&(e.popupObj.collision={X:"fit",Y:"fit"}),e.isFilterLayout()&&(e.popupObj.element.classList.add(g.mobileFilter),e.popupObj.position={X:0,Y:0},e.popupObj.dataBind(),sf.base.attributes(e.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),sf.base.addClass([document.body,e.popupObj.element],g.popupFullScreen),e.setSearchBoxPosition(),e.backIconElement=s.container.querySelector(".e-back-icon"),e.clearIconElement=s.container.querySelector("."+g.clearIcon),sf.base.EventHandler.add(e.backIconElement,"click",e.clickOnBackIcon,e),sf.base.EventHandler.add(e.clearIconElement,"click",e.clearText,e))),i.style.visibility="visible",sf.base.addClass([i],"e-popup-close");for(var r=0,h=e.popupObj.getScrollableParent(e.inputWrapper.container);r<h.length;r++){var p=h[r];sf.base.EventHandler.add(p,"scroll",e.scrollHandler,e)}sf.base.Browser.isDevice&&e.isFilterLayout()&&sf.base.EventHandler.add(e.list,"scroll",e.listScroll,e),sf.base.attributes(e.targetElement(),{"aria-expanded":"true"});var u=e.isFiltering()?e.filterInput.parentElement:e.inputWrapper.container;sf.base.addClass([u],[g.inputFocus]);e.beforePopupOpen=!0;var c={popup:sf.base.isBlazor()&&e.isServerRendered?null:e.popupObj,cancel:!1,animation:{name:"FadeIn",duration:100}};e.trigger("open",c,(function(t){t.cancel?(e.beforePopupOpen=!1,e.destroyPopup()):(e.serverBlazorUpdateSelection(),e.bindServerScrollEvent(),sf.base.addClass([e.inputWrapper.container],[g.iconAnimation]),e.popupObj.show(new sf.base.Animation(t.animation),1e3===e.zIndex?e.element:null))}))}}))}},t.prototype.checkCollision=function(e){(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&(sf.popups.isCollide(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"))},t.prototype.serverBlazorUpdateSelection=function(){(this.isServerBlazor&&(null!==this.value||null!==this.index||null!==this.text)||"dropdownlist"!==this.getModuleName()&&!this.isTyped)&&("dropdownlist"===this.getModuleName()&&(this.removeSelection(),this.removeFocus(),this.removeHover(),this.updateValues()),"combobox"===this.getModuleName()&&this.ulElement&&this.findListElement(this.ulElement,"li","data-value",this.value)&&!this.isTyped&&this.updateValues(),this.isServerBlazor&&"dropdownlist"!==this.getModuleName()&&(""===this.text||null===this.text)&&this.ulElement&&(this.ulElement.querySelector("li").classList.contains(m.hover)||sf.base.addClass([this.ulElement.querySelector("li")],m.hover)))},t.prototype.bindServerScrollEvent=function(){this.isServerBlazor&&this.list&&this.fields.groupBy&&!this.isGroupChecking&&(sf.base.EventHandler.remove(this.list,"scroll",this.setFloatingHeader),sf.base.EventHandler.add(this.list,"scroll",this.setFloatingHeader,this))},t.prototype.updateServerPopup=function(e){this.isServerBlazor&&(e&&e.querySelector("li")&&sf.base.removeClass([this.list],["e-nodata"]),this.initial=!1,e.removeAttribute("style"))},t.prototype.getOffsetValue=function(e){var t=getComputedStyle(e),i=parseInt(t.borderTopWidth,10),s=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+s)},t.prototype.createPopup=function(e,t,i){var s=this;this.popupObj=new sf.popups.Popup(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:t,enableRtl:this.enableRtl,offsetX:i,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){s.isDocumentClick||s.focusDropDown();var e="autocomplete"===s.getModuleName();s.DropDownBaseresetBlazorTemplates(e,e,!0,!0,!1,!0,!0),s.isNotSearchList=!1,s.isDocumentClick=!1,s.destroyPopup();var t=sf.base.closest(s.inputElement,"form");s.isFiltering()&&t&&s.actionCompleteData.list&&s.actionCompleteData.list[0]&&(s.isActive=!0,s.onActionComplete(s.actionCompleteData.ulElement,s.actionCompleteData.list,null,!0))},open:function(){sf.base.EventHandler.add(document,"mousedown",s.onDocumentClick,s),s.isPopupOpen=!0;var e=s.actionCompleteData&&s.actionCompleteData.ulElement&&s.actionCompleteData.ulElement.querySelector("li"),t=s.list.querySelector("ul li");s.isFiltering()&&s.itemTemplate&&s.element.tagName===s.getNgDirective()&&e&&t&&e.textContent!==t.textContent&&s.cloneElements(),s.isFilterLayout()&&(sf.base.removeClass([s.inputWrapper.container],[g.inputFocus]),s.isFilterFocus=!0,s.filterInput.focus(),s.inputWrapper.clearButton&&sf.base.addClass([s.inputWrapper.clearButton],g.clearIconHide)),s.activeStateChange()},targetExitViewport:function(){sf.base.Browser.isDevice||s.hidePopup()}})},t.prototype.isEmptyList=function(){return!sf.base.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length},t.prototype.getFocusElement=function(){},t.prototype.isFilterLayout=function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering},t.prototype.scrollHandler=function(){sf.base.Browser.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()},t.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";var t=this.filterInput.parentElement.querySelector("."+g.clearIcon);sf.base.detach(this.filterInput),t.parentElement.insertBefore(this.filterInput,t)},t.prototype.setPopupPosition=function(e){var t,i=e,s=this.list.querySelector("."+g.focus)||this.selectedLI,l=this.isEmptyList()?this.list:this.liCollections[0],a=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],o=l.getBoundingClientRect().height,n=this.list.offsetHeight/2,r=sf.base.isNullOrUndefined(s)?l.offsetTop:s.offsetTop;if(a.offsetTop-n<r&&!sf.base.isNullOrUndefined(this.liCollections)&&this.liCollections.length>0&&!sf.base.isNullOrUndefined(s)){var h=this.list.offsetHeight/o,p=parseInt(getComputedStyle(this.list).paddingBottom,10);t=(h-(this.liCollections.length-this.activeIndex))*o-i+p,this.list.scrollTop=s.offsetTop}else r>n?(t=n-o/2,this.list.scrollTop=r-n+o/2):t=r;return-(t=t+o+i-(o-this.inputWrapper.container.offsetHeight)/2)},t.prototype.setWidth=function(){var e=sf.base.formatUnit(this.popupWidth);e.indexOf("%")>-1&&(e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px");if(sf.base.Browser.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var t=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return e},t.prototype.scrollBottom=function(e){if(!sf.base.isNullOrUndefined(this.selectedLI)){var t=this.list.offsetHeight,i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,s=this.list.scrollTop+i-t;s=e?s+2*parseInt(getComputedStyle(this.list).paddingTop,10):s;var l=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;l=this.fields.groupBy&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?l-this.fixedHeaderElement.offsetHeight:l,0===this.activeIndex?this.list.scrollTop=0:(i>t||!(l>0&&this.list.offsetHeight>l))&&(this.list.scrollTop=s)}},t.prototype.scrollTop=function(){if(!sf.base.isNullOrUndefined(this.selectedLI)){var e=this.selectedLI.offsetTop-this.list.scrollTop;this.selectedLI.offsetTop,this.selectedLI.offsetHeight,this.list.scrollTop;e=this.fields.groupBy&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;var t=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:t>0&&this.list.offsetHeight>t||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},t.prototype.isEditTextBox=function(){return!1},t.prototype.isFiltering=function(){return this.allowFiltering},t.prototype.isPopupButton=function(){return!0},t.prototype.setScrollPosition=function(e){if(sf.base.isNullOrUndefined(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},t.prototype.clearText=function(){this.filterInput.value="",this.searchLists(null)},t.prototype.listScroll=function(){this.filterInput.blur()},t.prototype.setEleWidth=function(e){sf.base.isNullOrUndefined(e)||("number"==typeof e?this.inputWrapper.container.style.width=sf.base.formatUnit(e):"string"==typeof e&&(this.inputWrapper.container.style.width=e.match(/px|%|em/)?e:sf.base.formatUnit(e)))},t.prototype.closePopup=function(e){var t=this;if(this.isTyped=!1,this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){sf.base.EventHandler.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var i=0,s=this.popupObj.getScrollableParent(this.inputWrapper.container);i<s.length;i++){var l=s[i];sf.base.EventHandler.remove(l,"scroll",this.scrollHandler)}sf.base.Browser.isDevice&&this.isFilterLayout()&&(sf.base.removeClass([document.body,this.popupObj.element],g.popupFullScreen),sf.base.EventHandler.remove(this.list,"scroll",this.listScroll)),this.isFilterLayout()&&(sf.base.Browser.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&sf.base.EventHandler.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(sf.base.EventHandler.remove(this.backIconElement,"click",this.clickOnBackIcon),sf.base.EventHandler.remove(this.clearIconElement,"click",this.clearText)),sf.base.EventHandler.remove(this.filterInput,"input",this.onInput),sf.base.EventHandler.remove(this.filterInput,"keyup",this.onFilterUp),sf.base.EventHandler.remove(this.filterInput,"keydown",this.onFilterDown),sf.base.EventHandler.remove(this.filterInput,"blur",this.onBlur),sf.base.EventHandler.remove(this.filterInput,"paste",this.pasteHandler),this.filterInput=null),sf.base.attributes(this.targetElement(),{"aria-expanded":"false","aria-activedescendant":null}),this.inputWrapper.container.classList.remove(g.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1;var a={name:"FadeOut",duration:100,delay:e||0},o={popup:sf.base.isBlazor()&&this.isServerRendered?null:this.popupObj,cancel:!1,animation:a};this.trigger("close",o,(function(e){if(!sf.base.isNullOrUndefined(t.popupObj)&&!sf.base.isNullOrUndefined(t.popupObj.element.querySelector(".e-fixed-head"))){var i=t.popupObj.element.querySelector(".e-fixed-head");i.parentNode.removeChild(i),t.fixedHeaderElement=null}e.cancel||("autocomplete"!==t.getModuleName()||t.isServerBlazor||t.rippleFun(),t.isPopupOpen?t.popupObj.hide(new sf.base.Animation(e.animation)):t.destroyPopup())}))}},t.prototype.destroyPopup=function(){var e=document.querySelector("#"+this.element.id+"_popup_holder");this.isServerBlazor&&this.serverPopupEle&&e&&e.appendChild(this.serverPopupEle),this.isServerBlazor&&this.interopAdaptor.invokeMethodAsync("OnServerClosePopup"),this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),sf.base.detach(this.popupObj.element)},t.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},t.prototype.render=function(){if(this.isServerBlazor)this.inputElement=this.element,this.inputWrapper={container:this.element.parentElement},this.hiddenElement=this.inputWrapper.container.querySelector("select"),this.inputWrapper.buttons=[this.inputWrapper.container.querySelector(".e-input-group-icon.e-ddl-icon")],this.showClearButton&&(this.inputWrapper.clearButton=this.inputWrapper.container.querySelector(".e-clear-icon"),sf.inputs.Input.wireClearBtnEvents(this.element,this.inputWrapper.clearButton,this.inputWrapper.container)),"Auto"===this.floatLabelType&&sf.inputs.Input.wireFloatingEvents(this.element),sf.inputs.Input.bindInitialEvent({element:this.element,buttons:null,customTag:null,floatLabelType:this.floatLabelType,properties:this.properties}),this.setFields(),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.enabled||(this.targetElement().tabIndex=-1),this.element.hasAttribute("autofocus")&&this.focusIn();else{"INPUT"===this.element.tagName?(this.inputElement=this.element,sf.base.isNullOrUndefined(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","textbox"),sf.base.isNullOrUndefined(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text")):(this.inputElement=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var e=this.cssClass;sf.base.isNullOrUndefined(this.cssClass)||""===this.cssClass||(e=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=sf.inputs.Input.createInput({element:this.inputElement,buttons:this.isPopupButton()?[g.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:g.hiddenElement}}),sf.base.prepend([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setFields(),this.inputWrapper.container.style.width=sf.base.formatUnit(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var t=this.element.getAttribute("id")?this.element.getAttribute("id"):sf.base.getUniqueID("ej2_dropdownlist");if(this.element.id=t,this.hiddenElement.id=t+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),sf.base.attributes(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){var i=this.element;this.value=i.options[i.selectedIndex].value,this.text=sf.base.isNullOrUndefined(this.value)?null:i.options[i.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(e){e.stopImmediatePropagation()},this.inputElement.onchange=function(e){e.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),sf.base.isNullOrUndefined(this.text)||this.inputElement.setAttribute("value",this.text)}this.renderComplete()},t.prototype.setFooterTemplate=function(e){this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),sf.base.addClass([this.footer],g.footer));for(var t=0,i=(this.dropdownCompiler(this.footerTemplate)?sf.base.compile(document.querySelector(this.footerTemplate).innerHTML.trim()):sf.base.compile(this.footerTemplate))({},null,null,this.footerTemplateId,this.isStringTemplate);t<i.length;t++){var s=i[t];this.footer.appendChild(s)}this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!1,!0),sf.base.append([this.footer],e)},t.prototype.setHeaderTemplate=function(e){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),sf.base.addClass([this.header],g.header));for(var t=0,i=(this.dropdownCompiler(this.headerTemplate)?sf.base.compile(document.querySelector(this.headerTemplate).innerHTML.trim()):sf.base.compile(this.headerTemplate))({},null,null,this.headerTemplateId,this.isStringTemplate);t<i.length;t++){var s=i[t];this.header.appendChild(s)}this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!0,!1);var l=e.querySelector("div.e-content");e.insertBefore(this.header,l)},t.prototype.setOldText=function(e){this.text=e},t.prototype.setOldValue=function(e){this.value=e},t.prototype.refreshPopup=function(){sf.base.isNullOrUndefined(this.popupObj)||!document.body.contains(this.popupObj.element)||(!this.allowFiltering||sf.base.Browser.isDevice&&this.isFilterLayout())&&"autocomplete"!==this.getModuleName()||(sf.base.removeClass([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container))},t.prototype.checkDatasource=function(e){e.dataSource&&!sf.base.isNullOrUndefined(Object.keys(e.dataSource))&&this.itemTemplate&&this.allowFiltering&&(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1});var t=-1!==Object.keys(e).indexOf("value")&&sf.base.isNullOrUndefined(e.value),i=-1!==Object.keys(e).indexOf("text")&&sf.base.isNullOrUndefined(e.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(t||i)&&(this.itemData=null)},t.prototype.updateDataSource=function(e){""===this.inputElement.value&&(sf.base.isNullOrUndefined(e)||!sf.base.isNullOrUndefined(e.dataSource)&&(e.dataSource instanceof sf.data.DataManager||0!==e.dataSource.length))||this.clearAll(null,e),(sf.base.isNullOrUndefined(e)||!sf.base.isNullOrUndefined(e.dataSource)&&(e.dataSource instanceof sf.data.DataManager||0!==e.dataSource.length))&&this.resetList(this.dataSource),this.isCustomFilter||this.isFilterFocus||document.activeElement===this.filterInput||this.checkCustomValue()},t.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.setProperties({value:e.value,text:e.text})},t.prototype.updateInputFields=function(){"dropdownlist"===this.getModuleName()&&sf.inputs.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onPropertyChanged=function(t,i){"dropdownlist"===this.getModuleName()&&(this.isServerBlazor||(this.checkDatasource(t),this.setUpdateInitial(["fields","query","dataSource"],t)));for(var s=0,l=Object.keys(t);s<l.length;s++){var a=l[s];switch(a){case"query":case"dataSource":break;case"htmlAttributes":this.setHTMLAttributes();break;case"width":this.setEleWidth(t.width);break;case"placeholder":sf.inputs.Input.setPlaceholder(t.placeholder,this.inputElement);break;case"filterBarPlaceholder":this.filterInput&&sf.inputs.Input.setPlaceholder(t.filterBarPlaceholder,this.filterInput);break;case"readonly":"dropdownlist"!==this.getModuleName()&&sf.inputs.Input.setReadonly(t.readonly,this.inputElement);break;case"cssClass":this.setCssClass(t.cssClass,i.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnable();break;case"text":if(null===t.text){this.clearAll();break}if(this.list||(this.dataSource instanceof sf.data.DataManager&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var o=this.getElementByText(t.text);this.checkValidLi(o)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(t.text,i.text,"text"):this.setOldText(i.text)),this.updateInputFields()}break;case"value":if(null===t.value){this.clearAll();break}if(this.notify("beforeValueChange",{newProp:t}),this.list||(this.dataSource instanceof sf.data.DataManager&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var n=this.getElementByValue(t.value);this.checkValidLi(n)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(t.value,i.value,"value"):this.setOldValue(i.value)),this.updateInputFields()}break;case"index":if(null===t.index){this.clearAll();break}if(this.list||(this.dataSource instanceof sf.data.DataManager&&(this.initRemoteRender=!0),this.renderList()),!this.initRemoteRender){var r=this.liCollections[t.index];this.checkValidLi(r)||(this.liCollections&&100===this.liCollections.length&&"autocomplete"===this.getModuleName()&&this.listData.length>100?this.setSelectionData(t.index,i.index,"index"):this.index=i.index),this.updateInputFields()}break;case"footerTemplate":this.popupObj&&this.setFooterTemplate(this.popupObj.element);break;case"headerTemplate":this.popupObj&&this.setHeaderTemplate(this.popupObj.element);break;case"valueTemplate":sf.base.isNullOrUndefined(this.itemData)||null==this.valueTemplate||this.setValueTemplate();break;case"allowFiltering":this.allowFiltering&&(this.actionCompleteData={ulElement:this.ulElement,list:this.listData,isUpdated:!0},this.updateSelectElementData(this.allowFiltering));break;case"floatLabelType":sf.inputs.Input.removeFloating(this.inputWrapper),sf.inputs.Input.addFloating(this.inputElement,t.floatLabelType,this.placeholder,this.createElement);break;case"showClearButton":sf.inputs.Input.setClearButton(t.showClearButton,this.inputElement,this.inputWrapper,null,this.createElement),this.bindClearEvent();break;default:var h;h=this.getPropObject(a,t,i),e.prototype.onPropertyChanged.call(this,h.newProperty,h.oldProperty)}}},t.prototype.checkValidLi=function(e){return!!this.isValidLI(e)&&(this.setSelection(e,null),!0)},t.prototype.setSelectionData=function(e,t,i){var s,l=this;this.updateListValues=function(){"text"===i?(s=l.getElementByText(e),l.checkValidLi(s)||l.setOldText(t)):"value"===i?(s=l.getElementByValue(e),l.checkValidLi(s)||l.setOldValue(t)):"index"===i&&(s=l.liCollections[e],l.checkValidLi(s)||(l.index=t))}},t.prototype.setCssClass=function(e,t){sf.base.isNullOrUndefined(t)||(t=t.replace(/\s+/g," ").trim()),sf.base.isNullOrUndefined(e)||(e=e.replace(/\s+/g," ").trim()),sf.inputs.Input.setCssClass(e,[this.inputWrapper.container],t),this.popupObj&&sf.inputs.Input.setCssClass(e,[this.popupObj.element],t)},t.prototype.getModuleName=function(){return"dropdownlist"},t.prototype.showPopup=function(){this.enabled&&(sf.base.isBlazor()&&this.itemTemplate&&this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1),this.beforePopupOpen?this.refreshPopup():(this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(sf.base.isNullOrUndefined(this.list)||!sf.base.isUndefined(this.list)&&this.list.classList.contains(m.noData)||this.isFiltering()&&this.isServerBlazor)&&this.renderList(),this.isServerBlazor||this.invokeRenderPopup(),!this.isServerBlazor||sf.base.isNullOrUndefined(this.list)||"dropdownlist"!==this.getModuleName()&&this.isFiltering()||this.invokeRenderPopup()))},t.prototype.invokeRenderPopup=function(){if(sf.base.Browser.isDevice&&this.isFilterLayout()){var e=this;window.onpopstate=function(){e.hidePopup()},history.pushState({},"")}sf.base.isNullOrUndefined(this.list.children[0])&&!this.list.classList.contains(m.noData)||this.renderPopup(),sf.base.attributes(this.targetElement(),{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})},t.prototype.clientRenderPopup=function(e,t){t?(this.serverPopupEle=t,this.list=t.querySelector(".e-dropdownbase.e-content")?t.querySelector(".e-dropdownbase.e-content"):this.list,this.ulElement=this.list.querySelector("ul"),sf.base.isNullOrUndefined(this.ulElement)&&!this.list.classList.contains(m.noData)&&sf.base.addClass([this.list],[m.noData]),this.liCollections=this.ulElement?this.ulElement.querySelectorAll("."+m.li):[],this.listData=e,"autocomplete"===this.getModuleName()&&this.liCollections.length>0&&this.renderHightSearch(),this.initRemoteRender=!1,this.isPopupOpen||this.serverBlazorUpdateSelection(),this.unWireListEvents(),this.wireListEvents(),this.isServerIncrementalSearch&&this.searchKeyEvent&&(this.isServerIncrementalSearch=!1,this.initial=!1,this.onServerIncrementalSearch(this.searchKeyEvent)),this.isServerNavigation&&this.searchKeyEvent&&("down"===this.searchKeyEvent.action||"up"===this.searchKeyEvent.action?(this.isServerNavigation=!1,this.updateUpDownAction(this.searchKeyEvent)):"home"!==this.searchKeyEvent.action&&"end"!==this.searchKeyEvent.action||(this.isServerNavigation=!1,this.updateHomeEndAction(this.searchKeyEvent))),this.beforePopupOpen&&this.invokeRenderPopup(),"dropdownlist"!==this.getModuleName()&&this.onActionComplete(this.ulElement,this.listData)):null!=e&&this.listData!==e&&(this.listData=e,this.initRemoteRender=!1)},t.prototype.renderHightSearch=function(){},t.prototype.updateclientItemData=function(e){this.listData=e},t.prototype.serverUpdateListElement=function(e,t){this.listData=e,this.ulElement&&(this.liCollections=this.ulElement.querySelectorAll("."+m.li))},t.prototype.hidePopup=function(e){var t=!!this.headerTemplate,i=!!this.headerTemplate;if(this.DropDownBaseresetBlazorTemplates(!1,!1,!1,!1,!1,t,i),this.isEscapeKey&&"dropdownlist"===this.getModuleName())if(sf.inputs.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,sf.base.isNullOrUndefined(this.index))this.resetSelection();else{var s=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||s,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup();var l=this.getItemData();""!==this.inputElement.value.trim()||this.isInteracted||!this.isSelectCustom&&(sf.base.isNullOrUndefined(this.selectedLI)||this.inputElement.value===l.text)||(this.isSelectCustom=!1,this.clearAll(e))},t.prototype.focusIn=function(e){if(this.enabled&&!this.targetElement().classList.contains(g.disable)){var t=!1;this.preventFocus&&sf.base.Browser.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,t=!0),t||this.targetElement().focus(),sf.base.addClass([this.inputWrapper.container],[g.inputFocus]),this.onFocus(e)}},t.prototype.focusOut=function(e){this.enabled&&(this.isTyped=!0,this.hidePopup(e),this.targetElement().blur(),sf.base.removeClass([this.inputWrapper.container],[g.inputFocus]))},t.prototype.destroy=function(){if(this.isActive=!1,(!this.isServerBlazor||this.popupObj&&document.body.contains(this.popupObj.element))&&this.hidePopup(),this.unWireEvent(),this.list&&(this.unWireListEvents(),this.isServerBlazor&&this.fields.groupBy&&!this.isGroupChecking&&sf.base.EventHandler.remove(this.list,"scroll",this.setFloatingHeader)),!this.isServerBlazor){if(this.element&&!this.element.classList.contains("e-"+this.getModuleName()))return;for(var t=["readonly","aria-disabled","aria-placeholder","placeholder","aria-owns","aria-labelledby","aria-haspopup","aria-expanded","aria-activedescendant","autocomplete","aria-readonly","autocorrect","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],i=0;i<t.length;i++)this.inputElement.removeAttribute(t[i]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),sf.inputs.Input.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),sf.base.detach(this.inputWrapper.container),e.prototype.destroy.call(this)}},t.prototype.getItems=function(){return this.list||(this.dataSource instanceof sf.data.DataManager&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?e.prototype.getItems.call(this):[]},t.prototype.getDataByValue=function(t){return e.prototype.getDataByValue.call(this,t)},t.prototype.clear=function(){this.value=null},y([sf.base.Property(null)],t.prototype,"cssClass",void 0),y([sf.base.Property("100%")],t.prototype,"width",void 0),y([sf.base.Property("300px")],t.prototype,"popupHeight",void 0),y([sf.base.Property("100%")],t.prototype,"popupWidth",void 0),y([sf.base.Property(null)],t.prototype,"placeholder",void 0),y([sf.base.Property(null)],t.prototype,"filterBarPlaceholder",void 0),y([sf.base.Property({})],t.prototype,"htmlAttributes",void 0),y([sf.base.Property(null)],t.prototype,"query",void 0),y([sf.base.Property(null)],t.prototype,"valueTemplate",void 0),y([sf.base.Property(null)],t.prototype,"headerTemplate",void 0),y([sf.base.Property(null)],t.prototype,"footerTemplate",void 0),y([sf.base.Property(!1)],t.prototype,"allowFiltering",void 0),y([sf.base.Property(!1)],t.prototype,"readonly",void 0),y([sf.base.Property(null)],t.prototype,"text",void 0),y([sf.base.Property(null)],t.prototype,"value",void 0),y([sf.base.Property(null)],t.prototype,"index",void 0),y([sf.base.Property("Never")],t.prototype,"floatLabelType",void 0),y([sf.base.Property(!1)],t.prototype,"showClearButton",void 0),y([sf.base.Event()],t.prototype,"filtering",void 0),y([sf.base.Event()],t.prototype,"change",void 0),y([sf.base.Event()],t.prototype,"beforeOpen",void 0),y([sf.base.Event()],t.prototype,"open",void 0),y([sf.base.Event()],t.prototype,"close",void 0),y([sf.base.Event()],t.prototype,"blur",void 0),y([sf.base.Event()],t.prototype,"focus",void 0),t=y([sf.base.NotifyPropertyChanges],t)}(v),S=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),x=function(e,t,i,s){var a,o=arguments.length,n=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===("undefined"==typeof Reflect?"undefined":l()(Reflect))&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(n=(o<3?a(n):o>3?a(t,i,n):a(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n},w="e-input-group-icon e-ddt-icon e-icons",k="e-show-chip",O="e-show-clear",A="e-chip-input",B="e-icon-hide",D="e-check",I="e-no-data",T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),x([sf.base.Property("child")],t.prototype,"child",void 0),x([sf.base.Property([])],t.prototype,"dataSource",void 0),x([sf.base.Property("expanded")],t.prototype,"expanded",void 0),x([sf.base.Property("hasChildren")],t.prototype,"hasChildren",void 0),x([sf.base.Property("htmlAttributes")],t.prototype,"htmlAttributes",void 0),x([sf.base.Property("iconCss")],t.prototype,"iconCss",void 0),x([sf.base.Property("imageUrl")],t.prototype,"imageUrl",void 0),x([sf.base.Property("parentValue")],t.prototype,"parentValue",void 0),x([sf.base.Property(null)],t.prototype,"query",void 0),x([sf.base.Property("selected")],t.prototype,"selected",void 0),x([sf.base.Property(null)],t.prototype,"tableName",void 0),x([sf.base.Property("text")],t.prototype,"text",void 0),x([sf.base.Property("tooltip")],t.prototype,"tooltip",void 0),x([sf.base.Property("value")],t.prototype,"value",void 0),t}(sf.base.ChildProperty),L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),x([sf.base.Property(!1)],t.prototype,"autoCheck",void 0),x([sf.base.Property("Auto")],t.prototype,"expandOn",void 0),x([sf.base.Property(!1)],t.prototype,"loadOnDemand",void 0),t}(sf.base.ChildProperty),P=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.filterTimer=null,s.isFilteredData=!1,s.isFilterRestore=!1,s.selectedData=[],s.filterDelayTime=300,s}return S(t,e),t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.preRender=function(){this.inputFocus=!1,this.isPopupOpen=!1,this.isFirstRender=!0,this.isInitialized=!1,this.currentText=null,this.currentValue=null,this.oldValue=null,this.removeValue=!1,this.selectedText=[],this.treeItems=[],this.dataValue=null,this.isNodeSelected=!1,this.isDynamicChange=!1,this.isBlazorPlatForm=sf.base.isBlazor(),this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate",this.keyConfigs={escape:"escape",altUp:"alt+uparrow",altDown:"alt+downarrow",tab:"tab",shiftTab:"shift+tab",end:"end",enter:"enter",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",ctrlA:"ctrl+A"}},t.prototype.render=function(){this.ensureAutoCheck(),"INPUT"===this.element.tagName?(this.inputEle=this.element,sf.base.isNullOrUndefined(this.inputEle.getAttribute("role"))&&this.inputEle.setAttribute("role","textbox"),sf.base.isNullOrUndefined(this.inputEle.getAttribute("type"))&&this.inputEle.setAttribute("type","text")):(this.inputEle=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.parentElement.insertBefore(this.inputEle,this.element)),this.inputObj=sf.inputs.Input.createInput({element:this.inputEle,floatLabelType:this.floatLabelType,buttons:this.showDropDownIcon?[w]:null,properties:{readonly:!0,placeholder:this.placeholder,enabled:this.enabled,cssClass:this.cssClass,enableRtl:this.enableRtl}},this.createElement),this.inputWrapper=this.inputObj.container,this.inputWrapper.classList.contains("e-input-group")||this.inputWrapper.classList.add("e-input-group"),this.showDropDownIcon&&this.inputWrapper.classList.add("e-show-dd-icon"),this.element.tagName===this.getDirective()&&this.element.appendChild(this.inputWrapper),this.createHiddenElement(),this.createClearIcon(),this.inputWrapper.classList.add("e-ddt"),this.setElementWidth(this.width),this.setAttributes(),this.updateDataAttribute(),this.setHTMLAttributes(),this.popupDiv=this.createElement("div",{className:"e-popup-content",attrs:{tabindex:"0"}}),this.popupDiv.classList.add("e-dropdown"),this.tree=this.createElement("div",{id:this.element.id+"_tree"}),this.popupDiv.appendChild(this.tree),document.body.appendChild(this.popupDiv),this.wireTreeEvents(),this.popupDiv.style.display="none",this.renderTree(),this.isRemoteData=this.fields.dataSource instanceof sf.data.DataManager,this.isRemoteData||(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue()),(this.allowMultiSelection||this.showCheckBox)&&"Delimiter"!==this.mode&&this.createChip(),this.wireEvents(),this.oldValue=this.value,this.isInitialized=!0,this.renderComplete()},t.prototype.ensureAutoCheck=function(){this.allowFiltering&&this.treeSettings.autoCheck&&this.setProperties({treeSettings:{autoCheck:!1}},!0)},t.prototype.hideCheckAll=function(e){var t=sf.base.isNullOrUndefined(this.popupEle)?null:this.popupEle.querySelector(".e-selectall-parent");sf.base.isNullOrUndefined(t)||(e&&!t.classList.contains("e-hide-selectall")?sf.base.addClass([t],"e-hide-selectall"):!e&&t.classList.contains("e-hide-selectall")&&sf.base.removeClass([t],"e-hide-selectall"))},t.prototype.renderFilter=function(){this.filterContainer=this.createElement("div",{id:this.element.id+"_filter_wrap",className:"e-filter-wrap"});var e=this.createElement("input",{id:this.element.id+"_filter",attrs:{autocomplete:"off","aria-label":this.filterBarPlaceholder}});this.filterContainer.appendChild(e),sf.base.prepend([this.filterContainer],this.popupEle),this.filterObj=new sf.inputs.TextBox({value:"",showClearButton:!0,placeholder:this.filterBarPlaceholder,input:this.filterChangeHandler.bind(this)}),this.filterObj.appendTo("#"+this.element.id+"_filter")},t.prototype.filterChangeHandler=function(e){var t=this;sf.base.isNullOrUndefined(e.value)||(window.clearTimeout(this.filterTimer),this.filterTimer=window.setTimeout((function(){t.filterHandler(e.value,e.event)}),this.filterDelayTime))},t.prototype.filterHandler=function(e,t){var i=this;this.isFilteredData||(this.treeData=this.treeObj.getTreeData());var s=this.cloneFields(this.fields),l={cancel:!1,preventDefaultAction:!1,event:t,text:e,fields:s};this.trigger("filtering",l,(function(t){if(!t.cancel){var s=!1,l=void 0;if(i.isFilteredData=!0,""===e?(i.isFilteredData=!1,i.isFilterRestore=!0,l=i.cloneFields(i.fields)):t.preventDefaultAction?l=t.fields:1===i.treeDataType?l=i.selfReferencefilter(e,t.fields):i.fields.dataSource instanceof sf.data.DataManager?s=!0:l=i.nestedFilter(e,t.fields),i.hideCheckAll(i.isFilteredData),s)return;i.treeObj.fields=i.getTreeFields(l),i.treeObj.dataBind()}}))},t.prototype.nestedFilter=function(e,t){for(var i=[],s=0;s<this.treeData.length;s++){var l=this.nestedChildFilter(e,this.treeData[s]);sf.base.isNullOrUndefined(l)||i.push(l)}return t.dataSource=i,t},t.prototype.nestedChildFilter=function(e,t){var i=t[this.fields.child];if(sf.base.isNullOrUndefined(i))return this.isMatchedNode(e,t)?t:null;for(var s=[],l=0;l<i.length;l++){var a=this.nestedChildFilter(e,i[l]);sf.base.isNullOrUndefined(a)||s.push(a)}return 0!==s.length?(t[this.fields.child]=s,t):(t[this.fields.child]=null,this.isMatchedNode(e,t)?t:null)},t.prototype.selfReferencefilter=function(e,t){for(var i=[],s=[],l=0;l<this.treeData.length;l++)this.isMatchedNode(e,this.treeData[l])&&i.push(this.treeData[l]);for(l=0;l<i.length;l++)if(-1===s.indexOf(i[l])){s.push(i[l]);for(var a=i[l][this.fields.parentValue];!sf.base.isNullOrUndefined(a);){for(var o=null,n=0;n<this.treeData.length;n++){var r=this.treeData[n][this.fields.value];if(!sf.base.isNullOrUndefined(r)&&r===a){o=this.treeData[n];break}}if(sf.base.isNullOrUndefined(o)||-1!==s.indexOf(o))break;s.push(o),a=o[this.fields.parentValue]}}return t.dataSource=s,t},t.prototype.isMatchedNode=function(e,t){var i=t[this.fields.text];return this.ignoreCase&&(i=i.toLowerCase(),e=e.toLowerCase()),this.ignoreAccent&&(i=sf.data.DataUtil.ignoreDiacritics(i),e=sf.data.DataUtil.ignoreDiacritics(e)),"StartsWith"===this.filterType?i.slice(0,e.length)===e:"EndsWith"===this.filterType?i.slice(-e.length)===e:-1!==i.indexOf(e)},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.inputWrapper,"mouseup",this.dropDownClick,this),sf.base.EventHandler.add(this.inputWrapper,"focus",this.focusIn,this),sf.base.EventHandler.add(this.inputWrapper,"blur",this.focusOut,this),sf.base.EventHandler.add(this.inputWrapper,"mousemove",this.mouseIn,this),sf.base.EventHandler.add(this.inputWrapper,"mouseout",this.onMouseLeave,this),sf.base.EventHandler.add(this.overAllClear,"mousedown",this.clearAll,this),sf.base.EventHandler.add(window,"resize",this.windowResize,this),this.keyboardModule=new sf.base.KeyboardEvents(this.inputWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.wireTreeEvents=function(){this.keyboardModule=new sf.base.KeyboardEvents(this.tree,{keyAction:this.treeAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.wireCheckAllWrapperEvents=function(){this.keyboardModule=new sf.base.KeyboardEvents(this.checkAllParent,{keyAction:this.checkAllAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.inputWrapper,"mouseup",this.dropDownClick),sf.base.EventHandler.remove(this.inputWrapper,"focus",this.focusIn),sf.base.EventHandler.remove(this.inputWrapper,"blur",this.focusOut),sf.base.EventHandler.remove(this.inputWrapper,"mousemove",this.mouseIn),sf.base.EventHandler.remove(this.inputWrapper,"mouseout",this.onMouseLeave),sf.base.EventHandler.remove(this.overAllClear,"mousedown",this.clearAll),sf.base.EventHandler.remove(window,"resize",this.windowResize)},t.prototype.dropDownClick=function(e){this.enabled&&!this.readonly&&(this.isClearButtonClick?this.isClearButtonClick=!1:(this.isPopupOpen?this.hidePopup():(this.focusIn(e),this.renderPopup()),this.showOverAllClear()))},t.prototype.mouseIn=function(){!this.enabled&&this.readonly||this.showOverAllClear()},t.prototype.onMouseLeave=function(){this.inputFocus||(sf.base.addClass([this.overAllClear],B),sf.base.removeClass([this.inputWrapper],O))},t.prototype.getDirective=function(){return"EJS-DROPDOWNTREE"},t.prototype.focusOut=function(e){if(this.enabled&&!this.readonly&&this.inputFocus&&(!sf.base.Browser.isIE&&"edge"!==sf.base.Browser.info.name||e.target!==this.inputWrapper)){var t=e.relatedTarget;t===this.inputEle||!sf.base.isNullOrUndefined(t)||e.target===this.inputWrapper&&this.isPopupOpen||this.onFocusOut(e)}},t.prototype.onFocusOut=function(e){if(this.inputFocus=!1,this.isPopupOpen&&this.hidePopup(),this.isClearButtonClick&&(this.isClearButtonClick=!1),this.showClearButton&&(sf.base.addClass([this.overAllClear],B),sf.base.removeClass([this.inputWrapper],O)),sf.base.removeClass([this.inputWrapper],["e-input-focus"]),(this.allowMultiSelection||this.showCheckBox)&&"Delimiter"!==this.mode){var t=!!this.value&&!!this.value.length;(this.chipWrapper&&"Default"===this.mode||"Box"===this.mode&&!t)&&(sf.base.addClass([this.chipWrapper],B),sf.base.removeClass([this.inputWrapper],k),sf.base.removeClass([this.inputEle],A))}this.changeOnBlur&&this.triggerChangeEvent(e),this.removeValue=!1,this.oldValue=this.value,this.trigger("blur")},t.prototype.triggerChangeEvent=function(e){if((!this.compareValues(this.oldValue,this.value)||this.isChipDelete)&&!this.removeValue){var t={e:e,oldValue:this.oldValue,value:this.value,isInteracted:!!e,element:this.element};this.trigger("change",t)}},t.prototype.compareValues=function(e,t){if(null===e||0===e.length)return(null===e||0===e.length)&&t===e;if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},t.prototype.focusIn=function(e){if(this.enabled&&!this.readonly&&!this.inputFocus){this.showOverAllClear(),this.inputFocus=!0,sf.base.addClass([this.inputWrapper],["e-input-focus"]),(this.allowMultiSelection||this.showCheckBox)&&"Default"===this.mode&&this.inputFocus&&(this.chipWrapper&&this.value&&0!==this.value.length&&(sf.base.removeClass([this.chipWrapper],B),sf.base.addClass([this.inputWrapper],k),sf.base.addClass([this.inputEle],A)),this.popupObj&&this.popupObj.refreshPosition());var t={isInteracted:!!e,event:e};this.trigger("focus",t)}},t.prototype.treeAction=function(e){var t=this,i={cancel:!1,event:e};this.trigger("keyPress",i,(function(i){if(i.cancel)e.stopImmediatePropagation();else switch(e.action){case"escape":case"altUp":t.inputWrapper.focus(),e.preventDefault(),t.isPopupOpen&&t.hidePopup();break;case"tab":case"shiftTab":t.isPopupOpen&&t.hidePopup();break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":t.showCheckBox||(t.isValueChange=!0,t.keyEventArgs=e);break;case"space":t.isValueChange=!0,t.keyEventArgs=e;break;case"ctrlA":t.allowMultiSelection&&t.selectAll(!0)}}))},t.prototype.keyActionHandler=function(e){var t=this,i={cancel:!1,event:e};this.trigger("keyPress",i,(function(i){if(!i.cancel)switch(e.action){case"escape":case"altUp":case"shiftTab":case"tab":t.isPopupOpen&&t.hidePopup();break;case"altDown":t.isPopupOpen||(t.showPopup(),e.preventDefault());break;case"moveDown":t.showSelectAll&&t.showCheckBox&&t.checkAllParent.focus()}}))},t.prototype.checkAllAction=function(e){var t=this,i={cancel:!1,event:e};this.trigger("keyPress",i,(function(i){if(!i.cancel)switch(e.action){case"space":t.clickHandler(e);break;case"moveDown":t.treeObj.element.focus()}}))},t.prototype.windowResize=function(){this.popupObj&&(this.popupObj.setProperties({width:this.setWidth()}),this.popupObj.refreshPosition())},t.prototype.getAriaAttributes=function(){return{"aria-disabled":this.enabled?"false":"true","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-labelledby":this.hiddenElement.id}},t.prototype.createHiddenElement=function(){this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:"e-ddt-hidden"}}),sf.base.prepend([this.hiddenElement],this.inputWrapper),this.validationAttribute()},t.prototype.createClearIcon=function(){this.overAllClear=this.createElement("span",{className:"e-clear-icon e-icons"}),sf.base.addClass([this.overAllClear],B),sf.base.removeClass([this.inputWrapper],O),this.showClearButton&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},t.prototype.validationAttribute=function(){var e=this.inputEle.getAttribute("name")?this.inputEle.getAttribute("name"):this.inputEle.getAttribute("id");this.hiddenElement.setAttribute("name",e),this.inputEle.removeAttribute("name");for(var t=["required","aria-required","form"],i=0;i<t.length;i++){var s=this.inputEle.getAttribute(t[i]);s&&(this.hiddenElement.setAttribute(t[i],s),this.inputEle.removeAttribute(t[i]))}},t.prototype.createChip=function(){this.inputWrapper.contains(this.chipWrapper)||(this.chipWrapper=this.createElement("span",{className:"e-chips-wrapper"}),this.chipCollection=this.createElement("span",{className:"e-chips-collection"}),this.chipWrapper.appendChild(this.chipCollection),this.inputWrapper.insertBefore(this.chipWrapper,this.hiddenElement),sf.base.addClass([this.inputWrapper],k),this.getValidMode()&&null!==this.value?sf.base.addClass([this.inputEle],A):null===this.value&&sf.base.addClass([this.chipWrapper],B))},t.prototype.getValidMode=function(){return!(!this.allowMultiSelection&&!this.showCheckBox)&&("Box"===this.mode||!("Default"!==this.mode||!this.inputFocus))},t.prototype.createSelectAllWrapper=function(){this.checkAllParent=this.createElement("div",{className:"e-selectall-parent",attrs:{tabindex:"0"}}),this.selectAllSpan=this.createElement("span",{className:"e-all-text"}),this.selectAllSpan.textContent="";var e=sf.base.closest(this.element,".e-bigger"),t=sf.base.isNullOrUndefined(e)?"":"e-small";this.checkBoxElement=sf.buttons.createCheckBox(this.createElement,!0,{cssClass:t}),this.checkBoxElement.setAttribute("role","checkbox"),this.checkAllParent.appendChild(this.checkBoxElement),this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),sf.base.EventHandler.add(this.checkAllParent,"mouseup",this.clickHandler,this),this.wireCheckAllWrapperEvents()},t.prototype.clickHandler=function(e){var t;if(t=e.currentTarget&&e.currentTarget.classList.contains("e-selectall-parent")?e.currentTarget.firstElementChild.lastElementChild:e.target,this.checkWrapper=sf.base.closest(t,".e-checkbox-wrapper"),!sf.base.isNullOrUndefined(this.checkWrapper)){var i=sf.base.select(".e-frame",this.checkWrapper);this.changeState(this.checkWrapper,i.classList.contains(D)?"uncheck":"check",e)}e.preventDefault()},t.prototype.changeState=function(e,t,i){var s,l=e.getElementsByClassName("e-frame")[0];"check"!==t||l.classList.contains(D)?"uncheck"===t&&l.classList.contains(D)&&(l.classList.remove(D),s="false",this.isReverseUpdate||(this.treeObj.uncheckAll(),this.changeOnBlur||this.triggerChangeEvent(i)),this.setLocale(!1)):(l.classList.add(D),s="true",this.isReverseUpdate||(this.treeObj.checkAll(),this.changeOnBlur||this.triggerChangeEvent(i)),this.setLocale(!0)),this.setMultiSelect(),this.ensurePlaceHolder(),s="check"===t?"true":"false",sf.base.isNullOrUndefined(s)||e.setAttribute("aria-checked",s)},t.prototype.setLocale=function(e){if(this.selectAllSpan)if("Select All"!==this.selectAllText||"Unselect All"!==this.unSelectAllText){var t=e?this.unSelectAllText:this.selectAllText;this.selectAllSpan.textContent="";for(var i=0,s=sf.base.compile(t)({},null,null,null,!this.isStringTemplate);i<s.length;i++){var l=s[i];this.selectAllSpan.textContent=l.textContent}}else this.selectAllSpan.textContent=e?this.unSelectAllText:this.selectAllText},t.prototype.setAttributes=function(){this.element.removeAttribute("tabindex");var e=this.element.getAttribute("id");this.hiddenElement.id=e+"_hidden",this.inputWrapper.setAttribute("tabindex","0"),sf.base.attributes(this.inputWrapper,this.getAriaAttributes())},t.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if("class"===i)this.inputWrapper.classList.add(this.htmlAttributes[i]);else if("disabled"===i&&"disabled"===this.htmlAttributes[i])this.setProperties({enabled:!1},!0),this.setEnable();else if("readonly"!==i||sf.base.isNullOrUndefined(this.htmlAttributes[i]))if("style"===i)this.inputWrapper.setAttribute("style",this.htmlAttributes[i]);else{0===i.indexOf("data")||["name","required"].indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[i]):["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"].indexOf(i)>-1?"placeholder"===i?sf.inputs.Input.setPlaceholder(this.htmlAttributes[i],this.inputEle):this.inputEle.setAttribute(i,this.htmlAttributes[i]):this.inputWrapper.setAttribute(i,this.htmlAttributes[i])}else this.setProperties({readonly:!0},!0),this.dataBind()}},t.prototype.updateDataAttribute=function(){for(var e=this.htmlAttributes,t=["class","style","id","type"],i={},s=0;s<this.element.attributes.length;s++)-1===t.indexOf(this.element.attributes[s].name)&&"readonly"!==this.element.attributes[s].name&&(i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));sf.base.extend(i,e,i),this.setProperties({htmlAttributes:i},!0)},t.prototype.showOverAllClear=function(){this.enabled&&!this.readonly&&(this.overAllClear&&(!!this.value&&!!this.value.length&&this.showClearButton?(sf.base.removeClass([this.overAllClear],B),sf.base.addClass([this.inputWrapper],O)):(sf.base.addClass([this.overAllClear],B),sf.base.removeClass([this.inputWrapper],O))))},t.prototype.setTreeValue=function(){if(null!==this.value&&0!==this.value.length){var e=void 0;if(this.showCheckBox||this.allowMultiSelection){for(var t=0;t<this.value.length;t++)e=this.treeObj.getTreeData(this.value[t])[0],sf.base.isNullOrUndefined(e)&&this.value.splice(this.value.indexOf(this.value[t]),1);0!==this.value.length&&this.setValidValue()}else e=this.treeObj.getTreeData(this.value[0])[0],sf.base.isNullOrUndefined(e)?this.setProperties({value:this.currentValue},!0):(this.setProperties({text:e[this.fields.text]},!0),this.setValidValue())}},t.prototype.setTreeText=function(){if((null===this.value||this.isInitialized)&&null!==this.text){var e=void 0,t=[];if(this.showCheckBox||this.allowMultiSelection){for(var i=this.text.split(this.delimiterChar),s=0;s<i.length;s++)e=this.getItems(i[s]),sf.base.isNullOrUndefined(e)||t.push(e[this.fields.value].toString());0!==t.length?(this.oldValue=this.value,this.setProperties({value:t},!0),this.setValidValue()):this.setProperties({text:this.currentText},!0)}else e=this.getItems(this.text),sf.base.isNullOrUndefined(e)?this.setProperties({text:this.currentText},!0):(this.oldValue=this.value,this.setProperties({value:[e[this.fields.value].toString()]},!0),this.setValidValue())}},t.prototype.setSelectedValue=function(){null==this.value&&(this.isInitialized||(this.oldValue=this.value,this.treeObj.selectedNodes.length>0&&!this.showCheckBox?(this.setProperties({value:this.treeObj.selectedNodes},!0),this.allowMultiSelection&&this.updateMode()):this.showCheckBox&&this.treeObj.checkedNodes&&this.treeObj.checkedNodes.length>0&&(this.setProperties({value:this.treeObj.checkedNodes},!0),sf.base.setValue("selectedNodes",[],this.treeObj),this.treeObj.dataBind(),this.updateMode()),this.updateSelectedValues(),this.currentText=this.text,this.currentValue=this.value))},t.prototype.setValidValue=function(){if(this.showCheckBox||this.allowMultiSelection)this.showCheckBox?(this.treeObj.checkedNodes=this.value.slice(),sf.base.setValue("selectedNodes",[],this.treeObj),this.treeObj.dataBind(),this.setMultiSelect()):(this.treeObj.selectedNodes=this.value.slice(),this.selectedText=[],this.updateSelectedValues()),this.treeObj.dataBind();else{sf.inputs.Input.setValue(this.text,this.inputEle,this.floatLabelType);var e=this.value[0].toString();this.treeObj.selectedNodes[0]!==e&&sf.base.setValue("selectedNodes",[e],this.treeObj)}this.currentText=this.text,this.currentValue=this.value,this.isInitialized&&this.triggerChangeEvent()},t.prototype.getItems=function(e){var t;if(1===this.treeDataType)for(var i=0;i<this.treeItems.length;i++){var s=sf.base.getValue(this.fields.text,this.treeItems[i]);if(!sf.base.isNullOrUndefined(this.treeItems[i])&&!sf.base.isNullOrUndefined(s)&&s===e){t=this.treeItems[i];break}}else t=this.getNestedItems(this.treeItems,this.fields,e);return t},t.prototype.getNestedItems=function(e,t,i){for(var s,l=0,a=e.length;l<a;l++){var o=sf.base.getValue(this.fields.text,e[l]);if(e[l]&&o&&o.toString()===i)return e[l];if("string"!=typeof t.child||sf.base.isNullOrUndefined(sf.base.getValue(t.child,e[l]))){if(this.fields.dataSource instanceof sf.data.DataManager&&!sf.base.isNullOrUndefined(sf.base.getValue("child",e[l]))){if(void 0!==(s=this.getNestedItems(sf.base.getValue("child",e[l]),this.getChildType(t),i)))break}}else{var n=sf.base.getValue(t.child,e[l]);if(void 0!==(s=this.getNestedItems(n,this.getChildType(t),i)))break}}return s},t.prototype.getChildType=function(e){return"string"==typeof e.child||sf.base.isNullOrUndefined(e.child)?e:e.child},t.prototype.renderTree=function(){this.treeObj=new sf.navigations.TreeView({fields:this.getTreeFields(this.fields),enableRtl:this.enableRtl,nodeSelected:this.onNodeSelected.bind(this),nodeChecked:this.onNodeChecked.bind(this),nodeChecking:this.beforeCheck.bind(this),actionFailure:this.onActionFailure.bind(this),nodeClicked:this.onNodeClicked.bind(this),dataBound:this.OnDataBound.bind(this),allowMultiSelection:this.allowMultiSelection,showCheckBox:this.showCheckBox,autoCheck:this.treeSettings.autoCheck,sortOrder:this.sortOrder,expandOn:this.treeSettings.expandOn,loadOnDemand:this.treeSettings.loadOnDemand,nodeSelecting:this.onBeforeSelect.bind(this),nodeTemplate:this.itemTemplate}),this.treeObj.appendTo("#"+this.tree.id)},t.prototype.renderPopup=function(){var e=this;this.isFilteredData&&(this.filterObj.value="",this.treeObj.fields=this.getTreeFields(this.fields),this.isFilterRestore=!0,this.isFilteredData=!1,this.hideCheckAll(!1));var t=!1;this.trigger("beforeOpen",{cancel:!1},(function(i){if(i.cancel?t=!0:(sf.base.addClass([e.inputWrapper],["e-icon-anim"]),e.isFirstRender?(e.popupEle=e.createElement("div",{id:e.element.id+"_popup",className:"e-ddt e-popup "+(null!=e.cssClass?e.cssClass:"")}),document.body.appendChild(e.popupEle),e.createPopup(e.popupEle)):e.popupEle=e.popupObj.element),e.isFirstRender&&!t&&(sf.base.prepend([e.popupDiv],e.popupEle),e.popupDiv.style.display="block",e.allowFiltering&&e.renderFilter(),e.showCheckBox&&e.showSelectAll&&!e.popupDiv.classList.contains(I)&&(e.createSelectAllWrapper(),e.popupEle.insertBefore(e.checkAllParent,e.popupDiv)),e.headerTemplate&&e.setHeaderTemplate(),e.footerTemplate&&e.setFooterTemplate(),e.isFirstRender=!1),!t){if(sf.base.attributes(e.inputWrapper,{"aria-expanded":"true"}),e.popupObj.show(),e.popupObj.refreshPosition(),e.popupEle.style.display="block",e.updatePopupHeight(),e.showCheckBox&&e.showSelectAll||e.popupDiv.classList.contains(I)||!(e.treeItems.length>0)||e.treeObj.element.focus(),e.checkSelectAll&&e.checkBoxElement){var s=sf.base.closest(e.checkBoxElement,".e-checkbox-wrapper");e.changeState(s,"check"),e.checkSelectAll=!1}var l={popup:e.popupObj};e.trigger("open",l)}}))},t.prototype.updatePopupHeight=function(){if(!this.isFirstRender){var e=this.getHeight();if(this.popupEle.style.maxHeight=e,this.allowFiltering){var t=Math.round(this.filterContainer.getBoundingClientRect().height);e=sf.base.formatUnit(parseInt(e,10)-t+"px")}if(this.headerTemplate){t=Math.round(this.header.getBoundingClientRect().height);e=sf.base.formatUnit(parseInt(e,10)-t+"px")}if(this.showCheckBox&&this.showSelectAll){t=Math.round(this.checkAllParent.getBoundingClientRect().height);e=sf.base.formatUnit(parseInt(e,10)-t+"px")}if(this.footerTemplate){t=Math.round(this.footer.getBoundingClientRect().height);e=sf.base.formatUnit(parseInt(e,10)-t+"px")}var i=parseInt(window.getComputedStyle(this.popupEle).borderTopWidth,10);i+=parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth,10),e=sf.base.formatUnit(parseInt(e,10)-i+"px"),this.popupDiv.style.maxHeight=e}},t.prototype.createPopup=function(e){var t=this;this.isFirstRender&&(this.popupObj=new sf.popups.Popup(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper,zIndex:this.zIndex,enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},close:function(){t.isPopupOpen=!1},open:function(){sf.base.EventHandler.add(document,"mousedown",t.onDocumentClick,t),t.isPopupOpen=!0}}))},t.prototype.setElementWidth=function(e){var t=this.inputWrapper;sf.base.isNullOrUndefined(e)||("number"==typeof e?t.style.width=sf.base.formatUnit(e):"string"==typeof e&&(t.style.width=e.match(/px|%|em/)?e:sf.base.formatUnit(e)))},t.prototype.setWidth=function(){var e=sf.base.formatUnit(this.popupWidth);e.indexOf("%")>-1?e=(this.inputWrapper.offsetWidth*parseFloat(e)/100).toString()+"px":"string"==typeof this.popupWidth&&(e=this.popupWidth.match(/px|em/)?this.popupWidth:e);return e},t.prototype.getHeight=function(){var e=sf.base.formatUnit(this.popupHeight);e.indexOf("%")>-1?e=(document.documentElement.clientHeight*parseFloat(e)/100).toString()+"px":"string"==typeof this.popupHeight&&(e=this.popupHeight.match(/px|em/)?this.popupHeight:e);return e},t.prototype.onDocumentClick=function(e){var t=e.target,i=sf.base.closest(t,".e-list-parent"),s=sf.base.closest(t,".e-filter-wrap");if(this.isPopupOpen&&(this.inputWrapper.contains(t)||i||s)||(this.allowMultiSelection||this.showCheckBox)&&(this.isPopupOpen&&t.classList.contains("e-chips-close")||this.isPopupOpen&&(t.classList.contains("e-selectall-parent")||t.classList.contains("e-all-text")||t.classList.contains("e-frame"))))this.isDocumentClick=!1;else if(!this.inputWrapper.contains(t)){!(!!t.classList.contains("e-dropdown")||(sf.base.matches(t,".e-ddt .e-popup")||sf.base.matches(t,".e-ddt .e-treeview")))&&this.inputFocus&&this.focusOut(e)}},t.prototype.onActionFailure=function(e){this.trigger("actionFailure",e),this.l10nUpdate(!0),sf.base.addClass([this.popupDiv],I)},t.prototype.OnDataBound=function(e){this.treeItems=e.data,this.treeItems.length<=0?(this.l10nUpdate(),sf.base.addClass([this.popupDiv],I),this.hideCheckAll(!0)):this.popupDiv.classList.contains(I)&&this.treeItems.length>=1&&(sf.base.removeClass([this.popupDiv],I),this.hideCheckAll(!1)),this.treeDataType=this.getTreeDataType(this.treeItems,this.fields),this.isFirstRender&&this.isRemoteData&&(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.treeObj.element.focus());var t={data:e.data};this.trigger("dataBound",t),this.isFilteredData&&this.treeObj.expandAll(),this.isFilterRestore&&(this.restoreFilterSelection(),this.isFilterRestore=!1)},t.prototype.restoreFilterSelection=function(){this.showCheckBox?this.treeObj.checkedNodes=this.value?this.value:[]:this.treeObj.selectedNodes=this.value?this.value:[]},t.prototype.setCssClass=function(e,t){var i=this.popupObj?[this.inputWrapper,this.popupObj.element]:[this.inputWrapper];sf.base.isNullOrUndefined(t)||""===t||sf.base.removeClass(i,t.split(" ")),sf.base.isNullOrUndefined(e)||""===e||sf.base.addClass(i,e.split(" "))},t.prototype.setEnableRTL=function(e){e?this.inputWrapper.classList.add("e-rtl"):this.inputWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind()),this.treeObj&&(this.treeObj.enableRtl=e,this.treeObj.dataBind())},t.prototype.setEnable=function(){sf.inputs.Input.setEnabled(this.enabled,this.inputEle),this.enabled?(sf.base.removeClass([this.inputWrapper],"e-disabled"),this.inputEle.setAttribute("aria-disabled","false"),this.inputWrapper.setAttribute("aria-disabled","false")):(this.isPopupOpen&&this.hidePopup(),sf.base.addClass([this.inputWrapper],"e-disabled"),this.inputWrapper&&this.inputWrapper.classList.contains("e-input-focus")&&sf.base.removeClass([this.inputWrapper],["e-input-focus"]),this.inputEle.setAttribute("aria-disabled","true"),this.inputWrapper.setAttribute("aria-disabled","true"))},t.prototype.cloneFields=function(e){return{dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:this.cloneChildField(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}},t.prototype.cloneChildField=function(e){return"string"==typeof e?e:{dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:e.child?this.cloneChildField(e.child):null,hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}},t.prototype.getTreeFields=function(e){return{dataSource:e.dataSource,id:e.value,text:e.text,parentID:e.parentValue,child:this.getTreeChildren(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,isChecked:e.selected,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}},t.prototype.getTreeChildren=function(e){if("string"==typeof e)return e;if(!sf.base.isNullOrUndefined(e)){var t=void 0;return t=e=this.getActualProperties(e),e.value&&(t.id=e.value),e.parentValue&&(t.parentID=e.parentValue),e.child&&(t.child=this.getTreeChildren(e.child)),e.selected&&this.showCheckBox&&(t.isChecked=e.selected),t}return null},t.prototype.getTreeDataType=function(e,t){if(this.fields.dataSource instanceof sf.data.DataManager){for(var i=0;i<e.length;i++)if("string"==typeof t.child&&sf.base.isNullOrUndefined(sf.base.getValue(t.child,e[i])))return 1;return 2}i=0;for(var s=e.length;i<s;i++){if("string"==typeof t.child&&!sf.base.isNullOrUndefined(sf.base.getValue(t.child,e[i])))return 2;if(!sf.base.isNullOrUndefined(sf.base.getValue(t.parentValue,e[i]))||!sf.base.isNullOrUndefined(sf.base.getValue(t.hasChildren,e[i])))return 1}return 1},t.prototype.setFields=function(){this.resetValue(),this.treeObj.fields=this.getTreeFields(this.fields),this.treeObj.dataBind()},t.prototype.getEventArgs=function(e){var t,i=e.data,s=e.nodeData;return this.showCheckBox&&("check"===e.action?t="select":"uncheck"===e.action&&(t="un-select")),{action:this.showCheckBox?t:e.action,isInteracted:e.isInteracted,item:e.node,itemData:this.showCheckBox?i[0]:s}},t.prototype.onBeforeSelect=function(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value,null===this.value&&this.setProperties({value:[]},!0))},t.prototype.updateHiddenValue=function(){this.allowMultiSelection||this.showCheckBox||(this.value&&this.value.length?this.hiddenElement.innerHTML='<option selected value ="'+this.value[0]+'">'+this.text+"</option>":this.hiddenElement.innerHTML="")},t.prototype.onNodeSelected=function(e){if(!this.showCheckBox){var t;if(e.isInteracted){var i=sf.base.getValue("id",e.nodeData).toString();this.allowMultiSelection?this.allowMultiSelection&&this.setMultiSelect():(this.hiddenElement.innerHTML="",this.setProperties({value:[i]},!0),t=this.itemTemplate?sf.base.getValue("text",this.treeObj.getNode(i)):sf.base.getValue("text",e.nodeData).toString(),sf.inputs.Input.setValue(t,this.inputEle,this.floatLabelType),this.setProperties({text:t},!0),this.currentText=this.text,this.currentValue=this.value,sf.base.attributes(this.inputWrapper,{"aria-describedby":this.element.id}),sf.base.attributes(this.inputWrapper,{"aria-activedescendant":i.toString()}),this.updateHiddenValue(),this.showOverAllClear(),this.hidePopup(),this.isNodeSelected=!0)}var s=this.getEventArgs(e);this.trigger("select",s),this.isValueChange&&!this.changeOnBlur&&(this.triggerChangeEvent(this.keyEventArgs),this.isValueChange=!1)}},t.prototype.onNodeClicked=function(e){!this.changeOnBlur&&this.isNodeSelected&&(this.triggerChangeEvent(e.event),this.isNodeSelected=!1);var t=e.event.target;(t.classList.contains("e-fullrow")||t.classList.contains("e-list-text"))&&this.showCheckBox&&("true"===this.treeObj.getNode(e.node).isChecked?this.treeObj.uncheckAll([e.node]):this.treeObj.checkAll([e.node]),this.setMultiSelect(),this.ensurePlaceHolder());this.changeOnBlur||!this.allowMultiSelection&&!this.showCheckBox||this.triggerChangeEvent(e.event)},t.prototype.onNodeChecked=function(e){var t=this.getEventArgs(e);if(this.trigger("select",t),this.isFilteredData&&"uncheck"===e.action){var i=sf.base.getValue("id",e.data[0]).toString();this.removeSelectedData(i,!0)}if(!this.isChipDelete&&e.isInteracted&&(this.setMultiSelect(),this.ensurePlaceHolder()),this.showSelectAll&&this.checkBoxElement){var s=this.treeObj.element.querySelectorAll("li"),l=this.treeObj.element.querySelectorAll("li .e-checkbox-wrapper[aria-checked=true]"),a=sf.base.closest(this.checkBoxElement,".e-checkbox-wrapper");a&&"uncheck"===e.action?(this.isReverseUpdate=!0,this.changeState(a,"uncheck"),this.isReverseUpdate=!1):a&&"check"===e.action&&l.length===s.length&&(this.isReverseUpdate=!0,this.changeState(a,"check"),this.isReverseUpdate=!1)}},t.prototype.beforeCheck=function(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value)},t.prototype.updateClearButton=function(e){if(e?this.inputWrapper.contains(this.overAllClear)?(sf.base.removeClass([this.overAllClear],B),sf.base.addClass([this.inputWrapper],O)):this.inputEle.parentElement.insertBefore(this.overAllClear,this.inputEle.nextSibling):(sf.base.addClass([this.overAllClear],B),sf.base.removeClass([this.inputWrapper],O)),(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper)for(var t=sf.base.selectAll(".e-chips-close",this.chipWrapper),i=0;i<t.length;i++)e?sf.base.removeClass([t[i]],B):sf.base.addClass([t[i]],B)},t.prototype.updateDropDownIconState=function(e){var t=sf.base.select(".e-ddt-icon",this.inputWrapper);e?(t?sf.base.removeClass([t],B):sf.inputs.Input.appendSpan(w,this.inputWrapper,this.createElement),sf.base.addClass([this.inputWrapper],"e-show-dd-icon")):(sf.base.addClass([t],B),sf.base.removeClass([this.inputWrapper],"e-show-dd-icon"))},t.prototype.updateMode=function(){if("Delimiter"!==this.mode){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var e=this.getValidMode();this.chipWrapper.classList.contains(B)&&e?(sf.base.removeClass([this.chipWrapper],B),sf.base.addClass([this.inputWrapper],k)):e||(sf.base.addClass([this.chipWrapper],B),sf.base.removeClass([this.inputWrapper],k));var t=null!==this.value&&0!==this.value.length;e&&t?sf.base.addClass([this.inputEle],A):sf.base.removeClass([this.inputEle],A)}else this.inputEle.classList.contains(A)&&(sf.base.removeClass([this.inputEle],A),this.chipWrapper&&(sf.base.addClass([this.chipWrapper],B),sf.base.removeClass([this.inputWrapper],k)))},t.prototype.ensurePlaceHolder=function(){this.value&&0===this.value.length&&(sf.base.removeClass([this.inputEle],A),this.chipWrapper&&sf.base.addClass([this.chipWrapper],B))},t.prototype.ensureClearIconPosition=function(e){"Never"!==e&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},t.prototype.setMultiSelectValue=function(e){if(this.isFilteredData){for(var t=sf.base.isNullOrUndefined(this.value)?[]:this.value,i=0;i<e.length;i++)(sf.base.isNullOrUndefined(this.value)||-1===this.value.indexOf(e[i]))&&t.push(e[i]);this.setProperties({value:t},!0)}else this.setProperties({value:e},!0),e&&0!==e.length&&!this.showCheckBox&&(this.treeObj.selectedNodes=this.value.slice(),this.treeObj.dataBind())},t.prototype.setMultiSelect=function(){if(this.showCheckBox&&!this.isDynamicChange)this.setMultiSelectValue(this.treeObj.checkedNodes);else{var e=this.allowMultiSelection?this.showCheckBox?this.treeObj.checkedNodes:this.treeObj.selectedNodes:this.value?this.showCheckBox?this.value:[this.value[0]]:null;this.setMultiSelectValue(e),this.showCheckBox&&null!==this.value&&(this.treeObj.checkedNodes=this.value,this.treeObj.dataBind())}this.selectedText=[];var t=!!this.allowMultiSelection||!!this.showCheckBox;this.inputWrapper.contains(this.chipWrapper)&&!t&&(sf.base.removeClass([this.inputEle],A),sf.base.detach(this.chipWrapper)),this.getValidMode()&&null!==this.value&&(sf.base.addClass([this.inputEle],A),this.chipWrapper&&sf.base.removeClass([this.chipWrapper],B));var i=!!this.value&&!!this.value.length;this.chipWrapper&&"Box"===this.mode&&!i&&(sf.base.addClass([this.chipWrapper],B),sf.base.removeClass([this.inputEle],A)),this.updateSelectedValues()},t.prototype.getSelectedData=function(e){var t=null;if(this.isFilteredData)for(var i=0;i<this.selectedData.length;i++)if(sf.base.getValue(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[i]).toString()===e){t=this.selectedData[i];break}return sf.base.isNullOrUndefined(t)&&(t=this.treeSettings.loadOnDemand?this.treeObj.getTreeData(e)[0]:this.treeObj.getNode(e),sf.base.isNullOrUndefined(t)||this.selectedData.push(t)),t},t.prototype.removeSelectedData=function(e,t){var i=sf.base.isNullOrUndefined(this.value)?[]:this.value.slice();i.splice(i.indexOf(e),1),this.setProperties({value:i},t);for(var s=0;s<this.selectedData.length;s++)if(sf.base.getValue(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[s]).toString()===e){this.selectedData.splice(s,1);break}},t.prototype.updateSelectedValues=function(){var e,t;this.dataValue="";var i,s="";if(this.hiddenElement.innerHTML="",this.isChipDelete&&!this.treeSettings.autoCheck||!this.inputWrapper.contains(this.chipWrapper)||(this.chipCollection.innerHTML=""),this.isFilteredData||(this.selectedData=[]),!sf.base.isNullOrUndefined(this.value))for(var l=0,a=this.value.length;l<a;l++)i=this.getSelectedData(this.value[l]),t=sf.base.getValue(this.treeSettings.loadOnDemand?this.fields.text:"text",i),this.selectedText.push(t),e=this.selectedText[this.selectedText.length-1],this.selectedText.length>1?(this.dataValue+=this.delimiterChar+" "+e,s+=","+e,this.setProperties({text:s},!0)):(this.dataValue+=e,s+=e),"Delimiter"===this.mode||this.isChipDelete&&!this.treeSettings.autoCheck||!this.allowMultiSelection&&!this.showCheckBox||this.setChipValues(e,this.value[l]),this.hiddenElement.innerHTML+='<option selected value ="'+this.value[l]+'">'+this.selectedText[this.selectedText.length-1]+"</option>";var o=this.getValidMode();"Box"===this.mode||!this.allowMultiSelection&&!this.showCheckBox||o||this.chipWrapper&&(sf.base.addClass([this.chipWrapper],B),sf.base.removeClass([this.inputWrapper],k)),sf.inputs.Input.setValue(this.dataValue,this.inputEle,this.floatLabelType),""===s?this.setProperties({text:null},!0):this.setProperties({text:s},!0),this.showClearButton&&this.inputFocus&&this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&this.popupObj&&this.popupObj.refreshPosition(),this.currentText=this.text,this.currentValue=this.value},t.prototype.setChipValues=function(e,t){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var i=this.createElement("span",{className:"e-chips",attrs:{"data-value":t}}),s=this.createElement("span",{className:"e-chipcontent"}),l=this.createElement("span",{className:"e-chips-close e-icons"});s.innerHTML=e,i.appendChild(s),this.chipCollection.appendChild(i),this.showClearButton&&(i.appendChild(l),sf.base.EventHandler.add(l,"mousedown",this.removeChip,this))},t.prototype.setSelectAllWrapper=function(e){this.isFirstRender||(e&&!this.popupEle.contains(this.checkAllParent)&&this.showCheckBox?(this.createSelectAllWrapper(),this.popupEle.insertBefore(this.checkAllParent,this.popupDiv)):this.popupEle.contains(this.checkAllParent)&&(sf.base.detach(this.checkAllParent),this.checkAllParent=null))},t.prototype.setHeaderTemplate=function(){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),sf.base.addClass([this.header],"e-ddt-header"));for(var e=0,t=this.templateComplier(this.headerTemplate)({},null,null,this.headerTemplateId,this.isStringTemplate);e<t.length;e++){var i=t[e];this.header.appendChild(i)}this.ddtupdateBlazorTemplates(!1,!1,!0,!1),this.popupEle.insertBefore(this.header,this.checkAllParent?this.checkAllParent:this.popupDiv)},t.prototype.templateComplier=function(e){if(e)try{if(document.querySelectorAll(e).length)return sf.base.compile(document.querySelector(e).innerHTML.trim())}catch(t){return sf.base.compile(e)}return sf.base.compile(e)},t.prototype.setFooterTemplate=function(){this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),sf.base.addClass([this.footer],"e-ddt-footer"));for(var e=0,t=this.templateComplier(this.footerTemplate)({},null,null,this.footerTemplateId,this.isStringTemplate);e<t.length;e++){var i=t[e];this.footer.appendChild(i)}this.ddtupdateBlazorTemplates(!1,!1,!1,!0),sf.base.append([this.footer],this.popupEle)},t.prototype.clearAll=function(e){this.enabled&&!this.readonly&&(this.resetValue(),this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&this.popupObj&&this.popupObj.refreshPosition(),e&&(this.isClearButtonClick=!0),this.changeOnBlur||this.triggerChangeEvent(e))},t.prototype.removeChip=function(e){if(this.enabled&&!this.readonly){var t=e.target.parentElement,i=t.getAttribute("data-value");this.chipCollection&&t&&sf.base.remove(t),this.isChipDelete=!0,this.isClearButtonClick=!0,this.removeSelectedData(i,!0),this.selectedText=[],this.allowMultiSelection&&(this.treeObj.selectedNodes=this.value.slice(),this.updateSelectedValues()),this.showCheckBox&&(this.treeObj.uncheckAll([i]),this.clearCheckAll(),this.setMultiSelect()),this.triggerChangeEvent(e),this.isChipDelete=!1,this.ensurePlaceHolder()}},t.prototype.resetValue=function(e){sf.inputs.Input.setValue(null,this.inputEle,this.floatLabelType),this.oldValue=this.value,this.dataValue=null,this.setProperties({value:[]},!0),this.setProperties({text:null},!0),this.selectedData=[],sf.base.setValue("selectedNodes",[],this.treeObj),this.hiddenElement.innerHTML="",this.showCheckBox&&(this.treeObj.uncheckAll(),this.setMultiSelect(),this.clearCheckAll()),null!==this.oldValue||e?e&&this.triggerChangeEvent():this.removeValue=!0,(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper&&(this.chipCollection.innerHTML="",this.ensurePlaceHolder())},t.prototype.clearCheckAll=function(){this.showSelectAll&&0===this.value.length&&this.setLocale(!1)},t.prototype.selectAllItems=function(e){if(this.showCheckBox)e?this.treeObj.checkAll():this.treeObj.uncheckAll(),this.checkSelectAll=!0;else if(this.allowMultiSelection)if(e){for(var t=sf.base.selectAll("li",this.treeObj.element),i=void 0,s=[],l=0;l<t.length;l++)i=t[l].getAttribute("data-uid").toString(),s.push(i);this.treeObj.selectedNodes=s}else this.treeObj.selectedNodes=[];this.updateMode(),this.setMultiSelect()},t.prototype.updateTreeSettings=function(e){var t=Object.keys(e.treeSettings)[0];if("autoCheck"===t)this.ensureAutoCheck(),this.treeObj.autoCheck=this.treeSettings.autoCheck;else if("loadOnDemand"===t)this.treeObj.loadOnDemand=this.treeSettings.loadOnDemand;else if("expandOn"===t)return this.treeObj.expandOn=this.treeSettings.expandOn,void this.treeObj.dataBind();this.treeObj.dataBind(),this.setMultiSelect()},t.prototype.updateCheckBoxState=function(e){this.treeObj.showCheckBox=e,this.treeObj.dataBind(),this.isDynamicChange=!0,this.setSelectAllWrapper(this.showSelectAll),this.showSelectAll&&this.setLocale(),this.showCheckBox&&this.updateMode(),this.setMultiSelect(),this.isDynamicChange=!1},t.prototype.updateTemplate=function(){this.popupObj&&(this.popupObj.destroy(),this.isPopupOpen?(this.hidePopup(),this.isFirstRender=!0,this.renderPopup()):this.isFirstRender=!0)},t.prototype.l10nUpdate=function(e){if(this.noRecord?this.noRecord.innerHTML="":(this.noRecord=this.createElement("div"),sf.base.addClass([this.noRecord],"e-ddt-nodata"),sf.base.prepend([this.noRecord],this.popupDiv)),"No Records Found"!==this.noRecordsTemplate||"The Request Failed"!==this.actionFailureTemplate){for(var t=e?this.actionFailureTemplate:this.noRecordsTemplate,i=e?this.actionFailureTemplateId:this.noRecordsTemplateId,s=0,l=this.templateComplier(t)({},null,null,i,this.isStringTemplate);s<l.length;s++){var a=l[s];this.noRecord.appendChild(a)}this.ddtupdateBlazorTemplates(!e,e)}else{this.l10n=new sf.base.L10n(this.getModuleName(),{noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"},this.locale),this.noRecord.innerHTML=e?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate")}},t.prototype.ddtupdateBlazorTemplates=function(e,t,i,s,l){this.isStringTemplate||(this.noRecordsTemplate&&e&&sf.base.updateBlazorTemplate(this.noRecordsTemplateId,"NoRecordsTemplate",this,l),this.actionFailureTemplate&&t&&sf.base.updateBlazorTemplate(this.actionFailureTemplateId,"ActionFailureTemplate",this,l),i&&sf.base.updateBlazorTemplate(this.headerTemplateId,"HeaderTemplate",this),s&&sf.base.updateBlazorTemplate(this.footerTemplateId,"FooterTemplate",this))},t.prototype.ddtresetBlazorTemplates=function(e,t,i,s){this.isStringTemplate||(this.noRecordsTemplate&&e&&sf.base.resetBlazorTemplate(this.noRecordsTemplateId,"NoRecordsTemplate"),this.actionFailureTemplate&&t&&sf.base.resetBlazorTemplate(this.actionFailureTemplateId,"ActionFailureTemplate"),i&&sf.base.resetBlazorTemplate(this.headerTemplateId,"HeaderTemplate"),s&&sf.base.resetBlazorTemplate(this.footerTemplateId,"FooterTemplate"))},t.prototype.updateRecordTemplate=function(e){this.treeItems&&this.treeItems.length<=0&&(this.l10nUpdate(e),this.updateTemplate())},t.prototype.updateMultiSelection=function(e){this.treeObj.allowMultiSelection=e,this.treeObj.dataBind(),this.allowMultiSelection&&this.updateMode(),this.setMultiSelect()},t.prototype.updateAllowFiltering=function(e){this.isFirstRender||(e?this.renderFilter():this.destroyFilter()),this.ensureAutoCheck()},t.prototype.updateFilterPlaceHolder=function(){this.filterObj&&(this.filterObj.placeholder=this.filterBarPlaceholder,this.filterObj.element.setAttribute("aria-label",this.filterBarPlaceholder))},t.prototype.updateValue=function(e){sf.base.isNullOrUndefined(e)||0===e.length?this.resetValue(!0):this.setTreeValue(),this.updateHiddenValue()},t.prototype.updateText=function(e){sf.base.isNullOrUndefined(e)?this.resetValue():this.setTreeText(),this.updateHiddenValue()},t.prototype.updateModelMode=function(){(!!this.allowMultiSelection||!!this.showCheckBox)&&(this.updateMode(),this.setMultiSelect())},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"width":this.setElementWidth(e.width),this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"placeholder":sf.inputs.Input.setPlaceholder(e.placeholder,this.inputEle);break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRTL(this.enableRtl);break;case"fields":this.setFields();break;case"readonly":sf.inputs.Input.setReadonly(e.readonly,this.inputEle);break;case"enabled":this.setEnable();break;case"floatLabelType":sf.inputs.Input.removeFloating(this.inputObj),sf.inputs.Input.addFloating(this.inputEle,e.floatLabelType,this.placeholder,this.createElement),this.ensureClearIconPosition(e.floatLabelType);break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"allowFiltering":this.updateAllowFiltering(e.allowFiltering);break;case"filterBarPlaceholder":this.updateFilterPlaceHolder();break;case"value":this.updateValue(e.value);break;case"text":this.updateText(e.text);break;case"allowMultiSelection":this.updateMultiSelection(e.allowMultiSelection);break;case"mode":this.updateModelMode();break;case"delimiterChar":if("Box"===this.mode)return;(this.showCheckBox||this.allowMultiSelection)&&this.setMultiSelect();break;case"selectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale();break;case"unSelectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale(!1);break;case"showSelectAll":this.showCheckBox&&(this.setSelectAllWrapper(e.showSelectAll),this.updatePopupHeight());break;case"showCheckBox":this.updateCheckBoxState(e.showCheckBox),this.updatePopupHeight();break;case"treeSettings":this.updateTreeSettings(e);break;case"sortOrder":this.treeObj.sortOrder=e.sortOrder,this.treeObj.dataBind();break;case"showDropDownIcon":this.updateDropDownIconState(e.showDropDownIcon);break;case"popupWidth":this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"popupHeight":this.popupObj&&this.updatePopupHeight();break;case"zIndex":this.popupObj&&(this.popupObj.zIndex=e.zIndex,this.popupObj.dataBind());break;case"headerTemplate":case"footerTemplate":this.updateTemplate();break;case"itemTemplate":this.treeObj.nodeTemplate=e.itemTemplate,this.treeObj.dataBind();break;case"noRecordsTemplate":this.updateRecordTemplate();break;case"actionFailureTemplate":this.updateRecordTemplate(!0);break;case"htmlAttributes":this.setHTMLAttributes()}}},t.prototype.clear=function(){this.clearAll(),this.inputFocus?this.onFocusOut():(this.changeOnBlur&&this.triggerChangeEvent(),this.removeValue=!1)},t.prototype.destroy=function(){this.ddtresetBlazorTemplates(!0,!0,!0,!0),this.unWireEvents(),this.setCssClass(null,this.cssClass),this.resetValue(),this.treeObj.destroy(),this.destroyFilter(),this.popupObj&&(this.popupObj.destroy(),sf.base.detach(this.popupObj.element)),this.element.tagName!==this.getDirective()&&this.inputWrapper.parentElement.insertBefore(this.element,this.inputWrapper),sf.base.detach(this.inputWrapper),sf.base.detach(this.popupDiv),this.element.classList.remove("e-input"),e.prototype.destroy.call(this)},t.prototype.destroyFilter=function(){this.filterObj&&(this.filterObj.destroy(),sf.base.detach(this.filterObj.element),sf.base.detach(this.filterContainer),this.filterObj=null)},t.prototype.ensureVisible=function(e){this.treeObj.ensureVisible(e)},t.prototype.getData=function(e){return this.treeObj.getTreeData(e)},t.prototype.hidePopup=function(){var e={popup:this.popupObj};this.inputWrapper.classList.remove("e-icon-anim"),this.popupEle&&(this.popupEle.style.display="none"),sf.base.attributes(this.inputWrapper,{"aria-expanded":"false"}),this.popupObj&&this.isPopupOpen&&(this.popupObj.hide(),this.inputFocus&&this.inputWrapper.focus(),this.trigger("close",e))},t.prototype.selectAll=function(e){this.selectAllItems(e)},t.prototype.showPopup=function(){!this.enabled||this.readonly||this.isPopupOpen||(this.renderPopup(),this.focusIn())},t.prototype.getModuleName=function(){return"dropdowntree"},x([sf.base.Property("The Request Failed")],t.prototype,"actionFailureTemplate",void 0),x([sf.base.Property(!1)],t.prototype,"allowFiltering",void 0),x([sf.base.Property(!1)],t.prototype,"allowMultiSelection",void 0),x([sf.base.Property(!0)],t.prototype,"changeOnBlur",void 0),x([sf.base.Property("")],t.prototype,"cssClass",void 0),x([sf.base.Property(",")],t.prototype,"delimiterChar",void 0),x([sf.base.Property(!0)],t.prototype,"enabled",void 0),x([sf.base.Complex({},T)],t.prototype,"fields",void 0),x([sf.base.Property(null)],t.prototype,"filterBarPlaceholder",void 0),x([sf.base.Property("StartsWith")],t.prototype,"filterType",void 0),x([sf.base.Property("Never")],t.prototype,"floatLabelType",void 0),x([sf.base.Property(null)],t.prototype,"footerTemplate",void 0),x([sf.base.Property(!1)],t.prototype,"ignoreAccent",void 0),x([sf.base.Property(!0)],t.prototype,"ignoreCase",void 0),x([sf.base.Property(null)],t.prototype,"headerTemplate",void 0),x([sf.base.Property({})],t.prototype,"htmlAttributes",void 0),x([sf.base.Property(null)],t.prototype,"itemTemplate",void 0),x([sf.base.Property("Default")],t.prototype,"mode",void 0),x([sf.base.Property("No Records Found")],t.prototype,"noRecordsTemplate",void 0),x([sf.base.Property(null)],t.prototype,"placeholder",void 0),x([sf.base.Property("300px")],t.prototype,"popupHeight",void 0),x([sf.base.Property("100%")],t.prototype,"popupWidth",void 0),x([sf.base.Property(!1)],t.prototype,"readonly",void 0),x([sf.base.Property(!1)],t.prototype,"showSelectAll",void 0),x([sf.base.Property("Select All")],t.prototype,"selectAllText",void 0),x([sf.base.Property(!1)],t.prototype,"showCheckBox",void 0),x([sf.base.Property(!0)],t.prototype,"showClearButton",void 0),x([sf.base.Property(!0)],t.prototype,"showDropDownIcon",void 0),x([sf.base.Property("None")],t.prototype,"sortOrder",void 0),x([sf.base.Property(null)],t.prototype,"text",void 0),x([sf.base.Complex({},L)],t.prototype,"treeSettings",void 0),x([sf.base.Property("Unselect All")],t.prototype,"unSelectAllText",void 0),x([sf.base.Property(null)],t.prototype,"value",void 0),x([sf.base.Property("100%")],t.prototype,"width",void 0),x([sf.base.Property(1e3)],t.prototype,"zIndex",void 0),x([sf.base.Event()],t.prototype,"actionFailure",void 0),x([sf.base.Event()],t.prototype,"beforeOpen",void 0),x([sf.base.Event()],t.prototype,"change",void 0),x([sf.base.Event()],t.prototype,"close",void 0),x([sf.base.Event()],t.prototype,"blur",void 0),x([sf.base.Event()],t.prototype,"created",void 0),x([sf.base.Event()],t.prototype,"dataBound",void 0),x([sf.base.Event()],t.prototype,"destroyed",void 0),x([sf.base.Event()],t.prototype,"filtering",void 0),x([sf.base.Event()],t.prototype,"focus",void 0),x([sf.base.Event()],t.prototype,"keyPress",void 0),x([sf.base.Event()],t.prototype,"open",void 0),x([sf.base.Event()],t.prototype,"select",void 0),t=x([sf.base.NotifyPropertyChanges],t)}(sf.base.Component),N=(u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),F=function(e,t,i,s){var a,o=arguments.length,n=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===("undefined"==typeof Reflect?"undefined":l()(Reflect))&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(n=(o<3?a(n):o>3?a(t,i,n):a(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};g.root="e-combobox";var H,V={container:null,buttons:[]},W=function(e){function t(t,i){return e.call(this,t,i)||this}return N(t,e),t.prototype.preRender=function(){e.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"combo-box"},t.prototype.wireEvent=function(){"combobox"===this.getModuleName()&&(sf.base.EventHandler.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),sf.base.EventHandler.add(this.inputWrapper.container,"blur",this.onBlur,this)),sf.base.isNullOrUndefined(this.inputWrapper.buttons[0])||sf.base.EventHandler.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),sf.base.EventHandler.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(sf.base.EventHandler.add(this.inputElement,"input",this.onInput,this),sf.base.EventHandler.add(this.inputElement,"keyup",this.onFilterUp,this),sf.base.EventHandler.add(this.inputElement,"keydown",this.onFilterDown,this),sf.base.EventHandler.add(this.inputElement,"paste",this.pasteHandler,this)),this.bindCommonEvent()},t.prototype.preventBlur=function(e){(this.allowFiltering||document.activeElement===this.inputElement||document.activeElement.classList.contains(g.input)||!sf.base.Browser.isDevice)&&sf.base.Browser.isDevice||e.preventDefault()},t.prototype.onBlur=function(t){var i=""===this.inputElement.value?null:this.inputElement.value;sf.base.isNullOrUndefined(this.listData)||sf.base.isNullOrUndefined(i)||i===this.text||this.customValue(t),e.prototype.onBlur.call(this,t)},t.prototype.targetElement=function(){return this.inputElement},t.prototype.setOldText=function(e){sf.inputs.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()},t.prototype.setOldValue=function(e){this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null),this.removeSelection(),this.setHiddenValue()},t.prototype.valueMuteChange=function(e){var t=sf.base.isNullOrUndefined(e)?null:e.toString();sf.inputs.Input.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e,text:e,index:null},!0),this.activeIndex=this.index;var i=this.fields,s={};s[i.text]=sf.base.isNullOrUndefined(e)?null:e.toString(),s[i.value]=sf.base.isNullOrUndefined(e)?null:e.toString(),this.itemData=s,this.item=null,this.previousValue!==this.value&&this.detachChangeEvent(null)},t.prototype.updateValues=function(){if(sf.base.isNullOrUndefined(this.value))if(this.text&&sf.base.isNullOrUndefined(this.value)){var e;(e=this.getElementByText(this.text))?this.setSelection(e,null):(sf.inputs.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else(e=this.getElementByValue(this.value))?this.setSelection(e,null):this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null);this.setHiddenValue(),sf.inputs.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?sf.base.addClass([this.inputWrapper.clearButton],g.clearIconHide):sf.base.removeClass([this.inputWrapper.clearButton],g.clearIconHide))},t.prototype.getAriaAttributes=function(){return{"aria-owns":this.element.id+"_options",role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-hasPopup":"true","aria-expanded":"false","aria-readonly":this.readonly.toString(),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}},t.prototype.searchLists=function(t){this.isTyped=!0,this.isFiltering()?(e.prototype.searchLists.call(this,t),this.ulElement&&""===this.filterInput.value.trim()&&this.setHoverList(this.ulElement.querySelector("."+g.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+g.li)),this.incrementalSearch(t))},t.prototype.getNgDirective=function(){return"EJS-COMBOBOX"},t.prototype.setSearchBox=function(){return this.filterInput=this.inputElement,this.isFiltering()?this.inputWrapper:V},t.prototype.onActionComplete=function(t,i,s,l){this.isServerBlazor||e.prototype.onActionComplete.call(this,t,i,s),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&"combobox"===this.getModuleName()&&this.isTyped&&this.inlineSearch()},t.prototype.getFocusElement=function(){var e=this.isSelectCustom?{text:""}:this.getItemData(),t=this.list.querySelector("."+g.selected);if(e.text===this.inputElement.value&&!sf.base.isNullOrUndefined(t))return t;if((sf.base.Browser.isDevice&&!this.isDropDownClick||!sf.base.Browser.isDevice)&&!sf.base.isNullOrUndefined(this.liCollections)&&this.liCollections.length>0){var i=o(this.inputElement.value,this.liCollections,"StartsWith",!0).item;if(sf.base.isNullOrUndefined(i))this.isSelectCustom&&""!==this.inputElement.value.trim()&&(this.removeFocus(),this.list.scrollTop=0);else{var s=this.getIndexByValue(i.getAttribute("data-value"))-1,l=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);if(!isNaN(l)&&"autocomplete"!==this.getModuleName()){this.removeFocus();var a=this.fields.groupBy?this.liCollections[0].offsetHeight:0;this.list.scrollTop=s*l+a,sf.base.addClass([i],g.focus)}}return i}return null},t.prototype.setValue=function(t){return t&&"keydown"===t.type&&"enter"===t.action&&this.removeFillSelection(),this.autofill&&"combobox"===this.getModuleName()&&t&&"keydown"===t.type&&"enter"!==t.action?(this.preventAutoFill=!1,this.inlineSearch(t),!1):e.prototype.setValue.call(this,t)},t.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.allowCustom&&sf.base.isNullOrUndefined(e.value)&&sf.base.isNullOrUndefined(e.text)||this.setProperties({value:e.value,text:e.text})},t.prototype.showSpinner=function(){sf.base.isNullOrUndefined(this.spinnerElement)&&(this.spinnerElement="autocomplete"===this.getModuleName()?this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||sf.inputs.Input.appendSpan("e-input-group-icon e-atc-spinner-icon",this.inputWrapper.container,this.createElement):this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,sf.base.addClass([this.spinnerElement],g.disableIcon),sf.popups.createSpinner({target:this.spinnerElement,width:sf.base.Browser.isDevice?"16px":"14px"},this.createElement),sf.popups.showSpinner(this.spinnerElement))},t.prototype.hideSpinner=function(){sf.base.isNullOrUndefined(this.spinnerElement)||(sf.popups.hideSpinner(this.spinnerElement),sf.base.removeClass([this.spinnerElement],g.disableIcon),this.spinnerElement.classList.contains("e-atc-spinner-icon")?sf.base.detach(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.setAutoFill=function(e,t){if(t||this.setHoverList(e),this.autofill&&!this.preventAutoFill){var i=this.getTextByValue(e.getAttribute("data-value")).toString(),s=this.getFormattedValue(e.getAttribute("data-value"));"combobox"===this.getModuleName()&&(this.isSelected||this.previousValue===s?this.updateSelectedItem(e,null,!0):(this.updateSelectedItem(e,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(e.getAttribute("data-value")))),this.isAndroidAutoFill(i)||this.setAutoFillSelection(i)}},t.prototype.isAndroidAutoFill=function(e){if(sf.base.Browser.isAndroid){var t=this.getSelectionPoints(),i=this.prevSelectPoints.end,s=t.end,l=this.prevSelectPoints.start,a=t.start;return 0!==i&&(i===e.length&&l===e.length||l>a&&i>s||i===s&&l===a)}return!1},t.prototype.clearAll=function(t,i){(sf.base.isNullOrUndefined(i)||!sf.base.isNullOrUndefined(i)&&sf.base.isNullOrUndefined(i.dataSource))&&(e.prototype.clearAll.call(this,t),this.isServerBlazor&&this.isFiltering()&&this.isPopupOpen&&t&&this.interopAdaptor.invokeMethodAsync("OnServerRenderList",this.beforePopupOpen,!0))},t.prototype.isSelectFocusItem=function(e){return!sf.base.isNullOrUndefined(e)},t.prototype.inlineSearch=function(e){var t=e&&("down"===e.action||"up"===e.action||"home"===e.action||"end"===e.action||"pageUp"===e.action||"pageDown"===e.action),i=t?this.liCollections[this.activeIndex]:this.getFocusElement();if(sf.base.isNullOrUndefined(i))if(""===this.inputElement.value){this.activeIndex=null,this.list.scrollTop=0;var s=this.list.querySelector("."+g.li);this.setHoverList(s)}else this.activeIndex=null,this.removeSelection(),this.liCollections&&this.liCollections.length<0&&this.removeFocus();else{if(!t){var l=this.getFormattedValue(i.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(l),this.activeIndex=sf.base.isNullOrUndefined(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(i,t)}},t.prototype.incrementalSearch=function(e){this.showPopup(),sf.base.isNullOrUndefined(this.listData)||(this.inlineSearch(e),e.preventDefault())},t.prototype.setAutoFillSelection=function(e){var t=this.getSelectionPoints(),i=this.inputElement.value.substr(0,t.start);if(i&&i.toLowerCase()===e.substr(0,t.start).toLowerCase()){var s=i+e.substr(i.length,e.length);sf.inputs.Input.setValue(s,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(t.start,this.inputElement.value.length)}else sf.inputs.Input.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length)},t.prototype.getValueByText=function(t){return e.prototype.getValueByText.call(this,t,!0,this.ignoreAccent)},t.prototype.unWireEvent=function(){"combobox"===this.getModuleName()&&(sf.base.EventHandler.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),sf.base.EventHandler.remove(this.inputWrapper.container,"blur",this.onBlur)),sf.base.isNullOrUndefined(this.inputWrapper.buttons[0])||sf.base.EventHandler.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),sf.base.EventHandler.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(sf.base.EventHandler.remove(this.inputElement,"input",this.onInput),sf.base.EventHandler.remove(this.inputElement,"keyup",this.onFilterUp),sf.base.EventHandler.remove(this.inputElement,"keydown",this.onFilterDown),sf.base.EventHandler.remove(this.inputElement,"paste",this.pasteHandler)),this.unBindCommonEvent()},t.prototype.setSelection=function(t,i){e.prototype.setSelection.call(this,t,i),sf.base.isNullOrUndefined(t)||this.autofill||this.isDropDownClick||this.removeFocus()},t.prototype.selectCurrentItem=function(e){var t;this.isPopupOpen&&((t=this.list.querySelector("."+g.focus))&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e))),"enter"===e.action&&""===this.inputElement.value.trim()?this.clearAll(e):this.isTyped&&!this.isSelected&&sf.base.isNullOrUndefined(t)&&this.customValue(e),this.hidePopup()},t.prototype.setHoverList=function(e){this.removeSelection(),this.isValidLI(e)&&!e.classList.contains(g.selected)&&(this.removeFocus(),e.classList.add(g.focus))},t.prototype.targetFocus=function(e){sf.base.Browser.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus(e)},t.prototype.dropDownClick=function(t){t.preventDefault(),sf.base.Browser.isDevice&&!this.allowFiltering&&(this.preventFocus=!0),e.prototype.dropDownClick.call(this,t)},t.prototype.customValue=function(e){var t=this,i=this.getValueByText(this.inputElement.value);if(this.allowCustom||""===this.inputElement.value)if(""!==this.inputElement.value.trim()){var s=this.value;if(sf.base.isNullOrUndefined(i)){var l,a=""===this.inputElement.value?null:this.inputElement.value;l={text:a,item:{}},this.initial?this.updateCustomValueCallback(a,l,s):this.trigger("customValueSpecifier",l,(function(i){t.updateCustomValueCallback(a,i,s,e)}))}else this.isSelectCustom=!1,this.setProperties({value:i}),s!==this.value&&this.onChangeEvent(e)}else this.allowCustom&&(this.isSelectCustom=!0);else{var o=this.previousValue,n=this.value;this.setProperties({value:i}),sf.base.isNullOrUndefined(this.value)&&sf.inputs.Input.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.autofill&&o===this.value&&n!==this.value&&this.onChangeEvent(null)}},t.prototype.updateCustomValueCallback=function(e,t,i,s){var l=this.fields,a=t.item,o={};a&&sf.base.getValue(l.text,a)&&sf.base.getValue(l.value,a)?o=a:(sf.base.setValue(l.text,e,o),sf.base.setValue(l.value,e,o)),this.itemData=o;var n={text:sf.base.getValue(l.text,this.itemData),value:sf.base.getValue(l.value,this.itemData),index:null};this.setProperties(n,!0),this.setSelection(null,null),this.isSelectCustom=!0,i!==this.value&&this.onChangeEvent(s)},t.prototype.onPropertyChanged=function(t,i){"combobox"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],t);for(var s=0,l=Object.keys(t);s<l.length;s++){var a=l[s];switch(a){case"readonly":sf.inputs.Input.setReadonly(this.readonly,this.inputElement),this.readonly?(sf.base.EventHandler.remove(this.inputElement,"input",this.onInput),sf.base.EventHandler.remove(this.inputElement,"keyup",this.onFilterUp),sf.base.EventHandler.remove(this.inputElement,"keydown",this.onFilterDown)):(sf.base.EventHandler.add(this.inputElement,"input",this.onInput,this),sf.base.EventHandler.add(this.inputElement,"keyup",this.onFilterUp,this),sf.base.EventHandler.add(this.inputElement,"keydown",this.onFilterDown,this));break;case"allowFiltering":this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&sf.base.isNullOrUndefined(this.list)&&e.prototype.renderList.call(this);break;case"allowCustom":break;default:var o;o=this.getPropObject(a,t,i),e.prototype.onPropertyChanged.call(this,o.newProperty,o.oldProperty)}}},t.prototype.render=function(){e.prototype.render.call(this),this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&sf.base.isNullOrUndefined(this.list)&&e.prototype.renderList.call(this),this.renderComplete()},t.prototype.getModuleName=function(){return"combobox"},t.prototype.addItem=function(t,i){e.prototype.addItem.call(this,t,i)},t.prototype.filter=function(t,i,s){e.prototype.filter.call(this,t,i,s)},t.prototype.showPopup=function(){e.prototype.showPopup.call(this)},t.prototype.hidePopup=function(t){var i=""===this.inputElement.value?null:this.inputElement.value;if(!sf.base.isNullOrUndefined(this.listData)){var s=this.isEscapeKey;this.isEscapeKey&&(sf.inputs.Input.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();var l=this.isSelectCustom?{text:""}:this.getItemData(),a=this.list.querySelector("."+g.selected);if(l.text===this.inputElement.value&&!sf.base.isNullOrUndefined(a))return this.isSelected&&(this.onChangeEvent(t),this.isSelectCustom=!1),void e.prototype.hidePopup.call(this,t);if("combobox"===this.getModuleName()&&""!==this.inputElement.value.trim()){var n=o(this.inputElement.value,this.liCollections,"Equal",!0);this.selectedLI=n.item,sf.base.isNullOrUndefined(n.index)&&(n.index=o(this.inputElement.value,this.liCollections,"StartsWith",!0).index),this.activeIndex=n.index,sf.base.isNullOrUndefined(this.selectedLI)?s&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}this.isEscapeKey||!this.isTyped||this.isInteracted||this.customValue(t)}sf.base.isNullOrUndefined(this.listData)&&this.allowCustom&&!sf.base.isNullOrUndefined(i)&&i!==this.value&&this.customValue(),e.prototype.hidePopup.call(this,t)},t.prototype.focusIn=function(){this.enabled&&(sf.base.Browser.isDevice&&!this.allowFiltering&&(this.preventFocus=!0),e.prototype.focusIn.call(this))},t.prototype.clear=function(){this.value=null},t.prototype.focusOut=function(t){e.prototype.focusOut.call(this,t)},t.prototype.getItems=function(){return e.prototype.getItems.call(this)},t.prototype.getDataByValue=function(t){return e.prototype.getDataByValue.call(this,t)},t.prototype.renderHightSearch=function(){},F([sf.base.Property(!1)],t.prototype,"autofill",void 0),F([sf.base.Property(!0)],t.prototype,"allowCustom",void 0),F([sf.base.Property({})],t.prototype,"htmlAttributes",void 0),F([sf.base.Property(!1)],t.prototype,"allowFiltering",void 0),F([sf.base.Property(null)],t.prototype,"query",void 0),F([sf.base.Property(null)],t.prototype,"index",void 0),F([sf.base.Property(!0)],t.prototype,"showClearButton",void 0),F([sf.base.Property(!1)],t.prototype,"enableRtl",void 0),F([sf.base.Event()],t.prototype,"customValueSpecifier",void 0),F([sf.base.Event()],t.prototype,"filtering",void 0),F([sf.base.Property(null)],t.prototype,"valueTemplate",void 0),F([sf.base.Property("Never")],t.prototype,"floatLabelType",void 0),F([sf.base.Property(null)],t.prototype,"filterBarPlaceholder",void 0),F([sf.base.Property(null)],t.prototype,"cssClass",void 0),F([sf.base.Property(null)],t.prototype,"headerTemplate",void 0),F([sf.base.Property(null)],t.prototype,"footerTemplate",void 0),F([sf.base.Property(null)],t.prototype,"placeholder",void 0),F([sf.base.Property("100%")],t.prototype,"width",void 0),F([sf.base.Property("300px")],t.prototype,"popupHeight",void 0),F([sf.base.Property("100%")],t.prototype,"popupWidth",void 0),F([sf.base.Property(!1)],t.prototype,"readonly",void 0),F([sf.base.Property(null)],t.prototype,"text",void 0),F([sf.base.Property(null)],t.prototype,"value",void 0),t=F([sf.base.NotifyPropertyChanges],t)}(E),U=(H=function(e,t){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}H(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),M=function(e,t,i,s){var a,o=arguments.length,n=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===("undefined"==typeof Reflect?"undefined":l()(Reflect))&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(n=(o<3?a(n):o>3?a(t,i,n):a(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};g.root="e-autocomplete",g.icon="e-input-group-icon e-ddl-icon e-search-icon";var j=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.isFiltered=!1,s}return U(t,e),t.prototype.preRender=function(){e.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"auto-complete"},t.prototype.getNgDirective=function(){return"EJS-AUTOCOMPLETE"},t.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new sf.data.Query,i=""!==this.queryString||sf.base.isNullOrUndefined(this.value)?this.filterType:"equal",s=""!==this.queryString||sf.base.isNullOrUndefined(this.value)?this.queryString:this.value;if(this.isFiltered)return t;if(null!==this.queryString){var l=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof sf.data.DataManager||"string"!==l)&&"number"!==l){var a=sf.base.isNullOrUndefined(this.fields.value)?"":this.fields.value;t.where(a,i,s,this.ignoreCase,this.ignoreAccent)}else t.where("",i,s,this.ignoreCase,this.ignoreAccent)}if(!sf.base.isNullOrUndefined(this.suggestionCount)){if(20!==this.suggestionCount)for(var o=0;o<t.queries.length;o++)"onTake"===t.queries[o].fn&&t.queries.splice(o,1);t.take(this.suggestionCount)}return t},t.prototype.searchLists=function(t){var i=this;if(this.isTyped=!0,this.isDataFetched=this.isSelectCustom=!1,this.isServerBlazor)this.beforePopupOpen=this.isFiltering()&&!this.beforePopupOpen?!this.beforePopupOpen:this.beforePopupOpen,this.queryString=this.filterInput.value,""!==this.queryString&&this.queryString.length>=this.minLength?this.interopAdaptor.invokeMethodAsync("OnServerFilter",this.filterInput.value):this.hidePopup();else{if(sf.base.isNullOrUndefined(this.list)&&e.prototype.renderList.call(this,!0),this.queryString=this.filterInput.value,40===t.keyCode||38===t.keyCode)return this.queryString=""===this.queryString?null:this.queryString,this.beforePopupOpen=!0,void this.resetList(this.dataSource,this.fields);this.isSelected=!1,this.activeIndex=null;var s={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(e,t,l){s.cancel||(i.isFiltered=!0,i.filterAction(e,t,l))},cancel:!1};this.trigger("filtering",s,(function(e){e.cancel||i.isFiltered||e.preventDefaultAction||i.filterAction(i.dataSource,null,i.fields)}))}},t.prototype.filter=function(e,t,i){this.isFiltered=!0,this.filterAction(e,t,i)},t.prototype.filterAction=function(e,t,i){this.beforePopupOpen=!0,""!==this.queryString&&this.queryString.length>=this.minLength?this.resetList(e,i,t):this.hidePopup()},t.prototype.clearAll=function(t,i){(sf.base.isNullOrUndefined(i)||!sf.base.isNullOrUndefined(i)&&sf.base.isNullOrUndefined(i.dataSource))&&e.prototype.clearAll.call(this,t),this.beforePopupOpen&&this.hidePopup()},t.prototype.onActionComplete=function(t,i,s,l){this.fixedHeaderElement=null,e.prototype.onActionComplete.call(this,t,i,s);var a=this.list.querySelector("."+g.li);sf.base.isNullOrUndefined(a)||sf.base.removeClass([a],g.focus),this.postBackAction()},t.prototype.postBackAction=function(){if(this.autofill&&!sf.base.isNullOrUndefined(this.liCollections[0])){var t=[this.liCollections[0]],i=o(this.inputElement.value,t,"StartsWith",this.ignoreCase);sf.base.isNullOrUndefined(i.item)||e.prototype.setAutoFill.call(this,this.liCollections[0],!0)}},t.prototype.setSelection=function(t,i){if(this.isValidLI(t))if(!sf.base.isNullOrUndefined(i)&&"keydown"===i.type&&"enter"!==i.action&&"tab"!==i.action&&this.isValidLI(t)){var s=this.getFormattedValue(t.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(s),this.isServerBlazor&&this.removeHover(),this.setHoverList(t),this.selectedLI=t,this.setScrollPosition(i),this.autofill&&(this.preventAutoFill=!1,e.prototype.setAutoFill.call(this,t)),sf.base.attributes(this.inputElement,{"aria-activedescendant":this.selectedLI?this.selectedLI.id:null})}else e.prototype.setSelection.call(this,t,i)},t.prototype.listOption=function(t,i){var s=this,l=e.prototype.listOption.call(this,t,i);if(sf.base.isNullOrUndefined(l.itemCreated))l.itemCreated=function(e){s.highlight&&(s.element.tagName===s.getNgDirective()&&s.itemTemplate?setTimeout((function(){n(e.item,s.queryString,s.ignoreCase,s.filterType)}),0):n(e.item,s.queryString,s.ignoreCase,s.filterType))};else{var a=l.itemCreated;l.itemCreated=function(e){s.highlight&&n(e.item,s.queryString,s.ignoreCase,s.filterType),a.apply(s,[e])}}return l},t.prototype.isFiltering=function(){return!0},t.prototype.renderPopup=function(){this.list.scrollTop=0,e.prototype.renderPopup.call(this)},t.prototype.isEditTextBox=function(){return""!==this.inputElement.value.trim()},t.prototype.isPopupButton=function(){return this.showPopupButton},t.prototype.isSelectFocusItem=function(e){return!1},t.prototype.showPopup=function(){this.enabled&&(!this.beforePopupOpen||this.isServerBlazor?(this.beforePopupOpen=!0,this.preventAutoFill=!0,sf.base.isNullOrUndefined(this.list)||this.isServerBlazor?this.renderList():this.resetList(this.dataSource,this.fields)):this.refreshPopup())},t.prototype.hidePopup=function(){this.DropDownBaseresetBlazorTemplates(!0,!1,!1,!1),e.prototype.hidePopup.call(this),this.activeIndex=-1},t.prototype.onPropertyChanged=function(t,i){"autocomplete"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],t);for(var s=0,l=Object.keys(t);s<l.length;s++){var a=l[s];switch(a){case"showPopupButton":if(this.showPopupButton){if(this.isServerBlazor){if(this.inputWrapper&&this.inputWrapper.container){o=this.inputWrapper.container.querySelector(".e-input-group-icon.e-ddl-icon");this.inputWrapper.buttons[0]=o}}else{var o=sf.inputs.Input.appendSpan(g.icon,this.inputWrapper.container,this.createElement);this.inputWrapper.buttons[0]=o}this.inputWrapper&&this.inputWrapper.buttons&&this.inputWrapper.buttons[0]&&sf.base.EventHandler.add(this.inputWrapper.buttons[0],"click",this.dropDownClick,this)}else this.isServerBlazor||(sf.base.detach(this.inputWrapper.buttons[0]),this.inputWrapper.buttons[0]=null);break;default:var n;n=this.getPropObject(a,t,i),e.prototype.onPropertyChanged.call(this,n.newProperty,n.oldProperty)}}},t.prototype.renderHightSearch=function(){if(this.highlight)for(var e=0;e<this.liCollections.length;e++){this.ulElement.querySelector(".e-active")||n(this.liCollections[e],this.queryString,this.ignoreCase,this.filterType,this.isServerBlazor)}},t.prototype.getModuleName=function(){return"autocomplete"},t.prototype.render=function(){e.prototype.render.call(this)},M([sf.base.Complex({value:null,iconCss:null,groupBy:null},f)],t.prototype,"fields",void 0),M([sf.base.Property(!0)],t.prototype,"ignoreCase",void 0),M([sf.base.Property(!1)],t.prototype,"showPopupButton",void 0),M([sf.base.Property(!1)],t.prototype,"highlight",void 0),M([sf.base.Property(20)],t.prototype,"suggestionCount",void 0),M([sf.base.Property({})],t.prototype,"htmlAttributes",void 0),M([sf.base.Property(null)],t.prototype,"query",void 0),M([sf.base.Property(1)],t.prototype,"minLength",void 0),M([sf.base.Property("Contains")],t.prototype,"filterType",void 0),M([sf.base.Event()],t.prototype,"filtering",void 0),M([sf.base.Property(null)],t.prototype,"index",void 0),M([sf.base.Property("Never")],t.prototype,"floatLabelType",void 0),M([sf.base.Property(null)],t.prototype,"valueTemplate",void 0),M([sf.base.Property(null)],t.prototype,"filterBarPlaceholder",void 0),M([sf.base.Property(!1)],t.prototype,"allowFiltering",void 0),M([sf.base.Property(null)],t.prototype,"text",void 0),t=M([sf.base.NotifyPropertyChanges],t)}(W),q="e-label-top",R="e-label-bottom";function z(e,t,i,s,l,a,o){var n,r;n=sf.base.createElement("span",{className:"e-float-line"}),r=sf.base.createElement("label",{className:"e-float-text"}),sf.base.isNullOrUndefined(i.id)||""===i.id||(r.id="label_"+i.id.replace(/ /g,"_"),sf.base.attributes(i,{"aria-labelledby":r.id})),sf.base.isNullOrUndefined(s.placeholder)||""===s.placeholder||(r.innerHTML=s.placeholder,s.removeAttribute("placeholder")),r.innerHTML=o,t.appendChild(n),t.appendChild(r),e.classList.add("e-float-input"),function(e,t){e&&e.length>0?(sf.base.addClass([t],q),sf.base.removeClass([t],R)):(sf.base.removeClass([t],q),sf.base.addClass([t],R))}(l,r),"Always"===a&&(r.classList.contains(R)&&sf.base.removeClass([r],R),sf.base.addClass([r],q))}function K(e,t,i){e&&e.length?t.placeholder="":t.placeholder=i}var _,G,Q=(_=function(e,t){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),J=function(e,t,i,s){var a,o=arguments.length,n=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===("undefined"==typeof Reflect?"undefined":l()(Reflect))&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(n=(o<3?a(n):o>3?a(t,i,n):a(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n},X="e-input-focus",Y="e-hide-listitem",$="e-chips",Z=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.isValidKey=!1,s.selectAllEventData=[],s.selectAllEventEle=[],s.isDynamicDataChange=!1,s.scrollFocusStatus=!1,s.keyDownStatus=!1,s}return Q(t,e),t.prototype.enableRTL=function(e){e?this.overAllWrapper.classList.add("e-rtl"):this.overAllWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())},t.prototype.requiredModules=function(){var e=[];if("CheckBox"===this.mode){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=t}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,e.push({member:"CheckBoxSelection",args:[this]})}return e},t.prototype.updateHTMLAttribute=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];switch(i){case"class":var s=this.htmlAttributes[i].replace(/\s+/g," ").trim();""!==s&&(sf.base.addClass([this.overAllWrapper],s.split(" ")),sf.base.addClass([this.popupWrapper],s.split(" ")));break;case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(i,this.htmlAttributes[i]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:["id"].indexOf(i)>-1?this.element.setAttribute(i,this.htmlAttributes[i]):0===i.indexOf("data")||["name","required","aria-required","form"].indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[i]):["title","role","style","class"].indexOf(i)>-1?this.overAllWrapper.setAttribute(i,this.htmlAttributes[i]):this.inputElement.setAttribute(i,this.htmlAttributes[i])}}},t.prototype.updateReadonly=function(e){e||"CheckBox"===this.mode?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly")},t.prototype.updateClearButton=function(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove("e-close-icon-hide")):(this.overAllClear.style.display="none",this.componentWrapper.classList.add("e-close-icon-hide"))},t.prototype.updateCssClass=function(){if(!sf.base.isNullOrUndefined(this.cssClass)&&""!==this.cssClass){var e=this.cssClass;""!==(e=this.cssClass.replace(/\s+/g," ").trim())&&(sf.base.addClass([this.overAllWrapper],e.split(" ")),sf.base.addClass([this.popupWrapper],e.split(" ")))}},t.prototype.updateOldPropCssClass=function(e){sf.base.isNullOrUndefined(e)||""===e||""!==(e=e.replace(/\s+/g," ").trim())&&(sf.base.removeClass([this.overAllWrapper],e.split(" ")),sf.base.removeClass([this.popupWrapper],e.split(" ")))},t.prototype.onPopupShown=function(){var e=this;if(sf.base.Browser.isDevice&&"CheckBox"===this.mode&&this.allowFiltering){var t=this;window.onpopstate=function(){t.hidePopup(),t.inputElement.focus()},history.pushState({},"")}var i={popup:this.popupObj,cancel:!1,animation:{name:"FadeIn",duration:100}};this.trigger("open",i,(function(t){t.cancel||(e.focusAtFirstListItem(),document.body.appendChild(e.popupObj.element),"CheckBox"===e.mode&&e.enableGroupCheckBox&&!sf.base.isNullOrUndefined(e.fields.groupBy)&&e.updateListItems(e.list.querySelectorAll("li.e-list-item"),e.mainList.querySelectorAll("li.e-list-item")),("CheckBox"===e.mode||e.showDropDownIcon)&&sf.base.addClass([e.overAllWrapper],["e-icon-anim"]),e.refreshPopup(),e.popupObj.show(t.animation,1e3===e.zIndex?e.element:null),sf.base.attributes(e.inputElement,{"aria-expanded":"true"}),e.isFirstClick&&e.loadTemplate())}))},t.prototype.updateListItems=function(e,t){for(var i=0;i<e.length;i++)this.findGroupStart(e[i]),this.findGroupStart(t[i]);this.deselectHeader()},t.prototype.loadTemplate=function(){this.refreshListItems(null),"CheckBox"===this.mode&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this})},t.prototype.setScrollPosition=function(){if((!this.hideSelectedItem&&"CheckBox"!==this.mode||"CheckBox"===this.mode&&!this.enableSelectionOrder)&&!sf.base.isNullOrUndefined(this.value)&&this.value.length>0){var e=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",this.value[this.value.length-1]);sf.base.isNullOrUndefined(e)||this.scrollBottom(e)}},t.prototype.focusAtFirstListItem=function(){if(this.ulElement&&this.ulElement.querySelector("li."+m.li)){var e=void 0;if("CheckBox"===this.mode)return void this.removeFocus();null!==(e=this.ulElement.querySelector("li."+m.li+":not(."+Y+")"))&&(this.removeFocus(),this.addListFocus(e))}},t.prototype.focusAtLastListItem=function(e){var t;e?t=o(e,this.liCollections,"StartsWith",this.ignoreCase):this.value&&this.value.length?o(this.value[this.value.length-1],this.liCollections,"StartsWith",this.ignoreCase):t=null,t&&null!==t.item&&(this.addListFocus(t.item),this.scrollBottom(t.item,t.index))},t.prototype.getAriaAttributes=function(){return{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-multiselectable":"true","aria-activedescendant":"null","aria-haspopup":"true","aria-expanded":"false"}},t.prototype.updateListARIA=function(){sf.base.attributes(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"});var e=!!this.inputElement.disabled;sf.base.attributes(this.inputElement,this.getAriaAttributes()),e&&sf.base.attributes(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(e?"true":"false")},t.prototype.ensureAriaDisabled=function(e){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){var t=this.htmlAttributes;sf.base.extend(t,{"aria-disabled":e},t),this.setProperties({htmlAttributes:t},!0)}},t.prototype.removelastSelection=function(e){var t,i=(t=this.chipCollectionWrapper.querySelectorAll("span."+$))[t.length-1].getAttribute("data-value");sf.base.isNullOrUndefined(this.value)||(this.tempValues=this.value.slice()),this.removeValue(i,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()},t.prototype.onActionFailure=function(t){e.prototype.onActionFailure.call(this,t),this.renderPopup(),this.onPopupShown()},t.prototype.targetElement=function(){return this.targetInputElement=this.inputElement,"CheckBox"===this.mode&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.targetInputElement.value},t.prototype.getForQuery=function(e){for(var t,i=sf.base.isNullOrUndefined(this.fields.value)?this.fields.text:this.fields.value,s=0;s<e.length;s++)t=0===s?new sf.data.Predicate(i,"equal",e[s]):t.or(i,"equal",e[s]);return this.getQuery(this.query).where(t)},t.prototype.onActionComplete=function(t,i,s,l){e.prototype.onActionComplete.call(this,t,i,s),this.updateSelectElementData(this.allowFiltering);var a=this,o=[];if(sf.base.isBlazor()&&this.isServerRendered&&this.isDynamicDataChange&&null!==this.value&&this.value.length>0){for(var n=[],r=0;r<this.value.length;r++){var h=this.getDataByValue(this.value[r]);h&&n.push(h[this.fields.value])}0===n.length&&this.setProperties({value:null})}if(!sf.base.isNullOrUndefined(this.value)&&!this.allowCustomValue)for(var p=0;p<this.value.length;p++){this.findListElement(this.allowFiltering&&!sf.base.isNullOrUndefined(this.mainList)?this.mainList:t,"li","data-value",a.value[p])||o.push(a.value[p])}o.length>0&&this.dataSource instanceof sf.data.DataManager&&!sf.base.isNullOrUndefined(this.value)?this.dataSource.executeQuery(this.getForQuery(o)).then((function(e){a.addItem(e.result,i.length),a.updateActionList(t,i,e)})):this.updateActionList(t,i,s),sf.base.isBlazor()&&this.isServerRendered&&this.isDynamicDataChange&&this.value&&this.value.length>0&&(this.updateVal(this.value,null,"value"),this.addValidInputClass(),this.isDynamicDataChange=!1)},t.prototype.updateActionList=function(e,t,i,s){"CheckBox"===this.mode&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.mainList||this.mainData?sf.base.isNullOrUndefined(this.mainData)||0!==this.mainData.length||(this.mainData=t):(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=t,this.mainListCollection=this.liCollections),(this.remoteCustomValue||t.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering?this.checkForCustomValue(this.tempQuery,this.fields):(this.value&&this.value.length&&("CheckBox"!==this.mode&&""!==this.inputElement.value||"CheckBox"===this.mode)&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),sf.base.isNullOrUndefined(this.setInitialValue)||this.setInitialValue(),sf.base.isNullOrUndefined(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(sf.base.isNullOrUndefined(this.text)||!sf.base.isNullOrUndefined(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.initialValueUpdate(),this.initialUpdate(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown()))},t.prototype.refreshSelection=function(){var e,t,i=this.hideSelectedItem?Y:m.selected;if(!sf.base.isNullOrUndefined(this.value))for(var s=0;!sf.base.isNullOrUndefined(this.value[s]);s++)if(e=this.value[s],t=this.findListElement(this.list,"li","data-value",e)){if(sf.base.addClass([t],i),this.hideSelectedItem&&t.previousSibling&&t.previousElementSibling.classList.contains(m.group)&&(!t.nextElementSibling||t.nextElementSibling.classList.contains(m.group))&&sf.base.addClass([t.previousElementSibling],i),this.hideSelectedItem&&this.fields.groupBy&&!t.previousElementSibling.classList.contains(Y)&&this.hideGroupItem(e),this.hideSelectedItem&&t.classList.contains(m.focus)){sf.base.removeClass([t],m.focus);var l=t.parentElement.querySelectorAll("."+m.li+":not(."+Y+")");l.length>0?sf.base.addClass([l[0]],m.focus):(this.ulElement=this.ulElement.cloneNode?this.ulElement.cloneNode(!0):this.ulElement,this.l10nUpdate(),sf.base.addClass([this.list],m.noData))}if(t.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&t.classList.contains("e-active")){var a=t.firstElementChild.getAttribute("aria-checked");if(sf.base.isNullOrUndefined(a)||"false"===a){var o={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:t,e:null};this.notify("updatelist",o)}}}this.checkSelectAll(),this.checkMaxSelection()},t.prototype.hideGroupItem=function(e){var t,i,s=this.hideSelectedItem?Y:m.selected;i=t=this.findListElement(this.ulElement,"li","data-value",e);var l=0,a=0,o=!0,n=!0;do{t&&t.previousElementSibling&&!t.previousElementSibling.classList.contains(Y)&&t.previousElementSibling.classList.contains(m.li)&&(o=!1),!o||!t||t.previousElementSibling&&t.previousElementSibling.classList.contains(m.group)?l=10:t=t.previousElementSibling,i&&i.nextElementSibling&&!i.nextElementSibling.classList.contains(Y)&&i.nextElementSibling.classList.contains(m.li)&&(n=!1),!n||!i||i.nextElementSibling&&i.nextElementSibling.classList.contains(m.group)?a=10:i=i.nextElementSibling}while(l<10||a<10);o&&n&&!t.previousElementSibling.classList.contains(Y)?sf.base.addClass([t.previousElementSibling],s):o&&n&&t.previousElementSibling.classList.contains(Y)&&sf.base.removeClass([t.previousElementSibling],s)},t.prototype.checkSelectAll=function(){var e=this.list.querySelectorAll("li.e-list-group-item.e-active").length,t=this.list.querySelectorAll("li.e-list-item"),i=this.list.querySelectorAll("li."+m.li).length,s=this.list.querySelectorAll("li."+m.selected).length;if(this.enableGroupCheckBox&&!sf.base.isNullOrUndefined(this.fields.groupBy)&&(s-=e),i!==s&&s!==this.maximumSelectionLength||"CheckBox"!==this.mode||!this.showSelectAll?i!==s&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}):this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(var l=0;l<t.length;l++)this.findGroupStart(t[l]);this.deselectHeader()}},t.prototype.openClick=function(e){this.openOnClick||"CheckBox"===this.mode?this.openOnClick||"CheckBox"!==this.mode||this.isPopupOpen()||this.showPopup():""!==this.targetElement()?this.showPopup():this.hidePopup()},t.prototype.KeyUp=function(e){if("CheckBox"===this.mode&&!this.openOnClick){var t=String.fromCharCode(e.keyCode).match(/\w/);sf.base.isNullOrUndefined(t)||(this.isValidKey=!0)}this.isValidKey=this.isPopupOpen()&&8===e.keyCode||this.isValidKey,this.isValidKey=(!e.ctrlKey||86!==e.keyCode)&&this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),e.keyCode,this.search(e))},t.prototype.filter=function(e,t,i){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(e,t,i)},t.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new sf.data.Query;if(this.filterAction){if(null!==this.targetElement()){var i=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof sf.data.DataManager||"string"!==i)&&"number"!==i){var s=this.fields;t.where(sf.base.isNullOrUndefined(s.text)?"":s.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}else t.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}return t}return e||(this.query?this.query:new sf.data.Query)},t.prototype.dataUpdater=function(e,t,i){if(this.isDataFetched=!1,""===this.targetElement().trim()){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.backCommand&&(this.remoteCustomValue=!1,this.onActionComplete(s,this.mainData),this.value&&this.value.length&&this.refreshSelection(),8!==this.keyCode&&this.focusAtFirstListItem(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this}))}else this.resetList(e,i,t),this.allowCustomValue&&(e instanceof sf.data.DataManager?(this.remoteCustomValue=!0,this.tempQuery=t):this.checkForCustomValue(t,i));this.refreshPopup(),"CheckBox"===this.mode&&this.removeFocus()},t.prototype.checkForCustomValue=function(e,t){var i=!this.getValueByText(this.inputElement.value,this.ignoreCase);if(this.allowCustomValue&&i){var s=this.inputElement.value,l=t||this.fields;if("string"!=typeof(!sf.base.isNullOrUndefined(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData)){var a={};sf.base.setValue(l.text,s,a),sf.base.setValue(l.value,s,a),(o=JSON.parse(JSON.stringify(this.listData))).splice(0,0,a),this.resetList(o,l,e)}else{var o=[this.inputElement.value];this.resetList(o,l)}}this.value&&this.value.length&&this.refreshSelection()},t.prototype.getNgDirective=function(){return"EJS-MULTISELECT"},t.prototype.wrapperClick=function(e){if(this.setDynValue=!1,this.enabled)if(e.target!==this.overAllClear){if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(e.target&&-1!==e.target.classList.toString().indexOf("e-chips-close"))return void(this.isPopupOpen()&&this.refreshPopup());!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&e.target&&"e-input-group-icon e-ddl-icon"===e.target.className)?this.showPopup():(this.hidePopup(),"CheckBox"===this.mode&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains(X)||this.overAllWrapper.classList.add(X)))}e.preventDefault()}else e.preventDefault()},t.prototype.enable=function(e){e?(this.overAllWrapper.classList.remove("e-disabled"),this.inputElement.removeAttribute("disabled"),sf.base.attributes(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add("e-disabled"),this.inputElement.setAttribute("disabled","true"),sf.base.attributes(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==e&&(this.enabled=e),this.hidePopup()},t.prototype.onBlur=function(e,t){var i;if(sf.base.isNullOrUndefined(e)||(i=e.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(i))"CheckBox"!==this.mode&&this.inputElement.focus();else{if("CheckBox"===this.mode&&sf.base.Browser.isIE&&!sf.base.isNullOrUndefined(e)&&!t)return this.inputFocus=!1,void this.overAllWrapper.classList.remove(X);if(this.scrollFocusStatus)return sf.base.isNullOrUndefined(e)||e.preventDefault(),this.inputElement.focus(),void(this.scrollFocusStatus=!1);this.inputFocus=!1,this.overAllWrapper.classList.remove(X),this.refreshListItems(null),"Box"!==this.mode&&"CheckBox"!==this.mode&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&(this.DropDownBaseresetBlazorTemplates(!1,!1,!0,!0,!1,!0,!0),this.hidePopup()),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,sf.base.Browser.isDevice&&"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),function(e,t,i,s,l){e.classList.remove("e-input-focus");var a=t.querySelector(".e-float-text");i&&i.length<=0&&"Auto"===s&&!sf.base.isNullOrUndefined(a)&&(a.classList.contains(q)&&sf.base.removeClass([a],q),sf.base.addClass([a],R))}(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType,this.placeholder),this.refreshPlaceHolder(),(this.allowFiltering||!0===this.enableSelectionOrder&&"CheckBox"===this.mode)&&!sf.base.isNullOrUndefined(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize()}},t.prototype.checkPlaceholderSize=function(){if(this.showDropDownIcon){var e=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(e)}},t.prototype.setPlaceholderSize=function(e){sf.base.isNullOrUndefined(this.value)||0===this.value.length?0!==this.dropIcon.offsetWidth?this.searchWrapper.style.width="calc(100% - "+(e+10)+"px":sf.base.addClass([this.searchWrapper],"e-search-custom-width"):sf.base.isNullOrUndefined(this.value)||(this.searchWrapper.removeAttribute("style"),sf.base.removeClass([this.searchWrapper],"e-search-custom-width"))},t.prototype.refreshInputHight=function(){this.value&&this.value.length||!sf.base.isNullOrUndefined(this.text)&&""!==this.text?this.searchWrapper.classList.add("e-zero-size"):this.searchWrapper.classList.remove("e-zero-size")},t.prototype.validateValues=function(e,t){return JSON.stringify(e.slice().sort())!==JSON.stringify(t.slice().sort())},t.prototype.updateValueState=function(e,t,i){var s=t||[],l=i||[];if(this.initStatus&&this.validateValues(s,l)){var a={e:e,oldValue:i,value:t,isInteracted:!!e,element:this.element};this.trigger("change",a),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change")}},t.prototype.updateTempValue=function(){this.value?this.tempValues=this.value.slice():this.tempValues=this.value},t.prototype.getPagingCount=function(){var e=this.list.classList.contains(m.noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.offsetHeight/parseInt(e,10))},t.prototype.pageUpSelection=function(e){var t,i=this.list.querySelectorAll("li."+m.li+":not(."+Y+"):not(.e-reorder-hide)");t=e>=0?i[e+1]:i[0],this.addListFocus(t),this.scrollBottom(t,this.getIndexByValue(t.getAttribute("data-value")))},t.prototype.pageDownSelection=function(e){this.getItems();var t,i=this.list.querySelectorAll("li."+m.li+":not(."+Y+"):not(.e-reorder-hide)");t=e<=i.length?i[e-1]:i[i.length-1],this.addListFocus(t),this.scrollBottom(t,this.getIndexByValue(t.getAttribute("data-value")))},t.prototype.getItems=function(){return this.list||e.prototype.render.call(this),this.ulElement&&this.ulElement.querySelectorAll("."+m.li).length>0?this.ulElement.querySelectorAll("."+m.li+":not(."+Y+")"):[]},t.prototype.focusInHandler=function(e){if(this.enabled){if(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&("Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),"CheckBox"!==this.mode&&(this.viewWrapper.style.display="none")),"CheckBox"!==this.mode&&this.searchWrapper.classList.remove("e-zero-size"),this.checkPlaceholderSize(),this.focused){var t={isInteracted:!!e,event:e};this.trigger("focus",t),this.focused=!1}return this.overAllWrapper.classList.contains(X)||this.overAllWrapper.classList.add(X),function(e,t){e.classList.add("e-input-focus");var i=t.querySelector(".e-float-text");sf.base.isNullOrUndefined(i)||(sf.base.addClass([i],q),i.classList.contains(R)&&sf.base.removeClass([i],R))}(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),!0}return!1},t.prototype.showDelimWrapper=function(){"CheckBox"===this.mode?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add("e-delimiter")},t.prototype.hideDelimWrapper=function(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove("e-delimiter")},t.prototype.expandTextbox=function(){var e=5;this.placeholder&&(e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length),this.inputElement.value.length>e?this.inputElement.size=this.inputElement.value.length:this.inputElement.size=e},t.prototype.isPopupOpen=function(){return null!==this.popupWrapper&&null!==this.popupWrapper.parentElement},t.prototype.refreshPopup=function(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper))},t.prototype.checkTextLength=function(){return this.targetElement().length<1},t.prototype.popupKeyActions=function(e){switch(e.keyCode){case 38:this.hidePopup(),"CheckBox"===this.mode&&this.inputElement.focus(),e.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(),e.preventDefault())}},t.prototype.updateAriaAttribute=function(){var e=this.list.querySelector("."+m.focus);sf.base.isNullOrUndefined(e)||this.inputElement.setAttribute("aria-activedescendant",e.id)},t.prototype.homeNavigation=function(e){this.removeFocus();var t=this.ulElement.querySelectorAll("li."+m.li+":not(."+Y+"):not(.e-reorder-hide)");if(t.length>0){var i=t[e?0:t.length-1];i.classList.add(m.focus),this.scrollBottom(i)}},t.prototype.onKeyDown=function(e){if(!this.readonly&&(this.enabled||"CheckBox"===this.mode)&&(this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124)))if(e.altKey)this.popupKeyActions(e);else{if(this.isPopupOpen()){var t=this.list.querySelector("."+m.focus);switch(e.keyCode){case 36:case 35:this.homeNavigation(36===e.keyCode);break;case 33:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageUpSelection(void 0-this.getPagingCount()),this.updateAriaAttribute()));case 34:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageDownSelection(void 0+this.getPagingCount()),this.updateAriaAttribute()));case 38:this.arrowUp(e);break;case 40:this.arrowDown(e);break;case 27:return e.preventDefault(),this.hidePopup(),void("CheckBox"===this.mode&&this.inputElement.focus());case 13:return e.preventDefault(),"CheckBox"!==this.mode&&this.selectByKey(e),void this.checkPlaceholderSize();case 32:return void this.spaceKeySelection(e);case 9:e.preventDefault(),this.hidePopup(),this.inputElement.focus(),this.overAllWrapper.classList.add(X)}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:return e.preventDefault(),void this.escapeAction()}this.checkTextLength()&&this.keyNavigation(e),"CheckBox"===this.mode&&this.enableSelectionOrder&&this.checkBackCommand(e),this.expandTextbox(),this.refreshPopup()}},t.prototype.arrowDown=function(e){e.preventDefault(),this.moveByList(1),this.keyAction=!0,(document.activeElement.classList.contains("e-input-filter")||"CheckBox"===this.mode&&!this.allowFiltering&&document.activeElement!==this.list)&&(this.list.focus(),sf.base.EventHandler.add(this.list,"keydown",this.onKeyDown,this)),this.updateAriaAttribute()},t.prototype.arrowUp=function(e){e.preventDefault(),this.keyAction=!0;var t=this.list.querySelectorAll("li."+m.li+":not(."+Y+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&"CheckBox"===this.mode&&!sf.base.isNullOrUndefined(this.fields.groupBy)&&(t=this.list.querySelectorAll("li."+m.li+",li."+m.group+":not(."+Y+"):not(.e-reorder-hide)"));var i=this.list.querySelector("li."+m.focus);Array.prototype.slice.call(t).indexOf(i)<=0&&"CheckBox"===this.mode&&this.allowFiltering?(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})):this.list.focus(),this.moveByList(-1),this.updateAriaAttribute()},t.prototype.spaceKeySelection=function(e){"CheckBox"===this.mode&&(document.activeElement.classList.contains("e-input-filter")||(e.preventDefault(),this.keyAction=!0,this.list.focus()),this.selectByKey(e)),this.checkPlaceholderSize()},t.prototype.checkBackCommand=function(e){8===e.keyCode&&""===this.targetElement()?this.backCommand=!1:this.backCommand=!0},t.prototype.keyNavigation=function(e){if("Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1,e);break;case 39:e.preventDefault(),this.moveBy(1,e);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e)}else if(8===e.keyCode&&"Delimiter"===this.mode&&this.value&&this.value.length){e.preventDefault();var t=this.value[this.value.length-1];this.removeValue(t,e),this.updateDelimeter(this.delimiterChar,e),this.focusAtLastListItem(t)}},t.prototype.selectByKey=function(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()},t.prototype.escapeAction=function(){var e=this.tempValues?this.tempValues.slice():[];this.value&&this.validateValues(this.value,e)&&("CheckBox"!==this.mode&&(this.value=e,this.initialValueUpdate()),"Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()},t.prototype.scrollBottom=function(e,t){var i=this.list.offsetHeight,s=e.offsetTop+e.offsetHeight-this.list.scrollTop,l=this.list.scrollTop+s-i,a=e.offsetTop+e.offsetHeight-this.list.scrollTop;a=this.fields.groupBy&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?a-this.fixedHeaderElement.offsetHeight:a,0===t?this.list.scrollTop=0:s>i?this.list.scrollTop=l:a>0&&this.list.offsetHeight>a||(this.list.scrollTop=l)},t.prototype.scrollTop=function(e,t){var i=e.offsetTop-this.list.scrollTop;e.offsetTop,e.offsetHeight,this.list.scrollTop;i=this.fields.groupBy&&!sf.base.isUndefined(this.fixedHeaderElement)?i-this.fixedHeaderElement.offsetHeight:i;var s=e.offsetTop+e.offsetHeight-this.list.scrollTop;0===t?this.list.scrollTop=0:i<0?this.list.scrollTop=this.list.scrollTop+i:s>0&&this.list.offsetHeight>s||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!sf.base.isUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))},t.prototype.selectListByKey=function(e){var t,i=this.list.querySelector("li."+m.focus),s=this.value&&this.value.length?this.value.length:0;null!==i&&(i.classList.contains("e-active")&&(s-=1),this.isValidLI(i)&&s<this.maximumSelectionLength?(this.updateListSelection(i,e),this.addListFocus(i),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!sf.base.isNullOrUndefined(this.fields.groupBy)&&(t=i.firstElementChild.lastElementChild,this.findGroupStart(t),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),"CheckBox"!==this.mode&&this.refreshListItems(i.textContent),this.changeOnBlur||this.updateValueState(e,this.value,this.tempValues),this.refreshPopup()):!this.isValidLI(i)&&s<this.maximumSelectionLength&&((t=i.firstElementChild.lastElementChild).classList.contains("e-check")?this.selectAllItem(!1,e,i):this.selectAllItem(!0,e,i)),this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup()),this.refreshPlaceHolder()},t.prototype.refreshListItems=function(e){if((this.allowFiltering||"CheckBox"===this.mode&&!0===this.enableSelectionOrder||this.allowCustomValue)&&this.mainList&&this.listData){var t;t=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList,this.onActionComplete(t,this.mainData),this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection()}},t.prototype.removeSelectedChip=function(e){var t,i=this.chipCollectionWrapper.querySelector("span.e-chip-selected");null!==i&&(sf.base.isNullOrUndefined(this.value)||(this.tempValues=this.value.slice()),null!==(t=i.nextElementSibling)&&(this.removeChipSelection(),this.addChipSelection(t,e)),this.removeValue(i.getAttribute("data-value"),e),this.makeTextBoxEmpty()),this.closePopupOnSelect&&this.hidePopup(),this.checkPlaceholderSize()},t.prototype.moveByTop=function(e){var t,i=this.list.querySelectorAll("li."+m.li);i.length>1&&(this.removeFocus(),t=e?0:i.length-1,this.addListFocus(i[t]),this.scrollBottom(i[t],t)),this.updateAriaAttribute()},t.prototype.moveByList=function(e){if(this.list){var t=this.list.querySelectorAll("li."+m.li+":not(."+Y+"):not(.e-reorder-hide)");"CheckBox"===this.mode&&this.enableGroupCheckBox&&!sf.base.isNullOrUndefined(this.fields.groupBy)&&(t=this.list.querySelectorAll("li."+m.li+",li."+m.group+":not(."+Y+"):not(.e-reorder-hide)"));var i=this.list.querySelector("li."+m.focus),s=-1;if(t.length){for(var l=0;l<t.length;l++)if(t[l]===i){s=l;break}e>0?s<t.length-1&&(this.removeFocus(),this.addListFocus(t[++s]),this.updateCheck(t[s]),this.scrollBottom(t[s],s)):s>0&&(this.removeFocus(),this.addListFocus(t[--s]),this.updateCheck(t[s]),this.scrollTop(t[s],s))}}},t.prototype.updateCheck=function(e){"CheckBox"===this.mode&&this.enableGroupCheckBox&&!sf.base.isNullOrUndefined(this.fields.groupBy)&&(e.firstElementChild.lastElementChild.classList.contains("e-check")?e.classList.add("e-active"):e.classList.remove("e-active"))},t.prototype.moveBy=function(e,t){var i,s,l;i=this.chipCollectionWrapper.querySelectorAll("span."+$),null===(s=this.chipCollectionWrapper.querySelector("span.e-chip-selected"))?e<0&&this.addChipSelection(i[i.length-1],t):e<0?null!==(l=s.previousElementSibling)&&(this.removeChipSelection(),this.addChipSelection(l,t)):(l=s.nextElementSibling,this.removeChipSelection(),null!==l&&this.addChipSelection(l,t))},t.prototype.chipClick=function(e){if(this.enabled){var t=sf.base.closest(e.target,"."+$);this.removeChipSelection(),this.addChipSelection(t,e)}},t.prototype.removeChipSelection=function(){this.chipCollectionWrapper&&this.removeChipFocus()},t.prototype.addChipSelection=function(e,t){sf.base.addClass([e],"e-chip-selected"),this.trigger("chipSelection",t)},t.prototype.onChipRemove=function(e){if(3!==e.which&&2!==e.button&&this.enabled&&!this.readonly){var t=e.target.parentElement.getAttribute("data-value"),i=this.getFormattedValue(t);if(this.allowCustomValue&&("false"!==t&&!1===i||!sf.base.isNullOrUndefined(i)&&"NaN"===i.toString())&&(i=t),this.isPopupOpen()&&"CheckBox"!==this.mode&&this.hidePopup(),this.inputFocus||this.inputElement.focus(),this.removeValue(i,e),sf.base.isNullOrUndefined(this.findListElement(this.list,"li","data-value",i))&&this.mainList&&this.listData){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(s,this.mainData)}this.updateDelimeter(this.delimiterChar,e),this.placeholder&&"Never"===this.floatLabelType?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",e.preventDefault()}},t.prototype.makeTextBoxEmpty=function(){this.inputElement.value="",this.refreshPlaceHolder()},t.prototype.refreshPlaceHolder=function(){this.placeholder&&"Never"===this.floatLabelType?this.value&&this.value.length||!sf.base.isNullOrUndefined(this.text)&&""!==this.text?this.inputElement.placeholder="":this.inputElement.placeholder=this.placeholder:this.setFloatLabelType(),this.expandTextbox()},t.prototype.removeValue=function(e,t,i,s){var l=this,a=this.value.indexOf(this.getFormattedValue(e));-1===a&&this.allowCustomValue&&!sf.base.isNullOrUndefined(e)&&(a=this.value.indexOf(e.toString()));var o=t&&t.target;s=!!(s||o&&o.classList.contains("e-close-hooker"))||null;var n=this.hideSelectedItem?Y:m.selected;if(-1!==a){var r=this.findListElement(this.list,"li","data-value",e),h=this.getDataByValue(e),p={e:t,item:r,itemData:h,isInteracted:!!t,cancel:!1};this.trigger("removing",p,(function(o){if(o.cancel)l.removeIndex++;else{var p=l.value.slice(0);if(p.splice(a,1),sf.base.isBlazor()&&l.isServerRendered){var u=[].concat([],p);l.setProperties({value:0===u.length?null:u},!0)}else l.setProperties({value:[].concat([],p)},!0);if(null!==r){var c=l.findListElement(l.mainList,"li","data-value",e);r.setAttribute("aria-selected","false"),sf.base.removeClass([r],n),c&&(c.setAttribute("aria-selected","false"),sf.base.removeClass([r,c],n)),l.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===l.mode,li:r,e:l,index:a}),l.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===l.mode,li:r,e:t}),sf.base.attributes(l.inputElement,{"aria-activedescendant":r.id}),l.value&&l.value.length!==l.mainData.length&&"CheckBox"===l.mode&&l.showSelectAll&&l.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===l.mode,value:"uncheck"})}if(l.hideSelectedItem&&l.fields.groupBy&&l.hideGroupItem(e),l.updateMainList(!0,e),l.removeChip(e),l.updateChipStatus(),(l.value&&l.value.length?l.value.length:0)<l.maximumSelectionLength){var d=l.list.querySelectorAll("li."+m.li+":not(.e-active)");sf.base.removeClass(d,"e-disable")}l.trigger("removed",o);var f=t&&t.currentTarget,v=!(!f||!f.classList.contains("e-selectall-parent"))||null;if(l.changeOnBlur||s||!t||!i||v||l.updateValueState(t,l.value,l.tempValues),i&&(l.selectAllEventData.push(h),l.selectAllEventEle.push(r)),1===i){l.changeOnBlur||l.updateValueState(t,l.value,l.tempValues);var b={event:t,items:l.selectAllEventEle,itemData:l.selectAllEventData,isInteracted:!!t,isChecked:!1};l.trigger("selectedAll",b),l.selectAllEventData=[],l.selectAllEventEle=[]}!s||1!==i&&null!==i||l.clearAllCallback(t,s),sf.base.isBlazor()&&l.isServerRendered&&(sf.base.isNullOrUndefined(l.value)||0===l.value.length)&&l.updatedataValueItems(t)}}))}},t.prototype.updateMainList=function(e,t){if(this.allowFiltering||"CheckBox"===this.mode){var i=this.findListElement(this.mainList,"li","data-value",t);i&&(e?(i.setAttribute("aria-selected","false"),sf.base.removeClass([i],this.hideSelectedItem?Y:m.selected),"CheckBox"===this.mode&&(i.firstElementChild.setAttribute("aria-checked","false"),sf.base.removeClass([i.firstElementChild.lastElementChild],"e-check"))):(i.setAttribute("aria-selected","true"),sf.base.addClass([i],this.hideSelectedItem?Y:m.selected),"CheckBox"===this.mode&&(i.firstElementChild.setAttribute("aria-checked","true"),sf.base.addClass([i.firstElementChild.lastElementChild],"e-check"))))}},t.prototype.removeChip=function(e){if(this.chipCollectionWrapper){var t=this.findListElement(this.chipCollectionWrapper,"span","data-value",e);t&&sf.base.remove(t)}},t.prototype.setWidth=function(e){sf.base.isNullOrUndefined(e)||("number"==typeof e?this.overAllWrapper.style.width=sf.base.formatUnit(e):"string"==typeof e&&(this.overAllWrapper.style.width=e.match(/px|%|em/)?e:sf.base.formatUnit(e)))},t.prototype.updateChipStatus=function(){this.value&&this.value.length?(sf.base.isNullOrUndefined(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper(),this.showOverAllClear()):(sf.base.isNullOrUndefined(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),sf.base.isNullOrUndefined(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())},t.prototype.addValue=function(e,t,i){this.value||(this.value=[]),this.value.indexOf(e)<0&&this.setProperties({value:[].concat([],this.value,[e])},!0);var s=this.findListElement(this.list,"li","data-value",e);this.removeFocus(),s&&(this.addListFocus(s),this.addListSelection(s)),"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.addChip(t,e,i),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateChipStatus(),this.checkMaxSelection()},t.prototype.checkMaxSelection=function(){if((this.value&&this.value.length?this.value.length:0)===this.maximumSelectionLength){var e=this.list.querySelectorAll("li."+m.li+":not(.e-active)");sf.base.addClass(e,"e-disable")}},t.prototype.dispatchSelect=function(e,t,i,s,l){var a=this;if(this.initStatus&&!s){var o=this.getDataByValue(e),n={e:t,item:i,itemData:o,isInteracted:!!t,cancel:!1};this.trigger("select",n,(function(s){if(!s.cancel){if(l&&(a.selectAllEventData.push(o),a.selectAllEventEle.push(i)),1===l){var n={event:t,items:a.selectAllEventEle,itemData:a.selectAllEventData,isInteracted:!!t,isChecked:!0};a.trigger("selectedAll",n),a.selectAllEventData=[]}a.updateListSelectEventCallback(e,i,t)}}))}},t.prototype.addChip=function(e,t,i){this.chipCollectionWrapper&&this.getChip(e,t,i)},t.prototype.removeChipFocus=function(){var e,t;if(e=this.chipCollectionWrapper.querySelectorAll("span."+$),t=this.chipCollectionWrapper.querySelectorAll("span."+"e-chips-close".split(" ")[0]),sf.base.removeClass(e,"e-chip-selected"),sf.base.Browser.isDevice)for(var i=0;i<t.length;i++)t[i].style.display="none"},t.prototype.onMobileChipInteraction=function(e){var t=sf.base.closest(e.target,"."+$),i=t.querySelector("span."+"e-chips-close".split(" ")[0]);this.enabled&&!this.readonly&&(t.classList.contains("e-chip-selected")||(this.removeChipFocus(),i.style.display="",t.classList.add("e-chip-selected")),this.refreshPopup(),e.preventDefault())},t.prototype.multiCompiler=function(e){var t=!1;if(e)try{t=!!document.querySelectorAll(e).length}catch(e){t=!1}return t},t.prototype.getChip=function(e,t,i){var s=this,l={text:t,value:t},a=this.createElement("span",{className:$,attrs:{"data-value":t,title:e}}),o=this.createElement("span",{className:"e-chipcontent"}),n=this.createElement("span",{className:"e-chips-close"});if(this.mainData&&(l=sf.base.isBlazor()&&this.isServerRendered?JSON.parse(JSON.stringify(this.getDataByValue(t))):this.getDataByValue(t)),this.valueTemplate&&!sf.base.isNullOrUndefined(l)){for(var r=0,h=(this.multiCompiler(this.valueTemplate)?sf.base.compile(document.querySelector(this.valueTemplate).innerHTML.trim()):sf.base.compile(this.valueTemplate))(l,null,null,this.valueTemplateId,this.isStringTemplate);r<h.length;r++){var p=h[r];o.appendChild(p)}this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!0,!1,!1,!1)}else o.innerHTML=e;a.appendChild(o);var u={isInteracted:!!i,itemData:l,e:i,setClass:function(e){sf.base.addClass([a],e)},cancel:!1};this.trigger("tagging",u,(function(e){e.cancel||(e.setClass&&"string"==typeof e.setClass&&sf.base.isBlazor()&&s.isServerRendered&&sf.base.addClass([a],e.setClass),sf.base.Browser.isDevice?(a.classList.add("e-mob-chip"),sf.base.append([n],a),n.style.display="none",sf.base.EventHandler.add(a,"click",s.onMobileChipInteraction,s)):(sf.base.EventHandler.add(a,"mousedown",s.chipClick,s),s.showClearButton&&a.appendChild(n)),sf.base.EventHandler.add(n,"mousedown",s.onChipRemove,s),s.chipCollectionWrapper.appendChild(a),!s.changeOnBlur&&i&&s.updateValueState(i,s.value,s.tempValues))}))},t.prototype.calcPopupWidth=function(){var e=sf.base.formatUnit(this.popupWidth);e.indexOf("%")>-1&&(e=(this.componentWrapper.offsetWidth*parseFloat(e)/100).toString()+"px");return e},t.prototype.mouseIn=function(){this.enabled&&!this.readonly&&this.showOverAllClear()},t.prototype.mouseOut=function(){this.inputFocus||(this.overAllClear.style.display="none")},t.prototype.listOption=function(e,t){var i=!sf.base.isNullOrUndefined(t.iconCss),s=sf.base.isNullOrUndefined(t.properties)?t:t.properties;return this.listCurrentOptions=null!==t.text||null!==t.value?{fields:s,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},sf.base.extend(this.listCurrentOptions,this.listCurrentOptions,t,!0),"CheckBox"===this.mode&&this.notify("listoption",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,dataSource:e,fieldProperty:s}),this.listCurrentOptions},t.prototype.renderPopup=function(){var t=this;if(this.list||e.prototype.render.call(this),!this.popupObj){this.trigger("beforeOpen",{cancel:!1},(function(e){if(!e.cancel){document.body.appendChild(t.popupWrapper);var i=t.popupWrapper.querySelector(".e-filter-parent");"CheckBox"===t.mode&&!t.allowFiltering&&i&&t.filterParent&&(i.remove(),t.filterParent=null);var s=parseInt(t.popupHeight,10);if(t.popupWrapper.style.visibility="hidden",t.headerTemplate&&(t.setHeaderTemplate(),s-=t.header.offsetHeight),sf.base.append([t.list],t.popupWrapper),t.footerTemplate&&(t.setFooterTemplate(),s-=t.footer.offsetHeight),"CheckBox"===t.mode&&t.showSelectAll?(t.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===t.mode}),s-=t.selectAllHeight):"CheckBox"!==t.mode||t.showSelectAll||t.headerTemplate&&t.footerTemplate?"CheckBox"!==t.mode||t.showSelectAll||(t.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===t.mode}),s=parseInt(t.popupHeight,10),t.headerTemplate&&t.header&&(s-=t.header.offsetHeight),t.footerTemplate&&t.footer&&(s-=t.footer.offsetHeight)):(t.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===t.mode}),s=parseInt(t.popupHeight,10)),"CheckBox"===t.mode){var l={module:"CheckBoxSelection",enable:"CheckBox"===t.mode,popupElement:t.popupWrapper};t.allowFiltering&&(t.notify("searchBox",l),s-=t.searchBoxHeight),sf.base.addClass([t.popupWrapper],"e-checkbox")}"auto"!==t.popupHeight?(t.list.style.maxHeight=sf.base.formatUnit(s),t.popupWrapper.style.maxHeight=sf.base.formatUnit(t.popupHeight)):t.list.style.maxHeight=sf.base.formatUnit(t.popupHeight),t.popupObj=new sf.popups.Popup(t.popupWrapper,{width:t.calcPopupWidth(),targetType:"relative",position:{X:"left",Y:"bottom"},relateTo:t.overAllWrapper,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:t.enableRtl,zIndex:t.zIndex,close:function(){t.popupObj.element.parentElement&&(t.popupObj.unwireScrollEvents(),sf.base.detach(t.popupObj.element))},open:function(){if(!t.isFirstClick){var e=t.list.querySelector("ul");e&&(t.itemTemplate&&sf.base.isBlazor()&&t.isServerRendered?setTimeout((function(){t.mainList=t.ulElement}),0):"CheckBox"!==t.mode&&t.allowFiltering&&""!==t.targetElement().trim()||(t.mainList=e.cloneNode?e.cloneNode(!0):e)),t.isFirstClick=!0}t.popupObj.wireScrollEvents(),"CheckBox"!==t.mode&&t.allowFiltering&&""!==t.targetElement().trim()||t.loadTemplate(),t.setScrollPosition(),t.allowFiltering&&t.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===t.mode,value:"focus"})},targetExitViewport:function(){sf.base.Browser.isDevice||t.hidePopup()}}),t.popupObj.close(),t.popupWrapper.style.visibility="","CheckBox"===t.mode&&sf.base.Browser.isDevice&&t.allowFiltering&&t.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:"CheckBox"===t.mode})}}))}},t.prototype.setHeaderTemplate=function(){this.header&&this.header.remove(),this.header=this.createElement("div"),sf.base.addClass([this.header],"e-ddl-header");for(var e=(this.multiCompiler(this.headerTemplate)?sf.base.compile(document.querySelector(this.headerTemplate).innerHTML.trim()):sf.base.compile(this.headerTemplate))({},null,null,this.headerTemplateId,this.isStringTemplate),t=0;t<e.length;t++)this.header.appendChild(e[t]);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!0,!1),"CheckBox"===this.mode&&this.showSelectAll?sf.base.prepend([this.header],this.popupWrapper):sf.base.append([this.header],this.popupWrapper),sf.base.EventHandler.add(this.header,"mousedown",this.onListMouseDown,this)},t.prototype.setFooterTemplate=function(){this.footer&&this.footer.remove(),this.footer=this.createElement("div"),sf.base.addClass([this.footer],"e-ddl-footer");for(var e=(this.multiCompiler(this.footerTemplate)?sf.base.compile(document.querySelector(this.footerTemplate).innerHTML.trim()):sf.base.compile(this.footerTemplate))({},null,null,this.footerTemplateId,this.isStringTemplate),t=0;t<e.length;t++)this.footer.appendChild(e[t]);this.DropDownBaseupdateBlazorTemplates(!1,!1,!1,!1,!1,!1,!0),sf.base.append([this.footer],this.popupWrapper),sf.base.EventHandler.add(this.footer,"mousedown",this.onListMouseDown,this)},t.prototype.ClearAll=function(e){if(this.enabled&&!this.readonly){var t=void 0;if(this.value&&this.value.length>0){var i=this.list&&this.list.querySelectorAll("li.e-list-item");if(i&&i.length>0)this.selectAllItems(!1,e);else for(this.removeIndex=0,t=this.value[this.removeIndex];this.removeIndex<this.value.length;t=this.value[this.removeIndex])this.removeValue(t,e,null,!0)}else this.clearAllCallback(e)}},t.prototype.clearAllCallback=function(e,t){var i=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&"CheckBox"!==this.mode||this.allowCustomValue)){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(s,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,e),"Box"===this.mode||this.inputFocus&&"CheckBox"!==this.mode||this.updateDelimView(),this.makeTextBoxEmpty(),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(e,this.value,i),"CheckBox"!==this.mode&&this.inputElement.focus()),"CheckBox"===this.mode&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&t&&(sf.base.isNullOrUndefined(this.value)||0===this.value.length)&&this.updateValueState(e,this.value,this.tempValues)),this.changeOnBlur||!t||!sf.base.isNullOrUndefined(this.value)&&0!==this.value.length||this.updateValueState(e,this.value,this.tempValues),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!sf.base.isNullOrUndefined(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),e.preventDefault()},t.prototype.windowResize=function(){this.refreshPopup(),this.inputFocus&&"CheckBox"!==this.mode||!this.viewWrapper||!this.viewWrapper.parentElement||this.updateDelimView()},t.prototype.resetValueHandler=function(e){var t=sf.base.closest(this.inputElement,"form");if(t&&e.target===t){var i=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=i}},t.prototype.wireEvent=function(){sf.base.EventHandler.add(this.componentWrapper,"mousedown",this.wrapperClick,this),sf.base.EventHandler.add(window,"resize",this.windowResize,this),sf.base.EventHandler.add(this.inputElement,"focus",this.focusInHandler,this),sf.base.EventHandler.add(this.inputElement,"keydown",this.onKeyDown,this),sf.base.EventHandler.add(this.inputElement,"keyup",this.KeyUp,this),"CheckBox"!==this.mode&&sf.base.EventHandler.add(this.inputElement,"input",this.onInput,this),sf.base.EventHandler.add(this.inputElement,"blur",this.onBlur,this),sf.base.EventHandler.add(this.componentWrapper,"mousemove",this.mouseIn,this);var e=sf.base.closest(this.inputElement,"form");e&&sf.base.EventHandler.add(e,"reset",this.resetValueHandler,this),sf.base.EventHandler.add(this.componentWrapper,"mouseout",this.mouseOut,this),sf.base.EventHandler.add(this.overAllClear,"mouseup",this.ClearAll,this),sf.base.EventHandler.add(this.inputElement,"paste",this.pasteHandler,this)},t.prototype.onInput=function(e){this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1,sf.base.Browser.isDevice&&"mozilla"===sf.base.Browser.info.name&&this.search(e)},t.prototype.pasteHandler=function(e){var t=this;setTimeout((function(){t.search(e)}))},t.prototype.search=function(e){var t=this;if(!this.isPopupOpen()&&this.openOnClick&&this.showPopup(),this.openClick(e),this.checkTextLength()&&!this.allowFiltering&&8!==e.keyCode)this.focusAtFirstListItem();else{var i=this.targetElement();if(this.keyCode=e.keyCode,this.allowFiltering){var s={preventDefaultAction:!1,text:this.targetElement(),updateData:function(e,i,l){s.cancel||(t.isFiltered=!0,t.remoteFilterAction=!0,t.dataUpdater(e,i,l))},event:e,cancel:!1};this.trigger("filtering",s,(function(e){e.cancel||t.isFiltered||e.preventDefaultAction||(t.filterAction=!0,t.dataUpdater(t.dataSource,null,t.fields))}))}else if(this.allowCustomValue){var l=new sf.data.Query;l=""!==i?l.where(this.fields.text,"startswith",i,this.ignoreCase,this.ignoreAccent):l,this.dataUpdater(this.mainData,l,this.fields)}else{var a;a=this.list.querySelectorAll("li."+m.li+":not(.e-hide-listitem)");var n=o(this.targetElement(),a,"StartsWith",this.ignoreCase);n&&null!==n.item?(this.addListFocus(n.item),this.list.scrollTop=n.item.offsetHeight*n.index):""!==this.targetElement()?this.removeFocus():this.focusAtFirstListItem()}}},t.prototype.preRender=function(){null===this.allowFiltering&&(this.allowFiltering="CheckBox"===this.mode),this.initializeData(),this.updateDataAttribute(this.htmlAttributes),e.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"multi-select"},t.prototype.initializeData=function(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0},t.prototype.updateData=function(e,t){var i,s="",l="Delimiter"===this.mode||"CheckBox"===this.mode,a=[],o=this.listData;if(this.listData=this.mainData,this.hiddenElement.innerHTML="",!sf.base.isNullOrUndefined(this.value))for(var n=0;!sf.base.isNullOrUndefined(this.value[n]);n++)s+=(i=this.listData?this.getTextByValue(this.value[n]):this.value[n])+e+" ",a.push(i),this.hiddenElement.innerHTML+='<option selected value ="'+this.value[n]+'">'+n+"</option>";this.setProperties({text:a.toString()},!0),l&&(this.delimiterWrapper.innerHTML=s,this.delimiterWrapper.setAttribute("id",sf.base.getUniqueID("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id));var r=t&&t.target,h=!(!r||!r.classList.contains("e-close-hooker"))||null;(!this.changeOnBlur&&t&&!h||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(t,this.value,this.tempValues)),this.listData=o,this.addValidInputClass()},t.prototype.initialTextUpdate=function(){if(sf.base.isNullOrUndefined(this.text))this.setProperties({value:null},!0);else{for(var e=this.text.split(this.delimiterChar),t=[],i=0;e.length>i;i++){var s=this.getValueByText(e[i]);sf.base.isNullOrUndefined(s)?this.allowCustomValue&&t.push(e[i]):t.push(s)}t&&t.length&&this.setProperties({value:t},!0)}},t.prototype.renderList=function(t){!t&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&0===this.list.querySelector(".e-ul").childElementCount)&&(t=!0),e.prototype.render.call(this,t),this.unwireListEvents(),this.wireListEvents()},t.prototype.initialValueUpdate=function(){if(this.list){var e=void 0,t=void 0,i=void 0;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!sf.base.isNullOrUndefined(this.value))for(var s=0;!sf.base.isNullOrUndefined(this.value[s]);s++)if(i=this.value[s],t=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",i),e=this.getTextByValue(i),t&&"true"!==t.getAttribute("aria-selected")||t&&"true"===t.getAttribute("aria-selected")&&this.hideSelectedItem&&("Box"===this.mode||"Default"===this.mode))this.addChip(e,i),this.addListSelection(t);else if(i&&this.allowCustomValue){var l=this.listData.length,a={};sf.base.setValue(this.fields.text,i,a),sf.base.setValue(this.fields.value,i,a);var o=this.popupWrapper.querySelector("."+m.noData);this.addItem(a,l),this.popupWrapper.contains(o)&&(this.list.setAttribute("style",o.getAttribute("style")),this.popupWrapper.replaceChild(this.list,o),this.wireListEvents()),this.addChip(e,i),this.addListSelection(t)}"CheckBox"===this.mode?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar),"CheckBox"!==this.mode||!this.showSelectAll||!sf.base.isNullOrUndefined(this.value)&&this.value.length||this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),"Box"===this.mode?this.chipCollectionWrapper.style.display="":"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper()}},t.prototype.updateActionCompleteData=function(e,t){this.value&&this.value.indexOf(e.getAttribute("data-value"))>-1&&(this.mainList=this.ulElement,sf.base.addClass([e],Y))},t.prototype.updateAddItemList=function(e,t){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector("."+m.noData)&&e&&(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"),sf.base.remove(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup())},t.prototype.updateDataList=function(){this.mainList&&this.ulElement&&this.mainList.childElementCount<this.ulElement.childElementCount&&(this.mainList=this.ulElement.cloneNode?this.ulElement.cloneNode(!0):this.ulElement)},t.prototype.isValidLI=function(e){return e&&!e.classList.contains(m.disabled)&&!e.classList.contains(m.group)&&e.classList.contains(m.li)},t.prototype.updateListSelection=function(e,t,i){var s=e.getAttribute("data-value"),l=this.getFormattedValue(s);this.allowCustomValue&&("false"!==s&&!1===l||!sf.base.isNullOrUndefined(l)&&"NaN"===l.toString())&&(l=s);this.getTextByValue(l);this.removeHover(),this.value&&-1!==this.value.indexOf(l)?this.removeValue(l,t,i):this.dispatchSelect(l,t,e,"true"===e.getAttribute("aria-selected"),i)},t.prototype.updateListSelectEventCallback=function(e,t,i){var s=this,l=this.getTextByValue(e);if(!this.allowCustomValue&&!this.allowFiltering||this.findListElement(this.mainList,"li","data-value",e))this.remoteCustomValue=!1,this.addValue(e,l,i);else{var a=t.cloneNode(!0),o=this.getDataByValue(e),n={newData:o,cancel:!1};this.trigger("customValueSelection",n,(function(t){t.cancel||(sf.base.append([a],s.mainList),s.mainData.push(o),s.remoteCustomValue=!1,s.addValue(e,l,i))}))}(sf.base.isBlazor()&&this.isServerRendered&&this.value&&this.list&&this.value.length===this.list.querySelectorAll("li.e-list-item").length||this.value.length===this.maximumSelectionLength)&&(this.updatedataValueItems(i),this.checkPlaceholderSize()),sf.base.isBlazor()&&this.isServerRendered&&(this.checkPlaceholderSize(),this.makeTextBoxEmpty())},t.prototype.removeListSelection=function(){var e=this.hideSelectedItem?Y:m.selected,t=this.list.querySelectorAll("."+e),i=t.length;if(t&&t.length)for(sf.base.removeClass(t,e);i>0;)t[i-1].setAttribute("aria-selected","false"),i--;if(!sf.base.isNullOrUndefined(this.mainList)){var s=this.mainList.querySelectorAll("."+e),l=s.length;if(s&&s.length)for(sf.base.removeClass(s,e);l>0;)s[l-1].setAttribute("aria-selected","false"),"CheckBox"===this.mode&&(t&&t.length>l-1&&(t[l-1].firstElementChild.setAttribute("aria-checked","false"),sf.base.removeClass([t[l-1].firstElementChild.lastElementChild],"e-check")),s[l-1].firstElementChild.setAttribute("aria-checked","false"),sf.base.removeClass([s[l-1].firstElementChild.lastElementChild],"e-check")),l--}},t.prototype.removeHover=function(){var e=this.list.querySelectorAll("."+m.hover);e&&e.length&&sf.base.removeClass(e,m.hover)},t.prototype.removeFocus=function(){if(this.list&&this.mainList){var e=this.list.querySelectorAll("."+m.focus),t=this.mainList.querySelectorAll("."+m.focus);e&&e.length&&(sf.base.removeClass(e,m.focus),sf.base.removeClass(t,m.focus))}},t.prototype.addListHover=function(e){(this.enabled&&this.isValidLI(e)||null!==e&&e.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&!sf.base.isNullOrUndefined(this.fields.groupBy))&&(this.removeHover(),sf.base.addClass([e],m.hover))},t.prototype.addListFocus=function(e){this.enabled&&this.isValidLI(e)?(this.removeFocus(),sf.base.addClass([e],m.focus)):this.enableGroupCheckBox&&"CheckBox"===this.mode&&!sf.base.isNullOrUndefined(this.fields.groupBy)&&sf.base.addClass([e],m.focus)},t.prototype.addListSelection=function(e){var t=this.hideSelectedItem?Y:m.selected;if(this.isValidLI(e)&&!e.classList.contains(m.hover)){if(sf.base.addClass([e],t),this.updateMainList(!1,e.getAttribute("data-value")),e.setAttribute("aria-selected","true"),"CheckBox"===this.mode){var i=e.firstElementChild.getAttribute("aria-checked");("false"===i||sf.base.isNullOrUndefined(i))&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this}),null!==this.chipCollectionWrapper&&this.removeChipSelection(),sf.base.attributes(this.inputElement,{"aria-activedescendant":e.id})}},t.prototype.updateDelimeter=function(e,t){this.updateData(e,t)},t.prototype.onMouseClick=function(e){this.scrollFocusStatus=!1;var t=e.target,i=sf.base.closest(t,"."+m.li);if(sf.base.closest(t,"."+m.group)&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&this.fields.groupBy)(t=t.classList.contains("e-list-group-item")?t.firstElementChild.lastElementChild:e.target).classList.contains("e-check")?(this.selectAllItem(!1,e),t.classList.remove("e-check"),t.classList.remove("e-stop"),sf.base.closest(t,".e-list-group-item").classList.remove("e-active"),t.setAttribute("aria-selected","false")):(this.selectAllItem(!0,e),t.classList.remove("e-stop"),t.classList.add("e-check"),sf.base.closest(t,".e-list-group-item").classList.add("e-active"),t.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI(i)){var s=this.value&&this.value.length?this.value.length:0;i.classList.contains("e-active")&&(s-=1),s<this.maximumSelectionLength&&(this.updateListSelection(i,e),this.checkPlaceholderSize(),this.addListFocus(i),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?("CheckBox"!==this.mode&&this.focusAtLastListItem(i.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.checkSelectAll(),this.refreshPopup(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup():e.preventDefault(),this.makeTextBoxEmpty(),this.findGroupStart(t)}else e.preventDefault();"CheckBox"!==this.mode&&this.refreshListItems(sf.base.isNullOrUndefined(i)?null:i.textContent),this.refreshPlaceHolder(),this.deselectHeader()}},t.prototype.findGroupStart=function(e){if(this.enableGroupCheckBox&&"CheckBox"===this.mode&&!sf.base.isNullOrUndefined(this.fields.groupBy)){var t=void 0;if(this.itemTemplate&&!e.getElementsByClassName("e-frame").length)for(;!e.getElementsByClassName("e-frame").length;)e=e.parentElement;for(e.classList.contains("e-frame")&&(e=e.parentElement.parentElement),t=this.findGroupAttrtibutes(e,0,0,0,0),t=this.findGroupAttrtibutes(e,t[0],t[1],t[2],1);!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),null!=(e=e.previousElementSibling)););this.updateCheckBox(e,t[0],t[1],t[2])}},t.prototype.findGroupAttrtibutes=function(e,t,i,s,l){for(;!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&e.classList.contains("e-list-item")?t++:e.classList.contains("e-list-item")&&i++,s++,null!=(e=l?e.nextElementSibling:e.previousElementSibling)););return[t,i,s]},t.prototype.updateCheckBox=function(e,t,i,s){if(null!==e){var l=e.getElementsByClassName("e-frame")[0];s===t?(l.classList.remove("e-stop"),l.classList.add("e-check"),sf.base.closest(l,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","true")):s===i?(l.classList.remove("e-check"),l.classList.remove("e-stop"),sf.base.closest(l,".e-list-group-item").classList.remove("e-active"),e.setAttribute("aria-selected","false")):this.maximumSelectionLength===t-1?(l.classList.remove("e-stop"),e.setAttribute("aria-selected","true"),sf.base.closest(l,".e-list-group-item").classList.add("e-active"),l.classList.add("e-check")):(l.classList.remove("e-check"),l.classList.add("e-stop"),sf.base.closest(l,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","false"))}},t.prototype.deselectHeader=function(){var e=this.value&&this.value.length?this.value.length:0,t=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");e<this.maximumSelectionLength&&sf.base.removeClass(t,"e-disable"),e===this.maximumSelectionLength&&sf.base.addClass(t,"e-disable")},t.prototype.onMouseOver=function(e){var t=sf.base.closest(e.target,"."+m.li);null===t&&"CheckBox"===this.mode&&!sf.base.isNullOrUndefined(this.fields.groupBy)&&this.enableGroupCheckBox&&(t=sf.base.closest(e.target,"."+m.group)),this.addListHover(t)},t.prototype.onMouseLeave=function(e){this.removeHover()},t.prototype.onListMouseDown=function(e){e.preventDefault(),this.scrollFocusStatus=!0},t.prototype.onDocumentClick=function(e){if("CheckBox"!==this.mode){var t=e.target;!sf.base.isNullOrUndefined(this.popupObj)&&sf.base.closest(t,"#"+this.popupObj.element.id)||this.overAllWrapper.contains(e.target)?this.scrollFocusStatus=(sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name)&&document.activeElement===this.inputElement:this.scrollFocusStatus=!1}},t.prototype.wireListEvents=function(){sf.base.EventHandler.add(document,"mousedown",this.onDocumentClick,this),sf.base.EventHandler.add(this.list,"mousedown",this.onListMouseDown,this),sf.base.EventHandler.add(this.list,"mouseup",this.onMouseClick,this),sf.base.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),sf.base.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},t.prototype.unwireListEvents=function(){sf.base.EventHandler.remove(document,"mousedown",this.onDocumentClick),this.list&&(sf.base.EventHandler.remove(this.list,"mousedown",this.onListMouseDown),sf.base.EventHandler.remove(this.list,"mouseup",this.onMouseClick),sf.base.EventHandler.remove(this.list,"mouseover",this.onMouseOver),sf.base.EventHandler.remove(this.list,"mouseout",this.onMouseLeave))},t.prototype.hideOverAllClear=function(){this.value&&this.value.length&&""!==this.inputElement.value||(this.overAllClear.style.display="none")},t.prototype.showOverAllClear=function(){(this.value&&this.value.length||""!==this.inputElement.value)&&this.showClearButton&&!0!==this.readonly?this.overAllClear.style.display="":this.overAllClear.style.display="none"},t.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()},t.prototype.showSpinner=function(){sf.base.isNullOrUndefined(this.spinnerElement)&&("none"!==this.overAllClear.style.display?this.spinnerElement=this.overAllClear:(this.spinnerElement=this.createElement("span",{className:"e-chips-close e-close-hooker e-ms-spinner-icon"}),this.componentWrapper.appendChild(this.spinnerElement)),sf.popups.createSpinner({target:this.spinnerElement,width:sf.base.Browser.isDevice?"16px":"14px"},this.createElement),sf.base.addClass([this.spinnerElement],"e-ddl-disable-icon"),sf.popups.showSpinner(this.spinnerElement))},t.prototype.hideSpinner=function(){sf.base.isNullOrUndefined(this.spinnerElement)||(sf.popups.hideSpinner(this.spinnerElement),sf.base.removeClass([this.spinnerElement],"e-ddl-disable-icon"),this.spinnerElement.classList.contains("e-ms-spinner-icon")?sf.base.detach(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.updateDelimView=function(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove("e-delim-total"),this.value&&this.value.length){var e="",t=void 0,i=void 0,s=1,l=void 0,a=void 0,o=0,n=void 0;this.viewWrapper.innerHTML="";var r=new sf.base.L10n(this.getLocaleName(),{},this.locale);""===r.getConstant("actionFailureTemplate")&&(r=new sf.base.L10n("dropdowns",{noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},this.locale));var h=r.getConstant("overflowCountTemplate"),p=this.createElement("span",{className:"e-remain"}),u=sf.base.compile(h),c=sf.base.compile(r.getConstant("totalCountTemplate"));p.appendChild(u({count:this.value.length},null,null,null,!this.isStringTemplate)[0]),this.viewWrapper.appendChild(p);var d=p.offsetWidth;if(sf.base.remove(p),this.showDropDownIcon&&(o=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),!sf.base.isNullOrUndefined(this.value))for(var f=0;!sf.base.isNullOrUndefined(this.value[f]);f++){if(e+=0===f?"":this.delimiterChar+" ",e+=t=this.getOverflowVal(f),t=this.viewWrapper.innerHTML,this.viewWrapper.innerHTML=e,(l=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10))+o>(n=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10))){for(void 0!==i&&""!==i&&(t=i,f=s+1),this.viewWrapper.innerHTML=t,a=this.value.length-f,l=this.viewWrapper.offsetWidth;l+d+o>n&&0!==l&&""!==this.viewWrapper.innerHTML;){var m=this.viewWrapper.innerHTML.split(this.delimiterChar);m.pop(),this.viewWrapper.innerHTML=m.join(this.delimiterChar),a++,l=this.viewWrapper.offsetWidth}break}l+d+o<=n?(i=e,s=f):0===f&&(i="",s=-1)}if(a>0){var v=n-o;this.viewWrapper.appendChild(this.updateRemainTemplate(p,this.viewWrapper,a,u,c,v)),this.updateRemainWidth(this.viewWrapper,v),this.updateRemainingText(p,o,a,u,c)}}else this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none"},t.prototype.updateRemainWidth=function(e,t){e.classList.contains("e-delim-total")&&t<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingLeft,10)&&(e.style.width=t+"px")},t.prototype.updateRemainTemplate=function(e,t,i,s,l,a){return t.firstChild&&3===t.firstChild.nodeType&&""===t.firstChild.nodeValue&&t.removeChild(t.firstChild),e.innerHTML="",e.appendChild(t.firstChild&&3===t.firstChild.nodeType?s({count:i},null,null,null,!this.isStringTemplate)[0]:l({count:i},null,null,null,!this.isStringTemplate)[0]),t.firstChild&&3===t.firstChild.nodeType?t.classList.remove("e-delim-total"):(t.classList.add("e-delim-total"),this.updateRemainWidth(t,a)),e},t.prototype.updateRemainingText=function(e,t,i,s,l){var a=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),o=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(o+t>=a&&0!==o&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType){for(;o+t>a&&0!==o&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType;){var n=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);n.pop(),this.viewWrapper.firstChild.nodeValue=n.join(this.delimiterChar),""===this.viewWrapper.firstChild.nodeValue&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),i++,o=this.viewWrapper.offsetWidth}var r=a-t;this.updateRemainTemplate(e,this.viewWrapper,i,s,l,r)}},t.prototype.getOverflowVal=function(e){var t;if(this.mainData&&this.mainData.length)if("CheckBox"===this.mode){var i=this.listData;this.listData=this.mainData,t=this.getTextByValue(this.value[e]),this.listData=i}else t=this.getTextByValue(this.value[e]);else t=this.value[e];return t},t.prototype.unWireEvent=function(){sf.base.EventHandler.remove(this.componentWrapper,"mousedown",this.wrapperClick),sf.base.EventHandler.remove(window,"resize",this.windowResize),sf.base.EventHandler.remove(this.inputElement,"focus",this.focusInHandler),sf.base.EventHandler.remove(this.inputElement,"keydown",this.onKeyDown),"CheckBox"!==this.mode&&sf.base.EventHandler.remove(this.inputElement,"input",this.onInput),sf.base.EventHandler.remove(this.inputElement,"keyup",this.KeyUp);var e=sf.base.closest(this.inputElement,"form");e&&sf.base.EventHandler.remove(e,"reset",this.resetValueHandler),sf.base.EventHandler.remove(this.inputElement,"blur",this.onBlur),sf.base.EventHandler.remove(this.componentWrapper,"mousemove",this.mouseIn),sf.base.EventHandler.remove(this.componentWrapper,"mouseout",this.mouseOut),sf.base.EventHandler.remove(this.overAllClear,"mousedown",this.ClearAll),sf.base.EventHandler.remove(this.inputElement,"paste",this.pasteHandler)},t.prototype.selectAllItem=function(e,t,i){var s;if(s=this.list.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)'),this.value&&this.value.length&&this.isPopupOpen()&&t&&t.target&&sf.base.closest(t.target,".e-close-hooker")&&(s=this.mainList.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')),this.enableGroupCheckBox&&"CheckBox"===this.mode&&!sf.base.isNullOrUndefined(this.fields.groupBy)){var l=t?t.target:null;if((l=(l=t&&32===t.keyCode?i:l)&&l.classList.contains("e-frame")?l.parentElement.parentElement:l)&&l.classList.contains("e-list-group-item")){var a=l.nextElementSibling;if(sf.base.isNullOrUndefined(a))return;for(;a.classList.contains("e-list-item");){if(e){if(!a.firstElementChild.lastElementChild.classList.contains("e-check")){var o=this.value&&this.value.length?this.value.length:0;a.classList.contains("e-active")&&(o-=1),o<this.maximumSelectionLength&&this.updateListSelection(a,t)}}else a.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(a,t);if(null==(a=a.nextElementSibling))break}if(l.classList.contains("e-list-group-item")){var n=this.list.getElementsByClassName("e-item-focus")[0];n&&n.classList.remove("e-item-focus"),e?l.classList.add("e-active"):l.classList.remove("e-active"),l.classList.add("e-item-focus")}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&t&&this.updateValueState(t,this.value,this.tempValues)}else this.updateValue(t,s,e)}else this.updateValue(t,s,e)},t.prototype.updateValue=function(e,t,i){var s=this,l=t.length;if(t&&t.length){var a=0,o=0;for(o=this.enableGroupCheckBox?i?this.maximumSelectionLength-(this.value?this.value.length:0):t.length:i?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength;a<l&&a<=50&&a<o;)this.updateListSelection(t[a],e,l-a),this.findGroupStart(t[a]),a++;l>50&&setTimeout((function(){for(;a<l&&a<o;)s.updateListSelection(t[a],e,l-a),s.findGroupStart(t[a]),a++;sf.base.isBlazor()&&s.isServerRendered||s.updatedataValueItems(e)}),0)}sf.base.isBlazor()&&this.isServerRendered||(this.updatedataValueItems(e),this.checkPlaceholderSize())},t.prototype.updatedataValueItems=function(e){this.deselectHeader(),this.textboxValueUpdate(e)},t.prototype.textboxValueUpdate=function(e){"Box"===this.mode||this.isPopupOpen()?this.searchWrapper.classList.remove("e-zero-size"):this.updateDelimView(),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.refreshPlaceHolder()},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.updateDataSource=function(e){sf.base.isNullOrUndefined(this.list)?this.renderPopup():this.resetList(this.dataSource),!this.value||!this.value.length||sf.base.isBlazor()&&this.isServerRendered||(this.setProperties({value:this.value}),this.refreshSelection())},t.prototype.onLoadSelect=function(){this.setDynValue=!0,this.renderPopup()},t.prototype.selectAllItems=function(t,i){var s=this;if(sf.base.isNullOrUndefined(this.list))this.selectAllAction=function(){if("CheckBox"===s.mode&&s.showSelectAll){var e={module:"CheckBoxSelection",enable:"CheckBox"===s.mode,value:t?"check":"uncheck"};s.notify("checkSelectAll",e)}s.selectAllItem(t,i),s.selectAllAction=null},e.prototype.render.call(this);else{if(this.selectAllAction=null,"CheckBox"===this.mode&&this.showSelectAll){var l={value:t?"check":"uncheck",enable:"CheckBox"===this.mode,module:"CheckBoxSelection"};this.notify("checkSelectAll",l)}this.selectAllItem(t,i)}},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(t,i){(t.dataSource&&!sf.base.isNullOrUndefined(Object.keys(t.dataSource))||t.query&&!sf.base.isNullOrUndefined(Object.keys(t.query)))&&(this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),"multiselect"===this.getModuleName()&&(this.filterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],t));for(var s=0,l=Object.keys(t);s<l.length;s++){var a=l[s];switch(a){case"query":case"dataSource":"CheckBox"===this.mode&&this.showSelectAll&&(sf.base.isNullOrUndefined(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(t.showClearButton);break;case"text":this.updateVal(this.value,this.value,"text");break;case"value":this.updateVal(this.value,i.value,"value"),this.addValidInputClass();break;case"width":this.setWidth(t.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:t.filterBarPlaceholder});break;case"delimiterChar":"Box"!==this.mode&&this.updateDelimView(),this.updateData(t.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(i.cssClass),this.updateCssClass();break;case"enableRtl":this.enableRTL(t.enableRtl),e.prototype.onPropertyChanged.call(this,t,i);break;case"readonly":this.updateReadonly(t.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(t.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass();break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":"CheckBox"===this.mode&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;default:var o;o=this.getPropObject(a,t,i),e.prototype.onPropertyChanged.call(this,o.newProperty,o.oldProperty)}}},t.prototype.reInitializePoup=function(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()},t.prototype.updateVal=function(e,t,i){this.list?this.inputFocus||("text"===i&&(this.initialTextUpdate(),e=this.value),(sf.base.isNullOrUndefined(this.value)||0===this.value.length)&&(this.tempValues=t),this.initialValueUpdate(),"Box"!==this.mode&&this.updateDelimView(),this.refreshInputHight(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,e,t),this.checkPlaceholderSize()):this.onLoadSelect(),this.changeOnBlur||this.updateValueState(null,e,t)},t.prototype.addItem=function(t,i){e.prototype.addItem.call(this,t,i)},t.prototype.hidePopup=function(){var e=this;if(this.isPopupOpen()){var t={name:"FadeOut",duration:100,delay:100},i={popup:this.popupObj,cancel:!1,animation:t};this.trigger("close",i,(function(t){t.cancel||(e.beforePopupOpen=!1,e.overAllWrapper.classList.remove("e-icon-anim"),e.popupObj.hide(new sf.base.Animation(t.animation)),sf.base.attributes(e.inputElement,{"aria-expanded":"false"}),e.allowFiltering&&e.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode,value:"clear"}),e.popupObj.hide(),sf.base.removeClass([document.body,e.popupObj.element],"e-popup-full-page"),sf.base.EventHandler.remove(e.list,"keydown",e.onKeyDown))}))}},t.prototype.showPopup=function(){if(this.enabled){if(sf.base.isBlazor()&&this.isServerRendered&&this.itemTemplate&&(this.DropDownBaseupdateBlazorTemplates(!0,!1,!1,!1,!1,!1,!1,!1),"CheckBox"!==this.mode&&this.list&&this.refreshSelection()),!this.ulElement)return this.beforePopupOpen=!0,void e.prototype.render.call(this);var t=this.ulElement.querySelectorAll("li.e-list-item").length,i=this.ulElement.querySelectorAll("li."+m.li+"."+Y).length;t>0&&t===i&&i===this.mainData.length?this.beforePopupOpen=!1:this.onPopupShown()}},t.prototype.selectAll=function(e){this.isSelectAll=!0,this.selectAllItems(e)},t.prototype.getModuleName=function(){return"multiselect"},t.prototype.clear=function(){this.selectAll(!1),this.setProperties({value:null},!0)},t.prototype.render=function(){this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.searchWrapper=this.createElement("span",{className:"e-searcher "+("Box"===this.mode?"e-multiselect-box":"")}),this.viewWrapper=this.createElement("span",{className:"e-delim-view e-delim-values",styles:"display:none;"}),this.overAllClear=this.createElement("span",{className:"e-chips-close e-close-hooker",styles:"display:none;"}),this.componentWrapper=this.createElement("div",{className:"e-multi-select-wrapper"}),this.overAllWrapper=this.createElement("div",{className:"e-multiselect e-input-group e-control-wrapper"}),"CheckBox"===this.mode&&sf.base.addClass([this.overAllWrapper],"e-checkbox"),sf.base.Browser.isDevice&&this.componentWrapper.classList.add("e-mob-wrapper"),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup e-multi-select-list-wrapper"}),"Delimiter"===this.mode||"CheckBox"===this.mode?(this.delimiterWrapper=this.createElement("span",{className:"e-delim-values",styles:"display:none"}),this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:"e-chips-collection",styles:"display:none"}),"Default"===this.mode?this.chipCollectionWrapper.setAttribute("id",sf.base.getUniqueID("chip_default")):"Box"===this.mode&&this.chipCollectionWrapper.setAttribute("id",sf.base.getUniqueID("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),"Box"!==this.mode&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!sf.base.Browser.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add("e-close-icon-hide"),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:"e-dropdownbase",attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0"}}),"Default"!==this.mode&&"Box"!==this.mode||this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),"Never"!==this.floatLabelType?z(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):"Never"===this.floatLabelType&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";var e=this.element.getAttribute("id")?this.element.getAttribute("id"):sf.base.getUniqueID("ej2_dropdownlist");this.element.id=e,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:"e-multi-hidden",tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),"CheckBox"!==this.mode&&this.hideOverAllClear(),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.checkInitialValue(),this.renderComplete()},t.prototype.checkInitialValue=function(){var e=this,t=this.dataSource instanceof Array?this.dataSource.length>0:!sf.base.isNullOrUndefined(this.dataSource);if((!this.value||!this.value.length)&&sf.base.isNullOrUndefined(this.text)&&!t&&"SELECT"===this.element.tagName&&this.element.options.length>0){for(var i=this.element.options,s=[],l="",a=0,o=i.length;a<o;a++){var n=i[a];sf.base.isNullOrUndefined(n.getAttribute("selected"))||(n.getAttribute("value")?s.push(n.getAttribute("value")):l+=n.text+this.delimiterChar)}s.length>0?this.setProperties({value:s},!0):""!==l&&this.setProperties({text:l},!0),(s.length>0||""!==l)&&(this.refreshInputHight(),this.refreshPlaceHolder())}(this.value&&this.value.length||!sf.base.isNullOrUndefined(this.text))&&this.renderPopup(),sf.base.isNullOrUndefined(this.text)||!sf.base.isNullOrUndefined(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.value&&this.value.length?(this.dataSource instanceof sf.data.DataManager?this.setInitialValue=function(){e.initStatus=!1,e.initialValueUpdate(),e.initialUpdate(),e.setInitialValue=null,e.initStatus=!0}:(this.initialValueUpdate(),this.initialUpdate()),this.updateTempValue()):this.initialUpdate(),this.initStatus=!0,this.checkAutoFocus(),sf.base.isNullOrUndefined(this.text)||this.element.setAttribute("data-initial-value",this.text)},t.prototype.checkAutoFocus=function(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()},t.prototype.setFloatLabelType=function(){var e,t,i,s,l,a,o,n,r;e=this.overAllWrapper,t=this.componentWrapper,i=this.searchWrapper,s=this.inputElement,l=this.value,this.floatLabelType,a=this.placeholder,n=t.querySelector(".e-float-text"),r=t.querySelector(".e-float-line"),sf.base.isNullOrUndefined(n)?K(l,s,o=null!==a?a:""):(o=n.innerText,sf.base.detach(i.querySelector(".e-float-text")),K(l,s,o),sf.base.isNullOrUndefined(r)||sf.base.detach(i.querySelector(".e-float-line"))),e.classList.remove("e-float-input"),"Never"!==this.floatLabelType&&z(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)},t.prototype.addValidInputClass=function(){!sf.base.isNullOrUndefined(this.value)&&this.value.length||"Always"===this.floatLabelType?sf.base.addClass([this.overAllWrapper],"e-valid-input"):sf.base.removeClass([this.overAllWrapper],"e-valid-input")},t.prototype.dropDownIcon=function(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:"e-input-group-icon e-ddl-icon"}),this.componentWrapper.appendChild(this.dropIcon),sf.base.addClass([this.componentWrapper],["e-down-icon"])):sf.base.isNullOrUndefined(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),sf.base.removeClass([this.componentWrapper],["e-down-icon"]))},t.prototype.initialUpdate=function(){"Box"!==this.mode&&this.updateDelimView(),this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()},t.prototype.destroy=function(){this.popupObj&&this.popupObj.hide(),this.notify("destroy",{}),this.unwireListEvents(),this.unWireEvent(),this.list=null,this.popupObj=null,this.mainList=null,this.mainData=null,this.filterParent=null,this.ulElement=null,e.prototype.destroy.call(this);for(var t=["readonly","aria-disabled","aria-placeholder","placeholder"],i=t.length;i>0;)this.inputElement.removeAttribute(t[i-1]),i--;this.element.removeAttribute("data-initial-value"),this.element.style.display="block",this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()||this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),sf.base.remove(this.overAllWrapper))},J([sf.base.Complex({text:null,value:null,iconCss:null,groupBy:null},f)],t.prototype,"fields",void 0),J([sf.base.Property(!1)],t.prototype,"enablePersistence",void 0),J([sf.base.Property(null)],t.prototype,"groupTemplate",void 0),J([sf.base.Property("No Records Found")],t.prototype,"noRecordsTemplate",void 0),J([sf.base.Property("The Request Failed")],t.prototype,"actionFailureTemplate",void 0),J([sf.base.Property("None")],t.prototype,"sortOrder",void 0),J([sf.base.Property(!0)],t.prototype,"enabled",void 0),J([sf.base.Property([])],t.prototype,"dataSource",void 0),J([sf.base.Property(null)],t.prototype,"query",void 0),J([sf.base.Property("StartsWith")],t.prototype,"filterType",void 0),J([sf.base.Property(1e3)],t.prototype,"zIndex",void 0),J([sf.base.Property(!1)],t.prototype,"ignoreAccent",void 0),J([sf.base.Property()],t.prototype,"locale",void 0),J([sf.base.Property(!1)],t.prototype,"enableGroupCheckBox",void 0),J([sf.base.Property(null)],t.prototype,"cssClass",void 0),J([sf.base.Property("100%")],t.prototype,"width",void 0),J([sf.base.Property("300px")],t.prototype,"popupHeight",void 0),J([sf.base.Property("100%")],t.prototype,"popupWidth",void 0),J([sf.base.Property(null)],t.prototype,"placeholder",void 0),J([sf.base.Property(null)],t.prototype,"filterBarPlaceholder",void 0),J([sf.base.Property({})],t.prototype,"htmlAttributes",void 0),J([sf.base.Property(null)],t.prototype,"valueTemplate",void 0),J([sf.base.Property(null)],t.prototype,"headerTemplate",void 0),J([sf.base.Property(null)],t.prototype,"footerTemplate",void 0),J([sf.base.Property(null)],t.prototype,"itemTemplate",void 0),J([sf.base.Property(null)],t.prototype,"allowFiltering",void 0),J([sf.base.Property(!0)],t.prototype,"changeOnBlur",void 0),J([sf.base.Property(!1)],t.prototype,"allowCustomValue",void 0),J([sf.base.Property(!0)],t.prototype,"showClearButton",void 0),J([sf.base.Property(1e3)],t.prototype,"maximumSelectionLength",void 0),J([sf.base.Property(!1)],t.prototype,"readonly",void 0),J([sf.base.Property(null)],t.prototype,"text",void 0),J([sf.base.Property(null)],t.prototype,"value",void 0),J([sf.base.Property(!0)],t.prototype,"hideSelectedItem",void 0),J([sf.base.Property(!0)],t.prototype,"closePopupOnSelect",void 0),J([sf.base.Property("Default")],t.prototype,"mode",void 0),J([sf.base.Property(",")],t.prototype,"delimiterChar",void 0),J([sf.base.Property(!0)],t.prototype,"ignoreCase",void 0),J([sf.base.Property(!1)],t.prototype,"showDropDownIcon",void 0),J([sf.base.Property("Never")],t.prototype,"floatLabelType",void 0),J([sf.base.Property(!1)],t.prototype,"showSelectAll",void 0),J([sf.base.Property("Select All")],t.prototype,"selectAllText",void 0),J([sf.base.Property("Unselect All")],t.prototype,"unSelectAllText",void 0),J([sf.base.Property(!0)],t.prototype,"enableSelectionOrder",void 0),J([sf.base.Property(!0)],t.prototype,"openOnClick",void 0),J([sf.base.Event()],t.prototype,"change",void 0),J([sf.base.Event()],t.prototype,"removing",void 0),J([sf.base.Event()],t.prototype,"removed",void 0),J([sf.base.Event()],t.prototype,"selectedAll",void 0),J([sf.base.Event()],t.prototype,"beforeOpen",void 0),J([sf.base.Event()],t.prototype,"open",void 0),J([sf.base.Event()],t.prototype,"close",void 0),J([sf.base.Event()],t.prototype,"blur",void 0),J([sf.base.Event()],t.prototype,"focus",void 0),J([sf.base.Event()],t.prototype,"chipSelection",void 0),J([sf.base.Event()],t.prototype,"filtering",void 0),J([sf.base.Event()],t.prototype,"tagging",void 0),J([sf.base.Event()],t.prototype,"customValueSelection",void 0),t=J([sf.base.NotifyPropertyChanges],t)}(v),ee=function(){function e(e){this.activeLi=[],this.activeEle=[],this.parent=e,this.addEventListener()}return e.prototype.getModuleName=function(){return"CheckBoxSelection"},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("updatelist",this.listSelection,this),this.parent.on("listoption",this.listOption,this),this.parent.on("selectAll",this.setSelectAll,this),this.parent.on("checkSelectAll",this.checkSelectAll,this),this.parent.on("searchBox",this.setSearchBox,this),this.parent.on("blur",this.onBlur,this),this.parent.on("targetElement",this.targetElement,this),this.parent.on("deviceSearchBox",this.setDeviceSearchBox,this),this.parent.on("inputFocus",this.getFocus,this),this.parent.on("reOrder",this.setReorder,this),this.parent.on("activeList",this.getActiveList,this),this.parent.on("selectAllText",this.setLocale,this),this.parent.on("filterBarPlaceholder",this.setPlaceholder,this),sf.base.EventHandler.add(document,"mousedown",this.onDocumentClick,this),this.parent.on("addItem",this.checboxCreate,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updatelist",this.listSelection),this.parent.off("listoption",this.listOption),this.parent.off("selectAll",this.setSelectAll),this.parent.off("checkSelectAll",this.checkSelectAll),this.parent.off("searchBox",this.setSearchBox),this.parent.off("blur",this.onBlur),this.parent.off("targetElement",this.targetElement),this.parent.off("deviceSearchBox",this.setDeviceSearchBox),this.parent.off("inputFocus",this.getFocus),this.parent.off("reOrder",this.setReorder),this.parent.off("activeList",this.getActiveList),this.parent.off("selectAllText",this.setLocale),this.parent.off("filterBarPlaceholder",this.setPlaceholder),this.parent.off("addItem",this.checboxCreate),sf.base.EventHandler.remove(document,"mousedown",this.onDocumentClick))},e.prototype.listOption=function(e){var t=this;if(sf.base.isNullOrUndefined(this.parent.listCurrentOptions.itemCreated))this.parent.listCurrentOptions.itemCreated=function(e){t.checboxCreate(e)};else{var i=this.parent.listCurrentOptions.itemCreated;this.parent.listCurrentOptions.itemCreated=function(e){t.checboxCreate(e),i.apply(t,[e])}}},e.prototype.setPlaceholder=function(e){sf.inputs.Input.setPlaceholder(e.filterBarPlaceholder,this.filterInput)},e.prototype.checboxCreate=function(e){var t;if(t=sf.base.isNullOrUndefined(e.item)?e:e.item,this.parent.enableGroupCheckBox||"e-list-group-item "!==t.className&&"e-list-group-item"!==t.className){var i=sf.buttons.createCheckBox(this.parent.createElement,!0),s=sf.base.select("div.e-icons",t);t.getAttribute("data-uid");t.insertBefore(i,t.childNodes[sf.base.isNullOrUndefined(s)?0:1]),sf.base.select(".e-frame",i);sf.base.select(".e-frame",i);return this.parent.enableGroupCheckBox&&this.parent.popupWrapper.classList.add("e-multiselect-group"),t}return t},e.prototype.setSelectAll=function(){this.parent.showSelectAll?(sf.base.isNullOrUndefined(this.checkAllParent)&&(this.checkAllParent=this.parent.createElement("div",{className:"e-selectall-parent"}),this.selectAllSpan=this.parent.createElement("span",{className:"e-all-text"}),this.selectAllSpan.textContent="",this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),this.checboxCreate(this.checkAllParent),this.parent.headerTemplate&&(sf.base.isNullOrUndefined(this.parent.filterParent)?sf.base.append([this.checkAllParent],this.parent.popupWrapper):sf.base.append([this.checkAllParent],this.parent.filterParent)),this.parent.headerTemplate||(sf.base.isNullOrUndefined(this.parent.filterParent)?sf.base.prepend([this.checkAllParent],this.parent.popupWrapper):this.parent.filterParent.parentNode.insertBefore(this.checkAllParent,this.parent.filterParent.nextSibling)),sf.base.EventHandler.add(this.checkAllParent,"mousedown",this.clickHandler,this)),this.parent.list.classList.contains("e-nodata")||this.parent.listData&&this.parent.listData.length<=1?this.checkAllParent.style.display="none":this.checkAllParent.style.display="block",this.parent.selectAllHeight=this.checkAllParent.getBoundingClientRect().height):sf.base.isNullOrUndefined(this.checkAllParent)||(this.checkAllParent.parentElement.removeChild(this.checkAllParent),this.checkAllParent=null)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.listSelection=function(e){var t,i=sf.base.isBlazor()&&e.module&&"listbox"===e.module;if(sf.base.isNullOrUndefined(e.e)){var s=e.li.querySelector(".e-checkbox-wrapper");t=s?i?s.querySelector(".e-frame"):s.childNodes[1]:e.li.lastElementChild.childNodes[1]}else{var l=e.li.querySelector(".e-checkbox-wrapper .e-frame");t=sf.base.isNullOrUndefined(e.e.target)?i?l:e.li.querySelector(".e-checkbox-wrapper").childNodes[1]:e.e.target.classList.contains("e-frame")&&(!this.parent.showSelectAll||this.checkAllParent&&!this.checkAllParent.contains(e.e.target))?e.e.target:i?l:e.li.querySelector(".e-checkbox-wrapper").childNodes[1]}if((this.parent.itemTemplate||this.parent.enableGroupCheckBox)&&(t=e.li.firstElementChild.childNodes[1]),sf.base.isNullOrUndefined(t)||(this.checkWrapper=sf.base.closest(t,".e-checkbox-wrapper")),!sf.base.isNullOrUndefined(this.checkWrapper)){var a=sf.base.select(".e-frame",this.checkWrapper);this.validateCheckNode(this.checkWrapper,a.classList.contains("e-check"),e.li,e.e,!1)}},e.prototype.validateCheckNode=function(e,t,i,s,l){this.changeState(e,t?"uncheck":"check",s,!0,l)},e.prototype.clickHandler=function(e){var t;t=e.currentTarget.classList.contains(this.checkAllParent.className)?e.currentTarget.firstElementChild.lastElementChild:e.currentTarget,this.checkWrapper=sf.base.closest(t,".e-checkbox-wrapper");if(!sf.base.isNullOrUndefined(this.checkWrapper)){var i=sf.base.select(".e-frame",this.checkWrapper);this.validateCheckNode(this.checkWrapper,i.classList.contains("e-check"),null,e,!0)}e.preventDefault()},e.prototype.changeState=function(e,t,i,s,l){var a,o=e.getElementsByClassName("e-frame")[0];"check"!==t||o.classList.contains("e-check")?"uncheck"===t&&(o.classList.contains("e-check")||o.classList.contains("e-stop"))?(sf.base.removeClass([o],["e-check","e-stop"]),a="false",l&&(this.parent.selectAllItems(!1,i),this.setLocale())):"indeterminate"!==t||o.classList.contains("e-stop")||(sf.base.removeClass([o],["e-check"]),o.classList.add("e-stop"),a="false",l&&(this.parent.selectAllItems(!1,i),this.setLocale())):(o.classList.remove("e-stop"),o.classList.add("e-check"),a="true",l&&(this.parent.selectAllItems(!0,i),this.setLocale(!0))),a="check"===t?"true":"uncheck"===t?"false":a,sf.base.isNullOrUndefined(a)||e.setAttribute("aria-checked",a)},e.prototype.setSearchBox=function(e){if(sf.base.isNullOrUndefined(this.parent.filterParent)){this.parent.filterParent=this.parent.createElement("span",{className:"e-filter-parent"}),this.filterInput=this.parent.createElement("input",{attrs:{type:"text"},className:"e-input-filter"}),this.parent.element.parentNode.insertBefore(this.filterInput,this.parent.element);var t=!1;return sf.base.Browser.isDevice&&(t=!0,this.parent.mobFilter=!1),this.filterInputObj=sf.inputs.Input.createInput({element:this.filterInput,buttons:t?["e-input-group-icon e-back-icon e-icons","e-input-group-icon e-clear-icon e-icons"]:["e-input-group-icon e-clear-icon e-icons"],properties:{placeholder:this.parent.filterBarPlaceholder}},this.parent.createElement),sf.base.append([this.filterInputObj.container],this.parent.filterParent),sf.base.prepend([this.parent.filterParent],e.popupElement),sf.base.attributes(this.filterInput,{"aria-disabled":"false","aria-owns":this.parent.element.id+"_options",role:"listbox","aria-activedescendant":null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector(".e-clear-icon"),!sf.base.Browser.isDevice&&this.clearIconElement&&(sf.base.EventHandler.add(this.clearIconElement,"mousedown",this.clearText,this),this.clearIconElement.style.visibility="hidden"),sf.base.EventHandler.add(this.filterInput,"input",this.parent.onInput,this.parent),sf.base.EventHandler.add(this.filterInput,"keyup",this.parent.KeyUp,this.parent),sf.base.EventHandler.add(this.filterInput,"keydown",this.parent.onKeyDown,this.parent),sf.base.EventHandler.add(this.filterInput,"blur",this.onBlur,this),sf.base.EventHandler.add(this.filterInput,"paste",this.parent.pasteHandler,this.parent),this.parent.searchBoxHeight=this.filterInputObj.container.parentElement.getBoundingClientRect().height,this.filterInputObj}},e.prototype.clickOnBackIcon=function(e){this.parent.hidePopup(),sf.base.removeClass([document.body,this.parent.popupObj.element],"e-popup-full-page"),this.parent.inputElement.focus()},e.prototype.clearText=function(e){this.parent.targetInputElement.value="",this.parent.refreshPopup(),this.parent.refreshListItems(null),this.clearIconElement.style.visibility="hidden",this.filterInput.focus(),this.setReorder(e),e.preventDefault()},e.prototype.setDeviceSearchBox=function(){this.parent.popupObj.element.classList.add("e-ddl-device"),this.parent.popupObj.element.classList.add("e-ddl-device-filter"),this.parent.popupObj.position={X:0,Y:0},this.parent.popupObj.dataBind(),sf.base.attributes(this.parent.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),sf.base.addClass([document.body,this.parent.popupObj.element],"e-popup-full-page"),this.setSearchBoxPosition(),this.backIconElement=this.filterInputObj.container.querySelector(".e-back-icon"),this.clearIconElement=this.filterInputObj.container.querySelector(".e-clear-icon"),this.clearIconElement.style.visibility="hidden",sf.base.EventHandler.add(this.backIconElement,"click",this.clickOnBackIcon,this),sf.base.EventHandler.add(this.clearIconElement,"click",this.clearText,this)},e.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%",this.parent.list.style.maxHeight=window.innerHeight-e+"px",this.parent.list.style.height=window.innerHeight-e+"px";var t=this.filterInput.parentElement.querySelector(".e-clear-icon");sf.base.detach(this.filterInput),t.parentElement.insertBefore(this.filterInput,t)},e.prototype.targetElement=function(){return sf.base.isNullOrUndefined(this.clearIconElement)||(this.parent.targetInputElement=this.filterInput,this.clearIconElement.style.visibility=""===this.parent.targetInputElement.value?"hidden":"visible"),this.parent.targetInputElement.value},e.prototype.onBlur=function(e){if(!this.parent.element.classList.contains("e-listbox")){var t=void 0;if(this.parent.keyAction)return;if(sf.base.Browser.isIE&&(t=!sf.base.isNullOrUndefined(e)&&e.target),sf.base.Browser.isIE||(t=!sf.base.isNullOrUndefined(e)&&e.relatedTarget),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&this.parent.popupObj.element.contains(t)&&!sf.base.Browser.isIE&&this.filterInput)return void this.filterInput.focus();if(this.parent.scrollFocusStatus&&this.filterInput)return e.preventDefault(),this.filterInput.focus(),void(this.parent.scrollFocusStatus=!1);this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.updateValueState(e,this.parent.value,this.parent.tempValues),this.parent.dispatchEvent(this.parent.hiddenElement,"change")),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.overAllWrapper.classList.remove("e-input-focus"),this.parent.trigger("blur"),this.parent.focused=!0),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&!sf.base.Browser.isDevice&&this.parent.hidePopup()}},e.prototype.onDocumentClick=function(e){if("listbox"!==this.parent.getLocaleName()){var t=e.target;!sf.base.isNullOrUndefined(this.parent.popupObj)&&sf.base.closest(t,"#"+this.parent.popupObj.element.id)&&e.preventDefault(),!sf.base.isNullOrUndefined(this.parent.popupObj)&&sf.base.closest(t,"#"+this.parent.popupObj.element.id)||this.parent.overAllWrapper.contains(e.target)?this.parent.scrollFocusStatus=(sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name)&&document.activeElement===this.filterInput:(this.parent.overAllWrapper.classList.contains(m.focus)||this.parent.isPopupOpen())&&(this.parent.inputFocus=!1,this.parent.scrollFocusStatus=!1,this.parent.hidePopup(),this.parent.onBlur(e,!0),this.parent.focused=!0),this.parent.overAllWrapper.contains(e.target)||!this.parent.overAllWrapper.classList.contains("e-input-focus")||this.parent.isPopupOpen()||(sf.base.Browser.isIE?this.parent.onBlur():this.parent.onBlur(e)),this.filterInput===t&&this.filterInput.focus()}},e.prototype.getFocus=function(e){this.parent.overAllWrapper.classList.remove("e-input-focus"),this.parent.keyAction&&"clear"!==e.value?this.parent.keyAction=!1:("focus"===e.value&&(this.filterInput.focus(),this.parent.removeFocus(),sf.base.EventHandler.remove(this.parent.list,"keydown",this.parent.onKeyDown)),"clear"===e.value&&(this.filterInput.value="",this.clearIconElement.style.visibility="hidden"))},e.prototype.checkSelectAll=function(e){"check"===e.value&&"true"!==this.checkAllParent.getAttribute("aria-checked")&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale(!0)),"uncheck"===e.value&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale()),"indeterminate"===e.value&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale())},e.prototype.setLocale=function(e){if("Select All"!==this.parent.selectAllText||"Unselect All"!==this.parent.unSelectAllText){var t=e?this.parent.unSelectAllText:this.parent.selectAllText;this.selectAllSpan.textContent="";for(var i=0,s=sf.base.compile(t)({},null,null,null,!this.parent.isStringTemplate);i<s.length;i++){var l=s[i];this.selectAllSpan.textContent=l.textContent}}else{var a=new sf.base.L10n(this.parent.getLocaleName(),{},this.parent.locale);""===a.getConstant("selectAllText")&&(a=new sf.base.L10n("dropdowns",{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.parent.locale)),this.selectAllSpan.textContent=e?a.getConstant("unSelectAllText"):a.getConstant("selectAllText")}},e.prototype.getActiveList=function(e){e.li.classList.contains("e-active")?this.activeLi.push(e.li.cloneNode(!0)):this.activeLi.splice(e.index,1)},e.prototype.setReorder=function(e){if(this.parent.enableSelectionOrder&&!sf.base.isNullOrUndefined(this.parent.value)){var t=this.parent.ulElement.querySelectorAll("li.e-active").length,i=void 0,s=this.parent.createElement("ul",{className:"e-list-parent e-ul e-reorder"});this.parent.createElement("div");t>0&&(sf.base.append(this.parent.ulElement.querySelectorAll("li.e-active"),s),i=this.parent.ulElement.querySelectorAll("li.e-active"),sf.base.addClass(i,"e-reorder-hide"),sf.base.prepend([s],this.parent.list)),this.parent.focusAtFirstListItem()}},e}(),te=(G=function(e,t){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}G(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ie=function(e,t,i,s){var a,o=arguments.length,n=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===("undefined"==typeof Reflect?"undefined":l()(Reflect))&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(n=(o<3?a(n):o>3?a(t,i,n):a(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n},se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),ie([sf.base.Property("Multiple")],t.prototype,"mode",void 0),ie([sf.base.Property(!1)],t.prototype,"showCheckbox",void 0),ie([sf.base.Property(!1)],t.prototype,"showSelectAll",void 0),ie([sf.base.Property("Left")],t.prototype,"checkboxPosition",void 0),t}(sf.base.ChildProperty),le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),ie([sf.base.Property([])],t.prototype,"items",void 0),ie([sf.base.Property("Right")],t.prototype,"position",void 0),t}(sf.base.ChildProperty),ae=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.isValidKey=!1,s}var i;return te(t,e),i=t,t.prototype.addItem=function(t,i){e.prototype.addItem.call(this,t,i)},t.prototype.render=function(){this.inputString="",this.initLoad=!0,this.isCustomFiltering=!1,this.initialSelectedOptions=this.value,sf.base.isBlazor()&&this.isServerRendered?(this.list=this.element.parentElement,this.liCollections=this.list.querySelectorAll("."+sf.lists.cssClass.li),this.mainList=this.ulElement=this.list.querySelector("ul"),this.setSelection(this.value),this.allowFiltering&&this.setFiltering(),this.initToolbarAndStyles(),this.updateSelectionSettings(),this.wireEvents(),this.initDraggable(),this.initLoad=!1):e.prototype.render.call(this),this.renderComplete()},t.prototype.updateBlazorListData=function(e,t){t?this.mainList=this.ulElement=this.list.querySelector("ul"):this.sortedData=this.jsonData=this.listData=e,this.initDraggable()},t.prototype.initWrapper=function(){var e=this.createElement("select",{className:"e-hidden-select",attrs:{multiple:""}});this.list.classList.add("e-listbox-wrapper"),this.itemTemplate&&this.list.classList.add("e-list-template"),this.list.classList.add("e-wrapper"),"EJS-LISTBOX"===this.element.tagName?(this.element.setAttribute("tabindex","0"),this.initLoad&&this.element.appendChild(this.list)):(this.initLoad&&this.element.parentElement.insertBefore(this.list,this.element),this.list.insertBefore(this.element,this.list.firstChild),this.element.style.display="none"),this.list.insertBefore(e,this.list.firstChild),this.list.getElementsByClassName("e-list-item")[0]&&this.list.getElementsByClassName("e-list-item")[0].classList.remove(m.focus),sf.base.removeClass([this.list],[m.content,m.root]),this.validationAttribute(this.element,e),this.list.setAttribute("role","listbox"),sf.base.attributes(this.list,{role:"listbox","aria-multiselectable":"Multiple"===this.selectionSettings.mode?"true":"false"}),this.updateSelectionSettings()},t.prototype.updateSelectionSettings=function(){if(this.selectionSettings.showCheckbox&&this.selectionSettings.showSelectAll&&this.liCollections.length){var e=new sf.base.L10n(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=e.getConstant("selectAllText"),this.unSelectAllText=e.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{})}},t.prototype.initDraggable=function(){var e=this;this.ulElement&&(this.ulElement.id=this.element.id+"_parent"),this.allowDragAndDrop&&new sf.lists.Sortable(this.ulElement,{scope:this.scope,itemClass:"e-list-item",dragStart:this.triggerDragStart.bind(this),drag:this.triggerDrag.bind(this),beforeDrop:this.beforeDragEnd.bind(this),drop:this.dragEnd.bind(this),placeHolder:function(){return e.createElement("span",{className:"e-placeholder"})},helper:function(t){var i=t.sender.cloneNode(!0);return i.style.width=e.getItems()[0].offsetWidth+"px",(e.value&&e.value.length)>1&&e.isSelected(i)&&i.appendChild(e.createElement("span",{className:"e-list-badge",innerHTML:e.value.length+""})),i}})},t.prototype.updateActionCompleteData=function(e,t){this.jsonData.push(t)},t.prototype.initToolbar=function(){var e,t=this.toolbarSettings.position,i=this.element.getAttribute("data-value");if(this.toolbarSettings.items.length){var s=this.createElement("div",{className:"e-listbox-tool",attrs:{role:"toolbar"}}),l=this.createElement("div",{className:"e-listboxtool-wrapper e-"+t.toLowerCase()});this.list.parentElement.insertBefore(l,this.list),l.appendChild("Right"===t?this.list:s),l.appendChild("Right"===t?s:this.list),this.createButtons(s),this.element.id||(this.element.id=sf.base.getUniqueID("e-"+this.getModuleName())),this.scope?document.querySelector(this.scope).setAttribute("data-value",this.element.id):this.updateToolBarState()}e=this.element.getAttribute("data-value"),i&&e&&i!==e?(this.tBListBox=sf.base.getComponent(document.getElementById(i),this.getModuleName()),this.tBListBox.updateToolBarState()):e&&(this.tBListBox=sf.base.getComponent(document.getElementById(e),this.getModuleName()),this.tBListBox.updateToolBarState())},t.prototype.createButtons=function(e){var t,i,s=this,l=new sf.base.L10n(this.getModuleName(),{moveUp:"Move Up",moveDown:"Move Down",moveTo:"Move To",moveFrom:"Move From",moveAllTo:"Move All To",moveAllFrom:"Move All From"},this.locale);this.toolbarSettings.items.forEach((function(a){i=l.getConstant(a),t=s.createElement("button",{attrs:{type:"button","data-value":a,title:i,"aria-label":i}}),e.appendChild(t),new sf.buttons.Button({iconCss:"e-icons e-"+a.toLowerCase()},t).createElement=s.createElement}))},t.prototype.validationAttribute=function(t,i){e.prototype.validationAttribute.call(this,t,i),i.required=t.required,t.required=!1},t.prototype.setHeight=function(){(this.toolbarSettings.items.length?this.list.parentElement:this.list).style.height=sf.base.formatUnit(this.height),this.allowFiltering&&this.height.toString().indexOf("%")<0?sf.base.addClass([this.list],"e-filter-list"):sf.base.removeClass([this.list],"e-filter-list")},t.prototype.setCssClass=function(){var e=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.cssClass&&sf.base.addClass([e],this.cssClass.split(" ")),this.enableRtl&&sf.base.addClass([e],"e-rtl")},t.prototype.setEnable=function(){var e=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.enabled?sf.base.removeClass([e],sf.lists.cssClass.disabled):(sf.base.addClass([e],sf.lists.cssClass.disabled),sf.base.isBlazor()&&this.isServerRendered&&this.toolbarSettings.items.length&&sf.base.removeClass([this.list],sf.lists.cssClass.disabled))},t.prototype.showSpinner=function(){this.spinner||(this.spinner=this.createElement("div",{className:"e-listbox-wrapper"})),this.spinner.style.height=sf.base.formatUnit(this.height),this.element.parentElement.insertBefore(this.spinner,this.element.nextSibling),sf.popups.createSpinner({target:this.spinner},this.createElement),sf.popups.showSpinner(this.spinner)},t.prototype.hideSpinner=function(){this.spinner.querySelector(".e-spinner-pane")&&sf.popups.hideSpinner(this.spinner),this.spinner.parentElement&&sf.base.detach(this.spinner)},t.prototype.onInput=function(){this.isValidKey=!0,this.refreshClearIcon()},t.prototype.clearText=function(){this.filterInput.value="",this.refreshClearIcon();var e=document.createEvent("KeyboardEvent");this.isValidKey=!0,this.KeyUp(e)},t.prototype.refreshClearIcon=function(){this.filterInput.parentElement.querySelector("."+oe.clearIcon)&&(this.filterInput.parentElement.querySelector("."+oe.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible")},t.prototype.onActionComplete=function(t,i,s){var l;if(this.allowFiltering&&this.list.getElementsByClassName("e-filter-parent")[0]&&(l=sf.base.isBlazor()&&this.isServerRendered?this.list.getElementsByClassName("e-filter-parent")[0]:this.list.getElementsByClassName("e-filter-parent")[0].cloneNode(!0)),e.prototype.onActionComplete.call(this,t,i,s),this.allowFiltering&&!sf.base.isNullOrUndefined(l)&&(this.list.insertBefore(l,this.list.firstElementChild),sf.base.isBlazor()||this.isServerRendered||(this.filterParent=this.list.getElementsByClassName("e-filter-parent")[0],this.filterWireEvents(l))),this.initWrapper(),this.setSelection(),this.initDraggable(),this.mainList=this.ulElement,this.initLoad)this.jsonData=[],sf.base.extend(this.jsonData,i,[]),this.initToolbarAndStyles(),this.wireEvents(),this.showCheckbox&&this.setCheckboxPosition(),this.allowFiltering&&this.setFiltering();else if(this.allowFiltering){var a=this.list.getElementsByClassName("e-input-filter")[0],o=this.filterInput.value.length;a.selectionStart=o,a.selectionEnd=o,a.focus()}this.initLoad=!1},t.prototype.initToolbarAndStyles=function(){this.initToolbar(),this.setCssClass(),this.setEnable(),this.setHeight()},t.prototype.triggerDragStart=function(e){var t,i=this;e=sf.base.extend(this.getDragArgs(e),{dragSelected:!0}),sf.base.Browser.isIos&&(this.list.style.overflow="hidden"),this.trigger("dragStart",e,(function(s){i.allowDragAll=s.dragSelected,i.allowDragAll||(t=i.ulElement.getElementsByClassName("e-list-badge")[0])&&sf.base.detach(t),sf.base.isBlazor()&&e.bindEvents(e.dragElement)}))},t.prototype.triggerDrag=function(e){this.trigger("drag",this.getDragArgs(e));var t=this.getComponent(e.target);if(t&&0===t.listData.length){var i=t.ulElement.getElementsByClassName("e-list-nrt")[0];i&&t.ulElement.removeChild(i)}},t.prototype.beforeDragEnd=function(e){var t=e.droppedElement.getAttribute("data-value");this.value.indexOf(t)>-1?e.items=this.getDataByValues(this.value):e.items=this.getDataByValues([t]),this.trigger("beforeDrop",e)},t.prototype.dragEnd=function(e){var t,i,s,l,a,o,n=this,r=this.getFormattedValue(e.droppedElement.getAttribute("data-value")),h=this.getComponent(e.droppedElement),p=this.getDragArgs({target:e.droppedElement},!0),u={previousData:this.dataSource},c={previousData:h.dataSource},d=sf.base.extend({},p,{target:e.target,source:{previousData:this.dataSource}});if(h!==this){var f=sf.base.extend(u,{currentData:this.listData});d=sf.base.extend(d,{source:f,destination:c})}if(sf.base.Browser.isIos&&(this.list.style.overflow=""),h===this){var m=this.ulElement;t=[].slice.call(this.listData),i=[].slice.call(this.liCollections),s=[].slice.call(this.jsonData),o=[].slice.call(this.sortedData);var v=e.currentIndex,b=e.currentIndex=this.getCurIdx(this,e.currentIndex),y=t.indexOf(this.getDataByValue(r)),g=s.indexOf(this.getDataByValue(r)),C=o.indexOf(this.getDataByValue(r));t.splice(b,0,t.splice(y,1)[0]),s.splice(b,0,s.splice(g,1)[0]),o.splice(v,0,o.splice(C,1)[0]),i.splice(b,0,i.splice(y,1)[0]),this.allowDragAll&&(a=this.value&&Array.prototype.indexOf.call(this.value,r)>-1?this.value:[r]).forEach((function(e){if(e!==r){var l=t.indexOf(n.getDataByValue(e)),a=s.indexOf(n.getDataByValue(e)),h=o.indexOf(n.getDataByValue(e));l>b&&b++,t.splice(b,0,t.splice(l,1)[0]),s.splice(b,0,s.splice(a,1)[0]),o.splice(v,0,o.splice(h,1)[0]),i.splice(b,0,i.splice(l,1)[0]),m.insertBefore(n.getItems()[n.getIndexByValue(e)],m.getElementsByClassName("e-placeholder")[0])}})),this.listData=t,this.jsonData=s,this.sortedData=o,this.liCollections=i}else{var E,S=[].slice.call(this.liCollections),x=e.currentIndex=this.getCurIdx(h,e.currentIndex),w=h.ulElement;t=[].slice.call(h.listData),i=[].slice.call(h.liCollections),s=[].slice.call(h.jsonData),o=[].slice.call(h.sortedData),a=this.value&&Array.prototype.indexOf.call(this.value,r)>-1&&this.allowDragAll?this.value:[r];var k=[].slice.call(this.listData),O=[].slice.call(this.sortedData);if(a.forEach((function(a){l=n.getDataByValue(a);var h=n.listData.indexOf(l),p=n.jsonData.indexOf(l),u=n.sortedData.indexOf(l);k.splice(h,1),n.jsonData.splice(p,1),O.splice(u,1),n.listData=k,n.sortedData=O;var c=S.splice(h,1)[0],d=a===r?e.currentIndex:x;if(t.splice(d,0,l),s.splice(d,0,l),i.splice(d,0,c),o.splice(d,0,l),a)E=n.getItems()[n.getIndexByValue(a)];else for(var f=n.getItems(),m=0;m<f.length;m++)if(null===f[m].getAttribute("data-value")&&f[m].classList.contains("e-list-item")){E=f[m];break}n.removeSelected(n,a===r?[e.droppedElement]:[E]),w.insertBefore(E,w.getElementsByClassName("e-placeholder")[0]),x++})),this.updateSelectedOptions(),this.fields.groupBy&&(this.ulElement.innerHTML=this.renderItems(this.listData,this.fields).innerHTML,this.setSelection()),"None"!==h.sortOrder||this.selectionSettings.showCheckbox!==h.selectionSettings.showCheckbox||h.fields.groupBy){var A=sf.base.getComponent(w,"sortable");w.innerHTML=h.renderItems(t,h.fields).innerHTML,A.placeHolderElement&&w.appendChild(A.placeHolderElement),w.appendChild(e.helper),h.setSelection()}this.liCollections=S,h.liCollections=i,h.jsonData=sf.base.extend([],[],s,!1),h.listData=sf.base.extend([],[],t,!1),h.sortedData=sf.base.extend([],[],o,!1),0===this.listData.length&&this.l10nUpdate()}if(this===h){f=sf.base.extend(u,{currentData:t});d=sf.base.extend(d,{source:f})}else{var B=sf.base.extend(c,{currentData:t});d=sf.base.extend(d,{destination:B})}this.trigger("drop",d)},t.prototype.removeSelected=function(e,t){e.selectionSettings.showCheckbox?t.forEach((function(e){e.getElementsByClassName("e-frame")[0].classList.remove("e-check")})):sf.base.removeClass(t,sf.lists.cssClass.selected)},t.prototype.getCurIdx=function(e,t){return e.fields.groupBy&&(t-=[].slice.call(e.ulElement.children).slice(0,t).filter((function(e){return e.classList.contains(sf.lists.cssClass.group)})).length),t},t.prototype.getComponent=function(e){var t,i="EJS-LISTBOX"===this.element.tagName?sf.base.closest(e,".e-listbox"):sf.base.closest(e,".e-listbox-wrapper")&&sf.base.closest(e,".e-listbox-wrapper").querySelector(".e-listbox");return i&&(t=sf.base.getComponent(i,this.getModuleName())),t},t.prototype.listOption=function(t,i){return this.listCurrentOptions=e.prototype.listOption.call(this,t,i),this.listCurrentOptions=sf.base.extend({},this.listCurrentOptions,{itemCreated:this.triggerBeforeItemRender.bind(this)},!0),this.notify("listoption",{module:"CheckBoxSelection"}),this.listCurrentOptions},t.prototype.triggerBeforeItemRender=function(e){e.item.setAttribute("tabindex","-1"),this.trigger("beforeItemRender",{element:e.item,item:e.curData})},t.prototype.requiredModules=function(){var e=[];return this.selectionSettings.showCheckbox&&e.push({member:"CheckBoxSelection",args:[this]}),e},t.prototype.enableItems=function(e,t){var i,s=this;void 0===t&&(t=!0),e.forEach((function(e){i=s.findListElement(s.list,"li","data-value",s.getValueByText(e)),t?(sf.base.removeClass([i],sf.lists.cssClass.disabled),i.removeAttribute("aria-disabled")):(sf.base.addClass([i],sf.lists.cssClass.disabled),i.setAttribute("aria-disabled","true"))}))},t.prototype.selectItems=function(e,t){void 0===t&&(t=!0),this.setSelection(e,t,!0),this.updateSelectedOptions()},t.prototype.selectAll=function(e){void 0===e&&(e=!0),this.selectAllItems(e)},t.prototype.addItems=function(t,i){e.prototype.addItem.call(this,t,i)},t.prototype.removeItems=function(e,t){this.removeItem(e,t)},t.prototype.removeItem=function(e,t){var i=[],s=this.list.querySelectorAll("."+m.li);if(e){e=e instanceof Array?e:[e];var l=this.fields,a=void 0,o=[],n=void 0;sf.base.extend(o,[],this.listData);for(var r=0;r<e.length;r++){a=e[r]instanceof Object?sf.base.getValue(l.value,e[r]):e[r].toString();for(var h=0,p=o.length;h<p;h++)(o[h]instanceof Object?sf.base.getValue(l.value,o[h]):o[h].toString())===a&&(n=this.getIndexByValue(a),i.push(s[n]),this.listData.splice(h,1),this.updateLiCollection(n))}}else t=t||0,i.push(s[t]),this.listData.splice(t,1),this.updateLiCollection(t);for(h=0;h<i.length;h++)this.ulElement.removeChild(i[h])},t.prototype.getDataByValues=function(e){for(var t=[],i=0;i<e.length;i++)t.push(this.getDataByValue(e[i]));return t},t.prototype.moveUp=function(e){var t=e?this.getElemByValue(e):this.getSelectedItems();this.moveUpDown(!0,!1,t)},t.prototype.moveDown=function(e){var t=e?this.getElemByValue(e):this.getSelectedItems();this.moveUpDown(!1,!1,t)},t.prototype.moveTo=function(e,t,s){var l=e?this.getElemByValue(e):this.getSelectedItems(),a=s?sf.base.getComponent(s,i):this.getScopedListBox();this.moveData(this,a,!1,l,t)},t.prototype.moveAllTo=function(e,t){var s=e?sf.base.getComponent(e,i):this.getScopedListBox();this.moveAllData(this,s,!1,t)},t.prototype.getDataList=function(){return this.jsonData},t.prototype.getSortedList=function(){var e,t;if(e=t=this.sortedData,this.fields.groupBy){e=[];for(var i=0;i<t.length;i++)t[i].isHeader||e.push(t[i])}return e},t.prototype.getElemByValue=function(e){for(var t=[],i=0;i<e.length;i++)t.push(this.ulElement.querySelector('[data-value ="'+e[i]+'"]'));return t},t.prototype.updateLiCollection=function(e){var t=[].slice.call(this.liCollections);t.splice(e,1),this.liCollections=t},t.prototype.selectAllItems=function(e,t){var i=this;if([].slice.call(this.getItems()).forEach((function(t){if(!t.classList.contains(sf.lists.cssClass.disabled))if(i.selectionSettings.showCheckbox){var s=t.getElementsByClassName("e-check")[0];(!s&&e||s&&!e)&&(i.notify("updatelist",{li:t,module:"listbox"}),i.maximumSelectionLength>=i.list.querySelectorAll(".e-list-item span.e-check").length&&i.checkMaxSelection())}else e?t.classList.add(sf.lists.cssClass.selected):t.classList.remove(sf.lists.cssClass.selected)})),this.updateSelectedOptions(),this.allowFiltering&&this.selectionSettings.showCheckbox){var s=this.list.getElementsByTagName("li"),l=0;if(e){var a=function(){var e=o.getFormattedValue(s[l].getAttribute("data-value"));o.value.some((function(t){return t===e}))||o.value.push(o.getFormattedValue(s[l].getAttribute("data-value")))},o=this;for(l=0;l<s.length;l++)a()}else{var n=function(){var e=r.getFormattedValue(s[l].getAttribute("data-value"));r.value=r.value.filter((function(t){return t!==e}))},r=this;for(l=0;l<s.length;l++)n()}document.querySelectorAll("ul").length<2&&this.updateMainList()}this.triggerChange(this.getSelectedItems(),t)},t.prototype.updateMainList=function(){var e=this.mainList.querySelectorAll(".e-list-item"),t=this.ulElement.querySelectorAll(".e-list-item"),i=e.length,s=t.length;if(this.selectionSettings.showCheckbox||document.querySelectorAll("ul").length>1||i!==s)for(var l=0,a=0,o=0;l<i;){if(this.value)for(;a<this.value.length;a++)e[l].getAttribute("data-value")===this.value[a]&&o++;!o&&this.selectionSettings.showCheckbox&&e[l].getElementsByClassName("e-frame")[0].classList.remove("e-check"),document.querySelectorAll("ul").length>1&&o&&i!==s?(this.mainList.removeChild(this.mainList.getElementsByTagName("li")[l]),l=0):l++,o=0,a=0}},t.prototype.wireEvents=function(){var e=sf.base.closest(this.element,"form"),t="EJS-LISTBOX"===this.element.tagName?this.element:this.list;sf.base.EventHandler.add(this.list,"click",this.clickHandler,this),sf.base.EventHandler.add(t,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(t,"focusout",this.focusOutHandler,this),this.wireToolbarEvent(),this.selectionSettings.showCheckbox&&sf.base.EventHandler.remove(document,"mousedown",this.checkBoxSelectionModule.onDocumentClick),(this.fields.groupBy||this.element.querySelector("select>optgroup"))&&sf.base.EventHandler.remove(this.list,"scroll",this.setFloatingHeader),e&&sf.base.EventHandler.add(e,"reset",this.formResetHandler,this)},t.prototype.wireToolbarEvent=function(){this.toolbarSettings.items.length&&sf.base.EventHandler.add(this.getToolElem(),"click",this.toolbarClickHandler,this)},t.prototype.unwireEvents=function(){var e=sf.base.closest(this.element,"form"),t="EJS-LISTBOX"===this.element.tagName?this.element:this.list;sf.base.EventHandler.remove(this.list,"click",this.clickHandler),sf.base.EventHandler.remove(t,"keydown",this.keyDownHandler),sf.base.EventHandler.remove(t,"focusout",this.focusOutHandler),this.allowFiltering&&this.clearFilterIconElem&&sf.base.EventHandler.remove(this.clearFilterIconElem,"click",this.clearText),this.toolbarSettings.items.length&&sf.base.EventHandler.remove(this.getToolElem(),"click",this.toolbarClickHandler),e&&sf.base.EventHandler.remove(e,"reset",this.formResetHandler)},t.prototype.clickHandler=function(e){this.selectHandler(e)},t.prototype.checkSelectAll=function(){for(var e=0,t=this.list.querySelectorAll("li."+m.li),i=0;i<t.length;i++)t[i].classList.contains("e-disabled")||e++;var s=this.getSelectedItems().length;this.showSelectAll&&e&&this.notify("checkSelectAll",{module:"CheckBoxSelection",value:e===s?"check":0===s?"uncheck":"indeterminate"})},t.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new sf.data.Query;if(this.allowFiltering){var i=""===this.inputString?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof sf.data.DataManager||"string"!==s)&&"number"!==s){var l=this.fields.text?this.fields.text:"";t.where(l,i,this.inputString,this.ignoreCase,this.ignoreAccent)}else t.where("",i,this.inputString,this.ignoreCase,this.ignoreAccent)}else t=e||(this.query?this.query:new sf.data.Query);return t},t.prototype.setFiltering=function(){var e;if(sf.base.isNullOrUndefined(this.filterParent))return sf.base.isBlazor()&&this.isServerRendered?(this.filterParent=this.list.querySelector(".e-filter-parent"),this.filterInput=this.list.querySelector(".e-input-filter")):(this.filterParent=this.createElement("span",{className:oe.filterParent}),this.filterInput=this.createElement("input",{attrs:{type:"text"},className:oe.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element),e=sf.inputs.Input.createInput({element:this.filterInput,buttons:[oe.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),sf.base.append([e.container],this.filterParent),sf.base.prepend([this.filterParent],this.list),sf.base.attributes(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"})),this.height.toString().indexOf("%")<0&&sf.base.addClass([this.list],"e-filter-list"),this.inputString=this.filterInput.value,this.filterWireEvents(),e},t.prototype.filterWireEvents=function(e){e&&(this.filterInput=e.querySelector(".e-input-filter")),this.clearFilterIconElem=this.filterInput.parentElement.querySelector("."+oe.clearIcon),this.clearFilterIconElem&&(sf.base.EventHandler.add(this.clearFilterIconElem,"click",this.clearText,this),e||(this.clearFilterIconElem.style.visibility="hidden")),sf.base.EventHandler.add(this.filterInput,"input",this.onInput,this),sf.base.EventHandler.add(this.filterInput,"keyup",this.KeyUp,this),sf.base.EventHandler.add(this.filterInput,"keydown",this.onKeyDown,this)},t.prototype.selectHandler=function(e,t){var i,s=!0,l=sf.base.closest(e.target,".e-list-item"),a=[l];if(l){if(i=[].slice.call(l.parentElement.children).indexOf(l),this.selectionSettings.showCheckbox?s=!l.getElementsByClassName("e-frame")[0].classList.contains("e-check"):(e.ctrlKey||sf.base.Browser.isDevice)&&this.isSelected(l)?(l.classList.remove(sf.lists.cssClass.selected),l.removeAttribute("aria-selected"),s=!1):"Multiple"===this.selectionSettings.mode&&(e.ctrlKey||sf.base.Browser.isDevice)||(this.getSelectedItems().forEach((function(e){e.removeAttribute("aria-selected")})),sf.base.removeClass(this.getSelectedItems(),sf.lists.cssClass.selected)),e.shiftKey&&!this.selectionSettings.showCheckbox&&"Single"!==this.selectionSettings.mode?a=[].slice.call(l.parentElement.children).slice(Math.min(i,this.prevSelIdx),Math.max(i,this.prevSelIdx)+1).filter((function(e){return e.classList.contains("e-list-item")})):this.prevSelIdx=[].slice.call(l.parentElement.children).indexOf(l),s&&(this.selectionSettings.showCheckbox||sf.base.addClass(a,sf.lists.cssClass.selected),a.forEach((function(e){e.setAttribute("aria-selected","true")})),this.list.setAttribute("aria-activedescendant",l.id)),t||!(this.maximumSelectionLength>(this.value&&this.value.length))&&s||!(this.maximumSelectionLength>=(this.value&&this.value.length))&&s||this.maximumSelectionLength<(this.value&&this.value.length)||this.notify("updatelist",{li:l,e:e,module:"listbox"}),this.allowFiltering&&!t){var o=this.getFormattedValue(l.getAttribute("data-value"));if(s){var n=[];sf.base.extend(n,this.value),n.push(o),this.value=n}else this.value=this.value.filter((function(e){return e!==o}));document.querySelectorAll("ul").length<2&&this.updateMainList()}this.updateSelectedOptions(),this.triggerChange(this.getSelectedItems(),e),this.checkMaxSelection()}},t.prototype.triggerChange=function(e,t){this.trigger("change",{elements:e,items:this.getDataByElements(e),value:this.value,event:t})},t.prototype.getDataByElems=function(e){for(var t=[],i=0,s=e.length;i<s;i++)t.push(this.getDataByValue(this.getFormattedValue(e[i].getAttribute("data-value"))));return t},t.prototype.getDataByElements=function(e){var t,i=[],s=0;if(!sf.base.isNullOrUndefined(this.listData)){var l=this.typeOfData(this.listData).typeof;if("string"===l||"number"===l||"boolean"===l)for(var a=0,o=this.listData;a<o.length;a++){for(var n=o[a],r=s,h=e.length;r<h;r++)if(t=this.getFormattedValue(e[r].getAttribute("data-value")),!sf.base.isNullOrUndefined(n)&&n===t){s=r,i.push(n);break}if(e.length===i.length)break}else for(var p=0,u=this.listData;p<u.length;p++){for(n=u[p],r=s,h=e.length;r<h;r++)if(t=this.getFormattedValue(e[r].getAttribute("data-value")),!sf.base.isNullOrUndefined(n)&&sf.base.getValue(this.fields.value?this.fields.value:"value",n)===t){s=r,i.push(n);break}if(e.length===i.length)break}return i}return null},t.prototype.checkMaxSelection=function(){var e=this.list.querySelectorAll(".e-list-item span.e-check").length;if(this.selectionSettings.showCheckbox){var t=0,i=void 0;for(i=this.list.getElementsByClassName("e-list-item");t<i.length;t++)i[t].querySelector(".e-frame.e-check")||(e===this.maximumSelectionLength?i[t].classList.add("e-disable"):i[t].classList.contains("e-disable")&&i[t].classList.remove("e-disable"))}},t.prototype.toolbarClickHandler=function(e){var t=sf.base.closest(e.target,"button");if(t){if(this.toolbarAction=t.getAttribute("data-value"),t.disabled)return;switch(this.toolbarAction){case"moveUp":this.moveUpDown(!0);break;case"moveDown":this.moveUpDown();break;case"moveTo":this.moveItemTo();break;case"moveFrom":this.moveItemFrom();break;case"moveAllTo":this.moveAllItemTo();break;case"moveAllFrom":this.moveAllItemFrom()}}},t.prototype.moveUpDown=function(e,t,i){var s,l=this,a=this.getSelectedItems();if(i&&(a=i),!(e&&this.isSelected(this.ulElement.firstElementChild)||!e&&this.isSelected(this.ulElement.lastElementChild))||i){var o={cancel:!1,items:s=this.getDataByElems(a),eventName:this.toolbarAction};this.trigger("actionBegin",o),o.cancel||((e?a:a.reverse()).forEach((function(t){var i=Array.prototype.indexOf.call(l.ulElement.querySelectorAll(".e-list-item"),t),s=Array.prototype.indexOf.call(l.ulElement.children,t);sf.lists.moveTo(l.ulElement,l.ulElement,[s],e?s-1:s+2),l.changeData(s,e?s-1:s+1,e?i-1:i+1,t)})),this.trigger("actionComplete",{items:s,eventName:this.toolbarAction}),a[0].focus(),!t&&this.toolbarSettings.items.length&&this.getToolElem().querySelector("[data-value="+(e?"moveUp":"moveDown")+"]").focus(),this.updateToolBarState())}},t.prototype.moveItemTo=function(){this.moveData(this,this.getScopedListBox())},t.prototype.moveItemFrom=function(){this.moveData(this.getScopedListBox(),this)},t.prototype.moveData=function(e,t,i,s,l){var a=[],o=[],n=[],r=[],h=[].slice.call(e.listData),p=[].slice.call(t.listData),u=[].slice.call(e.sortedData),c=[].slice.call(t.sortedData),d=[].slice.call(e.liCollections),f=[],m=[].slice.call(t.liCollections),v=[],b=[],y=e.getSelectedItems();s&&(y=s);var g="None"!==t.sortOrder||t.selectionSettings.showCheckbox!==e.selectionSettings.showCheckbox||t.fields.groupBy;if(e.value=[],y.length){this.removeSelected(e,y),y.forEach((function(t,i){a.push(Array.prototype.indexOf.call(e.ulElement.children,t)),f.push(Array.prototype.indexOf.call(e.ulElement.querySelectorAll(".e-list-item"),t)),o.push(Array.prototype.indexOf.call(e.listData,e.getDataByElems([t])[0])),r.push(Array.prototype.indexOf.call(e.sortedData,e.getDataByElems([t])[0])),n.push(Array.prototype.indexOf.call(e.jsonData,e.getDataByElems([t])[0]))})),"None"!==this.sortOrder?r.forEach((function(t){v.push(e.sortedData[t])})):n.forEach((function(t){v.push(e.jsonData[t])}));var C={cancel:!1,items:v,eventName:this.toolbarAction};if(e.trigger("actionBegin",C),C.cancel)return;var E=[];if(f.sort((function(e,t){return e-t})).reverse().forEach((function(e){E.push(d.splice(e,1)[0])})),e.liCollections=d,l){var S=m.splice(0,l);t.liCollections=S.concat(E.reverse()).concat(m)}else t.liCollections=m.concat(E.reverse());if(0===t.listData.length){var x=t.ulElement.getElementsByClassName("e-list-nrt")[0];x&&t.ulElement.removeChild(x)}o.sort((function(e,t){return t-e})).forEach((function(e){h.splice(e,1)[0]})),r.sort((function(e,t){return t-e})).forEach((function(e){u.splice(e,1)[0]})),n.slice().reverse().forEach((function(t){b.push(e.jsonData.splice(t,1)[0])})),g?e.fields.groupBy?e.ulElement.innerHTML=e.renderItems(h,e.fields).innerHTML:y.forEach((function(e){sf.base.detach(e)})):(sf.lists.moveTo(e.ulElement,t.ulElement,a,l),this.trigger("actionComplete",{items:v,eventName:this.toolbarAction})),t.mainList.childElementCount!==t.jsonData.length&&(t.mainList=t.ulElement),e.updateMainList();var w=e.ulElement.querySelectorAll(".e-list-item").length,k=void 0,O=void 0,A=[].slice.call(t.jsonData);if(c=[].slice.call(t.sortedData),1===y.length&&w&&!e.selectionSettings.showCheckbox){O=w<=f[0]?w-1:f[0],k=e.ulElement.querySelectorAll(".e-list-item")[O];var B=e.getValidIndex(k,O,w===o[0]?38:40);B>-1&&e.ulElement.querySelectorAll(".e-list-item")[B].classList.add(sf.lists.cssClass.selected)}i&&this.list.focus(),e.listData=h,e.sortedData=u,l=l||p.length;for(var D=v.length-1;D>=0;D--)p.splice(l,0,v[D]),A.splice(l,0,v[D]),c.splice(l,0,v[D]);t.listData=p,t.jsonData=A,t.sortedData=c,g&&(t.ulElement.innerHTML=t.renderItems(p,t.fields).innerHTML,t.setSelection()),e.updateSelectedOptions(),0===e.listData.length&&e.l10nUpdate()}1===e.value.length&&e.getSelectedItems().length&&(e.value[0]=e.getFormattedValue(e.getSelectedItems()[0].getAttribute("data-value")))},t.prototype.moveAllItemTo=function(){this.moveAllData(this,this.getScopedListBox())},t.prototype.moveAllItemFrom=function(){this.moveAllData(this.getScopedListBox(),this)},t.prototype.moveAllData=function(e,t,i,s){var l=[].slice.call(t.listData),a=[].slice.call(t.jsonData),o="None"!==t.sortOrder||t.selectionSettings.showCheckbox!==e.selectionSettings.showCheckbox||t.fields.groupBy;this.removeSelected(e,e.getSelectedItems());var n=[].slice.call(e.jsonData),r={cancel:!1,items:n,eventName:this.toolbarAction};if(e.trigger("actionBegin",r),!r.cancel){var h;if(0===t.listData.length)(h=t.ulElement.getElementsByClassName("e-list-nrt")[0])&&t.ulElement.removeChild(h);if(o)(h=e.ulElement.getElementsByClassName("e-list-nrt")[0])&&e.ulElement.removeChild(h);else sf.lists.moveTo(e.ulElement,t.ulElement,Array.apply(null,{length:e.ulElement.childElementCount}).map(Number.call,Number),s),this.trigger("actionComplete",{items:n,eventName:this.toolbarAction});i&&this.list.focus(),s=s||l.length;for(var p=0;p<e.listData.length;p++)l.splice(s+p,0,e.listData[p]);for(p=0;p<e.jsonData.length;p++)a.splice(s+p,0,e.jsonData[p]);var u=[].slice.call(e.liCollections),c=[].slice.call(t.liCollections);if(e.liCollections=[],e.value=[],s){var d=c.splice(0,s);t.liCollections=d.concat(u).concat(c)}else t.liCollections=c.concat(u);l=l.filter((function(e){return!0!==e.isHeader})),t.listData=l,t.jsonData=a,e.listData=e.sortedData=e.jsonData=[],o?(t.ulElement.innerHTML=t.renderItems(l,t.fields).innerHTML,this.trigger("actionComplete",{items:n,eventName:this.toolbarAction})):t.sortedData=l,e.updateSelectedOptions(),0===e.listData.length&&e.l10nUpdate()}},t.prototype.changeData=function(e,t,i,s){var l=[].slice.call(this.listData),a=[].slice.call(this.jsonData),o=[].slice.call(this.sortedData),n=Array.prototype.indexOf.call(this.jsonData,this.getDataByElems([s])[0]),r=Array.prototype.indexOf.call(this.sortedData,this.getDataByElems([s])[0]),h=[].slice.call(this.liCollections);l.splice(t,0,l.splice(e,1)[0]),a.splice(i,0,a.splice(n,1)[0]),o.splice(t,0,o.splice(r,1)[0]),h.splice(t,0,h.splice(e,1)[0]),this.listData=l,this.jsonData=a,this.liCollections=h,this.sortedData=o},t.prototype.getSelectedItems=function(){var e=[];return this.selectionSettings.showCheckbox?[].slice.call(this.ulElement.getElementsByClassName("e-check")).forEach((function(t){e.push(sf.base.closest(t,".e-list-item"))})):e=[].slice.call(this.ulElement.getElementsByClassName(sf.lists.cssClass.selected)),e},t.prototype.getScopedListBox=function(){var e,t=this;return this.scope&&[].slice.call(document.querySelectorAll(this.scope)).forEach((function(i){sf.base.getComponent(i,t.getModuleName())&&(e=sf.base.getComponent(i,t.getModuleName()))})),e},t.prototype.getDragArgs=function(e,t){var i=this.getSelectedItems();return i.length?(i.pop(),t&&i.push(e.target)):i=[e.target],sf.base.isBlazor()?{elements:i,items:this.getDataByElems(i),bindEvents:e.bindEvents,dragElement:e.dragElement}:{elements:i,items:this.getDataByElems(i)}},t.prototype.onKeyDown=function(e){this.keyDownHandler(e),event.stopPropagation()},t.prototype.keyDownHandler=function(e){if([32,35,36,37,38,39,40,65].indexOf(e.keyCode)>-1&&!this.allowFiltering)if(e.preventDefault(),32===e.keyCode&&this.ulElement.children.length)this.selectHandler({target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey});else if(65===e.keyCode&&e.ctrlKey)this.selectAll();else if((38===e.keyCode||40===e.keyCode)&&e.ctrlKey&&e.shiftKey)this.moveUpDown(38===e.keyCode,!0);else if(!this.toolbarSettings.items.length&&!this.tBListBox||39!==e.keyCode&&37!==e.keyCode||!e.ctrlKey)37!==e.keyCode&&39!==e.keyCode&&this.upDownKeyHandler(e);else{var t=this.tBListBox||this.getScopedListBox();39===e.keyCode?e.shiftKey?this.moveAllData(this,t,!0):this.moveData(this,t,!0):e.shiftKey?this.moveAllData(t,this,!0):this.moveData(t,this,!0)}else this.allowFiltering&&(40!==e.keyCode&&38!==e.keyCode||this.upDownKeyHandler(e))},t.prototype.upDownKeyHandler=function(e){var t=this.ulElement,i=40===e.keyCode||36===e.keyCode?0:t.childElementCount-1,s=t.getElementsByClassName("e-focused")[0]||t.getElementsByClassName(sf.lists.cssClass.selected)[0];if(s){if(35!==e.keyCode&&36!==e.keyCode&&(i=Array.prototype.indexOf.call(t.children,s),40===e.keyCode?i++:i--,i<0||i>t.childElementCount-1))return;sf.base.removeClass([s],"e-focused")}var l=t.children[i];if(l){if(-1===(i=this.getValidIndex(l,i,e.keyCode)))return void sf.base.addClass([s],"e-focused");t.children[i].focus(),t.children[i].classList.add("e-focused"),e.ctrlKey||this.selectHandler({target:t.children[i],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey},!0)}},t.prototype.KeyUp=function(e){var t=this,i=String.fromCharCode(e.keyCode).match(/\w/);if(sf.base.isNullOrUndefined(i)||(this.isValidKey=!0),this.isValidKey=8===e.keyCode||this.isValidKey,this.isValidKey){this.isValidKey=!1,e.keyCode;this.targetElement(),e.keyCode;if(this.allowFiltering){var s={preventDefaultAction:!1,text:this.targetElement(),updateData:function(e,i,l){s.cancel||(t.isFiltered=!0,t.remoteFilterAction=!0,t.dataUpdater(e,i,l))},event:e,cancel:!1};this.trigger("filtering",s,(function(e){t.isDataFetched=!1,s.cancel||""!==t.filterInput.value&&t.isFiltered||(s.cancel||t.isCustomFiltering||s.preventDefaultAction||(t.inputString=t.filterInput.value,t.filteringAction(t.jsonData,new sf.data.Query,t.fields)),t.isFiltered||t.isCustomFiltering||s.preventDefaultAction||t.dataUpdater(t.jsonData,new sf.data.Query,t.fields))}))}}},t.prototype.filter=function(e,t,i){this.isCustomFiltering=!0,this.filteringAction(e,t,i)},t.prototype.filteringAction=function(e,t,i){this.resetList(e,i,t)},t.prototype.targetElement=function(){return this.targetInputElement=this.list.getElementsByClassName("e-input-filter")[0],this.targetInputElement.value},t.prototype.dataUpdater=function(e,t,i){this.isDataFetched=!1;if(""===this.targetElement().trim()){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.remoteCustomValue=!1,this.onActionComplete(s,this.jsonData),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.selectionSettings.showCheckbox,e:this})}else this.resetList(e,i,t)},t.prototype.focusOutHandler=function(){var e=this.list.getElementsByClassName("e-focused")[0];e&&e.classList.remove("e-focused"),this.allowFiltering&&this.refreshClearIcon()},t.prototype.getValidIndex=function(e,t,i){var s=this.ulElement;return(e.classList.contains("e-disabled")||e.classList.contains(sf.lists.cssClass.group))&&(40===i||36===i?t++:t--),t<0||t===s.childElementCount?-1:(((e=s.querySelectorAll(".e-list-item")[t]).classList.contains("e-disabled")||e.classList.contains(sf.lists.cssClass.group))&&(t=this.getValidIndex(e,t,i)),t)},t.prototype.updateSelectedOptions=function(){var e=this,t=[],i=[];if(sf.base.extend(i,this.value),this.getSelectedItems().forEach((function(i){i.classList.contains("e-grabbed")||t.push(e.getFormattedValue(i.getAttribute("data-value")))})),this.mainList.childElementCount===this.ulElement.childElementCount)if(this.allowFiltering&&this.selectionSettings.showCheckbox){for(var s=0;s<t.length;s++)i.indexOf(t[s])>-1||i.push(t[s]);this.setProperties({value:i},!0)}else this.setProperties({value:t},!0);this.updateSelectTag(),this.updateToolBarState(),this.tBListBox&&this.tBListBox.updateToolBarState()},t.prototype.clearSelection=function(e){var t,i=this;(void 0===e&&(e=this.value),this.selectionSettings.showCheckbox)&&this.getSelectedItems().forEach((function(s){t=i.getFormattedValue(s.getAttribute("data-value")),e.indexOf(t)<0&&(s.getElementsByClassName("e-check")[0].classList.remove("e-check"),s.getElementsByClassName("e-checkbox-wrapper")[0].removeAttribute("aria-checked"),s.removeAttribute("aria-selected"))}))},t.prototype.setSelection=function(e,t,i){var s,l,a=this;void 0===e&&(e=this.value),void 0===t&&(t=!0),void 0===i&&(i=!1),e&&e.forEach((function(e){(s=a.list.querySelector('[data-value="'+(i?a.getValueByText(e):e)+'"]'))&&(l=a.selectionSettings.showCheckbox?s.getElementsByClassName("e-frame")[0].classList.contains("e-check"):s.classList.contains("e-selected"),(!t&&l||t&&!l&&s)&&(a.selectionSettings.showCheckbox?a.notify("updatelist",{li:s,module:"listbox"}):t?(s.classList.add(sf.lists.cssClass.selected),s.setAttribute("aria-selected","true")):(s.classList.remove(sf.lists.cssClass.selected),s.removeAttribute("aria-selected"))))})),this.updateSelectTag()},t.prototype.updateSelectTag=function(){var e=this.getSelectTag(),t="";if(e.innerHTML="",this.value){for(var i=0,s=this.value.length;i<s;i++)t+='<option selected value="'+this.value[i]+'"></option>';e.innerHTML+=t}this.checkSelectAll()},t.prototype.updateToolBarState=function(){var e=this;if(this.toolbarSettings.items.length){var t=this.getScopedListBox(),i=this.list.parentElement.getElementsByClassName("e-listbox-tool")[0];this.toolbarSettings.items.forEach((function(s){var l=i.querySelector('[data-value="'+s+'"]');switch(s){case"moveAllTo":l.disabled=!e.ulElement.childElementCount;break;case"moveAllFrom":l.disabled=!t.ulElement.childElementCount;break;case"moveFrom":l.disabled=!t.value||!t.value.length;break;case"moveUp":l.disabled=!(e.value&&e.value.length&&!e.isSelected(e.ulElement.children[0]));break;case"moveDown":l.disabled=!(e.value&&e.value.length&&!e.isSelected(e.ulElement.children[e.ulElement.childElementCount-1]));break;default:l.disabled=!e.value||!e.value.length}}))}},t.prototype.setCheckboxPosition=function(){var e=this.list;this.initLoad||"Left"!==this.selectionSettings.checkboxPosition||e.classList.remove("e-right"),"Right"===this.selectionSettings.checkboxPosition&&e.classList.add("e-right")},t.prototype.showCheckbox=function(e){var t=0,i=this.list.lastElementChild.querySelectorAll("li"),s=this.list.lastElementChild.getElementsByClassName("e-list-item").length;if(e){if(this.ulElement=this.renderItems(this.listData,this.fields),this.mainList=this.ulElement,this.list.removeChild(this.list.getElementsByTagName("ul")[0]),this.list.appendChild(this.ulElement),this.selectionSettings.showSelectAll&&!this.list.getElementsByClassName("e-selectall-parent")[0]){var l=new sf.base.L10n(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=l.getConstant("selectAllText"),this.unSelectAllText=l.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{}),this.checkSelectAll()}}else{for(this.list.getElementsByClassName("e-selectall-parent")[0]&&this.list.removeChild(this.list.getElementsByClassName("e-selectall-parent")[0]);t<s;t++)i[t].classList.contains("e-list-item")&&i[t].removeChild(i[t].getElementsByClassName("e-checkbox-wrapper")[0]),i[t].hasAttribute("aria-selected")&&i[t].removeAttribute("aria-selected");this.mainList=this.ulElement}this.value=[]},t.prototype.isSelected=function(e){return!sf.base.isNullOrUndefined(e)&&(e.classList.contains(sf.lists.cssClass.selected)||null!==e.querySelector(".e-check"))},t.prototype.getSelectTag=function(){return this.list.getElementsByClassName("e-hidden-select")[0]},t.prototype.getToolElem=function(){return this.list.parentElement.getElementsByClassName("e-listbox-tool")[0]},t.prototype.formResetHandler=function(){this.value=this.initialSelectedOptions},t.prototype.getModuleName=function(){return"listbox"},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"listbox"},t.prototype.destroy=function(){this.itemTemplate&&sf.base.resetBlazorTemplate(this.element.id+"ItemTemplate","ItemTemplate"),this.unwireEvents(),"EJS-LISTBOX"===this.element.tagName?this.element.innerHTML="":(!sf.base.isBlazor()||sf.base.isBlazor()&&!this.isServerRendered)&&(this.element.style.display="inline-block",this.toolbarSettings.items.length&&(this.list.parentElement.parentElement.insertBefore(this.list,this.list.parentElement),sf.base.detach(this.list.nextElementSibling)),this.list.parentElement.insertBefore(this.element,this.list)),(!sf.base.isBlazor()||sf.base.isBlazor()&&!this.isServerRendered)&&e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(t,i){var s=this.toolbarSettings.items.length?this.list.parentElement:this.list;e.prototype.onPropertyChanged.call(this,t,i),this.setUpdateInitial(["fields","query","dataSource"],t);for(var l=0,a=Object.keys(t);l<a.length;l++){switch(a[l]){case"cssClass":i.cssClass&&sf.base.removeClass([s],i.cssClass.split(" ")),t.cssClass&&sf.base.addClass([s],t.cssClass.split(" "));break;case"enableRtl":t.enableRtl?s.classList.add("e-rtl"):s.classList.remove("e-rtl");break;case"value":sf.base.removeClass(this.list.querySelectorAll("."+sf.lists.cssClass.selected),sf.lists.cssClass.selected),this.clearSelection(this.value),this.setSelection();break;case"height":this.setHeight();break;case"enabled":this.setEnable();break;case"allowDragAndDrop":t.allowDragAndDrop?this.initDraggable():sf.base.getComponent(this.ulElement,"sortable").destroy();break;case"allowFiltering":this.allowFiltering?this.setFiltering():(this.list.removeChild(this.list.getElementsByClassName("e-filter-parent")[0]),this.filterParent=null,sf.base.removeClass([this.list],"e-filter-list"));break;case"filterBarPlaceholder":this.allowFiltering&&this.filterInput&&sf.inputs.Input.setPlaceholder(t.filterBarPlaceholder,this.filterInput);break;case"scope":this.allowDragAndDrop&&(sf.base.getComponent(this.ulElement,"sortable").scope=t.scope),this.toolbarSettings.items.length&&(i.scope&&(sf.base.getComponent(document.querySelector(i.scope),this.getModuleName()).tBListBox=null),t.scope&&(sf.base.getComponent(document.querySelector(t.scope),this.getModuleName()).tBListBox=this));break;case"toolbarSettings":var o=void 0,n=t.toolbarSettings.position,r=this.getToolElem();n&&(sf.base.removeClass([s],["e-right","e-left"]),s.classList.add("e-"+n.toLowerCase()),"Left"===n?s.insertBefore(r,this.list):s.appendChild(r)),t.toolbarSettings.items&&(i.toolbarSettings.items.length&&((o=this.list.parentElement).parentElement.insertBefore(this.list,o),sf.base.detach(o)),this.initToolbarAndStyles(),this.wireToolbarEvent());break;case"selectionSettings":var h=t.selectionSettings.showSelectAll,p=t.selectionSettings.showCheckbox;if(!sf.base.isNullOrUndefined(h)){if(this.showSelectAll=h,this.showSelectAll){var u=new sf.base.L10n(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.checkBoxSelectionModule.checkAllParent=null,this.showSelectAll=!0,this.selectAllText=u.getConstant("selectAllText"),this.unSelectAllText=u.getConstant("selectAllText"),this.popupWrapper=this.list}this.notify("selectAll",{}),this.checkSelectAll()}sf.base.isNullOrUndefined(p)||this.showCheckbox(p),this.selectionSettings.showCheckbox&&this.setCheckboxPosition();break;case"dataSource":this.jsonData=[].slice.call(this.dataSource)}}},ie([sf.base.Property("")],t.prototype,"cssClass",void 0),ie([sf.base.Property([])],t.prototype,"value",void 0),ie([sf.base.Property("")],t.prototype,"height",void 0),ie([sf.base.Property(!1)],t.prototype,"allowDragAndDrop",void 0),ie([sf.base.Property(1e3)],t.prototype,"maximumSelectionLength",void 0),ie([sf.base.Property(!1)],t.prototype,"allowFiltering",void 0),ie([sf.base.Property("")],t.prototype,"scope",void 0),ie([sf.base.Property(!0)],t.prototype,"ignoreCase",void 0),ie([sf.base.Property(null)],t.prototype,"filterBarPlaceholder",void 0),ie([sf.base.Event()],t.prototype,"beforeItemRender",void 0),ie([sf.base.Event()],t.prototype,"filtering",void 0),ie([sf.base.Event()],t.prototype,"select",void 0),ie([sf.base.Event()],t.prototype,"change",void 0),ie([sf.base.Event()],t.prototype,"beforeDrop",void 0),ie([sf.base.Event()],t.prototype,"dragStart",void 0),ie([sf.base.Event()],t.prototype,"drag",void 0),ie([sf.base.Event()],t.prototype,"drop",void 0),ie([sf.base.Event()],t.prototype,"dataBound",void 0),ie([sf.base.Property(null)],t.prototype,"groupTemplate",void 0),ie([sf.base.Property("No Records Found")],t.prototype,"noRecordsTemplate",void 0),ie([sf.base.Property("The Request Failed")],t.prototype,"actionFailureTemplate",void 0),ie([sf.base.Property(1e3)],t.prototype,"zIndex",void 0),ie([sf.base.Property(!1)],t.prototype,"ignoreAccent",void 0),ie([sf.base.Complex({},le)],t.prototype,"toolbarSettings",void 0),ie([sf.base.Complex({},se)],t.prototype,"selectionSettings",void 0),t=i=ie([sf.base.NotifyPropertyChanges],t)}(v),oe={backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",clearIcon:"e-clear-icon"};return Z.Inject(ee),ae.Inject(ee),e.incrementalSearch=a,e.Search=o,e.highlightSearch=n,e.revertHighlightSearch=function(e){for(var t=e.querySelectorAll(".e-highlight"),i=t.length-1;i>=0;i--){var s=t[i].parentNode,l=document.createTextNode(t[i].textContent);s.replaceChild(l,t[i])}},e.FieldSettings=f,e.dropDownBaseClasses=m,e.DropDownBase=v,e.dropDownListClasses=g,e.DropDownList=E,e.Fields=T,e.TreeSettings=L,e.DropDownTree=P,e.ComboBox=W,e.AutoComplete=j,e.MultiSelect=Z,e.CheckBoxSelection=ee,e.SelectionSettings=se,e.ToolbarSettings=le,e.ListBox=ae,e},sfBlazor.loadDependencies(sfBlazor.dependencyJson.dropdowns,(function(){sf.dropdowns=sf.dropdowns({})}))}}]);