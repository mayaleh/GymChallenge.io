(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"./bundles/maps.js":function(e,t,i){"use strict";i.r(t);var a=i("../node_modules/@babel/runtime/helpers/typeof.js"),o=i.n(a);window.sf=window.sf||{},window.sf.maps=function(e){var t,i=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}),a=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]])}return i},n=function(e,t){this.width=e,this.height=t};function s(e,t){return null!=e?-1!==e.indexOf("%")?t/100*parseInt(e,10):parseInt(e,10):null}function l(e){var t=e.element.clientWidth,i=e.element.clientHeight,a=(e.element.parentElement.clientHeight,e.element.parentElement.clientWidth,s(e.element.style.width,t)),o=s(e.element.style.height,t);e.availableSize=new n(s(e.width,t)||t||a||600,s(e.height,i)||i||o||(e.isDevice?Math.min(window.innerWidth,window.innerHeight):450))}function r(e){e.renderer=new sf.svgbase.SvgRenderer(e.element.id),l(e),e.svgObject=e.renderer.createSvg({id:e.element.id+"_svg",width:e.availableSize.width,height:e.availableSize.height})}function d(e,t,i){var a=i.getBoundingClientRect(),o=i.ownerDocument.defaultView.pageXOffset,n=i.ownerDocument.defaultView.pageYOffset,s=i.ownerDocument.documentElement.clientTop,l=i.ownerDocument.documentElement.clientLeft,r=a.left+o-l,d=a.top+n-s;return new A(e-r,t-d)}function p(e){return e*(Math.PI/180)}function h(e){return e*(180/Math.PI)}function c(e,t,i,a,o){var s,l,r,d,c,m,y=new n(o.mapAreaRect.width,o.mapAreaRect.height),v=o.baseMapBounds.longitude,S=o.baseMapBounds.latitude,_=p(e),M=p(t),C=o.projectionType,L=o.isTileMap?256*Math.pow(2,1):sf.base.isNullOrUndefined(i)?Math.min(y.width,y.height):Math.min(y.width,y.height)*i;if("Normal"===a.geometryType)s=sf.base.isNullOrUndefined(i)?t:Math.abs((t-v.min)*i),l=sf.base.isNullOrUndefined(i)?e:Math.abs((S.max-e)*i);else if("Geographic"===a.geometryType){switch(C){case"Mercator":var w=new O(L/2,L/2);s=w.x+t*(L/360);var P=x(Math.sin(p(e)),-.9999,.9999);l=w.y+.5*Math.log((1+P)/(1-P))*(-L/(2*Math.PI));break;case"Winkel3":c=((r=f(M,_)).x+M/(Math.PI/2))/2,d=(r.y+_)/2;break;case"Miller":c=M,d=1.25*Math.log(Math.tan(Math.PI/4+.4*_));break;case"Eckert3":c=2/(m=Math.sqrt(Math.PI*(4+Math.PI)))*M*(1+Math.sqrt(1-4*_*_/(Math.PI*Math.PI))),d=4/m*_;break;case"AitOff":c=(r=f(M,_)).x,d=r.y;break;case"Eckert5":c=M*(1+Math.cos(_))/Math.sqrt(2+Math.PI),d=2*_/Math.sqrt(2+Math.PI);break;case"Equirectangular":c=M,d=_;break;case"Eckert6":m=(1+Math.PI/2)*Math.sin(_);for(var I=1/0,T=0;T<10&&Math.abs(I)>1e-6;T++)_-=I=(_+Math.sin(_)-m)/(1+Math.cos(_));m=Math.sqrt(2+Math.PI),c=M*(1+Math.cos(_))/m,d=2*_/m}s="Mercator"===C?s:b(u(o,h(c)),3),l="Mercator"===C?l:-b(g(o,h(d)),3)}return new O(s,l)}function m(e,t,i,a){var o=256*Math.pow(2,t),n=(e.x+180)/360,s=Math.sin(e.y*Math.PI/180),l=.5-Math.log((1+s)/(1-s))/(4*Math.PI),r=e.x,d=e.y;return a&&(r=n*o+.5+i.x,d=l*o+.5+i.y),{x:r,y:d}}function u(e,t){var i=e.baseMapBounds.longitude,a=sf.base.isNullOrUndefined(e.baseSize)?e.mapAreaRect.width:e.mapAreaRect.width+Math.abs(e.baseSize.width-e.mapAreaRect.width)/2;return Math.round(a*(t-i.min)/(i.max-i.min)*100)/100}function g(e,t){var i=e.baseMapBounds.latitude;return Math.round(e.mapAreaRect.height*(t-i.min)/(i.max-i.min)*100)/100}function f(e,t){var i=Math.cos(t),a=y(v(i*Math.cos(e/=2)));return new O(2*i*Math.sin(e)*a,Math.sin(t)*a)}function b(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i}function y(e){return e/Math.sin(e)}function v(e){return Math.acos(e)}function x(e,t,i){return sf.base.isNullOrUndefined(t)||(e=Math.max(e,t)),sf.base.isNullOrUndefined(i)||(e=Math.min(e,i)),e}function S(e,t,i,a){sf.base.createElement("a",{attrs:{download:e+"."+t.toLocaleLowerCase(),href:i}}).dispatchEvent(new MouseEvent(a?"click":"move",{view:window,bubbles:!1,cancelable:!0}))}var O=function(e,t){this.x=e,this.y=t},_=function(e,t){this.min=e,this.max=t},M=function(e,t){this.latitude=new _(e.min,e.max),this.longitude=new _(t.min,t.max)};function C(e,t){var i=document.getElementById("mapsmeasuretext");return null===i&&(i=sf.base.createElement("text",{id:"mapsmeasuretext"}),document.body.appendChild(i)),i.innerHTML=e,i.style.position="absolute",i.style.fontSize=t.size,i.style.fontWeight=t.fontWeight,i.style.fontStyle=t.fontStyle,i.style.fontFamily=t.fontFamily,i.style.visibility="hidden",i.style.top="-100",i.style.left="0",i.style.whiteSpace="nowrap",i.style.lineHeight="normal",new n(i.clientWidth,i.clientHeight)}var L=function(e,t,i,a,o,n,s){void 0===n&&(n=""),this.transform="",this.baseLine="auto",this.id=e,this.text=o,this.transform=n,this.anchor=a,this.x=t,this.y=i,this.baseLine=s},w=function(e,t,i,a,o,n,s){this.id=e,this.opacity=o,this.fill=t,this.stroke=a,this["stroke-width"]=i,this["stroke-dasharray"]=n,this.d=s},P=function(e,t,i){this.r=e,this.g=t,this.b=i},I=function(e){function t(t,i,a,o,n,s,l,r,d){var p=e.call(this,t,i,a.width,a.color,o,d)||this;return p.y=n.y,p.x=n.x,p.height=n.height,p.width=n.width,p.rx=s||0,p.ry=l||0,p.transform=r||"",p["stroke-dasharray"]=d,p}return i(t,e),t}(w),T=function(e){function t(t,i,a,o,n,s,l,r){var d=e.call(this,t,i,a.width,a.color,o)||this;return d.cy=s,d.cx=n,d.r=l,d["stroke-dasharray"]=r,d}return i(t,e),t}(w),k=function(e){function t(t,i,a,o,n,s,l){void 0===s&&(s=1),void 0===l&&(l="");var r=e.call(this,t,a,o,n,s,l)||this;return r.points=i,r}return i(t,e),t}(w),N=function(e){function t(t,i,a,o,n,s,l){return void 0===s&&(s=1),void 0===l&&(l=""),e.call(this,t,i,a,o,n,s,l)||this}return i(t,e),t}(k),E=function(e){function t(t,i,a,o,n,s,l){void 0===s&&(s=1),void 0===l&&(l="");var r=e.call(this,t,a,o,n,s,l)||this;return r.x1=i.x1,r.y1=i.y1,r.x2=i.x2,r.y2=i.y2,r}return i(t,e),t}(w),z=function(e,t,i,a){this.x1=e,this.y1=t,this.x2=i,this.y2=a},A=function(e,t){this.x=e,this.y=t},j=function(e,t,i,a){this.x=e,this.y=t,this.width=i,this.height=a},B=function(e,t,i,a,o,n,s,l,r){void 0===n&&(n="userSpaceOnUse"),void 0===s&&(s="userSpaceOnUse"),void 0===l&&(l=""),void 0===r&&(r=""),this.id=e,this.x=t,this.y=i,this.width=a,this.height=o,this.patternUnits=n,this.patternContentUnits=s,this.patternTransform=l,this.href=r};function F(e,t,i,a,o){void 0===o&&(o=!1);var n,s,l={id:e.id,x:e.x,y:e.y,fill:i,"font-size":t.size,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-weight":t.fontWeight,"text-anchor":e.anchor,transform:e.transform,opacity:t.opacity,"dominant-baseline":e.baseLine},r="string"==typeof e.text?e.text:o?e.text[e.text.length-1]:e.text[0],d=new sf.svgbase.SvgRenderer(""),p=d.createText(l,r);if(p.style["user-select"]="none",p.style["-moz-user-select"]="none",p.style["-webkit-touch-callout"]="none",p.style["-webkit-user-select"]="none",p.style["-khtml-user-select"]="none",p.style["-ms-user-select"]="none",p.style["-o-user-select"]="none","string"!=typeof e.text&&e.text.length>1)for(var h=1,c=e.text.length;h<c;h++)s=C(e.text[h],t).height,n=d.createTSpan({x:e.x,id:e.id,y:e.y+(o?-h*s:h*s)},o?e.text[e.text.length-(h+1)]:e.text[h]),p.appendChild(n);return a.appendChild(p),p}function R(e,t,i,a,n){for(var s=sf.base.createElement("div",{id:t,styles:"position: absolute;pointer-events: auto;"}),l=e.length;l>0;)s.appendChild(e[0]),l--;for(var r=s.innerHTML,d=Object.keys(i),p=0;p<d.length;p++)"object"===o()(i[d[p]])?r=Z(r,"",i,n):"latitude"!==d[p].toLowerCase()&&"longitude"!==d[p].toLowerCase()&&(r=r.replace(new RegExp("{{:"+d[p]+"}}","g"),i[d[p].toString()]));return s.innerHTML=r,s}function U(e,t){return t.format&&!isNaN(Number(e))?t.intl.getNumberFormat({format:t.format,useGrouping:t.useGroupingSeparator})(Number(e)):e}function Z(e,t,i,a){for(var o=""===e?t:e,n=""===e?o.split("${"):o.split("{{:"),s=0;s<n.length;s++)if(n[s].indexOf("}}")>-1&&n[s].indexOf(".")>-1||n[s].indexOf("}")>-1&&n[s].search(".")>-1)for(var l=""===e?n[s].split("}"):n[s].split("}}"),r=0;r<l.length;r++)if(l[r].indexOf(".")>-1){var d=V(i,l[r]).toString();o=""===e?o.split("${"+l[r]+"}").join(U(d,a)):o.replace(new RegExp("{{:"+l[r]+"}}","g"),d)}return o}function D(e,t,i,a,o){for(var n=(sf.base.isNullOrUndefined(e.childElementCount)?e[0]:e).outerHTML,s=Object.keys(i),l=0;l<s.length;l++)n=n.replace(new RegExp("{{:"+s[l]+"}}","g"),i[s[l].toString()]);return sf.base.createElement("div",{id:t,innerHTML:n,styles:"position: absolute"})}function H(e,t,i,a,o,n,s){var l,r,d,p,h,c,m=o.size,u=o.borderColor,g=parseFloat(o.borderWidth),f=o.fill,b=o.dashArray,y={color:u,width:g},v=o.opacity;if(h=new w(a,f,g,u,v,b,""),"Circle"===e){var x=(m.width+m.height)/4;p=new T(a,f,y,v,i.x,i.y,x,b),l=s.renderer.drawCircle(p)}else"Rectangle"===e?(r=i.x-m.width/2,d=i.y-m.height/2,c=new I(a,f,y,v,new j(r,d,m.width,m.height),null,null,"",b),l=s.renderer.drawRectangle(c)):"Image"===e?(r=i.x-m.width/2,d=i.y-m.height,sf.base.merge(h,{href:t,height:m.height,width:m.width,x:r,y:d}),l=s.renderer.drawImage(h)):l=ae(s,e,h,m,i,n);return l}function V(e,t){if(!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(t)){var i=t.replace(/\[/g,".").replace(/\]/g,"").split(".");if(1===i.length)e=e[i[0]];else for(var a=0;a<i.length&&!sf.base.isNullOrUndefined(e);a++)e=e[i[a]]}return e}function G(e,t){var i=sf.base.isNullOrUndefined(e.colorValuePath)?t[e.colorValuePath]:e.colorValuePath.indexOf(".")>-1?V(t,e.colorValuePath).toString():t[e.colorValuePath];return e.fill=sf.base.isNullOrUndefined(e.colorValuePath)||sf.base.isNullOrUndefined(i)?e.fill:e.colorValuePath.indexOf(".")>-1?V(t,e.colorValuePath).toString():t[e.colorValuePath],e}function W(e,t){if(sf.base.isNullOrUndefined(e.shapeValuePath)||sf.base.isNullOrUndefined(t[e.shapeValuePath])){var i=sf.base.isNullOrUndefined(e.shapeValuePath)?e.shape:e.shapeValuePath.indexOf(".")>-1?V(t,e.shapeValuePath).toString():e.shape;e.shape=i;var a=sf.base.isNullOrUndefined(e.imageUrlValuePath)?e.imageUrl:e.imageUrlValuePath.indexOf(".")>-1?V(t,e.imageUrlValuePath).toString():e.imageUrl;e.imageUrl=a}else{var o=e.shapeValuePath.indexOf(".")>-1?V(t,e.shapeValuePath).toString():t[e.shapeValuePath];e.shape=o,"Image"==t[e.shapeValuePath]&&(e.imageUrl=sf.base.isNullOrUndefined(e.imageUrlValuePath)||sf.base.isNullOrUndefined(t[e.imageUrlValuePath])?e.imageUrl:e.imageUrlValuePath.indexOf(".")>-1?V(t,e.imageUrlValuePath).toString():t[e.imageUrlValuePath])}return e}function q(e,t,i,o,s,l,r,d){var p,h,c,m,u,g,f,b=[],y=[],v=0,x=0,S=e.markerClusterSettings.labelStyle,O=0,_=[],M=e.markerClusterSettings,C=i.renderer.createGroup({id:i.element.id+"_LayerIndex_"+o+"_markerCluster"}),w={cancel:!1,name:Ut,fill:M.fill,height:M.height,width:M.width,imageUrl:M.imageUrl,shape:M.shape,data:void 0,maps:i,cluster:M,border:M.border};if(sf.base.isBlazor()){w.data,w.maps,w.cluster;var P=a(w,["data","maps","cluster"]);w=P}i.trigger("markerClusterRendering",w,(function(a){for(var M=0;M<t.childElementCount;M++)if(_=[],"hidden"!==t.childNodes[M].style.visibility){if(f=t.childNodes[M],p=f.getBoundingClientRect(),_.push(M),!sf.base.isNullOrUndefined(p)){for(var P=M+1;P<t.childElementCount;P++)"hidden"!==t.childNodes[P].style.visibility&&(f=t.childNodes[P],h=f.getBoundingClientRect(),sf.base.isNullOrUndefined(h)||p.left>h.right||p.right<h.left||p.top>h.bottom||p.bottom<h.top||(b.push(h),t.childNodes[P].style.visibility="hidden",_.push(P)));if(v=p.left+p.width/2,x=p.top+p.height,b.length>0){_=_.filter((function(e,t,i){return i.indexOf(e)===t}));var I=i.element.getBoundingClientRect();v-=I.left,x-=I.top;var T=i.isTileMap?new Object:ge(i,e,!1),k=i.isTileMap?{x:0,y:0}:0!==i.translatePoint.x?i.translatePoint:T.location,N=parseInt(t.childNodes[M].id.split("_dataIndex_")[1].split("_")[0],10),E=parseInt(t.childNodes[M].id.split("_MarkerIndex_")[1].split("_")[0],10);t.childNodes[M].style.visibility="hidden";var z=e.markerClusterSettings;w.cancel?((g={size:new n(z.width,z.height),fill:z.fill,borderColor:z.border.color,borderWidth:z.border.width,opacity:z.opacity,dashArray:z.dashArray}).fill=z.fill,g.size.width=z.width,g.size.height=z.height,g.imageUrl=z.imageUrl,g.shape=z.shape,g.borderColor=z.border.color,g.borderWidth=z.border.width):((g={size:new n(z.width,z.height),fill:z.fill,borderColor:z.border.color,borderWidth:z.border.width,opacity:z.opacity,dashArray:z.dashArray}).fill=w.fill,g.size.width=w.width,g.size.height=w.height,g.imageUrl=w.imageUrl,g.shape=w.shape,g.borderColor=w.border.color,g.borderWidth=w.border.width),v=i.isTileMap||t.id.indexOf("_Markers_Group")>-1?v:(v+k.x)*i.mapScaleValue,x=i.isTileMap||t.id.indexOf("_Markers_Group")>-1?x:(x+k.y)*i.mapScaleValue;var A=i.element.id+"_LayerIndex_"+o+"_MarkerIndex_"+E+"_dataIndex_"+N+"_cluster_"+O,j=i.element.id+"_LayerIndex_"+o+"_MarkerIndex_"+E+"_dataIndex_"+N+"_cluster_"+O+"_datalabel_"+O;O++;var B="Image"===g.shape?g.size.height/2:0,R=H(g.shape,g.imageUrl,{x:0,y:B},A,g,s,i);R.setAttribute("transform","translate( "+v+" "+x+" )"),"Balloon"===w.shape?R.children[0].innerHTML=_.toString():R.innerHTML=_.toString(),c=new L(j,0,3.75,"middle",(b.length+1).toString(),"",""),(m=F(c,S,S.color,s)).setAttribute("transform","translate( "+v+" "+x+" )"),C.appendChild(m),C.appendChild(R)}}b=[]}l.appendChild(C),i.svgObject.appendChild(l),i.element.appendChild(i.svgObject);for(var U=0;U<C.childElementCount;U++)if("hidden"!==C.childNodes[U].style.visibility&&(f=C.childNodes[U],p=f.getBoundingClientRect(),!(sf.base.isNullOrUndefined(p)||f.id.indexOf("_datalabel_")>-1))){for(var Z=U+1;Z<C.childElementCount;Z++)"hidden"!==C.childNodes[Z].style.visibility&&(u=C.childNodes[Z],h=u.getBoundingClientRect(),sf.base.isNullOrUndefined(h)||u.id.indexOf("_datalabel_")>-1||p.left>h.right||p.right<h.left||p.top>h.bottom||p.bottom<h.top||(y.push(u),y.push(C.childNodes[Z-1]),C.childNodes[Z].style.visibility="hidden",C.childNodes[Z-1].style.visibility="hidden",_.push(Z)));if(y.length>0){f=C.childNodes[U];for(var D=0;D<y.length;D++)"g"===f.tagName?f.childNodes[0].textContent=f.childNodes[0].textContent+","+y[D].textContent:f.textContent=f.textContent+","+y[D].textContent,C.childNodes[U-1].textContent=(+C.childNodes[U-1].textContent+ +y[D+1].textContent).toString(),D++}y=[]}for(;0<C.childNodes.length;)s.insertBefore(C.childNodes[0],s.firstChild);r||ye(i.element.id+"_Secondary_Element").appendChild(s),l.appendChild(s),document.getElementById(i.element.id+"_LayerIndex_0_markerCluster").remove(),d&&document.getElementById(i.element.id+"_Layer_Collections").appendChild(l)}))}function X(e,t,i){var a=e[0].layerIndex,o=e[0].targetClusterIndex,n=e[0].markerIndex,s=e[0].dataIndex,l=t.element.id+"_LayerIndex_"+a+"_MarkerIndex_"+n,r=l+"_dataIndex_"+s+"_cluster_"+o,d=Se(r),p=Se(r+"_datalabel_"+o);d.setAttribute("visibility","visible"),p.setAttribute("visibility","visible");for(var h=e[0].data.length,c=0;c<h;c++)Se(l+"_dataIndex_"+e[0].data[c].index).style.visibility="hidden";me(t.element.id+"_LayerIndex_"+a+"_MarkerIndex_"+n+"_markerClusterConnectorLine")}function Y(e,t,i,a){var o=e[0].layerIndex,n=e[0].markerIndex,s=e[0].targetClusterIndex,l=e[0].dataIndex,r=a?Se:i.querySelector.bind(i),d=a?"":"#",p=t.element.id+"_LayerIndex_"+o+"_MarkerIndex_"+n,h=p+"_dataIndex_"+l+"_cluster_"+s,c=r(d+""+h),m=r(d+""+h+"_datalabel_"+s);c.setAttribute("visibility","hidden"),m.setAttribute("visibility","hidden");var u=t.layers[o].markerSettings[n],g=r(d+""+p+"_dataIndex_"+l),f=u.height,b=u.width,y=+c.getAttribute("transform").split("translate(")[1].trim().split(" ")[0],v=+c.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim(),x=b+5,S=6.28*x,O=0,_=Math.round(S/b);O+=_;for(var M,C=e[0].data.length,L=Math.round(f/S*100),w=(L=C<_?100/C:L)/100*360,P=C<_?45:0,I=1,T="M "+y+" "+v+" ",k="",N=0;N<C;N++){if(O===N||Math.round(P)>=360){for(P=0,S=6.28*(x=(b+5)*++I),_=Math.round(S/f),L=Math.round(f/S*100);L*_<100;)_++;w=L/100*360,O+=_}var E=y+x*Math.sin(2*Math.PI*P/360),z=v+x*Math.cos(2*Math.PI*P/360);k+=T+"L "+E+" "+z+" ",(g=r(d+""+p+"_dataIndex_"+e[0].data[N].index)).setAttribute("transform","translate( "+E+" "+z+")"),g.style.visibility="visible",P+=w}var A=t.layers[o].markerClusterSettings.connectorLineSettings;M={d:k,id:t.element.id+"_LayerIndex_"+o+"_MarkerIndex_"+n+"_dataIndex_"+l+"_markerClusterConnectorLine",stroke:A.color,opacity:A.opacity,"stroke-width":A.width},i=a?r(t.element.id+"_Markers_Group"):i;var j=t.renderer.createGroup({id:t.element.id+"_LayerIndex_"+o+"_MarkerIndex_"+n+"_markerClusterConnectorLine"});j.appendChild(t.renderer.drawPath(M)),i.insertBefore(j,i.querySelector("#"+p+"_dataIndex_0"))}function J(e,t,i,a,o,s,l,r,d,p,h){var c={size:new n(e.width,e.height),fill:e.fill,borderColor:e.border.color,borderWidth:e.border.width,opacity:t.opacity,dashArray:t.dashArray},m=H(e.shape,e.imageUrl,{x:0,y:0},l,c,h,p),u=(p.isTileMap?o.x:(o.x+s.x)*d)+r.x,g=(p.isTileMap?o.y:(o.y+s.y)*d)+r.y;m.setAttribute("transform","translate( "+u+" "+g+" )"),Q(p.selectedMarkerElementId,p.markerSelectionClass,m,"MarkerselectionMapStyle"),h.appendChild(m);var f=i.length-1===a?"marker":null,b=new O(u,g);return t.animationDuration>0&&ke(m,t.animationDelay,t.animationDuration,b,p,f),h}function K(e,t,i,a,o,n,s,l,r,d){if((t=xe(e.template))&&(d.isBlazor||t(a,null,null,d.element.id+"_MarkerTemplate"+o,!1).length)){for(var p=R(t(a,null,null,d.element.id+"_MarkerTemplate"+o,!1),i,a,0,d),h=0;h<p.children.length;h++)p.children[h].style.pointerEvents="none";if(p.style.left=(d.isTileMap?s.x:Math.abs(d.baseMapRectBounds.min.x-s.x)*l)+r.x+"px",p.style.top=(d.isTileMap?s.y:Math.abs(d.baseMapRectBounds.min.y-s.y)*l)+r.y+"px",n.appendChild(p),"GoogleStaticMap"===d.layers[d.baseLayerIndex].layerType){var c=ye(d.element.id+"_StaticGoogleMap").getBoundingClientRect(),m=p.getBoundingClientRect();(c.x>m.x||c.x+640<m.x+m.width)&&(c.y>m.y||c.y+c.height<m.y+m.height)&&(p.style.display="none")}}return n}function Q(e,t,i,a){if(e)for(var o=0;o<e.length;o++)i.getAttribute("id")===e[o]&&((sf.base.isNullOrUndefined(Se(t.id))||0===o)&&(document.body.appendChild(t),i.id.indexOf("_MarkerIndex_")>-1&&i.childElementCount>0&&i.children[0].setAttribute("class",a)),i.setAttribute("class",a))}function $(e,t,i,a,o,n,s){if(!Se(e)){var l;l=sf.base.createElement("style",{id:e,innerHTML:"."+t+"{fill:"+i+";opacity:"+a+";stroke-width:"+n+";stroke:"+o+";}"}),s.shapeSelectionClass=l,document.body.appendChild(l)}}function ee(e,t){return t&&t.appendChild(e),e}function te(e,t,i){return ee(e.renderer.drawCircle(t),i)}function ie(e,t,i){return ee(e.renderer.drawRectangle(t),i)}function ae(e,t,i,a,o,n){var s;switch(t){case"Balloon":s=oe(e,i,a,o,n);break;case"Cross":i.d="M "+o.x+" "+(o.y-a.height/2)+" L "+o.x+" "+(o.y+a.height/2)+" M "+(o.x-a.width/2)+" "+o.y+" L "+(o.x+a.width/2)+" "+o.y;break;case"Diamond":i.d="M "+o.x+" "+(o.y-a.height/2)+" L "+(o.x+a.width/2)+" "+o.y+" L "+o.x+" "+(o.y+a.height/2)+" L "+(o.x-a.width/2)+" "+o.y+" Z";break;case"Star":i.d="M "+(o.x+a.width/3)+" "+(o.y-a.height/2)+" L "+(o.x-a.width/2)+" "+(o.y+a.height/6)+" L "+(o.x+a.width/2)+" "+(o.y+a.height/6)+" L "+(o.x-a.width/3)+" "+(o.y-a.height/2)+" L "+o.x+" "+(o.y+a.height/2)+" L "+(o.x+a.width/3)+" "+(o.y-a.height/2)+" Z";break;case"Triangle":i.d="M "+o.x+" "+(o.y-a.height/2)+" L "+(o.x+a.width/2)+" "+(o.y+a.height/2)+" L "+(o.x-a.width/2)+" "+(o.y+a.height/2)+" Z";break;case"HorizontalLine":i.d=" M "+(o.x-a.width/2)+" "+o.y+" L "+(o.x+a.width/2)+" "+o.y;break;case"VerticalLine":i.d="M "+o.x+" "+(o.y-a.height/2)+" L "+o.x+" "+(o.y+a.height/2);break;case"InvertedTriangle":i.d="M "+(o.x-a.width/2)+" "+(o.y-a.height/2)+" L "+(o.x+a.width/2)+" "+(o.y-a.height/2)+" L "+o.x+" "+(o.y+a.height/2)+" Z";break;case"Pentagon":for(var l=void 0,r=void 0,d=0;d<5;d++)l=a.width/2*Math.cos(Math.PI/180*(72*d)),r=a.height/2*Math.sin(Math.PI/180*(72*d)),i.d+=(0==d?"M ":"L ")+(o.x+l)+" "+(o.y+r);i.d+=" Z"}return"Cross"!==t&&"HorizontalLine"!==t&&"VerticalLine"!==t||(i.stroke="transparent"===i.stroke?i.fill:i.stroke),"Balloon"===t?s:e.renderer.drawPath(i)}function oe(e,t,i,a,o){var n=i.width,s=i.height;a.x-=n/2,a.y-=s,t.d="M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z";var l=e.renderer.drawPath(t),r=i.width/30,d=i.height/30;l.setAttribute("transform","translate("+a.x+", "+a.y+") scale("+r+", "+d+")");var p=e.renderer.createGroup({id:t.id});return ee(l,p),ee(p,o)}function ne(e,t,i,a,o){if(!sf.base.isNullOrUndefined(t))for(var n=0;n<e.length;n++){var s=i.indexOf(".")>-1?V(e[n],i):e[n][i],l=se(s,a,t);if((!sf.base.isNullOrUndefined(s)&&isNaN(t[l])?s.toLowerCase():s)===(!sf.base.isNullOrUndefined(t[l])&&isNaN(t[l])?t[l].toLowerCase():t[l]))return n}return null}function se(e,t,i){if(!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(t))for(var a="[object Array]"===Object.prototype.toString.call(t)?t:[t],o=0;o<a.length;o++){if((sf.base.isNullOrUndefined(e)?e:e.toLowerCase())===(!sf.base.isNullOrUndefined(i[a[o]])&&isNaN(i[a[o]])?i[a[o]].toLowerCase():i[a[o]]))return a[o]}return null}function le(e,t,i){for(var a=[],o=0;o<e.length;o++){var n=e[o];t<=n.y&&i>=n.y&&a.push(n)}return a}function re(e,t,i,a,o){var n=(t-e)/100*(100/(o-a)*(i-a))+e;return o===a&&(n=(t-e)/100+e),n}function de(e,t){if(!e.length)return null;for(var i,a,o,n,s=e.length,l=0,r=0,d=0,p=0;p<=s-1;p++)i=e[p].x,a="Mercator"===t?e[p].y:-e[p].y,p===s-1?(o=e[0].x,n="Mercator"===t?e[0].y:-e[0].y):(o=e[p+1].x,n="Mercator"===t?e[p+1].y:-e[p+1].y),l+=Math.abs(i*n-o*a),r+=Math.abs((i+o)*(i*n-o*a)),d+=Math.abs((a+n)*(i*n-o*a));r*=1/(4*(l*=.5)),d*=1/(4*l);var h={x:0,y:0},c={x:0,y:0},m={x:0,y:0},u={x:0,y:0},g={x:0,y:0},f={x:0,y:0},b={x:0,y:0},y={x:0,y:0},v=0;for(p=0;p<=s-1;p++){var x=e[p];x.y="Mercator"===t?x.y:-x.y,x.y>d?x.x<r&&r-x.x<r-g.x?g={x:x.x,y:x.y}:x.x>r&&(0===f.x||x.x-r<f.x-r)&&(f={x:x.x,y:x.y}):x.x<r&&r-x.x<r-b.x?b={x:x.x,y:x.y}:x.x>r&&(0===y.x||x.x-r<y.x-r)&&(y={x:x.x,y:x.y}),v=f.y-y.y+(f.y-y.y)/4,x.x>r?x.y<d&&d-x.y<d-h.y?h={x:x.x,y:x.y}:x.y>d&&(0===c.y||x.y-d<c.y-d)&&(c={x:x.x,y:x.y}):x.y<d&&d-x.y<d-m.y?m={x:x.x,y:x.y}:x.y>d&&(0===u.y||x.y-d<u.y-d)&&(u={x:x.x,y:x.y})}return{x:r,y:d,rightMin:h,rightMax:c,leftMin:m,leftMax:u,points:e,topMax:y,topMin:b,bottomMax:f,bottomMin:g,height:v}}function pe(e){var t=!1;return"[object Array]"===Object.prototype.toString.call(e)&&Array.prototype.forEach.call(e,(function(e,i){sf.base.isNullOrUndefined(e.geometry)||"Path"!==e.geometry.type||(t=!0)})),t}function he(e,t,i){var a=t,o=C(t,i).width;if(o>e)for(var n=t.length-1;n>=0;--n)if((o=C(a=t.substring(0,n)+"...",i).width)<=e||a.length<4)return a.length<4&&(a=" "),a;return a}function ce(e,t,i,a){var o,n;switch(t){case"Near":o=e.x;break;case"Center":o="title"===a?e.width/2-i.width/2:e.x+e.width/2-i.width/2;break;case"Far":o="title"===a?e.width-e.y-i.width:e.x+e.width-i.width}return n="title"===a?e.y+i.height/2:e.y+e.height/2+i.height/2,new O(o,n)}function me(e){var t=document.getElementById(e);return t?sf.base.remove(t):null}function ue(e,t){var i=c(e.minLatOfGivenLocation,e.minLongOfGivenLocation,e.mapLayerPanel.calculateFactor(t),t,e),a=c(e.maxLatOfGivenLocation,e.maxLongOfGivenLocation,e.mapLayerPanel.calculateFactor(t),t,e),o=(i.x+a.x)/2,n=(i.y+a.y)/2;return new O(o,n)}function ge(e,t,i){var a,o=e.zoomSettings.zoomFactor,n=e.centerPosition,s=n.latitude,l=n.longitude,r=!sf.base.isNullOrUndefined(e.centerLatOfGivenLocation)&&!sf.base.isNullOrUndefined(e.centerLongOfGivenLocation)&&e.zoomNotApplied;sf.base.isNullOrUndefined(e.mapScaleValue)&&(e.mapScaleValue=o),e.zoomSettings.shouldZoomInitially&&e.zoomSettings.enable&&(e.mapScaleValue=a=o=(e.zoomSettings.shouldZoomInitially||e.enablePersistence)&&1==e.scale?e.scale:sf.base.isNullOrUndefined(e.markerZoomFactor)?1:e.markerZoomFactor,e.mapScaleValue===e.markerZoomFactor||e.enablePersistence||(e.mapScaleValue=o=e.markerZoomFactor),sf.base.isNullOrUndefined(e.markerCenterLatitude)||sf.base.isNullOrUndefined(e.markerCenterLongitude)||(s=e.markerCenterLatitude,l=e.markerCenterLongitude)),r&&(e.mapScaleValue=a=o=e.scaleOfGivenLocation);var d=e.baseMapRectBounds.min,p=e.baseMapRectBounds.max,h=i?1:e.mapScaleValue;sf.base.isNullOrUndefined(e.currentShapeDataLength)&&(e.currentShapeDataLength=sf.base.isNullOrUndefined(t.shapeData.features)?t.shapeData.geometries.length:t.shapeData.features.length);var m,u,g=e.totalRect&&e.legendSettings.visible?e.totalRect:e.mapAreaRect,f=e.availableSize,b=Math.abs(p.x-d.x),y=Math.abs(d.y-p.y),v=i?1:1===e.markerZoomFactor?e.mapScaleValue:o;if(n=e.zoomSettings.shouldZoomInitially&&e.markerZoomedState&&!e.zoomPersistence?e.markerZoomCenterPoint:e.centerPosition,!sf.base.isNullOrUndefined(l)&&!sf.base.isNullOrUndefined(s)||r){var x=((b+Math.abs(e.mapAreaRect.width-b))/2+e.mapAreaRect.x)/v,S=((y+Math.abs(e.mapAreaRect.height-y))/2+e.mapAreaRect.y)/v,_=r?ue(e,t):c(s,l,e.mapLayerPanel.calculateFactor(t),t,e);sf.base.isNullOrUndefined(e.previousProjection)||e.previousProjection!==e.projectionType?(m=-_.x+x,u=-_.y+S,a=h):(1!==Math.floor(e.scale)&&e.zoomSettings.shouldZoomInitially||e.zoomNotApplied?(m=-_.x+x,u=-_.y+S):e.zoomSettings.shouldZoomInitially||e.zoomNotApplied?(m=-_.x+x,u=-_.y+S,a=h):(m=e.zoomTranslatePoint.x,u=e.zoomTranslatePoint.y),a=e.mapScaleValue)}else if(sf.base.isNullOrUndefined(e.previousProjection)||e.previousProjection!==e.projectionType){b*=a=parseFloat(Math.min(g.width/b,g.height/y).toFixed(2)),y*=a;var M=0!==d.x&&"layers"===e.translateType?f.width-g.width:0;m=g.x+(-d.x+(g.width/2-b/2))-M,u=g.y+(-d.y+(g.height/2-y/2)),e.previousTranslate=new O(m,u)}else if(e.zoomSettings.shouldZoomInitially||1!==e.markerZoomFactor||1!==e.mapScaleValue)if(a=e.mapScaleValue<1?e.mapScaleValue+1:e.mapScaleValue,e.mapScaleValue=e.zoomSettings.enable&&1!==e.mapScaleValue?e.mapScaleValue:1,e.currentShapeDataLength!==(sf.base.isNullOrUndefined(t.shapeData.features)?t.shapeData.geometries.length:t.shapeData.features.length)&&"SubLayer"!==t.type){var C=parseFloat(Math.min(g.height/y,g.width/b).toFixed(2));y*=C,b*=C,u=g.y+(-d.y+(g.height/2-y/2)),a=C,m=g.x+(-d.x+(g.width/2-b/2))}else if(e.availableSize.height!==e.heightBeforeRefresh||e.widthBeforeRefresh!==e.availableSize.width){var L=parseFloat(Math.min(g.width/b,g.height/y).toFixed(2)),w=b;w*=L;var P=y;P*=L;var I=g.x+(-d.x+(g.width/2-w/2)),T=g.y+(-d.y+(g.height/2-P/2)),k=(e.translatePoint.x-e.previousTranslate.x)/e.widthBeforeRefresh,N=(e.translatePoint.y-e.previousTranslate.y)/e.heightBeforeRefresh;m=I+k*e.availableSize.width,u=T+N*e.availableSize.height,e.previousTranslate=new O(I,T),e.zoomTranslatePoint.x=m,e.zoomTranslatePoint.y=u}else sf.base.isNullOrUndefined(e.previousProjection)||1!==e.mapScaleValue||e.zoomModule.isDragZoom?(m=e.zoomTranslatePoint.x,u=e.zoomTranslatePoint.y,a=e.scale):(b*=a=parseFloat(Math.min(g.width/b,g.height/y).toFixed(2)),m=g.x+(-d.x+(g.width/2-b/2)),y*=a,u=g.y+(-d.y+(g.height/2-y/2)));else y*=a=parseFloat(Math.min(g.width/b,g.height/y).toFixed(2)),b*=a,u=g.y+(-d.y+(g.height/2-y/2)),m=g.x+(-d.x+(g.width/2-b/2));return sf.base.isNullOrUndefined(e.translatePoint)||(m=e.enablePersistence&&0!=e.translatePoint.x&&!e.zoomNotApplied?e.translatePoint.x:m,u=e.enablePersistence&&0!=e.translatePoint.y&&!e.zoomNotApplied?e.translatePoint.y:u),a=e.enablePersistence?e.mapScaleValue>=1?e.mapScaleValue:1:a,e.widthBeforeRefresh=e.availableSize.width,e.heightBeforeRefresh=e.availableSize.height,{scale:a,location:new O(m,u)}}function fe(e,t,i){var a,o=e.zoomSettings.zoomFactor,n=e.centerPosition,s=n.latitude,l=n.longitude,r=!sf.base.isNullOrUndefined(e.centerLongOfGivenLocation)&&!sf.base.isNullOrUndefined(e.centerLatOfGivenLocation)&&e.zoomNotApplied;sf.base.isNullOrUndefined(e.previousCenterLatitude)&&sf.base.isNullOrUndefined(e.previousCenterLongitude)?(e.previousCenterLatitude=e.centerPosition.latitude,e.previousCenterLongitude=e.centerPosition.longitude):e.previousCenterLatitude!==e.centerPosition.latitude&&e.previousCenterLongitude!==e.centerPosition.longitude?(e.centerPositionChanged=!0,e.previousCenterLatitude=e.centerPosition.latitude,e.previousCenterLongitude=e.centerPosition.longitude):e.centerPositionChanged=!1,(sf.base.isNullOrUndefined(e.mapScaleValue)||o>e.mapScaleValue)&&(e.isReset&&1===e.mapScaleValue?e.mapScaleValue=e.mapScaleValue:e.mapScaleValue=o),e.mapScaleValue=1!==e.zoomSettings.zoomFactor&&e.zoomSettings.zoomFactor===e.mapScaleValue||e.zoomSettings.zoomFactor===e.mapScaleValue||e.centerPositionChanged?e.zoomSettings.zoomFactor:e.mapScaleValue,e.zoomSettings.shouldZoomInitially&&(e.mapScaleValue=o=a=(e.enablePersistence||e.zoomSettings.shouldZoomInitially)&&1==e.scale?e.scale:sf.base.isNullOrUndefined(e.markerZoomFactor)?e.mapScaleValue:e.markerZoomFactor,o=e.mapScaleValue,sf.base.isNullOrUndefined(e.markerCenterLatitude)||sf.base.isNullOrUndefined(e.markerCenterLongitude)||(s=e.markerCenterLatitude,l=e.markerCenterLongitude)),r&&(e.mapScaleValue=a=o=e.scaleOfGivenLocation);var d,p,h=i?1:e.mapScaleValue,m=e.mapAreaRect,u=e.baseMapRectBounds.min,g=e.baseMapRectBounds.max,f=i?1:e.mapScaleValue,b=Math.abs(g.x-u.x),y=Math.abs(u.y-g.y);if(!sf.base.isNullOrUndefined(l)&&!sf.base.isNullOrUndefined(s)||r){var v=(y+Math.abs(e.mapAreaRect.height-y))/2/f,x=(b+Math.abs(e.mapAreaRect.width-b))/2/f,S=r?ue(e,t):c(s,l,e.mapLayerPanel.calculateFactor(t),t,e);sf.base.isNullOrUndefined(e.zoomTranslatePoint)&&sf.base.isNullOrUndefined(e.previousProjection)||e.zoomNotApplied?(d=-S.x+x+e.mapAreaRect.x/h,p=-S.y+v+e.mapAreaRect.y/h):e.previousProjection!==e.projectionType?(d=-S.x+x,p=-S.y+v):(d=e.zoomTranslatePoint.x,p=e.zoomTranslatePoint.y,o=h),sf.base.isNullOrUndefined(e.translatePoint)||(p=e.enablePersistence&&0!=e.translatePoint.y&&!e.zoomNotApplied?e.translatePoint.y:p,d=e.enablePersistence&&0!=e.translatePoint.x&&!e.zoomNotApplied?e.translatePoint.x:d),a=0!==o?o:1}else{var _=0===e.zoomSettings.zoomFactor?1:e.zoomSettings.zoomFactor;a=_=_>10?10:_;var M=0===e.mapScaleValue?1:e.mapScaleValue>10?10:e.mapScaleValue;x=m.x+(-u.x+(m.width/2-b/2)),v=m.y+(-u.y+(m.height/2-y/2));if(!sf.base.isNullOrUndefined(e.zoomTranslatePoint)||!sf.base.isNullOrUndefined(e.previousProjection))if(e.previousProjection!==e.projectionType){var C=[],L={x:x,y:v};C.push(L);for(var w=1;w<10;w++){L={x:C[w-1].x-(m.width/w-m.width/(w+1))/2,y:C[w-1].y-(m.height/w-m.height/(w+1))/2},C.push(L)}x=C[_-1].x,v=C[_-1].y}else x=e.zoomTranslatePoint.x,v=e.zoomTranslatePoint.y,_!==M&&(a=M);sf.base.isNullOrUndefined(e.translatePoint)||(d=e.enablePersistence&&0!=e.translatePoint.x&&!e.zoomNotApplied?e.translatePoint.x:x,p=e.enablePersistence&&0!=e.translatePoint.y&&!e.zoomNotApplied?e.translatePoint.y:v)}return a=e.enablePersistence?0==e.mapScaleValue?1:e.mapScaleValue:a,{scale:i?1:a,location:new O(d,p)}}function be(e){e.tileZoomScale=e.tileZoomLevel=Math.floor(e.availableSize.height/512)+1;var t="GoogleStaticMap"!==e.layers[e.baseLayerIndex].layerType?20:0,i=256*Math.pow(2,e.tileZoomLevel);e.tileTranslatePoint.x=e.availableSize.width/2-i/2,e.tileTranslatePoint.y=e.availableSize.height/2-i/2+t,e.previousTileWidth=e.availableSize.width,e.previousTileHeight=e.availableSize.height}function ye(e){return document.getElementById(e)}function ve(e,t){return e.formatFunction=e.intl.getNumberFormat({format:e.format,useGrouping:e.useGroupingSeparator}),e.formatFunction(t)}function xe(e){var t=null;try{document.querySelectorAll(e).length&&(t=sf.base.compile(document.querySelector(e).innerHTML.trim()))}catch(i){t=sf.base.compile(e)}return t}function Se(e){return document.getElementById(e)}function Oe(e,t){var i,a=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),o=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10),n=t.layersCollection[a],s=n.layerData[o].property;return n.dataSource&&(i=n.dataSource[ne(n.dataSource,s,n.shapeDataPath,n.shapePropertyPath)]),{shapeData:s,data:i}}function _e(e,t,i,o){var n=Oe(e,i),s=t.enableMultiSelect?{cancel:!1,name:o,fill:t.fill,opacity:t.opacity,border:t.border,shapeData:n.shapeData,data:n.data,target:e,maps:i,shapeDataCollection:i.shapeSelectionItem}:{cancel:!1,name:o,fill:t.fill,opacity:t.opacity,border:t.border,shapeData:n.shapeData,data:n.data,target:e,maps:i};if(i.isBlazor){s.maps,s.shapeData;s=a(s,["maps","shapeData"])}return i.trigger(o,s),s}function Me(e){return document.getElementsByClassName(e)}function Ce(e,t){var i=null;return document.getElementById(t)&&(i=document.getElementById(t).querySelector("#"+e)),i}function Le(e,t,i,a){for(var o,n=a.layers[e].shapeData.features,s=0;s<n.length;s++)if(n[s].properties.name===t){o=a.element.id+"_LayerIndex_"+e+"_shapeIndex_"+s+"_dataIndex_undefined";break}return Se(o)}function we(e,t,i){return sf.base.createElement("style",{id:e,innerHTML:"."+t+"{fill:"+i.fill+";opacity:"+i.opacity.toString()+";stroke-width:"+i.border.width.toString()+";stroke:"+i.border.color+";}"})}function Pe(e,t,i){Se(e).innerHTML="."+t+"{fill:"+i.fill+";opacity:"+i.opacity.toString()+";stroke-width:"+i.border.width.toString()+";stroke:"+i.border.color+"}"}function Ie(e,t,i,a,o){var n={color:e.border.color,width:e.border.width/t.scale},s={opacity:e.opacity,fill:e.fill,border:n,name:Wt,target:i.id,cancel:!1,shapeData:a,data:o,maps:t};t.trigger("itemSelection",s,(function(e){t.shapeSelectionItem.push(s.shapeData),Se("ShapeselectionMap")?Pe("ShapeselectionMap","ShapeselectionMapStyle",s):document.body.appendChild(we("ShapeselectionMap","ShapeselectionMapStyle",s))}))}function Te(e){e.removeAttribute("class")}function ke(e,t,i,a,o,n,s){void 0===s&&(s=0);var l=a.x,r=a.y,d=0,p=e.getAttribute("transform")||"";new sf.base.Animation({}).animate(e,{duration:i,delay:t,progress:function(t){t.timeStamp>t.delay&&(d=(t.timeStamp-t.delay)/t.duration,e.setAttribute("transform","translate( "+(l-s*d)+" "+(r-s*d)+" ) scale("+d+")"))},end:function(t){if(e.setAttribute("transform",p),n){var i={cancel:!1,name:Gt,element:n,maps:o.isBlazor?null:o};o.trigger(Gt,i)}}})}function Ne(e){me(e)}function Ee(e,t,i,a,o,n,s,l,r){var p=d(i,a,l);sf.base.isNullOrUndefined(p)||(i=p.x,a=p.y);for(var h=document.getElementById(s),c=C(e,{fontFamily:"Segoe UI",size:"8px",fontStyle:"Normal",fontWeight:"Regular"}).width,m=e.split(" "),u=m[0].length,g=1;g<m.length;g++)u<m[g].length&&(u=m[g].length);h||(h=sf.base.createElement("div",{id:s,styles:'background-color: rgb(255, 255, 255) !important; color:black !important; position:absolute;border:1px solid rgb(0, 0, 0); padding-left:5px;font-size:12px; font-family: "Segoe UI"; text-align:center'})),i<o-c?i=i:i>o-c&&i<o-8*u?c=o-i:i>=o-8*u&&(i>c?i-=c:(c=i,i=0));var f=t.split("px");ze(h,e,i,a,f,c,o,l),h.clientHeight+2*parseInt(f[0],10)>n&&(c=i,i=0),ze(h,e,i,a,f,c,o,l),r&&setTimeout(Ne,5e3,s)}function ze(e,t,i,a,o,n,s,l){e.innerHTML=t,e.style.top=-1!==e.id.indexOf("_Legend")?(parseInt(o[0],10)+a).toString()+"px":(2*parseInt(o[0],10)).toString()+"px",e.style.left=i.toString()+"px",e.style.width=n.toString()+"px",e.style.maxWidth=s.toString()+"px",e.style.wordWrap="break-word",l.appendChild(e)}function Ae(e,t,i,a,o){var n=Se(e),s="top:"+i.toString()+"px;left:"+a.toString()+"px;color: #000000; background:#FFFFFF;position:absolute;border:1px solid #707070;font-size:"+o+";border-radius:2px;";n?(n.setAttribute("innerHTML","&nbsp;"+t+"&nbsp;"),n.setAttribute("styles",s)):(n=sf.base.createElement("div",{id:e,innerHTML:"&nbsp;"+t+"&nbsp;",styles:s}),document.body.appendChild(n))}function je(e,t,i,a,o){var n=new sf.svgbase.SvgRenderer(""),s=Be(e,i,t,o,a);return n["draw"+s.functionName](s.renderOption)}function Be(e,t,i,a,o){var n,s="Path",l=t.width,r=t.height,d=e.x,p=e.y,h=e.x+-l/2,c=e.y+-r/2;switch(i){case"Circle":case"Bubble":s="Ellipse",sf.base.merge(a,{rx:l/2,ry:r/2,cx:d,cy:p});break;case"VerticalLine":n="M "+d+" "+(p+r/2)+" L "+d+" "+(p+-r/2),sf.base.merge(a,{d:n});break;case"Diamond":n="M "+h+" "+p+" L "+d+" "+(p+-r/2)+" L "+(d+l/2)+" "+p+" L "+d+" "+(p+r/2)+" L "+h+" "+p+" z",sf.base.merge(a,{d:n});break;case"Rectangle":n="M "+h+" "+(p+-r/2)+" L "+(d+l/2)+" "+(p+-r/2)+" L "+(d+l/2)+" "+(p+r/2)+" L "+h+" "+(p+r/2)+" L "+h+" "+(p+-r/2)+" z",sf.base.merge(a,{d:n});break;case"Triangle":n="M "+h+" "+(p+r/2)+" L "+d+" "+(p+-r/2)+" L "+(d+l/2)+" "+(p+r/2)+" L "+h+" "+(p+r/2)+" z",sf.base.merge(a,{d:n});break;case"InvertedTriangle":n="M "+(d+l/2)+" "+(p-r/2)+" L "+d+" "+(p+r/2)+" L "+(d-l/2)+" "+(p-r/2)+" L "+(d+l/2)+" "+(p-r/2)+" z",sf.base.merge(a,{d:n});break;case"Pentagon":for(var m=void 0,u=void 0,g=0;g<=5;g++)m=l/2*Math.cos(Math.PI/180*(72*g)),u=l/2*Math.sin(Math.PI/180*(72*g)),n=0===g?"M "+(d+m)+" "+(p+u)+" ":n.concat("L "+(d+m)+" "+(p+u)+" ");n=n.concat("Z"),sf.base.merge(a,{d:n});break;case"Star":n="M "+(e.x+t.width/3)+" "+(e.y-t.height/2)+" L "+(e.x-t.width/2)+" "+(e.y+t.height/6)+" L "+(e.x+t.width/2)+" "+(e.y+t.height/6)+" L "+(e.x-t.width/3)+" "+(e.y-t.height/2)+" L "+e.x+" "+(e.y+t.height/2)+" L "+(e.x+t.width/3)+" "+(e.y-t.height/2)+" Z",sf.base.merge(a,{d:n});break;case"Cross":n="M "+h+" "+p+" L "+(d+l/2)+" "+p+" M "+d+" "+(p+r/2)+" L "+d+" "+(p+-r/2),sf.base.merge(a,{d:n});break;case"Image":s="Image",sf.base.merge(a,{href:o,height:r,width:l,x:h,y:c})}return{renderOption:a,functionName:s}}function Fe(e,t){var i,a;return t.appendChild(e),i=e.offsetWidth,a=e.offsetHeight,t.removeChild(e),new n(i,a)}function Re(e,t,i,a){for(var o,n=0;n<e.childElementCount;n++)if((o=e.childNodes[n]).id.indexOf("_NavigationGroup")>-1)Ue(o,t,i,a);else{var s=a.layersCollection[t].shapeSettings.border.width;o.setAttribute("stroke-width",(s/i).toString())}}function Ue(e,t,i,a){for(var o,n=0;n<e.childElementCount;n++)if("path"===(o=e.childNodes[n]).tagName){var s=a.layersCollection[t].navigationLineSettings[parseFloat(o.id.split("_NavigationIndex_")[1].split("_")[0])].width;o.setAttribute("stroke-width",(s/i).toString())}}function Ze(e){for(var t=[],i=e.touches,a=0;a<i.length;a++)t.push({pageX:i[a].pageX,pageY:i[a].pageY});return t}function De(e,t){var i=He(e[0],e[1]);return He(t[0],t[1])/i}function He(e,t){var i=e.pageX-t.pageX,a=e.pageY-t.pageY;return Math.sqrt(i*i+a*a)}function Ve(e,t){var i=t.element.getBoundingClientRect(),a=i.top+document.defaultView.pageXOffset,o=i.left+document.defaultView.pageYOffset;return Array.prototype.slice.call(e).map((function(e){return{x:e.pageX-o,y:e.pageY-a}}))}function Ge(e){return{x:e.map((function(e){return e.x})).reduce(We)/e.length,y:e.map((function(e){return e.y})).reduce(We)/e.length}}function We(e,t){return e+t}function qe(e,t,i,a,o,n,s){var l=0,r=s.previousPoint,d=s.previousScale,p=o-d,h=new A(0,0),c=1;if(o!==d){var m=function(e,t){return e.x===t.x?null:(t.y-e.y)/(t.x-e.x)}(r,a),u=function(e,t){return null===t?e.x:e.y-t*e.x}(r,m),g=a.x-r.x,f=a.y-r.y;Xe(e,t,i,(function(e){e.timeStamp>e.delay&&(l=(e.timeStamp-e.delay)/e.duration,c=d+l*p,h.x=r.x+l*g/(c/o),h.y=null==m?r.y+l*f:m*h.x+u,e.element.setAttribute("transform","scale( "+c+" ) translate( "+h.x+" "+h.y+" )"),s.translatePoint=h,s.scale=c,s.zoomModule.processTemplate(a.x,a.y,c,s))}),(function(){s.translatePoint=a,s.scale=o,e.setAttribute("transform","scale( "+o+" ) translate( "+a.x+" "+a.y+" )"),s.zoomModule.processTemplate(a.x,a.y,o,s)}))}else e.setAttribute("transform","scale( "+o+" ) translate( "+a.x+" "+a.y+" )")}function Xe(e,t,i,a,o){var n,s=this,l=null;n=window.requestAnimationFrame((function t(r){l||(l=r);var d=r-l;d<i?(a.call(s,{element:e,delay:0,timeStamp:d,duration:i}),window.requestAnimationFrame(t)):(window.cancelAnimationFrame(n),o.call(s,{element:e}),e.setAttribute("style","visibility:visible"))}))}var Ye,Je,Ke,Qe,$e,et=function(e,t,i,a,o){this.dataOptions=e,this.type=t||"GET",this.async=i||!0,this.contentType=a,this.sendData=o};function tt(e,t,i,a){var o=0,n=e.getAttribute("transform").split(" ");2===n.length&&(n[2]=n[1].split(")")[0],n[1]=n[0].split("(")[1]);var s=new A(parseInt(n[1],10),parseInt(n[2],10)),l=a.x-s.x,r=a.y-s.y,d=new A(0,0);Xe(e,0,i,(function(e){e.timeStamp>e.delay&&(o=(e.timeStamp-e.delay)/e.duration,d.x=s.x+o*l,d.y=s.y+o*r,e.element.setAttribute("transform","translate( "+d.x+" "+d.y+" )"))}),(function(){e.setAttribute("transform","translate( "+a.x+" "+a.y+" )")}))}function it(e,t){var i=sf.base.isNullOrUndefined(t.shouldZoomPreviousFactor)?null:t.shouldZoomPreviousFactor,a=sf.base.isNullOrUndefined(t.shouldZoomCurrentFactor)?null:t.shouldZoomCurrentFactor;sf.base.isNullOrUndefined(a)?!sf.base.isNullOrUndefined(i)&&sf.base.isNullOrUndefined(a)&&t.shouldZoomPreviousFactor!==e?t.shouldZoomCurrentFactor=e:t.shouldZoomPreviousFactor=e:(t.shouldZoomCurrentFactor=null,t.shouldZoomPreviousFactor=null)}function at(e,t,i,a,o,n,s){var l,r,d,p,h,m,u,g=Math.sin(t*Math.PI/180),f=Math.log((1+g)/(1-g))/2,b=Math.max(Math.min(f,Math.PI),-Math.PI)/2,y=Math.sin(e*Math.PI/180),v=Math.log((1+y)/(1-y))/2,x=Math.max(Math.min(v,Math.PI),-Math.PI)/2;if(s.zoomNotApplied&&!s.isTileMap){var S=Math.abs((s.baseMapBounds.latitude.max-s.baseMapBounds.latitude.min)/(t-e)),O=Math.abs((s.baseMapBounds.longitude.max-s.baseMapBounds.longitude.min)/(a-i));p=Math.min(S,O);c(e,i,1,s.layersCollection[0],s),c(t,a,1,s.layersCollection[0],s)}l=(b-x)/Math.PI;var _=a-i;r=(_<0?_+360:_)/360;return h=Math.log(n/256/l)/Math.LN2,m=Math.log(o/256/r)/Math.LN2,u=s.zoomNotApplied&&!s.isTileMap?p:Math.min(h,m),d=Math.min(u,10),d=s.isTileMap||!s.zoomNotApplied?Math.floor(d):d,s.isTileMap||it(d,s),d}!function(e){e.mapsTitleFont={size:"14px",fontWeight:"Medium",color:"#424242",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Medium",color:"#424242",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"}}(Ye||(Ye={})),function(e){e.mapsTitleFont={size:"14px",fontWeight:"Semibold",color:"#424242",fontStyle:"Semibold",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Regular",color:"#424242",fontStyle:"Regular",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"}}(Je||(Je={})),function(e){e.mapsTitleFont={size:"14px",fontWeight:"Semibold",color:"#424242",fontStyle:"Semibold",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Regular",color:"#424242",fontStyle:"Regular",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"}}(Ke||(Ke={})),function(e){e.mapsTitleFont={size:"14px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#000000",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"}}(Qe||(Qe={})),function(e){e.mapsTitleFont={fontFamily:"Roboto, Noto, Sans-serif",fontWeight:"Medium",size:"14px",fontStyle:"Medium",color:"#FFFFFF"},e.mapsSubTitleFont={size:"13px",color:"#FFFFFF",fontWeight:"Medium",fontFamily:"Roboto, Noto, Sans-serif",fontStyle:"Medium"},e.tooltipLabelFont={size:"12px",color:"#282727",fontWeight:"Regular",fontFamily:"Roboto",fontStyle:"Regular"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"},e.legendLabelFont={size:"13px",fontFamily:"Roboto, Noto, Sans-serif",fontWeight:"Medium",color:"#DADADA",fontStyle:"Medium"}}($e||($e={}));var ot,nt,st=(ot=function(e,t){return(ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ot(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),lt=function(e,t,i,a){var n,s=arguments.length,l=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===("undefined"==typeof Reflect?"undefined":o()(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(s<3?n(l):s>3?n(t,i,l):n(t,i))||l);return s>3&&l&&Object.defineProperty(t,i,l),l},rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property("")],t.prototype,"content",void 0),lt([sf.base.Property("0px")],t.prototype,"x",void 0),lt([sf.base.Property("0px")],t.prototype,"y",void 0),lt([sf.base.Property("None")],t.prototype,"verticalAlignment",void 0),lt([sf.base.Property("None")],t.prototype,"horizontalAlignment",void 0),lt([sf.base.Property("-1")],t.prototype,"zIndex",void 0),t}(sf.base.ChildProperty),dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property("Start")],t.prototype,"position",void 0),lt([sf.base.Property("false")],t.prototype,"showArrow",void 0),lt([sf.base.Property(2)],t.prototype,"size",void 0),lt([sf.base.Property("black")],t.prototype,"color",void 0),lt([sf.base.Property(0)],t.prototype,"offSet",void 0),t}(sf.base.ChildProperty),pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property("12px")],t.prototype,"size",void 0),lt([sf.base.Property(null)],t.prototype,"color",void 0),lt([sf.base.Property("Roboto, Noto, Sans-serif")],t.prototype,"fontFamily",void 0),lt([sf.base.Property("Medium")],t.prototype,"fontWeight",void 0),lt([sf.base.Property("Medium")],t.prototype,"fontStyle",void 0),lt([sf.base.Property(1)],t.prototype,"opacity",void 0),t}(sf.base.ChildProperty),ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property("")],t.prototype,"color",void 0),lt([sf.base.Property(0)],t.prototype,"width",void 0),t}(sf.base.ChildProperty),ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property(null)],t.prototype,"latitude",void 0),lt([sf.base.Property(null)],t.prototype,"longitude",void 0),t}(sf.base.ChildProperty),mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property(!1)],t.prototype,"visible",void 0),lt([sf.base.Property("")],t.prototype,"template",void 0),lt([sf.base.Property("")],t.prototype,"fill",void 0),lt([sf.base.Complex({color:"transparent",width:1},ht)],t.prototype,"border",void 0),lt([sf.base.Complex(Ye.tooltipLabelFont,pt)],t.prototype,"textStyle",void 0),lt([sf.base.Property(null)],t.prototype,"format",void 0),lt([sf.base.Property(null)],t.prototype,"valuePath",void 0),t}(sf.base.ChildProperty),ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property(10)],t.prototype,"left",void 0),lt([sf.base.Property(10)],t.prototype,"right",void 0),lt([sf.base.Property(10)],t.prototype,"top",void 0),lt([sf.base.Property(10)],t.prototype,"bottom",void 0),t}(sf.base.ChildProperty),gt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property("#000000")],t.prototype,"color",void 0),lt([sf.base.Property(1)],t.prototype,"width",void 0),lt([sf.base.Property(1)],t.prototype,"opacity",void 0),t}(sf.base.ChildProperty),ft=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property(!1)],t.prototype,"allowClustering",void 0),lt([sf.base.Complex({color:"transparent",width:1},ht)],t.prototype,"border",void 0),lt([sf.base.Property("#D2691E")],t.prototype,"fill",void 0),lt([sf.base.Property(1)],t.prototype,"opacity",void 0),lt([sf.base.Property("Rectangle")],t.prototype,"shape",void 0),lt([sf.base.Property(12)],t.prototype,"width",void 0),lt([sf.base.Property(12)],t.prototype,"height",void 0),lt([sf.base.Property(new O(0,0))],t.prototype,"offset",void 0),lt([sf.base.Property("")],t.prototype,"imageUrl",void 0),lt([sf.base.Property("")],t.prototype,"dashArray",void 0),lt([sf.base.Complex({},pt)],t.prototype,"labelStyle",void 0),lt([sf.base.Property(!1)],t.prototype,"allowClusterExpand",void 0),lt([sf.base.Complex({},gt)],t.prototype,"connectorLineSettings",void 0),t}(sf.base.ChildProperty),bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),t}(sf.base.ChildProperty),yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property(null)],t.prototype,"from",void 0),lt([sf.base.Property(null)],t.prototype,"to",void 0),lt([sf.base.Property(null)],t.prototype,"value",void 0),lt([sf.base.Property(null)],t.prototype,"color",void 0),lt([sf.base.Property(null)],t.prototype,"minOpacity",void 0),lt([sf.base.Property(null)],t.prototype,"maxOpacity",void 0),lt([sf.base.Property(null)],t.prototype,"label",void 0),lt([sf.base.Property(!0)],t.prototype,"showLegend",void 0),t}(sf.base.ChildProperty),vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property(null)],t.prototype,"shapePath",void 0),lt([sf.base.Property(null)],t.prototype,"shapeValue",void 0),t}(sf.base.ChildProperty),xt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property(!1)],t.prototype,"enable",void 0),lt([sf.base.Property(null)],t.prototype,"fill",void 0),lt([sf.base.Property(1)],t.prototype,"opacity",void 0),lt([sf.base.Property(!1)],t.prototype,"enableMultiSelect",void 0),lt([sf.base.Complex({color:"transparent",width:0},ht)],t.prototype,"border",void 0),t}(sf.base.ChildProperty),St=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property(null)],t.prototype,"fill",void 0),lt([sf.base.Property(!1)],t.prototype,"enable",void 0),lt([sf.base.Property(1)],t.prototype,"opacity",void 0),lt([sf.base.Complex({color:"transparent",width:0},ht)],t.prototype,"border",void 0),t}(sf.base.ChildProperty),Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property(!1)],t.prototype,"visible",void 0),lt([sf.base.Property(1)],t.prototype,"width",void 0),lt([sf.base.Property(null)],t.prototype,"longitude",void 0),lt([sf.base.Property(null)],t.prototype,"latitude",void 0),lt([sf.base.Property("")],t.prototype,"dashArray",void 0),lt([sf.base.Property("black")],t.prototype,"color",void 0),lt([sf.base.Property(0)],t.prototype,"angle",void 0),lt([sf.base.Complex({showArrow:!1,position:"Start",size:5,color:"black"},dt)],t.prototype,"arrowSettings",void 0),lt([sf.base.Complex({},xt)],t.prototype,"selectionSettings",void 0),lt([sf.base.Complex({},St)],t.prototype,"highlightSettings",void 0),t}(sf.base.ChildProperty),_t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Complex({},ht)],t.prototype,"border",void 0),lt([sf.base.Property(!1)],t.prototype,"visible",void 0),lt([sf.base.Property([])],t.prototype,"dataSource",void 0),lt([sf.base.Property(1e3)],t.prototype,"animationDuration",void 0),lt([sf.base.Property(0)],t.prototype,"animationDelay",void 0),lt([sf.base.Property("")],t.prototype,"fill",void 0),lt([sf.base.Property(10)],t.prototype,"minRadius",void 0),lt([sf.base.Property(20)],t.prototype,"maxRadius",void 0),lt([sf.base.Property(1)],t.prototype,"opacity",void 0),lt([sf.base.Property(null)],t.prototype,"valuePath",void 0),lt([sf.base.Property("Circle")],t.prototype,"bubbleType",void 0),lt([sf.base.Property(null)],t.prototype,"colorValuePath",void 0),lt([sf.base.Collection([],yt)],t.prototype,"colorMapping",void 0),lt([sf.base.Complex({},mt)],t.prototype,"tooltipSettings",void 0),lt([sf.base.Complex({},xt)],t.prototype,"selectionSettings",void 0),lt([sf.base.Complex({},St)],t.prototype,"highlightSettings",void 0),t}(sf.base.ChildProperty),Mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property("")],t.prototype,"text",void 0),lt([sf.base.Property("")],t.prototype,"description",void 0),t}(sf.base.ChildProperty),Ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Complex({size:Ye.mapsSubTitleFont.size},pt)],t.prototype,"textStyle",void 0),lt([sf.base.Property("Center")],t.prototype,"alignment",void 0),t}(Mt),Lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Complex({size:Ye.mapsTitleFont.size},pt)],t.prototype,"textStyle",void 0),lt([sf.base.Property("Center")],t.prototype,"alignment",void 0),lt([sf.base.Complex({},Ct)],t.prototype,"subtitleSettings",void 0),t}(Mt),wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property(!1)],t.prototype,"enable",void 0),lt([sf.base.Property(!0)],t.prototype,"enablePanning",void 0),lt([sf.base.Property(!0)],t.prototype,"enableSelectionZooming",void 0),lt([sf.base.Property("Horizontal")],t.prototype,"toolBarOrientation",void 0),lt([sf.base.Property(null)],t.prototype,"color",void 0),lt([sf.base.Property("#e61576")],t.prototype,"highlightColor",void 0),lt([sf.base.Property("#e61576")],t.prototype,"selectionColor",void 0),lt([sf.base.Property("Far")],t.prototype,"horizontalAlignment",void 0),lt([sf.base.Property("Near")],t.prototype,"verticalAlignment",void 0),lt([sf.base.Property(["ZoomIn","ZoomOut","Reset"])],t.prototype,"toolbars",void 0),lt([sf.base.Property(!0)],t.prototype,"mouseWheelZoom",void 0),lt([sf.base.Property(!1)],t.prototype,"doubleClickZoom",void 0),lt([sf.base.Property(!1)],t.prototype,"pinchZooming",void 0),lt([sf.base.Property(!1)],t.prototype,"zoomOnClick",void 0),lt([sf.base.Property(1)],t.prototype,"zoomFactor",void 0),lt([sf.base.Property(10)],t.prototype,"maxZoom",void 0),lt([sf.base.Property(1)],t.prototype,"minZoom",void 0),lt([sf.base.Property(!1)],t.prototype,"shouldZoomInitially",void 0),lt([sf.base.Property(!0)],t.prototype,"resetToInitial",void 0),t}(sf.base.ChildProperty),Pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property(!1)],t.prototype,"enable",void 0),lt([sf.base.Property(!0)],t.prototype,"applyShapeSettings",void 0),lt([sf.base.Property(1)],t.prototype,"opacity",void 0),lt([sf.base.Property("")],t.prototype,"fill",void 0),lt([sf.base.Complex({color:"",width:0},ht)],t.prototype,"border",void 0),t}(sf.base.ChildProperty),It=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property(!1)],t.prototype,"toggleVisibility",void 0),lt([sf.base.Property(!1)],t.prototype,"visible",void 0),lt([sf.base.Property("transparent")],t.prototype,"background",void 0),lt([sf.base.Property("Layers")],t.prototype,"type",void 0),lt([sf.base.Property(!1)],t.prototype,"invertedPointer",void 0),lt([sf.base.Property("After")],t.prototype,"labelPosition",void 0),lt([sf.base.Property("None")],t.prototype,"labelDisplayMode",void 0),lt([sf.base.Property("Circle")],t.prototype,"shape",void 0),lt([sf.base.Property("")],t.prototype,"width",void 0),lt([sf.base.Property("")],t.prototype,"height",void 0),lt([sf.base.Complex({},pt)],t.prototype,"textStyle",void 0),lt([sf.base.Property(15)],t.prototype,"shapeWidth",void 0),lt([sf.base.Property(15)],t.prototype,"shapeHeight",void 0),lt([sf.base.Property(10)],t.prototype,"shapePadding",void 0),lt([sf.base.Complex({color:"#000000",width:0},ht)],t.prototype,"border",void 0),lt([sf.base.Complex({color:"#000000",width:0},ht)],t.prototype,"shapeBorder",void 0),lt([sf.base.Complex({},Mt)],t.prototype,"title",void 0),lt([sf.base.Complex({},pt)],t.prototype,"titleStyle",void 0),lt([sf.base.Property("Bottom")],t.prototype,"position",void 0),lt([sf.base.Property("Center")],t.prototype,"alignment",void 0),lt([sf.base.Property("None")],t.prototype,"orientation",void 0),lt([sf.base.Property({x:0,y:0})],t.prototype,"location",void 0),lt([sf.base.Property(null)],t.prototype,"fill",void 0),lt([sf.base.Property(1)],t.prototype,"opacity",void 0),lt([sf.base.Property("Default")],t.prototype,"mode",void 0),lt([sf.base.Property(null)],t.prototype,"showLegendPath",void 0),lt([sf.base.Property(null)],t.prototype,"valuePath",void 0),lt([sf.base.Property(!1)],t.prototype,"removeDuplicateLegend",void 0),lt([sf.base.Complex({},Pt)],t.prototype,"toggleLegendSettings",void 0),t}(sf.base.ChildProperty),Tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property(!1)],t.prototype,"visible",void 0),lt([sf.base.Complex({width:0,color:"transparent"},ht)],t.prototype,"border",void 0),lt([sf.base.Property("black")],t.prototype,"fill",void 0),lt([sf.base.Property(1)],t.prototype,"opacity",void 0),lt([sf.base.Property(5)],t.prototype,"rx",void 0),lt([sf.base.Property(5)],t.prototype,"ry",void 0),lt([sf.base.Complex({},pt)],t.prototype,"textStyle",void 0),lt([sf.base.Property("")],t.prototype,"labelPath",void 0),lt([sf.base.Property("None")],t.prototype,"smartLabelMode",void 0),lt([sf.base.Property("None")],t.prototype,"intersectionAction",void 0),lt([sf.base.Property("")],t.prototype,"template",void 0),t}(sf.base.ChildProperty),kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property("#A6A6A6")],t.prototype,"fill",void 0),lt([sf.base.Property([])],t.prototype,"palette",void 0),lt([sf.base.Property(5)],t.prototype,"circleRadius",void 0),lt([sf.base.Complex({width:0,color:"#000000"},ht)],t.prototype,"border",void 0),lt([sf.base.Property("")],t.prototype,"dashArray",void 0),lt([sf.base.Property(1)],t.prototype,"opacity",void 0),lt([sf.base.Property(null)],t.prototype,"colorValuePath",void 0),lt([sf.base.Property(null)],t.prototype,"valuePath",void 0),lt([sf.base.Collection([],yt)],t.prototype,"colorMapping",void 0),lt([sf.base.Property(!1)],t.prototype,"autofill",void 0),t}(sf.base.ChildProperty),Nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Complex({color:"transparent",width:1},ht)],t.prototype,"border",void 0),lt([sf.base.Property(null)],t.prototype,"dashArray",void 0),lt([sf.base.Property(!1)],t.prototype,"visible",void 0),lt([sf.base.Property("#FF471A")],t.prototype,"fill",void 0),lt([sf.base.Property(10)],t.prototype,"height",void 0),lt([sf.base.Property(10)],t.prototype,"width",void 0),lt([sf.base.Property(1)],t.prototype,"opacity",void 0),lt([sf.base.Property(null)],t.prototype,"colorValuePath",void 0),lt([sf.base.Property(null)],t.prototype,"shapeValuePath",void 0),lt([sf.base.Property(null)],t.prototype,"imageUrlValuePath",void 0),lt([sf.base.Property("Balloon")],t.prototype,"shape",void 0),lt([sf.base.Property("")],t.prototype,"legendText",void 0),lt([sf.base.Property(new O(0,0))],t.prototype,"offset",void 0),lt([sf.base.Property("")],t.prototype,"imageUrl",void 0),lt([sf.base.Property(null)],t.prototype,"template",void 0),lt([sf.base.Property([])],t.prototype,"dataSource",void 0),lt([sf.base.Complex({},mt)],t.prototype,"tooltipSettings",void 0),lt([sf.base.Property(1e3)],t.prototype,"animationDuration",void 0),lt([sf.base.Property(0)],t.prototype,"animationDelay",void 0),lt([sf.base.Complex({},xt)],t.prototype,"selectionSettings",void 0),lt([sf.base.Complex({},St)],t.prototype,"highlightSettings",void 0),lt([sf.base.Property(null)],t.prototype,"latitudeValuePath",void 0),lt([sf.base.Property(null)],t.prototype,"longitudeValuePath",void 0),t}(sf.base.ChildProperty),Et=function(e){function t(t,i,a,o){return e.call(this,t,i,a,o)||this}return st(t,e),t}(Nt),zt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isBaseLayer=!1,t}return st(t,e),lt([sf.base.Property(null)],t.prototype,"shapeData",void 0),lt([sf.base.Property()],t.prototype,"query",void 0),lt([sf.base.Complex({},kt)],t.prototype,"shapeSettings",void 0),lt([sf.base.Property([])],t.prototype,"dataSource",void 0),lt([sf.base.Property("Layer")],t.prototype,"type",void 0),lt([sf.base.Property("Geographic")],t.prototype,"geometryType",void 0),lt([sf.base.Property("Aerial")],t.prototype,"bingMapType",void 0),lt([sf.base.Property("RoadMap")],t.prototype,"staticMapType",void 0),lt([sf.base.Property("")],t.prototype,"key",void 0),lt([sf.base.Property("Geometry")],t.prototype,"layerType",void 0),lt([sf.base.Property("https://a.tile.openstreetmap.org/level/tileX/tileY.png")],t.prototype,"urlTemplate",void 0),lt([sf.base.Property(!0)],t.prototype,"visible",void 0),lt([sf.base.Property("name")],t.prototype,"shapeDataPath",void 0),lt([sf.base.Property("name")],t.prototype,"shapePropertyPath",void 0),lt([sf.base.Property(0)],t.prototype,"animationDuration",void 0),lt([sf.base.Collection([],Et)],t.prototype,"markerSettings",void 0),lt([sf.base.Complex({},ft)],t.prototype,"markerClusterSettings",void 0),lt([sf.base.Complex({},Tt)],t.prototype,"dataLabelSettings",void 0),lt([sf.base.Collection([],_t)],t.prototype,"bubbleSettings",void 0),lt([sf.base.Collection([],Ot)],t.prototype,"navigationLineSettings",void 0),lt([sf.base.Complex({},mt)],t.prototype,"tooltipSettings",void 0),lt([sf.base.Complex({},xt)],t.prototype,"selectionSettings",void 0),lt([sf.base.Complex({},St)],t.prototype,"highlightSettings",void 0),lt([sf.base.Complex({},Pt)],t.prototype,"toggleLegendSettings",void 0),lt([sf.base.Collection([],vt)],t.prototype,"initialShapeSelection",void 0),t}(sf.base.ChildProperty),At=function(e,t,i,a,o,n,s){void 0===i&&(i=256),void 0===a&&(a=256),void 0===o&&(o=0),void 0===n&&(n=0),void 0===s&&(s=null),this.x=e,this.y=t,this.top=o,this.left=n,this.height=i,this.width=a,this.src=s},jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return st(t,e),lt([sf.base.Property(null)],t.prototype,"background",void 0),lt([sf.base.Complex({color:"transparent",width:1},ht)],t.prototype,"border",void 0),t}(sf.base.ChildProperty),Bt=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]])}return i},Ft=function(){function e(e){this.maps=e,this.trackElements=[],this.sameMarkerData=[]}return e.prototype.markerRender=function(e,t,i,a){var o=this,n=0,s=0,l=0;this.maps.translateType="marker";var r=this.maps.layersCollection[t];this.markerSVGObject=this.maps.renderer.createGroup({id:this.maps.element.id+"_Markers_Group",class:"GroupElement",style:"pointer-events: auto;"});var d=sf.base.createElement("div",{id:this.maps.element.id+"_LayerIndex_"+t+"_Markers_Template_Group",className:this.maps.element.id+"_template",styles:"overflow: hidden; position: absolute;pointer-events: none;top:"+this.maps.mapAreaRect.y+"px;left:"+this.maps.mapAreaRect.x+"px;height:"+this.maps.mapAreaRect.height+"px;width:"+this.maps.mapAreaRect.width+"px;"});r.markerSettings.map((function(p,h){var u=p.dataSource;Array.prototype.forEach.call(u,(function(g,f){o.maps.markerNullCount=h>0&&0===f?0:o.maps.markerNullCount;var b={cancel:!1,name:Rt,fill:p.fill,height:p.height,width:p.width,imageUrl:p.imageUrl,shape:p.shape,template:p.template,data:g,maps:o.maps,marker:p,border:p.border,colorValuePath:p.colorValuePath,shapeValuePath:p.shapeValuePath,imageUrlValuePath:p.imageUrlValuePath};if(b=W(b=G(b,g),g),o.maps.isBlazor){b.maps,b.marker;var y=Bt(b,["maps","marker"]);b=y}o.maps.trigger("markerRendering",b,(function(y){p.colorValuePath!==b.colorValuePath&&(b=G(b,g)),p.shapeValuePath!==b.shapeValuePath&&(b=W(b,g));var v=sf.base.isNullOrUndefined(g[p.longitudeValuePath])?parseFloat(g.longitude):Number(V(g,p.longitudeValuePath)),x=sf.base.isNullOrUndefined(g[p.latitudeValuePath])?parseFloat(g.latitude):Number(V(g,p.latitudeValuePath));if(o.maps.isBlazor){var S={},O=[],_=0;(g=={}||sf.base.isNullOrUndefined(g.latitude)||sf.base.isNullOrUndefined(g.longitude))&&(x=g.latitude&&!sf.base.isNullOrUndefined(g.latitude)?g.latitude:0,v=g.longitude&&!sf.base.isNullOrUndefined(g.longitude)?g.longitude:0);for(var M=0;M<Object.keys(g).length;M++)"latitude"!==Object.keys(g)[M].toLowerCase()&&"longitude"!==Object.keys(g)[M].toLowerCase()&&"name"!==Object.keys(g)[M].toLowerCase()&&"blazortemplateid"!==Object.keys(g)[M].toLowerCase()&&"text"!==Object.keys(g)[M].toLowerCase()&&(O[_]=g[Object.keys(g)[M].toLowerCase()],S.text=O,_++);g.text=S.text}var C=p.offset;if(!b.cancel&&p.visible&&!sf.base.isNullOrUndefined(v)&&!sf.base.isNullOrUndefined(x)){var L=o.maps.element.id+"_LayerIndex_"+t+"_MarkerIndex_"+h+"_dataIndex_"+f,w=o.maps.isTileMap?m(new A(v,x),i,o.maps.tileTranslatePoint,!0):c(x,v,i,r,o.maps),P=0!==r.animationDuration||sf.base.isNullOrUndefined(o.maps.zoomModule),I=o.maps.isTileMap?"SubLayer"===r.type&&sf.base.isNullOrUndefined(o.maps.zoomModule)?w=m(new A(v,x),o.maps.tileZoomLevel,o.maps.tileTranslatePoint,!0):new Object:!sf.base.isNullOrUndefined(o.maps.zoomModule)&&o.maps.zoomSettings.zoomFactor>1?fe(o.maps,r,P):ge(o.maps,r,P),T="AddMarker"===a?o.maps.scale:I.scale,k="AddMarker"===a?o.maps.translatePoint:I.location;!b.template||isNaN(w.x)||isNaN(w.y)?b.template||isNaN(w.x)||isNaN(w.y)||(n++,J(b,p,u,f,w,k,L,C,T,o.maps,o.markerSVGObject)):(l++,K(b,void 0,L,g,h,d,w,T,C,o.maps))}s+=isNaN(x)||isNaN(v)?1:0,l+=b.cancel?1:0,n+=b.cancel?1:0,o.maps.markerNullCount=sf.base.isNullOrUndefined(v)||sf.base.isNullOrUndefined(x)?o.maps.markerNullCount+1:o.maps.markerNullCount;var N=u.length-o.maps.markerNullCount;o.markerSVGObject.childElementCount===N-l-s&&"Template"!==a&&(e.appendChild(o.markerSVGObject),r.markerClusterSettings.allowClustering&&(o.maps.svgObject.appendChild(o.markerSVGObject),o.maps.element.appendChild(o.maps.svgObject),q(r,o.markerSVGObject,o.maps,t,o.markerSVGObject,e,!0,!1))),d.childElementCount===u.length-n-s&&ye(o.maps.element.id+"_Secondary_Element")&&(ye(o.maps.element.id+"_Secondary_Element").appendChild(d),r.markerClusterSettings.allowClustering&&q(r,d,o.maps,t,o.markerSVGObject,e,!1,!1))}))}))}))},e.prototype.calculateIndividualLayerMarkerZoomLevel=function(e,t,i){var a,o,n,s,l=Math.abs(this.maps.baseMapBounds.latitude.max-this.maps.baseMapBounds.latitude.min),r=Math.abs(this.maps.baseMapBounds.longitude.max-this.maps.baseMapBounds.longitude.min);return a=(a=Math.floor(Math.log(t/l)))>i?i:a,o=(o=Math.floor(Math.log(e/r)))>i?i:o,n=Math.min(a,o),s=Math.min(n,i-1),this.maps.isTileMap||it(s,this.maps),s},e.prototype.calculateZoomCenterPositionAndFactor=function(e){if(this.maps.zoomSettings.shouldZoomInitially&&this.maps.markerModule){var t,i,a,o,n=void 0,s=void 0,l=void 0,r=this.maps.mapAreaRect.width,d=this.maps.mapAreaRect.height;if(this.maps.markerZoomedState=this.maps.markerZoomedState?this.maps.markerZoomedState:sf.base.isNullOrUndefined(this.maps.markerZoomFactor)?!this.maps.markerZoomedState:this.maps.markerZoomFactor>1?this.maps.markerZoomedState:!this.maps.markerZoomedState,this.maps.defaultState=this.maps.markerZoomedState?!this.maps.markerZoomedState:this.maps.defaultState,Array.prototype.forEach.call(e,(function(e,n){0!==e.markerSettings.length&&Array.prototype.forEach.call(e.markerSettings,(function(e,n){var s=e.dataSource;Array.prototype.forEach.call(s,(function(e,n){var s=sf.base.isNullOrUndefined(e.latitude)?null:parseFloat(e.latitude),l=sf.base.isNullOrUndefined(e.longitude)?null:parseFloat(e.longitude);t=sf.base.isNullOrUndefined(t)&&0===n?l:t,i=sf.base.isNullOrUndefined(i)&&0===n?s:i,a=sf.base.isNullOrUndefined(a)&&0===n?s:a,o=sf.base.isNullOrUndefined(o)&&0===n?l:o,t>l&&(t=l),a>s&&(a=s),o<l&&(o=l),i<s&&(i=s)}))}))})),!(sf.base.isNullOrUndefined(a)||sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(i))){s=(a+i)/2,l=(t+o)/2,this.maps.markerCenterLatitude=s,this.maps.markerCenterLongitude=l,(sf.base.isNullOrUndefined(this.maps.markerZoomCenterPoint)||this.maps.markerZoomedState)&&(this.maps.markerZoomCenterPoint={latitude:s,longitude:l});var p=void 0;this.maps.isTileMap||0===this.maps.baseMapRectBounds.min.x?(n=at(a,i,t,o,r,d,this.maps),this.maps.isTileMap?p=sf.base.isNullOrUndefined(this.maps.markerZoomFactor)||sf.base.isNullOrUndefined(this.maps.mapScaleValue)?n:this.maps.mapScaleValue>1&&1!==this.maps.markerZoomFactor?this.maps.mapScaleValue:n:(p=sf.base.isNullOrUndefined(this.maps.mapScaleValue)?n:1!==Math.floor(this.maps.scale)&&this.maps.mapScaleValue!==n&&sf.base.isNullOrUndefined(this.maps.shouldZoomCurrentFactor)?this.maps.mapScaleValue:n)!==this.maps.mapScaleValue||1!==this.maps.markerZoomFactor&&1!==this.maps.mapScaleValue||this.maps.enablePersistence||(p=n)):(n=this.calculateIndividualLayerMarkerZoomLevel(r,d,10),p=sf.base.isNullOrUndefined(this.maps.mapScaleValue)?n:this.maps.mapScaleValue!==n?this.maps.mapScaleValue:n),this.maps.markerZoomFactor=p}}else this.maps.markerZoomedState=!1,this.maps.markerZoomFactor>1&&(this.maps.markerCenterLatitude=null,this.maps.markerCenterLongitude=null,this.maps.markerZoomFactor=1,this.maps.enablePersistence||(this.maps.mapScaleValue=1)),this.maps.isTileMap&&!this.maps.enablePersistence&&this.maps.mapScaleValue<=1&&(this.maps.tileZoomLevel=0===this.maps.mapScaleValue?1:this.maps.mapScaleValue,1===this.maps.mapScaleValue&&1===this.maps.markerZoomFactor&&(this.maps.tileTranslatePoint.x=0,this.maps.tileTranslatePoint.y=0))},e.prototype.markerClick=function(e){var t=e.target.id;if(!(-1===t.indexOf("_LayerIndex_")||t.indexOf("_cluster_")>0)){var i=this.getMarker(t);if(!sf.base.isNullOrUndefined(i)){var a={cancel:!1,name:Zt,data:i.data,maps:this.maps,marker:i.marker,target:t,x:e.clientX,y:e.clientY,latitude:i.data.latitude||i.data.Latitude,longitude:i.data.longitude||i.data.Longitude,value:i.data.name};if(this.maps.isBlazor){a.maps,a.marker;a=Bt(a,["maps","marker"])}this.maps.trigger(Zt,a)}}},e.prototype.markerClusterClick=function(e){var t=e.target.id;if(-1!==t.indexOf("_LayerIndex_")&&-1!==t.indexOf("_cluster_")){var i=this.getMarker(t);if(!sf.base.isNullOrUndefined(i)){i.clusterCollection.length>0&&this.maps.markerClusterExpand&&(Se(this.maps.element.id+"_mapsTooltip")&&this.maps.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")>-1&&me(this.maps.element.id+"_mapsTooltip"),this.sameMarkerData.length>0&&!this.maps.markerClusterExpandCheck?(this.maps.markerClusterExpandCheck=!0,X(this.sameMarkerData,this.maps,this.markerSVGObject)):(this.sameMarkerData=i.clusterCollection,this.maps.markerClusterExpandCheck=!1,Y(this.sameMarkerData,this.maps,this.markerSVGObject,!0)));var a={cancel:!1,name:Dt,data:i,maps:this.maps,target:t,x:e.clientX,y:e.clientY,latitude:i.data.latitude||i.data.Latitude,longitude:i.data.longitude||i.data.Longitude,markerClusterCollection:i.markCollection};if(this.maps.isBlazor){a.maps,a.latitude,a.longitude;a=Bt(a,["maps","latitude","longitude"])}this.maps.trigger(Dt,a)}}},e.prototype.getMarker=function(e){var t,i,a=e.split("_LayerIndex_"),o=parseInt(a[1].split("_")[0],10),n=this.maps.layers[o],s=[],l=[];if(this.maps.markerClusterExpand=n.markerClusterSettings.allowClusterExpand,e.indexOf("_MarkerIndex_")>-1){var r=parseInt(a[1].split("_MarkerIndex_")[1].split("_")[0],10),d=parseInt(a[1].split("_dataIndex_")[1].split("_")[0],10);if(i=n.markerSettings[r],!isNaN(r)){t=i.dataSource[d];var p=[];if(!i.template&&e.indexOf("_cluster_")>-1&&this.maps.layers[o].markerClusterSettings.allowClusterExpand&&Array.prototype.forEach.call(i.dataSource,(function(e,i){e.latitude===t.latitude&&e.longitude===t.longitude&&p.push({data:t,index:i})})),e.indexOf("_cluster_")>-1){var h=document.getElementById(e.indexOf("_datalabel_")>-1?e.split("_datalabel_")[0]:e).innerHTML.split(",").map(Number);p=[];for(var c=0,m=h;c<m.length;c++){var u=m[c];p.push({data:i.dataSource[u],index:u}),this.maps.isBlazor&&(i.dataSource[u].text=""),s.push(i.dataSource[u])}!1,l.push({data:p,layerIndex:o,markerIndex:r,dataIndex:d,targetClusterIndex:+(e.split("_cluster_")[1].indexOf("_datalabel_")>-1?e.split("_cluster_")[1].split("_datalabel_")[0]:e.split("_cluster_")[1]),isClusterSame:!1})}return{marker:i,data:t,clusterCollection:l,markCollection:s}}}return null},e.prototype.markerMove=function(e){var t=e.target.id;if(!(-1===t.indexOf("_LayerIndex_")||t.indexOf("_cluster_")>0)){var i=this.getMarker(t);if(!sf.base.isNullOrUndefined(i)){var a={cancel:!1,name:Ht,data:i.data,maps:this.maps,target:t,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){a.maps;a=Bt(a,["maps"])}this.maps.trigger(Ht,a)}}},e.prototype.markerClusterMouseMove=function(e){var t=e.target.id;if(-1!==t.indexOf("_LayerIndex_")&&-1!==t.indexOf("_cluster_")){var i=this.getMarker(t);if(this.maps.markerClusterExpand&&e.target.setAttribute("style","cursor: pointer"),!sf.base.isNullOrUndefined(i)){var a={cancel:!1,name:Vt,data:i.data,maps:this.maps,target:t,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){a.maps;a=Bt(a,["maps"])}this.maps.trigger(Vt,a)}}},e.prototype.getModuleName=function(){return"Marker"},e.prototype.destroy=function(e){},e}(),Rt="markerRendering",Ut="markerClusterRendering",Zt="markerClick",Dt="markerClusterClick",Ht="markerMouseMove",Vt="markerClusterMouseMove",Gt="animationComplete",Wt="itemSelection",qt=function(){function e(e){this.maps=e}return e.prototype.getBingMap=function(e,t,i,a,o,n){for(var s,l="",r=Math.min(this.maps.tileZoomLevel,parseInt(this.maxZoom,10));r>0;r--){var d=0,p=1<<r-1;0!=(e.x&p)&&d++,0!=(e.y&p)&&(d+=2),l=l+""+d}return s=n[Math.min(parseInt(l.substr(l.length-1,1),10),n.length)],(o=o.replace("{quadkey}",l).replace("{subdomain}",s))+"&mkt="+a+"&ur=IN&Key="+t},e}(),Xt=function(){function e(e){this.maps=e}return e.prototype.getShapeColorMapping=function(e,t,i){var a=e.colorValuePath?e.colorValuePath:e.valuePath,o=sf.base.isNullOrUndefined(a)?t[a]:a.indexOf(".")>-1?V(t,a):t[a],n=Number(o),s=this.getColorByValue(e.colorMapping,n,o);return sf.base.isNullOrUndefined(s)?i:s},e.prototype.getColorByValue=function(e,t,i){if(isNaN(t)&&sf.base.isNullOrUndefined(i))return null;for(var a,o="",n=0,s=e;n<s.length;n++){var l=s[n];(!sf.base.isNullOrUndefined(l.from)&&!sf.base.isNullOrUndefined(l.to)&&t>=l.from&&t<=l.to||l.value===i)&&(o="[object Array]"===Object.prototype.toString.call(l.color)?sf.base.isNullOrUndefined(l.value)?this.getColor(l,t):l.color[0]:l.color),(t>=l.from&&t<=l.to||l.value===i)&&!sf.base.isNullOrUndefined(l.minOpacity)&&!sf.base.isNullOrUndefined(l.maxOpacity)&&o&&(a=this.deSaturationColor(l,o,t,i)),(""===o||sf.base.isNullOrUndefined(o))&&sf.base.isNullOrUndefined(l.from)&&sf.base.isNullOrUndefined(l.to)&&sf.base.isNullOrUndefined(l.minOpacity)&&sf.base.isNullOrUndefined(l.maxOpacity)&&sf.base.isNullOrUndefined(l.value)&&(o="[object Array]"===Object.prototype.toString.call(l.color)?l.color[0]:l.color)}return{fill:o||(e.length?null:i),opacity:a}},e.prototype.deSaturationColor=function(e,t,i,a){var o=1;(i>=e.from&&i<=e.to||e.value===a)&&(o=(isNaN(i)?e.from/(e.to-e.from):(i-e.from)/(e.to-e.from))*(e.maxOpacity-e.minOpacity)+e.minOpacity);return o},e.prototype.rgbToHex=function(e,t,i){return"#"+this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(i)},e.prototype.componentToHex=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},e.prototype.getColor=function(e,t){var i,a="";return Number(t)===e.from?a=e.color[0]:Number(t)===e.to?a=e.color[e.color.length-1]:(i=this.getGradientColor(Number(t),e),a=this.rgbToHex(i.r,i.g,i.b)),a},e.prototype.getGradientColor=function(e,t){var i,a,o=t.from,n=t.to,s=0,l=n-o;if(s=(e-o)/l,t.color.length<=2)i="#"===t.color[0].charAt(0)?t.color[0]:this._colorNameToHex(t.color[0]),a="#"===t.color[t.color.length-1].charAt(0)?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]);else{i="#"===t.color[0].charAt(0)?t.color[0]:this._colorNameToHex(t.color[0]),a="#"===t.color[t.color.length-1].charAt(0)?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]);for(var r=l/(t.color.length-1),d=t.color.length-1,p=[],h={},c=1;c<d;c++)h={b:o+c*r,color:t.color[c]},p.push(h);for(var m=0;m<p.length;m++)o<=e&&e<=p[m].b&&0===m?(a="#"===p[m].color.charAt(0)?p[m].color:this._colorNameToHex(p[m].color),s=e<p[m].b?1-Math.abs((e-p[m].b)/r):(e-p[m].b)/r):p[m].b<=e&&e<=n&&m===p.length-1&&(i="#"===p[m].color.charAt(0)?p[m].color:this._colorNameToHex(p[m].color),s=e<p[m].b?1-Math.abs((e-p[m].b)/r):(e-p[m].b)/r),m!==p.length-1&&m<p.length&&p[m].b<=e&&e<=p[m+1].b&&(i="#"===p[m].color.charAt(0)?p[m].color:this._colorNameToHex(p[m].color),a="#"===p[m+1].color.charAt(0)?p[m+1].color:this._colorNameToHex(p[m+1].color),s=Math.abs(e-p[m+1].b)/r)}return this.getPercentageColor(s,i,a)},e.prototype.getPercentageColor=function(e,t,i){var a=i.split("#")[1],o=t.split("#")[1],n=this.getPercentage(e,parseInt(o.substr(0,2),16),parseInt(a.substr(0,2),16)),s=this.getPercentage(e,parseInt(o.substr(2,2),16),parseInt(a.substr(2,2),16)),l=this.getPercentage(e,parseInt(o.substr(4,2),16),parseInt(a.substr(4,2),16));return new P(n,s,l)},e.prototype.getPercentage=function(e,t,i){var a=i-t;return Math.round(t+a*e)},e.prototype._colorNameToHex=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",orchid:"#da70d6",papayawhip:"#ffefd5",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"[object Array]"===Object.prototype.toString.call(e)?e:void 0!==t[e.toLowerCase()]?t[e.toLowerCase()]:e},e}(),Yt=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]])}return i},Jt=function(){function e(e){this.isMapCoordinates=!0,this.horizontalPan=!1,this.horizontalPanXCount=0,this.mapObject=e,this.ajaxModule=new sf.base.Ajax,this.ajaxResponse=[]}return e.prototype.measureLayerPanel=function(){var e=this,t=this.mapObject.layersCollection,i=this.mapObject.mapAreaRect,a=ye(this.mapObject.element.id+"_Secondary_Element");if(this.mapObject.isTileMap&&a){this.tileSvgObject=this.mapObject.renderer.createSvg({id:this.mapObject.element.id+"_Tile_SVG",width:i.width,height:i.height});var o=sf.base.createElement("div",{id:this.mapObject.element.id+"_Tile_SVG_Parent",styles:"position: absolute; height: "+i.height+"px; width: "+i.width+"px;"});o.appendChild(this.tileSvgObject),a.appendChild(o)}if(this.layerGroup=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_Layer_Collections","clip-path":"url(#"+this.mapObject.element.id+"_MapArea_ClipRect)"}),"GoogleStaticMap"===this.mapObject.layers[this.mapObject.baseLayerIndex].layerType){this.clipRectElement=this.mapObject.renderer.drawClipPath(new I(this.mapObject.element.id+"_MapArea_ClipRect","transparent",{width:1,color:"Gray"},1,{x:(i.width-640)/2,y:0,width:640,height:i.height}))}else this.clipRectElement=this.mapObject.renderer.drawClipPath(new I(this.mapObject.element.id+"_MapArea_ClipRect","transparent",{width:1,color:"Gray"},1,{x:this.mapObject.isTileMap?0:i.x,y:this.mapObject.isTileMap?0:i.y,width:i.width,height:i.height}));this.layerGroup.appendChild(this.clipRectElement),this.mapObject.baseMapBounds=null,this.mapObject.baseMapRectBounds=null,this.mapObject.baseSize=null,Array.prototype.forEach.call(t,(function(t,i){e.currentLayer=t,e.processLayers(t,i)}))},e.prototype.renderTileLayer=function(e,t,i,a){e.currentFactor=e.calculateFactor(t),e.mapObject.defaultState=!(1!==e.mapObject.zoomSettings.zoomFactor&&!sf.base.isNullOrUndefined(e.mapObject.tileZoomLevel)&&1!==e.mapObject.tileZoomLevel),sf.base.isNullOrUndefined(e.mapObject.previousCenterLatitude)&&sf.base.isNullOrUndefined(e.mapObject.previousCenterLongitude)?(e.mapObject.previousCenterLatitude=e.mapObject.centerPosition.latitude,e.mapObject.previousCenterLongitude=e.mapObject.centerPosition.longitude):e.mapObject.previousCenterLatitude!==e.mapObject.centerPosition.latitude&&e.mapObject.previousCenterLongitude!==e.mapObject.centerPosition.longitude?(e.mapObject.centerPositionChanged=!0,e.mapObject.previousCenterLatitude=e.mapObject.centerPosition.latitude,e.mapObject.previousCenterLongitude=e.mapObject.centerPosition.longitude):e.mapObject.centerPositionChanged=!1;var o=new O(e.mapObject.centerPosition.longitude,e.mapObject.centerPosition.latitude),n=o;this.mapObject.isTileMap&&e.mapObject.markerModule&&e.mapObject.zoomSettings.enable&&(e.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection),sf.base.isNullOrUndefined(this.mapObject.markerCenterLatitude)||sf.base.isNullOrUndefined(this.mapObject.markerCenterLongitude)||(n=new O(e.mapObject.markerCenterLongitude,e.mapObject.markerCenterLatitude))),o=!e.mapObject.zoomSettings.shouldZoomInitially&&e.mapObject.centerPosition.longitude&&e.mapObject.centerPosition.latitude&&!e.mapObject.zoomPersistence&&e.mapObject.defaultState?new O(e.mapObject.centerPosition.longitude,e.mapObject.centerPosition.latitude):e.mapObject.zoomSettings.shouldZoomInitially&&e.mapObject.markerZoomedState&&!e.mapObject.zoomPersistence&&!sf.base.isNullOrUndefined(e.mapObject.markerZoomCenterPoint)?new O(e.mapObject.markerZoomCenterPoint.longitude,e.mapObject.markerZoomCenterPoint.latitude):{x:null,y:null};var s=e.mapObject.zoomSettings.shouldZoomInitially?sf.base.isNullOrUndefined(e.mapObject.markerZoomFactor)?1:e.mapObject.markerZoomFactor:e.mapObject.zoomSettings.zoomFactor;if(s=e.mapObject.enablePersistence?sf.base.isNullOrUndefined(e.mapObject.mapScaleValue)?sf.base.isNullOrUndefined(e.mapObject.markerZoomFactor)?e.mapObject.zoomSettings.zoomFactor:e.mapObject.markerZoomFactor:e.mapObject.mapScaleValue:s,s=e.mapObject.zoomSettings.enable?s:e.mapObject.zoomSettings.zoomFactor,sf.base.isNullOrUndefined(e.mapObject.tileZoomLevel)?(e.mapObject.tileZoomLevel=s,e.mapObject.previousZoomFactor=s):this.mapObject.isReset&&1===e.mapObject.tileZoomLevel&&!e.mapObject.zoomSettings.shouldZoomInitially?e.mapObject.tileZoomLevel=e.mapObject.tileZoomLevel:(1!==e.mapObject.zoomSettings.zoomFactor||e.mapObject.zoomSettings.shouldZoomInitially)&&(e.mapObject.tileZoomLevel=e.mapObject.defaultState&&e.mapObject.zoomSettings.enable?e.mapObject.tileZoomLevel:e.mapObject.zoomSettings.shouldZoomInitially||e.mapObject.centerPositionChanged?s:e.mapObject.previousZoomFactor!==e.mapObject.zoomSettings.zoomFactor?e.mapObject.zoomSettings.zoomFactor:e.mapObject.tileZoomLevel,!sf.base.isNullOrUndefined(e.mapObject.tileTranslatePoint)&&(e.mapObject.markerZoomFactor!==e.mapObject.mapScaleValue||sf.base.isNullOrUndefined(e.mapObject.markerZoomFactor)&&sf.base.isNullOrUndefined(e.mapObject.mapScaleValue))&&(e.mapObject.zoomSettings.zoomFactor<=1||e.mapObject.previousZoomFactor!==e.mapObject.zoomSettings.zoomFactor)&&(e.mapObject.tileTranslatePoint.x=0,e.mapObject.tileTranslatePoint.y=0)),s<=1&&!sf.base.isNullOrUndefined(e.mapObject.height)&&!e.mapObject.zoomSettings.shouldZoomInitially&&e.mapObject.tileZoomLevel===e.mapObject.tileZoomScale&&this.mapObject.initialCheck&&be(this.mapObject),sf.base.isNullOrUndefined(e.mapObject.centerLatOfGivenLocation)||sf.base.isNullOrUndefined(e.mapObject.centerLongOfGivenLocation)||!e.mapObject.zoomNotApplied||(n.y=e.mapObject.centerLatOfGivenLocation,n.x=e.mapObject.centerLongOfGivenLocation,e.mapObject.tileZoomLevel=e.mapObject.mapScaleValue=e.mapObject.scaleOfGivenLocation),e.mapObject.tileTranslatePoint=e.panTileMap(e.mapObject.availableSize.width,e.mapObject.availableSize.height,n),this.mapObject.zoomSettings.resetToInitial&&this.mapObject.initialCheck&&!sf.base.isNullOrUndefined(e.mapObject.height)&&this.mapObject.availableSize.height>512){this.mapObject.applyZoomReset=!0,this.mapObject.initialZoomLevel=Math.floor(this.mapObject.availableSize.height/512)+1;var l="GoogleStaticMap"!==this.mapObject.layers[this.mapObject.baseLayerIndex].layerType?20:0,r=256*Math.pow(2,this.mapObject.initialZoomLevel);this.mapObject.initialTileTranslate.x=this.mapObject.availableSize.width/2-r/2,this.mapObject.initialTileTranslate.y=this.mapObject.availableSize.height/2-r/2+l}e.generateTiles(e.mapObject.tileZoomLevel,e.mapObject.tileTranslatePoint,null,a),sf.base.isNullOrUndefined(e.mapObject.previousZoomFactor)||e.mapObject.previousZoomFactor===e.mapObject.zoomSettings.zoomFactor||(e.mapObject.previousZoomFactor=e.mapObject.zoomSettings.zoomFactor),e.mapObject.navigationLineModule&&e.layerObject.appendChild(e.mapObject.navigationLineModule.renderNavigation(e.currentLayer,e.mapObject.tileZoomLevel,i)),e.mapObject.markerModule&&e.mapObject.markerModule.markerRender(e.layerObject,i,e.mapObject.tileZoomLevel,null),e.translateLayerElements(e.layerObject,i),e.layerGroup.appendChild(e.layerObject)},e.prototype.processLayers=function(e,t){var i=this;if(this.layerObject=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_LayerIndex_"+t}),!this.mapObject.enablePersistence){var a=this.mapObject.getModuleName()+this.mapObject.element.id;-1===navigator.userAgent.indexOf("Edge")&&!sf.base.isNullOrUndefined(window.localStorage)&&window.localStorage.getItem(a)&&window.localStorage.removeItem(a)}var o={cancel:!1,name:"layerRendering",index:t,layer:e,maps:this.mapObject,visible:e.visible};if(this.mapObject.isBlazor){o.maps,o.layer;var n=Yt(o,["maps","layer"]);o=n}this.mapObject.trigger("layerRendering",o,(function(a){if(!o.cancel&&o.visible)if("Geometry"!==e.layerType){if("Bing"!==e.layerType||i.bing)i.renderTileLayer(i,e,t);else if(e.key&&e.key.length>1){var n=i,s=new qt(i.mapObject),l="https://dev.virtualearth.net/REST/V1/Imagery/Metadata/"+("AerialWithLabel"===e.bingMapType?"AerialWithLabelsOnDemand":e.bingMapType),r=new sf.base.Ajax({url:l+"?output=json&include=ImageryProviders&urischeme=https&key="+e.key});r.onSuccess=function(a){var o=JSON.parse(a).resourceSets[0].resources[0],l=o.imageUrl,r=o.imageUrlSubdomains,d=o.zoomMax;null!=l&&l!==s.imageUrl&&(s.imageUrl=l),null!=r&&r!==s.subDomains&&(s.subDomains=r),null!=d&&d!==s.maxZoom&&(s.maxZoom=d),n.mapObject.bingMap=s,n.renderTileLayer(n,e,t,s),i.mapObject.arrangeTemplate()},r.send()}}else if(!(sf.base.isNullOrUndefined(e.shapeData)||sf.base.isNullOrUndefined(e.shapeData.geometries)&&sf.base.isNullOrUndefined(e.shapeData.features))){var d=!sf.base.isNullOrUndefined(e.shapeData.geometries)&&e.shapeData.geometries.length>0?e.shapeData.geometries:e.shapeData.features;e.layerData=[];var p=e.shapeData.bbox;!sf.base.isNullOrUndefined(p)&&e.isBaseLayer?i.mapObject.baseMapBounds=new M({min:p[0][1],max:p[1][1]},{min:p[0][0],max:p[1][0]}):sf.base.isNullOrUndefined(i.mapObject.baseMapBounds)&&!pe(d)&&i.calculateRectBounds(d),i.calculatePathCollection(t,d)}})),this.mapObject.isTileMap?this.tileSvgObject&&(this.tileSvgObject.appendChild(this.layerGroup),this.mapObject.baseMapBounds=null):this.mapObject.svgObject.appendChild(this.layerGroup)},e.prototype.bubbleCalculation=function(e,t){if(null!=e.dataSource&&null!=e)for(var i=0;i<e.dataSource.length;i++){var a=sf.base.isNullOrUndefined(e.valuePath)?parseFloat(e.dataSource[i][e.valuePath]):e.valuePath.indexOf(".")>-1?Number(V(e.dataSource[i],e.valuePath)):parseFloat(e.dataSource[i][e.valuePath]);0!==i?a>t.max?t.max=a:a<t.min&&(t.min=a):t.max=t.min=a}},e.prototype.calculatePathCollection=function(e,t){var i=this;this.groupElements=[],pe(t)||(this.currentFactor=this.calculateFactor(this.currentLayer)),this.rectBounds=null;var a=this.currentLayer.shapeSettings;this.currentLayer.bubbleSettings;Array.prototype.forEach.call(t,(function(e,t){if(!sf.base.isNullOrUndefined(e.geometry)||!sf.base.isNullOrUndefined(e.coordinates)){var a=sf.base.isNullOrUndefined(e.geometry)?e.type:e.geometry.type,o=sf.base.isNullOrUndefined(e.geometry)?e.coordinates:e.geometry.coordinates,n=e.geometry,s=e.properties;i.generatePoints(a,o,n,s)}})),this.currentLayer.rectBounds=this.rectBounds,sf.base.isNullOrUndefined(this.mapObject.baseMapRectBounds)&&this.currentLayer.isBaseLayer&&(this.mapObject.baseMapRectBounds=this.rectBounds);var o=a.palette.length>1?a.palette:(this.mapObject.theme,["#B5E485","#7BC1E8","#DF819C","#EC9B79","#78D0D3","#D6D572","#9178E3","#A1E5B4","#87A4B4","#E4C16C"]),n=sf.base.createElement("div",{id:this.mapObject.element.id+"_LayerIndex_"+e+"_Label_Template_Group",className:this.mapObject.element.id+"_template",styles:"pointer-events: none; overflow: hidden; position: absolute;top:"+this.mapObject.mapAreaRect.y+"px;left:"+this.mapObject.mapAreaRect.x+"px;height:"+this.mapObject.mapAreaRect.height+"px;width:"+this.mapObject.mapAreaRect.width+"px;"});if(0!==this.currentLayer.layerData.length)for(var s=function(s){var r,d,p,h,c,m,u=void 0,g=l.currentLayer.layerData[s],f="",b="",y=a.autofill?o[s%o.length]:a.fill;null===a.colorValuePath||sf.base.isNullOrUndefined(g.property)||(null!==(u=ne(l.currentLayer.dataSource,g.property,l.currentLayer.shapeDataPath,l.currentLayer.shapePropertyPath,l.currentLayer))&&0===a.colorMapping.length?y=l.currentLayer.shapeSettings.colorValuePath.indexOf(".")>-1?V(l.currentLayer.dataSource[u],a.colorValuePath):l.currentLayer.dataSource[u][a.colorValuePath]:g.property[a.colorValuePath]&&0===l.currentLayer.dataSource.length&&0===a.colorMapping.length&&(y=l.currentLayer.shapeSettings.colorValuePath.indexOf(".")>-1?V(g.property,a.colorValuePath):g.property[a.colorValuePath]),y=sf.base.isNullOrUndefined(y)?a.fill:y);var v=l.mapObject.element.id+"_LayerIndex_"+e+"_shapeIndex_"+s+"_dataIndex_"+u;c=l.getShapeColorMapping(l.currentLayer,g.property,y),y="[object Object]"!==Object.prototype.toString.call(c)||sf.base.isNullOrUndefined(c.fill)?y:c.fill,m="[object Object]"!==Object.prototype.toString.call(c)||sf.base.isNullOrUndefined(c.opacity)?a.opacity:c.opacity;var x={cancel:!1,name:"shapeRendering",index:s,data:l.currentLayer.dataSource?l.currentLayer.dataSource[u]:null,maps:l.mapObject,shape:a,fill:y,border:{width:a.border.width,color:a.border.color}};if(l.mapObject.isBlazor){x.maps;x=Yt(x,["maps"])}var S=function(l){var c,u=sf.base.isNullOrUndefined(g._isMultiPolygon)?sf.base.isNullOrUndefined(g.type)?g[0].type:g.type:"MultiPolygon";if(u="Polygon"===u||"MultiPolygon"===u?"Polygon":u,l.cancel?(l.fill=y,l.border.color=a.border.color,l.border.width=a.border.width,i.mapObject.layers[e].shapeSettings.border=a.border):(l.fill="#A6A6A6"===l.fill?l.shape.fill:l.fill,l.border.color="#000000"===l.border.color?l.shape.border.color:l.border.color,l.border.width=0===l.border.width?l.shape.border.width:l.border.width,i.mapObject.layers[e].shapeSettings.border=l.border),i.groupElements.length<1)h=i.mapObject.renderer.createGroup({id:i.mapObject.element.id+"_LayerIndex_"+e+"_"+u+"_Group",transform:""}),i.groupElements.push(h);else for(var x=0;x<i.groupElements.length;x++){var S=i.groupElements[x];if(S.id.indexOf(u)>-1){h=S;break}if(x>=i.groupElements.length-1){h=i.mapObject.renderer.createGroup({id:i.mapObject.element.id+"_LayerIndex_"+e+"_"+u+"_Group"}),i.groupElements.push(h);break}}switch(u){case"Polygon":g._isMultiPolygon?f=i.generateMultiPolygonPath(g):(f+="M"+g[0].point.x+" "+g[0].point.y,g.map((function(e){f+=" L "+e.point.x+" "+e.point.y}))),(f+=" z ").length>3&&(r=new w(v,l.fill,l.border.width,l.border.color,m,a.dashArray,f),c=i.mapObject.renderer.drawPath(r));break;case"LineString":g.map((function(e){b+=e.point.x+" , "+e.point.y+" "})),d=new N(v,b,l.fill,l.border.width,l.border.color,m,a.dashArray),c=i.mapObject.renderer.drawPolyline(d);break;case"Point":var O=g.point;p=new T(v,l.fill,l.border,m,O.x,O.y,a.circleRadius,null),c=i.mapObject.renderer.drawCircle(p);break;case"Path":f=g.point,r=new w(v,l.fill,l.border.width,l.border.color,m,a.dashArray,f),c=i.mapObject.renderer.drawPath(r)}if(!sf.base.isNullOrUndefined(c)){for(var _="[object Array]"===Object.prototype.toString.call(i.currentLayer.shapePropertyPath)?i.currentLayer.shapePropertyPath:[i.currentLayer.shapePropertyPath],M=void 0,C=0;C<_.length;C++)if(!sf.base.isNullOrUndefined(g.property)){M=_[C];break}if(c.setAttribute("aria-label",sf.base.isNullOrUndefined(g.property)?"":g.property[M]),c.setAttribute("tabindex",(i.mapObject.tabIndex+s+2).toString()),Q(i.mapObject.selectedElementId,i.mapObject.shapeSelectionClass,c,"ShapeselectionMapStyle"),i.mapObject.toggledShapeElementId)for(C=0;C<i.mapObject.toggledShapeElementId.length;C++){var L=i.mapObject.legendSettings.toggleLegendSettings.applyShapeSettings?i.currentLayer.shapeSettings:i.mapObject.legendSettings.toggleLegendSettings;i.mapObject.toggledShapeElementId[C]===c.id&&(c.setAttribute("fill",L.fill),c.setAttribute("stroke",L.border.color),c.setAttribute("opacity",L.opacity.toString()),c.setAttribute("stroke-width",L.border.width.toString()))}h.appendChild(c)}s===i.currentLayer.layerData.length-1&&i.layerFeatures(e,o,t,n)};S.bind(l),l.mapObject.trigger("shapeRendering",x,S)},l=this,r=0;r<this.currentLayer.layerData.length;r++)s(r);else this.layerFeatures(e,o,t,n)},e.prototype.layerFeatures=function(e,t,i,a){var o,n=this;if(this.currentLayer.bubbleSettings.length&&this.mapObject.bubbleModule)for(var s,l=this.currentLayer.bubbleSettings.length,r=function(i){s=d.currentLayer.bubbleSettings[i],o=d.mapObject.renderer.createGroup({id:d.mapObject.element.id+"_LayerIndex_"+e+"_bubble_Group_"+i});var a={min:0,max:0};d.bubbleCalculation(s,a),s.dataSource.map((function(l,r){n.renderBubble(n.currentLayer,l,t[r%t.length],a,i,r,o,e,s)})),d.groupElements.push(o)},d=this,p=0;p<l;p++)r(p);this.mapObject.markerModule&&!this.mapObject.isTileMap&&this.mapObject.zoomSettings.enable&&this.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection);var h=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_LayerIndex_"+e+"_dataLableIndex_Group",style:"pointer-events: none;"});if(this.mapObject.dataLabelModule&&this.currentLayer.dataLabelSettings.visible){var c=[];i.map((function(t,i){n.renderLabel(n.currentLayer,e,t,h,i,a,c)})),this.groupElements.push(h)}this.mapObject.navigationLineModule&&this.groupElements.push(this.mapObject.navigationLineModule.renderNavigation(this.currentLayer,this.currentFactor,e)),this.groupElements.map((function(e){n.layerObject.appendChild(e)})),this.mapObject.markerModule&&this.mapObject.markerModule.markerRender(this.layerObject,e,this.mapObject.isTileMap?Math.floor(this.currentFactor):this.currentFactor,null),this.translateLayerElements(this.layerObject,e),this.layerGroup.appendChild(this.layerObject)},e.prototype.renderLabel=function(e,t,i,a,o,n,s){this.mapObject.dataLabelModule.renderLabel(e,t,i,e.layerData,a,n,o,s)},e.prototype.generateMultiPolygonPath=function(e){for(var t="",i=0;i<e.length;i++)t+="M"+e[i][0].point.x+" "+e[i][0].point.y,e[i].map((function(e){t+=" L "+e.point.x+" "+e.point.y}));return t},e.prototype.renderBubble=function(e,t,i,a,o,n,s,l,r){if(sf.base.isNullOrUndefined(this.mapObject.bubbleModule)||!r.visible)return null;i=r.fill?r.fill:i,this.mapObject.bubbleModule.id=this.mapObject.element.id+"_LayerIndex_"+l+"_BubbleIndex_"+o+"_dataIndex_"+n,this.mapObject.bubbleModule.renderBubble(r,t,i,a,o,n,l,e,s,this.mapObject.bubbleModule.id)},e.prototype.getShapeColorMapping=function(e,t,i){if(i=i||e.shapeSettings.fill,0===e.shapeSettings.colorMapping.length&&sf.base.isNullOrUndefined(e.dataSource))return i;var a=ne(e.dataSource,t,e.shapeDataPath,e.shapePropertyPath),o=new Xt(this.mapObject);return sf.base.isNullOrUndefined(e.dataSource[a])?i:o.getShapeColorMapping(e.shapeSettings,e.dataSource[a],i)},e.prototype.generatePoints=function(e,t,i,a){var o,n,s=this,l=[];switch(e.toLowerCase()){case"polygon":(l=this.calculatePolygonBox(t[0],i,a)).length>0&&(l.property=a,l.type=e,l._isMultiPolygon=!1,this.currentLayer.layerData.push(l));break;case"multipolygon":for(var r=[],d=0;d<t.length;d++)(l=this.calculatePolygonBox(t[d][0],i,a)).length>0&&r.push(l);r.property=a,r.type=e,r._isMultiPolygon=!0,this.currentLayer.layerData.push(r);break;case"linestring":t.map((function(e,t){o=e[1],n=e[0];var i=c(o,n,s.currentFactor,s.currentLayer,s.mapObject);l.push({point:i,lat:o,lng:n})})),l.property=a,l.type=e,this.currentLayer.layerData.push(l);break;case"point":var p=!1;if(t.map((function(t,i){if("[object Array]"===Object.prototype.toString.call(t)){o=t[1],n=t[0],p=!0;var l=c(o,n,s.currentFactor,s.currentLayer,s.mapObject);s.currentLayer.layerData.push({point:l,type:e,lat:o,lng:n,property:a})}})),!p){o=t[1],n=t[0];var h=c(o,n,this.currentFactor,this.currentLayer,this.mapObject);this.currentLayer.layerData.push({point:h,type:e,lat:o,lng:n,property:a})}break;case"path":this.currentLayer.layerData.push({point:i.d,type:e,property:a})}},e.prototype.calculateFactor=function(e){var t,i,a,o=1,s=this.mapObject.baseMapBounds,l=new n(this.mapObject.mapAreaRect.width,this.mapObject.mapAreaRect.height-5);if(s){var r=c(s.latitude.min,s.longitude.min,null,e,this.mapObject),d=c(s.latitude.max,s.longitude.max,null,e,this.mapObject);i=d.y-r.y,a=d.x-r.x}else i=a=500;return t=i<l.height?parseFloat(Math.abs(100*Number(l.height/Number(i.toString()+"e+1"))).toString().split(".")[0])/10:l.height/i,o=a<l.width?parseFloat(Math.abs(100*Number(l.width/Number(a.toString()+"e+1"))).toString().split(".")[0])/10:l.width/a,Math.min(o,t)},e.prototype.translateLayerElements=function(e,t){var i;if(this.mapObject.translateType="layer",sf.base.isNullOrUndefined(this.mapObject.baseMapRectBounds)){if(this.mapObject.isTileMap&&!sf.base.isNullOrUndefined(this.mapObject.scale))for(var a=0;a<e.childElementCount;a++)if(!((i=e.childNodes[a]).id.indexOf("_Markers_Group")>-1||i.id.indexOf("_bubble_Group")>-1||i.id.indexOf("_dataLableIndex_Group")>-1||i.id.indexOf("_line_Group")>-1)){p="scale( "+this.mapObject.scale+" ) translate( "+this.mapObject.translatePoint.x+" "+this.mapObject.translatePoint.y+" ) ";i.setAttribute("transform",p)}}else{var o=this.currentLayer.animationDuration,n=0!==o||sf.base.isNullOrUndefined(this.mapObject.zoomModule);this.mapObject.baseTranslatePoint=this.mapObject.zoomTranslatePoint;var s=void 0;s=this.mapObject.zoomSettings.zoomFactor>1&&!sf.base.isNullOrUndefined(this.mapObject.zoomModule)?fe(this.mapObject,this.currentLayer,n):ge(this.mapObject,this.currentLayer,n);var l=this.mapObject.previousScale=s.scale,r=this.mapObject.previousPoint=s.location;this.mapObject.baseTranslatePoint=this.mapObject.translatePoint=r,this.mapObject.baseScale=this.mapObject.scale=l;for(var d=0;d<e.childElementCount;d++)if(!((i=e.childNodes[d]).id.indexOf("_Markers_Group")>-1||i.id.indexOf("_bubble_Group")>-1||i.id.indexOf("_dataLableIndex_Group")>-1)){var p="scale( "+l+" ) translate( "+r.x+" "+r.y+" ) ";i.setAttribute("transform",p),o>0&&!sf.base.isNullOrUndefined(this.mapObject.zoomModule)&&(s=this.mapObject.zoomSettings.zoomFactor>1?fe(this.mapObject,this.currentLayer):ge(this.mapObject,this.currentLayer),this.mapObject.scale=s.scale,this.mapObject.zoomTranslatePoint=this.mapObject.translatePoint=s.location)}}},e.prototype.calculateRectBounds=function(e){var t=this;Array.prototype.forEach.call(e,(function(e,i){if(!sf.base.isNullOrUndefined(e.geometry)||!sf.base.isNullOrUndefined(e.coordinates)){var a=sf.base.isNullOrUndefined(e.geometry)?e.type:e.geometry.type,o=sf.base.isNullOrUndefined(e.geometry)?e.coordinates:e.geometry.coordinates;switch(a.toLowerCase()){case"polygon":t.calculateRectBox(o[0]);break;case"multipolygon":o.map((function(e,i){t.calculateRectBox(e[0])}))}}}))},e.prototype.calculatePolygonBox=function(e,t,i){var a=this,o=[],n=this.mapObject.baseMapBounds;return e.map((function(e,t){var i=e[1],s=e[0];if(s>=n.longitude.min&&s<=n.longitude.max&&i>=n.latitude.min&&i<=n.latitude.max){var l=c(i,s,a.currentFactor,a.currentLayer,a.mapObject);sf.base.isNullOrUndefined(a.rectBounds)?a.rectBounds={min:{x:l.x,y:l.y},max:{x:l.x,y:l.y}}:(a.rectBounds.min.x=Math.min(a.rectBounds.min.x,l.x),a.rectBounds.min.y=Math.min(a.rectBounds.min.y,l.y),a.rectBounds.max.x=Math.max(a.rectBounds.max.x,l.x),a.rectBounds.max.y=Math.max(a.rectBounds.max.y,l.y)),o.push({point:l,lat:i,lng:s})}})),o},e.prototype.calculateRectBox=function(e){var t=this;Array.prototype.forEach.call(e,(function(e){sf.base.isNullOrUndefined(t.mapObject.baseMapBounds)?t.mapObject.baseMapBounds=new M({min:e[1],max:e[1]},{min:e[0],max:e[0]}):(t.mapObject.baseMapBounds.latitude.min=Math.min(t.mapObject.baseMapBounds.latitude.min,e[1]),t.mapObject.baseMapBounds.latitude.max=Math.max(t.mapObject.baseMapBounds.latitude.max,e[1]),t.mapObject.baseMapBounds.longitude.min=Math.min(t.mapObject.baseMapBounds.longitude.min,e[0]),t.mapObject.baseMapBounds.longitude.max=Math.max(t.mapObject.baseMapBounds.longitude.max,e[0]))}))},e.prototype.generateTiles=function(e,t,i,a,o){var n,s,l=this.mapObject.locale,r=this.mapObject.availableSize;this.tiles=[],n=s=Math.pow(2,e);var d=0,p=0;t.x+256*n<r.width&&(d=t.x>0?Math.ceil(t.x/256):0,p=t.x+256*n<r.width?Math.ceil((r.width-(t.x+256*n))/256):0),n+=d+p,"Pan"===i?(n=this.horizontalPanXCount>=n?this.horizontalPanXCount:n,this.horizontalPan=!1):(this.horizontalPanXCount=n,this.horizontalPan=!0);var h=this.mapObject.layers[this.mapObject.baseLayerIndex];this.urlTemplate=h.urlTemplate;var c=Math.min(s,(-t.y+r.height)/256+1),m=Math.min(n,(-t.x+r.width+256*p)/256+1),u=-(t.x+256*d+256)/256,g=-(t.y+256)/256;a=a||this.bing||this.mapObject.bingMap;for(var f=Math.round(u);f<Math.round(m);f++)for(var b=Math.round(g);b<Math.round(c);b++){var y=256*f+t.x,v=256*b+t.y;if(y>-256&&y<=r.width&&v>-256&&v<r.height&&b>=0){var x=f;f<0&&(x=x%s+s);var S=new At(x%s,b);if(S.left=y,S.top=v,"Bing"===h.layerType){var O=h.key;S.src=a.getBingMap(S,O,h.bingMapType,l,a.imageUrl,a.subDomains)}else S.src=this.urlTemplate.replace("level",e.toString()).replace("tileX",S.x.toString()).replace("tileY",S.y.toString());this.tiles.push(S)}}sf.base.isNullOrUndefined(i)||(i.indexOf("wheel")>1?(this.animateToZoomX=this.mapObject.availableSize.width/2-o.x-10,this.animateToZoomY=-o.y):(this.animateToZoomX=-10,this.animateToZoomY=10-(this.mapObject.availableSize.height/2+11.5)));for(var _=sf.base.extend([],this.tiles,[],!0),M=0,C=this.mapObject.layers;M<C.length;M++){var L=C[M];if("SubLayer"===L.type&&L.visible&&("OSM"===L.layerType||"Bing"===L.layerType))for(var w=0,P=_;w<P.length;w++){var I=P[w],T=sf.base.extend(I,{},{},!0);"Bing"===L.layerType?T.src=a.getBingMap(T,L.key,L.bingMapType,l,a.imageUrl,a.subDomains):T.src=L.urlTemplate.replace("level",e.toString()).replace("tileX",I.x.toString()).replace("tileY",I.y.toString()),this.tiles.push(T)}}this.arrangeTiles(i,this.animateToZoomX,this.animateToZoomY)},e.prototype.arrangeTiles=function(e,t,i){var a,o=this,n=document.getElementById(this.mapObject.element.id+"_tile_parent"),s=document.getElementById(this.mapObject.element.id+"_tiles");sf.base.isNullOrUndefined(e)||"Pan"===e||"Reset"===e||-1!==e.indexOf("ZoomOut")?a=0:(this.tileAnimation(e,t,i),a=250),"GoogleStaticMap"===this.mapObject.layers[this.mapObject.baseLayerIndex].layerType?this.renderGoogleMap(this.mapObject.layers[0].key,this.mapObject.staticMapZoom):setTimeout((function(){var t;n&&(n.style.zIndex="1"),s&&(s.style.zIndex="0",s.style.visibility="hidden"),!document.getElementById("animated_tiles")&&n?(t=sf.base.createElement("div",{id:o.mapObject.element.id+"_animated_tiles"}),n.appendChild(t)):"Pan"!==e&&s&&n?(s.appendChild(n.children[0]),t=sf.base.createElement("div",{id:o.mapObject.element.id+"_animated_tiles"}),n.appendChild(t)):t=n?n.children[0]:null;for(var i=0,a=0,l=o.tiles;a<l.length;a++){var r=l[a],d=sf.base.createElement("img");d.setAttribute("src",r.src);var p=void 0;document.getElementById("tile_"+i)&&"Pan"===e&&me("tile_"+i),(p=sf.base.createElement("div",{id:"tile_"+i})).style.position="absolute",p.style.left=r.left+"px",p.style.top=r.top+"px",p.style.height=r.height+"px",p.style.width=r.width+"px",p.appendChild(d),t&&t.appendChild(p),i++}}),a)},e.prototype.tileAnimation=function(e,t,i){var a=document.getElementById(this.mapObject.element.id+"_tile_parent"),o=document.getElementById("animated_tiles"),n=document.getElementById(this.mapObject.element.id+"_tiles"),s="2";if(0===e.indexOf("ZoomOut")){for(n.style.zIndex="1",a.style.zIndex="0";n.childElementCount>=1;)n.removeChild(n.children[0]);t=0,i=105,s="0.5"}else if("Reset"===e){for(n.style.zIndex="1",a.style.zIndex="0";1!==n.childElementCount&&0!==n.childElementCount;)n.removeChild(n.children[1]);o=n.children[0],t=0,i=0,s="1"}sf.base.isNullOrUndefined(o)||(o.style.transition="250ms",o.style.transform="translate("+t+"px, "+i+"px) scale("+s+")")},e.prototype.renderGoogleMap=function(e,t){var i,a,o,n=this.mapObject;t=this.mapObject.tileZoomLevel;var s=256*Math.pow(2,t);a=n.mapAreaRect.width/2-s/2,o=n.mapAreaRect.height/2-s/2;var l=0,r=0,d=m(new O(null,null),t,{x:a,y:o},this.isMapCoordinates);n.zoomModule&&n.zoomSettings.enable&&(l=n.zoomModule.mouseDownLatLong.x-n.zoomModule.mouseMoveLatLong.x,r=n.zoomModule.mouseDownLatLong.y-n.zoomModule.mouseMoveLatLong.y);var p,h,c=n.pointToLatLong(d.x-l,d.y-r);n.centerPosition.latitude=c.latitude,n.centerPosition.longitude=c.longitude;var u=(p=sf.base.isNullOrUndefined(parseInt(n.width,10))?parseInt(n.width,10)-22:Math.round(n.mapAreaRect.width))>640?(p-640)/2:0,g=(h=sf.base.isNullOrUndefined(parseInt(n.height,10))?parseInt(n.height,10)-22:Math.round(n.mapAreaRect.height))>640?(h-640)/2:0,f=n.layers[n.layers.length-1].staticMapType.toString().toLowerCase();i="https://maps.googleapis.com/maps/api/staticmap?size="+p+"x"+h+"&zoom="+t+"&center="+(n.centerPosition.latitude&&n.centerPosition.longitude?n.centerPosition.latitude.toString()+","+n.centerPosition.longitude.toString():"0,0")+"&maptype="+f+"&key="+e,document.getElementById(this.mapObject.element.id+"_tile_parent").innerHTML='<div id="'+this.mapObject.element.id+'_StaticGoogleMap"style="position:absolute; left:'+u+"px; top:"+g+'px"><img src="'+i+'"></div>'},e.prototype.panTileMap=function(e,t,i){this.mapObject.tileZoomLevel<=this.mapObject.tileZoomScale&&this.mapObject.initialCheck&&(this.mapObject.tileZoomLevel=this.mapObject.tileZoomScale);var a,o,n=this.mapObject.tileZoomLevel,s="GoogleStaticMap"!==this.mapObject.layers[this.mapObject.layers.length-1].layerType?20:0,l=256*Math.pow(2,n),r=m(i,n,{x:a=e/2-l/2,y:o=t/2-l/2},this.isMapCoordinates);if(s=this.mapObject.zoomNotApplied?0:s,a-=r.x-e/2,o=o-(r.y-t/2)+s,this.mapObject.scale=Math.pow(2,n-1),(sf.base.isNullOrUndefined(this.mapObject.tileTranslatePoint)||0===this.mapObject.tileTranslatePoint.y&&0===this.mapObject.tileTranslatePoint.x||sf.base.isNullOrUndefined(this.mapObject.previousTileWidth)||sf.base.isNullOrUndefined(this.mapObject.previousTileHeight))&&(this.mapObject.previousTileWidth=e,this.mapObject.previousTileHeight=t),!sf.base.isNullOrUndefined(this.mapObject.tileTranslatePoint)&&sf.base.isNullOrUndefined(i.x)&&(1===this.mapObject.zoomSettings.zoomFactor||this.mapObject.zoomSettings.zoomFactor!==n||!this.mapObject.defaultState)&&(e!==this.mapObject.previousTileWidth||t!==this.mapObject.previousTileHeight)){var d=a-(this.mapObject.previousTileWidth/2-l/2),p=o-(this.mapObject.previousTileHeight/2-l/2+s);this.mapObject.tileTranslatePoint.x=this.mapObject.tileTranslatePoint.x+d,this.mapObject.tileTranslatePoint.y=this.mapObject.tileTranslatePoint.y+p}return sf.base.isNullOrUndefined(this.mapObject.tileTranslatePoint)||this.mapObject.zoomNotApplied||(0===this.mapObject.tileTranslatePoint.x||this.mapObject.tileTranslatePoint.x===a||this.mapObject.centerPositionChanged||(a=this.mapObject.tileTranslatePoint.x),0===this.mapObject.tileTranslatePoint.y||this.mapObject.tileTranslatePoint.y===o||this.mapObject.centerPositionChanged||(o=this.mapObject.tileTranslatePoint.y)),this.mapObject.translatePoint=new O((a-.01*this.mapObject.scale)/this.mapObject.scale,(o-.01*this.mapObject.scale)/this.mapObject.scale),this.mapObject.previousTileWidth=e,this.mapObject.previousTileHeight=t,new O(a,o)},e}(),Kt=function(){function e(e){this.map=e}return e.prototype.renderAnnotationElements=function(){var e=this,t=this.map.element.id+"_Secondary_Element",i=sf.base.createElement("div",{id:this.map.element.id+"_Annotations_Group"});if(i.style.position="absolute",i.style.top="0px",i.style.left="0px",this.map.annotations.map((function(t,a){null!==t.content&&e.createAnnotationTemplate(i,t,a)})),i.childElementCount>0&&!sf.base.isNullOrUndefined(ye(t))){ye(t).appendChild(i);for(var a=0;a<this.map.annotations.length;a++)sf.base.updateBlazorTemplate(this.map.element.id+"_ContentTemplate_"+a,"ContentTemplate",this.map.annotations[a])}},e.prototype.createAnnotationTemplate=function(e,t,i){var a,o,n,s,l=this,r=this.map,d=r.availableSize,p=(r.element.id,sf.base.createElement("div",{id:r.element.id+"_Annotation_"+i,styles:"position: absolute; z-index:"+t.zIndex+";"})),h={cancel:!1,name:"annotationRendering",content:t.content,annotation:t};this.map.trigger("annotationRendering",h,(function(e){if(!h.cancel){if((n=xe(h.content))&&(window.Blazor||n(l.map,null,null,l.map.element.id+"_ContentTemplate_"+i).length))for(var t=(s=Array.prototype.slice.call(n(window.Blazor?{}:l.map,null,null,l.map.element.id+"_ContentTemplate_"+i))).length,a=0;a<t;a++)p.appendChild(s[a]);else p.appendChild(sf.base.createElement("div",{innerHTML:h.content}))}}));var c=Fe(p.cloneNode(!0),r.element),m=r.element.getBoundingClientRect(),u=r.svgObject.getBoundingClientRect();a=Math.abs(u.left-m.left),o=Math.abs(u.top-m.top);var g=t.x.indexOf("%")>-1?d.width/100*parseFloat(t.x):parseFloat(t.x),f=t.y.indexOf("%")>-1?d.height/100*parseFloat(t.y):parseFloat(t.y);switch(a="None"===t.horizontalAlignment?a+g:a,o="None"===t.verticalAlignment?o+f:o,t.verticalAlignment){case"Near":o+=f;break;case"Center":o=o+f+(u.height/2-c.height/2);break;case"Far":o=o+u.height+f-c.height}switch(t.horizontalAlignment){case"Near":a+=g;break;case"Center":a=a+g+(u.width/2-c.width/2);break;case"Far":a=a+u.width+g-c.width}p.style.left=a+"px",p.style.top=o+"px",e.appendChild(p)},e.prototype.getModuleName=function(){return"Annotations"},e.prototype.destroy=function(e){},e}(),Qt=function(){function e(e){this.control=e}return e.prototype.print=function(e){var t=this;this.printWindow=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWindow.moveTo(0,0),this.printWindow.resizeTo(screen.availWidth,screen.availHeight);var i={cancel:!1,htmlContent:this.getHTMLContent(e),name:"beforePrint"};this.control.trigger("beforePrint",i,(function(e){i.cancel||sf.base.print(i.htmlContent,t.printWindow)}))},e.prototype.getHTMLContent=function(e){var t=sf.base.createElement("div");return e?e instanceof Array?Array.prototype.forEach.call(e,(function(e){t.appendChild(Se(e).cloneNode(!0))})):e instanceof Element?t.appendChild(e.cloneNode(!0)):t.appendChild(Se(e).cloneNode(!0)):t.appendChild(this.control.element.cloneNode(!0)),t},e.prototype.getModuleName=function(){return"Print"},e.prototype.destroy=function(e){},e}(),$t=function(){function e(e){this.control=e}return e.prototype.export=function(e,t,i,a){var o=this;return new Promise((function(n,s){var l=sf.base.createElement("canvas",{id:"ej2-canvas",attrs:{width:o.control.availableSize.width.toString(),height:o.control.availableSize.height.toString()}});a=sf.base.isNullOrUndefined(a)?sf.pdfexport.PdfPageOrientation.Landscape:a;var r=document.getElementById(o.control.element.id+"_Tile_SVG_Parent"),d=window.URL.createObjectURL(new Blob("SVG"===e?[void 0]:[(new XMLSerializer).serializeToString(o.control.svgObject)],{type:"image/svg+xml"})),p=new sf.pdfexport.PdfDocument,h=new Image,c=l.getContext("2d");if(o.control.isTileMap)for(var m=new XMLHttpRequest,u=o.control.mapLayerPanel.tiles.length,g=function(s){var h=document.getElementById("tile_"+(s-1)),g=new Image;g.crossOrigin="Anonymous",c.fillStyle=o.control.background?o.control.background:"#FFFFFF",c.fillRect(0,0,o.control.availableSize.width,o.control.availableSize.height),c.font=o.control.titleSettings.textStyle.size+" Arial",c.fillStyle=document.getElementById(o.control.element.id+"_Map_title").getAttribute("fill"),c.fillText(o.control.titleSettings.text,parseFloat(document.getElementById(o.control.element.id+"_Map_title").getAttribute("x")),parseFloat(document.getElementById(o.control.element.id+"_Map_title").getAttribute("y"))),g.onload=function(){if(0===s||s===u+1?0===s?(c.setTransform(1,0,0,1,0,0),c.rect(0,parseFloat(r.style.top),parseFloat(r.style.width),parseFloat(r.style.height)),c.clip()):c.setTransform(1,0,0,1,parseFloat(r.style.left),parseFloat(r.style.top)):c.setTransform(1,0,0,1,parseFloat(h.style.left)+10,parseFloat(h.style.top)+parseFloat(document.getElementById(o.control.element.id+"_tile_parent").style.top)),c.drawImage(g,0,0),s===u+1&&"PDF"===e){localStorage.setItem("saved-image-example",l.toDataURL("image/jpeg"));var d=localStorage.getItem("saved-image-example");p.pageSettings.orientation=a,d=d.slice(d.indexOf(",")+1),p.pages.add().graphics.drawImage(new sf.pdfexport.PdfBitmap(d),0,0,o.control.availableSize.width-60,o.control.availableSize.height),i?(p.save(t+".pdf"),p.destroy()):n(null)}},0===s||s===u+1?0===s?g.src=d:setTimeout((function(){g.src=window.URL.createObjectURL(new Blob([(new XMLSerializer).serializeToString(document.getElementById(o.control.element.id+"_Tile_SVG"))],{type:"image/svg+xml"}))}),300):(m.open("GET",h.children[0].getAttribute("src"),!0),m.send(),g.src=h.children[0].getAttribute("src"))},f=0;f<=u+1;f++)g(f);else h.onload=function(){if(c.drawImage(h,0,0),window.URL.revokeObjectURL(d),"PDF"===e){var s=l.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");p.pageSettings.orientation=a,s=s.slice(s.indexOf(",")+1),p.pages.add().graphics.drawImage(new sf.pdfexport.PdfBitmap(s),0,0,o.control.availableSize.width-60,o.control.availableSize.height),i?(p.save(t+".pdf"),p.destroy()):n(null)}},h.src=d}))},e.prototype.getModuleName=function(){return"PdfExport"},e.prototype.destroy=function(e){},e}(),ei=function(){function e(e){this.control=e}return e.prototype.export=function(e,t,i){var a=this;return new Promise((function(o,n){var s,l=sf.base.createElement("canvas",{id:"ej2-canvas",attrs:{width:a.control.availableSize.width.toString(),height:a.control.availableSize.height.toString()}}),r=!(sf.base.Browser.userAgent.toString().indexOf("HeadlessChrome")>-1),d=(document.getElementById(a.control.element.id+"_ToolBar"),document.getElementById(a.control.element.id+"_Tile_SVG_Parent"));if(a.control.isTileMap){var p=document.getElementById(a.control.element.id+"_Tile_SVG");s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+a.control.svgObject.outerHTML+p.outerHTML+"</svg>"}else s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+a.control.svgObject.outerHTML+"</svg>";var h=window.URL.createObjectURL(new Blob("SVG"===e?[s]:[(new XMLSerializer).serializeToString(a.control.svgObject)],{type:"image/svg+xml"}));if("SVG"===e)i?S(t,e,h,r):o(null);else{var c=new Image,m=l.getContext("2d");if(a.control.isTileMap)for(var u=new XMLHttpRequest,g=a.control.mapLayerPanel.tiles.length,f=function(n){var s=document.getElementById("tile_"+(n-1)),p=new Image;p.crossOrigin="Anonymous",m.fillStyle=a.control.background?a.control.background:"#FFFFFF",m.fillRect(0,0,a.control.availableSize.width,a.control.availableSize.height),m.font=a.control.titleSettings.textStyle.size+" Arial",m.fillStyle=document.getElementById(a.control.element.id+"_Map_title").getAttribute("fill"),m.fillText(a.control.titleSettings.text,parseFloat(document.getElementById(a.control.element.id+"_Map_title").getAttribute("x")),parseFloat(document.getElementById(a.control.element.id+"_Map_title").getAttribute("y"))),p.onload=function(){if(0===n||n===g+1?0===n?(m.setTransform(1,0,0,1,0,0),m.rect(0,parseFloat(d.style.top),parseFloat(d.style.width),parseFloat(d.style.height)),m.clip()):m.setTransform(1,0,0,1,parseFloat(d.style.left),parseFloat(d.style.top)):m.setTransform(1,0,0,1,parseFloat(s.style.left)+10,parseFloat(s.style.top)+parseFloat(document.getElementById(a.control.element.id+"_tile_parent").style.top)),m.drawImage(p,0,0),n===g+1){localStorage.setItem("local-canvasImage",l.toDataURL("image/png"));var h=localStorage.getItem("local-canvasImage");i?(S(t,e,h,r),localStorage.removeItem("local-canvasImage")):"PNG"===e?o(h):"JPEG"===e&&o(l.toDataURL("image/jpeg"))}},0===n||n===g+1?0===n?p.src=h:setTimeout((function(){p.src=window.URL.createObjectURL(new Blob([(new XMLSerializer).serializeToString(document.getElementById(a.control.element.id+"_Tile_SVG"))],{type:"image/svg+xml"}))}),300):(u.open("GET",s.children[0].getAttribute("src"),!0),u.send(),p.src=s.children[0].getAttribute("src"))},b=0;b<=g+1;b++)f(b);else c.onload=function(){m.drawImage(c,0,0),window.URL.revokeObjectURL(h),i?S(t,e,l.toDataURL("image/png").replace("image/png","image/octet-stream"),r):"PNG"===e?o(l.toDataURL("image/png")):"JPEG"===e&&o(l.toDataURL("image/jpeg"))},c.src=h}}))},e.prototype.getModuleName=function(){return"ImageExport"},e.prototype.destroy=function(e){},e}(),ti=(nt=function(e,t){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}nt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ii=function(e,t,i,a){var n,s=arguments.length,l=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===("undefined"==typeof Reflect?"undefined":o()(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(s<3?n(l):s>3?n(t,i,l):n(t,i))||l);return s>3&&l&&Object.defineProperty(t,i,l),l},ai=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a.isTileMap=!1,a.baseSize=new n(0,0),a.translatePoint=new O(0,0),a.baseTranslatePoint=new O(0,0),a.zoomTranslatePoint=new O(0,0),a.markerZoomedState=!0,a.zoomPersistence=!1,a.defaultState=!0,a.centerPositionChanged=!1,a.isTileMapSubLayer=!1,a.markerNullCount=0,a.tileTranslatePoint=new O(0,0),a.baseTileTranslatePoint=new O(0,0),a.isDevice=!1,a.staticMapZoom=a.zoomSettings.enable?a.zoomSettings.zoomFactor:0,a.zoomNotApplied=!1,a.dataLabelShape=[],a.zoomShapeCollection=[],a.zoomLabelPositions=[],a.mouseDownEvent={x:null,y:null},a.mouseClickEvent={x:null,y:null},a.selectedElementId=[],a.selectedMarkerElementId=[],a.selectedBubbleElementId=[],a.selectedNavigationElementId=[],a.selectedLegendElementId=[],a.legendSelectionCollection=[],a.shapeSelections=!0,a.legendSelection=!0,a.toggledLegendId=[],a.toggledShapeElementId=[],a.checkInitialRender=!0,a.initialTileTranslate=new O(0,0),a.initialCheck=!0,a.applyZoomReset=!1,a.markerClusterExpandCheck=!1,a.markerClusterExpand=!1,a.shapeSelectionItem=[],sf.base.setValue("mergePersistData",a.mergePersistMapsData,a),a}var i;return ti(t,e),i=t,Object.defineProperty(t.prototype,"isShapeSelected",{get:function(){return this.mapSelect},enumerable:!0,configurable:!0}),t.prototype.mergePersistMapsData=function(){var e;if(sf.base.isNullOrUndefined(window.localStorage)||(e=window.localStorage.getItem(this.getModuleName()+this.element.id)),!sf.base.isNullOrUndefined(e)&&""!==e){var t=JSON.parse(e),i=Object.keys(t);this.isProtectedOnChange=!0;for(var a=0,n=i;a<n.length;a++){var s=n[a];"object"!==o()(this[s])||sf.base.isNullOrUndefined(this[s])?this[s]=t[s]:sf.base.extend(this[s],t[s])}this.isProtectedOnChange=!1}},t.prototype.getLocalizedLabel=function(e){return this.localeObject.getConstant(e)},t.prototype.preRender=function(){this.isDevice=sf.base.Browser.isDevice,this.isBlazor=sf.base.isBlazor(),this.isBlazor||(this.allowPrint=!0,this.allowImageExport=!0,this.allowPdfExport=!0,i.Inject(Qt),i.Inject($t),i.Inject(ei)),this.initPrivateVariable(),this.allowServerDataBinding=!1,this.unWireEVents(),this.wireEVents(),this.setCulture()},t.prototype.render=function(){this.trigger("load",this.isBlazor?{}:{maps:this}),this.createSVG(),this.findBaseAndSubLayers(),this.createSecondaryElement(),this.addTabIndex(),this.themeStyle=function(e){var t,i;switch(e.toLowerCase()){case"materialdark":i="#303030";break;case"fabricdark":i="#201F1F";break;case"bootstrapdark":i="#1A1A1A"}switch(e.toLowerCase()){case"materialdark":case"fabricdark":case"bootstrapdark":t={backgroundColor:i,areaBackgroundColor:i,titleFontColor:"#FFFFFF",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#DADADA",legendTextColor:"#DADADA",dataLabelFontColor:"#DADADA",tooltipFontColor:"#ffffff",tooltipFillColor:"#363F4C",zoomFillColor:"#FFFFFF",labelFontFamily:"Roboto, Noto, Sans-serif"};break;case"highcontrast":t={backgroundColor:"#000000",areaBackgroundColor:"#000000",titleFontColor:"#FFFFFF",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#FFFFFF",legendTextColor:"#FFFFFF",dataLabelFontColor:"#000000",tooltipFontColor:"#000000",tooltipFillColor:"#ffffff",zoomFillColor:"#FFFFFF",labelFontFamily:"Roboto, Noto, Sans-serif"};break;case"bootstrap4":t={backgroundColor:"#FFFFFF",areaBackgroundColor:"#FFFFFF",titleFontColor:"#212529",subTitleFontColor:"#212529",legendTitleFontColor:"#212529",legendTextColor:"#212529",dataLabelFontColor:"#212529",tooltipFontColor:"#FFFFFF",tooltipFillColor:"#000000",zoomFillColor:"#5B6269",fontFamily:"HelveticaNeue-Medium",titleFontSize:"16px",legendFontSize:"14px",tooltipFillOpacity:1,tooltipTextOpacity:.9,labelFontFamily:"HelveticaNeue-Medium"};break;default:t={backgroundColor:"#FFFFFF",areaBackgroundColor:"#FFFFFF",titleFontColor:"#424242",subTitleFontColor:"#424242",legendTitleFontColor:"#757575",legendTextColor:"#757575",dataLabelFontColor:"#000000",tooltipFontColor:"#ffffff",tooltipFillColor:"#000000",zoomFillColor:"#737373",labelFontFamily:"Roboto, Noto, Sans-serif"}}return t}(this.theme),this.renderBorder(),this.renderTitle(this.titleSettings,"title",null,null),this.renderArea(),this.processRequestJsonData(),this.renderComplete()},t.prototype.processRequestJsonData=function(){var e,t,i=this,a=this.layersCollection.length-1;this.serverProcess={request:0,response:0},Array.prototype.forEach.call(this.layersCollection,(function(o,n){o.shapeData instanceof sf.data.DataManager?(i.serverProcess.request++,t=o.shapeData,e=o.query instanceof sf.data.Query?o.query:new sf.data.Query,t.executeQuery(e).then((function(e){i.processResponseJsonData("DataManager",e,o,"ShapeData")}))):(o.shapeData instanceof et||o.shapeData)&&(sf.base.isNullOrUndefined(o.shapeData.dataOptions)||i.processAjaxRequest(o,o.shapeData,"ShapeData"));(o.dataSource instanceof et||!sf.base.isNullOrUndefined(o.dataSource.dataOptions))&&i.processAjaxRequest(o,o.dataSource,"DataSource"),i.serverProcess.request===i.serverProcess.response&&a===n&&i.processResponseJsonData(null)}))},t.prototype.processAjaxRequest=function(e,t,i){var a,o=this;this.serverProcess.request++,(a=new sf.base.Ajax(t.dataOptions,t.type,t.async,t.contentType)).onSuccess=function(t){o.processResponseJsonData("Ajax",t,e,i)},a.send(t.sendData)},t.prototype.processResponseJsonData=function(e,t,i,a){if(this.serverProcess.response++,e&&("ShapeData"===a?i.shapeData="DataManager"===e?sf.base.isNullOrUndefined(t.result)?t.actual:t.result:JSON.parse(t):i.dataSource="DataManager"===e?sf.base.isNullOrUndefined(t.result)?t.actual:t.result:JSON.parse("["+t+"]")[0]),sf.base.isNullOrUndefined(e)||this.serverProcess.request!==this.serverProcess.response)sf.base.isNullOrUndefined(e)&&this.renderMap();else{var o=this.layersCollection;this.layersCollection=[];for(var n=0;n<o.length;n++)o[n].isBaseLayer&&this.layersCollection.push(o[n]);for(var s=0;s<o.length;s++)o[s].isBaseLayer||this.layersCollection.push(o[s]);this.renderMap()}},t.prototype.renderMap=function(){if(this.legendModule&&this.legendSettings.visible)if(this.isTileMap){var e=this.layersCollection.length-1;this.layersCollection[e].isBaseLayer||(this.isTileMapSubLayer=!0,this.legendModule.renderLegend())}else this.legendModule.renderLegend();this.createTile(),this.zoomSettings.enable&&this.zoomModule&&this.zoomModule.createZoomingToolbars(),sf.base.isNullOrUndefined(this.dataLabelModule)||(this.dataLabelModule.dataLabelCollections=[],this.dataLabelShape=[]),this.mapLayerPanel.measureLayerPanel(),this.element.appendChild(this.svgObject);for(var t=0;t<this.layers.length;t++)if(this.layers[t].selectionSettings&&this.layers[t].selectionSettings.enable&&this.layers[t].initialShapeSelection.length>0&&this.checkInitialRender){var i=this.layers[t].selectionSettings.enableMultiSelect;this.layers[t].selectionSettings.enableMultiSelect=i||!0;for(var a=this.layers[t].initialShapeSelection,o=0;o<this.layers[t].initialShapeSelection.length;o++)this.shapeSelection(t,a[o].shapePath,a[o].shapeValue,!0);this.layers[t].selectionSettings.enableMultiSelect=i,t===this.layers.length-1&&(this.checkInitialRender=!1)}if(!sf.base.isNullOrUndefined(document.getElementById(this.element.id+"_tile_parent"))){var n,s=this.svgObject.getBoundingClientRect(),l=document.getElementById(this.element.id),r=document.getElementById(this.element.id+"_tile_parent"),d=document.getElementById(this.element.id+"_tiles"),p=r.getBoundingClientRect(),h=void 0,c=void 0;c=parseFloat(r.style.left)+l.offsetLeft;var m=C(this.titleSettings.text,this.titleSettings.textStyle),u=C(this.titleSettings.subtitleSettings.text,this.titleSettings.subtitleSettings.textStyle);this.isTileMap&&this.isTileMapSubLayer&&"Bottom"===this.legendSettings.position&&this.legendSettings.visible?"Default"!==this.legendSettings.mode?n=0!==m.width&&0!==m.height?parseFloat(r.style.top)+l.offsetTop+u.height/2-this.legendModule.legendBorderRect.height/2:parseFloat(r.style.top)+l.offsetTop-this.mapAreaRect.y:(c=this.legendModule.legendBorderRect.x,n=0!==m.width&&0!==m.height?parseFloat(r.style.top)+l.offsetTop+u.height/2-this.legendModule.legendBorderRect.y:parseFloat(r.style.top)+l.offsetTop+u.height/2):(h=s.bottom-p.bottom-l.offsetTop,n=parseFloat(r.style.top)+l.offsetTop),n=h<=11?n:2*n,c=h<=11?c:2*c,r.style.top=n+"px",r.style.left=c+"px",d.style.top=n+"px",d.style.left=c+"px"}this.arrangeTemplate();this.isBlazor&&this.blazorTemplates();this.annotationsModule&&this.annotationsModule.renderAnnotationElements(),this.zoomingChange(),this.trigger("loaded",this.isBlazor?{}:{maps:this})},t.prototype.blazorTemplates=function(){for(var e=0;e<this.layers.length;e++){var t=this.layers[e].markerSettings.length-1;if(t>=0&&(this.layers[e].dataLabelSettings.visible||this.layers[e].markerSettings[t].template)){sf.base.updateBlazorTemplate(this.element.id+"_LabelTemplate","LabelTemplate",this.layers[e].dataLabelSettings);for(var i=0;i<this.layers[e].markerSettings.length;i++)sf.base.updateBlazorTemplate(this.element.id+"_MarkerTemplate"+i,"MarkerTemplate",this.layers[e].markerSettings[i])}}},t.prototype.renderArea=function(){var e=this.mapsArea.border.width,t=this.mapsArea.background;if(e>0||t||this.themeStyle.areaBackgroundColor){var i=new I(this.element.id+"_MapAreaBorder",t||this.themeStyle.areaBackgroundColor,this.mapsArea.border,1,this.mapAreaRect);this.svgObject.appendChild(this.renderer.drawRectangle(i))}},t.prototype.addTabIndex=function(){this.element.setAttribute("aria-label",this.description||"Maps Element"),this.element.setAttribute("tabindex",this.tabIndex.toString())},t.prototype.zoomingChange=function(){var e,t;if(ye(this.element.id+"_Layer_Collections")&&this.zoomModule&&(this.zoomModule.layerCollectionEle=ye(this.element.id+"_Layer_Collections")),this.isTileMap&&ye(this.element.id+"_Tile_SVG")&&ye(this.element.id+"_tile_parent")){var i=ye(this.element.id+"_tile_parent").getBoundingClientRect(),a=ye(this.element.id+"_Tile_SVG").getBoundingClientRect();e=i.left-a.left,t=i.top-a.top,ye(this.element.id+"_Tile_SVG_Parent").style.left=e+"px",ye(this.element.id+"_Tile_SVG_Parent").style.top=t+"px";var o=document.getElementsByClassName("template");if(!sf.base.isNullOrUndefined(o)&&o.length>0)for(var n=0;n<o.length;n++){var s=o[n];s.style.left=e+"px",s.style.top=t+"px"}}if(this.zoomSettings.zoomFactor>=1){this.zoomModule&&this.zoomModule.toolBarGroup&&this.zoomSettings.enable&&this.zoomModule.alignToolBar();var l=document.getElementById(this.element.id+"_Layer_Collections");if(!sf.base.isNullOrUndefined(l)&&l.childElementCount>0)for(n=0;n<l.childNodes.length;n++){var r=l.childNodes[n];if("g"===r.tagName)for(var d=parseFloat(r.id.split("_LayerIndex_")[1].split("_")[0]),p=0;p<r.childNodes.length;p++){var h=r.childNodes[p];h.id.indexOf("_Markers_Group")>-1||h.id.indexOf("_bubble_Group")>-1||h.id.indexOf("_dataLableIndex_Group")>-1||Re(h,d,this.scale,this)}}this.zoomModule&&this.previousScale!==this.scale&&this.zoomModule.applyTransform(!0)}},t.prototype.createSecondaryElement=function(){if(sf.base.isNullOrUndefined(document.getElementById(this.element.id+"_Secondary_Element"))){var e=sf.base.createElement("div",{id:this.element.id+"_Secondary_Element",styles:"position: absolute;z-index:2;"});this.element.appendChild(e)}},t.prototype.arrangeTemplate=function(){document.getElementById(this.element.id+"_Legend_Border")&&(document.getElementById(this.element.id+"_Legend_Border").style.pointerEvents="none");var e=document.getElementsByClassName(this.element.id+"_template");if(!sf.base.isNullOrUndefined(e)&&e.length>0&&ye(this.element.id+"_Layer_Collections")&&"OSM"!==this.layers[this.layers.length-1].layerType)for(var t=0;t<e.length;t++){var i=e[t];if(!sf.base.isNullOrUndefined(i)&&i.childElementCount>0)for(var a=ye(this.element.id+"_Layer_Collections").getBoundingClientRect(),o=ye(i.id).getBoundingClientRect(),n=this.isTileMap?0:a.left<o.left?-Math.abs(o.left-a.left):Math.abs(o.left-a.left),s=this.isTileMap?0:a.top<o.top?-Math.abs(o.top-a.top):Math.abs(o.top-a.top),l=0;l<i.childElementCount;l++){var r=i.childNodes[l];r.style.left=parseFloat(r.style.left)+n+"px",r.style.top=parseFloat(r.style.top)+s+"px",r.style.transform="translate(-50%, -50%)"}}},t.prototype.createTile=function(){var e=this.layersCollection[0];if(e.isBaseLayer&&("OSM"===e.layerType||"Bing"===e.layerType||"GoogleStaticMap"===e.layerType)){me(this.element.id+"_tile_parent"),me(this.element.id+"_tiles"),me("animated_tiles");var t=sf.base.createElement("div",{id:this.element.id+"_tile_parent",styles:"position: absolute; left: "+this.mapAreaRect.x+"px; top: "+(this.mapAreaRect.y+0)+"px; height: "+this.mapAreaRect.height+"px; width: "+this.mapAreaRect.width+"px; overflow: hidden;"}),i=sf.base.createElement("div",{id:this.element.id+"_tiles",styles:"position: absolute; left: "+this.mapAreaRect.x+"px; top: "+(this.mapAreaRect.y+0)+"px; height: "+this.mapAreaRect.height+"px; width: "+this.mapAreaRect.width+"px; overflow: hidden;"});this.element.appendChild(t),this.element.appendChild(i)}},t.prototype.initPrivateVariable=function(){if(""===this.element.id){var e=document.getElementsByClassName("e-maps").length;this.element.id="maps_control_"+e}this.renderer=new sf.svgbase.SvgRenderer(this.element.id),this.mapLayerPanel=new Jt(this)},t.prototype.findBaseAndSubLayers=function(){var e=this,t=this.baseLayerIndex,i=[],a=[];this.layersCollection=[],Array.prototype.forEach.call(this.layers,(function(e){"Layer"===e.type?i.push(e):a.push(e)}));for(var o=0;o<i.length;o++){var n=i[o];if(n.visible&&t===o){n.isBaseLayer=!0,this.isTileMap="Geometry"!==n.layerType,this.layersCollection.push(n);break}if(o===i.length-1){this.layersCollection.push(i[0]);break}}a.map((function(t,i){t.visible&&e.layersCollection.push(t)}))},t.prototype.renderBorder=function(){var e=this.border.width,t=this.svgObject.querySelector("#"+this.element.id+"_MapBorder");if((e>0||this.background||this.themeStyle.backgroundColor)&&sf.base.isNullOrUndefined(t)){var i=new I(this.element.id+"_MapBorder",this.background||this.themeStyle.backgroundColor,this.border,1,new j(e/2,e/2,this.availableSize.width-e,this.availableSize.height-e));this.svgObject.appendChild(this.renderer.drawRectangle(i))}else t.setAttribute("fill",this.background||this.themeStyle.backgroundColor)},t.prototype.renderTitle=function(e,t,i,a){var o,n=e.textStyle,s=Math.abs(this.margin.left+this.margin.right-this.availableSize.width);if(n.fontFamily=this.themeStyle.fontFamily||n.fontFamily,n.size=this.themeStyle.titleFontSize||n.size,e.text){sf.base.isNullOrUndefined(a)&&(a=this.renderer.createGroup({id:this.element.id+"_Title_Group"}));var l=he(s,e.text,n),r=C(l,n),d=ce(sf.base.isNullOrUndefined(i)?new j(this.margin.left,this.margin.top,this.availableSize.width,this.availableSize.height):i,e.alignment,r,t),p=new L(this.element.id+"_Map_"+t,d.x,d.y,"start",l),h=new j(d.x,d.y,r.width,r.height),c=F(p,n,n.color||("title"===t?this.themeStyle.titleFontColor:this.themeStyle.subTitleFontColor),a);c.setAttribute("aria-label",this.description||e.text),c.setAttribute("tabindex",(this.tabIndex+("title"===t?1:2)).toString()),("title"===t&&!e.subtitleSettings.text||"subtitle"===t)&&(o=Math.abs(h.y+this.margin.bottom-this.availableSize.height),this.mapAreaRect=new j(this.margin.left,h.y+10,s,o-10)),"subtitle"!==t&&e.subtitleSettings.text?this.renderTitle(e.subtitleSettings,"subtitle",h,a):this.svgObject.appendChild(a)}else o=Math.abs(this.margin.top+this.margin.bottom-this.availableSize.height),this.mapAreaRect=new j(this.margin.left,this.margin.top,s,o)},t.prototype.createSVG=function(){sf.base.resetBlazorTemplate(this.element.id+"_LabelTemplate","LabelTemplate");for(var e=0;e<this.layers.length;e++)for(var t=0;t<this.layers[e].markerSettings.length;t++)sf.base.resetBlazorTemplate(this.element.id+"_MarkerTemplate"+t,"MarkerTemplate");this.removeSvg(),r(this)},t.prototype.removeSvg=function(){for(var e=0;e<this.annotations.length;e++)sf.base.resetBlazorTemplate(this.element.id+"_ContentTemplate_"+e,"ContentTemplate");if(me(this.element.id+"_Secondary_Element"),me(this.element.id+"_tile_parent"),me(this.element.id+"_tiles"),this.svgObject){for(;this.svgObject.childNodes.length>0;)this.svgObject.removeChild(this.svgObject.firstChild);!this.svgObject.hasChildNodes()&&this.svgObject.parentNode&&sf.base.remove(this.svgObject)}},t.prototype.wireEVents=function(){sf.base.EventHandler.add(this.element,"click",this.mapsOnClick,this),sf.base.EventHandler.add(this.element,"dblclick",this.mapsOnDoubleClick,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.mouseDownOnMap,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.mouseMoveOnMap,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchEndEvent,this.mouseEndOnMap,this),sf.base.EventHandler.add(this.element,"pointerleave mouseleave",this.mouseLeaveOnMap,this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.mapsOnResize.bind(this))},t.prototype.unWireEVents=function(){sf.base.EventHandler.remove(this.element,"click",this.mapsOnClick),sf.base.EventHandler.remove(this.element,"dblclick",this.mapsOnDoubleClick),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchStartEvent,this.mouseDownOnMap),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.mouseMoveOnMap),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchEndEvent,this.mouseEndOnMap),sf.base.EventHandler.remove(this.element,"pointerleave mouseleave",this.mouseLeaveOnMap),window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.mapsOnResize)},t.prototype.mouseLeaveOnMap=function(e){document.getElementsByClassName("highlightMapStyle").length>0&&this.legendModule&&(this.legendModule.removeShapeHighlightCollection(),Te(document.getElementsByClassName("highlightMapStyle")[0]))},t.prototype.mapsOnClick=function(e){var t,i=this,a=e.target,o=a.id,n=0,s=null,l=null;if(this.mouseClickEvent={x:e.x,y:e.y},-1===a.id.indexOf("_ToolBar")){-1===a.id.indexOf("_LayerIndex_")||this.isTileMap||this.mouseDownEvent.x!==this.mouseClickEvent.x||this.mouseDownEvent.y!==this.mouseClickEvent.y?this.isTileMap&&this.mouseDownEvent.x===this.mouseClickEvent.x&&this.mouseDownEvent.y===this.mouseClickEvent.y&&(s=(t=this.getTileGeoLocation(e)).latitude,l=t.longitude):(n=parseFloat(a.id.split("_LayerIndex_")[1].split("_")[0]),s=(t=this.getGeoLocation(n,e)).latitude,l=t.longitude);var r={cancel:!1,name:"click",target:o,x:e.clientX,y:e.clientY,latitude:s,longitude:l};this.trigger("click",r,(function(t){if(a.id.indexOf("shapeIndex")>-1&&(i.markerModule&&i.markerModule.sameMarkerData.length>0&&(!i.zoomModule||i.zoomModule.isSingleClick)&&(X(i.markerModule.sameMarkerData,i,Se(i.element.id+"_Markers_Group")),i.markerModule.sameMarkerData=[]),Se(i.element.id+"_mapsTooltip")&&i.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")>-1&&me(i.element.id+"_mapsTooltip")),i.markerModule&&(i.markerModule.markerClick(e),i.markerModule.markerClusterClick(e)),i.bubbleModule&&i.bubbleModule.bubbleClick(e),r.cancel||i.notify("click",a),!r.cancel&&-1!==a.id.indexOf("shapeIndex")){var n=parseInt(a.id.split("_LayerIndex_")[1].split("_")[0],10),s=_e(o,i.layers[n].selectionSettings,i,"shapeSelected");s.cancel||!i.selectionModule||sf.base.isNullOrUndefined(i.shapeSelected)?s.cancel&&i.selectionModule&&sf.base.isNullOrUndefined(s.data)&&(Te(a),i.selectionModule.removedSelectionList(a)):Pe(i.selectionModule.selectionType+"selectionMap",i.selectionModule.selectionType+"selectionMapStyle",s)}}))}},t.prototype.mouseEndOnMap=function(e){var t,i,a;e.target.id,this.element.getBoundingClientRect(),e.target;return-1!==e.type.indexOf("touch")?(this.isTouch=!0,t=(a=e).changedTouches[0].pageX,i=a.changedTouches[0].pageY,a.target):(this.isTouch="touch"===e.pointerType,t=e.pageX,i=e.pageY,e.target),this.isTouch&&(this.titleTooltip(e,t,i,!0),sf.base.isNullOrUndefined(this.legendModule)||this.legendTooltip(e,e.pageX,e.pageY,!0)),this.notify(sf.base.Browser.touchEndEvent,e),e.preventDefault(),!1},t.prototype.mouseDownOnMap=function(e){this.mouseDownEvent={x:e.x,y:e.y};this.element.getBoundingClientRect();var t=e.target;if(-1===t.id.indexOf("_ToolBar")){var i=this.markerModule;(t.id.indexOf("shapeIndex")>-1||t.id.indexOf("Tile")>-1)&&i&&i.sameMarkerData.length>0&&(!this.zoomModule||this.zoomModule.isSingleClick)&&(X(i.sameMarkerData,this,Se(this.element.id+"_Markers_Group")),i.sameMarkerData=[]),i&&(i.markerClick(e),i.markerClusterClick(e)),this.bubbleModule&&this.bubbleModule.bubbleClick(e)}this.notify(sf.base.Browser.touchStartEvent,e)},t.prototype.mapsOnDoubleClick=function(e){this.notify("dblclick",e)},t.prototype.mouseMoveOnMap=function(e){"touchmove"===e.type?e.target:e.target,this.markerModule&&(this.markerModule.markerMove(e),this.markerModule.markerClusterMouseMove(e)),this.bubbleModule&&this.bubbleModule.bubbleMove(e),this.onMouseMove(e),this.notify(sf.base.Browser.touchMoveEvent,e)},t.prototype.onMouseMove=function(e){e.target;return this.isTouch||(this.titleTooltip(e,e.pageX,e.pageY),sf.base.isNullOrUndefined(this.legendModule)||this.legendTooltip(e,e.pageX,e.pageY,!0)),!1},t.prototype.legendTooltip=function(e,t,i,a){for(var o,n,s=e.target.id,l=this.legendModule.currentPage,r=e.target.id.split("_Index_")[1],d=0!==this.legendModule.totalPages.length?this.legendModule.totalPages[l].Collection.length:this.legendModule.totalPages.length,p=0;p<d;p++)o=(n=this.legendModule.totalPages[l].Collection[p]).DisplayText,s=e.target.id,r=e.target.id.split("_Index_")[1],s===this.element.id+"_Legend_Text_Index_"+r&&e.target.textContent.indexOf("...")>-1&&n.idIndex===parseInt(r,10)&&Ee(o,this.legendSettings.textStyle.size,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_Legend_Text_Tooltip",Se(this.element.id+"_Secondary_Element"),a);s!==this.element.id+"_Legend_Text_Index_"+r&&me(this.element.id+"_EJ2_Legend_Text_Tooltip")},t.prototype.titleTooltip=function(e,t,i,a){e.target.id===this.element.id+"_Map_title"&&e.target.textContent.indexOf("...")>-1?Ee(this.titleSettings.text,this.titleSettings.textStyle.size,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_Title_Tooltip",Se(this.element.id+"_Secondary_Element"),a):me(this.element.id+"_EJ2_Title_Tooltip")},t.prototype.mapsOnResize=function(e){var t=this,i={name:"resize",previousSize:this.availableSize,currentSize:new n(0,0),maps:this.isBlazor?null:this};return this.resizeTo&&clearTimeout(this.resizeTo),this.element.classList.contains("e-maps")&&(this.resizeTo=setTimeout((function(){t.unWireEVents(),t.createSVG(),t.refreshing=!0,t.wireEVents(),i.currentSize=t.availableSize,t.trigger("resize",i),t.render()}),500)),!1},t.prototype.zoomByPosition=function(e,t){var i,a=this.mapLayerPanel.calculateFactor(this.layersCollection[0]),o=this.mapAreaRect;if(!this.isTileMap&&this.zoomModule)if(sf.base.isNullOrUndefined(e))i={x:o.width/2,y:o.height/2},this.zoomModule.performZooming(i,t,t>this.scale?"ZoomIn":"ZoomOut");else{i=c(e.latitude,e.longitude,a,this.layersCollection[0],this);var n=document.getElementById(this.element.id+"_Layer_Collections").getBoundingClientRect(),s=this.svgObject.getBoundingClientRect(),l=Math.abs(n.left-s.left)/this.scale,r=Math.abs(n.top-s.top)/this.scale,d=this.translatePoint.x+l,p=this.translatePoint.y+r;this.scale=t,this.translatePoint.x=((n.left<s.left?d:0)+o.width/2-i.x*t)/t,this.translatePoint.y=((n.top<s.top?p:0)+o.height/2-i.y*t)/t,this.zoomModule.applyTransform()}else this.zoomModule&&(this.tileZoomLevel=t,this.tileTranslatePoint=this.mapLayerPanel.panTileMap(this.availableSize.width,this.availableSize.height,{x:e.longitude,y:e.latitude}),this.mapLayerPanel.generateTiles(t,this.tileTranslatePoint,null,new qt(this)))},t.prototype.panByDirection=function(e,t){var i=0,a=0;switch(e){case"Left":i=-this.mapAreaRect.width/7;break;case"Right":i=this.mapAreaRect.width/7;break;case"Top":a=-this.mapAreaRect.height/7;break;case"Bottom":a=this.mapAreaRect.height/7}this.zoomModule&&this.zoomModule.panning(e,i,a,t)},t.prototype.addLayer=function(e){this.layers.push(new zt(this.layers[0],"layers",e)),this.refresh()},t.prototype.removeLayer=function(e){this.layers.splice(e,1),this.refresh()},t.prototype.addMarker=function(e,t){var i=document.getElementById(this.element.id+"_LayerIndex_"+e);if(t.length>0&&i){for(var a=0,o=t;a<o.length;a++){var n=o[a];this.layersCollection[e].markerSettings.push(new Et(this,"markerSettings",n))}new Ft(this).markerRender(i,e,this.mapLayerPanel.currentFactor,"AddMarker"),this.arrangeTemplate()}},t.prototype.shapeSelection=function(e,t,i,a){var o,n=Array.isArray(t)?t:Array(t);sf.base.isNullOrUndefined(a)&&(a=!0);var s=this.layers[e].selectionSettings;if(!s.enableMultiSelect&&this.legendSelection&&a&&this.removeShapeSelection(),s.enable)for(var l=void 0,r=void 0,d=void 0,p=void 0,h=this.layers[e].shapeData.features,c=0;c<h.length;c++)for(var m=0;m<n.length;m++){if((!sf.base.isNullOrUndefined(h[c].properties[n[m]])&&isNaN(h[c].properties[n[m]])?h[c].properties[n[m]].toLowerCase():h[c].properties[n[m]])===(sf.base.isNullOrUndefined(i)?i:i.toLowerCase())){var u=ne(this.layers[e].dataSource,h[c].properties,this.layers[e].shapeDataPath,this.layers[e].shapePropertyPath,this.layers[e]);if(o=Se(this.element.id+"_LayerIndex_"+e+"_shapeIndex_"+c+"_dataIndex_"+(sf.base.isNullOrUndefined(u)?"undefined":u.toString())),sf.base.isNullOrUndefined(u)&&sf.base.isNullOrUndefined(o)&&(o=Se(this.element.id+"_LayerIndex_"+e+"_shapeIndex_"+c+"_dataIndex_null")),r=parseInt(o.id.split("_shapeIndex_")[1].split("_")[0],10),d=this.layers[e].shapeData.features.length>r?this.layers[e].shapeData.features[r].properties:null,l=parseInt(o.id.split("_dataIndex_")[1].split("_")[0],10),p=sf.base.isNullOrUndefined(l)?null:this.layers[e].dataSource[l],a){if(Ie(s,this,o,d,p),this.shapeSelectionClass=Se("ShapeselectionMap"),this.legendSettings.visible&&-1===o.id.indexOf("_MarkerIndex_")&&this.legendModule.shapeHighLightAndSelection(o,p,s,"selection",e),(!this.legendSettings.visible||this.legendModule.shapeToggled)&&(o.setAttribute("class","ShapeselectionMapStyle"),-1===this.selectedElementId.indexOf(o.getAttribute("id"))&&this.selectedElementId.push(o.getAttribute("id")),!s.enableMultiSelect))return}else if(this.legendSelection=!s.enableMultiSelect&&!this.legendSelection||this.legendSelection,this.legendSettings.visible&&-1===o.id.indexOf("_MarkerIndex_")&&"ShapeselectionMapStyle"===o.getAttribute("class")&&this.legendModule.shapeHighLightAndSelection(o,p,s,"selection",e),!this.legendSettings.visible||this.legendModule.shapeToggled){Te(o);var g=this.selectedElementId.indexOf(o.getAttribute("id"));-1!==g&&(this.selectedElementId.splice(g,1),!s.enableMultiSelect&&this.legendSelection&&this.selectedElementId.length>0&&this.removeShapeSelection())}}}},t.prototype.zoomToCoordinates=function(e,t,i,a){var o,n,s,l,r,d=!1;(sf.base.isNullOrUndefined(i)&&sf.base.isNullOrUndefined(a)||sf.base.isNullOrUndefined(e)&&sf.base.isNullOrUndefined(t))&&(e=sf.base.isNullOrUndefined(e)?0:e,t=sf.base.isNullOrUndefined(e)?0:t,i=sf.base.isNullOrUndefined(i)?e:i,a=sf.base.isNullOrUndefined(a)?t:a,d=!0),e>i&&(e=(o=[i,e])[0],i=o[1]),t>a&&(t=(n=[a,t])[0],a=n[1]),d?(s=e+i,l=t+a):(s=(e+i)/2,l=(t+a)/2),this.centerLatOfGivenLocation=s,this.centerLongOfGivenLocation=l,this.minLatOfGivenLocation=e,this.minLongOfGivenLocation=t,this.maxLatOfGivenLocation=i,this.maxLongOfGivenLocation=a,this.zoomNotApplied=!0,this.scaleOfGivenLocation=at(e,i,t,a,this.mapAreaRect.width,this.mapAreaRect.height,this),r={cancel:!1,name:"zoom",type:"zoomIn",maps:this.isBlazor?null:this,tileTranslatePoint:{},translatePoint:{},tileZoomLevel:this.isTileMap?{previous:this.tileZoomLevel,current:this.scaleOfGivenLocation}:{},scale:this.isTileMap?{previous:this.tileZoomLevel,current:this.scaleOfGivenLocation}:{previous:this.scale,current:this.scaleOfGivenLocation}},this.trigger("zoom",r),this.refresh()},t.prototype.removeShapeSelection=function(){for(var e=this.selectedElementId.length,t=0;t<e;t++)Te(ye(this.selectedElementId[0])),this.selectedElementId.splice(0,1);if(this.legendSettings.visible){var i=this.legendSelectionCollection.length;for(t=0;t<i;t++)Te(ye(this.legendSelectionCollection[t].legendElement.id)),this.selectedLegendElementId.splice(0,1)}this.shapeSelectionItem=[],this.legendSelectionCollection=[]},t.prototype.setCulture=function(){this.intl=new sf.base.Internationalization,this.setLocaleConstants(),this.localeObject=new sf.base.L10n(this.getModuleName(),this.defaultLocalConstants,this.locale)},t.prototype.setLocaleConstants=function(){this.defaultLocalConstants={ZoomIn:"Zoom in",Zoom:"Zoom",ZoomOut:"Zoom out",Pan:"Pan",Reset:"Reset"}},t.prototype.destroy=function(){this.unWireEVents(),this.shapeSelectionItem=[],this.toggledShapeElementId=[],this.toggledLegendId=[],this.legendSelectionCollection=[],this.selectedLegendElementId=[],this.selectedNavigationElementId=[],this.selectedBubbleElementId=[],this.selectedMarkerElementId=[],this.selectedElementId=[],this.dataLabelShape=[],this.zoomShapeCollection=[],this.zoomLabelPositions=[],this.mouseDownEvent={x:null,y:null},this.mouseClickEvent={x:null,y:null},this.removeSvg(),e.prototype.destroy.call(this)},t.prototype.getModuleName=function(){return"maps"},t.prototype.getPersistData=function(){return this.addOnPersist(["translatePoint","zoomSettings","mapScaleValue","tileTranslatePoint","baseTranslatePoint","scale","zoomPersistence","defaultState","markerZoomedState","initialCheck","initialZoomLevel","initialTileTranslate","applyZoomReset","markerZoomFactor"])},t.prototype.onPropertyChanged=function(t,i){var a=!1,o=!1,n=!1;if(t.layers){var s=Object.keys(t.layers).length;document.getElementById(this.element.id+"_LayerIndex_"+(s-1))}for(var l=0,r=Object.keys(t);l<r.length;l++){var d=r[l];switch(d){case"background":this.renderBorder();break;case"height":case"width":case"layers":case"projectionType":case"centerPosition":case"legendSettings":case"zoomSettings":case"baseLayerIndex":if("layers"===d)for(var p=Object.keys(t.layers).length,h=0;h<p;h++)if(!sf.base.isNullOrUndefined(t.layers[h]))for(var c=0,m=Object.keys(t.layers[h]);c<m.length;c++){var u=m[c];"markerSettings"===u?o=!0:"staticMapType"===u&&(n=!0)}a=!0;break;case"locale":case"currencyCode":e.prototype.refresh.call(this)}}a&&(t.layers&&o?(me(this.element.id+"_Markers_Group"),this.isTileMap?this.mapLayerPanel.renderTileLayer(this.mapLayerPanel,this.layers.currentFactor,this.layers.length-1):this.render()):t.layers&&n?this.mapLayerPanel.renderGoogleMap(this.layers[this.layers.length-1].key,this.staticMapZoom):(this.createSVG(),this.render()))},t.prototype.requiredModules=function(){var e=[],t=this.findVisibleLayers(this.layers),i=!1;return this.annotations.map((function(e,t){i=null!=e.content})),this.isBubbleVisible()&&e.push({member:"Bubble",args:[this]}),t.highlight&&e.push({member:"Highlight",args:[this]}),t.selection&&e.push({member:"Selection",args:[this]}),this.legendSettings.visible&&e.push({member:"Legend",args:[this]}),(this.zoomSettings.enable||this.zoomSettings.zoomFactor>this.zoomSettings.minZoom)&&e.push({member:"Zoom",args:[this]}),this.isMarkersVisible()&&e.push({member:"Marker",args:[this]}),this.isDataLabelVisible()&&e.push({member:"DataLabel",args:[this]}),this.isNavigationVisible()&&e.push({member:"NavigationLine",args:[this]}),t.tooltip&&e.push({member:"MapsTooltip",args:[this]}),i&&e.push({member:"Annotations",args:[this,Kt]}),this.allowPrint&&e.push({member:"Print",args:[this]}),this.allowImageExport&&e.push({member:"ImageExport",args:[this]}),this.allowPdfExport&&e.push({member:"PdfExport",args:[this]}),e},t.prototype.isMarkersVisible=function(){var e=!1;return Array.prototype.forEach.call(this.layers,(function(t,i){for(var a=0;a<t.markerSettings.length;a++)if(t.markerSettings[a].visible){e=!0;break}})),e},t.prototype.isDataLabelVisible=function(){for(var e=!1,t=0;t<this.layers.length;t++)if(this.layers[t].dataLabelSettings.visible){e=!0;break}return e},t.prototype.isNavigationVisible=function(){var e=!1;return Array.prototype.forEach.call(this.layers,(function(t,i){for(var a=0;a<t.navigationLineSettings.length;a++)if(t.navigationLineSettings[a].visible){e=!0;break}})),e},t.prototype.isBubbleVisible=function(){for(var e=!1,t=0,i=this.layers;t<i.length;t++){var a=i[t];if(this.getBubbleVisible(a)){e=!0;break}}return e},t.prototype.getBubbleVisible=function(e){for(var t=!1,i=0,a=e.bubbleSettings;i<a.length;i++){if(a[i].visible){t=!0;break}}return t},t.prototype.print=function(e){this.allowPrint&&this.printModule&&this.printModule.print(e)},t.prototype.export=function(e,t,i,a){var o=this;return sf.base.isNullOrUndefined(a)&&(a=!0),"PDF"!==e&&this.allowImageExport&&this.imageExportModule?new Promise((function(i,n){i(o.imageExportModule.export(e,t,a))})):this.allowPdfExport&&this.pdfExportModule?new Promise((function(n,s){n(o.pdfExportModule.export(e,t,a,i))})):null},t.prototype.findVisibleLayers=function(e,t,i,a,o,n){var s,l;void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===a&&(a=!1),void 0===o&&(o=!1),void 0===n&&(n=!1);for(var r=0,d=e;r<d.length;r++){var p=d[r];if(t=p.visible||t,p.visible){s=p.bubbleSettings,l=p.markerSettings;for(var h=0,c=p.navigationLineSettings;h<c.length;h++){var m=c[h];m.visible&&(o=m.highlightSettings.enable||o,n=m.selectionSettings.enable||n)}for(var u=0,g=l;u<g.length;u++){var f=g[u];if(f.visible&&(a=f.tooltipSettings.visible||a,o=f.selectionSettings.enable||o,n=f.highlightSettings.enable||n),a)break}for(var b=0,y=s;b<y.length;b++){var v=y[b];if(v.visible&&(a=v.tooltipSettings.visible||a,o=v.selectionSettings.enable||o,n=v.highlightSettings.enable||n),a)break}a=p.tooltipSettings.visible||a,o=p.selectionSettings.enable||o,n=p.highlightSettings.enable||n}if(t&&i&&a)break}return{layer:t,bubble:i,tooltip:a,selection:o,highlight:n}},t.prototype.getGeoLocation=function(e,t){var i=document.getElementById(this.element.id),a=t.layerX-i.offsetLeft,o=t.layerY-i.offsetTop,n=ge(this,this.layersCollection[e],!1).location,s=n.x*this.scale,l=n.y*this.scale,r=Math.min(this.mapAreaRect.height,this.mapAreaRect.width)*this.mapLayerPanel.currentFactor*this.scale,d=this.clip(a-s,0,r-1)/r-.5,p=.5-this.clip(o-l,0,r-1)/r;return{latitude:90-360*Math.atan(Math.exp(2*-p*Math.PI))/Math.PI,longitude:360*d}},t.prototype.clip=function(e,t,i){return Math.min(Math.max(e,t),i)},t.prototype.getTileGeoLocation=function(e){var t,i=document.getElementById(this.element.id),a=document.getElementById(this.element.id+"_tile_parent");return{latitude:(t=this.pointToLatLong(e.layerX+this.mapAreaRect.x-(a.offsetLeft-i.offsetLeft),e.layerY+this.mapAreaRect.y-(a.offsetTop-i.offsetTop))).latitude,longitude:t.longitude}},t.prototype.pointToLatLong=function(e,t){var i="GoogleStaticMap"===this.layers[this.layers.length-1].layerType?0:10;t=this.zoomSettings.enable?t+i:t;var a=256*Math.pow(2,this.tileZoomLevel),o=this.clip(e-this.translatePoint.x*this.scale,0,a-1)/a-.5,n=.5-this.clip(t-this.translatePoint.y*this.scale,0,a-1)/a;return{latitude:90-360*Math.atan(Math.exp(2*-n*Math.PI))/Math.PI,longitude:360*o}},ii([sf.base.Property(null)],t.prototype,"background",void 0),ii([sf.base.Property(!1)],t.prototype,"useGroupingSeparator",void 0),ii([sf.base.Property(null)],t.prototype,"format",void 0),ii([sf.base.Property(null)],t.prototype,"width",void 0),ii([sf.base.Property(null)],t.prototype,"height",void 0),ii([sf.base.Property("MouseMove")],t.prototype,"tooltipDisplayMode",void 0),ii([sf.base.Property(!1)],t.prototype,"allowPrint",void 0),ii([sf.base.Property(!1)],t.prototype,"allowImageExport",void 0),ii([sf.base.Property(!1)],t.prototype,"allowPdfExport",void 0),ii([sf.base.Complex({},Lt)],t.prototype,"titleSettings",void 0),ii([sf.base.Complex({},wt)],t.prototype,"zoomSettings",void 0),ii([sf.base.Complex({},It)],t.prototype,"legendSettings",void 0),ii([sf.base.Collection([],zt)],t.prototype,"layers",void 0),ii([sf.base.Collection([],rt)],t.prototype,"annotations",void 0),ii([sf.base.Complex({},ut)],t.prototype,"margin",void 0),ii([sf.base.Complex({color:"#DDDDDD",width:0},ht)],t.prototype,"border",void 0),ii([sf.base.Property("Material")],t.prototype,"theme",void 0),ii([sf.base.Property("Mercator")],t.prototype,"projectionType",void 0),ii([sf.base.Property(0)],t.prototype,"baseLayerIndex",void 0),ii([sf.base.Property(null)],t.prototype,"description",void 0),ii([sf.base.Property(1)],t.prototype,"tabIndex",void 0),ii([sf.base.Complex({latitude:null,longitude:null},ct)],t.prototype,"centerPosition",void 0),ii([sf.base.Complex({},jt)],t.prototype,"mapsArea",void 0),ii([sf.base.Event()],t.prototype,"load",void 0),ii([sf.base.Event()],t.prototype,"beforePrint",void 0),ii([sf.base.Event()],t.prototype,"loaded",void 0),ii([sf.base.Event()],t.prototype,"click",void 0),ii([sf.base.Event()],t.prototype,"doubleClick",void 0),ii([sf.base.Event()],t.prototype,"rightClick",void 0),ii([sf.base.Event()],t.prototype,"resize",void 0),ii([sf.base.Event()],t.prototype,"tooltipRender",void 0),ii([sf.base.Event()],t.prototype,"legendRendering",void 0),ii([sf.base.Event()],t.prototype,"tooltipRenderComplete",void 0),ii([sf.base.Event()],t.prototype,"shapeSelected",void 0),ii([sf.base.Event()],t.prototype,"itemSelection",void 0),ii([sf.base.Event()],t.prototype,"itemHighlight",void 0),ii([sf.base.Event()],t.prototype,"shapeHighlight",void 0),ii([sf.base.Event()],t.prototype,"layerRendering",void 0),ii([sf.base.Event()],t.prototype,"shapeRendering",void 0),ii([sf.base.Event()],t.prototype,"markerRendering",void 0),ii([sf.base.Event()],t.prototype,"markerClusterRendering",void 0),ii([sf.base.Event()],t.prototype,"markerClick",void 0),ii([sf.base.Event()],t.prototype,"markerClusterClick",void 0),ii([sf.base.Event()],t.prototype,"markerClusterMouseMove",void 0),ii([sf.base.Event()],t.prototype,"markerMouseMove",void 0),ii([sf.base.Event()],t.prototype,"dataLabelRendering",void 0),ii([sf.base.Event()],t.prototype,"bubbleRendering",void 0),ii([sf.base.Event()],t.prototype,"bubbleClick",void 0),ii([sf.base.Event()],t.prototype,"bubbleMouseMove",void 0),ii([sf.base.Event()],t.prototype,"animationComplete",void 0),ii([sf.base.Event()],t.prototype,"annotationRendering",void 0),ii([sf.base.Event()],t.prototype,"zoom",void 0),ii([sf.base.Event()],t.prototype,"pan",void 0),t=i=ii([sf.base.NotifyPropertyChanges],t)}(sf.base.Component),oi=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]])}return i},ni=function(){function e(e){this.id="",this.maps=e,this.bubbleCollection=[]}return e.prototype.renderBubble=function(e,t,i,a,o,n,s,l,r,d){var p,h,c=this,m=l.layerData,u=e.colorValuePath,g=sf.base.isNullOrUndefined(u)?t[u]:u.indexOf(".")>-1?V(t,e.colorValuePath):t[u],f=sf.base.isNullOrUndefined(u)?Number(t[u]):u.indexOf(".")>-1?Number(V(t,e.colorValuePath)):Number(t[u]),b=sf.base.isNullOrUndefined(e.valuePath)?Number(t[e.valuePath]):e.valuePath.indexOf(".")>-1?Number(V(t,e.valuePath)):Number(t[e.valuePath]);if(isNaN(b)&&isNaN(f)&&sf.base.isNullOrUndefined(g))return null;var y=re(e.minRadius,e.maxRadius,b,a.min,a.max),v=new Xt(this.maps).getColorByValue(e.colorMapping,f,g);h="[object Object]"!==Object.prototype.toString.call(v)||sf.base.isNullOrUndefined(v.fill)?i:v.fill,p="[object Object]"!==Object.prototype.toString.call(v)||sf.base.isNullOrUndefined(v.opacity)?e.opacity:v.opacity;var x=[[]];this.maps.translateType="bubble";for(var S=0,O=0,_=0,M=0,C=m.length;M<C;M++){var L=m[M];L=L.property;var w=se(t[l.shapeDataPath],l.shapePropertyPath,L);if((!sf.base.isNullOrUndefined(t[l.shapeDataPath])&&isNaN(t[l.shapeDataPath])?t[l.shapeDataPath].toLowerCase():t[l.shapeDataPath])===(!sf.base.isNullOrUndefined(L[w])&&isNaN(L[w])?L[w].toLowerCase():L[w]))if("Point"===m[M].type)x.push(this.getPoints(m[M],[]));else if(m[M]._isMultiPolygon)for(var P=m[M],k=0;k<P.length;k++)x.push(this.getPoints(P[k],[])),O<(_=x[x.length-1].length)&&(O=_,S=x.length-1);else x.push(this.getPoints(m[M],[])),O<(_=x[x.length-1].length)&&(O=_,S=x.length-1)}var N,E,z=this.maps.projectionType,B=de(x[S],z);if(e.visible){if(sf.base.isNullOrUndefined(B)){var F=x.length-1;if(!x[F].x||!x[F].y)return;if(E={cancel:!1,name:"bubbleRendering",border:e.border,cx:x[F].x,cy:x[F].y,data:t,fill:h,maps:this.maps.isBlazor?null:this.maps,radius:y},this.maps.isBlazor){E.maps;var R=oi(E,["maps"]);E=R}}else N="Mercator"===this.maps.projectionType?B.y:-B.y,E={cancel:!1,name:"bubbleRendering",border:e.border,cx:B.x,cy:N,data:t,fill:h,maps:this.maps.isBlazor?null:this.maps,radius:y};this.maps.trigger("bubbleRendering",E,(function(t){if(!E.cancel){var i,a;if("Circle"===e.bubbleType){var h=new T(d,E.fill,E.border,p,0,0,E.radius,null);i=te(c.maps,h,r)}else{var m="Mercator"===c.maps.projectionType?E.cy-y:E.cy+y,u=new I(d,E.fill,E.border,p,new j(0,0,2*y,2*y),2,2);E.cx-=y,E.cy=m,i=ie(c.maps,u,r)}Q(c.maps.selectedBubbleElementId,c.maps.bubbleSelectionClass,i,"BubbleselectionMapStyle"),c.bubbleCollection.push({LayerIndex:s,BubbleIndex:o,DataIndex:n,element:i,center:{x:E.cx,y:E.cy}});var g=0!==l.animationDuration||sf.base.isNullOrUndefined(c.maps.zoomModule),f=(a=c.maps.zoomSettings.zoomFactor>1&&!sf.base.isNullOrUndefined(c.maps.zoomModule)?fe(c.maps,l,g):ge(c.maps,l,g)).scale,b=a.location,v=new A(c.maps.isTileMap?E.cx:(E.cx+b.x)*f,c.maps.isTileMap?E.cy:(E.cy+b.y)*f);i.setAttribute("transform","translate( "+v.x+" "+v.y+" )");var x=e.dataSource.length-1===n?"bubble":null;"Square"===e.bubbleType?(v.x+=y,v.y+=y*("Mercator"===c.maps.projectionType?1:-1)):y=0,e.animationDuration>0&&ke(i,e.animationDelay,e.animationDuration,v,c.maps,x,y)}}))}},e.prototype.getPoints=function(e,t){return sf.base.isNullOrUndefined(e.map)?t=e.point:e.map((function(e,i){t.push(new O(e.point.x,e.point.y))})),t},e.prototype.bubbleClick=function(e){var t=e.target.id;if(-1!==t.indexOf("_LayerIndex_")){var i=this.getbubble(t);if(!sf.base.isNullOrUndefined(i)){var a={cancel:!1,name:"bubbleClick",data:i,maps:this.maps,target:t,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){a.maps;a=oi(a,["maps"])}this.maps.trigger("bubbleClick",a)}}},e.prototype.getbubble=function(e){var t=e.split("_LayerIndex_"),i=parseInt(t[1].split("_")[0],10),a=this.maps.layers[i];if(e.indexOf("_BubbleIndex_")>-1){var o=parseInt(t[1].split("_BubbleIndex_")[1],10),n=parseInt(t[1].split("_BubbleIndex_")[1].split("_dataIndex_")[1],10);if(!isNaN(o))return a.bubbleSettings[o].dataSource[n]}return null},e.prototype.bubbleMove=function(e){var t=e.target.id;if(-1!==t.indexOf("_LayerIndex_")){var i=this.getbubble(t);if(!sf.base.isNullOrUndefined(i)){var a={cancel:!1,name:"bubbleMouseMove",data:i,maps:this.maps,target:t,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){a.maps;a=oi(a,["maps"])}this.maps.trigger("bubbleMouseMove",a)}}},e.prototype.getModuleName=function(){return"Bubble"},e.prototype.destroy=function(e){},e}(),si=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]])}return i},li=function(){function e(e){this.value={rightWidth:0,leftWidth:0,heightTop:0,heightBottom:0},this.maps=e,this.dataLabelCollections=[]}return e.prototype.getDataLabel=function(e,t,i,a){for(var o,n=0;n<e.length;n++){var s,l=e[n];if(s=!sf.base.isNullOrUndefined(l[a])&&isNaN(l[a])?l[a].toLowerCase():l[a],i=sf.base.isNullOrUndefined(i)?i:i.toString(),s===(sf.base.isNullOrUndefined(i)?i:i.toLowerCase())){o=l;break}}return o},e.prototype.renderLabel=function(e,t,i,a,o,n,s,l){var r,d,p,h,c,m,u,g,f=this,b=e.dataLabelSettings,y=e.dataLabelSettings.textStyle,v=e.dataLabelSettings,x=e.dataLabelSettings.labelPath,S=[[]],_=0,M=0,w=i,P="",T=0,k=!1,N=i.properties,E=this.maps.element.id+"_LayerIndex_"+t+"_shapeIndex_"+s+"_LabelIndex_"+s,z=new O(0,0),A=a[s];y.fontFamily="material"!==this.maps.theme.toLowerCase()?this.maps.themeStyle.labelFontFamily:y.fontFamily,i=A.property;var B,R,U="[object Array]"===Object.prototype.toString.call(e.shapePropertyPath)?e.shapePropertyPath:[e.shapePropertyPath],Z=!1,H=0!==e.animationDuration||sf.base.isNullOrUndefined(this.maps.zoomModule),V=this.maps.isTileMap?new Object:this.maps.zoomSettings.zoomFactor>1&&!sf.base.isNullOrUndefined(this.maps.zoomModule)?fe(this.maps,e,H):ge(this.maps,e,H),G=this.maps.isTileMap?this.maps.scale:V.scale,W=this.maps.isTileMap?this.maps.translatePoint:V.location,q=this.maps.zoomTranslatePoint,X=sf.base.isNullOrUndefined(this.maps.scale)?1:Math.floor(this.maps.scale),Y=this.maps.zoomSettings.enable?!sf.base.isNullOrUndefined(this.maps.zoomShapeCollection)&&this.maps.zoomShapeCollection.length>0:this.maps.zoomSettings.enable;this.maps.translateType="labels";for(var J=0;J<U.length&&!(N[U[J]]&&(B=U[J],h=this.getDataLabel(e.dataSource,e.shapeDataPath,w.properties[B],e.shapeDataPath)));J++);if(h=this.getDataLabel(e.dataSource,e.shapeDataPath,w.properties[B],e.shapeDataPath),!sf.base.isNullOrUndefined(A.property))if(S=[[]],a[s]._isMultiPolygon||"Point"===a[s].type){var K=a[s];if("Point"===K.type){Z=!0;var Q=[];Q.push(this.getPoint(a,[])),M<(T=(S=Q)[S.length-1].length)&&(M=T,_=S.length-1)}for(J=0;J<K.length;J++)S.push(this.getPoint(K[J],[])),M<(T=S[S.length-1].length)&&(M=T,_=S.length-1)}else S.push(this.getPoint(a[s],[])),M<(T=S[S.length-1].length)&&(M=T,_=S.length-1);if(P=sf.base.isNullOrUndefined(h)?w.properties[x]:sf.base.isNullOrUndefined(h[x])?h[e.shapeDataPath]:h[e.shapeDataPath].toString(),"[object Array]"===Object.prototype.toString.call(e.shapePropertyPath)&&sf.base.isNullOrUndefined(P)&&0===e.dataSource.length)for(var $=0;$<e.shapePropertyPath.length;$++)if(w.properties[e.shapePropertyPath[$]]){P=w.properties[e.shapePropertyPath[$]];break}sf.base.isNullOrUndefined(P)&&""!==e.dataLabelSettings.template&&0===e.dataSource.length&&(P=w.properties[e.shapePropertyPath]);var ee=P,te=this.maps.projectionType,ie=m=Z?{x:S[_][s].x,y:S[_][s].y,rightMin:0,rightMax:0,leftMin:0,leftMax:0,points:S[_][s],topMax:0,topMin:0,bottomMax:0,bottomMin:0,height:0}:de(S[_],te);if(!sf.base.isNullOrUndefined(P)&&!sf.base.isNullOrUndefined(m)){if(Y&&X>1&&!this.maps.zoomNotApplied&&""===b.template){if(t>0)for(var ae=0;ae<this.maps.zoomLabelPositions.length;ae++)if(this.maps.zoomLabelPositions[ae].dataLabelText===P){c=s,s=ae,k=!0;break}u=m.x,g=m.y,m.x=(m.x+q.x)*G,m.y=(m.y+q.y)*G}m.y="Mercator"===this.maps.projectionType?m.y:-m.y,sf.base.isNullOrUndefined(this.maps.format)||isNaN(parseFloat(P))||this.maps.useGroupingSeparator&&(P=ve(this.maps,parseFloat(P)),sf.base.isNullOrUndefined(h)||(h[x]=P));var oe={name:"dataLabelRendering",maps:this.maps,cancel:!1,border:b.border,datalabel:b,fill:b.fill,template:b.template,text:P};if(this.maps.isBlazor){oe.maps,oe.datalabel;var ne=si(oe,["maps","datalabel"]);oe=ne}this.maps.trigger("dataLabelRendering",oe,(function(e){if(!oe.cancel){var i,a=Y&&X>1&&!f.maps.zoomNotApplied&&f.maps.zoomShapeCollection.length>s?f.maps.zoomShapeCollection[s].width:(m.rightMax.x-m.leftMax.x)*G;sf.base.isNullOrUndefined(f.maps.dataLabelShape)||(R=ie.rightMax.x-ie.leftMax.x,f.maps.dataLabelShape.push(R)),oe.text===P||oe.cancel||(P=oe.text);var b=C(P,y),x=P,O=b,M=m.y-b.height/4,T=m.y+b.height/4,N=(m.y+W.y)*G-b.height/4,A=(m.y+W.y)*G+b.height/4;if(i=le(S[_],M,T),!Z&&i.length>5&&"MultiPolygon"!==w.geometry.type&&"MultiPolygon"!==w.type){var B=de(i,te);Y&&X>1&&!f.maps.zoomNotApplied&&""===oe.template&&(B.x=(f.maps.zoomLabelPositions[s].location.x+q.x)*G,B.y=(f.maps.zoomLabelPositions[s].location.y+q.y)*G),u=B.x,m.x=B.x,a=Y&&X>1&&!f.maps.zoomNotApplied&&f.maps.zoomShapeCollection.length>s?f.maps.zoomShapeCollection[s].width:(B.rightMax.x-B.leftMax.x)*G}var U,H=(m.x+W.x)*G+b.width/2,V=(m.x+W.x)*G-b.width/2;if(f.value[s]={rightWidth:H,leftWidth:V,heightTop:N,heightBottom:A},""!==oe.template){var J=(r=xe(oe.template))?r(sf.base.isNullOrUndefined(h)?w.properties:h,null,null,f.maps.element.id+"_LabelTemplate",!1):document.createElement("div");J.innerHTML=r?"":oe.template,(U=D(J,E,sf.base.isNullOrUndefined(h)?w.properties:h,0,f.maps)).style.left=Math.abs(f.maps.baseMapRectBounds.min.x-m.x)*G+"px",U.style.top=Math.abs(f.maps.baseMapRectBounds.min.y-m.y)*G+"px",n.appendChild(U)}else{if("Trim"===v.smartLabelMode&&(O=C(x=he(a,P,y),y),d=new L(E,z.x,z.y,"middle",x,"","")),"None"===v.smartLabelMode&&(d=new L(E,z.x,z.y,"middle",P,"","")),"Hide"===v.smartLabelMode&&(P=a>=b.width?P:"",d=new L(E,z.x,z.y,"middle",P,"","")),P=d.text,"Hide"===v.intersectionAction){for(var K=0;K<l.length;K++)if(!sf.base.isNullOrUndefined(l[K])){if(!(f.value[s].leftWidth>l[K].rightWidth||f.value[s].rightWidth<l[K].leftWidth||f.value[s].heightTop>l[K].heightBottom||f.value[s].heightBottom<l[K].heightTop)){P="";break}P=P}l.push(f.value[s]),d=new L(E,z.x,z.y,"middle",P,"","")}if("Trim"===v.intersectionAction){for(var Q=0;Q<l.length;Q++)if(!sf.base.isNullOrUndefined(l[Q]))if(l[Q].rightWidth<f.value[s].leftWidth||l[Q].leftWidth>f.value[s].rightWidth||l[Q].heightBottom<f.value[s].heightTop||l[Q].heightTop>f.value[s].heightBottom)x=P,0;else{if(f.value[s].leftWidth>l[Q].leftWidth){x=he((a=l[Q].rightWidth-f.value[s].leftWidth)-(f.value[s].rightWidth-f.value[s].leftWidth),P,y);break}if(f.value[s].leftWidth<l[Q].leftWidth){a=f.value[s].rightWidth-l[Q].leftWidth,x=he(Math.abs(a-(f.value[s].rightWidth-f.value[s].leftWidth)),P,y);break}}O=C(x,y),l.push(f.value[s]),d=new L(E,z.x,z.y,"middle",x,"","")}if("None"===v.intersectionAction&&(d=new L(E,z.x,z.y,"middle",P,"","")),x.length>1){var $=oe.border;if($.width>1){var ae=oe.fill,ne=v.opacity,se=v.rx,re=v.ry,pe=void 0,ce=void 0;Y&&X>1&&!f.maps.zoomNotApplied?(pe=m.x-b.width/2,ce=m.y-b.height/2-5):(pe=(m.x+W.x)*G-b.width/2,ce=(m.y+W.y)*G-b.height/2);var me=new I(f.maps.element.id+"_LayerIndex_"+t+"_shapeIndex_"+s+"_rectIndex_"+s,ae,$,ne,new j(pe,ce,b.width,b.height),se,re),ue=f.maps.renderer.drawRectangle(me);o.appendChild(ue)}}p=F(d,y,y.color||f.maps.themeStyle.dataLabelFontColor,o),Y&&X>1&&!f.maps.zoomNotApplied?(p.setAttribute("transform","translate( "+m.x+" "+m.y+" )"),m.x=u,m.y=g):p.setAttribute("transform","translate( "+(m.x+W.x)*G+" "+((m.y+W.y)*G+O.height/4)+" )"),o.appendChild(p)}f.dataLabelCollections.push({location:{x:m.x,y:m.y},element:sf.base.isNullOrUndefined(U)?p:U,layerIndex:t,shapeIndex:k?c:s,labelIndex:k?c:s,dataLabelText:ee}),n.childElementCount>0&&!f.maps.element.contains(n)&&document.getElementById(f.maps.element.id+"_Secondary_Element").appendChild(n)}}))}},e.prototype.getPoint=function(e,t){return e.map((function(e,i){t.push(new O(e.point.x,e.point.y))})),t},e.prototype.getModuleName=function(){return"DataLabel"},e.prototype.destroy=function(e){},e}(),ri=function(){function e(e){this.maps=e}return e.prototype.renderNavigation=function(e,t,i){var a,o,n;o=e.navigationLineSettings;for(var s,l,r,d,p,h,u,g,f,b,y,v,x,S,_,M,C,L,P,I=[],T=this.maps.renderer.createGroup({id:this.maps.element.id+"_LayerIndex_"+i+"_line_Group"}),k=0;k<o.length;k++){if(s=o[k].properties.latitude,n=o[k].properties.longitude,l=o[k].properties.visible,r=o[k].angle,d=o[k].width||1,p=o[k].color,h=o[k].properties.dashArray,v=o[k].properties.arrowSettings,f=!sf.base.isNullOrUndefined(v)&&v.properties.showArrow,n.length===s.length&&l)for(var N=0;N<n.length;N++){var E=this.maps.isTileMap?m(new O(n[N],s[N]),t,this.maps.tileTranslatePoint,!0):c(s[N],n[N],t,e,this.maps);I.push(E)}L=this.maps.renderer.createGroup({id:this.maps.element.id+"_LayerIndex_"+i+"_NavigationGroup"+k});for(var z=0;z<I.length-1;z++){r=1<(r=-1>r?-1:r)?1:r;var A=this.maps.element.id+"_LayerIndex_"+i+"_NavigationIndex_"+k+"_Line"+z,j=this.convertRadius(I[z],I[z+1]);if(r<=1&&r>0&&(g=0,I[z].x>I[z+1].x&&(g=1)),r>=-1&&r<0&&(g=1,I[z].x>I[z+1].x&&(g=0)),I[z].x!==I[z+1].x){if(f){b=v.properties.color,y=v.properties.size,C=void 0===v.properties.offSet?0:v.properties.offSet;var B=Math.round(y/2);S="Start"===(x=v.properties.position)?"url(#triangle"+k+")":null,_="End"===x?"url(#triangle"+k+")":null,0!==M&&0===r&&(M="Start"===x?C:-C),M=sf.base.isNullOrUndefined(M)?0:M;var F=this.maps.element.id+"_triangle",R=this.maps.renderer.createDefs();R.innerHTML+='<marker id="triangle'+k+'"></marker>';var U=R.querySelector("#triangle"+k);U.setAttribute("markerWidth",y.toString()),U.setAttribute("markerHeight",y.toString()),U.setAttribute("refX",(B-M).toString()),U.setAttribute("refY",B.toString()),U.setAttribute("orient","auto"),u=new w(F,b,d,p,1,h,"M 0,0  L 0,"+y+" L "+B+", "+B+" Z"),a=this.maps.renderer.drawPath(u),U.appendChild(a),R.appendChild(U),L.appendChild(R)}P=0===(r=Math.abs(r))?"M "+I[z].x+","+I[z].y+"L "+I[z+1].x+","+I[z+1].y+" ":"M "+I[z].x+","+I[z].y+" A "+(j/2+(1-r)*j/(10*r))+" "+(j/2+(1-r)*j/(10*r))+" 0,0,"+g+" , "+I[z+1].x+","+I[z+1].y+" ",u=new w(A,"none",d,p,1,h,P),a=this.maps.renderer.drawPath(u),sf.base.isNullOrUndefined(x)||("Start"===x?a.setAttribute("marker-start",S):a.setAttribute("marker-end",_)),Q(this.maps.selectedNavigationElementId,this.maps.navigationSelectionClass,a,"navigationlineselectionMapStyle"),L.appendChild(a),T.appendChild(L)}}I=[]}return T},e.prototype.convertRadius=function(e,t){var i=t.x-e.x,a=t.y-e.y;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))},e.prototype.getModuleName=function(){return"NavigationLine"},e.prototype.destroy=function(e){},e}(),di=function(){function e(e){this.legendBorderRect=new j(0,0,0,0),this.totalPages=[],this.page=0,this.currentPage=0,this.legendItemRect=new j(0,0,0,0),this.heightIncrement=0,this.widthIncrement=0,this.textMaxWidth=0,this.shapeHighlightCollection=[],this.legendHighlightCollection=[],this.shapePreviousColor=[],this.selectedNonLegendShapes=[],this.shapeToggled=!0,this.legendElement=null,this.maps=e,this.addEventListener()}return e.prototype.renderLegend=function(){this.legendRenderingCollections=[],this.legendCollection=[],this.totalPages=[],this.widthIncrement=0,this.heightIncrement=0,this.defsElement=this.maps.renderer.createDefs(),this.maps.svgObject.appendChild(this.defsElement),this.calculateLegendBounds(),this.drawLegend()},e.prototype.calculateLegendBounds=function(){var e=this,t=this.maps,i=t.legendSettings;this.legendCollection=[];var a=t.mapAreaRect.y;if(this.legendRenderingCollections=[],Array.prototype.forEach.call(t.layersCollection,(function(t,a){if(!sf.base.isNullOrUndefined(t.shapeData)){var o=t.shapeData.features,n=t.shapeDataPath,s=t.shapePropertyPath,l=t.dataSource,r=void 0,d=void 0;if("Layers"===i.type&&t.visible)r=t.shapeSettings.colorValuePath,d=t.shapeSettings.colorMapping,e.getLegends(a,o,d,l,n,r,s);else if("Bubbles"===i.type)for(var p=0,h=t.bubbleSettings;p<h.length;p++){var c=h[p];c.visible&&(r=c.colorValuePath,d=c.colorMapping,l=c.dataSource,e.getLegends(a,o,d,l,n,r,s))}else e.getMarkersLegendCollections(a,t.markerSettings)}})),this.legendCollection.length>0)for(var o=0;o<this.legendCollection.length;o++){var s={name:"legendRendering",cancel:!1,fill:(G=this.legendCollection[o]).fill,shape:i.shape,shapeBorder:i.shapeBorder,text:"number"==typeof G.text?G.text.toString():G.text};t.trigger("legendRendering",s),G.fill=s.fill,G.shape=s.shape,G.shapeBorder=s.shapeBorder,G.text=s.text,s.cancel&&(this.legendCollection.splice(o,1),o--)}var l=t.legendSettings.title.text,r=t.legendSettings.titleStyle;if(this.legendCollection.length>0){var d,p,h=i.mode,c=0,m=0,u=0,g=0,f=i.shapePadding,b=i.shapeHeight,y=i.shapeWidth,v=[],x=[],S=i.position,O=i.labelDisplayMode,_="None"===i.orientation?"Top"===S||"Bottom"===S?"Horizontal":"Vertical":i.orientation,M=i.width.length>1?i.width.indexOf("%")>-1?t.availableSize.width/100*parseInt(i.width,10):parseInt(i.width,10):null,L=i.height.length>1?i.height.indexOf("%")>-1?t.availableSize.height/100*parseInt(i.height,10):parseInt(i.height,10):null,w=0,P=0,I=C(l,r);if("Interactive"===h){var T,k,N=i.textStyle,E=this.legendCollection.length;T="Horizontal"===_?sf.base.isNullOrUndefined(M)?t.mapAreaRect.width/E:M/E:sf.base.isNullOrUndefined(M)?25:M,k="Horizontal"===_?sf.base.isNullOrUndefined(L)?25:L:sf.base.isNullOrUndefined(L)?t.mapAreaRect.height/E:L/E,w=0,P=I.height+10;var z=i.labelPosition,A=0,B=0,F=0,R=0,U=0,Z=0;for(o=0;o<this.legendCollection.length;o++){w="Horizontal"===_?w+T:w,P="Horizontal"===_?P:P+k;var D=this.legendCollection[o].text,H=new n(0,0);"None"===O?H=C(D,N):"Trim"===O?H=C(D=he("Horizontal"===_?T:k,D,N),N):D="",U=Math.max(U,H.height),Z=Math.max(Z,H.width),H.width>0&&H.height>0&&("Horizontal"===_?(A=w+T/2,B="After"===z?P+k+H.height/2+10:P-10):(A="After"===z?w-H.width/2-10:w+T+H.width/2+10,B=P+k/2+H.height/4)),0===o?(F="Horizontal"===_?w:"After"===z?A-H.width/2:w,R="Horizontal"===_?"After"===z?P:B-H.height/2:P,1===this.legendCollection.length&&(M="Horizontal"===_?Math.abs(w+T-F):T+Z+10,L="Horizontal"===_?k+U/2+10:Math.abs(P+k-R))):o===this.legendCollection.length-1&&(M="Horizontal"===_?Math.abs(w+T-F):T+Z+10,L="Horizontal"===_?k+U/2+10:Math.abs(P+k-R)),this.legendRenderingCollections.push({fill:this.legendCollection[o].fill,x:w,y:P,width:T,height:k,text:D,textX:A,textY:B,textWidth:H.width,textHeight:H.height,shapeBorder:this.legendCollection[o].shapeBorder})}1===this.legendCollection.length&&(L=k,M=T),this.legendItemRect={x:F,y:R,width:M,height:L}}else{M=sf.base.isNullOrUndefined(M)?t.mapAreaRect.width:M,L=sf.base.isNullOrUndefined(L)?t.mapAreaRect.height:L;var V=0;this.page=0;for(o=0;o<this.legendCollection.length;o++){var G=this.legendCollection[o];sf.base.isNullOrUndefined(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]});var W=C(G.text,i.textStyle);if(this.textMaxWidth=Math.max(this.textMaxWidth,W.width),0===o)w=c=10+y/2,P=m=a+I.height+(b>W.height?b/2:W.height/4);else{var q=W.height>b?W.height:b;if("Horizontal"===_){var X=x[V-1].x+x[V-1].width+10+y;if(X+f+W.width>M){var Y=(x[V-1].y>v[V-1].y+b/2?x[V-1].y:v[V-1].y+b/2)+a;Y+q>L?(this.getPageChanged(),V=0,v=[],x=[],c=w,m=P):(c=v[0].x,m=Y+q/2)}else c=X-y/2,m=v[V-1].y}else{var J=x[V-1].y>v[V-1].y+b/2?x[V-1].y:v[V-1].y+b/2;if(J+a+q>L){var K=x[V-1].x+this.textMaxWidth+10;K+f+W.width>M?(c=w,m=P,x=[],v=[],this.getPageChanged(),V=0):(c=K+y/2,m=v[0].y)}else c=v[V-1].x,m=J+a+b/2}}u=c+y/2+f,g=m+W.height/4,v.push({x:c,y:m}),x.push({x:u,y:g,width:W.width,height:W.height/2}),this.totalPages[this.page].Collection.push({DisplayText:G.text,ImageSrc:G.imageSrc,Shape:{x:c,y:m},Text:{x:u,y:g},Fill:G.fill,legendShape:G.shape,shapeBorder:G.shapeBorder,idIndex:o,Rect:{x:v[V].x-y/2,y:v[V].y-b/2<g-W.height?v[V].y-b/2:g-W.height,width:Math.abs(v[V].x-y/2-(u+W.width)),height:b>W.height?b:W.height}}),V++}var Q=this.totalPages[0].Collection;Array.prototype.forEach.call(Q,(function(t,i){var a=new j(t.Rect.x,t.Rect.y,t.Rect.width,t.Rect.height);0===i&&(d=a.x,p=a.y),e.widthIncrement=Math.max(e.widthIncrement,Math.abs(d-(a.x+a.width))),e.heightIncrement=Math.max(e.heightIncrement,Math.abs(p-(a.y+a.height)))})),M=this.widthIncrement<M?this.widthIncrement:M,L=this.heightIncrement<L?this.heightIncrement:L,this.legendItemRect={x:Q[0].Rect.x,y:Q[0].Rect.y,width:M,height:L}}}},e.prototype.getLegends=function(e,t,i,a,o,n,s){this.getRangeLegendCollection(e,t,i,a,o,n,s),this.getEqualLegendCollection(e,t,i,a,o,n,s),this.getDataLegendCollection(e,t,i,a,o,n,s)},e.prototype.getPageChanged=function(){this.page++,sf.base.isNullOrUndefined(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]})},e.prototype.legendTextTrim=function(e,t,i,a){var o=t,n=C(t,i).width,s=a-n;if(a>e)for(var l=t.length-1;l>=0;--l){if(s+(n=C(o=t.substring(0,l)+"...",i).width)<=e||o.length<4)return o.length<4&&(o=" "),o}return o},e.prototype.drawLegend=function(){var e,t=this.maps,i=t.legendSettings,a=t.renderer,o=i.textStyle;if(this.legendGroup=a.createGroup({id:t.element.id+"_Legend_Group"}),"Interactive"===i.mode)for(var n=0;n<this.legendRenderingCollections.length;n++){var s=t.element.id+"_Legend_Index_"+n,l=t.element.id+"_Legend_Index_"+n+"_Text",r=this.legendRenderingCollections[n],d=new j(r.x,r.y,r.width,r.height);0===n&&this.renderLegendBorder();var p=new O(r.textX,r.textY);o.color=null!==o.color?o.color:this.maps.themeStyle.legendTextColor;var h=new I(s,r.fill,r.shapeBorder,i.opacity,d);e=new L(l,p.x,p.y,"middle",r.text,"",""),o.fontFamily=t.themeStyle.fontFamily||o.fontFamily,o.size=t.themeStyle.legendFontSize||o.size,F(e,o,o.color,this.legendGroup),this.legendGroup.appendChild(a.drawRectangle(h)),this.legendToggle()}else this.drawLegendItem(this.currentPage)},e.prototype.drawLegendItem=function(e){var t=this.maps,i=t.legendSettings,a=new n(i.shapeWidth,i.shapeHeight),o=t.renderer;if(e>=0&&e<this.totalPages.length){Ce(this.legendGroup.id,this.maps.element.id)&&sf.base.remove(Ce(this.legendGroup.id,this.maps.element.id));for(var s=0;s<this.totalPages[e].Collection.length;s++){var l=this.totalPages[e].Collection[s],r=l.shapeBorder,d=o.createGroup({id:t.element.id+"_Legend_Index_"+l.idIndex}),p=l.DisplayText,h="Markers"===i.type?sf.base.isNullOrUndefined(l.ImageSrc)?i.shape:"Image":l.legendShape,c="HorizontalLine"===i.shape||"VerticalLine"===i.shape||"Cross"===i.shape?sf.base.isNullOrUndefined(i.fill)?"#000000":i.fill:r.color,m=("HorizontalLine"===i.shape||"VerticalLine"===i.shape||"Cross"===i.shape)&&0===r.width?1:r.width,u=t.element.id+"_Legend_Shape_Index_"+l.idIndex,g=t.element.id+"_Legend_Text_Index_"+l.idIndex,f=l.Shape,b=l.Text,y=(sf.base.isNullOrUndefined(l.ImageSrc)?i.shape:l.ImageSrc,new w(u,l.Fill,m,c,i.opacity,""));if(i.textStyle.color=null!==i.textStyle.color?i.textStyle.color:this.maps.themeStyle.legendTextColor,i.textStyle.fontFamily=t.themeStyle.fontFamily||i.textStyle.fontFamily,i.textStyle.size=t.themeStyle.legendFontSize||i.textStyle.size,0===s&&this.renderLegendBorder(),d.appendChild(je(f,h,a,l.ImageSrc,y)),l.Rect.width>this.legendBorderRect.width){var v=l.Rect.x+l.Rect.width;p=this.legendTextTrim(this.legendBorderRect.width,p,i.textStyle,v)}if(F(new L(g,b.x,b.y,"start",p,"",""),i.textStyle,i.textStyle.color,d),this.legendGroup.appendChild(d),s===this.totalPages[e].Collection.length-1){var x=void 0;if(0!==this.page){var S=e+1+"/"+this.totalPages.length,O=i.textStyle,_=C(S,O),M=this.legendItemRect.x+this.legendItemRect.width-_.width-20-10,P=this.legendItemRect.x+this.legendItemRect.width,T=this.legendItemRect.y+this.legendItemRect.height+2.5+10,k=P-10-_.width/2-5;x=o.createGroup({id:t.element.id+"_Legend_Paging_Group"});var N=o.createGroup({id:t.element.id+"_Legend_Left_Paging_Group"}),E=o.createGroup({id:t.element.id+"_Legend_Right_Paging_Group"}),z=" M "+P+" "+T+" L "+(P-10)+" "+(T-5)+" L "+(P-10)+" "+(T+5)+" z ",A=" M "+M+" "+T+" L "+(M+10)+" "+(T-5)+" L "+(M+10)+" "+(T+5)+" z ",B=new w(t.element.id+"_Left_Page","#a6a6a6",0,"#a6a6a6",1,"",A);N.appendChild(o.drawPath(B));var R=new I(t.element.id+"_Left_Page_Rect","transparent",{},1,new j(M-5,T-10,20,20),null,null,"","");N.appendChild(o.drawRectangle(R)),this.wireEvents(N);var U=new w(t.element.id+"_Right_Page","#a6a6a6",0,"#a6a6a6",1,"",z);E.appendChild(o.drawPath(U));var Z=new I(t.element.id+"_Right_Page_Rect","transparent",{},1,new j(P-10,T-5,10,10),null,null,"","");E.appendChild(o.drawRectangle(Z)),this.wireEvents(E),x.appendChild(N),x.appendChild(E);var D={id:t.element.id+"_Paging_Text",x:k,y:T+_.height/4,fill:"#a6a6a6","font-size":"14px","font-style":O.fontStyle,"font-family":O.fontFamily,"font-weight":O.fontWeight,"text-anchor":"middle",transform:"",opacity:1,"dominant-baseline":""};x.appendChild(o.createText(D,S)),this.legendGroup.appendChild(x)}this.legendToggle()}}}},e.prototype.legendHighLightAndSelection=function(e,t){var i,a,o,n;n="Default"===this.maps.legendSettings.mode?document.getElementById(e.id.replace("Shape","Text")):document.getElementById(e.id+"_Text");var s,l=this.maps.legendModule.legendCollection,r=this.maps.layers[l[0].data[0].layerIndex].selectionSettings.enableMultiSelect,d=0,p=!0,h=parseFloat(e.id.charAt(e.id.length-1));this.updateLegendElement();var c=this.maps.toggledLegendId.indexOf(h);if(this.maps.legendSettings.toggleLegendSettings.enable&&"highlight"===t&&-1!==c){var m=this.getIndexofLegend(this.legendHighlightCollection,e);return-1!==m&&this.legendHighlightCollection.splice(m,1),this.removeLegendHighlightCollection(),null}if("selection"===t){if(this.shapeHighlightCollection=[],this.maps.shapeSelections||r||(this.removeAllSelections(),this.maps.shapeSelections=!0),this.maps.legendSelectionCollection.length>0&&(r||this.maps.shapeSelections))for(var u=0;u<this.maps.legendSelectionCollection.length;u++){if(e===this.maps.legendSelectionCollection[u].legendElement){this.maps.legendSelectionCollection[u].legendElement=e,p=!1,this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[u].legendElement),this.maps.selectedLegendElementId.splice(this.maps.selectedLegendElementId.indexOf(h),1),this.maps.legendSelectionCollection.splice(u,1),this.maps.legendSelection=!(this.maps.legendSelectionCollection.length>0);break}if(!r)if(this.maps.legendSelectionCollection.length>1){for(var g=0;g<this.maps.legendSelectionCollection.length;g++)this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[g].legendElement);this.maps.legendSelectionCollection=[]}else this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[u].legendElement),this.maps.legendSelectionCollection.splice(u,1)}}else{if(this.maps.legendSelectionCollection.length>0)for(u=0;u<this.maps.legendSelectionCollection.length;u++){if((e.id.indexOf("_Legend_Shape")>-1||e.id.indexOf("_Legend_Index"))&&e===this.maps.legendSelectionCollection[u].legendElement){p=!1;break}this.removeLegendHighlightCollection()}this.removeLegendHighlightCollection()}if(p)for(var f=0;f<l.length;f++){var b="Interactive"===this.maps.legendSettings.mode?parseFloat(e.id.split("_Legend_Index_")[1]):parseFloat(e.id.split("_Legend_Shape_Index_")[1]);if(n.textContent===l[f].text&&l[f].data.length>0&&b===f){var y=this.maps.layers[l[f].data[0].layerIndex],v=void 0,x=void 0,S=void 0;if(sf.base.isNullOrUndefined(y)||(v="selection"===t?y.selectionSettings.enable:y.highlightSettings.enable,x=void 0,x="selection"===t?y.selectionSettings:y.highlightSettings,S=l[f].data),v)for(var O=0;O<S.length;O++){i=S[O].shapeIndex,a=S[O].layerIndex,o=S[O].dataIndex;var _=document.getElementById(this.maps.element.id+"_LayerIndex_"+a+"_shapeIndex_"+i+"_dataIndex_"+o);if(null!==_){var M=!0;if(null!==this.maps.legendSelectionCollection)for(var C=0;C<this.maps.legendSelectionCollection.length;C++)if(this.maps.legendSelectionCollection[C].legendElement===e){M=!1;break}if("highlight"===t&&M){0===O&&(this.legendHighlightCollection=[],this.pushCollection(e,this.legendHighlightCollection,l[f],y.shapeSettings)),s=this.legendHighlightCollection.length;var L=this.legendHighlightCollection[s-1].legendOldFill;this.legendHighlightCollection[s-1].MapShapeCollection.Elements.push(_);var w=this.legendHighlightCollection[s-1].MapShapeCollection.Elements.length-1,P=_.getAttribute("fill");this.legendHighlightCollection[s-1].shapeOldFillColor.push(P);var I=this.legendHighlightCollection[s-1].shapeOldFillColor[w];this.shapePreviousColor=this.legendHighlightCollection[s-1].shapeOldFillColor,this.setColor(_,sf.base.isNullOrUndefined(x.fill)?I:x.fill,x.opacity.toString(),x.border.color,x.border.width.toString(),"highlight"),this.setColor(e,sf.base.isNullOrUndefined(x.fill)?L:x.fill,x.opacity.toString(),x.border.color,x.border.width.toString(),"highlight")}else if("selection"===t){this.legendHighlightCollection=[],this.maps.legendSelectionClass=x,0===O&&(this.pushCollection(e,this.maps.legendSelectionCollection,l[f],y.shapeSettings),r||0===this.maps.selectedLegendElementId.length||(this.maps.selectedLegendElementId=[]),this.maps.selectedLegendElementId.push(f)),d=this.maps.legendSelectionCollection.length;var T;T=this.maps.legendSelectionCollection[d-1].legendOldFill,this.maps.legendSelectionCollection[d-1].MapShapeCollection.Elements.push(_),this.maps.legendSelectionCollection[d-1].shapeOldFillColor=this.shapePreviousColor,this.setColor(e,sf.base.isNullOrUndefined(x.fill)?T:x.fill,x.opacity.toString(),x.border.color,x.border.width.toString(),"selection"),this.setColor(_,sf.base.isNullOrUndefined(x.fill)?T:x.fill,x.opacity.toString(),x.border.color,x.border.width.toString(),"selection"),-1===this.maps.selectedElementId.indexOf(_.getAttribute("id"))&&this.maps.selectedElementId.push(_.getAttribute("id")),O===S.length-1&&(this.maps.legendSelection=!1,this.removeLegend(this.maps.legendSelectionCollection))}}}}}},e.prototype.setColor=function(e,t,i,a,o,n){"selection"===n?($("ShapeselectionMap","ShapeselectionMapStyle",t,i,a,o,this.maps),e.setAttribute("class","ShapeselectionMapStyle")):(e.setAttribute("fill",t),e.setAttribute("opacity",i),e.setAttribute("stroke",a),e.setAttribute("stroke-width",(Number(o)/this.maps.scale).toString()))},e.prototype.pushCollection=function(e,t,i,a){t.push({legendElement:e,legendOldFill:i.fill,legendOldOpacity:i.opacity,legendOldBorderColor:i.borderColor,legendOldBorderWidth:i.borderWidth,shapeOpacity:a.opacity,shapeOldBorderColor:a.border.color,shapeOldBorderWidth:a.border.width}),length=t.length,t[length-1].MapShapeCollection={Elements:[]},t[length-1].shapeOldFillColor=[]},e.prototype.removeLegend=function(e){for(var t=0;t<e.length;t++){var i=e[t];this.setColor(i.legendElement,i.legendOldFill,i.legendOldOpacity,i.legendOldBorderColor,i.legendOldBorderWidth,"highlight");for(var a=i.MapShapeCollection.Elements.length,o=0;o<a;o++){var n=-1!==i.legendOldFill.indexOf("url")?i.shapeOldFillColor[o]:i.legendOldFill;this.setColor(i.MapShapeCollection.Elements[o],n,i.shapeOpacity,i.shapeOldBorderColor,i.shapeOldBorderWidth,"highlight")}}},e.prototype.removeLegendHighlightCollection=function(){this.legendHighlightCollection.length>0&&(this.removeLegend(this.legendHighlightCollection),this.legendHighlightCollection=[])},e.prototype.removeLegendSelectionCollection=function(e){if(this.maps.legendSelectionCollection.length>0){Te(e);for(var t=this.shapesOfLegend(e),i=t.length,a=0;a<i;a++){var o=Se(t[a]);if("ShapeselectionMapStyle"===o.getAttribute("class")){Te(o);var n;-1!==(n=this.maps.selectedElementId.indexOf(o.id))&&this.maps.selectedElementId.splice(n,1)}}}},e.prototype.removeShapeHighlightCollection=function(){if(this.shapeHighlightCollection.length>0)for(var e=0;e<this.shapeHighlightCollection.length;e++){for(var t=this.shapeHighlightCollection[e],i=!0,a=0;a<this.maps.legendSelectionCollection.length;a++)this.maps.legendSelectionCollection[a].legendElement===t.legendElement&&(i=!1);i&&this.setColor(t.legendElement,t.legendOldFill,t.legendOldOpacity,t.legendOldBorderColor,t.legendOldBorderWidth,"highlight")}},e.prototype.shapeHighLightAndSelection=function(e,t,i,a,o){if(void 0!==t){this.updateLegendElement(),this.shapeToggled=!0;var n=this.maps.legendModule.legendCollection,s=this.legendIndexOnShape(t,o),l=this.shapeDataOnLegend(e),r=this.maps.toggledLegendId.indexOf(s.actualIndex);if(this.maps.legendSettings.toggleLegendSettings.enable&&-1!==r){this.shapeToggled=!1,this.legendHighlightCollection=[];var d=this.getIndexofLegend(this.shapeHighlightCollection,l.LegendEle);return-1!==d&&this.shapeHighlightCollection.splice(d,1),this.removeShapeHighlightCollection(),null}if(void 0===s.currentIndex&&void 0===s.actualIndex)return this.removeShapeHighlightCollection(),null;if(void 0!==s.currentIndex||"selection"!==a||this.maps.layers[o].selectionSettings.enableMultiSelect||"ShapeselectionMapStyle"===e.getAttribute("class")||(this.maps.legendSelection=!1),"selection"!==a||this.maps.layers[o].selectionSettings.enableMultiSelect||this.maps.legendSelection||(this.removeAllSelections(),this.maps.legendSelection=!0),void 0===s.currentIndex){if("selection"===a&&void 0!==s.actualIndex){for(var p=0,h=0;h<l.Elements.length;h++)"ShapeselectionMapStyle"===l.Elements[h].getAttribute("class")&&p++;var c=this.maps.selectedLegendElementId.indexOf(s.actualIndex);-1===c?(this.maps.selectedLegendElementId.push(s.actualIndex),this.maps.legendSelectionClass=i):p<=1&&"ShapeselectionMapStyle"===e.getAttribute("class")&&(this.maps.layers[o].selectionSettings.enableMultiSelect?p<=1&&"ShapeselectionMapStyle"===e.getAttribute("class")&&this.maps.selectedLegendElementId.splice(c,1):this.maps.selectedLegendElementId.splice(c,1))}return this.removeShapeHighlightCollection(),null}var m=n[s.actualIndex].text,u=void 0,g=void 0;"Default"===this.maps.legendSettings.mode?void 0!==s.currentIndex&&(u=document.getElementById(this.maps.element.id+"_Legend_Text_Index_"+s.actualIndex).textContent,g=document.getElementById(this.maps.element.id+"_Legend_Shape_Index_"+s.actualIndex)):(u=document.getElementById(this.maps.element.id+"_Legend_Index_"+s.actualIndex+"_Text").textContent,g=document.getElementById(this.maps.element.id+"_Legend_Index_"+s.actualIndex)),this.oldShapeElement=l.LegendEle;var f=this.maps.legendSelectionCollection.length;if(m===u){var b=!0;if(this.maps.legendSelectionCollection)for(h=0;h<this.maps.legendSelectionCollection.length;h++)if(this.maps.legendSelectionCollection[h].legendElement===l.LegendEle){b=!1;break}if("highlight"===a&&b){(void 0===(v=this.isTargetSelected(l,this.shapeHighlightCollection))||v&&!v.IsSelected)&&this.pushCollection(g,this.shapeHighlightCollection,n[s.actualIndex],this.maps.layers[o].shapeSettings);for(var y=0;y<this.shapeHighlightCollection.length;y++)l.LegendEle.id===this.shapeHighlightCollection[y].legendElement.id&&(this.shapeHighlightCollection[y].legendElement=l.LegendEle);if(f>0)for(y=0;y<f;y++){if(l.LegendEle===this.maps.legendSelectionCollection[y].legendElement){this.maps.legendSelectionCollection[y].legendElement=l.LegendEle,this.removeShapeHighlightCollection();break}y===f-1&&(this.removeShapeHighlightCollection(),this.setColor(g,sf.base.isNullOrUndefined(i.fill)?g.getAttribute("fill"):i.fill,i.opacity.toString(),i.border.color,i.border.width.toString(),"highlight"))}else this.removeShapeHighlightCollection(),this.setColor(g,sf.base.isNullOrUndefined(i.fill)?g.getAttribute("fill"):i.fill,i.opacity.toString(),i.border.color,i.border.width.toString(),"highlight")}else if("selection"===a){var v=this.isTargetSelected(l,this.maps.legendSelectionCollection);if(f>0)for(y=0;y<this.maps.legendSelectionCollection.length;)if(l.LegendEle===this.maps.legendSelectionCollection[y].legendElement||i.enableMultiSelect)y++;else{var x=this.maps.legendSelectionCollection[y],S=this.maps.selectedLegendElementId.indexOf(s.actualIndex);this.maps.selectedLegendElementId.splice(S,1),this.maps.legendSelectionCollection.splice(y,1),Te(x.legendElement),this.maps.shapeSelections=!0,y=0}if(v&&v.IsSelected&&"ShapeselectionMapStyle"===e.getAttribute("class")){x=this.maps.legendSelectionCollection[v.SelectionIndex];var O=0;if(i.enableMultiSelect)for(h=0;h<l.Elements.length;h++)e.getAttribute("class")===l.Elements[h].getAttribute("class")&&O++;O<=1&&(i.enableMultiSelect||this.maps.legendSelection)&&(this.maps.selectedLegendElementId.splice(this.maps.selectedLegendElementId.indexOf(s.actualIndex),1),sf.base.isNullOrUndefined(l.LegendEle)||Te(l.LegendEle),this.maps.legendSelectionCollection.splice(v.SelectionIndex,1),this.maps.shapeSelections=!0)}else{if((void 0===v||v&&!v.IsSelected)&&!sf.base.isNullOrUndefined(g))-1===(M=this.getIndexofLegend(this.maps.legendSelectionCollection,g))&&this.pushCollection(g,this.maps.legendSelectionCollection,n[s.actualIndex],this.maps.layers[o].shapeSettings);var _=!0;for(h=0;h<this.maps.selectedLegendElementId.length;h++)s.actualIndex===this.maps.selectedLegendElementId[h]&&(_=!1);if(_&&this.maps.selectedLegendElementId.push(s.actualIndex),this.maps.legendSelectionClass=i,this.removeLegend(this.shapeHighlightCollection),!sf.base.isNullOrUndefined(g)){this.setColor(g,sf.base.isNullOrUndefined(i.fill)?g.getAttribute("fill"):i.fill,i.opacity.toString(),i.border.color,i.border.width.toString(),"selection");var M=this.getIndexofLegend(this.maps.legendSelectionCollection,g);this.maps.legendSelectionCollection[M].MapShapeCollection.Elements.push(e)}this.maps.shapeSelections=!1}}else document.getElementsByClassName("highlightMapStyle").length>0&&(this.removeShapeHighlightCollection(),Te(document.getElementsByClassName("highlightMapStyle")[0]))}}else this.removeShapeHighlightCollection()},e.prototype.isTargetSelected=function(e,t){for(var i,a=0;a<t.length;a++)sf.base.isNullOrUndefined(e.LegendEle.getAttribute("id"))||e.LegendEle.getAttribute("id")!==t[a].legendElement.getAttribute("id")||(i={IsSelected:!0,SelectionIndex:a});return i},e.prototype.updateLegendElement=function(){for(var e=0;e<this.maps.legendSelectionCollection.length;e++)document.getElementById(this.maps.legendSelectionCollection[e].legendElement.id)&&(this.maps.legendSelectionCollection[e].legendElement=document.getElementById(this.maps.legendSelectionCollection[e].legendElement.id))},e.prototype.getIndexofLegend=function(e,t){return e.map((function(e){return e.legendElement})).indexOf(t)},e.prototype.removeAllSelections=function(){for(var e=0;e<this.maps.selectedElementId.length;e++){Te(i=document.getElementById(this.maps.selectedElementId[e]))}for(var t=0;t<this.maps.selectedLegendElementId.length;t++){var i=("Interactive"===this.maps.legendSettings.mode?"container_Legend_Index_":"container_Legend_Shape_Index_")+this.maps.selectedLegendElementId[t],a=document.getElementById(i);sf.base.isNullOrUndefined(a)||Te(document.getElementById(i))}this.maps.legendSelectionCollection=[],this.maps.selectedLegendElementId=[],this.maps.selectedElementId=[]},e.prototype.legendIndexOnShape=function(e,t){var i,a,o,n=e[this.maps.layers[t].shapeDataPath],s=this.maps.legendSettings.mode,l=this.maps.legendModule.legendCollection;"Default"!==s||sf.base.isNullOrUndefined(this.maps.legendModule.totalPages)||(o=this.maps.legendModule.totalPages[this.maps.legendModule.currentPage].Collection);for(var r="Default"===s?o.length:1,d=0;d<l.length;d++){for(var p=l[d].data,h=0;h<r;h++)if("Default"!==s||l[d].text===o[h].DisplayText)for(var c=0;c<p.length;c++)n===p[c].name&&(i=h);for(c=0;c<p.length;c++)n===p[c].name&&(a=d)}return{currentIndex:i,actualIndex:a}},e.prototype.shapeDataOnLegend=function(e){for(var t,i,a,o=this.maps.legendModule.legendCollection,n=this.maps.legendSettings,s=0;s<o.length;s++){for(var l=o[s].data,r=!1,d=[],p={Elements:[]},h=0;h<l.length;h++){t=l[h].shapeIndex,i=l[h].layerIndex,a=l[h].dataIndex;var c=document.getElementById(this.maps.element.id+"_LayerIndex_"+i+"_shapeIndex_"+t+"_dataIndex_"+a);e===c&&(r=!0),d.push(c)}if(r)return sf.base.isNullOrUndefined(p.LegendEle)&&(p.LegendEle="Default"===n.mode?document.getElementById(this.maps.element.id+"_Legend_Shape_Index_"+s):document.getElementById(this.maps.element.id+"_Legend_Index_"+s)),p.Elements=d,p}return null},e.prototype.shapesOfLegend=function(e){for(var t,i,a,o=parseFloat(e.id.charAt(e.id.length-1)),n=this.maps.legendModule.legendCollection[o].data,s=[],l=0;l<n.length;l++){t=n[l].shapeIndex,i=n[l].layerIndex,a=n[l].dataIndex;var r=document.getElementById(this.maps.element.id+"_LayerIndex_"+i+"_shapeIndex_"+t+"_dataIndex_"+a);sf.base.isNullOrUndefined(r)||s.push(r.id)}return s},e.prototype.legendToggle=function(){var e=this.maps,t=e.legendSettings;if(this.maps.selectedLegendElementId)for(var i=0;i<this.maps.selectedLegendElementId.length;i++){var a="Interactive"===t.mode?this.maps.element.id+"_Legend_Index_":this.maps.element.id+"_Legend_Shape_Index_",o=e.svgObject.querySelector("#"+a+this.maps.selectedLegendElementId[i]);if(!sf.base.isNullOrUndefined(o)){var n=sf.base.isNullOrUndefined(this.maps.legendSelectionClass.fill)?o.getAttribute("fill"):this.maps.legendSelectionClass.fill;this.setColor(o,n,this.maps.legendSelectionClass.opacity.toString(),this.maps.legendSelectionClass.border.color,this.maps.legendSelectionClass.border.width.toString(),"selection");for(var s=0;s<this.maps.legendSelectionCollection.length;s++)this.maps.legendSelectionCollection[s].legendElement.id===o.id&&(this.maps.legendSelectionCollection[s].legendElement=o);if(-1===this.getIndexofLegend(this.maps.legendSelectionCollection,o)){var l=this.maps.legendModule.legendCollection[this.maps.selectedLegendElementId[i]].data[i].layerIndex;this.pushCollection(o,this.maps.legendSelectionCollection,this.maps.legendModule.legendCollection[this.maps.selectedLegendElementId[i]],this.maps.layers[l].shapeSettings)}}}if(this.maps.toggledLegendId)for(i=0;i<this.maps.toggledLegendId.length;i++){var r="Interactive"===t.mode?"#"+this.maps.element.id+"_Legend_Index_"+this.maps.toggledLegendId[i]+"_Text":"#"+this.maps.element.id+"_Legend_Text_Index_"+this.maps.toggledLegendId[i],d=e.svgObject.querySelector(r);sf.base.isNullOrUndefined(d)||d.setAttribute("fill","#E5E5E5");var p="Interactive"===t.mode?"#"+this.maps.element.id+"_Legend_Index_"+this.maps.toggledLegendId[i]:"#"+this.maps.element.id+"_Legend_Shape_Index_"+this.maps.toggledLegendId[i],h=e.svgObject.querySelector(p);sf.base.isNullOrUndefined(h)||h.setAttribute("fill","#E5E5E5")}},e.prototype.renderLegendBorder=function(){var e=this.maps,t=e.legendSettings,i=t.title.text,a=t.titleStyle,o=he(this.legendItemRect.width+20,i,a),n=C(o,a);this.legendBorderRect=new j(this.legendItemRect.x-10,this.legendItemRect.y-10-n.height,this.legendItemRect.width+20,this.legendItemRect.height+20+n.height+("Interactive"===t.mode?0:0!==this.page?10:0));var s=new I(e.element.id+"_Legend_Border",t.background,t.border,1,this.legendBorderRect,null,null,"","");this.legendGroup.appendChild(e.renderer.drawRectangle(s)),this.getLegendAlignment(e,this.legendBorderRect.width,this.legendBorderRect.height,t),this.legendGroup.setAttribute("transform","translate( "+(this.translate.x+-this.legendBorderRect.x)+" "+(this.translate.y+-this.legendBorderRect.y)+" )"),e.svgObject.appendChild(this.legendGroup),i&&(a.color=null!==a.color?a.color:this.maps.themeStyle.legendTextColor,F(new L(e.element.id+"_LegendTitle",this.legendItemRect.x+this.legendItemRect.width/2,this.legendItemRect.y-n.height/2-5,"middle",o,""),a,a.color,this.legendGroup))},e.prototype.changeNextPage=function(e){this.currentPage=e.target.id.indexOf("_Left_Page_")>-1?this.currentPage-1:this.currentPage+1,this.legendGroup=this.maps.renderer.createGroup({id:this.maps.element.id+"_Legend_Group"}),this.drawLegendItem(this.currentPage),Ce(this.maps.element.id+"_Legend_Border",this.maps.element.id)&&(Ce(this.maps.element.id+"_Legend_Border",this.maps.element.id).style.pointerEvents="none")},e.prototype.getLegendAlignment=function(e,t,i,a){var o,n,s,l=(s=sf.base.extend({},e.mapAreaRect,s,!0)).x,r=s.y,d=s.height,p=s.width,h=e.availableSize.width,c=e.availableSize.height;if("Float"===a.position)this.translate=a.location;else{switch(a.position){case"Top":case"Bottom":s.height=d-i,o=h/2-t/2,n="Top"===a.position?r:r+s.height,s.y="Top"===a.position?r+i+10:r;break;case"Left":case"Right":s.width=p-t,o="Left"===a.position?l:l+s.width-10,n=c/2-i/2,s.x="Left"===a.position?l+t:l}switch(a.alignment){case"Near":"Top"===a.position||"Bottom"===a.position?o=s.x:n=s.y;break;case"Far":"Top"===a.position||"Bottom"===a.position?o=h-t-10:n=c-i}(a.height||a.width)&&"Interactive"!==a.mode?e.totalRect=s:e.mapAreaRect=s,this.translate=new O(o,n)}},e.prototype.getMarkersLegendCollections=function(e,t){var i=this;Array.prototype.forEach.call(t,(function(t,a){var o=t.dataSource,n=t.legendText;Array.prototype.forEach.call(o,(function(o,s){var l=null,r=!!sf.base.isNullOrUndefined(o[i.maps.legendSettings.showLegendPath])||o[i.maps.legendSettings.showLegendPath];if(t.visible&&r&&!sf.base.isNullOrUndefined(o.latitude)&&!sf.base.isNullOrUndefined(o.longitude)){if(t.template){var d=xe(t.template)(i.maps);l=(sf.base.isNullOrUndefined(d.childElementCount)?d[0]:d).querySelector("img").src}var p=sf.base.isNullOrUndefined(o[n])?"":o[n];!!i.maps.legendSettings.removeDuplicateLegend&&i.removeDuplicates(i.legendCollection,p)||i.legendCollection.push({layerIndex:e,markerIndex:a,dataIndex:s,fill:t.fill,text:p,imageSrc:l})}}))}))},e.prototype.getRangeLegendCollection=function(e,t,i,a,o,n,s){for(var l,r=this,d=0,p=this.maps.legendSettings.fill,h=[],c=function(i){if(!sf.base.isNullOrUndefined(i.from)&&!sf.base.isNullOrUndefined(i.to)){l=sf.base.isNullOrUndefined(i.label)?i.from+" - "+i.to:i.label,h=[];var c=!1;Array.prototype.forEach.call(a,(function(a,l){var d=n.indexOf(".")>-1?Number(V(a,n)):parseFloat(a[n]);d>=i.from&&d<=i.to&&(c=!0,h.push(r.getLegendData(e,l,a,o,t,s,d)))})),c||h.push({layerIndex:e,shapeIndex:null,dataIndex:null,name:null,value:null});var u=sf.base.isNullOrUndefined(p)?"[object Array]"===Object.prototype.toString.call(i.color)?sf.base.isNullOrUndefined(i.value)?m.legendGradientColor(i,d):i.color[0]:i.color:p;d++,m.getOverallLegendItemsCollection(l,u,h,i.showLegend)}},m=this,u=0,g=i;u<g.length;u++){c(g[u])}},e.prototype.getOverallLegendItemsCollection=function(e,t,i,a){var o=[],n=this.maps.legendSettings;if(i.length>0&&a){for(var s=0;s<i.length;s++){var l=i[s];if(l.length>0)for(var r=0;r<l.length;r++)o.push(l[r]);else o.push(i[s]);o._isVisible=!0}!!this.maps.legendSettings.removeDuplicateLegend&&this.removeDuplicates(this.legendCollection,e)||this.legendCollection.push({text:e,fill:t,data:o,opacity:n.opacity,borderColor:n.shapeBorder.color,borderWidth:n.shapeBorder.width})}},e.prototype.removeDuplicates=function(e,t){for(var i=!1,a=0;a<e.length;a++)if(e[a].text===t){i=!0;break}return i},e.prototype.getEqualLegendCollection=function(e,t,i,a,o,n,s){for(var l,r=this,d=this.maps.legendSettings.fill,p=[],h=[],c=[],m=[],u=function(u){if(sf.base.isNullOrUndefined(u.value)){if(sf.base.isNullOrUndefined(u.minOpacity)&&sf.base.isNullOrUndefined(u.maxOpacity)&&sf.base.isNullOrUndefined(u.value)&&sf.base.isNullOrUndefined(u.from)&&sf.base.isNullOrUndefined(u.to)&&!sf.base.isNullOrUndefined(u.color)){if(Array.prototype.forEach.call(a,(function(i,a){for(var l=n.indexOf(".")>-1?V(i,n):i[n],d=0;d<c.length;d++)l===c[d]&&m.push(r.getLegendData(e,a,i,o,t,s,l))})),0===c.length){var f=!1;Array.prototype.forEach.call(a,(function(a,l){f=!1;for(var d=a[n],p=0;p<i.length;p++)sf.base.isNullOrUndefined(d)||isNaN(d)?f||(f=!1):d>=i[p].from&&d<=i[p].to&&(f=!0);f||m.push(r.getLegendData(e,l,a,o,t,s,d))}))}l=sf.base.isNullOrUndefined(u.label)?"Others":u.label;var b="[object Array]"===Object.prototype.toString.call(u.color)?u.color[0]:u.color;g.getOverallLegendItemsCollection(l,b,m,u.showLegend)}}else{l=sf.base.isNullOrUndefined(u.label)?u.value:u.label,h=[];var y=!1;Array.prototype.forEach.call(a,(function(i,a){var l=n.indexOf(".")>-1?V(i,n):i[n];l===u.value?(y=!0,-1===p.indexOf(l)&&p.push(l),h.push(r.getLegendData(e,a,i,o,t,s,l))):-1===c.indexOf(l)&&c.push(l)}));for(var v=0;v<p.length;v++)for(var x=0;x<c.length;x++)if(p[v]===c[x]){var S=c.indexOf(p[v]);c.splice(S,1)}y||h.push({layerIndex:e,shapeIndex:null,dataIndex:null,name:null,value:null});var O=sf.base.isNullOrUndefined(d)?"[object Array]"===Object.prototype.toString.call(u.color)?u.color[0]:u.color:d;g.getOverallLegendItemsCollection(l,O,h,u.showLegend)}},g=this,f=0,b=i;f<b.length;f++){u(b[f])}},e.prototype.getDataLegendCollection=function(e,t,i,a,o,n,s){var l,r=this,d=this.maps.legendSettings.fill,p=this.maps.legendSettings.valuePath;sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(a)||Array.prototype.forEach.call(a,(function(a,h){var c=!!sf.base.isNullOrUndefined(r.maps.legendSettings.showLegendPath)||!sf.base.isNullOrUndefined(a[r.maps.legendSettings.showLegendPath])&&a[r.maps.legendSettings.showLegendPath],m=n.indexOf(".")>-1?V(a,n):a[n],u=[],g=sf.base.isNullOrUndefined(d)?m:d;sf.base.isNullOrUndefined(m)||0!==i.length||(l=sf.base.isNullOrUndefined(a[p])?o.indexOf(".")>-1?V(a,o):a[o]:p.indexOf(".")>-1?V(a,p):a[p],u.push(r.getLegendData(e,h,a,o,t,s,m))),r.getOverallLegendItemsCollection(l,g,u,c)}))},e.prototype.interactiveHandler=function(e){var t=e.target,i=this.maps.legendSettings,a=this.maps.element.id+"_Interactive_Legend",o="Layers"===i.type?"_shapeIndex_":"Markers"===i.type?"_MarkerIndex_":"_BubbleIndex_";if(t.id.indexOf(o)>1){var n=parseFloat(t.id.split("_LayerIndex_")[1].split("_")[0]),s=parseFloat(t.id.split(/_dataIndex_/i)[1].split("_")[0]),l=void 0,r=void 0,d=void 0;sf.base.isNullOrUndefined(Ce(a,this.maps.element.id))||sf.base.remove(Ce(a,this.maps.element.id));var p=this.maps.layersCollection[n],h="Layers"===i.type?p.visible:"Markers"===i.type?p.markerSettings[parseFloat(t.id.split("_MarkerIndex_")[1].split("_")[0])].visible:this.maps.getBubbleVisible(this.maps.layersCollection[n]);if(i.visible&&this.legendRenderingCollections.length>0&&"Interactive"===i.mode&&h)for(var c=this.maps.svgObject.getBoundingClientRect(),m=0;m<this.legendCollection.length;m++){var u=this.legendCollection[m],g=Ce(this.maps.element.id+"_Legend_Index_"+m,this.maps.element.id),f=g.getBoundingClientRect(),b=new j(Math.abs(f.left-c.left),Math.abs(f.top-c.top),f.width,f.height);if(l=g.getAttribute("fill"),r=i.shapeBorder.color,d=i.shapeBorder.width,!sf.base.isNullOrUndefined(u.data))for(var y=u.data,v=0;v<y.length;v++)if(s===y[v].dataIndex&&n===y[v].layerIndex){this.renderInteractivePointer(i,l,r,a,d,b);break}}}else sf.base.isNullOrUndefined(Ce(a,this.maps.element.id))||sf.base.remove(Ce(a,this.maps.element.id))},e.prototype.renderInteractivePointer=function(e,t,i,a,o,n){var s,l,r,d;s="Horizontal"===("None"===e.orientation?"Top"===e.position||"Bottom"===e.position?"Horizontal":"Vertical":e.orientation)?e.invertedPointer?" M "+(r=n.x+n.width/2)+" "+(d=n.y+n.height)+" L "+(r-10)+" "+(d+10)+" L "+(r+10)+" "+(d+10)+" Z ":" M "+(r=n.x+n.width/2)+" "+(d=n.y)+" L "+(r-10)+" "+(d-10)+" L "+(r+10)+" "+(d-10)+" Z ":e.invertedPointer?" M "+(r=n.x)+" "+(d=n.y+n.height/2)+" L "+(r-10)+" "+(d-10)+" L "+(r-10)+" "+(d+10)+" z ":" M "+(r=n.x+n.width)+" "+(d=n.y+n.height/2)+" L "+(r+10)+" "+(d-10)+" L "+(r+10)+" "+(d+10)+" z ",l=new w(a,t,o,i,1,"",s),this.maps.svgObject.appendChild(this.maps.renderer.drawPath(l))},e.prototype.wireEvents=function(e){sf.base.EventHandler.add(e,sf.base.Browser.touchStartEvent,this.changeNextPage,this)},e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on(sf.base.Browser.touchMoveEvent,this.interactiveHandler,this),this.maps.on(sf.base.Browser.touchEndEvent,this.interactiveHandler,this),this.maps.on("click",this.legendClick,this))},e.prototype.legendClick=function(e){var t=this.maps.legendSettings.toggleLegendSettings.fill,i=this.maps.legendSettings.toggleLegendSettings.opacity,a=this.maps.legendSettings.toggleLegendSettings.border.color,o=this.maps.legendSettings.toggleLegendSettings.border.width;if(e.parentNode.id.indexOf(this.maps.element.id+"_Legend_Index_")>-1){var n=void 0,s=parseFloat(e.parentElement.id.substr((this.maps.element.id+"_Legend_Index_").length)),l=(g=this.legendCollection[s].data)._isVisible,r=void 0;if(this.maps.legendSettings.toggleLegendSettings.enable&&"Bubbles"===this.maps.legendSettings.type)for(var d=0;d<this.maps.layers.length;d++)for(var p=0;p<this.maps.layers[d].bubbleSettings.length;p++){for(var h=0;h<g.length;h++)r=this.legendCollection[s].data[h],n=Ce(this.maps.element.id+"_LayerIndex_"+r.layerIndex+"_BubbleIndex_"+p+"_dataIndex_"+r.dataIndex,this.maps.element.id),l&&null!==n?(this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(n.setAttribute("fill",this.maps.layers[d].shapeSettings.fill),n.setAttribute("stroke",this.maps.layers[d].shapeSettings.border.color),n.setAttribute("opacity",this.maps.layers[d].shapeSettings.opacity.toString()),n.setAttribute("stroke-width",this.maps.layers[d].shapeSettings.border.width.toString())):(n.setAttribute("fill",t),n.setAttribute("opacity",i.toString()),n.setAttribute("stroke",a),n.setAttribute("stroke-width",o.toString())),null!==e&&(Ce(this.maps.element.id+"_Legend_Shape_Index_"+s,this.maps.element.id).setAttribute("fill","#E5E5E5"),Ce(this.maps.element.id+"_Legend_Text_Index_"+s,this.maps.element.id).setAttribute("fill","#E5E5E5"))):(n.setAttribute("fill",this.legendCollection[s].fill),n.setAttribute("stroke",this.maps.layers[d].bubbleSettings[p].border.color),n.setAttribute("opacity",this.maps.layers[d].bubbleSettings[p].opacity.toString()),n.setAttribute("stroke-width",this.maps.layers[d].bubbleSettings[p].border.width.toString()),null!==e&&(Ce(this.maps.element.id+"_Legend_Shape_Index_"+s,this.maps.element.id).setAttribute("fill",this.legendCollection[s].fill),Ce(this.maps.element.id+"_Legend_Text_Index_"+s,this.maps.element.id).setAttribute("fill","#757575")));g._isVisible=!l}if("Layers"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable){var c=void 0;this.removeCollections(e,s);var m=this.maps.toggledLegendId.indexOf(s);-1!==m&&(l=!1);for(p=0;p<this.maps.layers.length;p++)for(h=0;h<g.length;h++)if(r=this.legendCollection[s].data[h],null!==(c=Ce(this.maps.element.id+"_LayerIndex_"+r.layerIndex+"_shapeIndex_"+r.shapeIndex+"_dataIndex_"+r.dataIndex,this.maps.element.id))){var u=this.maps.toggledShapeElementId.indexOf(c.id);l?(0===h&&this.maps.toggledLegendId.push(s),-1===u&&this.maps.toggledShapeElementId.push(c.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(c.setAttribute("fill",this.maps.layers[p].shapeSettings.fill),c.setAttribute("opacity",this.maps.layers[p].shapeSettings.opacity.toString()),c.setAttribute("stroke",this.maps.layers[p].shapeSettings.border.color),c.setAttribute("stroke-width",this.maps.layers[p].shapeSettings.border.width.toString())):(c.setAttribute("fill",t),c.setAttribute("opacity",i.toString()),c.setAttribute("stroke",a),c.setAttribute("stroke-width",o.toString())),null!==e&&(Ce(this.maps.element.id+"_Legend_Text_Index_"+s,this.maps.element.id).setAttribute("fill","#E5E5E5"),Ce(this.maps.element.id+"_Legend_Shape_Index_"+s,this.maps.element.id).setAttribute("fill","#E5E5E5"))):(-1!==m&&0===h&&this.maps.toggledLegendId.splice(m,1),-1!==u&&this.maps.toggledShapeElementId.splice(u,1),c.setAttribute("fill",this.legendCollection[s].fill),c.setAttribute("opacity",this.maps.layers[p].shapeSettings.opacity.toString()),c.setAttribute("stroke",this.maps.layers[p].shapeSettings.border.color),c.setAttribute("stroke-width",this.maps.layers[p].shapeSettings.border.width.toString()),null!==e&&(Ce(this.maps.element.id+"_Legend_Text_Index_"+s,this.maps.element.id).setAttribute("fill","#757575"),Ce(this.maps.element.id+"_Legend_Shape_Index_"+s,this.maps.element.id).setAttribute("fill",this.legendCollection[s].fill)))}g._isVisible=!l}}else if(!sf.base.isNullOrUndefined(e.id)&&(e.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")>-1||-1!==e.id.indexOf(this.maps.element.id+"_Legend_Index"))&&this.maps.legendSettings.visible&&-1===e.id.indexOf("_Text")){var g,f=void 0,b=(s=parseFloat(e.id.substr((this.maps.element.id+"_Legend_Index_").length)),void 0);l=(g=this.legendCollection[s].data)._isVisible;if("Bubbles"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable)for(d=0;d<this.maps.layers.length;d++)for(p=0;p<this.maps.layers[d].bubbleSettings.length;p++){for(h=0;h<g.length;h++)b=this.legendCollection[s].data[h],f=Ce(this.maps.element.id+"_LayerIndex_"+b.layerIndex+"_BubbleIndex_"+p+"_dataIndex_"+b.dataIndex,this.maps.element.id),l&&null!==f?(this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(f.setAttribute("fill",this.maps.layers[d].shapeSettings.fill),f.setAttribute("stroke",this.maps.layers[d].shapeSettings.border.color),f.setAttribute("stroke-width",this.maps.layers[d].shapeSettings.border.width.toString()),f.setAttribute("opacity",this.maps.layers[d].shapeSettings.opacity.toString())):(f.setAttribute("fill",t),f.setAttribute("opacity",i.toString()),f.setAttribute("stroke",a),f.setAttribute("stroke-width",o.toString())),null!==e&&(Ce(this.maps.element.id+"_Legend_Index_"+s+"_Text",this.maps.element.id).setAttribute("fill","#E5E5E5"),Ce(this.maps.element.id+"_Legend_Index_"+s,this.maps.element.id).setAttribute("fill","#E5E5E5"))):(f.setAttribute("fill",this.legendCollection[s].fill),f.setAttribute("stroke",this.maps.layers[d].bubbleSettings[p].border.color),f.setAttribute("stroke-width",this.maps.layers[d].bubbleSettings[p].border.width.toString()),f.setAttribute("opacity",this.maps.layers[d].bubbleSettings[p].opacity.toString()),null!==e&&(Ce(this.maps.element.id+"_Legend_Index_"+s,this.maps.element.id).setAttribute("fill",this.legendCollection[s].fill),Ce(this.maps.element.id+"_Legend_Index_"+s+"_Text",this.maps.element.id).setAttribute("fill","#757575")));g._isVisible=!l}if("Layers"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable){var y=void 0;this.removeCollections(e,s);var v=this.maps.toggledLegendId.indexOf(s);-1!==v&&(l=!1);for(d=0;d<this.maps.layers.length;d++)for(h=0;h<g.length;h++)if(b=this.legendCollection[s].data[h],null!==(y=Ce(this.maps.element.id+"_LayerIndex_"+b.layerIndex+"_shapeIndex_"+b.shapeIndex+"_dataIndex_"+b.dataIndex,this.maps.element.id))){u=this.maps.toggledShapeElementId.indexOf(y.id);l?(0===h&&this.maps.toggledLegendId.push(s),-1===u&&this.maps.toggledShapeElementId.push(y.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(y.setAttribute("fill",this.maps.layers[0].shapeSettings.fill),y.setAttribute("stroke",this.maps.layers[0].shapeSettings.border.color),y.setAttribute("opacity",this.maps.layers[d].shapeSettings.opacity.toString()),y.setAttribute("stroke-width",this.maps.layers[d].shapeSettings.border.width.toString())):(y.setAttribute("fill",t),y.setAttribute("opacity",i.toString()),y.setAttribute("stroke",a),y.setAttribute("stroke-width",o.toString())),null!==e&&(Ce(this.maps.element.id+"_Legend_Index_"+s,this.maps.element.id).setAttribute("fill","#E5E5E5"),Ce(this.maps.element.id+"_Legend_Index_"+s+"_Text",this.maps.element.id).setAttribute("fill","#E5E5E5"))):(-1!==v&&0===h&&this.maps.toggledLegendId.splice(v,1),-1!==u&&this.maps.toggledShapeElementId.splice(u,1),y.setAttribute("fill",this.legendCollection[s].fill),y.setAttribute("stroke",this.maps.layers[0].shapeSettings.border.color),y.setAttribute("opacity",this.maps.layers[d].shapeSettings.opacity.toString()),y.setAttribute("stroke-width",this.maps.layers[d].shapeSettings.border.width.toString()),null!==e&&(Ce(this.maps.element.id+"_Legend_Index_"+s+"_Text",this.maps.element.id).setAttribute("fill","#757575"),Ce(this.maps.element.id+"_Legend_Index_"+s,this.maps.element.id).setAttribute("fill",this.legendCollection[s].fill)))}g._isVisible=!l}}},e.prototype.removeCollections=function(e,t){this.removeLegendSelectionCollection(e);var i=this.getIndexofLegend(this.maps.legendSelectionCollection,e);-1!==i&&this.maps.legendSelectionCollection.splice(i,1),-1!==this.getIndexofLegend(this.legendHighlightCollection,e)&&this.legendHighlightCollection.splice(i,1);var a=this.getIndexofLegend(this.shapeHighlightCollection,e);-1!==a&&this.shapeHighlightCollection.splice(a,1);var o=this.maps.selectedLegendElementId.indexOf(t);-1!==o&&this.maps.selectedLegendElementId.splice(o,1)},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off(sf.base.Browser.touchMoveEvent,this.interactiveHandler),this.maps.off(sf.base.Browser.touchEndEvent,this.interactiveHandler),this.maps.off("click",this.legendClick))},e.prototype.getLegendData=function(e,t,i,a,o,n,s){var l=[];if("[object Array]"===Object.prototype.toString.call(o))for(var r=0;r<o.length;r++){var d=o[r],p=a.indexOf(".")>-1?V(i,a):i[a],h=se(i[a],n,d.properties),c=sf.base.isNullOrUndefined(p)?p:p.toLowerCase();(!sf.base.isNullOrUndefined(d.properties[h])&&isNaN(d.properties[h])?d.properties[h].toLowerCase():d.properties[h])===c&&l.push({layerIndex:e,shapeIndex:r,dataIndex:t,name:i[a],value:s})}return l},e.prototype.legendGradientColor=function(e,t){var i,a="http://www.w3.org/2000/svg";if(!sf.base.isNullOrUndefined(e.color)&&"object"===o()(e.color)){var n,s,l=document.createElementNS(a,"linearGradient"),r=this.maps.legendSettings.position;n="Top"===r||"Bottom"===r?"100":"0",s="Top"===r||"Bottom"===r?"0":"100",l.setAttribute("id","linear_"+t+"_"+this.maps.element.id),l.setAttribute("x1","0%"),l.setAttribute("y1","0%"),l.setAttribute("x2",n+"%"),l.setAttribute("y2",s+"%");for(var d=0;d<e.color.length;d++){var p=100/(e.color.length-1),h=document.createElementNS(a,"stop");h.setAttribute("offset",d*p+"%"),h.setAttribute("stop-color",e.color[d]),h.setAttribute("stop-opacity",1..toString()),l.appendChild(h)}this.legendLinearGradient=l;var c="url(#linear_"+t+"_"+this.maps.element.id+")";this.defsElement.appendChild(l),i=c}return i},e.prototype.getModuleName=function(){return"Legend"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),pi=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]])}return i},hi=function(){function e(e){this.maps=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on(sf.base.Browser.touchMoveEvent,this.mouseMove,this),this.maps.on(sf.base.Browser.touchStartEvent,this.mouseMove,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off(sf.base.Browser.touchMoveEvent,this.mouseMove),this.maps.off(sf.base.Browser.touchStartEvent,this.mouseMove))},e.prototype.addHighlight=function(e,t,i){var a=Le(e,t,0,this.maps);i?this.mapHighlight(a,null,null):Te(a)},e.prototype.mouseMove=function(e){var t,i=e.target,a="touch"===e.pointerType||"2"===e.pointerType||e.type.indexOf("touch")>-1;if((-1!==i.id.indexOf("LayerIndex")||i.id.indexOf("NavigationIndex")>-1)&&"ShapeselectionMapStyle"!==i.getAttribute("class")&&!a&&"MarkerselectionMapStyle"!==i.getAttribute("class")&&"BubbleselectionMapStyle"!==i.getAttribute("class")&&"navigationlineselectionMapStyle"!==i.getAttribute("class")){t=parseInt(i.id.split("_LayerIndex_")[1].split("_")[0],10);var o=void 0,n=void 0,s=void 0,l=void 0;if(i.id.indexOf("shapeIndex")>-1)s=parseInt(i.id.split("_shapeIndex_")[1].split("_")[0],10),o=this.maps.layers[t].shapeData.features?this.maps.layers[t].shapeData.features[s].properties:null,l=parseInt(i.id.split("_dataIndex_")[1].split("_")[0],10),n=sf.base.isNullOrUndefined(l)?null:this.maps.layers[t].dataSource[l],this.highlightSettings=this.maps.layers[t].highlightSettings;else if(i.id.indexOf("BubbleIndex")>-1){var r=parseInt(i.id.split("_BubbleIndex_")[1].split("_")[0],10);l=parseInt(i.id.split("_dataIndex_")[1].split("_")[0],10),n=this.maps.layers[t].bubbleSettings[r].dataSource[l],this.highlightSettings=this.maps.layers[t].bubbleSettings[r].highlightSettings}else if(i.id.indexOf("MarkerIndex")>-1){var d=parseInt(i.id.split("_MarkerIndex_")[1].split("_")[0],10);l=parseInt(i.id.split("_dataIndex_")[1].split("_")[0],10),n=this.maps.layers[t].markerSettings[d].dataSource[l],this.highlightSettings=this.maps.layers[t].markerSettings[d].highlightSettings}else{var p=parseInt(i.id.split("_NavigationIndex_")[1].split("_")[0],10);t=parseInt(i.id.split("_LayerIndex_")[1].split("_")[0],10),o=null,n={latitude:this.maps.layers[t].navigationLineSettings[p].latitude,longitude:this.maps.layers[t].navigationLineSettings[p].longitude},this.highlightSettings=this.maps.layers[t].navigationLineSettings[p].highlightSettings}if(this.highlightSettings.enable){this.maps.legendSettings.visible&&-1===i.id.indexOf("_MarkerIndex_")&&this.maps.legendModule.shapeHighLightAndSelection(i,n,this.highlightSettings,"highlight",t),(!(i.id.indexOf("shapeIndex")>-1&&this.maps.legendSettings.visible)||this.maps.legendModule.shapeToggled)&&this.mapHighlight(i,o,n)}else{var h=document.getElementsByClassName("highlightMapStyle")[0];if(!sf.base.isNullOrUndefined(h)&&(Te(h),h.id.indexOf("NavigationIndex")>-1)){p=parseInt(h.id.split("_NavigationIndex_")[1].split("_")[0],10);var c=parseInt(h.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);h.setAttribute("stroke-width",this.maps.layers[c].navigationLineSettings[p].width.toString()),h.setAttribute("stroke",this.maps.layers[c].navigationLineSettings[p].color)}}}else if(Me("highlightMapStyle").length>0){if((i=Me("highlightMapStyle")[0]).id.indexOf("NavigationIndex")>-1){p=parseInt(i.id.split("_NavigationIndex_")[1].split("_")[0],10);t=parseInt(i.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10),i.setAttribute("stroke-width",this.maps.layers[t].navigationLineSettings[p].width.toString()),i.setAttribute("stroke",this.maps.layers[t].navigationLineSettings[p].color)}Te(i),this.maps.legendSettings.visible&&this.maps.legendModule.removeShapeHighlightCollection()}else-1===i.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")&&-1===i.id.indexOf(this.maps.element.id+"_Legend_Index")||!this.maps.legendSettings.visible||-1!==i.id.indexOf("_Text")?this.maps.legendSettings.visible&&this.maps.legendModule.removeLegendHighlightCollection():this.maps.legendModule.legendHighLightAndSelection(i,"highlight")},e.prototype.mapHighlight=function(e,t,i){var a=this,o=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),n=!1;if(e.id.indexOf("MarkerIndex")>-1){var s=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10);n=this.maps.layers[o].markerSettings[s].highlightSettings.enable}var l={color:this.highlightSettings.border.color,width:this.highlightSettings.border.width/(n?1:this.maps.scale)},r={opacity:this.highlightSettings.opacity,fill:-1===e.id.indexOf("NavigationIndex")?sf.base.isNullOrUndefined(this.highlightSettings.fill)?e.getAttribute("fill"):this.highlightSettings.fill:"none",border:l,name:"itemHighlight",target:e.id,cancel:!1,shapeData:t,data:i,maps:this.maps};if(this.maps.isBlazor){r.shapeData,r.maps;var d=pi(r,["shapeData","maps"]);r=d}this.maps.trigger("itemHighlight",r,(function(){a.highlightMap(e,r)}))},e.prototype.highlightMap=function(e,t){if("highlightMapStyle"!==e.getAttribute("class")){if(Me("highlightMapStyle").length>0){var i=Me("highlightMapStyle")[0];if(Te(i),i.id.indexOf("NavigationIndex")>-1){var a=parseInt(i.id.split("_NavigationIndex_")[1].split("_")[0],10),o=parseInt(i.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);i.setAttribute("stroke-width",this.maps.layers[o].navigationLineSettings[a].width.toString()),i.setAttribute("stroke",this.maps.layers[o].navigationLineSettings[a].color)}}Se("highlightMap")?Pe("highlightMap","highlightMapStyle",t):document.body.appendChild(we("highlightMap","highlightMapStyle",t)),e.setAttribute("class","highlightMapStyle")}},e.prototype.getModuleName=function(){return"Highlight"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),ci=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]])}return i},mi=function(){function e(e){this.maps=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on("click",this.mouseClick,this),this.maps.on(sf.base.Browser.touchEndEvent,this.mouseClick,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off("click",this.mouseClick),this.maps.off(sf.base.Browser.touchEndEvent,this.mouseClick))},e.prototype.mouseClick=function(e){if(!sf.base.isNullOrUndefined(e.type)&&-1!==e.type.indexOf("touch")&&sf.base.isNullOrUndefined(e.id)&&(e=e.target),!sf.base.isNullOrUndefined(e.id)&&(e.id.indexOf("LayerIndex")>-1||e.id.indexOf("NavigationIndex")>-1)){var t,i=void 0,a=void 0,o=void 0,n=void 0;if(t=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),e.id.indexOf("shapeIndex")>-1)o=parseInt(e.id.split("_shapeIndex_")[1].split("_")[0],10),i=this.maps.layers[t].shapeData.features.length>o?this.maps.layers[t].shapeData.features[o].properties:null,n=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),a=sf.base.isNullOrUndefined(n)?null:this.maps.layers[t].dataSource[n],this.selectionsettings=this.maps.layers[t].selectionSettings,this.selectionType="Shape";else if(e.id.indexOf("BubbleIndex")>-1){var s=parseInt(e.id.split("_BubbleIndex_")[1].split("_")[0],10);n=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),a=this.maps.layers[t].bubbleSettings[s].dataSource[n],this.selectionsettings=this.maps.layers[t].bubbleSettings[s].selectionSettings,this.selectionType="Bubble"}else if(e.id.indexOf("MarkerIndex")>-1){var l=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10);n=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),a=this.maps.layers[t].markerSettings[l].dataSource[n],this.selectionsettings=this.maps.layers[t].markerSettings[l].selectionSettings,this.selectionType="Marker"}else{var r=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10);i=null,a={latitude:this.maps.layers[t].navigationLineSettings[r].latitude,longitude:this.maps.layers[t].navigationLineSettings[r].longitude},this.selectionsettings=this.maps.layers[t].navigationLineSettings[r].selectionSettings,this.selectionType="navigationline"}if(this.selectionsettings.enable)this.maps.mapSelect=!!e,this.maps.legendSettings.visible&&-1===e.id.indexOf("_MarkerIndex_")&&this.maps.legendModule.shapeHighLightAndSelection(e,a,this.selectionsettings,"selection",t),(!(e.id.indexOf("shapeIndex")>-1&&this.maps.legendSettings.visible)||this.maps.legendModule.shapeToggled)&&this.selectMap(e,i,a)}else this.maps.legendSettings.visible&&!this.maps.legendSettings.toggleLegendSettings.enable&&!sf.base.isNullOrUndefined(e.id)&&-1===e.id.indexOf("_Text")&&(e.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")>-1||-1!==e.id.indexOf(this.maps.element.id+"_Legend_Index"))&&this.maps.legendModule.legendHighLightAndSelection(e,"selection")},e.prototype.addSelection=function(e,t,i){var a=Le(e,t,0,this.maps);i?this.selectMap(a,null,null):Te(a)},e.prototype.selectMap=function(e,t,i){var a=this,o=(this.selectionsettings,{color:this.selectionsettings.border.color,width:this.selectionsettings.border.width/("Marker"===this.selectionType?1:this.maps.scale)}),n={opacity:this.selectionsettings.opacity,fill:"navigationline"!==this.selectionType?this.selectionsettings.fill:"none",border:o,name:Wt,target:e.id,cancel:!1,shapeData:t,data:i,maps:this.maps};if(this.maps.isBlazor){n.shapeData,n.maps;var s=ci(n,["shapeData","maps"]);n=s}this.maps.trigger("itemSelection",n,(function(t){if(!n.cancel)if(e.getAttribute("class")===a.selectionType+"selectionMapStyle"){Te(e),a.removedSelectionList(e);for(var i=0;i<a.maps.shapeSelectionItem.length;i++)if(a.maps.shapeSelectionItem[i]===n.shapeData){a.maps.shapeSelectionItem.splice(i,1);break}if(e.id.indexOf("NavigationIndex")>-1){var o=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10),s=parseInt(e.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);e.setAttribute("stroke-width",a.maps.layers[s].navigationLineSettings[o].width.toString()),e.setAttribute("stroke",a.maps.layers[s].navigationLineSettings[o].color)}}else{var l=ye(a.maps.element.id+"_Layer_Collections");if(!a.selectionsettings.enableMultiSelect&&l.getElementsByClassName(a.selectionType+"selectionMapStyle").length>0){var r=l.getElementsByClassName(a.selectionType+"selectionMapStyle")[0];if(Te(r),a.removedSelectionList(r),"Shape"===a.selectionType){a.maps.shapeSelectionItem=[];for(var d=a.maps.selectedElementId.length,p=0;p<d;p++){Te(r=l.getElementsByClassName(a.selectionType+"selectionMapStyle")[0]);var h=a.maps.selectedElementId.indexOf(r.getAttribute("id"));a.maps.selectedElementId.splice(h,1)}}if(r.id.indexOf("NavigationIndex")>-1){o=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10),s=parseInt(e.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);r.setAttribute("stroke-width",a.maps.layers[s].navigationLineSettings[o].width.toString()),r.setAttribute("stroke",a.maps.layers[s].navigationLineSettings[o].color)}}Se(a.selectionType+"selectionMap")?Pe(a.selectionType+"selectionMap",a.selectionType+"selectionMapStyle",n):document.body.appendChild(we(a.selectionType+"selectionMap",a.selectionType+"selectionMapStyle",n)),e.setAttribute("class",a.selectionType+"selectionMapStyle"),"ShapeselectionMapStyle"===e.getAttribute("class")&&(a.maps.shapeSelectionClass=Se(a.selectionType+"selectionMap"),a.maps.selectedElementId.push(e.getAttribute("id")),a.maps.shapeSelectionItem.push(n.shapeData)),"MarkerselectionMapStyle"===e.getAttribute("class")&&(a.maps.markerSelectionClass=Se(a.selectionType+"selectionMap"),a.maps.selectedMarkerElementId.push(e.getAttribute("id"))),"BubbleselectionMapStyle"===e.getAttribute("class")&&(a.maps.bubbleSelectionClass=Se(a.selectionType+"selectionMap"),a.maps.selectedBubbleElementId.push(e.getAttribute("id"))),"navigationlineselectionMapStyle"===e.getAttribute("class")&&(a.maps.navigationSelectionClass=Se(a.selectionType+"selectionMap"),a.maps.selectedNavigationElementId.push(e.getAttribute("id")))}}))},e.prototype.removedSelectionList=function(e){"Shape"===this.selectionType&&this.maps.selectedElementId.splice(this.maps.selectedElementId.indexOf(e.getAttribute("id")),1),"Bubble"===this.selectionType&&this.maps.selectedBubbleElementId.splice(this.maps.selectedBubbleElementId.indexOf(e.getAttribute("id")),1),"Marker"===this.selectionType&&this.maps.selectedMarkerElementId.splice(this.maps.selectedMarkerElementId.indexOf(e.getAttribute("id")),1),"navigationline"===this.selectionType&&this.maps.selectedBubbleElementId.splice(this.maps.selectedBubbleElementId.indexOf(e.getAttribute("id")),1)},e.prototype.getModuleName=function(){return"Selection"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),ui=function(){function e(e){this.maps=e,this.tooltipId=this.maps.element.id+"_mapsTooltip",this.addEventListener()}return e.prototype.renderTooltip=function(e){var t,i,a,n,s,l,r=this;-1!==e.type.indexOf("touch")?(this.isTouch=!0,t=(n=e).changedTouches[0].pageX,i=n.changedTouches[0].pageY,a=n.target):(this.isTouch="touch"===e.pointerType,t=e.pageX,i=e.pageY,a=e.target);var p,h,c="",m=a.id,u=[],g=m.indexOf("_LayerIndex_")>-1&&parseFloat(m.split("_LayerIndex_")[1].split("_")[0]),f=this.maps.layersCollection[g];if(h=d(t,i,this.maps.svgObject),this.tooltipTargetID=m,m.indexOf("_shapeIndex_")>-1||m.indexOf("_MarkerIndex_")>-1||m.indexOf("_BubbleIndex_")>-1){if(m.indexOf("_shapeIndex_")>-1){(l=f.tooltipSettings).textStyle.fontFamily=this.maps.themeStyle.fontFamily||l.textStyle.fontFamily,l.textStyle.opacity=this.maps.themeStyle.tooltipTextOpacity||l.textStyle.opacity;var b=parseInt(m.split("_shapeIndex_")[1].split("_")[0],10);if(sf.base.isNullOrUndefined(f.layerData)||sf.base.isNullOrUndefined(f.layerData[b]))return;var y=f.layerData[b].property,v=!1,x="[object Array]"===Object.prototype.toString.call(f.shapePropertyPath)?f.shapePropertyPath:[f.shapePropertyPath];if(!sf.base.isNullOrUndefined(x)){for(var S=0;S<x.length;S++)for(var O=0;O<f.dataSource.length;O++){var _=f.dataSource[O],M=f.shapeDataPath.indexOf(".")>-1?V(_,f.shapeDataPath):_[f.shapeDataPath];if((!sf.base.isNullOrUndefined(M)&&isNaN(_[f.shapeDataPath])?M.toLowerCase():M)===(!sf.base.isNullOrUndefined(y[x[S]])&&isNaN(y[x[S]])?y[x[S]].toLowerCase():y[x[S]])){v=!0,g=O,S=x.length;break}}g=v?g:null,u=f.dataSource[g]}if(l.visible&&(!sf.base.isNullOrUndefined(g)&&!isNaN(g)||!sf.base.isNullOrUndefined(y)))if(f.tooltipSettings.format)c=this.formatter(f.tooltipSettings.format,f.dataSource[g]);else{var C=se(f.shapeDataPath,f.shapePropertyPath,y);c=sf.base.isNullOrUndefined(f.dataSource)||sf.base.isNullOrUndefined(g)?y[C]:U(l.valuePath.indexOf(".")>-1?V(f.dataSource[g],l.valuePath):f.dataSource[g][l.valuePath],this.maps),sf.base.isNullOrUndefined(c)&&(c=l.valuePath.indexOf(".")>-1?V(y,l.valuePath):y[l.valuePath])}}else if(m.indexOf("_MarkerIndex_")>-1){var L=parseInt(m.split("_MarkerIndex_")[1].split("_")[0],10),w=parseInt(m.split("_MarkerIndex_")[1].split("_")[2],10),P=f.markerSettings[L];l=P.tooltipSettings,u=P.dataSource[w],l.visible&&!isNaN(L)&&(c=P.tooltipSettings.format?this.formatter(P.tooltipSettings.format,P.dataSource[w]):P.template&&!P.tooltipSettings.valuePath?P.template.split(">")[1].split("<")[0]:U(P.tooltipSettings.valuePath.indexOf(".")>-1?V(P.dataSource[w],P.tooltipSettings.valuePath):P.dataSource[w][P.tooltipSettings.valuePath],this.maps))}else if(m.indexOf("_BubbleIndex_")>-1){var I=parseInt(m.split("_BubbleIndex_")[1].split("_")[0],10),T=(w=parseInt(m.split("_BubbleIndex_")[1].split("_")[2],10),f.bubbleSettings[I]);l=T.tooltipSettings,u=T.dataSource[w],l.visible&&!isNaN(w)&&(c=T.tooltipSettings.format?this.formatter(T.tooltipSettings.format,T.dataSource[w]):U(T.tooltipSettings.valuePath.indexOf(".")>-1?V(T.dataSource[w],T.tooltipSettings.valuePath):T.dataSource[w][T.tooltipSettings.valuePath],this.maps))}document.getElementById(this.tooltipId)?p=document.getElementById(this.tooltipId):(p=sf.base.createElement("div",{id:this.maps.element.id+"_mapsTooltip",className:"EJ2-maps-Tooltip",styles:"position: absolute;pointer-events:none;"}),document.getElementById(this.maps.element.id+"_Secondary_Element").appendChild(p)),null!==l.template&&1===Object.keys("object"===o()(l.template)?l.template:{}).length&&(l.template=l.template[Object.keys(l.template)[0]]);var k={location:h,text:[],data:u=this.setTooltipContent(l,u),textStyle:l.textStyle,template:l.template};if(s={cancel:!1,name:"tooltipRender",options:k,fill:l.fill,maps:this.maps,element:a,eventArgs:e},this.maps.isBlazor){var N={location:h},E={name:"tooltipRender",cancel:!1,options:N,data:u,textStyle:s.options.textStyle,fill:s.fill,element:a,eventArgs:e};this.maps.trigger("tooltipRender",E,(function(e){E.cancel||!l.visible||sf.base.isNullOrUndefined(c)||-1!==m.indexOf("_cluster_")||-1!==m.indexOf("_dataLabel_")?r.removeTooltip():(m.indexOf("MarkerIndex")>0||m.indexOf("BubbleIndex"),r.maps.isProtectedOnChange=!0,r.svgTooltip=E.cancel?new sf.svgbase.Tooltip({enable:!0,header:"",content:[c.toString()],shapes:[],location:N.location,palette:[void 0],areaBounds:r.maps.mapAreaRect,textStyle:s.options.textStyle,availableSize:r.maps.availableSize,fill:s.fill}):new sf.svgbase.Tooltip({enable:!0,header:"",content:[c.toString()],shapes:[],location:N.location,palette:[void 0],areaBounds:r.maps.mapAreaRect,textStyle:E.textStyle,availableSize:r.maps.availableSize,fill:E.fill}),r.svgTooltip.opacity=r.maps.themeStyle.tooltipFillOpacity||r.svgTooltip.opacity,r.svgTooltip.appendTo(p))}))}else this.maps.trigger("tooltipRender",s,(function(e){s.cancel||!l.visible||sf.base.isNullOrUndefined(c)||-1!==m.indexOf("_cluster_")||-1!==m.indexOf("_dataLabel_")?r.removeTooltip():(r.maps.isProtectedOnChange=!0,s.options.textStyle.color=r.maps.themeStyle.tooltipFontColor||s.options.textStyle.color,s.cancel?r.svgTooltip=new sf.svgbase.Tooltip({enable:!0,header:"",data:l.data,template:l.template,content:[c.toString()],shapes:[],location:l.location,palette:[void 0],areaBounds:r.maps.mapAreaRect,textStyle:l.textStyle,availableSize:r.maps.availableSize,fill:l.fill||r.maps.themeStyle.tooltipFillColor}):r.svgTooltip=new sf.svgbase.Tooltip({enable:!0,header:"",data:s.options.data,template:s.options.template,content:[c.toString()],shapes:[],location:s.options.location,palette:[void 0],areaBounds:r.maps.mapAreaRect,textStyle:s.options.textStyle,availableSize:r.maps.availableSize,fill:s.fill||r.maps.themeStyle.tooltipFillColor}),r.svgTooltip.opacity=r.maps.themeStyle.tooltipFillOpacity||r.svgTooltip.opacity,r.svgTooltip.appendTo(p))}));this.svgTooltip&&this.maps.trigger("tooltipRenderComplete",{cancel:!1,name:"tooltipRenderComplete",maps:this.maps,options:k,element:this.svgTooltip.element}),this.svgTooltip?this.maps.trigger("tooltipRenderComplete",{cancel:!1,name:"tooltipRenderComplete",maps:this.maps,options:k,element:this.svgTooltip.element}):this.removeTooltip()}else this.removeTooltip()},e.prototype.setTooltipContent=function(e,t){var i=sf.base.extend({},t,null,!0);return this.maps.format&&!isNaN(Number(i[e.valuePath]))?i[e.valuePath]=ve(this.maps,Number(i[e.valuePath])):i=Object.keys(i).length?i:void 0,i},e.prototype.formatter=function(e,t){void 0===t&&(t={});for(var i=0,a=Object.keys(t);i<a.length;i++){var n=a[i];e="object"===o()(t[n])?Z("",e,t,this.maps):e.split("${"+n+"}").join(U(t[n],this.maps))}return e},e.prototype.mouseUpHandler=function(e){this.renderTooltip(e),"MouseMove"===this.maps.tooltipDisplayMode&&(clearTimeout(this.clearTimeout),this.clearTimeout=setTimeout(this.removeTooltip.bind(this),2e3))},e.prototype.removeTooltip=function(){document.getElementsByClassName("EJ2-maps-Tooltip").length>0&&sf.base.remove(document.getElementsByClassName("EJ2-maps-Tooltip")[0])},e.prototype.addEventListener=function(){this.maps.isDestroyed||("DoubleClick"===this.maps.tooltipDisplayMode?this.maps.on("dblclick",this.renderTooltip,this):"Click"===this.maps.tooltipDisplayMode?this.maps.on(sf.base.Browser.touchEndEvent,this.mouseUpHandler,this):this.maps.on(sf.base.Browser.touchMoveEvent,this.renderTooltip,this),this.maps.on(sf.base.Browser.touchCancelEvent,this.removeTooltip,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||("DoubleClick"===this.maps.tooltipDisplayMode?this.maps.off("dblclick",this.removeTooltip):"Click"===this.maps.tooltipDisplayMode?this.maps.off(sf.base.Browser.touchEndEvent,this.mouseUpHandler):this.maps.off(sf.base.Browser.touchMoveEvent,this.renderTooltip),this.maps.off(sf.base.Browser.touchCancelEvent,this.removeTooltip))},e.prototype.getModuleName=function(){return"MapsTooltip"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),gi=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]])}return i},fi=function(){function e(e){this.isPanning=!1,this.mouseEnter=!1,this.isTouch=!1,this.rectZoomingStart=!1,this.pinchRect=new j(0,0,0,0),this.browserName=sf.base.Browser.info.name,this.isPointer=sf.base.Browser.isPointer,this.handled=!1,this.pinchFactor=1,this.startTouches=[],this.shapeZoomLocation=[],this.intersect=[],this.mouseDownLatLong={x:0,y:0},this.mouseMoveLatLong={x:0,y:0},this.isSingleClick=!1,this.maps=e,this.wheelEvent="mozilla"===this.browserName?this.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel",this.cancelEvent=this.isPointer?"pointerleave":"mouseleave",this.selectionColor=this.maps.zoomSettings.selectionColor,this.fillColor=this.maps.zoomSettings.color,this.addEventListener(),this.groupElements=[]}return e.prototype.performZooming=function(e,t,i){var a=this,o=this.maps;o.previousProjection=o.projectionType,o.defaultState=!1,o.initialCheck=!1,o.markerZoomedState=!1,o.zoomPersistence=o.enablePersistence;var n=o.tileZoomLevel,s=o.previousScale=o.scale,l=o.zoomSettings.maxZoom,r=o.zoomSettings.minZoom;t=r>t&&"ZoomIn"===i?r+1:t;var d=o.tileTranslatePoint;if(!o.isTileMap&&("ZoomIn"===i?t>=r&&t<=l:t>=r)){var p=o.mapAreaRect,h=o.baseMapRectBounds.min,c=o.baseMapRectBounds.max,m=Math.abs(h.x-c.x),u=Math.abs(h.y-c.y),g=o.translatePoint,f=g.x-(p.width/s-p.width/t)/(p.width/e.x),b=g.y-(p.height/s-p.height/t)/(p.height/e.y),y=Math.abs(o.baseMapRectBounds.max.y-o.baseMapRectBounds.min.y)*t;f=y<o.mapAreaRect.height?p.x+(-h.x+(p.width/2-m/2)):f,b=y<o.mapAreaRect.height?p.y+(-h.y+(p.height/2-u/2)):b,o.translatePoint=new O(f,b),o.scale=t,this.triggerZoomEvent(d,n,i),this.applyTransform()}else if(o.isTileMap&&t>=r&&t<=l){this.getTileTranslatePosition(n,t,e,i),o.tileZoomLevel=t,o.scale=Math.pow(2,t-1),"ZoomOut"===i&&o.zoomSettings.resetToInitial&&o.applyZoomReset&&t<=o.initialZoomLevel&&(o.initialCheck=!0,o.zoomPersistence=!1,o.tileTranslatePoint.x=o.initialTileTranslate.x,o.tileTranslatePoint.y=o.initialTileTranslate.y,t=o.tileZoomLevel=o.mapScaleValue=o.initialZoomLevel,o.scale=Math.pow(2,t-1)),o.translatePoint.y=(o.tileTranslatePoint.y-.01*o.scale)/o.scale,o.translatePoint.x=(o.tileTranslatePoint.x-.01*o.scale)/o.scale,this.triggerZoomEvent(d,n,i),document.querySelector(".GroupElement")&&(document.querySelector(".GroupElement").style.display="none"),document.getElementById(this.maps.element.id+"_LayerIndex_1")&&(document.getElementById(this.maps.element.id+"_LayerIndex_1").style.display="none"),o.mapLayerPanel.generateTiles(t,o.tileTranslatePoint,i+"wheel",null,e);document.getElementById(this.maps.element.id+"_tiles");setTimeout((function(){a.applyTransform(),document.getElementById(a.maps.element.id+"_LayerIndex_1")&&(document.getElementById(a.maps.element.id+"_LayerIndex_1").style.display="block")}),250)}this.maps.zoomNotApplied=!1},e.prototype.triggerZoomEvent=function(e,t,i){var a,o=this.maps;a=o.isTileMap?{cancel:!1,name:"zoom",type:i,maps:o.isBlazor?null:o,tileTranslatePoint:{previous:e,current:o.tileTranslatePoint},translatePoint:{previous:o.previousPoint,current:o.translatePoint},tileZoomLevel:{previous:t,current:o.tileZoomLevel},scale:{previous:o.previousScale,current:o.scale}}:{cancel:!1,name:"zoom",type:i,maps:o.isBlazor?null:o,tileTranslatePoint:{},translatePoint:{previous:o.previousPoint,current:o.translatePoint},tileZoomLevel:{},scale:{previous:o.previousScale,current:o.scale}},o.trigger("zoom",a)},e.prototype.getTileTranslatePosition=function(e,t,i,a){var o=this.maps,n="ZoomOut"===a?10:"Reset"===a&&t>1?0:10,s=o.availableSize,l=256*Math.pow(2,e),r=256*Math.pow(2,t),d=(i.x-o.tileTranslatePoint.x)/l*100,p=(i.y-o.tileTranslatePoint.y)/l*100;o.tileTranslatePoint.x=1===t?s.width/2-256:i.x-d*r/100,o.tileTranslatePoint.y=1===t?s.height/2-256+2*n:i.y-p*r/100},e.prototype.performRectZooming=function(){this.isDragZoom=!0;var e=this.maps,t=e.availableSize;e.previousProjection=e.projectionType;var i=e.tileZoomLevel,a=e.tileTranslatePoint,o=this.zoomingRect,n=e.zoomSettings.maxZoom,s=e.zoomSettings.minZoom;if(o.height>0&&o.width>0){var l=this.zoomingRect.x+this.zoomingRect.width/2,r=this.zoomingRect.y+this.zoomingRect.height/2,d=void 0;if(e.isTileMap)d=(d=i+Math.round(i+(t.width/o.width+t.height/o.height)/2))>=s&&d<=n?d:n,this.getTileTranslatePosition(i,d,{x:l,y:r}),e.tileZoomLevel=d,e.translatePoint.x=(e.tileTranslatePoint.x-.5*Math.pow(2,d))/Math.pow(2,d),e.translatePoint.y=(e.tileTranslatePoint.y-.5*Math.pow(2,d))/Math.pow(2,d),e.scale=Math.pow(2,d),this.triggerZoomEvent(a,i,""),e.mapLayerPanel.generateTiles(d,e.tileTranslatePoint);else{var p=e.previousScale=e.scale;d=p+Math.round((t.width/o.width+t.height/o.height)/2);var h=e.previousPoint=e.translatePoint,c=h.x-(t.width/p-t.width/d)/(t.width/l),m=h.y-(t.height/p-t.height/d)/(t.height/r);e.translatePoint=new O(c,m),e.scale=d,this.triggerZoomEvent(a,i,"")}e.mapScaleValue=d,this.applyTransform(!0),this.maps.zoomNotApplied=!1,this.zoomingRect=null}},e.prototype.setInteraction=function(e){this.lastScale=1,this.interaction=e},e.prototype.updateInteraction=function(){2===this.fingers?this.setInteraction("zoom"):this.setInteraction(null)},e.prototype.performPinchZooming=function(e){var t=this.maps,i=t.tileZoomLevel,a=t.mapAreaRect;t.previousScale=t.scale,t.previousPoint=t.translatePoint;var o=t.tileTranslatePoint,n=De(this.touchStartList,this.touchMoveList),s=Ge(Ve(this.touchMoveList,this.maps)),l=n/this.lastScale;this.lastScale=n,this.pinchFactor*=l,this.pinchFactor=Math.min(this.maps.zoomSettings.maxZoom,Math.max(this.pinchFactor,this.maps.zoomSettings.minZoom));var r=this.pinchFactor;if(t.isTileMap){var d=r;this.getTileTranslatePosition(i,d,{x:s.x,y:s.y}),t.tileZoomLevel=d,t.translatePoint.x=(t.tileTranslatePoint.x-.5*Math.pow(2,d))/Math.pow(2,d),t.translatePoint.y=(t.tileTranslatePoint.y-.5*Math.pow(2,d))/Math.pow(2,d),t.scale=Math.pow(2,d),this.triggerZoomEvent(o,i,""),t.mapLayerPanel.generateTiles(d,t.tileTranslatePoint)}else{var p=t.baseMapRectBounds.min,h=t.baseMapRectBounds.max,c=Math.abs(p.x-h.x),m=Math.abs(p.y-h.y),u=t.translatePoint,g=Math.abs(t.baseMapRectBounds.max.y-t.baseMapRectBounds.min.y)*r,f=u.x-(a.width/t.scale-a.width/r)/(a.width/s.x),b=u.y-(a.height/t.scale-a.height/r)/(a.height/s.y);f=g<t.mapAreaRect.height?a.x+(-p.x+(a.width/2-c/2)):f,b=g<t.mapAreaRect.height?a.y+(-p.y+(a.height/2-m/2)):b,t.translatePoint=new O(f,b),t.scale=r,this.triggerZoomEvent(o,i,"")}this.applyTransform()},e.prototype.drawZoomRectangle=function(){var e,t,i,a,o=this.maps,n=this.mouseDownPoints,s=this.mouseMovePoints;i=Math.abs(s.x-n.x),a=Math.abs(s.y-n.y),e=s.x>n.x?n.x:n.x-i,t=s.y>n.y?n.y:n.y-a;ye(o.element.id).getBoundingClientRect();if(e>o.mapAreaRect.x&&e<o.mapAreaRect.x+o.mapAreaRect.width&&t>o.mapAreaRect.y&&t<o.mapAreaRect.y+o.mapAreaRect.height){this.zoomingRect=new j(e,t,i,a);var l=o.renderer.createSvg({id:o.element.id+"_Selection_Rect_Zooming",width:o.availableSize.width,height:o.availableSize.height}),r=new I(o.element.id+"_ZoomRect","#d3d3d3",{width:1,color:"#009900"},.5,this.zoomingRect,0,0,"","3");l.appendChild(o.renderer.drawRectangle(r)),ye(o.element.id+"_Secondary_Element").appendChild(l)}},e.prototype.animateTransform=function(e,t,i,a,o){var n=this.currentLayer.animationDuration;t&&0!==n?qe(e,0,n,new A(i,a),o,this.maps.mapAreaRect,this.maps):e.setAttribute("transform","scale("+o+") translate( "+i+" "+a+" )")},e.prototype.applyTransform=function(e){var t;this.templateCount=0;var i=this.maps.scale,a=this.maps.translatePoint.x,o=this.maps.translatePoint.y;if(this.maps.zoomShapeCollection=[],document.getElementById(this.maps.element.id+"_mapsTooltip")&&me(this.maps.element.id+"_mapsTooltip"),this.layerCollectionEle){for(var n=0;n<this.layerCollectionEle.childElementCount;n++){var s=this.layerCollectionEle.childNodes[n];if("g"===s.tagName){this.templateCount++,this.index=s.id.indexOf("_LayerIndex_")>-1&&parseFloat(s.id.split("_LayerIndex_")[1].split("_")[0]),this.currentLayer=this.maps.layersCollection[this.index];for(var l=this.maps.mapLayerPanel.calculateFactor(this.currentLayer),r=0;r<s.childElementCount;r++){var d=s.childNodes[r];if(d.id.indexOf("_Markers_Group")>-1||d.id.indexOf("_bubble_Group")>-1||d.id.indexOf("_dataLableIndex_Group")>-1){if(d.id.indexOf("_Markers_Group")>-1){if(this.isPanning||this.markerTranslates(d.childNodes[0],l,a,o,i,"Marker",s,e),d=s.childNodes[r],!sf.base.isNullOrUndefined(d)){for(var p=0;p<d.childElementCount;p++)this.markerTranslate(d.childNodes[p],l,a,o,i,"Marker",e),!this.maps.isTileMap&&this.currentLayer.animationDuration>0&&("visibility:hidden",d.setAttribute("style","visibility:hidden"));if(this.isPanning&&this.maps.markerModule.sameMarkerData.length>0?Y(this.maps.markerModule.sameMarkerData,this.maps,d,!0):this.maps.markerModule.sameMarkerData.length>0&&(this.maps.markerModule.sameMarkerData=[],document.getElementById(this.maps.element.id+"_mapsTooltip")&&me(this.maps.element.id+"_mapsTooltip")),document.getElementById(this.maps.element.id+"_mapsTooltip")&&this.maps.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")&&!this.isPanning){var h=this.maps.mapsTooltipModule,c=d.querySelector("#"+h.tooltipTargetID);if(!sf.base.isNullOrUndefined(c))if("hidden"===c.style.visibility)me(this.maps.element.id+"_mapsTooltip");else{var m=parseFloat(c.getAttribute("transform").split("(")[1].split(")")[0].split(" ")[1]),u=parseFloat(c.getAttribute("transform").split("(")[1].split(")")[0].split(" ")[2]);this.maps.isTileMap&&(m+=+Se(this.maps.element.id+"_tile_parent").style.left.split("px")[0],u+=+Se(this.maps.element.id+"_tile_parent").style.top.split("px")[0]),h.svgTooltip.location.x=m,h.svgTooltip.location.y=u,h.svgTooltip.enableAnimation=!1}}}}else if(d.id.indexOf("_bubble_Group")>-1){var g=void 0;for(p=0;p<d.childElementCount;p++){(g=d.childNodes[p]).getAttribute("transform");t=parseFloat(g.id.split("_LayerIndex_")[1].split("_")[0]);for(var f=parseFloat(g.id.split("_BubbleIndex_")[1].split("_")[0]),b=parseFloat(g.id.split("_BubbleIndex_")[1].split("_")[2]),y=0;y<this.maps.bubbleModule.bubbleCollection.length;y++){var v=this.maps.bubbleModule.bubbleCollection[y];if(v.LayerIndex===t&&v.BubbleIndex===f&&v.DataIndex===b){var x=(v.center.x+a)*i,S=(v.center.y+o)*i,O=this.currentLayer.animationDuration;e&&0!==O?tt(g,0,O,new A(x,S)):g.setAttribute("transform","translate( "+x+" "+S+" )");break}}}}else if(d.id.indexOf("_dataLableIndex_Group")>-1){this.intersect=[],this.maps.zoomLabelPositions=[],this.maps.zoomLabelPositions=this.maps.dataLabelModule.dataLabelCollections;for(p=0;p<d.childElementCount;p++)if(d.childNodes[p].id.indexOf("_LabelIndex_")>-1){var _=parseFloat(d.childNodes[p].id.split("_LabelIndex_")[1].split("_")[0]);this.zoomshapewidth=this.shapeZoomLocation[_].getBoundingClientRect(),this.maps.zoomShapeCollection.push(this.zoomshapewidth),this.dataLabelTranslate(d.childNodes[p],l,a,o,i,"DataLabel",e);var M=this.maps.layers[this.index].dataLabelSettings.border;if(p>0&&M.width>1&&d.childNodes[p-1].id.indexOf("_rectIndex_")>-1){var L=(this.maps.zoomLabelPositions[_].location.x+a)*i,w=(this.maps.zoomLabelPositions[_].location.y+o)*i,P=C(d.childNodes[p].innerHTML,this.maps.layers[this.index].dataLabelSettings.textStyle),I=d.childNodes[p-1],T=L-P.width/2,k=w-P.height/2-5;I.setAttribute("x",T),I.setAttribute("y",k)}}}}else this.maps.isTileMap&&d.id.indexOf("_line_Group")>-1?(d.remove(),s.children.length>0&&s.children[0]?s.insertBefore(this.maps.navigationLineModule.renderNavigation(this.currentLayer,this.maps.tileZoomLevel,this.index),s.children[0]):s.appendChild(this.maps.navigationLineModule.renderNavigation(this.currentLayer,this.maps.tileZoomLevel,this.index))):(Re(d,this.index,i,this.maps),this.maps.zoomTranslatePoint=this.maps.translatePoint,this.animateTransform(d,e,a,o,i),this.shapeZoomLocation=d.childNodes)}}this.maps.arrangeTemplate();this.maps.isBlazor&&this.maps.blazorTemplates()}sf.base.isNullOrUndefined(this.currentLayer)||e&&0!==this.currentLayer.animationDuration||this.processTemplate(a,o,i,this.maps)}},e.prototype.markerTranslates=function(e,t,i,a,o,n,s,l){var r,d=this;void 0===l&&(l=!1);var p=0,h=0,u=0,g=parseInt((e||s).id.split("_LayerIndex_")[1].split("_")[0],10);r=this.maps.renderer.createGroup({id:this.maps.element.id+"_Markers_Group",class:"GroupElement",style:"pointer-events: auto;"}),document.getElementById(r.id)&&me(r.id);var f=this.maps.mapAreaRect,b=sf.base.createElement("div",{id:this.maps.element.id+"_LayerIndex_"+g+"_Markers_Template_Group",className:"template",styles:"overflow: hidden; position: absolute;pointer-events: none;top:"+f.y+"px;left:"+f.x+"px;height:"+f.height+"px;width:"+f.width+"px;"});document.getElementById(b.id)&&me(b.id);var y=this.maps.layersCollection[g];y.markerSettings.map((function(e,l){var f=e.dataSource;Array.prototype.forEach.call(f,(function(v,x){d.maps.markerNullCount=l>=0&&0===x?0:d.maps.markerNullCount;var S={template:e.template,data:v,maps:d.maps,marker:e,cancel:!1,name:Rt,fill:e.fill,colorValuePath:e.colorValuePath,shapeValuePath:e.shapeValuePath,height:e.height,width:e.width,imageUrl:e.imageUrl,shape:e.shape,border:e.border};if(S=G(S=W(S,v),v),d.maps.isBlazor){S.maps,S.marker;var O=gi(S,["maps","marker"]);S=O}d.maps.trigger("markerRendering",S,(function(O){e.shapeValuePath!==S.shapeValuePath&&(S=W(S,v)),e.colorValuePath!==S.colorValuePath&&(S=G(S,v));var _=sf.base.isNullOrUndefined(e.latitudeValuePath)?parseFloat(v.latitude):Number(V(v,e.latitudeValuePath)),M=sf.base.isNullOrUndefined(e.longitudeValuePath)?parseFloat(v.longitude):Number(V(v,e.longitudeValuePath));if(d.maps.isBlazor){for(var C={},L=0,w=[],P=0;P<Object.keys(v).length;P++)"text"!==Object.keys(v)[P].toLowerCase()&&"latitude"!==Object.keys(v)[P].toLowerCase()&&"blazortemplateid"!==Object.keys(v)[P].toLowerCase()&&"longitude"!==Object.keys(v)[P].toLowerCase()&&"name"!==Object.keys(v)[P].toLowerCase()&&(C.text=w,w[L]=v[Object.keys(v)[P].toLowerCase()],L++);v.text=C.text,(v=={}||sf.base.isNullOrUndefined(v.latitude)||sf.base.isNullOrUndefined(v.longitude))&&(_=v.latitude&&!sf.base.isNullOrUndefined(v.latitude)?v.latitude:0,M=v.longitude&&!sf.base.isNullOrUndefined(v.longitude)?v.longitude:0)}var I=e.offset;if(!S.cancel&&e.visible&&!sf.base.isNullOrUndefined(M)&&!sf.base.isNullOrUndefined(_)){var T=d.maps.element.id+"_LayerIndex_"+g+"_MarkerIndex_"+l+"_dataIndex_"+x,k=d.maps.isTileMap?m(new A(M,_),d.maps.tileZoomLevel,d.maps.tileTranslatePoint,!0):c(_,M,t,y,d.maps),N=(0!==y.animationDuration||sf.base.isNullOrUndefined(d.maps.zoomModule),{x:i,y:a});!S.template||isNaN(k.x)||isNaN(k.y)?S.template||isNaN(k.x)||isNaN(k.y)||(h++,J(S,e,f,x,k,N,T,I,o,d.maps,r)):(u++,K(S,void 0,T,v,l,b,k,o,I,d.maps))}p+=isNaN(_)||isNaN(M)?1:0,u+=S.cancel?1:0,h+=S.cancel?1:0,d.maps.markerNullCount=sf.base.isNullOrUndefined(_)&&sf.base.isNullOrUndefined(M)?d.maps.markerNullCount+1:d.maps.markerNullCount;f.length,d.maps.markerNullCount;r.childElementCount===f.length-u-p&&"Template"!==n&&(s.appendChild(r),y.markerClusterSettings.allowClustering&&(d.maps.svgObject.appendChild(r),d.maps.element.appendChild(d.maps.svgObject),q(y,r,d.maps,g,r,s,!0,!0))),b.childElementCount===f.length-h-p&&ye(d.maps.element.id+"_Secondary_Element")&&(ye(d.maps.element.id+"_Secondary_Element").appendChild(b),y.markerClusterSettings.allowClustering&&q(y,b,d.maps,g,r,s,!1,!0))}))}))}))},e.prototype.processTemplate=function(e,t,i,a){for(var o=0;o<this.templateCount;o++){this.currentLayer=a.layersCollection[o];var n=a.mapLayerPanel.calculateFactor(this.currentLayer),s=ye(a.element.id+"_LayerIndex_"+o+"_Markers_Template_Group"),l=ye(a.element.id+"_LayerIndex_"+o+"_Label_Template_Group");if(!sf.base.isNullOrUndefined(s)&&s.childElementCount>0)for(var r=0;r<s.childElementCount;r++)this.markerTranslate(s.childNodes[r],n,e,t,i,"Template");if(!sf.base.isNullOrUndefined(l)&&l.childElementCount>0)for(r=0;r<l.childElementCount;r++)this.dataLabelTranslate(l.childNodes[r],n,e,t,i,"Template")}},e.prototype.dataLabelTranslate=function(e,t,i,a,o,n,s){void 0===s&&(s=!1);var l,r,d,p,h,c=this.maps.dataLabelModule.dataLabelCollections,m=(e.getBoundingClientRect(),this.maps.layers[this.index].dataLabelSettings.textStyle),u=(this.maps.layers[this.index].dataLabelSettings.labelPath,parseFloat(e.id.split("_LayerIndex_")[1].split("_")[0])),g=parseFloat(e.id.split("_shapeIndex_")[1].split("_")[0]);e.id.indexOf("_LabelIndex_")>-1&&(h=parseFloat(e.id.split("_LabelIndex_")[1].split("_")[0]));for(var f=this.currentLayer.animationDuration,b=0;b<c.length;b++){var y=c[b];if(y.layerIndex===u&&y.shapeIndex===g&&y.labelIndex===h){var v=y.location.x,x=y.location.y;if("Template"===n){var S=ye(this.maps.element.id+"_Layer_Collections");v=Math.abs(this.maps.baseMapRectBounds.min.x-v)*o,x=Math.abs(this.maps.baseMapRectBounds.min.y-x)*o;var O=e.getBoundingClientRect(),_=S.getBoundingClientRect(),M=e.parentElement.getBoundingClientRect(),L=v+(_.left-M.left)-O.width/2,w=x+(_.top-M.top)-O.height/2;e.style.left=L+"px",e.style.top=w+"px"}else{v=(v+i)*o;var P=(x=(x+a)*o)-(p=C(d=y.dataLabelText,m)).height/4,I=x+p.height/4,T={rightWidth:v+p.width/2,leftWidth:v-p.width/2,heightTop:P,heightBottom:I};if(s&&0!==f||e.setAttribute("transform","translate( "+v+" "+x+" )"),"Hide"===this.maps.layers[this.index].dataLabelSettings.smartLabelMode&&(o>1?(l=this.zoomshapewidth.width>=p.width?d:"",e.innerHTML=l):(l=this.maps.dataLabelShape[b]>=p.width?d:"",e.innerHTML=l)),"Trim"===this.maps.layers[this.index].dataLabelSettings.smartLabelMode&&(o>1?(l=he(this.zoomshapewidth.width,d,m),e.innerHTML=l):(l=he(this.maps.dataLabelShape[b],d,m),e.innerHTML=l)),"Hide"===this.maps.layers[this.index].dataLabelSettings.intersectionAction){for(var k=0;k<this.intersect.length;k++)if(!sf.base.isNullOrUndefined(this.intersect[k])){if(!(T.leftWidth>this.intersect[k].rightWidth||T.rightWidth<this.intersect[k].leftWidth||T.heightTop>this.intersect[k].heightBottom||T.heightBottom<this.intersect[k].heightTop)){l="",e.innerHTML=l;break}l=sf.base.isNullOrUndefined(l)?d:l,e.innerHTML=l}this.intersect.push(T)}if("Trim"===this.maps.layers[this.index].dataLabelSettings.intersectionAction){for(var N=0;N<this.intersect.length;N++)if(!sf.base.isNullOrUndefined(this.intersect[N]))if(T.rightWidth<this.intersect[N].leftWidth||T.leftWidth>this.intersect[N].rightWidth||T.heightBottom<this.intersect[N].heightTop||T.heightTop>this.intersect[N].heightBottom)r=sf.base.isNullOrUndefined(l)?d:l,o>1&&(r=he(this.zoomshapewidth.width,r,m)),e.innerHTML=r;else{if(T.leftWidth>this.intersect[N].leftWidth){r=he((E=this.intersect[N].rightWidth-T.leftWidth)-(T.rightWidth-T.leftWidth),l=sf.base.isNullOrUndefined(l)?d:l,m),e.innerHTML=r;break}if(T.leftWidth<this.intersect[N].leftWidth){var E=T.rightWidth-this.intersect[N].leftWidth;r=he(Math.abs(E-(T.rightWidth-T.leftWidth)),l=sf.base.isNullOrUndefined(l)?d:l,m),e.innerHTML=r;break}}this.intersect.push(T),sf.base.isNullOrUndefined(r)&&(r=he(this.zoomshapewidth.width,d,m),e.innerHTML=r)}else tt(e,0,f,new A(v,x))}}}},e.prototype.markerTranslate=function(e,t,i,a,o,n,s){void 0===s&&(s=!1);var l=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),r=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10),d=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),p=this.maps.layersCollection[l],h=p.markerSettings[r];if(!sf.base.isNullOrUndefined(h)&&!sf.base.isNullOrUndefined(h.dataSource)&&!sf.base.isNullOrUndefined(h.dataSource[d])){var u=sf.base.isNullOrUndefined(h.longitudeValuePath)?parseFloat(h.dataSource[d].longitude):Number(V(h.dataSource[d],h.longitudeValuePath)),g=sf.base.isNullOrUndefined(h.latitudeValuePath)?parseFloat(h.dataSource[d].latitude):Number(V(h.dataSource[d],h.latitudeValuePath));if(this.maps.isBlazor){var f={},b=0,y=[];(sf.base.isNullOrUndefined(h.dataSource[d].latitude)||sf.base.isNullOrUndefined(h.dataSource[d].longitude))&&(g=h.dataSource[d].latitude&&!sf.base.isNullOrUndefined(h.dataSource[d].latitude)?h.dataSource[d].latitude:0,u=h.dataSource[d].longitude&&!sf.base.isNullOrUndefined(h.dataSource[d].longitude)?h.dataSource[d].longitude:0);for(var v=0;v<Object.keys(h.dataSource[d]).length;v++)"text"!==Object.keys(h.dataSource[d])[v].toLowerCase()&&"longitude"!==Object.keys(h.dataSource[d])[v].toLowerCase()&&"latitude"!==Object.keys(h.dataSource[d])[v].toLowerCase()&&"blazortemplateid"!==Object.keys(h.dataSource[d])[v].toLowerCase()&&"name"!==Object.keys(h.dataSource[d])[v].toLowerCase()&&(f.text=y,y[b]=h.dataSource[d][Object.keys(h.dataSource[d])[v].toLowerCase()],b++);h.dataSource[d].text=f.text}var x=this.currentLayer.animationDuration,S=this.maps.isTileMap?m(new O(u,g),this.maps.tileZoomLevel,this.maps.tileTranslatePoint,!0):c(g,u,t,p,this.maps);if(this.maps.isTileMap)if("Template"===n){var _=e.getBoundingClientRect();if(e.style.left=S.x-_.width/2+h.offset.x+"px",e.style.top=S.y-_.height/2+h.offset.y+"px","GoogleStaticMap"===this.maps.layers[this.maps.baseLayerIndex].layerType){var M=ye(this.maps.element.id+"_StaticGoogleMap").getBoundingClientRect();"none"!==e.style.display&&((M.x>_.x||M.x+640<_.x+_.width)&&(M.y>_.y||M.y+M.height<_.y+_.height)||M.x>_.x||M.x+640<_.x+_.width)&&(e.style.display="none")}}else S.x+=h.offset.x,S.y+=h.offset.y,e.setAttribute("transform","translate( "+S.x+" "+S.y+" )");else if("Template"===n){S.x=Math.abs(this.maps.baseMapRectBounds.min.x-S.x)*o,S.y=Math.abs(this.maps.baseMapRectBounds.min.y-S.y)*o;var C=ye(this.maps.element.id+"_Layer_Collections").getBoundingClientRect(),L=e.parentElement.getBoundingClientRect();e.style.left=S.x+(C.left-L.left)+h.offset.x+"px",e.style.top=S.y+(C.top-L.top)+h.offset.y+"px",e.style.transform="translate(-50%, -50%)"}else S.x=(S.x+i)*o+h.offset.x,S.y=(S.y+a)*o+h.offset.y,s&&0!==x?tt(e,0,x,S):e.setAttribute("transform","translate( "+S.x+" "+S.y+" )")}},e.prototype.panning=function(e,t,i,a){var o,n=this.maps,s=this.mouseDownPoints,l=this.mouseMovePoints,r=n.scale;n.markerZoomedState=!1,n.zoomPersistence=n.enablePersistence,n.defaultState=!1,n.initialCheck=!1;var d,p,h=n.translatePoint,c=n.tileTranslatePoint;if(t=sf.base.isNullOrUndefined(t)?s.x-l.x:t,i=sf.base.isNullOrUndefined(i)?s.y-l.y:i,n.isTileMap){if(this.maps.tileZoomLevel>1){d=n.tileTranslatePoint.x-t,p=n.tileTranslatePoint.y-i,this.distanceX=d-n.tileTranslatePoint.x,this.distanceY=p-n.tileTranslatePoint.y,n.tileTranslatePoint.x=d,n.tileTranslatePoint.y=p,(n.tileTranslatePoint.y>-10&&i<0||n.tileTranslatePoint.y<-256*(Math.pow(2,this.maps.tileZoomLevel)-2)&&i>0)&&(n.tileTranslatePoint.x=d+t,n.tileTranslatePoint.y=p+i),n.translatePoint.x=(n.tileTranslatePoint.x-t)/n.scale,n.translatePoint.y=(n.tileTranslatePoint.y-i)/n.scale;var m=this.maps.getTileGeoLocation(a);o={cancel:!1,name:"pan",maps:n.isBlazor?null:n,tileTranslatePoint:{previous:c,current:n.tileTranslatePoint},translatePoint:{previous:h,current:n.translatePoint},scale:n.scale,tileZoomLevel:n.tileZoomLevel,latitude:m.latitude,longitude:m.longitude},n.trigger("pan",o),n.mapLayerPanel.generateTiles(n.tileZoomLevel,n.tileTranslatePoint,"Pan"),this.applyTransform()}}else{d=h.x-t/r,p=h.y-i/r;var u=ye(n.element.id+"_Layer_Collections").getBoundingClientRect(),g=ye(n.element.id+"_svg").getBoundingClientRect(),f=t<0?u.left<=g.left+n.mapAreaRect.x:u.left+u.width>=g.left+g.width+n.mapAreaRect.x+n.margin.left,b=i<0?u.top<=g.top+n.mapAreaRect.y:u.top+u.height+n.margin.top>=g.top+g.height,y=this.maps.getGeoLocation(this.maps.layersCollection.length-1,a);o={cancel:!1,name:"pan",maps:n.isBlazor?null:n,tileTranslatePoint:{},translatePoint:{previous:h,current:new O(d,p)},scale:n.scale,tileZoomLevel:n.tileZoomLevel,latitude:y.latitude,longitude:y.longitude},n.trigger("pan",o),o.cancel||(f&&b?(n.translatePoint=new O(d,p),this.applyTransform()):f?(n.translatePoint=new O(d,n.translatePoint.y),this.applyTransform()):b&&(n.translatePoint=new O(n.translatePoint.x,p),this.applyTransform())),this.maps.zoomNotApplied=!1}n.zoomTranslatePoint=n.translatePoint,this.mouseDownPoints=this.mouseMovePoints,this.maps.zoomNotApplied=!1,this.isSingleClick=!1},e.prototype.toAlignSublayer=function(){this.maps.translatePoint.x=sf.base.isNullOrUndefined(this.distanceX)?this.maps.translatePoint.x:this.maps.translatePoint.x-this.distanceX/this.maps.scale,this.maps.translatePoint.y=sf.base.isNullOrUndefined(this.distanceY)?this.maps.translatePoint.y:this.maps.translatePoint.y-this.distanceY/this.maps.scale,this.applyTransform(!1)},e.prototype.toolBarZooming=function(e,t){var i=this,a=this.maps;a.initialCheck=!1,a.defaultState="Reset"===t&&1===e&&!(a.zoomSettings.resetToInitial&&a.applyZoomReset)||"ZoomOut"===t&&1===e;var o=a.tileZoomLevel,n=a.previousScale=a.scale;a.markerZoomedState=!1,a.zoomPersistence=a.enablePersistence,a.mapScaleValue=e;var s=a.zoomSettings.maxZoom,l=a.zoomSettings.minZoom,r=a.mapAreaRect,d=a.previousPoint=a.translatePoint,p=a.tileTranslatePoint;if(a.previousProjection=a.projectionType,e="ZoomOut"===t&&1===Math.round(e)?1:e,e=l>(e="Reset"===t||0===Math.round(e)?1:e)&&"ZoomIn"===t?l+1:e,!a.isTileMap&&("ZoomIn"===t?e>=l&&e<=s:e>=l)){var h=a.baseMapRectBounds.min,c=a.baseMapRectBounds.max,m=Math.abs(c.x-h.x),u=Math.abs(h.y-c.y),g=d.x-(r.width/n-r.width/e)/2,f=d.y-(r.height/n-r.height/e)/2,b=Math.abs(a.baseMapRectBounds.max.y-a.baseMapRectBounds.min.y)*e;g=b<a.mapAreaRect.height?r.x+(-h.x+(r.width/2-m/2)):g,f=b<a.mapAreaRect.height?r.y+(-h.y+(r.height/2-u/2)):f,a.translatePoint=new O(g,f),a.zoomTranslatePoint=a.translatePoint,a.scale=e,this.triggerZoomEvent(p,o,t),this.applyTransform(!0)}else if(a.isTileMap&&e>=l&&e<=s){var y=e;a.scale=Math.pow(2,y-1),a.tileZoomLevel=y;var v={x:a.availableSize.width/2,y:a.availableSize.height/2};this.getTileTranslatePosition(o,y,v,t),(a.zoomSettings.resetToInitial&&a.applyZoomReset&&"Reset"===t||"ZoomOut"===t&&a.zoomSettings.resetToInitial&&a.applyZoomReset&&y<=a.initialZoomLevel)&&(a.initialCheck=!0,a.zoomPersistence=!1,a.tileTranslatePoint.x=a.initialTileTranslate.x,a.tileTranslatePoint.y=a.initialTileTranslate.y,y=a.tileZoomLevel=a.mapScaleValue=a.initialZoomLevel),this.triggerZoomEvent(p,o,t),a.translatePoint.y=(a.tileTranslatePoint.y-.01*a.scale)/a.scale,a.translatePoint.x=(a.tileTranslatePoint.x-.01*a.scale)/a.scale,document.getElementById(this.maps.element.id+"_LayerIndex_1")&&(document.getElementById(this.maps.element.id+"_LayerIndex_1").style.display="none"),document.querySelector(".GroupElement")&&(document.querySelector(".GroupElement").style.display="none"),a.mapLayerPanel.generateTiles(y,a.tileTranslatePoint,t);document.getElementById(this.maps.element.id+"_tiles");setTimeout((function(){i.applyTransform(!0),document.getElementById(i.maps.element.id+"_LayerIndex_1")&&(document.getElementById(i.maps.element.id+"_LayerIndex_1").style.display="block")}),250)}this.maps.zoomNotApplied=!1},e.prototype.createZoomingToolbars=function(){var e=this.maps;this.toolBarGroup=e.renderer.createGroup({id:e.element.id+"_Zooming_KitCollection",opacity:.3});var t=15,i=15,a=e.zoomSettings.toolBarOrientation,o=e.zoomSettings.toolbars;var n=e.zoomSettings.toolbars.length,s="Horizontal"===e.zoomSettings.toolBarOrientation?16*n+20*n:32,l="Horizontal"===e.zoomSettings.toolBarOrientation?32:16*n+20*n;this.toolBarGroup.appendChild(e.renderer.drawRectangle(new I(e.element.id+"_Zooming_Rect","transparent",{color:"transparent",width:1},1,new j(0,0,s,l),0,0)));var r=e.renderer.createDefs();r.innerHTML='<filter id="chart_shadow" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="5"/><feOffset dx="-3" dy="4" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="1"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>',this.toolBarGroup.appendChild(r);var d=e.renderer.drawRectangle(new I(e.element.id+"_Zooming_Rect","transparent",{color:"transparent",width:1},.1,new j(0,0,s,l),0,0));d.setAttribute("filter","url(#chart_shadow)"),this.toolBarGroup.appendChild(d);for(var p=0;p<o.length;p++){var h=o[p];this.currentToolbarEle=e.renderer.createGroup({id:e.element.id+"_Zooming_ToolBar_"+h+"_Group",transform:"translate( "+t+" "+i+" ) "}),this.currentToolbarEle.setAttribute("class","e-maps-toolbar");var c="transparent",m="";switch(h.toLowerCase()){case"zoom":var u=void 0,g=void 0;m="M0.001,14.629L1.372,16l4.571-4.571v-0.685l0.228-0.274c1.051,0.868,2.423,1.417,3.885,1.417c3.291,0,",m+="5.943-2.651,5.943-5.943S13.395,0,10.103,0S4.16,2.651,4.16,5.943c0,1.508,0.503,2.834,1.417,3.885l-0.274,0.228H4.571",m+="L0.001,14.629L0.001,14.629z M5.943,5.943c0-2.285,1.828-4.114,4.114-4.114s4.114,1.828,4.114,",this.maps.zoomSettings.enablePanning&&!this.maps.zoomSettings.enableSelectionZooming||this.maps.zoomSettings.enablePanning&&this.maps.zoomSettings.enableSelectionZooming?(u=c,g=this.maps.themeStyle.zoomFillColor):this.maps.zoomSettings.enablePanning||this.maps.zoomSettings.enableSelectionZooming?(u=this.selectionColor,g=this.selectionColor):(u=c,g=this.maps.themeStyle.zoomFillColor),this.currentToolbarEle.appendChild(e.renderer.drawPath(new w(e.element.id+"_Zooming_ToolBar_"+h,u,1,g,1,null,m+"4.114s-1.828,4.114-4.114,4.114S5.943,8.229,5.943,5.943z"))),this.zoomElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"zoomin":m="M 8, 0 L 8, 16 M 0, 8 L 16, 8",this.currentToolbarEle.appendChild(e.renderer.drawPath(new w(e.element.id+"_Zooming_ToolBar_"+h+"_Path",c,3,this.maps.themeStyle.zoomFillColor,1,null,m))),this.zoomInElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"zoomout":m="M 0, 8 L 16, 8",this.currentToolbarEle.appendChild(e.renderer.drawPath(new w(e.element.id+"_Zooming_ToolBar_"+h,c,3,this.maps.themeStyle.zoomFillColor,1,null,m))),this.zoomOutElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"pan":var f=void 0;m="M5,3h2.3L7.275,5.875h1.4L8.65,3H11L8,0L5,3z M3,11V8.7l2.875,0.025v-1.4L3,7.35V5L0,8L3,",m+="11z M11,13H8.7l0.025-2.875h-1.4L7.35,13H5l3,3L11,13z M13,5v2.3l-2.875-0.025v1.4L13,8.65V11l3-3L13,5z",this.maps.zoomSettings.enablePanning&&this.maps.zoomModule.isDragZoom?f="#737373":this.maps.zoomSettings.enablePanning?f=this.selectionColor:(f="#737373",this.currentToolbarEle.setAttribute("class","")),this.currentToolbarEle.appendChild(e.renderer.drawPath(new w(e.element.id+"_Zooming_ToolBar_"+h,f,1,f,1,null,m))),this.panColor=f,this.panElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"reset":m="M12.364,8h-2.182l2.909,3.25L16,8h-2.182c0-3.575-2.618-6.5-5.818-6.5c-1.128,0-2.218,0.366-3.091,",m+="1.016l1.055,1.178C6.581,3.328,7.272,3.125,8,3.125C10.4,3.125,12.363,5.319,12.364,8L12.364,8z M11.091,",m+="13.484l-1.055-1.178C9.419,12.672,8.728,12.875,8,12.875c-2.4,0-4.364-2.194-4.364-4.875h2.182L2.909,4.75L0,8h2.182c0,",this.currentToolbarEle.appendChild(e.renderer.drawPath(new w(e.element.id+"_Zooming_ToolBar_"+h,this.fillColor,null,this.maps.themeStyle.zoomFillColor,1,null,m+"3.575,2.618,6.5,5.818,6.5C9.128,14.5,10.219,14.134,11.091,13.484L11.091,13.484z"))),this.wireEvents(this.currentToolbarEle,this.performToolBarAction)}this.currentToolbarEle.appendChild(e.renderer.drawCircle(new T(e.element.id+"_Zooming_ToolBar_"+h+"_Rect",c,{color:this.maps.themeStyle.zoomFillColor,width:1},1,8,8,16,""))),t="Horizontal"===a?t+36:t,i="Horizontal"===a?i:i+36,this.toolBarGroup.appendChild(this.currentToolbarEle)}},e.prototype.performToolBarAction=function(e){var t=e.target;e.stopImmediatePropagation();var i="touch"===e.pointerType||"2"===e.pointerType||e.type.indexOf("touch")>-1,a=t.id.split("_Zooming_ToolBar_")[1].split("_")[0];i?(this.handled=!0,this.performZoomingByToolBar(a)):"mousedown"!==e.type&&"pointerdown"!==e.type||this.handled?this.handled=!1:(this.handled=!1,this.performZoomingByToolBar(a))},e.prototype.performZoomingByToolBar=function(e){var t=this.maps;switch(e.toLowerCase()){case"zoom":this.panColor=this.fillColor,this.zoomColor=this.selectionColor,this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,this.fillColor);break;case"pan":this.maps.zoomSettings.enablePanning?this.panColor=this.selectionColor:this.panColor="#737373",this.zoomColor=this.fillColor,this.maps.zoomSettings.enablePanning?(this.applySelection(this.zoomElements,this.fillColor),this.applySelection(this.panElements,this.panColor)):(this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,this.panColor));break;case"zoomin":t.staticMapZoom=t.tileZoomLevel,t.staticMapZoom>0&&t.staticMapZoom<22&&(t.staticMapZoom+=1),this.toolBarZooming((t.isTileMap?t.tileZoomLevel:t.scale)+1,"ZoomIn");break;case"zoomout":t.staticMapZoom=t.tileZoomLevel,t.markerCenterLatitude=null,t.markerCenterLongitude=null,this.toolBarZooming((t.isTileMap?t.tileZoomLevel:t.scale)-1,"ZoomOut");break;case"reset":t.staticMapZoom=t.zoomSettings.enable?t.zoomSettings.zoomFactor:0,t.markerCenterLatitude=null,t.markerCenterLongitude=null,this.toolBarZooming(1,"Reset"),this.maps.zoomSettings.enablePanning?(this.applySelection(this.zoomElements,this.fillColor),this.applySelection(this.panElements,this.selectionColor)):(this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,"#737373"))}this.panningStyle(e.toLowerCase())},e.prototype.panningStyle=function(e){var t=ye(this.maps.element.id+"_svg");"pan"===e||this.isPanning?t.setAttribute("class","e-maps-panning"):t.setAttribute("class","")},e.prototype.applySelection=function(e,t){if(e)for(var i,a=0;a<e.childElementCount;a++)"circle"!==(i=e.childNodes[a]).tagName&&(i.setAttribute("fill",t),i.setAttribute("stroke",t))},e.prototype.showTooltip=function(e){var t=e.target.id.split("_Zooming_ToolBar_")[1].split("_")[0];this.isTouch||Ae("EJ2_Map_Toolbar_Tip",this.maps.getLocalizedLabel(t),e.pageY+10,e.pageX+10,"10px")},e.prototype.removeTooltip=function(){ye("EJ2_Map_Toolbar_Tip")&&sf.base.remove(ye("EJ2_Map_Toolbar_Tip"))},e.prototype.alignToolBar=function(){var e=this.maps,t=sf.base.createElement("div",{id:e.element.id+"_ToolBar",styles:"position:absolute;z-index:2"}),i=e.renderer.createSvg({id:e.element.id+"_Zooming_ToolBar",width:10,height:10});i.appendChild(this.toolBarGroup),t.appendChild(i),ye(e.element.id+"_Secondary_Element")&&ye(e.element.id+"_Secondary_Element").appendChild(t);var a=this.toolBarGroup.getBoundingClientRect();i.setAttribute("height",(a.height+5).toString()),i.setAttribute("width",(a.width+5).toString());var o=sf.base.isNullOrUndefined(e.totalRect)?e.mapAreaRect:e.totalRect,n=0,s=0;switch(e.zoomSettings.verticalAlignment){case"Near":s=o.y;break;case"Center":s=o.height/2-a.height/2;break;case"Far":s=o.height-a.height-10}switch(e.zoomSettings.horizontalAlignment){case"Near":n=o.x;break;case"Center":n=o.width/2-a.width/2;break;case"Far":n=o.width-a.width-10}t.style.left=n+"px",t.style.top=s+"px";var l=this.maps.zoomSettings.highlightColor,r=" .e-maps-toolbar:hover > circle { stroke:"+l+"; } .e-maps-toolbar:hover > path { fill: "+l+" ;  stroke: "+l+"; }.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } .e-maps-popup-close { display: block; opacity: 0; }",d=document.createElement("style");d.appendChild(document.createTextNode(r)),t.appendChild(d)},e.prototype.wireEvents=function(e,t){sf.base.EventHandler.add(e,sf.base.Browser.touchStartEvent,t,this),sf.base.EventHandler.add(e,"mouseover",this.showTooltip,this),sf.base.EventHandler.add(e,"mouseout",this.removeTooltip,this)},e.prototype.mapMouseWheel=function(e){if(this.maps.zoomSettings.enable&&this.maps.zoomSettings.mouseWheelZoom){var t=this.maps;t.availableSize;t.markerZoomedState=!1,t.zoomPersistence=t.enablePersistence;var i=this.getMousePosition(e.pageX,e.pageY),a=t.tileZoomLevel,o=t.scale,n=t.isTileMap?a:o;if(i.x>t.mapAreaRect.x&&i.x<t.mapAreaRect.x+t.mapAreaRect.width&&i.y>t.mapAreaRect.y&&i.y<t.mapAreaRect.y+t.mapAreaRect.height){e.preventDefault();var s="mozilla"!==this.browserName||this.isPointer?e.wheelDelta/120>0?"ZoomIn":"ZoomOut":-e.detail/3>0?"ZoomIn":"ZoomOut";"ZoomIn"===s?(t.mapScaleValue=n+1,t.staticMapZoom=t.tileZoomLevel,t.staticMapZoom>0&&t.staticMapZoom<22&&(t.staticMapZoom+=1),this.performZooming(i,n+1,s)):(t.mapScaleValue=n-1,t.staticMapZoom=t.tileZoomLevel,1===t.mapScaleValue&&(t.markerCenterLatitude=null,t.markerCenterLongitude=null),t.staticMapZoom>1&&t.staticMapZoom<22&&(t.staticMapZoom-=1),this.performZooming(i,n-1,s))}}},e.prototype.doubleClick=function(e){var t=e.pageX,i=e.pageY;e.target;if(this.maps.zoomSettings.enable&&this.maps.zoomSettings.doubleClickZoom&&!(e.target.id.indexOf("_Zooming_")>-1)){var a=this.getMousePosition(t,i),o=this.maps,n=(o.availableSize,o.tileZoomLevel),s=o.scale;o.mapScaleValue=o.mapScaleValue+1;var l=o.isTileMap?n:s;a.x>o.mapAreaRect.x&&a.x<o.mapAreaRect.x+o.mapAreaRect.width&&a.y>o.mapAreaRect.y&&a.y<o.mapAreaRect.y+o.mapAreaRect.height&&this.performZooming(a,l+1,"ZoomIn")}},e.prototype.mouseDownHandler=function(e){var t,i,a=null;e.target;"touchstart"===e.type?(this.isTouch=!0,a=e.touches,e.target,t=a[0].clientX,i=a[0].clientY):(t=e.pageX,i=e.pageY,e.target),this.maps.zoomSettings.enablePanning?this.isPanning=this.panColor===this.selectionColor?this.maps.zoomSettings.enablePanning:this.zoomColor!==this.selectionColor:this.isPanning=this.panColor!==this.selectionColor?this.maps.zoomSettings.enablePanning:this.zoomColor===this.selectionColor,this.mouseDownLatLong={x:t,y:i},this.rectZoomingStart=!this.isPanning&&this.maps.zoomSettings.enable,this.mouseDownPoints=this.getMousePosition(t,i),this.isTouch&&(this.firstMove=!0,this.pinchFactor=this.maps.scale,this.fingers=a.length),this.isSingleClick=!0},e.prototype.mouseMoveHandler=function(e){var t,i,a,o=this.maps,n=null,s=this.maps.zoomSettings;"touchmove"===e.type?(this.isTouch=!0,a=e.target,t=(n=e.touches)[0].clientX,i=n[0].clientY):(t=e.pageX,i=e.pageY,a=e.target),ye(o.element.id+"_Zooming_KitCollection")&&(a.id.indexOf("_Zooming_")>-1?(ye(o.element.id+"_Zooming_KitCollection").setAttribute("opacity","1"),document.getElementById(o.element.id+"_Zooming_ToolBar_Pan_Group")&&(this.maps.zoomSettings.enablePanning||(a.id.indexOf("_Zooming_ToolBar")>-1||a.id.indexOf("_Zooming_Rect")>-1)&&(ye(o.element.id+"_Zooming_ToolBar_Pan_Rect").setAttribute("opacity","0.3"),ye(o.element.id+"_Zooming_ToolBar_Pan").setAttribute("opacity","0.3")))):(ye(o.element.id+"_Zooming_KitCollection").setAttribute("opacity","0.3"),!this.maps.zoomSettings.enablePanning&&document.getElementById(o.element.id+"_Zooming_ToolBar_Pan_Group")&&(ye(o.element.id+"_Zooming_ToolBar_Pan_Rect").setAttribute("opacity","1"),ye(o.element.id+"_Zooming_ToolBar_Pan").setAttribute("opacity","1")))),this.isTouch&&this.maps.zoomSettings.pinchZooming&&(this.firstMove&&2===n.length?(this.rectZoomingStart=!1,this.updateInteraction(),this.touchStartList=Ze(e)):2===this.touchStartList.length&&2===n.length&&(this.touchMoveList=Ze(e),e.preventDefault(),this.rectZoomingStart=!1,this.performPinchZooming(e)),this.firstMove=!1),this.mouseMovePoints=this.getMousePosition(t,i);e.target.id,e.target;s.enable&&this.isPanning&&(sf.base.Browser.isDevice&&n.length>1||!sf.base.Browser.isDevice)&&(e.preventDefault(),this.maps.element.style.cursor="pointer",this.mouseMoveLatLong={x:t,y:i},this.mouseDownLatLong.x!==this.mouseMoveLatLong.x&&this.mouseDownLatLong.y!==this.mouseMoveLatLong.y&&(this.maps.zoomSettings.enablePanning&&this.panning("None",null,null,e),this.mouseDownLatLong.x=t,this.mouseDownLatLong.y=i)),(this.isTouch?1===n.length&&this.rectZoomingStart:this.rectZoomingStart)&&(e.preventDefault(),this.maps.zoomSettings.enableSelectionZooming&&this.drawZoomRectangle())},e.prototype.mouseUpHandler=function(e){this.maps;this.rectZoomingStart=!1,this.isPanning=!1,this.isSingleClick=!!this.isSingleClick,this.isTouch=!1,this.touchStartList=[],this.touchMoveList=[],this.lastScale=1,this.maps.element.style.cursor="auto",sf.base.isNullOrUndefined(this.distanceX)&&sf.base.isNullOrUndefined(this.distanceY)||sf.base.isNullOrUndefined(this.currentLayer)||"SubLayer"!==this.currentLayer.type||(this.toAlignSublayer(),this.distanceX=this.distanceY=null);var t=ye(this.maps.element.id+"_Selection_Rect_Zooming");t&&this.maps.zoomSettings.enable&&this.maps.zoomSettings.enableSelectionZooming&&(sf.base.remove(t),this.performRectZooming()),this.mouseMoveLatLong={x:0,y:0},this.mouseDownLatLong={x:0,y:0}},e.prototype.mouseCancelHandler=function(e){this.isPanning=!1,this.isTouch=!1,this.rectZoomingStart=!1;var t=ye(this.maps.element.id+"_Selection_Rect_Zooming");t&&this.maps.zoomSettings.enable&&(sf.base.remove(t),this.performRectZooming())},e.prototype.click=function(e){var t=this.maps;if(t.markerModule&&t.markerModule.sameMarkerData.length>0||e.target.id.indexOf("MarkerIndex")>-1&&-1==e.target.id.indexOf("cluster"))return null;if(this.isSingleClick&&t.zoomSettings.zoomOnClick&&!(e.target.id.indexOf("_Zooming_")>-1)&&!t.zoomSettings.doubleClickZoom&&this.zoomColor!==this.selectionColor){var i=e.pageX,a=e.pageY,o=this.getMousePosition(i,a),n=t.tileZoomLevel,s=t.scale;t.mapScaleValue=t.mapScaleValue+1;var l=t.isTileMap?n:s;o.x>t.mapAreaRect.x&&o.x<t.mapAreaRect.x+t.mapAreaRect.width&&o.y>t.mapAreaRect.y&&o.y<t.mapAreaRect.y+t.mapAreaRect.height&&this.performZooming(o,l+1,"ZoomIn")}},e.prototype.getMousePosition=function(e,t){var i=this.maps,a=i.element.getBoundingClientRect(),o=i.element.ownerDocument.defaultView.pageXOffset,n=i.element.ownerDocument.defaultView.pageYOffset,s=i.element.ownerDocument.documentElement.clientTop,l=i.element.ownerDocument.documentElement.clientLeft,r=a.left+o-l,d=a.top+n-s;return new O(Math.abs(e-r),Math.abs(t-d))},e.prototype.addEventListener=function(){this.maps.isDestroyed||(sf.base.EventHandler.add(this.maps.element,this.wheelEvent,this.mapMouseWheel,this),sf.base.EventHandler.add(this.maps.element,"click",this.click,this),sf.base.EventHandler.add(this.maps.element,"dblclick",this.doubleClick,this),this.maps.on(sf.base.Browser.touchMoveEvent,this.mouseMoveHandler,this),this.maps.on(sf.base.Browser.touchStartEvent,this.mouseDownHandler,this),this.maps.on(sf.base.Browser.touchEndEvent,this.mouseUpHandler,this),sf.base.EventHandler.add(this.maps.element,this.cancelEvent,this.mouseCancelHandler,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(sf.base.EventHandler.remove(this.maps.element,this.wheelEvent,this.mapMouseWheel),sf.base.EventHandler.remove(this.maps.element,"click",this.click),sf.base.EventHandler.remove(this.maps.element,"dblclick",this.doubleClick),this.maps.off(sf.base.Browser.touchMoveEvent,this.mouseMoveHandler),this.maps.off(sf.base.Browser.touchStartEvent,this.mouseDownHandler),this.maps.off(sf.base.Browser.touchEndEvent,this.mouseUpHandler),this.maps.off(this.cancelEvent,this.mouseCancelHandler))},e.prototype.getModuleName=function(){return"Zoom"},e.prototype.destroy=function(e){this.removeEventListener()},e}();return ai.Inject(ni,di,Ft,hi,mi,ui,fi,li,ri,Kt,Qt,$t,ei),e.Maps=ai,e.load="load",e.loaded="loaded",e.click="click",e.rightClick="rightClick",e.doubleClick="doubleClick",e.resize="resize",e.tooltipRender="tooltipRender",e.shapeSelected="shapeSelected",e.shapeHighlight="shapeHighlight",e.mousemove="mousemove",e.mouseup="mouseup",e.mousedown="mousedown",e.layerRendering="layerRendering",e.shapeRendering="shapeRendering",e.markerRendering=Rt,e.markerClusterRendering=Ut,e.markerClick=Zt,e.markerClusterClick=Dt,e.markerMouseMove=Ht,e.markerClusterMouseMove=Vt,e.dataLabelRendering="dataLabelRendering",e.bubbleRendering="bubbleRendering",e.bubbleClick="bubbleClick",e.bubbleMouseMove="bubbleMouseMove",e.animationComplete=Gt,e.legendRendering="legendRendering",e.annotationRendering="annotationRendering",e.itemSelection=Wt,e.itemHighlight="itemHighlight",e.beforePrint="beforePrint",e.zoomIn="zoomIn",e.zoomOut="zoomOut",e.pan="pan",e.Annotation=rt,e.Arrow=dt,e.Font=pt,e.Border=ht,e.CenterPosition=ct,e.TooltipSettings=mt,e.Margin=ut,e.ConnectorLineSettings=gt,e.MarkerClusterSettings=ft,e.MarkerClusterData=bt,e.ColorMappingSettings=yt,e.InitialShapeSelectionSettings=vt,e.SelectionSettings=xt,e.HighlightSettings=St,e.NavigationLineSettings=Ot,e.BubbleSettings=_t,e.CommonTitleSettings=Mt,e.SubTitleSettings=Ct,e.TitleSettings=Lt,e.ZoomSettings=wt,e.ToggleLegendSettings=Pt,e.LegendSettings=It,e.DataLabelSettings=Tt,e.ShapeSettings=kt,e.MarkerBase=Nt,e.MarkerSettings=Et,e.LayerSettings=zt,e.Tile=At,e.MapsAreaSettings=jt,e.Size=n,e.stringToNumber=s,e.calculateSize=l,e.createSvg=r,e.getMousePosition=d,e.degreesToRadians=p,e.radiansToDegrees=h,e.convertGeoToPoint=c,e.convertTileLatLongToPoint=m,e.xToCoordinate=u,e.yToCoordinate=g,e.aitoff=f,e.roundTo=b,e.sinci=y,e.acos=v,e.calculateBound=x,e.triggerDownload=S,e.Point=O,e.MinMax=_,e.GeoLocation=M,e.measureText=C,e.TextOption=L,e.PathOption=w,e.ColorValue=P,e.RectOption=I,e.CircleOption=T,e.PolygonOption=k,e.PolylineOption=N,e.LineOption=E,e.Line=z,e.MapLocation=A,e.Rect=j,e.PatternOptions=B,e.renderTextElement=F,e.convertElement=R,e.formatValue=U,e.convertStringToValue=Z,e.convertElementFromLabel=D,e.drawSymbols=H,e.getValueFromObject=V,e.markerColorChoose=G,e.markerShapeChoose=W,e.clusterTemplate=q,e.mergeSeparateCluster=X,e.clusterSeparate=Y,e.marker=J,e.markerTemplate=K,e.maintainSelection=Q,e.maintainStyleClass=$,e.appendShape=ee,e.drawCircle=te,e.drawRectangle=ie,e.drawPath=function(e,t,i){return ee(e.renderer.drawPath(t),i)},e.drawPolygon=function(e,t,i){return ee(e.renderer.drawPolygon(t),i)},e.drawPolyline=function(e,t,i){return ee(e.renderer.drawPolyline(t),i)},e.drawLine=function(e,t,i){return ee(e.renderer.drawLine(t),i)},e.calculateShapes=ae,e.drawDiamond=function(e,t,i,a,o){return t.d="M "+a.x+" "+(a.y-i.height/2)+" L "+(a.x+i.width/2)+" "+a.y+" L "+a.x+" "+(a.y+i.height/2)+" L "+(a.x-i.width/2)+" "+a.y+" Z",ee(e.renderer.drawPath(t),o)},e.drawTriangle=function(e,t,i,a,o){return t.d="M "+a.x+" "+(a.y-i.height/2)+" L "+(a.x+i.width/2)+" "+(a.y+i.height/2)+" L "+(a.x-i.width/2)+" "+(a.y+i.height/2)+" Z",ee(e.renderer.drawPath(t),o)},e.drawCross=function(e,t,i,a,o){return t.d="M "+a.x+" "+(a.y-i.height/2)+" L "+a.x+" "+(a.y+i.height/2)+" M "+(a.x-i.width/2)+" "+a.y+" L "+(a.x+i.width/2)+" "+a.y,ee(e.renderer.drawPath(t),o)},e.drawHorizontalLine=function(e,t,i,a,o){return t.d=" M "+(a.x-i.width/2)+" "+a.y+" L "+(a.x+i.width/2)+" "+a.y,ee(e.renderer.drawPath(t),o)},e.drawVerticalLine=function(e,t,i,a,o){return t.d="M "+a.x+" "+(a.y-i.height/2)+" L "+a.x+" "+(a.y+i.height/2),ee(e.renderer.drawPath(t),o)},e.drawStar=function(e,t,i,a,o){return t.d="M "+(a.x+i.width/3)+" "+(a.y-i.height/2)+" L "+(a.x-i.width/2)+" "+(a.y+i.height/6)+" L "+(a.x+i.width/2)+" "+(a.y+i.height/6)+" L "+(a.x-i.width/3)+" "+(a.y-i.height/2)+" L "+a.x+" "+(a.y+i.height/2)+" L "+(a.x+i.width/3)+" "+(a.y-i.height/2)+" Z",ee(e.renderer.drawPath(t),o)},e.drawBalloon=oe,e.drawPattern=function(e,t,i,a){for(var o=e.renderer.createPattern(t,"pattern"),n=0,s=i;n<s.length;n++){ee(s[n],o)}return ee(o,a)},e.getFieldData=function(e,t){for(var i,a=[],o=0,n=e;o<n.length;o++){var s=n[o];i={};for(var l=0,r=t;l<r.length;l++){var d=r[l];s[d]&&(i[d]=s[d])}a.push(i)}return a},e.checkShapeDataFields=ne,e.checkPropertyPath=se,e.filter=le,e.getRatioOfBubble=re,e.findMidPointOfPolygon=de,e.isCustomPath=pe,e.textTrim=he,e.findPosition=ce,e.removeElement=me,e.calculateCenterFromPixel=ue,e.getTranslate=ge,e.getZoomTranslate=fe,e.fixInitialScaleForTile=be,e.getElementByID=ye,e.Internalize=ve,e.getTemplateFunction=xe,e.getElement=Se,e.getShapeData=Oe,e.triggerShapeEvent=_e,e.getElementsByClassName=Me,e.querySelector=Ce,e.getTargetElement=Le,e.createStyle=we,e.customizeStyle=Pe,e.triggerItemSelectionEvent=Ie,e.removeClass=Te,e.elementAnimate=ke,e.timeout=Ne,e.showTooltip=Ee,e.wordWrap=ze,e.createTooltip=Ae,e.drawSymbol=je,e.renderLegendShape=Be,e.getElementOffset=Fe,e.changeBorderWidth=Re,e.changeNavaigationLineWidth=Ue,e.targetTouches=Ze,e.calculateScale=De,e.getDistance=He,e.getTouches=Ve,e.getTouchCenter=Ge,e.sum=We,e.zoomAnimate=qe,e.animate=Xe,e.MapAjax=et,e.smoothTranslate=tt,e.compareZoomFactor=it,e.calculateZoomLevel=at,e.LayerPanel=Jt,e.Bubble=ni,e.BingMap=qt,e.Marker=Ft,e.ColorMapping=Xt,e.DataLabel=li,e.NavigationLine=ri,e.Legend=di,e.Highlight=hi,e.Selection=mi,e.MapsTooltip=ui,e.Zoom=fi,e.Annotations=Kt,e.Print=Qt,e.ImageExport=ei,e.PdfExport=$t,e},sfBlazor.loadDependencies(sfBlazor.dependencyJson.maps,(function(){sf.maps=sf.maps({})}))}}]);