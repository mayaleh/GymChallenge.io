(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"./bundles/schedule.js":function(e,t,i){"use strict";i.r(t);var a=i("../node_modules/@babel/runtime/helpers/typeof.js"),n=i.n(a);window.sf=window.sf||{},window.sf.schedule=function(e){var t="actionBegin",i="renderCell",a="data-ready",r="content-ready",s="scroll-ui-update";function o(e,t){var i,a=sf.base.createElement("div",{className:t}).cloneNode();return a.style.visibility="hidden",a.style.position="absolute",e.appendChild(a),i=k(a),sf.base.remove(a),i}function l(e){var t=getComputedStyle(e);return window.WebKitCSSMatrix?new WebKitCSSMatrix(t.webkitTransform).m42:0}function c(e,t){var i=new Date(e.getTime());return t=(t-i.getDay()-7)%7,new Date(i.setDate(i.getDate()+t))}function p(e,t){var i=c(e,t),a=new Date(i.getFullYear(),i.getMonth(),i.getDate()+6);return new Date(a.getTime())}function d(e){return new Date(e.getFullYear(),e.getMonth())}function h(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function u(e){var t=new Date(e.getFullYear(),0,1).valueOf(),i=(new Date(e.getFullYear(),e.getMonth(),e.getDate()).valueOf()-t+864e5)/864e5;return Math.ceil(i/7)}function f(e,t){var i=e.getTimezoneOffset(),a=new Date(e.getTime()+t),n=a.getTimezoneOffset()-i;return e.setTime(a.getTime()+6e4*n),e}function m(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function v(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTimezoneOffset(),i=e.getTimezoneOffset()-t;return e.getTime()-new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime()-60*i*1e3}function g(e,t){return Math.ceil((t.getTime()-e.getTime())/864e5)}function y(e,t){return e=new Date(""+e),new Date(e.setDate(e.getDate()+t))}function b(e,t){var i=(e=new Date(""+e)).getDate();return e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(i,D(e))),e}function T(e,t){var i=(e=new Date(""+e)).getDate();return e.setDate(1),e.setFullYear(e.getFullYear()+t),e.setDate(Math.min(i,D(e))),e}function w(e,t,i){var a=new Date(e.getTime());a.setHours(t.getHours()),a.setMinutes(t.getMinutes()),a.setSeconds(t.getSeconds());var n=new Date(e.getTime());return 0===i.getHours()?n=y(n,1):(n.setHours(i.getHours()),n.setMinutes(i.getMinutes()),n.setSeconds(i.getSeconds())),{startHour:a,endHour:n}}function D(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function C(e,t){var i=m(new Date(e)),a=m(new Date(t));return Math.round((a.getTime()-i.getTime())/864e5)}function E(e){return-1!==e.indexOf("Date")?new Date(parseInt(e.match(/\d+/g).toString(),10)):-1!==e.indexOf("T")?new Date(e):new Date(e.replace(/-/g,"/"))}var O=null;function S(){if(null!==O)return O;var e,t=sf.base.createElement("div");t.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(t);var i=devicePixelRatio?"1.10"===devicePixelRatio.toFixed(2)||devicePixelRatio<=1?Math.ceil(devicePixelRatio%1):Math.floor(devicePixelRatio%1):0;return e=t.offsetWidth-t.clientWidth-i|0,document.body.removeChild(t),O=e}function x(e,t,i){for(var a=0,n=e.length;a<n;a++)if(e[a][t]===i)return a;return-1}function k(e){var t=getComputedStyle(e);return e.offsetHeight+(parseInt(t.marginTop,10)||0)+(parseInt(t.marginBottom,10)||0)}function A(e){for(var t=0,i=[].slice.call(e.children);t<i.length;t++){var a=i[t];a.classList.contains("blazor-template")||e.removeChild(a)}}function V(e){var t=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1);return e.getTimezoneOffset()<Math.max(t.getTimezoneOffset(),i.getTimezoneOffset())}function M(e){return sf.base.isBlazor()?new Date(+e-6e4*e.getTimezoneOffset()):e}function R(e,t){if(sf.base.isBlazor()){var i=sf.base.extend({},e,null,!0);return i[t.startTime]=new Date(+e[t.startTime]-6e4*i[t.startTime].getTimezoneOffset()),i[t.endTime]=new Date(+e[t.endTime]-6e4*i[t.endTime].getTimezoneOffset()),i}return e}function P(e,t){switch(t){case"multiple":e=e.split(" ").map((function(e){return e.charAt(0).toLocaleUpperCase()+e.substring(1)})).join(" ");break;case"single":if(e[0]>="0"&&e[0]<="9"){var i=e.match(/[a-zA-Z]/);e=sf.base.isNullOrUndefined(i)?e:e.slice(0,i.index)+e[i.index].toLocaleUpperCase()+e.slice(i.index+1)}e=e[0].toLocaleUpperCase()+e.slice(1)}return e}var H="e-schedule",j="e-icons",I="e-popup-open",L="e-schedule-resource-toolbar-container",q="e-text-ellipsis",B="e-schedule-form",N=function(){function e(e){this.parent=e,this.l10n=this.parent.localeObj,this.renderHeader(),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.on("document-click",this.closeHeaderPopup,this)},e.prototype.removeEventListener=function(){this.parent.off("document-click",this.closeHeaderPopup)},e.prototype.closeHeaderPopup=function(e){var t=sf.base.closest(e.event.target,".e-date-range,.e-header-popup,.e-day,.e-selected");sf.base.isNullOrUndefined(t)&&this.hideHeaderPopup()},e.prototype.hideHeaderPopup=function(){this.headerPopup&&this.headerPopup.hide()},e.prototype.renderHeader=function(){this.element=sf.base.createElement("div",{className:"e-schedule-toolbar-container"});var e=sf.base.createElement("div",{className:"e-schedule-toolbar"});this.element.appendChild(e),this.parent.element.insertBefore(this.element,this.parent.element.firstElementChild),this.renderToolbar()},e.prototype.renderToolbar=function(){var e={requestType:"toolbarItemRendering",items:this.getItems()};sf.base.isBlazor()||this.parent.trigger(t,e),this.toolbarObj=new sf.navigations.Toolbar({items:e.items,overflowMode:"Popup",clicked:this.toolbarClickHandler.bind(this),enableRtl:this.parent.enableRtl,locale:this.parent.locale}),this.toolbarObj.isStringTemplate=!0,this.toolbarObj.appendTo(this.parent.element.querySelector(".e-schedule-toolbar"));var i=this.toolbarObj.element.querySelector(".e-prev");i&&i.firstElementChild.setAttribute("title",this.l10n.getConstant("previous"));var a=this.toolbarObj.element.querySelector(".e-next");a&&a.firstElementChild.setAttribute("title",this.l10n.getConstant("next")),this.updateActiveView(),sf.base.isBlazor()||this.parent.trigger("actionComplete",{requestType:"toolBarItemRendered",items:this.toolbarObj.items})},e.prototype.updateItems=function(){if(this.toolbarObj){var e={requestType:"toolbarItemRendering",items:this.getItems()};sf.base.isBlazor()||this.parent.trigger(t,e),this.toolbarObj.items=e.items,this.toolbarObj.dataBind(),sf.base.isBlazor()||this.parent.trigger("actionComplete",{requestType:"toolBarItemRendered",items:this.toolbarObj.items})}},e.prototype.getPopUpRelativeElement=function(){return this.parent.isAdaptive?this.toolbarObj.element:this.element.querySelector(".e-date-range")},e.prototype.setDayOfWeek=function(e){this.headerCalendar&&(this.headerCalendar.firstDayOfWeek=e,this.headerCalendar.dataBind())},e.prototype.setCalendarDate=function(e){this.headerCalendar&&(this.headerCalendar.value=e,this.headerCalendar.dataBind())},e.prototype.setCalendarMinMaxDate=function(){this.headerCalendar&&(this.headerCalendar.min=this.parent.minDate,this.headerCalendar.max=this.parent.maxDate,this.headerCalendar.dataBind())},e.prototype.getCalendarView=function(){return["Month","MonthAgenda","TimelineMonth"].indexOf(this.parent.currentView)>-1?"Year":["Year","TimelineYear"].indexOf(this.parent.currentView)>-1?"Decade":"Month"},e.prototype.setCalendarView=function(){if(this.headerCalendar){var e=this.getCalendarView();this.headerCalendar.depth=e,this.headerCalendar.start=e,this.headerCalendar.refresh()}},e.prototype.updateActiveView=function(){var e=[].slice.call(this.toolbarObj.element.querySelectorAll(".e-views"));sf.base.removeClass(e,["e-active-view"]),e.length>0&&e[this.parent.viewIndex]&&sf.base.addClass([e[this.parent.viewIndex]],["e-active-view"])},e.prototype.updateDateRange=function(e){var t=this.toolbarObj.element.querySelector(".e-date-range");t&&(t.setAttribute("aria-label",e),t.querySelector(".e-tbar-btn-text").innerHTML=e,this.toolbarObj.refreshOverflow())},e.prototype.getDateRangeText=function(){return P(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")},e.prototype.getItems=function(){var e=[],t=this.parent.isAdaptive;if(e.push({align:"Left",prefixIcon:"e-icon-prev",tooltipText:"Previous",overflow:"Show",cssClass:"e-prev",htmlAttributes:{"aria-label":"previous period",role:"navigation"}}),e.push({align:"Left",prefixIcon:"e-icon-next",tooltipText:"Next",overflow:"Show",cssClass:"e-next",htmlAttributes:{"aria-label":"next period",role:"navigation"}}),e.push({align:"Left",text:this.getDateRangeText(),suffixIcon:"e-icon-down-arrow",cssClass:"e-date-range",overflow:"Show",htmlAttributes:{"aria-atomic":"true","aria-live":"assertive","aria-label":"title",role:"navigation"}}),this.parent.isAdaptive?(e.push({align:"Right",showAlwaysInPopup:t,prefixIcon:"e-icon-add",text:this.l10n.getConstant("newEvent"),cssClass:"e-add",overflow:"Show"}),e.push({align:"Right",showAlwaysInPopup:t,prefixIcon:"e-icon-today",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"})):(e.push({align:"Right",showAlwaysInPopup:t,prefixIcon:"e-icon-day",text:this.l10n.getConstant("today"),cssClass:"e-today",overflow:"Show"}),this.parent.views.length>1&&e.push({align:"Right",type:"Separator",cssClass:"e-schedule-seperator"})),this.parent.views.length>1)for(var i=0,a=this.parent.views;i<a.length;i++){var n=a[i];"string"==typeof n?e.push(this.getItemObject(n.toLowerCase(),null)):e.push(this.getItemObject(n.option.toLowerCase(),n.displayName))}return e},e.prototype.getItemObject=function(e,t){var i,a=this.parent.isAdaptive;switch(e){case"day":i={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-day",text:t||this.l10n.getConstant("day"),cssClass:"e-views e-day"};break;case"week":i={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-week",text:t||this.l10n.getConstant("week"),cssClass:"e-views e-week"};break;case"workweek":i={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-workweek",text:t||this.l10n.getConstant("workWeek"),cssClass:"e-views e-work-week"};break;case"month":i={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-month",text:t||this.l10n.getConstant("month"),cssClass:"e-views e-month"};break;case"agenda":i={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-agenda",text:this.l10n.getConstant("agenda"),cssClass:"e-views e-agenda"};break;case"monthagenda":i={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-month-agenda",text:this.l10n.getConstant("monthAgenda"),cssClass:"e-views e-month-agenda"};break;case"timelineday":i={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-timeline-day",text:t||this.l10n.getConstant("timelineDay"),cssClass:"e-views e-timeline-day"};break;case"timelineweek":i={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-timeline-week",text:t||this.l10n.getConstant("timelineWeek"),cssClass:"e-views e-timeline-week"};break;case"timelineworkweek":i={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-timeline-workweek",text:t||this.l10n.getConstant("timelineWorkWeek"),cssClass:"e-views e-timeline-work-week"};break;case"timelinemonth":i={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-timeline-month",text:t||this.l10n.getConstant("timelineMonth"),cssClass:"e-views e-timeline-month"};break;case"timelineyear":i={align:"Right",showAlwaysInPopup:a,prefixIcon:"e-icon-timeline-year",text:t||this.l10n.getConstant("timelineYear"),cssClass:"e-views e-timeline-year"}}return i},e.prototype.renderHeaderPopup=function(){var e=sf.base.createElement("div",{className:"e-header-popup"}),t=sf.base.createElement("div",{className:"e-header-calendar"});e.appendChild(t),this.element.appendChild(e),this.headerPopup=new sf.popups.Popup(e,{actionOnScroll:"hide",targetType:"relative",relateTo:this.getPopUpRelativeElement(),position:{X:"left",Y:"bottom"},enableRtl:this.parent.enableRtl}),this.headerPopup.isStringTemplate=!0;var i=this.getCalendarView();this.headerCalendar=new sf.calendars.Calendar({value:this.parent.selectedDate,min:this.parent.minDate,max:this.parent.maxDate,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,enableRtl:this.parent.enableRtl,locale:this.parent.locale,depth:i,start:i,calendarMode:this.parent.calendarMode,change:this.calendarChange.bind(this)}),this.headerCalendar.isStringTemplate=!0,this.headerCalendar.appendTo(t),this.headerPopup.hide()},e.prototype.calendarChange=function(e){e.value.getTime()!==this.parent.selectedDate.getTime()&&this.parent.changeDate(e.value),this.headerPopup.hide()},e.prototype.calculateViewIndex=function(e){var t=sf.base.closest(e.originalEvent.target,".e-views");return[].slice.call(this.element.querySelectorAll(".e-views")).indexOf(t)},e.prototype.toolbarClickHandler=function(e){if(e.item){switch(e.item.cssClass.replace("e-views ","")){case"e-date-range":this.headerPopup||this.renderHeaderPopup(),this.headerPopup.element.classList.contains(I)?this.headerPopup.hide():this.headerPopup.show();break;case"e-day":this.parent.changeView("Day",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-week":this.parent.changeView("Week",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-work-week":this.parent.changeView("WorkWeek",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-month":this.parent.changeView("Month",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-agenda":this.parent.changeView("Agenda",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-month-agenda":this.parent.changeView("MonthAgenda",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-day":this.parent.changeView("TimelineDay",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-week":this.parent.changeView("TimelineWeek",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-work-week":this.parent.changeView("TimelineWorkWeek",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-month":this.parent.changeView("TimelineMonth",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-timeline-year":this.parent.changeView("TimelineYear",e.originalEvent,void 0,this.calculateViewIndex(e));break;case"e-today":this.parent.isSelectedDate(m(this.parent.getCurrentTime()))||this.parent.changeDate(m(this.parent.getCurrentTime()),e.originalEvent);break;case"e-prev":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e.originalEvent);break;case"e-next":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e.originalEvent);break;case"e-add":var t=void 0,i=this.parent.activeCellsData.startTime.getTime()===this.parent.activeCellsData.endTime.getTime();if(this.parent.activeCellsData&&!i)t=this.parent.activeCellsData;else{var a=6e4*this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,n=new Date(this.parent.selectedDate.getTime()),r=this.parent.getCurrentTime();n.setHours(r.getHours(),Math.round(n.getMinutes()/a)*a,0);var s=new Date(new Date(n.getTime()).setMilliseconds(n.getMilliseconds()+a));t={startTime:n,endTime:s,isAllDay:!1}}this.parent.eventWindow.openEditor(sf.base.extend(t,{cancel:!1,event:e.originalEvent}),"Add")}var o=this.toolbarObj.element.querySelector(".e-toolbar-pop");o&&"Input"!==e.item.type&&o.ej2_instances[0].hide({name:"SlideUp",duration:100})}},e.prototype.getHeaderElement=function(){return this.toolbarObj.element},e.prototype.updateHeaderItems=function(e){var t=this.toolbarObj.element.querySelector(".e-prev"),i=this.toolbarObj.element.querySelector(".e-next"),a=this.toolbarObj.element.querySelector(".e-date-range");t&&("add"===e?sf.base.addClass([t],"e-hidden"):sf.base.removeClass([t],"e-hidden")),i&&("add"===e?sf.base.addClass([i],"e-hidden"):sf.base.removeClass([i],"e-hidden")),a&&("add"===e?sf.base.addClass([a],q):sf.base.removeClass([a],q))},e.prototype.previousNextIconHandler=function(){var e=this.parent.getCurrentViewDates(),t=this.toolbarObj.element.querySelector(".e-prev"),i=this.toolbarObj.element.querySelector(".e-next"),a=new Date(e[0].getTime()),n=new Date(e[e.length-1].getTime());("WorkWeek"!==this.parent.currentView&&"TimelineWorkWeek"!==this.parent.currentView||(n=y(a=c(m(this.parent.selectedDate),this.parent.firstDayOfWeek),7*this.parent.activeViewOptions.interval)),"Month"===this.parent.currentView)&&(n=h(b(a=d(this.parent.selectedDate),this.parent.activeViewOptions.interval-1)));sf.base.isNullOrUndefined(t)||this.toolbarObj.enableItems(t,a>this.parent.minDate),sf.base.isNullOrUndefined(i)||this.toolbarObj.enableItems(i,n<this.parent.maxDate),this.setCalendarMinMaxDate()},e.prototype.getModuleName=function(){return"headerbar"},e.prototype.destroy=function(){this.headerPopup&&!this.headerPopup.isDestroyed&&(this.headerPopup.destroy(),this.headerPopup=null),this.headerCalendar&&!this.headerCalendar.isDestroyed&&(this.headerCalendar.destroy(),this.headerCalendar=null),this.toolbarObj&&!this.toolbarObj.isDestroyed&&(this.toolbarObj.destroy(),this.removeEventListener(),sf.base.remove(this.element),this.toolbarObj=null)},e}(),F=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.getModuleName=function(){return"scroll"},e.prototype.setWidth=function(){this.parent.element.style.width=sf.base.formatUnit(this.parent.width)},e.prototype.setHeight=function(){this.parent.element.style.height=sf.base.formatUnit(this.parent.height)},e.prototype.addEventListener=function(){this.parent.on(r,this.setDimensions,this),this.parent.on("ui-update",this.onPropertyChanged,this)},e.prototype.removeEventListener=function(){this.parent.off(r,this.setDimensions),this.parent.off("ui-update",this.onPropertyChanged)},e.prototype.setDimensions=function(){this.setWidth(),this.setHeight();var e={cssProperties:this.parent.getCssProperties(),module:this.getModuleName()};this.parent.notify(s,e)},e.prototype.onPropertyChanged=function(e){this.setDimensions()},e.prototype.destroy=function(){this.removeEventListener()},e}(),U=function(){function e(e){this.parent=e,this.element=this.parent.element.querySelector(".e-table-container"),this.touchObj=new sf.base.Touch(this.element,{scroll:this.scrollHandler.bind(this),swipe:this.swipeHandler.bind(this),tapHold:this.tapHoldHandler.bind(this),swipeSettings:{swipeThresholdDistance:1}}),sf.base.EventHandler.add(this.element,"transitionend",this.onTransitionEnd,this),this.touchLeftDirection=this.parent.enableRtl?"Right":"Left",this.touchRightDirection=this.parent.enableRtl?"Left":"Right"}return e.prototype.scrollHandler=function(e){if(!(sf.base.isBlazor()||"Agenda"===this.parent.currentView||this.parent.uiStateValues.action||e.originalEvent&&(e.originalEvent.target.classList.contains("e-appointment")||sf.base.closest(e.originalEvent.target,".e-appointment")))){if(this.timeStampStart||(this.timeStampStart=Date.now()),this.element.classList.contains("e-translate")&&this.onTransitionEnd(),"Left"===e.scrollDirection||"Right"===e.scrollDirection){var i={requestType:"dateNavigate",cancel:!1,event:e.originalEvent};if(this.parent.trigger(t,i),i.cancel)return;var a=this.element.querySelector(".e-content-wrap");if(a&&a.scrollWidth>a.clientWidth)return;this.isScrollTriggered=!0,e.originalEvent.preventDefault(),e.originalEvent.stopPropagation()}if(e.scrollDirection===this.touchLeftDirection){this.nextPanel||(this.renderPanel("e-next-panel","next"),this.nextPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.nextPanel.element));var n=this.parent.enableRtl?e.distanceX:-e.distanceX;this.element.style.transform="translatex("+(this.getTranslateX(this.element)+n)+"px)"}else if(e.scrollDirection===this.touchRightDirection){var r=0;this.previousPanel||(this.renderPanel("e-previous-panel","previous"),this.previousPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.previousPanel.element),r=this.previousPanel.element.offsetWidth);n=this.parent.enableRtl?r-e.distanceX:-r+e.distanceX;this.element.style.transform="translatex("+(this.getTranslateX(this.element)+n)+"px)"}}},e.prototype.swipeHandler=function(e){if(this.isScrollTriggered&&!this.parent.uiStateValues.action){this.isScrollTriggered=!1;var t="Left"===e.swipeDirection?this.parent.activeView.renderDates[0]:this.parent.activeView.renderDates.slice(-1)[0];if("Left"===e.swipeDirection&&t<this.parent.maxDate||"Right"===e.swipeDirection&&t>=this.parent.minDate){var i=Date.now()-this.timeStampStart,a=e.distanceX*(sf.base.Browser.isDevice?6:1.66);a>i||e.distanceX>this.parent.element.offsetWidth/2?(this.swapPanels(e.swipeDirection),a>i&&e.distanceX>this.parent.element.offsetWidth/2&&(this.element.style.transitionDuration=a/i/10+"s"),this.confirmSwipe(e.swipeDirection)):this.cancelSwipe();var n={requestType:"dateNavigate",cancel:!1,event:e.originalEvent};this.parent.trigger("actionComplete",n)}else this.cancelSwipe();this.timeStampStart=null}},e.prototype.tapHoldHandler=function(e){var t=sf.base.closest(e.originalEvent.target,".e-appointment");sf.base.isNullOrUndefined(t)||!this.parent.isAdaptive||this.parent.quickPopup.tapHoldEventPopup(e.originalEvent)},e.prototype.renderPanel=function(e,t){this.currentPanel?this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0):(this.currentPanel={element:this.parent.activeView.getPanel(),selectedDate:new Date(this.parent.selectedDate.getTime())},this.setDimensions(this.currentPanel.element)),this.parent.setProperties({selectedDate:this.parent.activeView.getNextPreviousDate(t)},!0),this.parent.headerModule&&this.parent.headerModule.setCalendarDate(this.parent.selectedDate),this.parent.activeView.getRenderDates(),this.parent.activeView.renderLayout(e)},e.prototype.swapPanels=function(e){if(e===this.touchLeftDirection){var t=this.nextPanel;this.nextPanel=this.currentPanel,this.currentPanel=t}else{t=this.previousPanel;this.previousPanel=this.currentPanel,this.currentPanel=t}},e.prototype.confirmSwipe=function(e){var t=this,i={action:"date",cancel:!1,previousDate:e===this.touchLeftDirection?this.nextPanel.selectedDate:this.previousPanel.selectedDate,currentDate:this.currentPanel.selectedDate};this.parent.trigger("navigating",i,(function(i){if(i.cancel)t.swapPanels(e),t.cancelSwipe();else{t.parent.activeView.setPanel(t.currentPanel.element),t.parent.setProperties({selectedDate:t.currentPanel.selectedDate},!0);var a=void 0;a=t.parent.enableRtl?e===t.touchLeftDirection?t.previousPanel?t.previousPanel.element.offsetLeft:t.currentPanel.element.offsetWidth:0:e===t.touchLeftDirection?-t.currentPanel.element.offsetLeft:0,sf.base.addClass([t.element],"e-translate"),t.element.style.transform="translatex("+a+"px)",t.parent.headerModule&&t.parent.headerModule.updateDateRange(t.parent.activeView.getDateRangeText()),t.parent.renderModule.refreshDataManager()}}))},e.prototype.cancelSwipe=function(){this.parent.activeView.setPanel(this.currentPanel.element),this.parent.setProperties({selectedDate:this.currentPanel.selectedDate},!0),this.parent.activeView.getRenderDates(),this.parent.activeView.generateColumnLevels(),sf.base.addClass([this.element],"e-translate");var e=this.previousPanel?this.previousPanel.element.offsetWidth:0;this.element.style.transform="translatex("+(this.parent.enableRtl?e:-this.currentPanel.element.offsetLeft)+"px)"},e.prototype.onTransitionEnd=function(){sf.base.removeClass([this.element],"e-translate"),this.element.style.transitionDuration="",this.element.style.transform="",this.previousPanel&&(sf.base.remove(this.previousPanel.element),this.previousPanel=null,sf.base.removeClass([this.currentPanel.element],"e-previous-panel"),sf.base.addClass([this.currentPanel.element],"e-current-panel")),this.nextPanel&&(sf.base.remove(this.nextPanel.element),this.nextPanel=null,sf.base.removeClass([this.currentPanel.element],"e-next-panel"),sf.base.addClass([this.currentPanel.element],"e-current-panel")),this.currentPanel=null,this.parent.activeView.getPanel().style.width=""},e.prototype.getTranslateX=function(e){var t=window.getComputedStyle(e);return new WebKitCSSMatrix(t.webkitTransform).m41},e.prototype.setDimensions=function(e){e.style.width=this.parent.element.clientWidth+"px"},e.prototype.resetValues=function(){this.currentPanel=null,this.previousPanel=null,this.nextPanel=null,this.timeStampStart=null,this.element.style.transform="",sf.base.isBlazor()||A(this.element),sf.base.removeClass([this.element],"e-translate")},e.prototype.destroy=function(){this.touchObj.destroy(),sf.base.EventHandler.remove(this.element,"transitionend",this.onTransitionEnd),this.resetValues()},e}(),W=function(){function e(e){this.selectedCells=[],this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDownArrow:"shift+downarrow",shiftUpArrow:"shift+uparrow",shiftRightArrow:"shift+rightarrow",shiftLeftArrow:"shift+leftarrow",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow",altOne:"alt+1",altTwo:"alt+2",altThree:"alt+3",altFour:"alt+4",altFive:"alt+5",altSix:"alt+6",altSeven:"alt+7",altEight:"alt+8",altNine:"alt+9",enter:"enter",escape:"escape",delete:"delete",home:"home",pageUp:"pageup",pageDown:"pagedown",tab:"tab",shiftTab:"shift+tab"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.addEventListener()}return e.prototype.keyActionHandler=function(e){switch(e.action){case"downArrow":case"shiftDownArrow":this.processDown(e,e.shiftKey);break;case"upArrow":case"shiftUpArrow":this.processUp(e,e.shiftKey);break;case"leftArrow":case"shiftLeftArrow":this.processLeft(e,e.shiftKey);break;case"rightArrow":case"shiftRightArrow":this.processRight(e,e.shiftKey);break;case"ctrlLeftArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-prev button").focus();break;case"ctrlRightArrow":this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-next button").focus();break;case"altOne":case"altTwo":case"altThree":case"altFour":case"altFive":case"altSix":case"altSeven":case"altEight":case"altNine":this.processViewNavigation(e);break;case"enter":this.processEnter(e);break;case"home":this.focusFirstCell();break;case"tab":case"shiftTab":this.processTab(e,e.shiftKey);break;case"delete":this.processDelete(e);break;case"escape":this.processEscape()}},e.prototype.addEventListener=function(){this.parent.on("cell-mouse-down",this.onCellMouseDown,this)},e.prototype.removeEventListener=function(){this.parent.off("cell-mouse-down",this.onCellMouseDown)},e.prototype.onCellMouseDown=function(e){if(!e.event.shiftKey&&(this.initialTarget=this.getClosestCell(e.event),!this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.currentView&&this.initialTarget&&(e.event.target.classList.contains("e-work-cells")&&3!==e.event.which&&(this.parent.removeSelectedClass(),sf.base.EventHandler.add(this.parent.getContentTable(),"mousemove",this.onMouseSelection,this),sf.base.EventHandler.add(this.parent.getContentTable(),"mouseup",this.onMoveup,this)),e.event.target.classList.contains("e-all-day-cells")&&3!==e.event.which))){this.parent.removeSelectedClass();var t=this.parent.getAllDayRow();sf.base.EventHandler.add(t,"mousemove",this.onMouseSelection,this),sf.base.EventHandler.add(t,"mouseup",this.onMoveup,this)}},e.prototype.onMouseSelection=function(e){var t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));sf.base.addClass(t,"e-allow-select");var i=this.parent.boundaryValidation(e.pageY,e.pageX);if(i.bottom||i.top||i.left||i.right){var a=this.parent.element.querySelector(".e-content-wrap"),n=a.offsetHeight<=a.scrollHeight&&a.scrollTop>=0&&a.scrollTop+a.offsetHeight<=a.scrollHeight,r=a.offsetWidth<=a.scrollWidth&&a.scrollLeft>=0&&a.scrollLeft+a.offsetWidth<=a.scrollWidth;n&&(i.top||i.bottom)&&(a.scrollTop+=i.top?-e.target.offsetHeight:e.target.offsetHeight),r&&(i.left||i.right)&&(a.scrollLeft+=i.left?-e.target.offsetWidth:e.target.offsetWidth)}var s=this.getClosestCell(e);s&&this.selectCells(!0,s)},e.prototype.getClosestCell=function(e){return sf.base.closest(e.target,".e-work-cells,.e-all-day-cells")},e.prototype.onMoveup=function(e){var t=this,i=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));if(sf.base.removeClass(i,"e-allow-select"),e.target.classList.contains("e-work-cells")&&(sf.base.EventHandler.remove(this.parent.getContentTable(),"mousemove",this.onMouseSelection),sf.base.EventHandler.remove(this.parent.getContentTable(),"mouseup",this.onMoveup)),e.target.classList.contains("e-all-day-cells")){var a=this.parent.getAllDayRow();sf.base.EventHandler.remove(a,"mousemove",this.onMouseSelection),sf.base.EventHandler.remove(a,"mouseup",this.onMoveup)}if(!this.isPreventAction(e)){var n=sf.base.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");this.parent.activeCellsData=this.getSelectedElements(n);var r={};this.parent.eventWindow.convertToEventData(this.parent.activeCellsData,r);var s={data:r,element:this.parent.activeCellsData.element,event:e,requestType:"cellSelect",showQuickPopup:!1};this.parent.trigger("select",s,(function(i){if(i.showQuickPopup||t.parent.quickInfoOnSelectionEnd){var a=sf.base.extend(t.parent.activeCellsData,{cancel:!1,event:e,name:"cellClick"});t.parent.notify("cellClick",a)}}))}},e.prototype.processEnter=function(e){if(!this.parent.activeViewOptions.readonly&&!this.isPreventAction(e)){var t=e.target;if(sf.base.closest(t,".e-quick-popup-wrapper"))t.classList.contains("e-event-details")||t.classList.contains("e-event-create")||t.classList.contains("e-event-edit")||t.classList.contains("e-event-delete")||t.classList.contains("e-close")?(t.click(),e.preventDefault()):t.classList.contains("e-subject")&&(this.parent.element.querySelector(".e-event-create").click(),e.preventDefault());else if(t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells")){this.parent.activeCellsData=this.getSelectedElements(t);var i=sf.base.extend(this.parent.activeCellsData,{cancel:!1,event:e});this.parent.notify("cellClick",i)}else{if(!(t.classList.contains("e-appointment")||t.classList.contains("e-more-event-close")||t.classList.contains("e-all-day-appointment-section")||t.classList.contains("e-more-indicator")))return t.classList.contains("e-header-date")?(this.parent.setScheduleProperties({selectedDate:this.parent.getDateFromElement(t)}),this.parent.changeView(this.parent.getNavigateView(),e),void this.processEscape()):void 0;t.click()}}},e.prototype.getSelectedElements=function(e){var t;if(this.selectedCells.length>1&&e.classList.contains("e-selected-cell")){var i=this.parent.getCellDetails(this.selectedCells[0]),a=this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);i.endTime=a.endTime,i.element=e,t=i}else t=this.parent.getCellDetails(e);return t},e.prototype.getCells=function(e,t,i){var a=this.parent.getContentTable(),n=[].slice.call(a.querySelectorAll("td")),r=a.rows.length,s=a.rows[0].cells.length;if(t.classList.contains("e-all-day-cells")){var o=this.parent.getAllDayRow();n=[].slice.call(o.cells),r=1,s=o.cells.length}var l=n.indexOf(t),c=n.indexOf(i),p=[];if(e){for(var d=0;d<s;d++)for(var h=0;h<r;h++)p.push(n[s*h+d]);l=p.indexOf(t),c=p.indexOf(i)}if(l>c){var u=l;l=c,c=u}return(e?p:n).slice(l,c+1)},e.prototype.focusFirstCell=function(){if("Agenda"===this.parent.currentView){var e=this.parent.getContentTable().querySelector(".e-agenda-cells");return e.setAttribute("tabindex","0"),void e.focus()}if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.activeView.isTimelineView()){var t=this.parent.element.querySelector(".e-content-table tr:not(.e-hidden) .e-work-cells:not(.e-resource-group-cells)");this.selectCells(!1,t)}else this.selectCells(!1,this.parent.getWorkCellElements()[0])},e.prototype.isInverseTableSelect=function(){return this.parent.activeView.isInverseTableSelect},e.prototype.selectCells=function(e,t){var i=this;this.parent.removeSelectedClass();var a=t instanceof Array?t.slice(-1)[0]:t;if(e){var n,r=["Day","Week","WorkWeek","Month","TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth"],s={element:t,requestType:"mousemove",allowMultipleRow:!0};this.parent.trigger("select",s,(function(e){(!e.allowMultipleRow||!i.parent.allowMultiRowSelection)&&r.indexOf(i.parent.currentView)>-1&&(a=a.parentElement.children[i.initialTarget.cellIndex]);var t=i.getCells(i.isInverseTableSelect(),i.initialTarget,a);if(i.parent.activeViewOptions.group.resources.length>0){n=i.initialTarget.getAttribute("data-group-index");for(var s=[],o=0,l=t;o<l.length;o++){(u=l[o]).getAttribute("data-group-index")===n&&s.push(u)}t=s}if(i.parent.allowMultiCellSelection||(t=[i.initialTarget]),i.selectedCells=t,t.length>2&&!a.classList.contains("e-all-day-cells")){var c=i.getAllDayCells(t);if(i.parent.activeViewOptions.group.resources.length>0){for(var p=[],d=0,h=c;d<h.length;d++){var u;(u=h[d]).getAttribute("data-group-index")===n&&p.push(u)}c=p}t=t.concat(c)}a.getAttribute("data-group-index")!==n&&i.parent.activeViewOptions.group.resources.length>0&&(a=i.selectedCells[i.selectedCells.length-1]),i.parent.addSelectedClass(t,a)}))}else this.initialTarget=a,this.selectedCells=[a],this.parent.addSelectedClass([a],a)},e.prototype.selectAppointment=function(e,t){var i=this.getAppointmentElements();if(!(i.length<0)){var a;if(this.parent.eventBase.removeSelectedAppointmentClass(),t.classList.contains("e-appointment")){var n=i.indexOf(t);a=i[e?n-1:n+1]}else a=e?i[i.length-1]:i[0];a&&(this.parent.eventBase.addSelectedAppointments([a]),a.focus(),sf.base.addClass([a],"e-active-appointment-agenda"))}},e.prototype.selectAppointmentElementFromWorkCell=function(e,t){var i=this;if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.removeSelectedClass(),t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells")){var a=this.getUniqueAppointmentElements(),n=[],r=this.parent.getDateFromElement(t).getTime();if(this.parent.eventsProcessed.filter((function(t){return e?t[i.parent.eventFields.startTime].getTime()<=r:t[i.parent.eventFields.startTime].getTime()>=r})).filter((function(e){a.filter((function(t){JSON.stringify(e.Guid)===JSON.stringify(t.getAttribute("data-guid"))&&n.push(t)}))})),n.length>0){var s=e?n[n.length-1]:n[0],o=this.getAppointmentElementsByGuid(s.getAttribute("data-guid"));this.parent.eventBase.addSelectedAppointments(o),o[o.length-1].focus()}}},e.prototype.getAllDayCells=function(e){var t=this.parent.getAllDayRow();if(!t)return[];var i=e[0],a=e[e.length-1],n=this.parent.getCellDetails(i);return this.parent.getCellDetails(a).endTime.getTime()-n.startTime.getTime()>=864e5?[].slice.call(t.cells).slice(i.cellIndex,a.cellIndex+1):[]},e.prototype.getAppointmentElements=function(){return[].slice.call(this.parent.element.querySelectorAll(".e-appointment"))},e.prototype.getAppointmentElementsByGuid=function(e){return[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+e+'"]'))},e.prototype.getUniqueAppointmentElements=function(){var e=this.getAppointmentElements(),t=[];return e.map((function(e){return e.getAttribute("data-guid")})).filter((function(i,a,n){n.indexOf(i)===a&&t.push(e[a])})),t},e.prototype.getWorkCellFromAppointmentElement=function(e){var t=this.parent.eventBase.getEventByGuid(e.getAttribute("data-guid"));return this.parent.eventBase.selectWorkCellByTime([t])},e.prototype.processViewNavigation=function(e){var t=parseInt(e.key,10)-1;if(t<this.parent.views.length){var i=this.parent.viewCollections[t].option;this.parent.changeView(i,e,void 0,t),this.parent.headerModule&&this.parent.headerModule.element.querySelector(".e-active-view button").focus()}},e.prototype.processUp=function(e,t){if(!t||!this.parent.activeView.isTimelineView()&&"MonthAgenda"!==this.parent.currentView){var i=e.target,a=this.parent.getSelectedElements(),n=this.parent.eventBase.getSelectedAppointments(),r=this.parent.element.querySelector(".e-more-popup-wrapper"),s=this.getQuickPopupElement();if(a.length>0&&!e.target.classList.contains("e-work-cells")&&(i=a[a.length-1]),n.length>0&&!r.classList.contains(I)&&!s.classList.contains(I)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)&&(i=this.getWorkCellFromAppointmentElement(n[n.length-1]),this.parent.eventBase.removeSelectedAppointmentClass()),i)if(i.classList.contains("e-work-cells")&&!this.parent.element.querySelector("."+I)){var o=this.parent.getTableRows(),l=o.indexOf(i.parentElement);l>0&&l<o.length&&this.selectCells(t,o[l-1].cells[i.cellIndex])}else"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||this.selectAppointment(!0,i)}},e.prototype.processDown=function(e,t){if(!t||!this.parent.activeView.isTimelineView()&&"MonthAgenda"!==this.parent.currentView){var i=e.target,a=this.parent.getSelectedElements(),n=this.parent.eventBase.getSelectedAppointments(),r=this.parent.element.querySelector(".e-more-popup-wrapper"),s=this.getQuickPopupElement();a.length>0&&!e.target.classList.contains("e-work-cells")&&(i=a[a.length-1]),n.length>0&&!r.classList.contains(I)&&!s.classList.contains(I)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.currentView)&&(i=this.getWorkCellFromAppointmentElement(n[n.length-1]),this.parent.eventBase.removeSelectedAppointmentClass());var o=this.parent.getTableRows();if(i)if(i.classList.contains("e-work-cells")&&!this.parent.element.querySelector("."+I)){var l=o.indexOf(i.parentElement);l>=0&&l<o.length-1&&this.selectCells(t,o[l+1].cells[i.cellIndex])}else"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||this.selectAppointment(!1,i)}},e.prototype.processLeftRight=function(e){var t=this.parent.getContentTable(),i=e.parentNode.sectionRowIndex;return{element:t,rowIndex:i,columnIndex:e.cellIndex,maxIndex:t.rows[i].cells.length}},e.prototype.getQuickPopupElement=function(){return(this.parent.isAdaptive?document.body:this.parent.element).querySelector(".e-quick-popup-wrapper")},e.prototype.isCancelLeftRightAction=function(e,t){if("Agenda"===this.parent.currentView||t&&"MonthAgenda"===this.parent.currentView)return!0;if(this.isPreventAction(e)&&t)return!0;var i=this.parent.element.querySelector(".e-more-popup-wrapper"),a=this.getQuickPopupElement();return!(!i.classList.contains(I)&&!a.classList.contains(I))},e.prototype.processRight=function(e,t){if(!this.isCancelLeftRightAction(e,t)){var i,a=this.parent.getSelectedElements(),n=this.parent.eventBase.getSelectedAppointments(),r=e.target;if(a.length>0&&!r.classList.contains("e-work-cells")&&!r.classList.contains("e-all-day-cells")&&(r=a[a.length-1]),!(n.length>0)||(r=this.getWorkCellFromAppointmentElement(n[n.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),r))if(r.classList.contains("e-work-cells")&&e.target.classList.contains("e-work-cells")){var s=this.processLeftRight(r);if(s.columnIndex>=0&&s.columnIndex<s.maxIndex-1)i=this.calculateNextPrevDate(r,s.element.rows[s.rowIndex].cells[r.cellIndex+1],"right"),sf.base.isNullOrUndefined(i)||this.selectCells(t,i);else if(s.columnIndex===s.maxIndex-1)if(!this.isInverseTableSelect()&&s.rowIndex<s.element.rows.length-1)i=this.calculateNextPrevDate(r,s.element.rows[s.rowIndex+1].cells[0],"right"),sf.base.isNullOrUndefined(i)||this.selectCells(t,i);else if(!t){var o=this.isInverseTableSelect()?s.rowIndex:0;this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e);var l=this.parent.getContentTable();this.selectCells(!1,l.rows[o].cells[0])}}else if(r.classList.contains("e-all-day-cells")){var c=r.cellIndex,p=this.parent.getAllDayRow(),d=p.cells.length;if(c>=0&&c<d-1)this.selectCells(t,p.cells[c+1]);else if(c===d-1&&!t){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"),e);var h=this.parent.getAllDayRow();this.selectCells(!1,h.cells[0])}}}},e.prototype.processLeft=function(e,t){if(!this.isCancelLeftRightAction(e,t)){var i,a=e.target,n=this.parent.getSelectedElements();n.length>0&&!a.classList.contains("e-work-cells")&&!a.classList.contains("e-all-day-cells")&&(a=n[n.length-1]);var r=this.parent.eventBase.getSelectedAppointments();if(!(r.length>0)||(a=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),a))if(e.target.classList.contains("e-work-cells")&&a.classList.contains("e-work-cells")){var s=this.processLeftRight(a);if(s.columnIndex>0&&s.columnIndex<s.maxIndex)i=this.calculateNextPrevDate(a,s.element.rows[s.rowIndex].cells[a.cellIndex-1],"left"),sf.base.isNullOrUndefined(i)||this.selectCells(t,i);else if(0===s.columnIndex)if(!this.isInverseTableSelect()&&s.rowIndex>0)i=this.calculateNextPrevDate(a,s.element.rows[s.rowIndex-1].cells[s.maxIndex-1],"left"),sf.base.isNullOrUndefined(i)||this.selectCells(t,i);else if(!t){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e);var o=this.parent.getContentTable(),l=this.isInverseTableSelect()?s.rowIndex:o.rows.length-1;this.selectCells(!1,o.rows[l].cells[s.maxIndex-1])}}else if(a.classList.contains("e-all-day-cells")){var c=a.cellIndex,p=this.parent.getAllDayRow(),d=p.cells.length;if(c>0&&c<d)this.selectCells(t,p.cells[c-1]);else if(0===c&&!t){this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"),e);var h=this.parent.getAllDayRow();this.selectCells(!1,h.cells[d-1])}}}},e.prototype.calculateNextPrevDate=function(e,t,i){var a=this.initialTarget.getAttribute("data-group-index");if(this.parent.activeViewOptions.group.resources.length>0&&"Month"===this.parent.currentView&&e&&t&&t.getAttribute("data-group-index")!==a){var n=this.parent.getDateFromElement(e),r="right"===i?new Date(n.setDate(n.getDate()+1)):new Date(n.setDate(n.getDate()-1));t=[].slice.call(this.parent.element.querySelectorAll('td[data-date="'+this.parent.getMsFromDate(r).toString()+'"][data-group-index="'+a+'"]'))[0]}return t},e.prototype.getFocusableElements=function(e){return[].slice.call(e.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'))},e.prototype.processTabOnPopup=function(e,t){var i=this,a=this.getFocusableElements(t),n=(a=a.filter((function(e){var t=i.parent.element.querySelector(".e-popup-footer");return t&&t.offsetParent?!(e.classList.contains("e-edit")||e.classList.contains("e-delete")):!(e.classList.contains("e-event-edit")||e.classList.contains("e-event-delete"))})))[0],r=a[a.length-1];sf.base.isNullOrUndefined(r)||document.activeElement!==r||e.shiftKey||(e.preventDefault(),n.focus()),!sf.base.isNullOrUndefined(n)&&document.activeElement===n&&e.shiftKey&&(e.preventDefault(),r.focus())},e.prototype.processTab=function(e,t){var i=e.target,a=sf.base.closest(i,".e-quick-popup-wrapper,.e-more-popup-wrapper");if(a&&a.classList.contains(I))return a.classList.contains("e-more-popup-wrapper")&&this.parent.eventBase.removeSelectedAppointmentClass(),void this.processTabOnPopup(e,a);if(i.classList.contains(H))this.parent.eventBase.removeSelectedAppointmentClass();else{if(!i.classList.contains("e-appointment")){var n=this.parent.getSelectedElements();return n.length>0&&!i.classList.contains("e-appointment")?(i=n[n.length-1],this.selectAppointmentElementFromWorkCell(t,i),void e.preventDefault()):void 0}var r=[].slice.call(this.parent.element.querySelectorAll(".e-appointment")),s=this.parent.eventBase.getSelectedAppointments();if(s.length>0&&(i=s[s.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!t&&i.getAttribute("data-guid")===r[r.length-1].getAttribute("data-guid")||t&&i.getAttribute("data-guid")===r[0].getAttribute("data-guid"))return;"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||(this.selectAppointment(t,i),e.preventDefault())}},e.prototype.processDelete=function(e){var t=document.activeElement;if("MonthAgenda"===this.parent.currentView){var i=this.parent.eventBase.getSelectedEvents().element;t=i&&sf.base.isNullOrUndefined(i.length)?i:i[0]}if(t&&t.classList.contains("e-appointment")){if(sf.base.addClass([t],"e-appointment-border"),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),this.parent.activeViewOptions.readonly||t.classList.contains("e-read-only"))return;this.parent.quickPopup.deleteClick()}},e.prototype.processEscape=function(){this.parent.quickPopup.onClosePopup(),this.parent.quickPopup.morePopup.hide(),this.parent.headerModule&&this.parent.headerModule.hideHeaderPopup()},e.prototype.isPreventAction=function(e){var t=sf.base.closest(e.target,".e-resource-group-cells");return!(!this.parent.activeView.isTimelineView()||sf.base.isNullOrUndefined(t))},e.prototype.getModuleName=function(){return"keyboard"},e.prototype.destroy=function(){this.removeEventListener(),this.keyboardModule.destroy()},e}(),z=function(){function e(e,t){this.initDataManager(e,t)}return e.prototype.initDataManager=function(e,t){this.dataManager=e instanceof sf.data.DataManager?e:new sf.data.DataManager(e),this.query=t instanceof sf.data.Query?t:new sf.data.Query},e.prototype.generateQuery=function(e,t){var i=this.query.clone();return e&&i.addParams("StartDate",e.toISOString()),t&&i.addParams("EndDate",t.toISOString()),i},e.prototype.getData=function(e){return this.dataManager.executeQuery(e)},e}(),_=function(){function e(){}return e.prototype.firstDateOfMonth=function(e){return new Date(e.getFullYear(),e.getMonth())},e.prototype.lastDateOfMonth=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)},e.prototype.isMonthStart=function(e){return 1===e.getDate()},e.prototype.getLeapYearDaysCount=function(){return 366},e.prototype.getYearDaysCount=function(e,t){return(e.getFullYear()+t)%4==0?366:365},e.prototype.getDate=function(e){return e.getDate()},e.prototype.getMonth=function(e){return e.getMonth()+1},e.prototype.getFullYear=function(e){return e.getFullYear()},e.prototype.getYearLastDate=function(e,t){return new Date(e.getFullYear()+t,0,0)},e.prototype.getMonthDaysCount=function(e){return this.lastDateOfMonth(e).getDate()},e.prototype.getMonthStartDate=function(e){return new Date(e.getFullYear(),e.getMonth(),1,e.getHours(),e.getMinutes())},e.prototype.getMonthEndDate=function(e){return e.setDate(1),new Date(e.setMonth(e.getMonth()+1))},e.prototype.getExpectedDays=function(e,t){return t},e.prototype.setDate=function(e,t){e.setDate(t)},e.prototype.setValidDate=function(e,t,i,a,n){sf.base.isNullOrUndefined(n)?e.setMonth(e.getMonth()+t,i):e.setMonth((n?a:e.getMonth())+t)},e.prototype.setMonth=function(e,t,i){e.setFullYear(e.getFullYear()),e.setMonth(t-1),e.setDate(i)},e.prototype.addYears=function(e,t){e.setFullYear(e.getFullYear()+t)},e.prototype.isSameMonth=function(e,t){return e.getMonth()===t.getMonth()},e.prototype.checkMonth=function(e,t){return-1===t.indexOf(e.getMonth()+1)},e.prototype.compareMonth=function(e,t){return e.getMonth()>t.getMonth()},e.prototype.isSameYear=function(e,t){return e.getFullYear()===t.getFullYear()},e.prototype.isLastMonth=function(e){return 11===e.getMonth()},e.prototype.isLeapYear=function(e,t){return(e+t)%4==0},e}(),Y=function(){function e(){}return e.prototype.firstDateOfMonth=function(e){var t=sf.base.HijriParser.getHijriDate(e);return sf.base.HijriParser.toGregorian(t.year,t.month,1)},e.prototype.lastDateOfMonth=function(e){var t=this.getHijriDate(e),i=sf.base.HijriParser.toGregorian(t.year,t.month,this.getDaysInMonth(t.month,t.year)),a=new Date(i.getTime());new Date(a.setDate(a.getDate()+1));var n=this.getHijriDate(a);return t.month===n.month?a:(n=sf.base.HijriParser.getHijriDate(i),t.month===n.month?i:new Date(i.setDate(i.getDate()-1)))},e.prototype.isMonthStart=function(e){return 1===this.getHijriDate(e).date},e.prototype.getLeapYearDaysCount=function(){return 355},e.prototype.getYearDaysCount=function(e,t){var i=this.getHijriDate(e);return this.isLeapYear(i.year,t)?355:354},e.prototype.getDate=function(e){return this.getHijriDate(e).date},e.prototype.getMonth=function(e){return this.getHijriDate(e).month},e.prototype.getFullYear=function(e){return this.getHijriDate(e).year},e.prototype.getYearLastDate=function(e,t){var i=sf.base.HijriParser.getHijriDate(e);return sf.base.HijriParser.toGregorian(i.year+t,1,0)},e.prototype.getMonthDaysCount=function(e){var t=this.lastDateOfMonth(e);return this.getHijriDate(t).date},e.prototype.getMonthStartDate=function(e){var t=this.firstDateOfMonth(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes())},e.prototype.getMonthEndDate=function(e){var t=this.lastDateOfMonth(e);return t.setDate(t.getDate()+1),new Date(t.setMonth(t.getMonth()))},e.prototype.getExpectedDays=function(e,t){for(var i=this.getHijriDate(e),a=[],n=0;n<t.length;n++){var r=sf.base.HijriParser.toGregorian(i.year,i.month,t[n]);a.push(r.getDate())}return a},e.prototype.setDate=function(e,t){var i=sf.base.HijriParser.getHijriDate(e),a=sf.base.HijriParser.toGregorian(i.year,i.month,t);this.updateDateObj(e,a)},e.prototype.setValidDate=function(e,t,i,a,n){var r=sf.base.isNullOrUndefined(n)?e:this.firstDateOfMonth(n),s=sf.base.HijriParser.getHijriDate(r),o=sf.base.HijriParser.toGregorian(s.year,s.month+t,i);this.updateDateObj(e,o)},e.prototype.setMonth=function(e,t,i){var a=sf.base.HijriParser.getHijriDate(e),n=sf.base.HijriParser.toGregorian(a.year,t,i);this.updateDateObj(e,n)},e.prototype.addYears=function(e,t,i){var a=sf.base.HijriParser.getHijriDate(e),n=sf.base.HijriParser.toGregorian(a.year+t,i,1);this.updateDateObj(e,n)},e.prototype.isSameMonth=function(e,t){var i=this.getHijriDate(e),a=this.getHijriDate(t);return i.month===a.month},e.prototype.checkMonth=function(e,t){var i=this.getHijriDate(e);return-1===t.indexOf(i.month)},e.prototype.compareMonth=function(e,t){var i=this.getHijriDate(e),a=this.getHijriDate(t);return i.month>a.month},e.prototype.isSameYear=function(e,t){var i=this.getHijriDate(e),a=this.getHijriDate(t);return i.year===a.year},e.prototype.isLastMonth=function(e){return 12===this.getHijriDate(e).month},e.prototype.updateDateObj=function(e,t){e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())},e.prototype.isLeapYear=function(e,t){return(14+11*(e+t))%30<11},e.prototype.getDaysInMonth=function(e,t){var i=0;return i=29+(e+1)%2,11===e&&this.isLeapYear(t,0)&&i++,i},e.prototype.getHijriDate=function(e){return sf.base.HijriParser.getHijriDate(e)},e}(),G=function(){function e(){}return e.prototype.offset=function(e,t){var i=e.getTimezoneOffset();try{var a=new Date(e.toLocaleString("en-US",{timeZone:t}));return isNaN(a.getTime())?0:(e.getTime()-a.getTime())/6e4+i}catch(e){return 0}},e.prototype.convert=function(e,t,i){"string"==typeof t&&(t=this.offset(e,t)),"string"==typeof i&&(i=this.offset(e,i));var a=e.getTimezoneOffset(),n=(e=new Date(e.getTime()+6e4*(t-i))).getTimezoneOffset();return new Date(e.getTime()+6e4*(n-a))},e.prototype.add=function(e,t){return this.convert(e,e.getTimezoneOffset(),t)},e.prototype.remove=function(e,t){return this.convert(e,t,e.getTimezoneOffset())},e.prototype.removeLocalOffset=function(e){return new Date(+e-6e4*e.getTimezoneOffset())},e.prototype.getLocalTimezoneName=function(){return window.Intl&&Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"},e}(),Q=[{Value:"Pacific/Niue",Text:"(UTC-11:00) Niue"},{Value:"Pacific/Pago_Pago",Text:"(UTC-11:00) Pago Pago"},{Value:"Pacific/Honolulu",Text:"(UTC-10:00) Hawaii Time"},{Value:"Pacific/Rarotonga",Text:"(UTC-10:00) Rarotonga"},{Value:"Pacific/Tahiti",Text:"(UTC-10:00) Tahiti"},{Value:"Pacific/Marquesas",Text:"(UTC-09:30) Marquesas"},{Value:"America/Anchorage",Text:"(UTC-09:00) Alaska Time"},{Value:"Pacific/Gambier",Text:"(UTC-09:00) Gambier"},{Value:"America/Los_Angeles",Text:"(UTC-08:00) Pacific Time"},{Value:"America/Tijuana",Text:"(UTC-08:00) Pacific Time - Tijuana"},{Value:"America/Vancouver",Text:"(UTC-08:00) Pacific Time - Vancouver"},{Value:"America/Whitehorse",Text:"(UTC-08:00) Pacific Time - Whitehorse"},{Value:"Pacific/Pitcairn",Text:"(UTC-08:00) Pitcairn"},{Value:"America/Denver",Text:"(UTC-07:00) Mountain Time"},{Value:"America/Phoenix",Text:"(UTC-07:00) Mountain Time - Arizona"},{Value:"America/Mazatlan",Text:"(UTC-07:00) Mountain Time - Chihuahua, Mazatlan"},{Value:"America/Dawson_Creek",Text:"(UTC-07:00) Mountain Time - Dawson Creek"},{Value:"America/Edmonton",Text:"(UTC-07:00) Mountain Time - Edmonton"},{Value:"America/Hermosillo",Text:"(UTC-07:00) Mountain Time - Hermosillo"},{Value:"America/Yellowknife",Text:"(UTC-07:00) Mountain Time - Yellowknife"},{Value:"America/Belize",Text:"(UTC-06:00) Belize"},{Value:"America/Chicago",Text:"(UTC-06:00) Central Time"},{Value:"America/Mexico_City",Text:"(UTC-06:00) Central Time - Mexico City"},{Value:"America/Regina",Text:"(UTC-06:00) Central Time - Regina"},{Value:"America/Tegucigalpa",Text:"(UTC-06:00) Central Time - Tegucigalpa"},{Value:"America/Winnipeg",Text:"(UTC-06:00) Central Time - Winnipeg"},{Value:"America/Costa_Rica",Text:"(UTC-06:00) Costa Rica"},{Value:"America/El_Salvador",Text:"(UTC-06:00) El Salvador"},{Value:"Pacific/Galapagos",Text:"(UTC-06:00) Galapagos"},{Value:"America/Guatemala",Text:"(UTC-06:00) Guatemala"},{Value:"America/Managua",Text:"(UTC-06:00) Managua"},{Value:"America/Cancun",Text:"(UTC-05:00) America Cancun"},{Value:"America/Bogota",Text:"(UTC-05:00) Bogota"},{Value:"Pacific/Easter",Text:"(UTC-05:00) Easter Island"},{Value:"America/New_York",Text:"(UTC-05:00) Eastern Time"},{Value:"America/Iqaluit",Text:"(UTC-05:00) Eastern Time - Iqaluit"},{Value:"America/Toronto",Text:"(UTC-05:00) Eastern Time - Toronto"},{Value:"America/Guayaquil",Text:"(UTC-05:00) Guayaquil"},{Value:"America/Havana",Text:"(UTC-05:00) Havana"},{Value:"America/Jamaica",Text:"(UTC-05:00) Jamaica"},{Value:"America/Lima",Text:"(UTC-05:00) Lima"},{Value:"America/Nassau",Text:"(UTC-05:00) Nassau"},{Value:"America/Panama",Text:"(UTC-05:00) Panama"},{Value:"America/Port-au-Prince",Text:"(UTC-05:00) Port-au-Prince"},{Value:"America/Rio_Branco",Text:"(UTC-05:00) Rio Branco"},{Value:"America/Halifax",Text:"(UTC-04:00) Atlantic Time - Halifax"},{Value:"America/Barbados",Text:"(UTC-04:00) Barbados"},{Value:"Atlantic/Bermuda",Text:"(UTC-04:00) Bermuda"},{Value:"America/Boa_Vista",Text:"(UTC-04:00) Boa Vista"},{Value:"America/Caracas",Text:"(UTC-04:00) Caracas"},{Value:"America/Curacao",Text:"(UTC-04:00) Curacao"},{Value:"America/Grand_Turk",Text:"(UTC-04:00) Grand Turk"},{Value:"America/Guyana",Text:"(UTC-04:00) Guyana"},{Value:"America/La_Paz",Text:"(UTC-04:00) La Paz"},{Value:"America/Manaus",Text:"(UTC-04:00) Manaus"},{Value:"America/Martinique",Text:"(UTC-04:00) Martinique"},{Value:"America/Port_of_Spain",Text:"(UTC-04:00) Port of Spain"},{Value:"America/Porto_Velho",Text:"(UTC-04:00) Porto Velho"},{Value:"America/Puerto_Rico",Text:"(UTC-04:00) Puerto Rico"},{Value:"America/Santo_Domingo",Text:"(UTC-04:00) Santo Domingo"},{Value:"America/Thule",Text:"(UTC-04:00) Thule"},{Value:"America/St_Johns",Text:"(UTC-03:30) Newfoundland Time - St. Johns"},{Value:"America/Araguaina",Text:"(UTC-03:00) Araguaina"},{Value:"America/Asuncion",Text:"(UTC-03:00) Asuncion"},{Value:"America/Belem",Text:"(UTC-03:00) Belem"},{Value:"America/Argentina/Buenos_Aires",Text:"(UTC-03:00) Buenos Aires"},{Value:"America/Campo_Grande",Text:"(UTC-03:00) Campo Grande"},{Value:"America/Cayenne",Text:"(UTC-03:00) Cayenne"},{Value:"America/Cuiaba",Text:"(UTC-03:00) Cuiaba"},{Value:"America/Fortaleza",Text:"(UTC-03:00) Fortaleza"},{Value:"America/Godthab",Text:"(UTC-03:00) Godthab"},{Value:"America/Maceio",Text:"(UTC-03:00) Maceio"},{Value:"America/Miquelon",Text:"(UTC-03:00) Miquelon"},{Value:"America/Montevideo",Text:"(UTC-03:00) Montevideo"},{Value:"Antarctica/Palmer",Text:"(UTC-03:00) Palmer"},{Value:"America/Paramaribo",Text:"(UTC-03:00) Paramaribo"},{Value:"America/Punta_Arenas",Text:"(UTC-03:00) Punta Arenas"},{Value:"America/Recife",Text:"(UTC-03:00) Recife"},{Value:"Antarctica/Rothera",Text:"(UTC-03:00) Rothera"},{Value:"America/Bahia",Text:"(UTC-03:00) Salvador"},{Value:"America/Santiago",Text:"(UTC-03:00) Santiago"},{Value:"Atlantic/Stanley",Text:"(UTC-03:00) Stanley"},{Value:"America/Noronha",Text:"(UTC-02:00) Noronha"},{Value:"America/Sao_Paulo",Text:"(UTC-02:00) Sao Paulo"},{Value:"Atlantic/South_Georgia",Text:"(UTC-02:00) South Georgia"},{Value:"Atlantic/Azores",Text:"(UTC-01:00) Azores"},{Value:"Atlantic/Cape_Verde",Text:"(UTC-01:00) Cape Verde"},{Value:"America/Scoresbysund",Text:"(UTC-01:00) Scoresbysund"},{Value:"Africa/Abidjan",Text:"(UTC+00:00) Abidjan"},{Value:"Africa/Accra",Text:"(UTC+00:00) Accra"},{Value:"Africa/Bissau",Text:"(UTC+00:00) Bissau"},{Value:"Atlantic/Canary",Text:"(UTC+00:00) Canary Islands"},{Value:"Africa/Casablanca",Text:"(UTC+00:00) Casablanca"},{Value:"America/Danmarkshavn",Text:"(UTC+00:00) Danmarkshavn"},{Value:"Europe/Dublin",Text:"(UTC+00:00) Dublin"},{Value:"Africa/El_Aaiun",Text:"(UTC+00:00) El Aaiun"},{Value:"Atlantic/Faroe",Text:"(UTC+00:00) Faeroe"},{Value:"Etc/UTC",Text:"(UTC+00:00) UTC (no daylight saving)"},{Value:"Europe/Lisbon",Text:"(UTC+00:00) Lisbon"},{Value:"Europe/London",Text:"(UTC+00:00) London"},{Value:"Africa/Monrovia",Text:"(UTC+00:00) Monrovia"},{Value:"Atlantic/Reykjavik",Text:"(UTC+00:00) Reykjavik"},{Value:"UTC",Text:"UTC"},{Value:"Africa/Algiers",Text:"(UTC+01:00) Algiers"},{Value:"Europe/Amsterdam",Text:"(UTC+01:00) Amsterdam"},{Value:"Europe/Andorra",Text:"(UTC+01:00) Andorra"},{Value:"Europe/Berlin",Text:"(UTC+01:00) Berlin"},{Value:"Europe/Brussels",Text:"(UTC+01:00) Brussels"},{Value:"Europe/Budapest",Text:"(UTC+01:00) Budapest"},{Value:"Europe/Belgrade",Text:"(UTC+01:00) Central European Time - Belgrade"},{Value:"Europe/Prague",Text:"(UTC+01:00) Central European Time - Prague"},{Value:"Africa/Ceuta",Text:"(UTC+01:00) Ceuta"},{Value:"Europe/Copenhagen",Text:"(UTC+01:00) Copenhagen"},{Value:"Europe/Gibraltar",Text:"(UTC+01:00) Gibraltar"},{Value:"Africa/Lagos",Text:"(UTC+01:00) Lagos"},{Value:"Europe/Luxembourg",Text:"(UTC+01:00) Luxembourg"},{Value:"Europe/Madrid",Text:"(UTC+01:00) Madrid"},{Value:"Europe/Malta",Text:"(UTC+01:00) Malta"},{Value:"Europe/Monaco",Text:"(UTC+01:00) Monaco"},{Value:"Africa/Ndjamena",Text:"(UTC+01:00) Ndjamena"},{Value:"Europe/Oslo",Text:"(UTC+01:00) Oslo"},{Value:"Europe/Paris",Text:"(UTC+01:00) Paris"},{Value:"Europe/Rome",Text:"(UTC+01:00) Rome"},{Value:"Europe/Stockholm",Text:"(UTC+01:00) Stockholm"},{Value:"Europe/Tirane",Text:"(UTC+01:00) Tirane"},{Value:"Africa/Tunis",Text:"(UTC+01:00) Tunis"},{Value:"Europe/Vienna",Text:"(UTC+01:00) Vienna"},{Value:"Europe/Warsaw",Text:"(UTC+01:00) Warsaw"},{Value:"Europe/Zurich",Text:"(UTC+01:00) Zurich"},{Value:"Asia/Amman",Text:"(UTC+02:00) Amman"},{Value:"Europe/Athens",Text:"(UTC+02:00) Athens"},{Value:"Asia/Beirut",Text:"(UTC+02:00) Beirut"},{Value:"Europe/Bucharest",Text:"(UTC+02:00) Bucharest"},{Value:"Africa/Cairo",Text:"(UTC+02:00) Cairo"},{Value:"Europe/Chisinau",Text:"(UTC+02:00) Chisinau"},{Value:"Asia/Damascus",Text:"(UTC+02:00) Damascus"},{Value:"Asia/Gaza",Text:"(UTC+02:00) Gaza"},{Value:"Europe/Helsinki",Text:"(UTC+02:00) Helsinki"},{Value:"Asia/Jerusalem",Text:"(UTC+02:00) Jerusalem"},{Value:"Africa/Johannesburg",Text:"(UTC+02:00) Johannesburg"},{Value:"Africa/Khartoum",Text:"(UTC+02:00) Khartoum"},{Value:"Europe/Kiev",Text:"(UTC+02:00) Kiev"},{Value:"Africa/Maputo",Text:"(UTC+02:00) Maputo"},{Value:"Europe/Kaliningrad",Text:"(UTC+02:00) Moscow-01 - Kaliningrad"},{Value:"Asia/Nicosia",Text:"(UTC+02:00) Nicosia"},{Value:"Europe/Riga",Text:"(UTC+02:00) Riga"},{Value:"Europe/Sofia",Text:"(UTC+02:00) Sofia"},{Value:"Europe/Tallinn",Text:"(UTC+02:00) Tallinn"},{Value:"Africa/Tripoli",Text:"(UTC+02:00) Tripoli"},{Value:"Europe/Vilnius",Text:"(UTC+02:00) Vilnius"},{Value:"Africa/Windhoek",Text:"(UTC+02:00) Windhoek"},{Value:"Asia/Baghdad",Text:"(UTC+03:00) Baghdad"},{Value:"Europe/Istanbul",Text:"(UTC+03:00) Istanbul"},{Value:"Europe/Minsk",Text:"(UTC+03:00) Minsk"},{Value:"Europe/Moscow",Text:"(UTC+03:00) Moscow+00 - Moscow"},{Value:"Africa/Nairobi",Text:"(UTC+03:00) Nairobi"},{Value:"Asia/Qatar",Text:"(UTC+03:00) Qatar"},{Value:"Asia/Riyadh",Text:"(UTC+03:00) Riyadh"},{Value:"Antarctica/Syowa",Text:"(UTC+03:00) Syowa"},{Value:"Asia/Tehran",Text:"(UTC+03:30) Tehran"},{Value:"Asia/Baku",Text:"(UTC+04:00) Baku"},{Value:"Asia/Dubai",Text:"(UTC+04:00) Dubai"},{Value:"Indian/Mahe",Text:"(UTC+04:00) Mahe"},{Value:"Indian/Mauritius",Text:"(UTC+04:00) Mauritius"},{Value:"Europe/Samara",Text:"(UTC+04:00) Moscow+01 - Samara"},{Value:"Indian/Reunion",Text:"(UTC+04:00) Reunion"},{Value:"Asia/Tbilisi",Text:"(UTC+04:00) Tbilisi"},{Value:"Asia/Yerevan",Text:"(UTC+04:00) Yerevan"},{Value:"Asia/Kabul",Text:"(UTC+04:30) Kabul"},{Value:"Asia/Aqtau",Text:"(UTC+05:00) Aqtau"},{Value:"Asia/Aqtobe",Text:"(UTC+05:00) Aqtobe"},{Value:"Asia/Ashgabat",Text:"(UTC+05:00) Ashgabat"},{Value:"Asia/Dushanbe",Text:"(UTC+05:00) Dushanbe"},{Value:"Asia/Karachi",Text:"(UTC+05:00) Karachi"},{Value:"Indian/Kerguelen",Text:"(UTC+05:00) Kerguelen"},{Value:"Indian/Maldives",Text:"(UTC+05:00) Maldives"},{Value:"Antarctica/Mawson",Text:"(UTC+05:00) Mawson"},{Value:"Asia/Yekaterinburg",Text:"(UTC+05:00) Moscow+02 - Yekaterinburg"},{Value:"Asia/Tashkent",Text:"(UTC+05:00) Tashkent"},{Value:"Asia/Colombo",Text:"(UTC+05:30) Colombo"},{Value:"Asia/Kolkata",Text:"(UTC+05:30) India Standard Time"},{Value:"Asia/Katmandu",Text:"(UTC+05:45) Katmandu"},{Value:"Asia/Almaty",Text:"(UTC+06:00) Almaty"},{Value:"Asia/Bishkek",Text:"(UTC+06:00) Bishkek"},{Value:"Indian/Chagos",Text:"(UTC+06:00) Chagos"},{Value:"Asia/Dhaka",Text:"(UTC+06:00) Dhaka"},{Value:"Asia/Omsk",Text:"(UTC+06:00) Moscow+03 - Omsk"},{Value:"Asia/Thimphu",Text:"(UTC+06:00) Thimphu"},{Value:"Antarctica/Vostok",Text:"(UTC+06:00) Vostok"},{Value:"Indian/Cocos",Text:"(UTC+06:30) Cocos"},{Value:"Asia/Yangon",Text:"(UTC+06:30) Rangoon"},{Value:"Asia/Bangkok",Text:"(UTC+07:00) Bangkok"},{Value:"Indian/Christmas",Text:"(UTC+07:00) Christmas"},{Value:"Antarctica/Davis",Text:"(UTC+07:00) Davis"},{Value:"Asia/Saigon",Text:"(UTC+07:00) Hanoi"},{Value:"Asia/Hovd",Text:"(UTC+07:00) Hovd"},{Value:"Asia/Jakarta",Text:"(UTC+07:00) Jakarta"},{Value:"Asia/Krasnoyarsk",Text:"(UTC+07:00) Moscow+04 - Krasnoyarsk"},{Value:"Asia/Brunei",Text:"(UTC+08:00) Brunei"},{Value:"Asia/Shanghai",Text:"(UTC+08:00) China Time - Beijing"},{Value:"Asia/Choibalsan",Text:"(UTC+08:00) Choibalsan"},{Value:"Asia/Hong_Kong",Text:"(UTC+08:00) Hong Kong"},{Value:"Asia/Kuala_Lumpur",Text:"(UTC+08:00) Kuala Lumpur"},{Value:"Asia/Macau",Text:"(UTC+08:00) Macau"},{Value:"Asia/Makassar",Text:"(UTC+08:00) Makassar"},{Value:"Asia/Manila",Text:"(UTC+08:00) Manila"},{Value:"Asia/Irkutsk",Text:"(UTC+08:00) Moscow+05 - Irkutsk"},{Value:"Asia/Singapore",Text:"(UTC+08:00) Singapore"},{Value:"Asia/Taipei",Text:"(UTC+08:00) Taipei"},{Value:"Asia/Ulaanbaatar",Text:"(UTC+08:00) Ulaanbaatar"},{Value:"Australia/Perth",Text:"(UTC+08:00) Western Time - Perth"},{Value:"Asia/Pyongyang",Text:"(UTC+08:30) Pyongyang"},{Value:"Asia/Dili",Text:"(UTC+09:00) Dili"},{Value:"Asia/Jayapura",Text:"(UTC+09:00) Jayapura"},{Value:"Asia/Yakutsk",Text:"(UTC+09:00) Moscow+06 - Yakutsk"},{Value:"Pacific/Palau",Text:"(UTC+09:00) Palau"},{Value:"Asia/Seoul",Text:"(UTC+09:00) Seoul"},{Value:"Asia/Tokyo",Text:"(UTC+09:00) Tokyo"},{Value:"Australia/Darwin",Text:"(UTC+09:30) Central Time - Darwin"},{Value:"Antarctica/DumontDUrville",Text:'(UTC+10:00) Dumont D"Urville'},{Value:"Australia/Brisbane",Text:"(UTC+10:00) Eastern Time - Brisbane"},{Value:"Pacific/Guam",Text:"(UTC+10:00) Guam"},{Value:"Asia/Vladivostok",Text:"(UTC+10:00) Moscow+07 - Vladivostok"},{Value:"Pacific/Port_Moresby",Text:"(UTC+10:00) Port Moresby"},{Value:"Pacific / Chuuk",Text:"(UTC+10:00) Truk"},{Value:"Australia/Adelaide",Text:"(UTC+10:30) Central Time - Adelaide"},{Value:"Antarctica/Casey",Text:"(UTC+11:00) Casey"},{Value:"Australia/Hobart",Text:"(UTC+11:00) Eastern Time - Hobart"},{Value:"Australia/Sydney",Text:"(UTC+11:00) Eastern Time - Melbourne, Sydney"},{Value:"Pacific/Efate",Text:"(UTC+11:00) Efate"},{Value:"Pacific/Guadalcanal",Text:"(UTC+11:00) Guadalcanal"},{Value:"Pacific/Kosrae",Text:"(UTC+11:00) Kosrae"},{Value:"Asia/Magadan",Text:"(UTC+11:00) Moscow+08 - Magadan"},{Value:"Pacific / Norfolk",Text:"(UTC+11:00) Norfolk"},{Value:"Pacific/Noumea",Text:"(UTC+11:00) Noumea"},{Value:"Pacific/Pohnpei",Text:"(UTC+11:00) Ponape"},{Value:"Pacific/Funafuti",Text:"(UTC+12:00) Funafuti"},{Value:"Pacific/Kwajalein",Text:"(UTC+12:00) Kwajalein"},{Value:"Pacific/Majuro",Text:"(UTC+12:00) Majuro"},{Value:"Asia/Kamchatka",Text:"(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy"},{Value:"Pacific / Nauru",Text:"(UTC+12:00) Nauru"},{Value:"Pacific/Tarawa",Text:"(UTC+12:00) Tarawa"},{Value:"Pacific/Wake",Text:"(UTC+12:00) Wake"},{Value:"Pacific/Wallis",Text:"(UTC+12:00) Wallis"},{Value:"Pacific/Auckland",Text:"(UTC+13:00) Auckland"},{Value:"Pacific/Enderbury",Text:"(UTC+13:00) Enderbury"},{Value:"Pacific/Fakaofo",Text:"(UTC+13:00) Fakaofo"},{Value:"Pacific/Fiji",Text:"(UTC+13:00) Fiji"},{Value:"Pacific/Tongatapu",Text:"(UTC+13:00) Tongatapu"},{Value:"Pacific/Apia",Text:"(UTC+14:00) Apia"},{Value:"Pacific/Kiritimati",Text:"(UTC+14:00) Kiritimati"}];function X(e,t,i,a){void 0===a&&(a="Gregorian");var n,r,s=ge(e),o=t.getConstant(je)+" ",l=a.toLowerCase();if("en"===i||"en-US"===i){var c=sf.base.isBlazor()?"months.abbreviated":"months.stand-alone.abbreviated",p=sf.base.isBlazor()?"days.abbreviated":"days.stand-alone.abbreviated";r=sf.base.getValue(c,sf.base.getDefaultDateObject(l)),n=sf.base.getValue(p,sf.base.getDefaultDateObject(l))}else{c=sf.base.isBlazor()?i+".dates.months.abbreviated":"main."+i+".dates.calendars."+l+".months.stand-alone.abbreviated",p=sf.base.isBlazor()?i+".dates.days.abbreviated":"main."+i+".dates.calendars."+l+".days.stand-alone.abbreviated";r=sf.base.getValue(c,sf.base.cldrData),n=sf.base.getValue(p,sf.base.cldrData)}switch(s.interval>1&&(o+=s.interval+" "),s.freq){case"DAILY":o+=t.getConstant(Le);break;case"WEEKLY":o+=t.getConstant(qe)+" "+t.getConstant(He)+" ",s.day.forEach((function(e,t){o+=P(sf.base.getValue(Fe[e],n),"single"),o+=s.day.length-1===t?"":", "}));break;case"MONTHLY":o+=t.getConstant(Be)+" "+t.getConstant(He)+" ",o+=K(s,n,t);break;case"YEARLY":o+=t.getConstant(Ne)+" "+t.getConstant(He)+" ",o+=P(sf.base.getValue(s.month[0].toString(),r),"single")+" ",o+=K(s,n,t)}if(s.count)o+=", "+s.count+" "+t.getConstant(Pe);else if(s.until){var d=s.until;o+=", "+t.getConstant(Ie)+" "+d.getDate()+" "+P(sf.base.getValue((d.getMonth()+1).toString(),r),"single")+" "+d.getFullYear()}return o}function K(e,t,i){var a="";if(e.monthDay.length)a+=e.monthDay[0];else if(e.day){var n=e.setPosition-1;a+=i.getConstant(Re[n>-1?n:Re.length-1])+" "+P(sf.base.getValue(Fe[e.day[0]],t),"single")}return a}function Z(e,t,i,a,n,r,s,o,l){void 0===n&&(n=Me),void 0===r&&(r=null),void 0===s&&(s="Gregorian"),void 0===o&&(o=null),void 0===l&&(l=null);var c,p=ge(t);xe=Ce(s);var d=[],h=new Date(e.getTime());Ee=[];var u=sf.base.isNullOrUndefined(i)?[]:i.split(","),f=new G;if(u.forEach((function(e){var t=J(e);o&&l&&(t=f.convert(new Date(t.getTime()),o,l)),Ee.push(new Date(t.getTime()).setHours(0,0,0,0))})),p.recExceptionCount=sf.base.isNullOrUndefined(p.count)?0:Ee.length,Se=r&&r>e&&!p.count?new Date(new Date(r.getTime()).setHours(0,0,0)):null,!p.until&&Se&&((c=new Date(Se.getTime())).setDate(Se.getDate()+n*p.interval),p.until=c),p.until&&e>p.until)return d;switch(Oe=n,function(e){for(;Ae[0]!==e;)we(Ae)}(Ve[a]),p.freq){case"DAILY":!function(e,t,i,a){var n=new Date(e.getTime()),r=a.interval,s=ee(e,a),o=a.day;for(;fe(n,t)&&(!0,!(De(n,a)&&(o.indexOf(Ve[n.getDay()])>-1||0===o.length)&&($(i,n.getTime()),s&&i.length+a.recExceptionCount>=s)));)n.setDate(n.getDate()+r)}(h,p.until,d,p);break;case"WEEKLY":!function(e,t,i,a){var n=new Date(e.getTime());a.day.length||a.day.push(Ve[e.getDay()]);var r,s=a.interval,o=a.day,l=ee(e,a),c=!0,p=[];if(o.length>1)for((sf.base.isNullOrUndefined(a.wkst)||""===a.wkst)&&(a.wkst=Ae[0]),r=Ve.indexOf(a.wkst);fe(n,t);){var d=Ve.indexOf(Ve[n.getDay()])-r,h=y(n,-(d=-1===d?6:d)),u=y(h,6),f=new Date(n.getTime());for(m(u),m(f);u>=f&&(o.indexOf(Ve[n.getDay()])>-1&&p.push([n.getTime()]),!(l&&i.length+a.recExceptionCount>=l));)n.setDate(n.getDate()+1),m(f=new Date(n.getTime()));if(n.setDate(n.getDate()-1),l&&i.length+a.recExceptionCount>=l)break;n.setDate(n.getDate()+1+7*(s-1)),oe(p,c,e,t,i,a),p=[]}else{for(n=ve(e,a.day);fe(n,t)&&((c=De(n,a))&&o.indexOf(Ve[n.getDay()])>-1&&$(i,n.getTime()),!(l&&i.length+a.recExceptionCount>=l));)n.setDate(n.getDate()+7*s);oe(p,c,e,t,i,a),p=[]}}(h,p.until,d,p);break;case"MONTHLY":te(h,p.until,d,p);break;case"YEARLY":!function(e,t,i,a){switch(function(e){if(e.yearDay.length)return"YEARDAY";if(e.weekNo.length)return"WEEKNO";return"MONTH"}(a)){case"MONTH":te(e,t,i,a);break;case"WEEKNO":!function(e,t,i,a){var n,r,s,o,l,c,p=xe.getYearLastDate(e,0),d=ee(e,a),h=a.weekNo,u=[],f=a.day;for(;fe(p,t);){r=Ae.indexOf(Ve[p.getDay()]),s=6-r+1;for(var m=0;m<h.length;m++)for(o=h[m],l=1===(o=o>0?o:53+o+1)?s:s+7*(o-1),c=1===o?s-7:s+7*(o-2);c<l;)n=new Date(p.getTime()+864e5*c),(0===f.length||f.indexOf(Ve[n.getDay()])>-1)&&(sf.base.isNullOrUndefined(a.setPosition)?de(void 0,e,t,i,a,n.getTime()):u.push([n.getTime()])),c++;if(sf.base.isNullOrUndefined(a.setPosition)||ue(u,void 0,e,t,i,a),d&&i.length+a.recExceptionCount>=d)return;p=xe.getYearLastDate(n,a.interval),u=[]}}(e,t,i,a);break;case"YEARDAY":!function(e,t,i,a){var n,r,s=xe.getYearLastDate(e,0),o=ee(e,a),l=[],c=a.day;for(;fe(s,t);){for(var p=0;p<a.yearDay.length;p++)r=a.yearDay[p],n=new Date(s.getTime()),r!==xe.getLeapYearDaysCount()&&r!==-xe.getLeapYearDaysCount()||xe.isLeapYear(xe.getFullYear(n),1)?(n.setDate(n.getDate()+(r<0?xe.getYearDaysCount(n,1)+1+r:r)),(0===c.length||c.indexOf(Ve[n.getDay()])>-1)&&(null==a.setPosition?de(void 0,e,t,i,a,n.getTime()):l.push([n.getTime()]))):n.setDate(n.getDate()+1);if(sf.base.isNullOrUndefined(a.setPosition)||ue(l,void 0,e,t,i,a),o&&i.length+a.recExceptionCount>=o)return;s=xe.getYearLastDate(n,a.interval),l=[]}}(e,t,i,a)}}(h,p.until,d,p)}return d}function J(e){return new Date(e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,5)+":"+e.substr(11,2)+":"+e.substr(13))}function $(e,t){var i=new Date(t).setHours(0,0,0,0);-1===Ee.indexOf(i)&&(!Se||i>=Se.getTime())&&e.push(t)}function ee(e,t){var i=Oe;return t.count?i=t.count:t.until&&("DAILY"===t.freq||"WEEKLY"===t.freq?i=Math.floor((t.until.getTime()-e.getTime())/864e5)+1:"MONTHLY"!==t.freq&&"YEARLY"!==t.freq||(i=Math.floor((t.until.getMonth()+12*t.until.getFullYear()-(e.getMonth()+12*e.getFullYear()))/t.interval)+(t.day.length>1?Math.floor((t.until.getTime()-e.getTime())/864e5)+1:1),"YEARLY"===t.freq&&(i=t.month.length>1?i*t.month.length:i))),i}function te(e,t,i,a){switch(a.month.length||a.day.length||a.monthDay.length?a.month.length>0&&!a.day.length&&!a.monthDay.length&&a.monthDay.push(e.getDate()):(a.monthDay.push(e.getDate()),"YEARLY"===a.freq&&a.month.push(e.getMonth()+1)),function(e){if(e.monthDay.length&&!e.day.length)return"date";if(!e.monthDay.length&&e.day.length)return"day";return"both"}(a)){case"day":switch(a.freq){case"MONTHLY":se(e,t,i,a);break;case"YEARLY":!function(e,t,i,a){var n=a.day,r=n.map((function(e){return Ue.test(e)}));if(n.length>1&&r.indexOf(!0)>-1)return void function(e,t,i,a){var n,r,s,o=a.day,l=ee(e,a),c=new Date(e.getTime()),p=a.interval,d=[],h=[],u=0;c=xe.getMonthStartDate(c);var f=[];a.month.length&&xe.setMonth(c,a.month[0],1);c=ve(c,a.day);for(;fe(c,t);){r=new Date(c.getTime());for(var m=0;m<=a.month.length;m++)for(var v=0;v<=o.length-1;v++){for(c=ve(c=xe.getMonthStartDate(c),a.day),d=[];xe.isSameYear(r,c)&&l&&i.length+a.recExceptionCount<=l;)for(;xe.isSameYear(r,c);){if(r=new Date(c.getTime()),0===a.month.length||a.month.length>0&&a.month[m]===xe.getMonth(r)){var g=o[v].match(ze),y=parseInt(g[0],10);for(s=new Date(c.getTime());xe.isSameYear(s,c)&&xe.isSameMonth(s,c);)g[g.length-1]===Ve[s.getDay()]&&d.push([s.getTime()]),s.setDate(s.getDate()+1);s.setDate(s.getDate()-1),n=g[0].indexOf("-")>-1?d.length- -1*y:y-1,n=isNaN(n)?0:n}u=re(c,a,u,void 0,1),c=ve(c,a.day)}if(c=0===v&&s?new Date(s.getTime()):new Date(r.getTime()),d.length>0&&(sf.base.isNullOrUndefined(a.setPosition)?ue(d,void 0,e,t,i,a,n):h=[pe(d,n,f)]),l&&i.length+a.recExceptionCount>=l)return}sf.base.isNullOrUndefined(a.setPosition)||(he(h,void 0,e,t,i,a),f=[]),xe.isLastMonth(c)?(xe.setValidDate(c,1,1),c.setFullYear(c.getFullYear()+p-1)):c.setFullYear(c.getFullYear()+p),c=ve(c,a.day),a.month.length&&xe.setMonth(c,a.month[0],c.getDate())}}(e,t,i,a);if(a.month.length&&1===n.length&&r.indexOf(!0)>-1)return void se(e,t,i,a);var s,o=new Date(e.getTime()),l=ee(e,a),c=a.interval,p=[];a.month.length&&xe.setMonth(o,a.month[0],o.getDate());sf.base.isNullOrUndefined(a.setPosition)&&0===a.month.length&&0===a.weekNo.length&&o.setFullYear(e.getFullYear(),0,1);o=ve(o=xe.getMonthStartDate(o),a.day);for(;fe(o,t);){for(s=new Date(o.getTime());xe.isSameYear(s,o)&&l&&i.length+a.recExceptionCount<=l;)for(s=new Date(o.getTime());xe.isSameYear(s,o);){if(!(0===a.month.length||a.month.length>0&&!xe.checkMonth(o,a.month))){xe.setValidDate(o,1,1),o=ve(o,a.day);break}if(n.length>1){if(xe.compareMonth(s,o)){xe.setValidDate(o,1,1),o=ve(o,a.day);break}n.indexOf(Ve[s.getDay()])>-1&&p.push([s.getTime()]),s.setDate(s.getDate()+1)}else{if(s.getFullYear()>o.getFullYear()){xe.setValidDate(o,1,1),o=ve(o,a.day);break}var d=me(n[0]);Ve[s.getDay()]===d&&new Date(s.getFullYear(),s.getMonth(),0)>new Date(e.getFullYear())&&p.push([s.getTime()]),s.setDate(s.getDate()+7)}}if(o.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),ce(p,e,t,i,a),xe.isLastMonth(o)&&(xe.setValidDate(o,1,1),o=ve(o,a.day)),o.setFullYear(o.getFullYear()+c-1),l&&i.length+a.recExceptionCount>=l)return;o=ve(o,a.day),p=[]}}(e,t,i,a)}break;case"both":case"date":switch(a.freq){case"MONTHLY":ae(e,t,i,a);break;case"YEARLY":!function(e,t,i,a){if(a.month.length)return void ae(e,t,i,a);var n,r=ie(e,a);r.tempDate=r.mainDate=xe.getMonthStartDate(r.tempDate);for(;fe(r.tempDate,t);){for(n=new Date(r.tempDate.getTime());xe.isSameYear(n,r.tempDate)&&r.expectedCount&&i.length+a.recExceptionCount<=r.expectedCount;){if(!(0===a.month.length||a.month.length>0&&!xe.checkMonth(r.tempDate,a.month))){xe.setValidDate(r.tempDate,1,1),r.tempDate=ve(r.tempDate,a.day);break}ne(a,r,t,!1),r.beginDate=new Date(r.tempDate.getTime()),r.monthInit=re(r.tempDate,a,r.monthInit,r.beginDate)}if(r.tempDate.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),oe(r.dateCollection,r.state,e,t,i,a),xe.isLastMonth(r.tempDate)&&(xe.setValidDate(r.tempDate,1,1),r.tempDate=ve(r.tempDate,a.day)),r.expectedCount&&i.length+a.recExceptionCount>=r.expectedCount)return;r.tempDate.setFullYear(r.tempDate.getFullYear()+a.interval-1),r.tempDate=ve(r.tempDate,a.day),r.monthInit=re(r.tempDate,a,r.monthInit,r.beginDate),r.dateCollection=[]}}(e,t,i,a)}}}function ie(e,t){var i={monthCollection:[],index:0,tempDate:new Date(e.getTime()),mainDate:new Date(e.getTime()),expectedCount:ee(e,t),monthInit:0,dateCollection:[]};return t.month.length&&xe.setMonth(i.tempDate,t.month[0],i.tempDate.getDate()),i}function ae(e,t,i,a){var n=ie(e,a);if(n.tempDate=n.mainDate=xe.getMonthStartDate(n.tempDate),!(("MONTHLY"===a.freq&&12===a.interval||"YEARLY"===a.freq)&&xe.getMonthDaysCount(e)<a.monthDay[0]))for(;fe(n.tempDate,t);){if(n.beginDate=new Date(n.tempDate.getTime()),ne(a,n,t,!0,e,i),sf.base.isNullOrUndefined(a.setPosition)||ue(n.dateCollection,n.state,e,t,i,a),n.expectedCount&&i.length+a.recExceptionCount>=n.expectedCount)return;n.monthInit=re(n.tempDate,a,n.monthInit,n.beginDate),n.dateCollection=[]}}function ne(e,t,i,a,n,r){for(var s=0;s<e.monthDay.length;s++){t.date=e.monthDay[s],t.tempDate=xe.getMonthStartDate(t.tempDate);var o=xe.getMonthDaysCount(t.tempDate);if(t.date=t.date>0?t.date:o+t.date+1,ye(t.tempDate,t.date,t.mainDate)&&t.date>0){if(xe.setDate(t.tempDate,t.date),i&&t.tempDate>i)return;(0===e.day.length||e.day.indexOf(Ve[t.tempDate.getDay()])>-1)&&(a&&sf.base.isNullOrUndefined(e.setPosition)&&t.expectedCount&&r.length+e.recExceptionCount<t.expectedCount?de(t.state,n,i,r,e,t.tempDate.getTime()):t.dateCollection.push([t.tempDate.getTime()]))}}}function re(e,t,i,a,n){void 0===a&&(a=null);var r=a?a.getMonth():0,s=xe.getMonthStartDate(e);return n=sf.base.isNullOrUndefined(n)?t.interval:n,e.setFullYear(s.getFullYear()),e.setMonth(s.getMonth()),e.setDate(s.getDate()),t.month.length?(i++,i%=t.month.length,xe.setMonth(e,t.month[i],1),0===i&&xe.addYears(e,n,t.month[0])):(a&&a.getFullYear()<e.getFullYear()&&(r=e.getMonth()-1),xe.setValidDate(e,n,1,r,a)),i}function se(e,t,i,a){if(a.day.length>1)!function(e,t,i,a){var n=a.day,r=new Date(e.getTime());r=xe.getMonthStartDate(r);var s,o,l=[],c=[],p=[],d=ee(e,a),h=0;for(a.month.length&&xe.setMonth(r,a.month[0],1),r=ve(r,a.day);fe(r,t)&&d&&i.length+a.recExceptionCount<d;){var u=new Date(r.getTime());if(n.map((function(e){return Ue.test(e)})).indexOf(!0)>-1){for(var f=0;f<=n.length-1;f++){var m=n[f].match(ze),v=parseInt(m[0],10);for(r=new Date(r.getTime()),r=ve(r=xe.getMonthStartDate(r),n),u.setFullYear(r.getFullYear(),r.getMonth(),r.getDate());xe.isSameYear(u,r)&&xe.isSameMonth(u,r);)m[m.length-1]===Ve[u.getDay()]&&l.push([u.getTime()]),u.setDate(u.getDate()+1);if(u.setDate(u.getDate()-1),s=m[0].indexOf("-")>-1?l.length- -1*v:v-1,s=isNaN(s)?0:s,l.length>0&&(sf.base.isNullOrUndefined(a.setPosition)?ue(l,void 0,e,t,i,a,s):c=[pe(l,s,p)]),d&&i.length+a.recExceptionCount>=d)return;l=[]}sf.base.isNullOrUndefined(a.setPosition)||(he(c,void 0,e,t,i,a),p=[]),h=re(r,a,h,o),r=ve(r,a.day),l=[]}else{var g=[],y=be(n);u.setFullYear(r.getFullYear(),r.getMonth(),r.getDate());var b=new Date(r.getTime());for(o=new Date(r.getTime());xe.isSameMonth(b,r);)g.push(r.getTime()),n.indexOf(Ve[r.getDay()])>-1&&(l.push(g),g=[]),r.setDate(r.getDate()+y[Ve[r.getDay()]]);if(s=a.setPosition<1?l.length+a.setPosition:a.setPosition-1,sf.base.isNullOrUndefined(a.setPosition)){s=0;for(var T=[],w=0;w<l.length;w++)for(var D=0;D<l[w].length;D++)T.push(l[w][D]);l=[T]}if(l.length>0&&ue(l,void 0,e,t,i,a,s),d&&i.length+a.recExceptionCount>=d)return;h=re(r,a,h,o),r=ve(r,a.day),l=[]}}}(e,t,i,a);else{var n,r=new Date(e.getTime()),s=ee(e,a),o=[],l=0;for(r=xe.getMonthStartDate(r),a.month.length&&xe.setMonth(r,a.month[0],1),r=ve(r,a.day);fe(r,t)&&s&&i.length+a.recExceptionCount<s;){n=new Date(r.getTime());for(var c=new Date(r.getTime());xe.isSameMonth(r,c);)o.push([c.getTime()]),c.setDate(c.getDate()+7);ce(o,e,t,i,a),l=re(r,a,l,n),r=ve(r,a.day),o=[]}}}function oe(e,t,i,a,n,r){var s=r.setPosition<1?e.length+r.setPosition:r.setPosition-1;sf.base.isNullOrUndefined(r.setPosition)&&(s=0,e=le(e)),e.length>0&&ue(e,t,i,a,n,r,s)}function le(e){for(var t=[],i=0;i<e.length;i++)for(var a=0;a<e[i].length;a++)t.push(new Date(e[i][a]).getTime());return e=t.length>0?[t]:[]}function ce(e,t,i,a,n){var r,s,o=[];s=function(e,t){var i,a={monthCollection:[],index:0};if(1===t.length){var n=t[0].match(ze),r=void 0;n.length>1?i=(r=parseInt(n[0],10))<1?e.length+r:r-1:(i=0,e=le(e))}else i=0,e=le(e);return a.monthCollection=e,a.index=i,a}(e,n.day),e=s.monthCollection,r=s.index,null!=n.setPosition?he([pe(e,r,o)],void 0,t,i,a,n):e.length>0&&ue(e,void 0,t,i,a,n,r),o=[]}function pe(e,t,i){for(var a=0;a<e[t].length;a++)i.push(e[t][a]);return i}function de(e,t,i,a,n,r){var s=ee(t,n),o=new Date(r);e=De(o,n),o>=t&&fe(o,i)&&e&&s&&a.length+n.recExceptionCount<s&&$(a,r)}function he(e,t,i,a,n,r){if(e.length>0)for(var s=0;s<e.length;s++){e[s].sort();var o=r.setPosition<1?e[s].length+r.setPosition:r.setPosition-1;de(t,i,a,n,r,e[s][o])}}function ue(e,t,i,a,n,r,s){if(e.length>0){e[s=sf.base.isNullOrUndefined(s)?r.setPosition<1?e.length+r.setPosition:r.setPosition-1:s].sort();for(var o=0;o<e[s].length;o++){de(t,i,a,n,r,e[s][o])}}}function fe(e,t){return!t||e<=t}function me(e){return e.replace(We,"")}function ve(e,t){var i,a=new Date(e.getTime());if(t.length>0){for(var n=[],r=0;r<=t.length-1;r++)i=me(t[r]),n.push(i);if(-1===n.indexOf(Ve[a.getDay()]))do{a.setDate(a.getDate()+1)}while(-1===n.indexOf(Ve[a.getDay()]))}return a}function ge(e){var t,i={freq:null,interval:1,count:null,until:null,day:[],wkst:null,month:[],weekNo:[],monthDay:[],yearDay:[],setPosition:null,validRules:[]},a=e.split(";"),n=[];if(a.forEach((function(e){switch((n=e.split("="))[0]){case"UNTIL":t=n[1],i.until=J(t);break;case"BYDAY":i.day=n[1].split(","),i.validRules.push(n[0]);break;case"BYMONTHDAY":i.monthDay=n[1].split(",").map(Number),i.validRules.push(n[0]);break;case"BYMONTH":i.month=n[1].split(",").map(Number),i.validRules.push(n[0]);break;case"BYYEARDAY":i.yearDay=n[1].split(",").map(Number),i.validRules.push(n[0]);break;case"BYWEEKNO":i.weekNo=n[1].split(",").map(Number),i.validRules.push(n[0]);break;case"INTERVAL":i.interval=parseInt(n[1],10);break;case"COUNT":i.count=parseInt(n[1],10);break;case"BYSETPOS":i.setPosition=parseInt(n[1],10)>4?-1:parseInt(n[1],10);break;case"FREQ":i.freq=n[1];break;case"WKST":i.wkst=n[1]}})),"MONTHLY"===i.freq&&0===i.monthDay.length){var r=i.validRules.indexOf("BYDAY");i.validRules.splice(r,1)}return i}function ye(e,t,i){return t<=xe.getMonthDaysCount(e)&&e>=i}function be(e){var t={};return e.forEach((function(i,a){if(a===e.length-1){for(var n=Ae.indexOf(i),r=n;r%7!==Ae.indexOf(e[0]);)r++;t[i]=r-n}else t[i]=Ae.indexOf(e[a+1])-Ae.indexOf(i)})),t}function Te(e,t){var i,a=t.slice(0),n=function(e){ke[xe.getFullYear(e)]||(ke[xe.getFullYear(e)]=xe.getYearLastDate(e,0));var t=ke[xe.getFullYear(e)],i=e.getTime()-t.getTime();return Math.ceil(i/864e5)}(e);for(i=a.shift();i;){if(i<0&&(i=i+xe.getYearDaysCount(e,0)+1),i===n)return!1;i=a.shift()}return!0}function we(e){var t=e.shift();e.push(t)}function De(e,t){var i=!0,a=t.day,n=t.month,r=xe.getExpectedDays(e,t.monthDay),s=t.yearDay;return t.validRules.forEach((function(t){switch(t){case"BYDAY":(function(e,t){var i=[];return t.forEach((function(e){var t=e.match(ze);2===t.length?i.push(t[1]):i.push(t[0])})),-1===i.indexOf(Ve[e])})(e.getDay(),a)&&(i=!1);break;case"BYMONTH":xe.checkMonth(e,n)&&(i=!1);break;case"BYMONTHDAY":(function(e,t){var i,a=t.slice(0),n=xe.getMonthDaysCount(e);for(i=a.shift();i;){if(i<0&&(i=i+n+1),i===e.getDate())return!1;i=a.shift()}return!0})(e,r)&&(i=!1);break;case"BYYEARDAY":Te(e,s)&&(i=!1)}})),i}function Ce(e){return"Islamic"===e?new Y:new _}var Ee,Oe,Se,xe,ke={},Ae=["SU","MO","TU","WE","TH","FR","SA"],Ve=["SU","MO","TU","WE","TH","FR","SA"],Me=43,Re=["first","second","third","fourth","last"],Pe="summaryTimes",He="summaryOn",je="every",Ie="summaryUntil",Le="summaryDay",qe="summaryWeek",Be="summaryMonth",Ne="summaryYear",Fe={SU:"sun",MO:"mon",TU:"tue",WE:"wed",TH:"thu",FR:"fri",SA:"sat"},Ue=/\d/,We=/[^A-Z]+/,ze=/[a-z]+|[^a-z]+/gi;function _e(e){return[e.getUTCFullYear(),Ye(e.getUTCMonth()+1),Ye(e.getUTCDate()),"T",Ye(e.getUTCHours()),Ye(e.getUTCMinutes()),Ye(e.getUTCSeconds()),"Z"].join("")}function Ye(e){return("0"+e).slice(-2)}var Ge,Qe,Xe,Ke,Ze,Je,$e,et,tt,it,at,nt,rt,st,ot,lt,ct,pt=function(){function e(e){this.slots=[],this.isDoubleTapped=!1,this.parent=e}return e.prototype.processData=function(e,t,i){var a=this,n=this.parent.activeView.startDate(),r=this.parent.activeView.endDate(),s=this.parent.eventFields;this.parent.eventsProcessed=[];var o=[],l=1,c=!1,p=this.parent.resourceBase?this.parent.resourceBase.resourceCollection:[];e.length>0&&sf.base.isNullOrUndefined(e[0][s.id])&&(c=!0);for(var d=0,h=e;d<h.length;d++){var u=h[d];c&&(u[s.id]=l++),"string"==typeof u[s.startTime]&&(u[s.startTime]=E(u[s.startTime])),"string"==typeof u[s.endTime]&&(u[s.endTime]=E(u[s.endTime])),t?this.processTimezoneChange(u,i):u=this.processTimezone(u);for(var f=0;f<p.length;f++)null!==u[p[f].field]&&0!==u[p[f].field]||(u[p[f].field]=void 0);sf.base.isNullOrUndefined(u[s.recurrenceRule])||""!==u[s.recurrenceRule]||(u[s.recurrenceRule]=null),!sf.base.isNullOrUndefined(u[s.recurrenceRule])&&sf.base.isNullOrUndefined(u[s.recurrenceID])?o=o.concat(this.generateOccurrence(u,null,i,!0)):(u.Guid=this.generateGuid(),o.push(u))}var v=o.filter((function(e){return!e[a.parent.eventFields.isBlock]}));this.parent.eventsProcessed=this.filterEvents(n,r,v);var g=o.filter((function(e){return e[a.parent.eventFields.isBlock]}));return g.forEach((function(e){e[s.isAllDay]&&(e[s.startTime]=m(e[s.startTime]),e[s.endTime]=y(m(e[s.endTime]),1))})),this.parent.blockProcessed=g,v},e.prototype.getProcessedEvents=function(e){void 0===e&&(e=this.parent.eventsData);for(var t=[],i=0,a=e;i<a.length;i++){var n=a[i];!sf.base.isNullOrUndefined(n[this.parent.eventFields.recurrenceRule])&&sf.base.isNullOrUndefined(n[this.parent.eventFields.recurrenceID])?t=t.concat(this.generateOccurrence(n)):t.push(n)}return t},e.prototype.timezonePropertyChange=function(e){var t=this.processData(this.parent.eventsData,!0,e);this.parent.notify(a,{processedData:t})},e.prototype.timezoneConvert=function(e){var t=this.parent.eventFields;if(e[t.startTimezone]=e[t.startTimezone]||e[t.endTimezone],e[t.endTimezone]=e[t.endTimezone]||e[t.startTimezone],this.parent.timezone){var i=e[t.startTimezone],a=e[t.endTimezone];e[t.startTime]=this.parent.tzModule.convert(e[t.startTime],this.parent.timezone,i),e[t.endTime]=this.parent.tzModule.convert(e[t.endTime],this.parent.timezone,a)}},e.prototype.processTimezoneChange=function(e,t){var i=this.parent.eventFields;e[i.isAllDay]||(t&&this.parent.timezone?(e[i.startTime]=this.parent.tzModule.convert(e[i.startTime],t,this.parent.timezone),e[i.endTime]=this.parent.tzModule.convert(e[i.endTime],t,this.parent.timezone)):!t&&this.parent.timezone?(e[i.startTime]=this.parent.tzModule.add(e[i.startTime],this.parent.timezone),e[i.endTime]=this.parent.tzModule.add(e[i.endTime],this.parent.timezone)):t&&!this.parent.timezone&&(e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],t),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],t)))},e.prototype.processTimezone=function(e,t){void 0===t&&(t=!1);var i=this.parent.eventFields;if(e[i.startTimezone]||e[i.endTimezone]){var a=e[i.startTimezone]||e[i.endTimezone],n=e[i.endTimezone]||e[i.startTimezone],r=this.parent.timezone;t?this.parent.timezone?(e[i.startTime]=this.parent.tzModule.convert(e[i.startTime],a,r),e[i.endTime]=this.parent.tzModule.convert(e[i.endTime],n,r),e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],r),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],r)):(e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],a),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],n)):(e[i.startTime]=this.parent.tzModule.add(e[i.startTime],a),e[i.endTime]=this.parent.tzModule.add(e[i.endTime],n),this.parent.timezone&&(e[i.startTime]=this.parent.tzModule.convert(e[i.startTime],a,r),e[i.endTime]=this.parent.tzModule.convert(e[i.endTime],n,r)))}else this.parent.timezone&&(t?(e[i.startTime]=this.parent.tzModule.remove(e[i.startTime],this.parent.timezone),e[i.endTime]=this.parent.tzModule.remove(e[i.endTime],this.parent.timezone)):(e[i.startTime]=this.parent.tzModule.add(e[i.startTime],this.parent.timezone),e[i.endTime]=this.parent.tzModule.add(e[i.endTime],this.parent.timezone)));return e},e.prototype.filterBlockEvents=function(e){var t,i=e[this.parent.eventFields.startTime],a=e[this.parent.eventFields.endTime];if(this.parent.activeViewOptions.group.resources.length>0){var n=this.getGroupIndexFromEvent(e);t=this.parent.resourceBase.lastResourceLevel[n]}return this.filterEvents(i,a,this.parent.blockProcessed,t)},e.prototype.filterEvents=function(e,t,i,a){void 0===i&&(i=this.parent.eventsProcessed);var n=this.parent.eventFields,r=new sf.data.Predicate(n.startTime,"greaterthanorequal",e).and(new sf.data.Predicate(n.endTime,"greaterthanorequal",e)).and(new sf.data.Predicate(n.startTime,"lessthan",t)).or(new sf.data.Predicate(n.startTime,"lessthanorequal",e).and(new sf.data.Predicate(n.endTime,"greaterthan",e))),s=new sf.data.DataManager({json:i}).executeLocal((new sf.data.Query).where(r));return a&&(s=this.filterEventsByResource(a,s)),this.sortByTime(s)},e.prototype.filterEventsByRange=function(e,t,i){var a=this,n=[];return n=t&&i?this.filterEvents(t,i,e):t&&!i?e.filter((function(e){return e[a.parent.eventFields.startTime]>=t})):!t&&i?e.filter((function(e){return e[a.parent.eventFields.endTime]<=i})):e,this.sortByTime(n)},e.prototype.filterEventsByResource=function(e,t){void 0===t&&(t=this.parent.eventsProcessed);for(var i={},a=this.parent.resourceBase.resourceCollection,n=0;n<a.length;n++)i[a[n].field]=e.groupOrder[n];var r=Object.keys(i);return t.filter((function(e){return r.every((function(t){return e[t]instanceof Array?e[t].indexOf(i[t])>-1:e[t]===i[t]}))}))},e.prototype.sortByTime=function(e){var t=this.parent.eventFields;return e.sort((function(e,i){var a=e[t.startTime],n=i[t.startTime];return a.getTime()-n.getTime()})),e},e.prototype.sortByDateTime=function(e){var t=this.parent.eventFields;return e.sort((function(e,i){var a=e[t.startTime],n=i[t.startTime],r=e[t.endTime],s=i[t.endTime],o=r.getTime()-a.getTime(),l=s.getTime()-n.getTime();return a.getTime()-n.getTime()||l-o})),e},e.prototype.getSmallestMissingNumber=function(e){for(var t=Math.max.apply(Math,e),i=0;i<t;i++)if(-1===e.indexOf(i))return i;return t+1},e.prototype.splitEventByDay=function(e){var t=this.parent.eventFields,i=[],a=e[t.startTime],n=e[t.endTime];if(m(new Date(a.getTime()))<m(new Date(n.getTime())))for(var r=new Date(a.getTime()),s=y(m(new Date(a.getTime())),1),o=0===n.getHours()&&0===n.getMinutes()?n:y(n,1),l=1,c=C(a.getTime(),o.getTime());s<=n;){var p=sf.base.extend({},e);p[t.startTime]=r,p[t.endTime]=s,p.data={index:l,count:c},p.Guid=this.generateGuid(),p.isSpanned=!0,i.push(p),r=s,m(new Date(r.getTime())).getTime()===m(new Date(n.getTime())).getTime()&&s.getTime()!==n.getTime()?(s=new Date(r.getTime()),s=new Date(s.setHours(n.getHours(),n.getMinutes(),n.getSeconds()))):s=y(m(new Date(r.getTime())),1),l++}else i.push(e);return i},e.prototype.splitEvent=function(e,t){var i=this.parent.eventFields,a=m(new Date(e[i.startTime]+"")).getTime(),n=m(new Date(e[i.endTime]+"")).getTime();if(v(e[i.endTime])<=0){var r=y(m(new Date(e[i.endTime]+"")),-1).getTime();n=a>r?a:r}var s=a,o=n,l=[];if(a!==n){a<t[0].getTime()&&(a=t[0].getTime()),n>t[t.length-1].getTime()&&(n=t[t.length-1].getTime());for(var c=a,p=function(t){var i=d.slots[t];if("WorkWeek"===d.parent.currentView||"TimelineWorkWeek"===d.parent.currentView||d.parent.activeViewOptions.group.byDate||d.parent.activeViewOptions.showWeekend){var a=[];i.forEach((function(e){return a.push(new Date(e))}));var r=d.getRenderedDates(a);!sf.base.isNullOrUndefined(r)&&r.length>0&&(i=[],r.forEach((function(e){return i.push(e.getTime())})))}var p=i[0];if((c=c<=p&&n>=p?p:c)>n||p>n)return"break";if(!d.parent.activeViewOptions.group.byDate&&d.parent.activeViewOptions.showWeekend&&"WorkWeek"!==d.parent.currentView&&"TimelineWorkWeek"!==d.parent.currentView){var h=i.indexOf(c);if(-1!==h){var u=i.indexOf(n),f=-1!==u,m=(u=f?u:i.length-1)-h+1,v=i[h]!==s,g=i[u]!==o;if(l.push(d.cloneEventObject(e,i[h],i[u],m,v,g)),f)return"break"}}else if(d.dateInRange(c,i[0],i[i.length-1])){for(var y=[],b=0;b<i.length;b++)d.dateInRange(i[b],s,o)&&y.push(i[b]);if(y.length>0)if(d.parent.activeViewOptions.group.byDate)for(var T=0,w=y;T<w.length;T++){var D=w[T];l.push(d.cloneEventObject(e,D,D,1,D!==s,D!==o))}else{v=y[0]!==s,g=y[y.length-1]!==o;l.push(d.cloneEventObject(e,y[0],y[y.length-1],y.length,v,g))}}},d=this,h=0;h<this.slots.length;h++){if("break"===p(h))break}}else l.push(this.cloneEventObject(e,a,n,1,!1,!1));return l},e.prototype.cloneEventObject=function(e,t,i,a,n,r){var s=this.parent.eventFields,o=sf.base.extend({},e,null,!0),l={count:a,isLeft:n,isRight:r};return l[s.startTime]=e[s.startTime],l[s.endTime]=e[s.endTime],o.data=l,o[s.startTime]=new Date(t),o[s.endTime]=new Date(i),o},e.prototype.dateInRange=function(e,t,i){return t<=e&&e<=i},e.prototype.getSelectedEventElements=function(e){if(this.removeSelectedAppointmentClass(),this.parent.selectedElements.length<=0)this.parent.selectedElements.push(e);else if(this.parent.selectedElements.filter((function(t){return t.getAttribute("data-guid")===e.getAttribute("data-guid")})).length<=0)for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+e.getAttribute("data-guid")+'"]'));t<i.length;t++){var a=i[t];this.parent.selectedElements.push(a)}else{var n=this.parent.selectedElements.filter((function(t){return t.getAttribute("data-guid")!==e.getAttribute("data-guid")}));this.parent.selectedElements=n}return e&&this.parent.selectedElements.length>0&&this.addSelectedAppointments(this.parent.selectedElements),this.parent.selectedElements},e.prototype.getSelectedEvents=function(){var e=this,t=[],i=[];return[].slice.call(this.parent.element.querySelectorAll(".e-appointment-border")).filter((function(a){0===t.filter((function(e){return e.Guid===a.getAttribute("data-guid")})).length&&t.push(e.getEventByGuid(a.getAttribute("data-guid"))),i.push(a)})),{event:t.length>1?t:t[0],element:i.length>1?i:i[0]}},e.prototype.removeSelectedAppointmentClass=function(){for(var e=this.getSelectedAppointments(),t=0,i=e;t<i.length;t++){i[t].setAttribute("aria-selected","false")}sf.base.removeClass(e,"e-appointment-border"),"Agenda"!==this.parent.currentView&&"MonthAgenda"!==this.parent.currentView||sf.base.removeClass(e,"e-active-appointment-agenda")},e.prototype.addSelectedAppointments=function(e){for(var t=0,i=e;t<i.length;t++){i[t].setAttribute("aria-selected","true")}"MonthAgenda"!==this.parent.currentView&&this.parent.removeSelectedClass(),sf.base.addClass(e,"e-appointment-border")},e.prototype.getSelectedAppointments=function(){return[].slice.call(this.parent.element.querySelectorAll(".e-appointment-border,.e-appointment:focus"))},e.prototype.focusElement=function(){var e=this.parent.getSelectedElements();if(e.length>0){if(this.parent.keyboardInteractionModule){var t=!sf.base.isNullOrUndefined(this.parent.activeCellsData)&&this.parent.activeCellsData.element||e[e.length-1];this.parent.keyboardInteractionModule.selectCells(t instanceof Array,t)}}else{var i=this.getSelectedAppointments();i.length>0&&i[i.length-1].focus()}},e.prototype.selectWorkCellByTime=function(e){var t;if("Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView)return t;if(e.length>0){var i=e[e.length-1],a=i[this.parent.eventFields.startTime],n=new Date(+a).setMinutes(0,0,0),r=this.isAllDayAppointment(i);("Month"===this.parent.currentView||r)&&(n=new Date(+a).setHours(0,0,0,0));var s=void 0;s=r&&-1!==["Day","Week","WorkWeek"].indexOf(this.parent.currentView)?this.parent.getAllDayRow():this.parent.getContentTable();var o='[data-date="'+this.parent.getMsFromDate(new Date(n))+'"]';if(this.parent.activeViewOptions.group.resources.length>0&&(o+='[data-group-index="'+this.getGroupIndexFromEvent(i)+'"]'),t=s.querySelector(o))return this.parent.activeCellsData=this.parent.getCellDetails(t),this.parent.keyboardInteractionModule&&this.parent.keyboardInteractionModule.selectCells(!1,t),t}return t},e.prototype.getGroupIndexFromEvent=function(e){var t=name||this.parent.resourceCollection.slice(-1)[0].name,i=(this.parent.resourceCollection.length,this.parent.resourceCollection.slice(-1)[0].field),a=e[i]instanceof Array?e[i][0]:e[i],n=this.parent.resourceCollection.filter((function(e,i){return e.name===t?(i,e):null}))[0];return this.parent.resourceBase.getIndexFromResourceId(a,t,n)},e.prototype.isAllDayAppointment=function(e){var t=this.parent.eventFields,i=e[t.isAllDay],a=(e[t.endTime].getTime()-e[t.startTime].getTime())/864e5>=1;return!(!i&&!a)},e.prototype.addEventListener=function(){this.parent.on("document-click",this.appointmentBorderRemove,this)},e.prototype.appointmentBorderRemove=function(e){var t=e.event.target;sf.base.closest(t,".e-appointment")?"MonthAgenda"!==this.parent.currentView&&this.parent.removeSelectedClass():sf.base.closest(t,"."+I)||this.removeSelectedAppointmentClass()},e.prototype.wireAppointmentEvents=function(e,t,i){void 0===i&&(i=!1);var a=!sf.base.isNullOrUndefined(t)&&t[this.parent.eventFields.isReadonly];sf.base.Browser.isTouch&&!this.parent.isAdaptive?sf.base.EventHandler.add(e,"touchstart",this.eventTouch,this):sf.base.EventHandler.add(e,"click",this.eventClick,this),this.parent.isAdaptive||this.parent.activeViewOptions.readonly||a||sf.base.EventHandler.add(e,"dblclick",this.eventDoubleClick,this),this.parent.activeViewOptions.readonly||a||i||(this.parent.resizeModule&&this.parent.resizeModule.wireResizeEvent(e),this.parent.dragAndDropModule&&this.parent.dragAndDropModule.wireDragEvent(e))},e.prototype.eventTouch=function(e){var t=this;setTimeout((function(){return t.isDoubleTapped=!1}),250),this.isDoubleTapped?(e.preventDefault(),this.eventDoubleClick(e)):(this.isDoubleTapped=!0,this.eventClick(e))},e.prototype.renderResizeHandler=function(e,t,i){if(this.parent.resizeModule&&this.parent.allowResizing&&!this.parent.activeViewOptions.readonly&&!i)for(var a=0,n=Object.keys(t);a<n.length;a++){var r=n[a],s=sf.base.createElement("div",{className:"e-event-resize"});switch(r){case"isLeft":t.isLeft||(s.appendChild(sf.base.createElement("div",{className:"e-left-right-resize"})),sf.base.addClass([s],this.parent.enableRtl?"e-right-handler":"e-left-handler"),sf.base.prepend([s],e));break;case"isRight":t.isRight||(s.appendChild(sf.base.createElement("div",{className:"e-left-right-resize"})),sf.base.addClass([s],this.parent.enableRtl?"e-left-handler":"e-right-handler"),sf.base.append([s],e));break;case"isTop":t.isTop||(s.appendChild(sf.base.createElement("div",{className:"e-top-bottom-resize"})),sf.base.addClass([s],"e-top-handler"),sf.base.prepend([s],e));break;case"isBottom":t.isBottom||(s.appendChild(sf.base.createElement("div",{className:"e-top-bottom-resize"})),sf.base.addClass([s],"e-bottom-handler"),sf.base.append([s],e))}}},e.prototype.eventClick=function(e){var t=this,i=e.target;if(!i.classList.contains("e-drag-clone")&&!i.classList.contains("e-resize-clone"))if(e.ctrlKey&&1===e.which&&this.parent.keyboardInteractionModule){this.parent.quickPopup.quickPopup.hide(),this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-border"));var a=sf.base.closest(e.target,".e-appointment");this.getSelectedEventElements(a),this.activeEventData(e,!1);var n={data:this.parent.activeEventData.event,element:this.parent.activeEventData.element,event:e,requestType:"eventSelect"};this.parent.trigger("select",n);var r=sf.base.extend(this.parent.activeEventData,{cancel:!1,originalEvent:e});this.parent.trigger("eventClick",r)}else{this.removeSelectedAppointmentClass(),this.activeEventData(e,!0);var s={data:this.parent.activeEventData.event,element:this.parent.activeEventData.element,event:e,requestType:"eventSelect"};this.parent.trigger("select",s);r=sf.base.extend(this.parent.activeEventData,{cancel:!1,originalEvent:e});this.parent.trigger("eventClick",r,(function(e){if(sf.base.isBlazor()){var i=t.parent.eventFields,a=e.event;a[i.startTime]=t.parent.getDateTime(a[i.startTime]),a[i.endTime]=t.parent.getDateTime(a[i.endTime]),e.element&&(e.element=sf.base.getElement(e.element))}e.cancel?(t.removeSelectedAppointmentClass(),t.parent.quickPopup&&t.parent.quickPopup.quickPopupHide()):("Agenda"!==t.parent.currentView&&"MonthAgenda"!==t.parent.currentView||sf.base.addClass([t.parent.activeEventData.element],"e-active-appointment-agenda"),t.parent.notify("eventClick",e))}))}},e.prototype.eventDoubleClick=function(e){this.parent.quickPopup.quickPopupHide(!0),"touchstart"===e.type&&this.activeEventData(e,!0),this.removeSelectedAppointmentClass(),!sf.base.isNullOrUndefined(this.parent.activeEventData.event)&&sf.base.isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceID])?this.parent.eventWindow.openEditor(this.parent.activeEventData.event,"Save"):(this.parent.currentAction="EditOccurrence",this.parent.quickPopup.openRecurrenceAlert())},e.prototype.getEventByGuid=function(e){return this.parent.eventsProcessed.filter((function(t){return t.Guid===e}))[0]},e.prototype.getEventById=function(e){var t=this;return this.parent.eventsData.filter((function(i){return i[t.parent.eventFields.id]===e}))[0]},e.prototype.generateGuid=function(){return"xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},e.prototype.getEventIDType=function(){return 0!==this.parent.eventsData.length?n()(this.parent.eventsData[0][this.parent.eventFields.id]):0!==this.parent.blockData.length?n()(this.parent.blockData[0][this.parent.eventFields.id]):"string"},e.prototype.getEventMaxID=function(e){var t,i=this;if(this.parent.eventsData.length<1&&this.parent.blockData.length<1)return 1;var a=this.getEventIDType();if("string"===a&&(t=this.generateGuid()),"number"===a){var n=this.parent.eventsData.concat(this.parent.blockData),r=Math.max.apply(Math,n.map((function(e){return e[i.parent.eventFields.id]})));t=(r=sf.base.isNullOrUndefined(e)?r:r+e)+1}return t},e.prototype.activeEventData=function(e,t){var i=this,a=sf.base.closest(e.target,".e-appointment"),n=a.getAttribute("data-guid");t&&(this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+n+'"]'))),a.focus());var r=this.getEventByGuid(n);r&&r.isSpanned&&(r=this.parent.eventsData.filter((function(e){return e[i.parent.eventFields.id]===r[i.parent.eventFields.id]}))[0]),this.parent.activeEventData={event:r,element:a}},e.prototype.generateOccurrence=function(e,t,i,a){var n=e[this.parent.eventFields.startTime],r=e[this.parent.eventFields.endTime],s=e[this.parent.eventFields.recurrenceRule],o=r.getTime()-n.getTime();t=new Date((t||this.parent.activeView.startDate()).getTime()-o);var l,c=e[this.parent.eventFields.recurrenceException];"Agenda"!==this.parent.currentView&&a&&(l=g(this.parent.activeView.startDate(),this.parent.activeView.endDate())+1);var p=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName(),d=Z(n,s,c,this.parent.activeViewOptions.firstDayOfWeek,l,t,this.parent.calendarMode,i,p);"Agenda"===this.parent.currentView&&-1===s.indexOf("COUNT")&&-1===s.indexOf("UNTIL")&&(sf.base.isNullOrUndefined(e.generatedDates)?e.generatedDates={start:new Date(d[0]),end:new Date(d[d.length-1])}:(d[0]<e.generatedDates.start.getTime()&&(e.generatedDates.start=new Date(d[0])),d[d.length-1]>e.generatedDates.end.getTime()&&(e.generatedDates.end=new Date(d[d.length-1]))));for(var h=[],u=0,f=d;u<f.length;u++){var m=f[u],v=sf.base.extend({},e,null,!0);v[this.parent.eventFields.startTime]=new Date(m),v[this.parent.eventFields.endTime]=new Date(new Date(m).setMilliseconds(o)),v[this.parent.eventFields.recurrenceID]=v[this.parent.eventFields.id],delete v[this.parent.eventFields.recurrenceException],delete v[this.parent.eventFields.followingID],v.Guid=this.generateGuid(),h.push(v)}return h},e.prototype.getParentEvent=function(e,t){var i;void 0===t&&(t=!1);do{(e=this.getFollowingEvent(e))&&(i=sf.base.extend({},e,null,!0))}while(e&&t);if(t&&i){var a=this.getEventCollections(i),n=a.follow.slice(-1)[0];a.occurrence.length>0&&!i[this.parent.eventFields.recurrenceException]&&(n=a.occurrence.slice(-1)[0]),n&&(i[this.parent.eventFields.recurrenceRule]=n[this.parent.eventFields.recurrenceRule])}return i},e.prototype.getEventCollections=function(e,t){var i=[],a=[],n=e;do{(n=this.getFollowingEvent(n,!0))&&i.push(n),a=a.concat(this.getOccurrenceEvent(n||e))}while(n);var r={};if(t){var s=this.parent.eventFields;r={follow:i.filter((function(e){return e[s.startTime]>=t[s.startTime]})),occurrence:a.filter((function(e){return e[s.startTime]>=t[s.startTime]}))}}else r={follow:i,occurrence:a};return r},e.prototype.getFollowingEvent=function(e,t){var i,a=this.parent.eventFields;return i=t?e[a.id]:e[a.recurrenceID]||e[a.followingID],this.parent.eventsData.filter((function(e){return e[t?a.followingID:a.id]===i})).shift()},e.prototype.isFollowingEvent=function(e,t){var i=e[this.parent.eventFields.startTime],a=t[this.parent.eventFields.startTime];return i.getHours()===a.getHours()&&i.getMinutes()===a.getMinutes()&&i.getSeconds()===a.getSeconds()},e.prototype.getOccurrenceEvent=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var a=t?"Guid":i?this.parent.eventFields.followingID:this.parent.eventFields.recurrenceID,n=t?"Guid":this.parent.eventFields.id;return(t?this.parent.eventsProcessed:this.parent.eventsData).filter((function(t){return t[a]===e[n]}))},e.prototype.getOccurrencesByID=function(e){for(var t=this.parent.eventFields,i=[],a=0,n=this.parent.eventsData.filter((function(i){return i[t.id]===e}));a<n.length;a++){var r=n[a];sf.base.isNullOrUndefined(r[t.recurrenceRule])||(i=i.concat(this.generateOccurrence(r)))}return i},e.prototype.getOccurrencesByRange=function(e,t){for(var i=this.parent.eventFields,a=[],n=0,r=this.parent.eventsData;n<r.length;n++){var s=r[n];sf.base.isNullOrUndefined(s[i.recurrenceRule])||(a=a.concat(this.generateOccurrence(s)))}return a.filter((function(a){return a[i.startTime]>=e&&a[i.endTime]<=t&&!sf.base.isNullOrUndefined(a[i.recurrenceID])}))},e.prototype.getDeletedOccurrences=function(e){var t,i=this,a=this.parent.eventFields,n=[];(t="string"==typeof e||"number"==typeof e?this.parent.eventsData.filter((function(t){return t[a.id]===e}))[0]:sf.base.extend({},e,null,!0))[a.recurrenceException]&&t[a.recurrenceException].split(",").forEach((function(r){if(0===i.parent.eventsData.filter((function(e){return e[a.recurrenceID]===t[a.id]&&e[a.recurrenceException]===r})).length){var s=J(r),o=sf.base.extend({},e,null,!0);o[a.recurrenceID]=t[a.id],delete o[a.followingID],o[a.recurrenceException]=r;var l=new Date(s.getTime()),c=t[a.endTime].getTime()-t[a.startTime].getTime(),p=new Date(l.getTime());p.setMilliseconds(c),o[a.startTime]=new Date(l.getTime()),o[a.endTime]=new Date(p.getTime()),n.push(o)}}));return n},e.prototype.applyResourceColor=function(e,t,i,a,n){if(this.parent.resourceBase){var r=this.parent.resourceBase.getResourceColor(t,a);r&&(e.style[i]=sf.base.isNullOrUndefined(n)?r:function(e,t){return e=e.replace("#",""),"rgba("+parseInt(e.substring(0,e.length/3),16)+", "+parseInt(e.substring(e.length/3,2*e.length/3),16)+", "+parseInt(e.substring(2*e.length/3,3*e.length/3),16)+", "+t+")"}(r,n))}},e.prototype.createBlockAppointmentElement=function(e,t){var i,a=e[this.parent.eventFields.subject]||this.parent.eventSettings.fields.subject.default,n=sf.base.createElement("div",{className:"e-block-appointment",attrs:{"data-id":"Appointment_"+e[this.parent.eventFields.id],"aria-readonly":"true","aria-selected":"false"}});if(sf.base.isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)){i=[sf.base.createElement("div",{className:"e-subject",innerHTML:a})]}else{var r=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",s=R(e,this.parent.eventFields);i=this.parent.getAppointmentTemplate()(s,this.parent,"eventTemplate",r,!1)}return sf.base.append(i,n),this.setWrapperAttributes(n,t),n},e.prototype.setWrapperAttributes=function(e,t){sf.base.isNullOrUndefined(this.cssClass)||sf.base.addClass([e],this.cssClass),this.parent.activeViewOptions.group.resources.length>0&&e.setAttribute("data-group-index",t.toString())},e.prototype.getReadonlyAttribute=function(e){return(e[this.parent.eventFields.isReadonly]||this.parent.readonly).toString()},e.prototype.isBlockRange=function(e){var t=this,i=e instanceof Array?e:[e],a=!1,n=this.parent.eventFields;return i.forEach((function(e){var i=[];sf.base.isNullOrUndefined(e[n.recurrenceRule])||!sf.base.isNullOrUndefined(e[n.recurrenceID])&&e[n.id]!==e[n.recurrenceID]?i.push(e):i=t.generateOccurrence(e);for(var r=0,s=i;r<s.length;r++){var o=s[r];if(t.filterBlockEvents(o).length>0){a=!0;break}}})),this.parent.uiStateValues.isBlock=a,a},e.prototype.getFilterEventsList=function(e,t){return new sf.data.DataManager(e).executeLocal((new sf.data.Query).where(t))},e.prototype.getSeriesEvents=function(e,t){var i,a,n=this.parent.eventFields;t=sf.base.isNullOrUndefined(t)?e[n.startTime]:t;var r,s=[],o=e[n.id],l=e[n.followingID],c="EditSeries"===this.parent.currentAction?"greaterthan":"greaterthanorequal";do{r=new sf.data.Predicate(n.followingID,"equal",o).and(new sf.data.Predicate(n.startTime,c,t)),i=(a=this.getFilterEventsList(this.parent.eventsData,r)).slice(-1)[0],sf.base.isNullOrUndefined(i)||i[n.id]===l?l=null:(s.push(i),o=i[n.id],l=i[n.followingID])}while(1===a.length&&!sf.base.isNullOrUndefined(i[n.followingID]));return s},e.prototype.getEditedOccurrences=function(e,t){for(var i,a=this.parent.eventFields,n=[],r=0,s=e;r<s.length;r++){var o=s[r],l=new sf.data.Predicate(a.recurrenceID,"equal",o[a.id]).or(new sf.data.Predicate(a.recurrenceID,"equal",o[a.followingID]).and(new sf.data.Predicate(a.recurrenceID,"notequal",void 0)));"EditFollowingEvents"!==this.parent.currentAction&&"DeleteFollowingEvents"!==this.parent.currentAction||(l=l.and(new sf.data.Predicate(a.startTime,"greaterthanorequal",t))),i=this.getFilterEventsList(this.parent.eventsData,l),n=n.concat(i)}return n},e.prototype.getRenderedDates=function(e){var t,i=0,a=e.length;if(e[0]<this.parent.minDate&&e[e.length-1]>this.parent.maxDate){for(var n=0;n<e.length;n++)e[n].getTime()===this.parent.minDate.getTime()&&(i=n),e[n].getTime()===this.parent.maxDate.getTime()&&(a=n);t=e.filter((function(t){return t>=e[i]&&t<=e[a]}))}return t},e.prototype.isValidEvent=function(e,t,i,a){var n=i.getTime()>a.startHour.getTime()&&t.getTime()<a.endHour.getTime(),r=a.startHour.getTime()<=t.getTime()&&e[this.parent.eventFields.startTime].getTime()>=a.startHour.getTime()&&e[this.parent.eventFields.endTime].getTime()<a.endHour.getTime()&&t.getTime()===i.getTime();return n||r},e}(),dt=function(){function e(){}return e.prototype.renderFormValidator=function(e,t,i){var a=this;this.element=i,this.formObj=new sf.inputs.FormValidator(e,{customPlacement:function(e,t){a.errorPlacement(e,t)},rules:t,validationComplete:function(e){a.validationComplete(e)},focusout:function(e){a.focusOut(e)}})},e.prototype.focusOut=function(e){var t=e.relatedTarget;t&&(t.classList.contains("e-dlg-closeicon-btn")||t.classList.contains("e-close")||t.classList.contains("e-all-day-cells")||t.classList.contains("e-header-cells")||t.classList.contains("e-event-details")||t.classList.contains("e-work-cells")||t.classList.contains("e-event-cancel"))?this.ignoreError=!0:this.ignoreError=!1},e.prototype.validationComplete=function(e){var t=this.element.querySelector("#"+e.inputName+"_Error");t&&(t.style.display="failure"===e.status?"":"none")},e.prototype.errorPlacement=function(e,t){var i=t.getAttribute("for");this.element.querySelector("#"+i+"_Error")||this.ignoreError||this.createTooltip(e,t,i,"")},e.prototype.createTooltip=function(e,t,i,a){var n,r,s=e.getBoundingClientRect();this.element.classList.contains("e-quick-popup-wrapper")?(n=this.element,r=this.element.getBoundingClientRect()):r=(n=this.element.querySelector(".e-schedule-dialog .e-dlg-content")).getBoundingClientRect();var o=sf.base.createElement("div",{className:"e-tooltip-wrap e-popup e-schedule-error",id:i+"_Error",styles:"display:"+a+";top:"+(s.bottom-r.top+n.scrollTop+9)+"px;left:"+(s.left-r.left+n.scrollLeft+s.width/2)+"px;"}),l=sf.base.createElement("div",{className:"e-tip-content"});l.appendChild(t);var c=sf.base.createElement("div",{className:"e-arrow-tip e-tip-top"});c.appendChild(sf.base.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),c.appendChild(sf.base.createElement("div",{className:"e-arrow-tip-inner e-tip-top"})),o.appendChild(l),o.appendChild(c),n.appendChild(o),o.style.left=parseInt(o.style.left,10)-o.offsetWidth/2+"px"},e.prototype.destroyToolTip=function(){if(this.element)for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-schedule-error"));e<t.length;e++){var i=t[e];sf.base.remove(i)}this.formObj&&this.formObj.element&&this.formObj.reset()},e.prototype.destroy=function(){this.formObj&&this.formObj.element&&!this.formObj.isDestroyed&&this.formObj.destroy()},e}(),ht=function(){function e(e){this.isMultipleEventSelect=!1,this.isCrudAction=!1,this.parent=e,this.l10n=this.parent.localeObj,this.fieldValidator=new dt,this.render(),this.addEventListener()}return e.prototype.render=function(){this.renderQuickPopup(),this.renderMorePopup(),this.renderQuickDialog()},e.prototype.renderQuickPopup=function(){var e=sf.base.createElement("div",{className:"e-quick-popup-wrapper e-popup-close"});this.parent.isAdaptive?(document.body.appendChild(e),sf.base.addClass([e],"e-device")):this.parent.element.appendChild(e),this.quickPopup=new sf.popups.Popup(e,{targetType:this.parent.isAdaptive?"container":"relative",enableRtl:this.parent.enableRtl,open:this.quickPopupOpen.bind(this),close:this.quickPopupClose.bind(this),hideAnimation:this.parent.isAdaptive?{name:"ZoomOut"}:{name:"FadeOut",duration:150},showAnimation:this.parent.isAdaptive?{name:"ZoomIn"}:{name:"FadeIn",duration:150},collision:this.parent.isAdaptive?{X:"fit",Y:"fit"}:this.parent.enableRtl?{X:"flip",Y:"fit"}:{X:"none",Y:"fit"},position:this.parent.isAdaptive||this.parent.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"},viewPortElement:this.parent.isAdaptive?document.body:this.parent.element,zIndex:this.parent.isAdaptive?1004:3}),this.quickPopup.isStringTemplate=!0},e.prototype.renderMorePopup=function(){var e='<div class="e-more-event-popup"><div class="e-more-event-header"><div class="e-more-event-close" title="'+this.l10n.getConstant("close")+'" tabindex="0"></div><div class="e-more-event-date-header"><div class="e-header-day"></div><div class="e-header-date e-navigate" tabindex="0"></div></div></div></div>',t=sf.base.createElement("div",{className:"e-more-popup-wrapper e-popup-close",innerHTML:e});this.parent.isAdaptive?(document.body.appendChild(t),sf.base.addClass([t],"e-device")):this.parent.element.appendChild(t),this.morePopup=new sf.popups.Popup(t,{targetType:this.parent.isAdaptive?"container":"relative",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut",duration:300},showAnimation:{name:"ZoomIn",duration:300},open:this.morePopupOpen.bind(this),close:this.morePopupClose.bind(this),collision:this.parent.isAdaptive?{X:"fit",Y:"fit"}:this.parent.enableRtl?{X:"flip",Y:"fit"}:{X:"flip",Y:"flip"},viewPortElement:this.parent.isAdaptive?document.body:this.parent.element,zIndex:this.parent.isAdaptive?1002:2}),this.morePopup.isStringTemplate=!0;var i=this.morePopup.element.querySelector(".e-more-event-close");this.renderButton("e-round",j+" e-close-icon",!1,i,this.closeClick),sf.base.EventHandler.add(this.morePopup.element.querySelector(".e-header-date"),"click",this.navigationClick,this)},e.prototype.renderQuickDialog=function(){var e=[{buttonModel:{cssClass:"e-quick-alertok e-flat",isPrimary:!0},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-quick-alertcancel e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-quick-dialog-cancel e-disable e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)}];if(this.parent.eventSettings.editFollowingEvents){var t={buttonModel:{cssClass:"e-quick-alertfollowing e-flat",isPrimary:!1},click:this.dialogButtonClick.bind(this)};e.splice(1,0,t)}this.quickDialog=new sf.popups.Dialog({animationSettings:{effect:"Zoom"},buttons:e,cssClass:"e-quick-dialog",closeOnEscape:!0,enableRtl:this.parent.enableRtl,beforeClose:this.beforeQuickDialogClose.bind(this),isModal:!0,position:{X:"center",Y:"center"},showCloseIcon:!0,target:document.body,visible:!1,width:"auto"});var i=sf.base.createElement("div",{id:this.parent.element.id+"QuickDialog"});this.parent.element.appendChild(i),this.quickDialog.appendTo(i),this.quickDialog.isStringTemplate=!0;var a=this.quickDialog.element.querySelector(".e-quick-alertok");a&&(a.setAttribute("aria-label",this.l10n.getConstant("occurrence")),a.setAttribute("aria-label",a.innerHTML));var n=this.quickDialog.element.querySelector(".e-quick-alertcancel");n&&(n.setAttribute("aria-label",this.l10n.getConstant("series")),n.setAttribute("aria-label",n.innerHTML)),this.quickDialog.element.querySelector(".e-dlg-closeicon-btn")&&this.quickDialog.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title",this.l10n.getConstant("close"))},e.prototype.renderButton=function(e,t,i,a,n){var r=new sf.buttons.Button({cssClass:e,disabled:i,enableRtl:this.parent.enableRtl,iconCss:t});r.appendTo(a),r.isStringTemplate=!0,sf.base.EventHandler.add(a,"click",n,this)},e.prototype.quickDialogClass=function(e){var t=["e-quick-dialog-occurrence-event","e-quick-dialog-series-event","e-quick-dialog-delete","e-quick-dialog-cancel","e-quick-dialog-alert-btn","e-disable"],i=this.quickDialog.element.querySelector(".e-quick-alertok"),a=this.quickDialog.element.querySelector(".e-quick-alertcancel"),n=this.quickDialog.element.querySelector(".e-quick-alertfollowing");switch(sf.base.removeClass([i,a],t),sf.base.addClass([this.quickDialog.element.querySelector(".e-quick-dialog-cancel")],"e-disable"),this.parent.eventSettings.editFollowingEvents&&(sf.base.addClass([n],"e-disable"),sf.base.removeClass([this.quickDialog.element],"e-following-events-dialog")),e){case"Recurrence":sf.base.addClass([i],"e-quick-dialog-occurrence-event"),sf.base.addClass([a],"e-quick-dialog-series-event"),this.parent.eventSettings.editFollowingEvents&&(sf.base.removeClass([n],"e-disable"),sf.base.addClass([this.quickDialog.element],"e-following-events-dialog"),sf.base.addClass([n],"e-quick-dialog-following-events"));break;case"Delete":sf.base.addClass([i],"e-quick-dialog-delete"),sf.base.addClass([a],"e-quick-dialog-cancel");break;case"Alert":sf.base.addClass([i],["e-quick-alertok","e-quick-dialog-alert-btn"]),sf.base.addClass([a],["e-quick-alertcancel","e-disable"])}},e.prototype.applyFormValidation=function(){var e=this.quickPopup.element.querySelector("."+B),t={};t[this.parent.eventSettings.fields.subject.name]=this.parent.eventSettings.fields.subject.validation,this.fieldValidator.renderFormValidator(e,t,this.quickPopup.element)},e.prototype.openRecurrenceAlert=function(){var e=this.quickDialog.element.querySelector(".e-quick-alertok");e&&(e.innerHTML=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteEvent":"editEvent"),e.setAttribute("aria-label",e.innerHTML));var t=this.quickDialog.element.querySelector(".e-quick-alertfollowing");t&&(t.innerHTML=this.l10n.getConstant("editFollowingEvent"),t.setAttribute("aria-label",t.innerHTML));var i=this.quickDialog.element.querySelector(".e-quick-alertcancel");i&&(i.innerHTML=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteSeries":"editSeries"),i.setAttribute("aria-label",i.innerHTML)),this.quickDialog.content=this.l10n.getConstant("editContent"),this.quickDialog.header=this.l10n.getConstant("Delete"===this.parent.currentAction?"deleteTitle":"editTitle"),this.quickDialogClass("Recurrence");var a=this.parent.activeEventData.event;if(this.parent.eventSettings.editFollowingEvents&&"EditOccurrence"===this.parent.currentAction&&!sf.base.isNullOrUndefined(a[this.parent.eventFields.recurrenceID])&&a[this.parent.eventFields.recurrenceID]!==a[this.parent.eventFields.id]){var n=this.quickDialog.element.querySelector(".e-quick-alertfollowing");sf.base.addClass([n],"e-disable")}this.showQuickDialog("RecurrenceAlert")},e.prototype.openRecurrenceValidationAlert=function(e){this.quickDialogClass("Alert");var t=this.quickDialog.element.querySelector(".e-quick-alertok");t.innerHTML=this.l10n.getConstant("ok"),t.setAttribute("aria-label",t.innerHTML);var i=this.quickDialog.element.querySelector(".e-quick-alertcancel");switch(i.innerHTML=this.l10n.getConstant("cancel"),i.setAttribute("aria-label",i.innerHTML),this.quickDialog.header=this.l10n.getConstant("alert"),e){case"wrongPattern":sf.base.addClass([i],"e-disable"),this.quickDialog.content=this.l10n.getConstant("wrongPattern");break;case"createError":sf.base.addClass([i],"e-disable"),this.quickDialog.content=this.l10n.getConstant("createError");break;case"sameDayAlert":sf.base.addClass([i],"e-disable"),this.quickDialog.content=this.l10n.getConstant("sameDayAlert");break;case"seriesChangeAlert":var a=this.quickDialog.element.querySelector(".e-quick-dialog-cancel");sf.base.removeClass([i,a],"e-disable"),this.quickDialog.content=this.l10n.getConstant("seriesChangeAlert"),t.innerHTML=this.l10n.getConstant("yes"),i.innerHTML=this.l10n.getConstant("no"),a.innerHTML=this.l10n.getConstant("cancel")}(!this.parent.enableRecurrenceValidation&&"wrongPattern"===e||this.parent.enableRecurrenceValidation)&&this.showQuickDialog("RecurrenceValidationAlert")},e.prototype.openDeleteAlert=function(){if(!this.parent.activeViewOptions.readonly){var e=this.quickDialog.element.querySelector(".e-quick-alertok");e&&(e.innerHTML=this.l10n.getConstant("delete"),e.setAttribute("aria-label",e.innerHTML));var t=this.quickDialog.element.querySelector(".e-quick-alertcancel");t&&(t.innerHTML=this.l10n.getConstant("cancel"),t.setAttribute("aria-label",t.innerHTML)),this.quickDialog.content=this.parent.activeEventData.event.length>1?this.l10n.getConstant("deleteMultipleContent"):this.l10n.getConstant("deleteContent"),this.quickDialog.header=this.parent.activeEventData.event.length>1?this.l10n.getConstant("deleteMultipleEvent"):this.l10n.getConstant("deleteEvent"),this.quickDialogClass("Delete"),this.showQuickDialog("DeleteAlert")}},e.prototype.openValidationError=function(e,t){this.quickDialog.header=this.l10n.getConstant("alert"),this.quickDialog.content=this.l10n.getConstant(e);var i=this.quickDialog.element.querySelector(".e-quick-alertok");i&&(i.innerHTML=this.l10n.getConstant("ok"),i.setAttribute("aria-label",i.innerHTML));var a=this.quickDialog.element.querySelector(".e-quick-alertcancel");a&&(a.innerHTML=this.l10n.getConstant("cancel"),i.setAttribute("aria-label",a.innerHTML)),this.quickDialogClass("Alert"),this.showQuickDialog("ValidationAlert",t)},e.prototype.showQuickDialog=function(e,t){var i=this;this.quickDialog.dataBind();var a={type:e,cancel:!1,data:sf.base.extend({},t||this.parent.activeEventData.event,null,!0),element:this.quickDialog.element};this.parent.trigger("popupOpen",a,(function(e){e.cancel||i.quickDialog.show()}))},e.prototype.createMoreEventList=function(e,t,i){var a=this,n=this.parent.eventFields,r=sf.base.createElement("div",{className:"e-more-event-content"}),s=sf.base.createElement("div",{className:"e-more-appointment-wrapper"});if(0===e.length)s=sf.base.createElement("div",{className:"e-more-event-content",innerHTML:this.l10n.getConstant("emptyContainer")});else for(var o=function(e){var r=e[n.subject]||l.parent.eventSettings.fields.subject.default,o=sf.base.createElement("div",{className:"e-appointment",attrs:{"data-id":""+e[n.id],"data-guid":e.Guid,role:"button",tabindex:"0","aria-readonly":l.parent.eventBase.getReadonlyAttribute(e),"aria-selected":"false","aria-grabbed":"true","aria-label":l.parent.getAnnocementString(e)}}),c=void 0;if(sf.base.isNullOrUndefined(l.parent.activeViewOptions.eventTemplate))o.appendChild(sf.base.createElement("div",{className:"e-subject",innerHTML:r}));else{var p=l.parent.element.id+"_"+l.parent.activeViewOptions.eventTemplateName+"eventTemplate",d=R(e,l.parent.eventFields);c=l.parent.getAppointmentTemplate()(d,l.parent,"eventTemplate",p,!1),sf.base.append(c,o)}if(l.parent.activeViewOptions.group.resources.length>0&&o.setAttribute("data-group-index",i),!sf.base.isNullOrUndefined(e[n.recurrenceRule])){var h=e[n.id]===e[n.recurrenceID]?"e-recurrence-icon":"e-recurrence-edit-icon";o.appendChild(sf.base.createElement("div",{className:j+" "+h}))}var u={data:sf.base.extend({},e,null,!0),element:o,cancel:!1};l.parent.trigger("eventRendered",u,(function(i){i.cancel||(s.appendChild(o),a.parent.eventBase.wireAppointmentEvents(o,e,a.parent.isAdaptive),a.parent.eventBase.applyResourceColor(o,e,"backgroundColor",t))}))},l=this,c=0,p=e;c<p.length;c++){o(p[c])}return r.appendChild(s),r},e.prototype.tapHoldEventPopup=function(e){var t=sf.base.closest(e.target,".e-appointment");this.isMultipleEventSelect=!1,this.parent.selectedElements=[],this.isMultipleEventSelect=!0,this.parent.eventBase.getSelectedEventElements(t),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents();var i=t.getAttribute("data-guid"),a=this.parent.eventBase.getEventByGuid(i);if(!sf.base.isNullOrUndefined(a)){var n=a[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"),r='<div class="e-multiple-event-popup"><div class="e-popup-header"><button class="e-close" title="'+this.l10n.getConstant("close")+'"></button><div class="e-subject">'+n+'</div><button class="e-edit" title="'+this.l10n.getConstant("edit")+'"></button><button class="e-delete" title="'+this.l10n.getConstant("delete")+'"></button></div></div>';this.quickPopup.element.innerHTML=r;var s=this.quickPopup.element.querySelector(".e-close");this.renderButton("e-flat e-round e-small",j+" e-close-icon",!1,s,this.closeClick);var o=this.parent.activeViewOptions.readonly||a[this.parent.eventFields.isReadonly],l=this.quickPopup.element.querySelector(".e-edit");this.renderButton("e-flat e-round e-small",j+" e-edit-icon",o,l,this.editClick);var c=this.quickPopup.element.querySelector(".e-delete");this.renderButton("e-flat e-round e-small",j+" e-delete-icon",o,c,this.deleteClick),this.beforeQuickPopupOpen(t)}},e.prototype.isCellBlocked=function(e){var t={};if(t[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,t[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,t[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.activeViewOptions.group.resources.length>0){var i=e.element instanceof Array?e.element[0]:e.element,a=parseInt(i.getAttribute("data-group-index"),10);this.parent.resourceBase.setResourceValues(t,isNaN(a)?null:a)}return this.parent.eventBase.isBlockRange(t)},e.prototype.cellClick=function(e){var t=new Date(e.startTime.getTime());if(this.parent.showQuickInfo&&this.parent.eventSettings.allowAdding&&"MonthAgenda"!==this.parent.currentView&&!this.isCellBlocked(e)&&this.parent.isMinMaxDate(new Date(t.setHours(0,0,0,0)))){var i=e.event.target;if(this.parent.isAdaptive){this.quickPopupHide();var a=this.parent.element.querySelector(".e-new-event");sf.base.isNullOrUndefined(a)&&(a=sf.base.createElement("div",{className:"e-new-event",innerHTML:'<div class="e-title">+ '+this.l10n.getConstant("newEvent")+"</div>"}));var n=sf.base.closest(i,".e-work-cells,.e-all-day-cells");n&&n.appendChild(a)}else{var r=sf.base.closest(i,".e-work-cells,.e-all-day-cells,.e-header-cells");if(!sf.base.isNullOrUndefined(r)&&!i.classList.contains("e-more-indicator"))if(this.quickPopup.relateTo===r&&this.quickPopup.element.classList.contains(I)){var s=this.quickPopup.element.querySelector(".e-subject");s&&s.focus()}else{this.resetQuickPopupTemplates();var o={};o[this.parent.eventFields.startTime]=this.parent.activeCellsData.startTime,o[this.parent.eventFields.endTime]=this.parent.activeCellsData.endTime,o[this.parent.eventFields.isAllDay]=this.parent.activeCellsData.isAllDay;var l=sf.base.createElement("div",{className:"e-cell-popup"});l.appendChild(this.getPopupHeader("Cell",o)),l.appendChild(this.getPopupContent("Cell",e,o)),l.appendChild(this.getPopupFooter("Cell",o));var c=l.querySelector(".e-subject");c&&sf.inputs.Input.createInput({element:c,properties:{placeholder:this.l10n.getConstant("addTitle")}});var p=l.querySelector(".e-close");p&&this.renderButton("e-flat e-round e-small",j+" e-close-icon",!1,p,this.popupClose);var d=l.querySelector(".e-event-details");d&&this.renderButton("e-flat","",!1,d,this.detailsClick);var h=l.querySelector(".e-event-create");h&&this.renderButton("e-flat e-primary","",this.parent.activeViewOptions.readonly,h,this.saveClick),this.quickPopup.content=l,this.quickPopup.dataBind(),this.applyFormValidation(),this.morePopup&&this.morePopup.hide(),this.quickPopup.relateTo=r,this.beforeQuickPopupOpen(r)}}}else this.quickPopupHide()},e.prototype.isSameEventClick=function(e){if(this.quickPopup.relateTo===sf.base.closest(e.element,".e-appointment")&&this.quickPopup.element.classList.contains(I)){var t=this.quickPopup.element.querySelector(".e-edit");if(t&&t.focus(),!this.parent.isAdaptive){var i=this.quickPopup.element.querySelector(".e-event-edit");i&&i.focus()}return!0}return!1},e.prototype.isQuickTemplate=function(e){return"Both"===this.parent.quickInfoTemplates.templateType||this.parent.quickInfoTemplates.templateType===e},e.prototype.eventClick=function(e){if(this.parent.eventTooltip&&this.parent.eventTooltip.close(),this.parent.showQuickInfo)if(this.parent.isAdaptive&&this.isMultipleEventSelect)this.updateTapHoldEventPopup(sf.base.closest(e.element,".e-appointment"));else{if(this.isSameEventClick(e))return;this.resetQuickPopupTemplates();var t=e.event,i=sf.base.createElement("div",{className:"e-event-popup"});i.appendChild(this.getPopupHeader("Event",t)),i.appendChild(this.getPopupContent("Event",e,t)),i.appendChild(this.getPopupFooter("Event",t));var a=this.parent.activeViewOptions.readonly||t[this.parent.eventFields.isReadonly],n=!this.parent.eventSettings.allowEditing||a,r=!this.parent.eventSettings.allowDeleting||a,s=i.querySelector(".e-edit"),o="e-flat e-round e-small";s&&this.renderButton(o,j+" e-edit-icon",n,s,this.editClick);var l=i.querySelector(".e-delete");l&&this.renderButton(o,j+" e-delete-icon",r,l,this.deleteClick);var c=i.querySelector(".e-close");c&&this.renderButton(o,j+" e-close-icon",!1,c,this.popupClose);var p=i.querySelector(".e-event-edit");p&&this.renderButton("e-flat e-primary","",n,p,this.editClick);var d=i.querySelector(".e-event-delete");d&&this.renderButton("e-flat","",r,d,this.deleteClick),this.quickPopup.content=i,this.quickPopup.dataBind(),this.morePopup&&!sf.base.closest(e.element,".e-more-appointment-wrapper")&&this.morePopup.hide(),this.quickPopup.relateTo=this.parent.isAdaptive?document.body:sf.base.closest(e.element,".e-appointment"),this.beforeQuickPopupOpen(e.element)}},e.prototype.getPopupHeader=function(e,t){var i=sf.base.createElement("div",{className:"e-popup-header"});if(this.isQuickTemplate(e)&&this.parent.quickInfoTemplates.header){var a=sf.base.extend({},t,sf.base.isBlazor()?{elementType:e.toLowerCase(),startTimeValue:M(t[this.parent.eventFields.startTime]),endTimeValue:M(t[this.parent.eventFields.endTime])}:{elementType:e.toLowerCase()},!0),n=this.parent.element.id,r=[].slice.call(this.parent.getQuickInfoTemplatesHeader()(a,this.parent,"header",n+"_headerTemplate",!1));sf.base.append([].slice.call(r),i)}else{var s=void 0;switch(e){case"Cell":s='<div class="e-header-icon-wrapper"><button class="e-close" title="'+this.l10n.getConstant("close")+'"></button></div>';break;case"Event":var o=this.getFormattedString(t);s='<div class="e-header-icon-wrapper"><button class="e-edit '+j+'" title="'+this.l10n.getConstant("edit")+'"></button><button class="e-delete '+j+'" title="'+this.l10n.getConstant("delete")+'"></button><button class="e-close" title="'+this.l10n.getConstant("close")+'"></button></div><div class="e-subject-wrap"><div class="e-subject '+q+'" title="'+o.eventSubject+'">'+o.eventSubject+"</div></div >"}var l=sf.base.createElement("div",{innerHTML:s});sf.base.append([].slice.call(l.childNodes),i)}return i},e.prototype.getPopupContent=function(e,t,i){var a=sf.base.createElement("div",{className:"e-popup-content"});if(this.isQuickTemplate(e)&&this.parent.quickInfoTemplates.content){var n=sf.base.extend({},i,sf.base.isBlazor()?{elementType:e.toLowerCase(),startTimeValue:M(i[this.parent.eventFields.startTime]),endTimeValue:M(i[this.parent.eventFields.endTime])}:{elementType:e.toLowerCase()},!0),r=this.parent.element.id,s=[].slice.call(this.parent.getQuickInfoTemplatesContent()(n,this.parent,"content",r+"_contentTemplate",!1));sf.base.append([].slice.call(s),a)}else{var o=void 0,l=this.getResourceText(t,e.toLowerCase());switch(e){case"Cell":var c=this.getFormattedString(i);o='<table class="e-popup-table"><tbody><tr><td><form class="'+B+'" onsubmit="return false;"><input class="e-subject e-field" type="text" name="'+this.parent.eventFields.subject+'" /></form></td></tr><tr><td><div class="e-date-time"><div class="e-date-time-icon '+j+'"></div><div class="e-date-time-details '+q+'">'+c.details+"</div></div>"+(this.parent.activeViewOptions.group.resources.length>0?'<div class="e-resource"><div class="e-resource-icon '+j+' "></div><div class="e-resource-details '+q+'">'+l+"</div></div>":"")+"</td></tr></tbody></table>";break;case"Event":var p=this.getFormattedString(i);o='<div class="e-date-time"><div class="e-date-time-icon '+j+'"></div><div class="e-date-time-wrapper '+q+'"><div class="e-date-time-details '+q+'">'+p.details+"</div>",i[this.parent.eventFields.recurrenceRule]&&(o+='<div class="e-recurrence-summary '+q+'">'+this.getRecurrenceSummary(i)+"</div>"),o+="</div></div>",i[this.parent.eventFields.location]&&(o+='<div class="e-location"><div class="e-location-icon '+j+'"></div><div class="e-location-details '+q+'">'+i[this.parent.eventFields.location]+"</div></div>"),(i[this.parent.eventFields.startTimezone]||i[this.parent.eventFields.endTimezone])&&(o+='<div class="e-time-zone"><div class="e-time-zone-icon '+j+'"></div><div class="e-time-zone-details '+q+'">'+this.getTimezone(i)+"</div></div>"),i[this.parent.eventFields.description]&&(o+='<div class="e-description"><div class="e-description-icon '+j+'"></div><div class="e-description-details '+q+'">'+i[this.parent.eventFields.description]+"</div></div>"),this.parent.resourceCollection.length>0&&(o+='<div class="e-resource"><div class="e-resource-icon '+j+'"></div><div class="e-resource-details '+q+'">'+l+"</div></div>")}var d=sf.base.createElement("div",{innerHTML:o});sf.base.append([].slice.call(d.childNodes),a)}return a},e.prototype.getPopupFooter=function(e,t){var i=sf.base.createElement("div",{className:"e-popup-footer"});if(this.isQuickTemplate(e)&&this.parent.quickInfoTemplates.footer){var a=sf.base.extend({},t,sf.base.isBlazor()?{elementType:e.toLowerCase(),startTimeValue:M(t[this.parent.eventFields.startTime]),endTimeValue:M(t[this.parent.eventFields.endTime])}:{elementType:e.toLowerCase()},!0),n=this.parent.element.id,r=[].slice.call(this.parent.getQuickInfoTemplatesFooter()(a,this.parent,"footer",n+"_footerTemplate",!1));sf.base.append([].slice.call(r),i)}else{var s=void 0;switch(e){case"Cell":s='<button class="e-event-details '+q+'" title="'+this.l10n.getConstant("moreDetails")+'">'+this.l10n.getConstant("moreDetails")+'</button><button class="e-event-create '+q+'" title="'+this.l10n.getConstant("save")+'">'+this.l10n.getConstant("save")+"</button>";break;case"Event":s=this.parent.isAdaptive?"":'<button class="e-event-edit '+q+'" title="'+this.l10n.getConstant("edit")+'">'+this.l10n.getConstant("edit")+'</button><button class="e-event-delete '+q+'" title="'+this.l10n.getConstant("delete")+'">'+this.l10n.getConstant("delete")+"</button>"}var o=sf.base.createElement("div",{innerHTML:s});sf.base.append([].slice.call(o.childNodes),i)}return i},e.prototype.getResourceText=function(e,t){if(0===this.parent.resourceCollection.length)return null;var i="";if(0===this.parent.activeViewOptions.group.resources.length){var a=this.parent.resourceBase.resourceCollection.slice(-1)[0],n=a.dataSource,r=0,s=e.event;n.forEach((function(e,t){e[a.idField]===s[a.field]&&(r=t)})),i=n[r][a.textField]}else if("event"===t){for(var o,l=e.event,c=(n=void 0,this.parent.resourceBase.resourceCollection.length-1);c>=0;c--)if(n=l[this.parent.resourceBase.resourceCollection[c].field],!sf.base.isNullOrUndefined(n)){o=this.parent.resourceBase.resourceCollection[c];break}Array.isArray(n)||(n=[n]);var p=[],d=o.dataSource;n.map((function(e){var t=x(d,o.idField,e),i=d[t][o.textField];i&&p.push(i)})),i=p.join(", ")}else{var h=e,u=sf.base.isNullOrUndefined(h.groupIndex)?0:h.groupIndex,f=this.parent.resourceBase.lastResourceLevel[u];i=f.resourceData[f.resource.textField]}return i},e.prototype.getFormattedString=function(e){var t=this.parent.eventFields,i=e[t.subject]||this.l10n.getConstant("noTitle"),a=e[t.startTime],n=e[t.endTime],r=this.getDateFormat(a,"long","MMMM d, y"),s=e[t.isAllDay]&&0===n.getHours()&&0===n.getMinutes()?this.getDateFormat(y(new Date(n.getTime()),-1),"long","MMMM d, y"):this.getDateFormat(n,"long","MMMM d, y"),o=this.parent.getTimeString(a),l=this.parent.getTimeString(n),c="",p=n.getDate()!==a.getDate()&&(n.getTime()-a.getTime())/36e5<24?1:0;return e[t.isAllDay]?(c=r+" ("+this.l10n.getConstant("allDay")+")",(n.getTime()-a.getTime())/864e5>1&&(c+="&nbsp;-&nbsp;"+s+" ("+this.l10n.getConstant("allDay")+")")):c=(n.getTime()-a.getTime())/864e5>=1||p>0?r+" ("+o+")&nbsp;-&nbsp;"+s+" ("+l+")":r+" ("+o+"&nbsp;-&nbsp;"+l+")",{eventSubject:i,details:c}},e.prototype.moreEventClick=function(e,t,i){var a=this;this.quickPopupHide(!0);var n=this.morePopup.element.querySelector(".e-more-event-content");n&&sf.base.remove(n);var r=e.date.getTime().toString(),s=sf.base.closest(e.element,".e-more-indicator,.e-work-cells"),o=this.parent.globalize.formatDate(e.date,{format:"E",calendar:this.parent.getCalendarMode()});this.morePopup.element.querySelector(".e-header-day").innerHTML=P(o,"single");var l,c=this.morePopup.element.querySelector(".e-header-date");c.innerHTML=this.getDateFormat(e.date,"d","d"),c.setAttribute("data-date",r),c.setAttribute("data-end-date",t.getTime().toString()),sf.base.isNullOrUndefined(i)||(c.setAttribute("data-group-index",i),l=this.parent.resourceBase.lastResourceLevel[parseInt(i,10)].groupOrder);var p=this.createMoreEventList(e.event,l,i);if(this.morePopup.element.querySelector(".e-more-event-popup").appendChild(p),sf.base.removeClass(this.morePopup.element.querySelector(".e-more-event-date-header").childNodes,"e-current-date"),m(e.date).getTime()===m(this.parent.getCurrentTime()).getTime()&&sf.base.addClass(this.morePopup.element.querySelector(".e-more-event-date-header").childNodes,"e-current-date"),!this.parent.isAdaptive)if(-1!==this.parent.currentView.indexOf("Timeline")){var d=s.getAttribute("data-group-index"),h=new Date(parseInt(s.getAttribute("data-start-date"),10));h.setHours(h.getHours(),h.getMinutes(),0);var u=this.parent.getMsFromDate(h).toString();sf.base.isNullOrUndefined(d)?this.morePopup.relateTo=this.parent.element.querySelector('.e-content-wrap tbody tr td[data-date="'+u+'"]'):this.morePopup.relateTo=this.parent.element.querySelector('.e-content-wrap tbody tr td[data-group-index="'+d+'"][data-date="'+u+'"]')}else this.morePopup.relateTo=sf.base.closest(s,".e-work-cells");this.parent.updateEventTemplates();var f={type:"EventContainer",cancel:!1,element:this.morePopup.element};sf.base.isBlazor()||(f.data=e),this.parent.trigger("popupOpen",f,(function(e){e.cancel||a.morePopup.show()}))},e.prototype.saveClick=function(){this.isCrudAction=!0,this.quickPopupHide()},e.prototype.detailsClick=function(){var e=this.quickPopup.element.querySelector(".e-subject");if(e&&""!==e.value)sf.base.extend(this.parent.activeCellsData,{subject:e.value});this.isCrudAction=!1,this.fieldValidator.destroyToolTip(),this.quickPopupHide(),this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add")},e.prototype.editClick=function(){this.quickPopupHide(!0);var e=this.parent.activeEventData.event;this.parent.currentAction="EditSeries",sf.base.isNullOrUndefined(e[this.parent.eventFields.recurrenceRule])?this.parent.eventWindow.openEditor(e,this.parent.currentAction):(this.parent.currentAction="EditOccurrence",this.openRecurrenceAlert())},e.prototype.deleteClick=function(){this.quickPopupHide(!0),this.parent.currentAction="Delete",this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]?this.openRecurrenceAlert():this.openDeleteAlert()},e.prototype.updateMoreEventContent=function(){if(!this.morePopup.element.classList.contains("e-popup-close")){var e=this.morePopup.element.querySelector(".e-more-event-content");e&&sf.base.remove(e);var t,i,a=this.morePopup.element.querySelector(".e-header-date"),n=new Date(parseInt(a.getAttribute("data-date"),10)),r=new Date(parseInt(a.getAttribute("data-end-date"),10)),s=a.getAttribute("data-group-index");sf.base.isNullOrUndefined(s)||(i=(t=this.parent.resourceBase.lastResourceLevel[parseInt(s,10)]).groupOrder);var o=this.parent.eventBase.filterEvents(n,r,this.parent.eventsProcessed,t),l=this.createMoreEventList(o,i,s);this.morePopup.element.querySelector(".e-more-event-popup").appendChild(l)}},e.prototype.closeClick=function(){this.quickPopupHide(),this.morePopup.hide()},e.prototype.dialogButtonClick=function(e){this.quickDialog.hide();var t=e.target,i=this.quickDialog.element.querySelector(".e-quick-alertcancel"),a=this.parent.activeEventData.event;if(t.classList.contains("e-quick-dialog-occurrence-event"))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteOccurrence":"EditOccurrence",this.parent.currentAction){case"EditOccurrence":this.parent.eventWindow.openEditor(a,this.parent.currentAction);break;case"DeleteOccurrence":this.parent.crudModule.deleteEvent(a,this.parent.currentAction)}else if(t.classList.contains("e-quick-dialog-following-events"))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteFollowingEvents":"EditFollowingEvents",this.parent.currentAction){case"EditFollowingEvents":this.parent.eventWindow.openEditor(a,this.parent.currentAction);break;case"DeleteFollowingEvents":this.parent.crudModule.deleteEvent(a,this.parent.currentAction)}else if(t.classList.contains("e-quick-dialog-series-event"))switch(this.parent.currentAction="Delete"===this.parent.currentAction?"DeleteSeries":"EditSeries",this.parent.currentAction){case"EditSeries":this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(a,!0),this.parent.currentAction);break;case"DeleteSeries":this.parent.crudModule.deleteEvent(a,this.parent.currentAction)}else t.classList.contains("e-quick-dialog-delete")?this.parent.crudModule.deleteEvent(a,this.parent.currentAction):!i.classList.contains("e-disable")&&(t.classList.contains("e-quick-alertok")||t.classList.contains("e-quick-alertcancel")&&!i.classList.contains("e-quick-dialog-cancel"))&&(this.parent.uiStateValues.isIgnoreOccurrence=t.classList.contains("e-quick-alertcancel"),this.parent.eventWindow.eventSave(this.l10n.getConstant("ok")))},e.prototype.updateTapHoldEventPopup=function(e){var t=this.parent.eventBase.getSelectedEventElements(e);if(this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),t.length>0){var i=this.parent.eventBase.getEventByGuid(t[0].getAttribute("data-guid")),a=1===t.length?i[this.parent.eventFields.subject]||this.l10n.getConstant("noTitle"):"("+t.length+")&nbsp;"+this.l10n.getConstant("selectedItems");this.quickPopup.element.querySelector(".e-subject").innerHTML=a,t.length>1?sf.base.addClass([this.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden"):sf.base.removeClass([this.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden")}else this.parent.selectedElements=[],this.quickPopupHide()},e.prototype.getTimezone=function(e){var t="";return t+=e[this.parent.eventFields.startTimezone]||"",t+=""===t?"":" - ",t+=e[this.parent.eventFields.endTimezone]||""},e.prototype.getRecurrenceSummary=function(e){var t=this.parent.eventWindow.getRecurrenceEditorInstance();if(t){var i=t.getRuleSummary(e[this.parent.eventFields.recurrenceRule]);return i.charAt(0).toUpperCase()+i.slice(1)}return""},e.prototype.getDateFormat=function(e,t,i){return P(sf.base.isBlazor()?this.parent.globalize.formatDate(e,{format:i,calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e,{skeleton:t,calendar:this.parent.getCalendarMode()}),"single")},e.prototype.getDataFromTarget=function(e){if(e.classList.contains("e-appointment"))return this.parent.activeEventData.event;var t={startTime:this.parent.activeCellsData.startTime,endTime:this.parent.activeCellsData.endTime,isAllDay:this.parent.activeCellsData.isAllDay,groupIndex:this.parent.activeCellsData.groupIndex},i=this.parent.activeCellsData;return this.parent.eventWindow.convertToEventData(i,t),t},e.prototype.beforeQuickDialogClose=function(){var e=this,t={type:sf.base.isNullOrUndefined(this.parent.activeEventData.event)?"ValidationAlert":sf.base.isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])?"DeleteAlert":"RecurrenceAlert",cancel:!1,data:this.parent.activeEventData.event,element:this.quickDialog.element};this.parent.trigger("popupClose",t,(function(t){(t=e.serializingData(t)).cancel||e.parent.eventBase.focusElement()}))},e.prototype.beforeQuickPopupOpen=function(e,t){var i=this;if(sf.base.isBlazor()&&this.isQuickInfoTemplates()&&sf.base.isNullOrUndefined(t))this.updateQuickPopupTemplates(e);else{var a=this.quickPopup.element.querySelector(".e-event-popup"),n=this.parent.isAdaptive?a?"ViewEventInfo":"EditEventInfo":"QuickInfo",r={type:n,cancel:!1,data:sf.base.extend({},this.getDataFromTarget(e),null,!0),target:e,element:this.quickPopup.element};this.parent.trigger("popupOpen",r,(function(t){if(t.cancel)i.quickPopupHide(),i.destroyButtons(),t.element.classList.contains(I)&&i.quickPopupClose(),i.resetQuickPopupTemplates(),A(i.quickPopup.element),i.isMultipleEventSelect=!1;else{var r=i.quickPopup.element.style.display;if(i.quickPopup.element.style.display="block",i.parent.isAdaptive)i.quickPopup.element.removeAttribute("style"),i.quickPopup.element.style.display="block",i.quickPopup.element.style.height=sf.base.formatUnit("EditEventInfo"===n?65:window.innerHeight);else{i.quickPopup.offsetX=10,i.quickPopup.collision={X:i.parent.enableRtl?"flip":"none",Y:"fit"},i.quickPopup.position={X:i.parent.enableRtl?"left":"right",Y:"top"},i.quickPopup.dataBind(),i.quickPopup.refreshPosition(null,!0);var s=sf.popups.isCollide(i.quickPopup.element,i.parent.element);if(s.indexOf(i.parent.enableRtl?"left":"right")>-1)i.quickPopup.offsetX=-e.offsetWidth-10-i.quickPopup.element.offsetWidth,i.quickPopup.dataBind(),sf.popups.isCollide(i.quickPopup.element,i.parent.element).indexOf("left")>-1&&(i.quickPopup.position={X:"center",Y:"center"},i.quickPopup.collision={X:"fit",Y:"fit"},i.quickPopup.offsetX=-i.quickPopup.element.offsetWidth/2,i.quickPopup.dataBind());if(i.parent.virtualScrollModule&&(s.indexOf("top")>-1||s.indexOf("bottom")>-1)){var o=l(i.parent.element.querySelector(".e-content-wrap table"));i.quickPopup.offsetY=o,i.quickPopup.dataBind()}}a&&i.applyEventColor(),i.quickPopup.element.style.display=r,i.quickPopup.dataBind(),i.quickPopup.show()}}))}},e.prototype.isQuickInfoTemplates=function(){return!sf.base.isNullOrUndefined(this.parent.quickInfoTemplates.header||this.parent.quickInfoTemplates.content||this.parent.quickInfoTemplates.footer)},e.prototype.applyEventColor=function(){var e="";e="Agenda"===this.parent.currentView||"MonthAgenda"===this.parent.currentView?this.parent.enableRtl?"border-right-color":"border-left-color":"background-color";var t=this.parent.activeEventData.element.style[e];if(""!==t){var i=this.quickPopup.element.querySelector(".e-popup-header"),a=this.quickPopup.element.querySelector(".e-popup-footer");a&&a.offsetParent&&(i=this.quickPopup.element.querySelector(".e-subject"))&&(i.style.borderLeftColor=t,t="rgba("+t.match(/\d+/g).join()+",0.3)"),i&&(i.style.backgroundColor=t)}},e.prototype.quickPopupOpen=function(){if(this.parent.isAdaptive)this.quickPopup.element.style.top="0px";else if(this.quickPopup.element.querySelector(".e-cell-popup")){var e=this.quickPopup.element.querySelector(".e-subject");e&&e.focus()}else{var t=this.quickPopup.element.querySelector(".e-event-edit");t&&t.focus();var i=this.quickPopup.element.querySelector(".e-edit");i&&i.focus()}},e.prototype.updateQuickPopupTemplates=function(e){var t=this,i={header:!this.parent.quickInfoTemplates.header,content:!this.parent.quickInfoTemplates.content,footer:!this.parent.quickInfoTemplates.footer};this.parent.quickInfoTemplates.header&&sf.base.updateBlazorTemplate(this.parent.element.id+"_headerTemplate","HeaderTemplate",this.parent.quickInfoTemplates,null,(function(){i.header=!0,t.quickPopupShow(i,e)})),this.parent.quickInfoTemplates.content&&sf.base.updateBlazorTemplate(this.parent.element.id+"_contentTemplate","ContentTemplate",this.parent.quickInfoTemplates,null,(function(){i.content=!0,t.quickPopupShow(i,e)})),this.parent.quickInfoTemplates.footer&&sf.base.updateBlazorTemplate(this.parent.element.id+"_footerTemplate","FooterTemplate",this.parent.quickInfoTemplates,null,(function(){i.footer=!0,t.quickPopupShow(i,e)}))},e.prototype.quickPopupShow=function(e,t){e.header&&e.content&&e.footer&&this.beforeQuickPopupOpen(t,!0)},e.prototype.resetQuickPopupTemplates=function(){sf.base.isBlazor()&&this.isQuickInfoTemplates()&&(sf.base.removeClass([this.quickPopup.element],I),sf.base.addClass([this.quickPopup.element],"e-popup-close"),this.parent.quickInfoTemplates.header&&sf.base.resetBlazorTemplate(this.parent.element.id+"_headerTemplate","HeaderTemplate"),this.parent.quickInfoTemplates.content&&sf.base.resetBlazorTemplate(this.parent.element.id+"_contentTemplate","ContentTemplate"),this.parent.quickInfoTemplates.footer&&sf.base.resetBlazorTemplate(this.parent.element.id+"_footerTemplate","FooterTemplate"))},e.prototype.quickPopupClose=function(){this.resetQuickPopupTemplates(),this.parent.eventBase.focusElement(),this.quickPopup.relateTo="e-work-cells",this.fieldValidator.destroyToolTip(),this.quickPopup.element.querySelectorAll(".e-formvalidator").length&&this.fieldValidator.destroy(),this.destroyButtons(),A(this.quickPopup.element)},e.prototype.morePopupOpen=function(){if(this.parent.isAdaptive)return this.morePopup.element.style.top="0px",this.morePopup.element.style.left="0px",void(this.morePopup.element.style.height=sf.base.formatUnit(window.innerHeight));this.morePopup.element.querySelector(".e-header-date").focus(),this.morePopup.refreshPosition()},e.prototype.morePopupClose=function(){var e=this.parent.element.querySelector(".e-more-appointment-wrapper");e&&sf.base.remove(e)},e.prototype.popupClose=function(){this.isCrudAction=!1,this.quickPopupHide(!0)},e.prototype.quickPopupHide=function(e){var t=this;if(this.quickPopup.element.classList.contains(I)){var i,a=this.quickPopup.element.querySelector(".e-cell-popup");if(a){var n=this.quickPopup.element.querySelector(".e-formvalidator");if(this.isCrudAction&&n&&!n.ej2_instances[0].validate())return;var r=this.parent.eventFields,s=this.parent.eventWindow.getObjectFromFormData("e-quick-popup-wrapper");this.parent.eventWindow.setDefaultValueToObject(s),s[r.id]=this.parent.eventBase.getEventMaxID(),s[r.startTime]=this.parent.activeCellsData.startTime,s[r.endTime]=this.parent.activeCellsData.endTime,s[r.isAllDay]=this.parent.activeCellsData.isAllDay,this.parent.resourceBase&&this.parent.resourceBase.setResourceValues(s),i=s}else i=this.parent.activeEventData.event;var o=this.quickPopup.element.querySelector(".e-event-popup"),l={type:this.parent.isAdaptive?o?"ViewEventInfo":"EditEventInfo":"QuickInfo",cancel:!1,data:i,element:this.quickPopup.element,target:a?this.parent.activeCellsData.element:this.parent.activeEventData.element};this.parent.trigger("popupClose",l,(function(i){if(!(i=t.serializingData(i)).cancel&&t.quickPopup.element.classList.contains("e-popup-open")){if(a&&t.isCrudAction&&(t.parent.currentAction="Add",t.parent.crudModule.addEvent(i.data)),e){var n=t.quickPopup.hideAnimation;t.quickPopup.hideAnimation=null,t.quickPopup.hide(),t.quickPopup.hideAnimation=n}else t.quickPopup.hide();t.isMultipleEventSelect=!1,t.isCrudAction=!1}}))}},e.prototype.serializingData=function(e){if(sf.base.isBlazor()){var t=this.parent.eventFields;if(e.data){var i=e.data;i[t.startTime]=this.parent.getDateTime(i[t.startTime]),i[t.endTime]=this.parent.getDateTime(i[t.endTime])}e.element&&(e.element=sf.base.getElement(e.element)),e.target&&(e.target=sf.base.getElement(e.target))}return e},e.prototype.navigationClick=function(e){var t=sf.base.closest(e.target,".e-navigate");if(!sf.base.isNullOrUndefined(t)){var i=this.parent.getDateFromElement(e.currentTarget);this.parent.isServerRenderer()&&(i=new Date(+i-6e4*i.getTimezoneOffset())),sf.base.isNullOrUndefined(i)||(this.closeClick(),this.parent.setScheduleProperties({selectedDate:i}),this.parent.changeView(this.parent.getNavigateView(),e))}},e.prototype.documentClick=function(e){var t=e.event.target;sf.base.closest(t,".e-appointment,.e-header-cells")&&this.parent.removeNewEventElement(),sf.base.closest(t,".e-quick-popup-wrapper,.e-header-cells,.e-all-day-cells,.e-work-cells,.e-appointment,.e-popup")||(this.quickPopupHide(),this.parent.removeNewEventElement()),sf.base.closest(t,".e-more-popup-wrapper")||t.classList.contains("e-more-indicator")||sf.base.closest(t,"."+I)||sf.base.closest(t,".e-work-cells")||this.morePopup.hide()},e.prototype.onClosePopup=function(){this.quickPopupHide(),this.parent.eventBase.focusElement()},e.prototype.addEventListener=function(){this.parent.on("cellClick",this.cellClick,this),this.parent.on("eventClick",this.eventClick,this),this.parent.on("document-click",this.documentClick,this),this.parent.on(a,this.updateMoreEventContent,this)},e.prototype.removeEventListner=function(){this.parent.off("cellClick",this.cellClick),this.parent.off("eventClick",this.eventClick),this.parent.off("document-click",this.documentClick),this.parent.off(a,this.updateMoreEventContent)},e.prototype.destroyButtons=function(){[].slice.call(this.quickPopup.element.querySelectorAll(".e-control.e-btn")).forEach((function(e){var t=e.ej2_instances[0];t&&t.destroy()}))},e.prototype.refreshQuickDialog=function(){this.quickDialog.element&&(this.quickDialog.destroy(),sf.base.remove(this.quickDialog.element),this.quickDialog.element=null),this.renderQuickDialog()},e.prototype.destroy=function(){this.quickPopup.element.querySelectorAll(".e-formvalidator").length&&this.fieldValidator.destroy(),this.removeEventListner(),this.destroyButtons(),this.quickPopup.destroy(),sf.base.remove(this.quickPopup.element),this.morePopup.destroy(),sf.base.remove(this.morePopup.element),this.quickDialog.element&&(this.quickDialog.destroy(),sf.base.remove(this.quickDialog.element),this.quickDialog.element=null)},e}(),ut=function(){function e(e){this.parent=e,this.tooltipObj=new sf.popups.Tooltip({content:"No title",position:"BottomRight",offsetY:10,mouseTrail:!this.parent.isAdaptive,showTipPointer:!1,cssClass:this.parent.cssClass+" e-schedule-event-tooltip",target:this.getTargets(),beforeRender:this.onBeforeRender.bind(this),enableRtl:this.parent.enableRtl}),sf.base.isBlazor()&&(this.tooltipObj.beforeOpen=this.onBeforeOpen.bind(this),this.tooltipObj.beforeClose=this.onBeforeClose.bind(this),this.tooltipObj.animation={close:{effect:"None"}}),this.tooltipObj.appendTo(this.parent.element),this.tooltipObj.isStringTemplate=!0}return e.prototype.getTargets=function(){var e=[];return this.parent.activeViewOptions.group.headerTooltipTemplate&&e.push(".e-resource-cells"),this.parent.eventSettings.enableTooltip&&e.push(".e-appointment"),e.join(",")},e.prototype.onBeforeOpen=function(){if(this.parent.group.headerTooltipTemplate){var e=this.parent.element.id+"_headerTooltipTemplate";sf.base.updateBlazorTemplate(e,"HeaderTooltipTemplate",this.parent.group)}if(this.parent.eventSettings.tooltipTemplate){e=this.parent.element.id+"_tooltipTemplate";sf.base.updateBlazorTemplate(e,"TooltipTemplate",this.parent.eventSettings)}},e.prototype.onBeforeClose=function(){if(this.parent.group.headerTooltipTemplate){var e=this.parent.element.id+"_headerTooltipTemplate";sf.base.resetBlazorTemplate(e,"HeaderTooltipTemplate")}if(this.parent.eventSettings.tooltipTemplate){e=this.parent.element.id+"_tooltipTemplate";sf.base.resetBlazorTemplate(e,"TooltipTemplate")}},e.prototype.onBeforeRender=function(e){if(sf.base.isNullOrUndefined(e.target.getAttribute("data-tooltip-id"))){if(e.target.classList.contains("e-resource-cells")&&this.parent.activeViewOptions.group.resources.length>0){var t=void 0;if(this.parent.activeView.isTimelineView()){var i=parseInt(e.target.getAttribute("data-group-index"),0);t=this.parent.resourceBase.lastResourceLevel[i]}else{var a=e.target.parentNode.sectionRowIndex,n=e.target.cellIndex;t=this.parent.activeView.getColumnLevels()[a][n]}var r={resource:t.resource,resourceData:t.resourceData},s=sf.base.createElement("div"),o=this.parent.element.id+"_headerTooltipTemplate",l=[].slice.call(this.parent.getHeaderTooltipTemplate()(r,this.parent,"headerTooltipTemplate",o,!1));return sf.base.append(l,s),void this.setContent(s)}var c=this.parent.eventBase.getEventByGuid(e.target.getAttribute("data-guid"));if(sf.base.isNullOrUndefined(this.parent.eventSettings.tooltipTemplate)){var p=this.parent.globalize,d=this.parent.eventFields,h=new Date(""+c[d.startTime]),u=new Date(""+c[d.endTime]);u=0===u.getHours()&&0===u.getMinutes()?new Date(u.setMilliseconds(-1e3)):u;var f=m(new Date(""+h)),v=m(new Date(""+u)),g=c[d.subject]||this.parent.eventSettings.fields.subject.default,y=sf.base.isNullOrUndefined(c[d.location])?"":c[d.location],b="",T="",w="";sf.base.isBlazor()?(b=p.formatDate(h,{type:"date",format:"MMM d",calendar:this.parent.getCalendarMode()}),T=p.formatDate(h,{type:"date",format:"MMMM d, y",calendar:this.parent.getCalendarMode()}),w=p.formatDate(u,{type:"date",format:"MMMM d, y",calendar:this.parent.getCalendarMode()})):(b=p.formatDate(h,{type:"date",skeleton:"MMMd",calendar:this.parent.getCalendarMode()}),T=p.formatDate(h,{type:"date",skeleton:"medium",calendar:this.parent.getCalendarMode()}),w=p.formatDate(u,{type:"date",skeleton:"medium",calendar:this.parent.getCalendarMode()})),b=P(b,"single"),T=P(T,"single"),w=P(w,"single");var D=sf.base.isBlazor()?"t":"short",C=p.formatDate(h,{type:"time",skeleton:D,calendar:this.parent.getCalendarMode()}),E=p.formatDate(u,{type:"time",skeleton:D,calendar:this.parent.getCalendarMode()}),O='<div><div class="e-subject">'+g+'</div><div class="e-location">'+y+'</div><div class="e-details">'+(f.getTime()===v.getTime()?P(sf.base.isBlazor()?p.formatDate(h,{type:"date",format:"MMMM d, y",calendar:this.parent.getCalendarMode()}):p.formatDate(h,{type:"date",skeleton:"long",calendar:this.parent.getCalendarMode()}),"single"):f.getFullYear()===v.getFullYear()?b+" - "+w:T+" - "+w)+'</div><div class="e-all-day">'+(c[d.isAllDay]?this.parent.localeObj.getConstant("allDay"):C+" - "+E)+"</div></div>";this.setContent(O)}else{s=sf.base.createElement("div"),o=this.parent.element.id+"_tooltipTemplate";var S=R(c,this.parent.eventFields);l=[].slice.call(this.parent.getEventTooltipTemplate()(S,this.parent,"tooltipTemplate",o,!1));sf.base.append(l,s),this.setContent(s)}}},e.prototype.setContent=function(e){this.tooltipObj.setProperties({content:e},!0)},e.prototype.close=function(){this.tooltipObj.close()},e.prototype.destroy=function(){this.tooltipObj.destroy(),sf.base.addClass([this.parent.element],"e-control"),this.tooltipObj=null},e}(),ft=(Ge=function(e,t){return(Ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Ge(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),mt=function(e,t,i,a){var r,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},vt="e-input-wrapper",gt="e-form-left",yt="e-recurrence-count",bt="e-hide-recurrence-element",Tt="e-primary",wt={none:"",daily:"days",weekly:"weeks",monthly:"months",yearly:"years"},Dt={sun:"SU",mon:"MO",tue:"TU",wed:"WE",thu:"TH",fri:"FR",sat:"SA"},Ct=["e-days","e-non-week","e-end-on","e-interval","e-year-expander","e-month-expander"],Et=["e-non-week"],Ot=["e-days","e-year-expander"],St=["e-days"],xt=["e-days","e-non-week","e-year-expander","e-month-expander"],kt=["e-end-on-date","e-end-on-count"],At=["e-end-on-date"],Vt=["e-end-on-count"],Mt=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a.defaultLocale={none:"None",daily:"Daily",weekly:"Weekly",monthly:"Monthly",month:"Month",yearly:"Yearly",never:"Never",until:"Until",count:"Count",first:"First",second:"Second",third:"Third",fourth:"Fourth",last:"Last",repeat:"Repeat",repeatEvery:"Repeat every",on:"Repeat On",end:"End",onDay:"Day",days:"Day(s)",weeks:"Week(s)",months:"Month(s)",years:"Year(s)",every:"every",summaryTimes:"time(s)",summaryOn:"on",summaryUntil:"until",summaryRepeat:"Repeats",summaryDay:"day(s)",summaryWeek:"week(s)",summaryMonth:"month(s)",summaryYear:"year(s)",monthWeek:"Month Week",monthPosition:"Month Position",monthExpander:"Month Expander",yearExpander:"Year Expander",repeatInterval:"Repeat Interval"},a.renderStatus=!1,a.dayButtons=[],a.monthButtons=[],a.calendarUtil=Ce(a.calendarMode),a}return ft(t,e),t.prototype.startState=function(e,t,i){this.showFormElement(),this.updateForm(e),this.freshOnEndForm(),this.updateEndOnForm(t),this.selectMonthDay(i),this.updateUntilDate(i),this.onMonthDay.setProperties({checked:!0})},t.prototype.preRender=function(){this.localeObj=new sf.base.L10n(this.getModuleName(),this.defaultLocale,this.locale)},t.prototype.applyCustomClass=function(e){e&&sf.base.addClass([this.element],e)},t.prototype.initialize=function(){sf.base.addClass([this.element],"e-"+this.getModuleName()),this.renderComponent(),sf.base.isNullOrUndefined(this.value)||""===this.value?(sf.base.isNullOrUndefined(this.repeatType.value)||(this.startState(this.repeatType.value.toString().toUpperCase(),"never",this.startDate),this.updateForm(this.repeatType.value.toString())),this.selectedType>0&&this.setProperties({value:this.getRecurrenceRule()},!1)):this.setRecurrenceRule(this.value),this.applyCustomClass(this.cssClass)},t.prototype.triggerChangeEvent=function(){var e=this;if(this.renderStatus){var t=this.getRecurrenceRule();this.trigger("change",{value:t},(function(t){return e.setProperties({value:t.value},!1)}))}},t.prototype.resetDayButton=function(){[].slice.call(this.element.querySelectorAll(".e-days button")).forEach((function(e){return sf.base.removeClass([e],["e-active",Tt])}))},t.prototype.daySelection=function(e){this.resetDayButton();var t=[0,1,2,3,4,5,6];this.rotateArray(t,this.firstDayOfWeek);var i=this.element.querySelector('.e-days button[data-index="'+t.indexOf(e)+'"]');i&&sf.base.addClass([i],["e-active",Tt])},t.prototype.rtlClass=function(e){e?sf.base.addClass([this.element],"e-rtl"):sf.base.removeClass([this.element],"e-rtl")},t.prototype.updateUntilDate=function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+60),this.untilDateObj.setProperties({value:t})},t.prototype.selectMonthDay=function(e){var t=["sun","mon","tue","wed","thu","fri","sat"];this.monthDate.setProperties({value:this.calendarUtil.getDate(e)}),this.monthWeekDays.setProperties({value:Dt[t[e.getDay()]]}),this.monthValue.setProperties({value:""+this.calendarUtil.getMonth(e)}),this.monthWeekPos.setProperties({value:this.getDayPosition(e)}),this.daySelection(e.getDay())},t.prototype.updateForm=function(e){var t=this;this.repeatType.setProperties({value:e});var i=this.element.querySelector(".e-end-on");switch("daily"===e?sf.base.classList(i,[gt],["e-form-right"]):sf.base.classList(i,["e-form-right"],[gt]),e){case"none":Ct.forEach((function(e){return sf.base.addClass([t.element.querySelector("."+e)],bt)}));break;case"weekly":Et.forEach((function(e){return sf.base.addClass([t.element.querySelector("."+e)],bt)}));break;case"monthly":Ot.forEach((function(e){return sf.base.addClass([t.element.querySelector("."+e)],bt)}));break;case"yearly":St.forEach((function(e){return sf.base.addClass([t.element.querySelector("."+e)],bt)}));break;case"daily":xt.forEach((function(e){return sf.base.addClass([t.element.querySelector("."+e)],bt)}))}},t.prototype.updateEndOnForm=function(e){var t=this;switch(this.endType.setProperties({value:e}),e){case"never":kt.forEach((function(e){return sf.base.addClass([t.element.querySelector("."+e)],bt)}));break;case"until":Vt.forEach((function(e){return sf.base.addClass([t.element.querySelector("."+e)],bt)}));break;case"count":At.forEach((function(e){return sf.base.addClass([t.element.querySelector("."+e)],bt)}))}},t.prototype.freshOnEndForm=function(){var e=this;kt.forEach((function(t){var i=e.element.querySelector("."+t);i&&sf.base.removeClass([i],bt)}))},t.prototype.showFormElement=function(){var e=this;Ct.forEach((function(t){var i=e.element.querySelector("."+t);i&&sf.base.removeClass([i],bt)}))},t.prototype.renderDropdowns=function(){var e=this,t=this;this.repeatType=new sf.dropdowns.DropDownList({dataSource:this.getRepeatData(),floatLabelType:"Always",enableRtl:this.enableRtl,index:this.selectedType,fields:{text:"text",value:"value"},placeholder:this.localeObj.getConstant("repeat"),htmlAttributes:{title:this.localeObj.getConstant("repeat")},change:function(i){t.setProperties({selectedType:e.frequencies.indexOf(i.value)},!1),t.element.querySelector(".e-repeat-content").innerHTML=t.localeObj.getConstant(wt[i.value]),t.showFormElement(),t.updateForm(i.value),t.resetFormValues(),t.triggerChangeEvent()}}),this.repeatType.appendTo(this.element.querySelector(".e-repeat-element")),this.endType=new sf.dropdowns.DropDownList({dataSource:this.getEndData(),popupWidth:this.getPopupWidth(),enableRtl:this.enableRtl,index:1,fields:{text:"text",value:"value"},change:function(e){t.freshOnEndForm(),t.updateEndOnForm(e.value),t.resetFormValues(),t.triggerChangeEvent()}}),this.endType.appendTo(this.element.querySelector(".e-end-on-element"));var i=function(i){return new sf.dropdowns.DropDownList({dataSource:i,popupWidth:e.getPopupWidth(),enableRtl:e.enableRtl,fields:{text:"text",value:"value"},index:1,change:function(e){t.onWeekDay.setProperties({checked:!0}),t.resetFormValues(),t.triggerChangeEvent()}})};this.monthWeekPos=i(this.getMonthPosData()),this.monthWeekPos.appendTo(this.element.querySelector(".e-month-pos")),this.monthWeekDays=i(this.getDayData("wide")),this.monthWeekDays.appendTo(this.element.querySelector(".e-month-week")),this.monthValue=new sf.dropdowns.DropDownList({dataSource:this.getMonthData(),fields:{text:"text",value:"value"},floatLabelType:"Always",enableRtl:this.enableRtl,index:7,change:function(e){t.resetFormValues(),t.triggerChangeEvent()}}),this.monthValue.appendTo(this.element.querySelector(".e-year-expander-element"))},t.prototype.setDefaultValue=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-control .e-numerictextbox"));e<t.length;e++){var i=t[e].ej2_instances[0];i.element.classList.contains("e-repeat-interval")?(i.value=1,i.dataBind()):i.element.classList.contains(yt)&&(i.value=10,i.dataBind())}},t.prototype.resetFormValues=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll('.e-control [type="text"]'));e<t.length;e++){var i=t[e],a=void 0;if(i.classList.contains("e-datepicker"))(a=i.ej2_instances[0]).value?(a.value=a.value,a.dataBind()):this.updateUntilDate(this.startDate);else if(i.classList.contains("e-dropdownlist"))(a=i.ej2_instances[0]).index=a.index||0,a.dataBind();else if(i.classList.contains("e-numerictextbox")){var n=void 0;n=(a=i.ej2_instances[0]).element.classList.contains("e-repeat-interval")?1:a.element.classList.contains(yt)?10:this.startDate.getDate(),a.value=a.value||n,a.dataBind()}}},t.prototype.getPopupWidth=function(){return sf.base.Browser.isDevice?"100%":"auto"},t.prototype.renderDatePickers=function(){var e=this;this.untilDateObj=new sf.calendars.DatePicker({firstDayOfWeek:this.firstDayOfWeek,enableRtl:this.enableRtl,locale:this.locale,min:this.minDate,max:this.maxDate,format:sf.base.isNullOrUndefined(this.dateFormat)?this.getFormat("dateFormats"):this.dateFormat,change:function(t){t.value&&e.triggerChangeEvent()}}),this.untilDateObj.appendTo(this.element.querySelector(".e-until-date"))},t.prototype.getFormat=function(e){return sf.base.isBlazor()?"dateFormats"===e?sf.base.IntlBase.compareBlazorDateFormats({skeleton:"d"},this.locale).format:sf.base.IntlBase.compareBlazorDateFormats({skeleton:"t"},this.locale).format:"en"===this.locale||"en-US"===this.locale?sf.base.getValue(e+".short",sf.base.getDefaultDateObject(this.getCalendarMode())):sf.base.getValue("main."+this.locale+".dates.calendars."+this.getCalendarMode()+"."+e+".short",sf.base.cldrData)},t.prototype.dayButtonRender=function(){for(var e=this,t=[].slice.call(this.element.querySelectorAll(".e-days button")),i=this,a=0,n=t;a<n.length;a++){var r=n[a],s=new sf.buttons.Button({isToggle:!0,enableRtl:this.enableRtl},r);this.dayButtons.push(s),sf.base.EventHandler.add(r,"click",(function(t){var a=[].slice.call(e.element.querySelectorAll(".e-days button."+Tt)),n=t.target;n.classList.contains(Tt)?a.length>1&&(sf.base.removeClass([n],Tt),i.triggerChangeEvent()):(sf.base.addClass([n],Tt),i.triggerChangeEvent())}))}},t.prototype.radioButtonRender=function(){var e=this;this.onMonthDay=new sf.buttons.RadioButton({label:this.localeObj.getConstant("onDay"),enableRtl:this.enableRtl,name:"monthType",value:"day",change:function(t){e.resetFormValues(),e.triggerChangeEvent()}}),this.onMonthDay.appendTo(this.element.querySelector(".e-month-expander-element")),this.monthButtons.push(this.onMonthDay),this.onWeekDay=new sf.buttons.RadioButton({label:"",name:"monthType",enableRtl:this.enableRtl,value:"daypos",change:function(t){e.resetFormValues(),e.triggerChangeEvent()}}),this.onWeekDay.appendTo(this.element.querySelector(".e-month-expander-wrapper")),this.monthButtons.push(this.onWeekDay)},t.prototype.numericTextboxRender=function(){var e=this;this.recurrenceCount=new sf.inputs.NumericTextBox({value:10,format:"#",enableRtl:this.enableRtl,floatLabelType:"Always",min:1,max:999,change:function(t){e.triggerChangeEvent()}}),this.recurrenceCount.appendTo(this.element.querySelector("."+yt)),this.monthDate=new sf.inputs.NumericTextBox({value:1,format:"#",enableRtl:this.enableRtl,min:1,max:31,change:function(t){e.onMonthDay.setProperties({checked:!0}),e.triggerChangeEvent()}}),this.monthDate.appendTo(this.element.querySelector(".e-month-day")),this.repeatInterval=new sf.inputs.NumericTextBox({value:1,format:"#",min:1,max:999,enableRtl:this.enableRtl,floatLabelType:"Always",placeholder:this.localeObj.getConstant("repeatEvery"),change:function(t){e.triggerChangeEvent()}}),this.repeatInterval.appendTo(this.element.querySelector(".e-repeat-interval"))},t.prototype.renderComponent=function(){this.setTemplate(),this.renderDropdowns(),this.renderDatePickers(),this.dayButtonRender(),this.radioButtonRender(),this.numericTextboxRender()},t.prototype.rotateArray=function(e,t){for(var i,a=0;a<t;a++)i=e.shift(),e.push(i)},t.prototype.getEndData=function(){var e=this,t=[];return["never","until","count"].forEach((function(i){t.push({text:e.localeObj.getConstant(i),value:i})})),t},t.prototype.getDayPosition=function(e){var t=new Date(e.getTime()),i=new Date(e.getTime()),a=e.getDay(),n=[];for(t=this.calendarUtil.getMonthStartDate(t),i=this.calendarUtil.getMonthEndDate(i);t<i;)t.getDay()===a&&n.push(t.getTime()),t.setDate(t.getDate()+1);return n.indexOf(e.getTime())===n.length-1?-1:n.indexOf(e.getTime())+1},t.prototype.getRepeatData=function(){var e=[],t=this;return this.frequencies.forEach((function(i){var a="none"===i?"never":i;e.push({text:t.localeObj.getConstant(a),value:i})})),e},t.prototype.getMonthPosData=function(){var e={first:1,second:2,third:3,fourth:4,last:-1},t=this,i=[];return["first","second","third","fourth","last"].forEach((function(a){i.push({text:t.localeObj.getConstant(a),value:e[a]})})),i},t.prototype.getDayData=function(e){sf.base.isBlazor()&&"narrow"===e&&(e="short");var t,i=["sun","mon","tue","wed","thu","fri","sat"],a=[];if(this.rotateArray(i,this.firstDayOfWeek),"en"===this.locale||"en-US"===this.locale){var n=sf.base.isBlazor()?"days.":"days.stand-alone.";t=sf.base.getValue(n+e,sf.base.getDefaultDateObject(this.getCalendarMode()))}else{n=sf.base.isBlazor()?this.locale+".dates.days."+e:"main."+this.locale+".dates.calendars."+this.getCalendarMode()+".days.stand-alone."+e;t=sf.base.getValue(n,sf.base.cldrData)}for(var r=0,s=i;r<s.length;r++){var o=s[r],l=sf.base.getValue(o,t);a.push({text:"narrow"===e?l:P(l,"single"),value:Dt[o]})}return a},t.prototype.getMonthData=function(){var e,t=[];if("en"===this.locale||"en-US"===this.locale){var i=sf.base.isBlazor()?"months.wide":"months.stand-alone.wide";e=sf.base.getValue(i,sf.base.getDefaultDateObject(this.getCalendarMode()))}else{i=sf.base.isBlazor()?this.locale+".dates.months.wide":"main."+this.locale+".dates.calendars."+this.getCalendarMode()+".months.stand-alone.wide";e=sf.base.getValue(i,sf.base.cldrData)}for(var a=0,n=Object.keys(e);a<n.length;a++){var r=n[a];t.push({text:P(sf.base.getValue(r,e),"single"),value:r})}return t},t.prototype.setTemplate=function(){var e=this.getDayData("narrow"),t=this.getDayData("wide");this.element.innerHTML='<div class="e-editor"><div class="'+vt+" "+gt+'"><input type="text" tabindex="0" class="e-repeat-element"label="'+"e-repeat-element".substr(2)+'" /></div><div class="'+vt+' e-interval e-form-right"><table  class="e-recurrence-table e-repeat-content-wrapper"><tr><td><input type="text" tabindex="0" class="e-repeat-interval"title="'+this.localeObj.getConstant("repeatEvery")+'" /></td><td><span class="e-repeat-content"></span></td></tr></table></div><div class="e-input-wrapper-side e-days '+gt+'"><div class=e-week-expander-label>'+this.localeObj.getConstant("on")+'</div><button type="button" class="e-round" data-index="0" title="'+t[0].text+'">'+e[0].text+'</button><button type="button" class="e-round" data-index="1" title="'+t[1].text+'">'+e[1].text+'</button><button type="button" class="e-round" data-index="2" title="'+t[2].text+'">'+e[2].text+'</button><button type="button" class="e-round" data-index="3" title="'+t[3].text+'">'+e[3].text+'</button><button type="button" class="e-round" data-index="4" title="'+t[4].text+'">'+e[4].text+'</button><button type="button" class="e-round" data-index="5" title="'+t[5].text+'">'+e[5].text+'</button><button type="button" class="e-round" data-index="6" title="'+t[6].text+'">'+e[6].text+'</button></div><div class="e-input-wrapper-side e-non-week '+gt+'"><div class=e-month-expander-label>'+this.localeObj.getConstant("on")+'</div><div class="e-year-expander"><input class="e-year-expander-element" type="text" tabindex="0" title="'+this.localeObj.getConstant("yearExpander")+'"/></div><div class="e-month-expander"><table class="e-recurrence-table e-month-expand-wrapper"><tr><td><div class="'+vt+' e-month-expander-checkbox-wrapper"><input class="e-month-expander-element"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td colspan="2"><div class="'+vt+' e-monthday-element"><input type="text" tabindex="0" class="e-month-day"title="'+this.localeObj.getConstant("on")+'" /></div></td></tr><tr><td><div class="'+vt+' e-month-expander-checkbox-wrapper" style="min-width: 30px;margin-bottom:18px;"><input class="e-month-expander-wrapper"title="'+this.localeObj.getConstant("monthExpander")+'" type="radio"></div></td><td><div class="'+vt+' e-week-position" ><input type="text" tabindex="0" class="e-month-pos"title="'+this.localeObj.getConstant("monthPosition")+'" /></div></td><td><div class="'+vt+'" style="min-width: 120px;"><input type="text" tabindex="0" class="e-month-week"title="'+this.localeObj.getConstant("monthWeek")+'" /></div></td></tr></table></div></div><div class="e-input-wrapper-side e-end-on e-form-right"><div class=e-end-on-label>'+this.localeObj.getConstant("end")+'</div><div class="'+vt+' e-end-on-left"><input type="text" tabindex="0" class="e-end-on-element"title="'+this.localeObj.getConstant("end")+'" /></div><div class="'+vt+' e-end-on-date" ><input type="text" tabindex="0" class="e-until-date"title="'+this.localeObj.getConstant("until")+'" /></div><div class="'+vt+' e-end-on-count"><input type="text" tabindex="0" class="'+yt+'"title="'+this.localeObj.getConstant("count")+'" /></div></div></div></div>'},t.prototype.getSelectedDaysData=function(){var e="BYDAY=",t=[].slice.call(this.element.querySelectorAll(".e-days button."+Tt)),i=["SU","MO","TU","WE","TH","FR","SA"];this.rotateArray(i,this.firstDayOfWeek);for(var a=0;a<t.length;a++)e+=i[parseInt(t[a].getAttribute("data-index"),10)]+(a===t.length-1?"":",");return e+";"},t.prototype.getSelectedMonthData=function(){return this.onWeekDay.checked?"BYDAY="+this.monthWeekDays.value+";BYSETPOS="+this.monthWeekPos.value+";":"BYMONTHDAY="+this.monthDate.value+";"},t.prototype.getIntervalData=function(){return"INTERVAL="+this.repeatInterval.value+";"},t.prototype.getEndOnCount=function(){return"COUNT="+this.recurrenceCount.value+";"},t.prototype.getYearMonthRuleData=function(){return"BYMONTH="+this.monthValue.value+";"},t.prototype.updateWeekButton=function(e){var t=["SU","MO","TU","WE","TH","FR","SA"];this.rotateArray(t,this.firstDayOfWeek);for(var i=0,a=this.dayButtons;i<a.length;i++){var n=a[i],r=parseInt(n.element.getAttribute("data-index"),10);-1!==e.indexOf(t[r])?n.setProperties({isPrimary:!0}):n.setProperties({isPrimary:!1})}},t.prototype.updateMonthUI=function(){if(this.ruleObject.monthDay.length)this.monthDate.setProperties({value:this.ruleObject.monthDay[0]}),this.onMonthDay.setProperties({checked:!0});else{this.onWeekDay.setProperties({checked:!0}),this.monthWeekPos.setProperties({value:this.ruleObject.setPosition});for(var e=0,t=Object.keys(Dt);e<t.length;e++){var i=t[e];if(Dt[i]===this.ruleObject.day[0]){this.monthWeekDays.setProperties({value:this.ruleObject.day[0]});break}}}},t.prototype.updateUI=function(e,t){switch(this.repeatInterval.setProperties({value:this.ruleObject.interval}),t){case"until":this.untilDateObj.setProperties({value:this.ruleObject.until});break;case"count":this.recurrenceCount.setProperties({value:this.ruleObject.count})}switch(e){case"weekly":this.updateWeekButton(this.ruleObject.day);break;case"yearly":this.monthValue.setProperties({index:this.ruleObject.month[0]-1}),this.updateMonthUI();break;case"monthly":this.updateMonthUI()}},t.prototype.getUntilData=function(){return this.untilDateObj.value?"UNTIL="+_e(this.untilDateObj.value)+";":""},t.prototype.destroyComponents=function(){this.recurrenceCount.isDestroyed||this.recurrenceCount.destroy(),this.monthDate.isDestroyed||this.monthDate.destroy(),this.repeatInterval.isDestroyed||this.repeatInterval.destroy(),this.untilDateObj.isDestroyed||this.untilDateObj.destroy(),this.repeatType.isDestroyed||this.repeatType.destroy(),this.endType.isDestroyed||this.endType.destroy(),this.monthWeekPos.isDestroyed||this.monthWeekPos.destroy(),this.monthWeekDays.isDestroyed||this.monthWeekDays.destroy(),this.monthValue.isDestroyed||this.monthValue.destroy(),this.dayButtons.forEach((function(e){e.isDestroyed||e.destroy()})),this.dayButtons=[],this.monthButtons.forEach((function(e){e.isDestroyed||e.destroy()})),this.monthButtons=[]},t.prototype.resetFields=function(){this.startState("none","never",this.startDate),this.setDefaultValue()},t.prototype.updateRuleUntilDate=function(e){if(this.untilDateObj.value&&e){var t=this.untilDateObj.value,i=new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes(),e.getMilliseconds());this.untilDateObj.setProperties({value:i})}},t.prototype.getCalendarMode=function(){return this.calendarMode.toLowerCase()},t.prototype.getRuleSummary=function(e){return void 0===e&&(e=this.getRecurrenceRule()),X(e,this.localeObj,this.locale,this.calendarMode)},t.prototype.getRecurrenceDates=function(e,t,i,a,n){return sf.base.isBlazor()&&(e=new Date(""+e),n&&(n=new Date(""+n))),n=sf.base.isNullOrUndefined(n)?this.startDate:n,Z(e,t,i,this.firstDayOfWeek,a,n,this.calendarMode)},t.prototype.getRecurrenceRule=function(){var e="FREQ=";switch(this.repeatType.value){case"daily":e+="DAILY;";break;case"weekly":e+="WEEKLY;"+this.getSelectedDaysData();break;case"monthly":e+="MONTHLY;"+this.getSelectedMonthData();break;case"yearly":e+="YEARLY;"+this.getSelectedMonthData()+this.getYearMonthRuleData();break;case"none":return""}switch(e+=this.getIntervalData(),this.endType.value){case"until":e+=this.getUntilData();break;case"count":e+=this.getEndOnCount()}return e},t.prototype.setRecurrenceRule=function(e,t){if(void 0===t&&(t=this.startDate),sf.base.isBlazor()&&(t=new Date(""+t)),e){this.renderStatus=!1,this.ruleObject=ge(e);var i=this.ruleObject.count?"count":this.ruleObject.until?"until":"never";switch(this.ruleObject.freq){case"DAILY":this.startState("daily",i,t),this.updateUI("daily",i);break;case"WEEKLY":this.startState("weekly",i,t),this.updateUI("weekly",i);break;case"MONTHLY":this.startState("monthly",i,t),this.updateUI("monthly",i);break;case"YEARLY":this.startState("yearly",i,t),this.updateUI("yearly",i)}this.renderStatus=!0,this.triggerChangeEvent()}else this.repeatType.setProperties({value:"none"})},t.prototype.destroy=function(){this.destroyComponents(),e.prototype.destroy.call(this);var t=["e-"+this.getModuleName()];for(this.cssClass&&(t=t.concat(this.cssClass.split(" "))),sf.base.removeClass([this.element],t);this.element.firstElementChild;)this.element.removeChild(this.element.firstElementChild)},t.prototype.getModuleName=function(){return"recurrenceeditor"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.render=function(){this.initialize(),this.rtlClass(this.enableRtl),this.renderStatus=!0,this.renderComplete()},t.prototype.onPropertyChanged=function(e,t){for(var i=0,a=Object.keys(e);i<a.length;i++){switch(a[i]){case"startDate":this.selectMonthDay(e.startDate),this.updateUntilDate(e.startDate),this.endType.setProperties({index:0});break;case"enableRtl":this.rtlClass(e.enableRtl);break;case"cssClass":this.applyCustomClass(e.cssClass);break;case"selectedType":this.repeatType.setProperties({index:this.selectedType});break;case"minDate":this.untilDateObj.setProperties({minDate:this.minDate});break;case"maxDate":this.untilDateObj.setProperties({maxDate:this.maxDate});break;case"value":this.getRecurrenceRule()!==this.value&&this.setRecurrenceRule(this.value);break;case"calendarMode":this.calendarMode=e.calendarMode,this.calendarUtil=Ce(e.calendarMode);break;case"locale":case"frequencies":case"firstDayOfWeek":this.refresh();break;case"dateFormat":this.untilDateObj.setProperties({format:e.dateFormat})}}},mt([sf.base.Property(["none","daily","weekly","monthly","yearly"])],t.prototype,"frequencies",void 0),mt([sf.base.Property(0)],t.prototype,"firstDayOfWeek",void 0),mt([sf.base.Property(new Date)],t.prototype,"startDate",void 0),mt([sf.base.Property()],t.prototype,"dateFormat",void 0),mt([sf.base.Property("Gregorian")],t.prototype,"calendarMode",void 0),mt([sf.base.Property()],t.prototype,"cssClass",void 0),mt([sf.base.Property()],t.prototype,"value",void 0),mt([sf.base.Property(new Date(1900,0,1))],t.prototype,"minDate",void 0),mt([sf.base.Property(new Date(2099,11,31))],t.prototype,"maxDate",void 0),mt([sf.base.Property(0)],t.prototype,"selectedType",void 0),mt([sf.base.Event()],t.prototype,"change",void 0),t=mt([sf.base.NotifyPropertyChanges],t)}(sf.base.Component),Rt=function(){function e(e){this.parent=e,this.l10n=this.parent.localeObj,this.fields=this.parent.eventFields,this.eventWindowTime={startTime:new Date,endTime:new Date},this.fieldValidator=new dt,this.renderEventWindow()}return e.prototype.renderEventWindow=function(){this.element=sf.base.createElement("div",{id:this.parent.element.id+"_dialog_wrapper"}),this.parent.element.appendChild(this.element);var e={animationSettings:{effect:"Zoom"},content:this.getEventWindowContent(),cssClass:"e-schedule-dialog",enableRtl:this.parent.enableRtl,height:this.parent.isAdaptive?"100%":"auto",minHeight:"300px",isModal:!0,showCloseIcon:!this.parent.isAdaptive,target:document.body,visible:!1,width:"500px",beforeOpen:this.onBeforeOpen.bind(this),beforeClose:this.onBeforeClose.bind(this)};this.parent.isAdaptive?(e.cssClass="e-schedule-dialog e-device",e.header='<div class="e-title-header"><div class="e-back-icon e-icons"></div><div class="e-title-text">'+this.l10n.getConstant("newEvent")+'</div><div class="e-save-icon e-icons"></div></div>'):(e.buttons=[{buttonModel:{content:this.l10n.getConstant("deleteButton"),cssClass:"e-event-delete",disabled:!this.parent.eventSettings.allowDeleting||this.parent.readonly},click:this.eventDelete.bind(this)},{buttonModel:{content:this.l10n.getConstant("saveButton"),cssClass:"e-primary e-event-save",isPrimary:!0,disabled:!this.parent.eventSettings.allowAdding||this.parent.readonly},click:this.eventSave.bind(this)},{buttonModel:{cssClass:"e-event-cancel",content:this.l10n.getConstant("cancelButton")},click:this.dialogClose.bind(this)}],e.header='<div class="e-title-text">'+this.l10n.getConstant("newEvent")+"</div>"),this.dialogObject=new sf.popups.Dialog(e,this.element),this.dialogObject.isStringTemplate=!0,this.dialogObject.element.querySelector(".e-dlg-closeicon-btn")&&this.dialogObject.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title",this.l10n.getConstant("close")),sf.base.addClass([this.element.parentElement],"e-schedule-dialog-container"),this.parent.isAdaptive&&(sf.base.EventHandler.add(this.element.querySelector(".e-back-icon"),"click",this.dialogClose,this),sf.base.EventHandler.add(this.element.querySelector(".e-save-icon"),"click",this.eventSave,this)),this.applyFormValidation()},e.prototype.updateEditorTemplate=function(){this.parent.editorTemplate&&sf.base.updateBlazorTemplate(this.parent.element.id+"_editorTemplate","EditorTemplate",this.parent)},e.prototype.resetEditorTemplate=function(){this.parent.editorTemplate&&sf.base.resetBlazorTemplate(this.parent.element.id+"_editorTemplate","EditorTemplate")},e.prototype.refresh=function(){this.destroy(),this.renderEventWindow()},e.prototype.refreshRecurrenceEditor=function(){if(this.recurrenceEditor){var e=this.recurrenceEditor.element;this.recurrenceEditor.destroy(),this.createRecurrenceEditor(e)}},e.prototype.setRecurrenceEditor=function(e){this.parent.editorTemplate&&(this.recurrenceEditor=e)},e.prototype.openEditor=function(e,t,i,a){if(this.parent.currentAction=t,this.parent.removeNewEventElement(),this.parent.quickPopup.quickPopupHide(!0),"Add"===t){var n={};this.cellClickAction=!i,this.parent.activeCellsData=e;var r=e;this.cellClickAction?this.convertToEventData(r,n):(this.parent.activeCellsData={startTime:r.startTime||r[this.fields.startTime],endTime:r.endTime||r[this.fields.endTime],isAllDay:r.isAllDay||r[this.fields.isAllDay],element:r.element,groupIndex:r.groupIndex},n=r),e=n}switch(sf.base.isNullOrUndefined(this.parent.editorTemplate)||this.renderFormElements(this.element.querySelector(".e-schedule-form"),e),!this.parent.isAdaptive&&sf.base.isNullOrUndefined(this.parent.editorTemplate)&&sf.base.removeClass([this.dialogObject.element.querySelector(".e-recurrenceeditor")],"e-disable"),this.recurrenceEditor&&(this.recurrenceEditor.firstDayOfWeek=this.parent.activeViewOptions.firstDayOfWeek),t){case"Add":this.onCellDetailsUpdate(e,a);break;case"Save":case"EditOccurrence":case"EditSeries":case"EditFollowingEvents":"EditOccurrence"===t&&!this.parent.isAdaptive&&sf.base.isNullOrUndefined(this.parent.editorTemplate)&&sf.base.addClass([this.dialogObject.element.querySelector(".e-recurrenceeditor")],"e-disable"),this.cellClickAction=!1,this.onEventDetailsUpdate(e)}},e.prototype.setDialogContent=function(){this.dialogObject.content=this.getEventWindowContent(),this.dialogObject.dataBind()},e.prototype.onBeforeOpen=function(e){var t=this,i={type:"Editor",data:this.eventData,cancel:!1,element:this.element,target:this.cellClickAction?this.parent.activeCellsData.element:this.parent.activeEventData.element};this.cellClickAction&&(i.duration=this.getSlotDuration());var a=this.getInstance("e-event-save");a&&(a.disabled=!(this.cellClickAction?this.parent.eventSettings.allowAdding:this.parent.eventSettings.allowEditing),a.dataBind());var n=this.getInstance("e-event-delete");n&&(n.disabled=!this.parent.eventSettings.allowDeleting,n.dataBind());var r=new sf.data.Deferred;return this.parent.trigger("popupOpen",i,(function(i){if(e.cancel=i.cancel,t.duration=t.cellClickAction?i.duration:null,t.refreshDateTimePicker(t.duration),t.cellClickAction&&i.duration!==t.getSlotDuration()&&sf.base.isNullOrUndefined(t.parent.editorTemplate)){var a=t.getInstance("e-start"),n=t.getInstance("e-end");n.value=new Date(a.value.getTime()+6e4*i.duration),n.dataBind()}!sf.base.isBlazor()&&t.parent.editorTemplate&&t.element.querySelector(".e-recurrenceeditor")&&!t.recurrenceEditor&&(t.recurrenceEditor=t.getInstance("e-recurrenceeditor")),r.resolve(e)})),r},e.prototype.onBeforeClose=function(e){var t=this;e.isInteracted&&(this.isCrudAction=!1);var i={type:"Editor",data:this.eventCrudData,cancel:!1,element:this.element,target:this.cellClickAction?this.parent.activeCellsData.element:this.parent.activeEventData.element},a=new sf.data.Deferred;return this.parent.trigger("popupClose",i,(function(i){if(sf.base.isBlazor()){var n=t.parent.eventFields;if(i.data){var r=i.data;r[n.startTime]=t.parent.getDateTime(r[n.startTime]),r[n.endTime]=t.parent.getDateTime(r[n.endTime])}i.element&&(i.element=sf.base.getElement(i.element)),i.target&&(i.target=sf.base.getElement(i.target))}e.cancel=i.cancel,i.cancel||(t.resetEditorTemplate(),t.updateEditorTemplate(),t.isCrudAction&&(e.cancel=t.processCrudActions(i.data),t.isCrudAction=e.cancel),t.isCrudAction||(t.resetForm(),t.parent.eventBase.focusElement(),t.eventCrudData=null)),a.resolve(e)})),a},e.prototype.getEventWindowContent=function(){var e=sf.base.createElement("div",{className:"e-form-container"}),t=sf.base.createElement("form",{id:this.parent.element.id+"EditForm",className:B,attrs:{onsubmit:"return false;"}});return this.renderFormElements(t),e.appendChild(t),e},e.prototype.renderFormElements=function(e,t){if(sf.base.isNullOrUndefined(this.parent.editorTemplate))e.appendChild(this.getDefaultEventWindowContent());else if(t&&(this.recurrenceEditor&&(this.recurrenceEditor.destroy(),this.recurrenceEditor=null),this.destroyComponents(),[].slice.call(e.children).forEach((function(e){return sf.base.remove(e)}))),!sf.base.isBlazor()||sf.base.isBlazor()&&t){var i=this.parent.element.id+"_editorTemplate",a=[].slice.call(this.parent.getEditorTemplate()(t||{},this.parent,"editorTemplate",i,!1));sf.base.append(a,e),this.updateEditorTemplate()}},e.prototype.getDefaultEventWindowContent=function(){var e=this.createDivElement("e-dialog-parent"),t=this.createDivElement("e-title-location-row");e.appendChild(t),t.appendChild(this.renderTextBox("e-subject")),t.querySelector(".e-subject").setAttribute("title",this.parent.editorTitles.subject),t.appendChild(this.renderTextBox("e-location")),t.querySelector(".e-location").setAttribute("title",this.parent.editorTitles.location);var i=this.createDivElement("e-start-end-row");e.appendChild(i),i.appendChild(this.renderDateTimePicker("e-start",this.onTimeChange.bind(this))),i.querySelector(".e-start").setAttribute("title",this.parent.editorTitles.startTime),i.appendChild(this.renderDateTimePicker("e-end")),i.querySelector(".e-end").setAttribute("title",this.parent.editorTitles.endTime);var a=this.createDivElement("e-all-day-time-zone-row");e.appendChild(a),a.appendChild(this.renderCheckBox("e-all-day")),a.appendChild(this.renderCheckBox("e-time-zone"));var n=this.createDivElement("e-time-zone-row");e.appendChild(n),n.appendChild(this.renderDropDown("e-start-time-zone")),n.appendChild(this.renderDropDown("e-end-time-zone"));var r=this.createDivElement("e-repeat-parent-row");e.appendChild(r);var s=this.renderCheckBox("e-repeat"),o=sf.base.createElement("span",{className:"e-recurrence-container"}),l=sf.base.createElement("button",{className:"e-recurrence-edit-button",attrs:{type:"button",title:this.l10n.getConstant("editRecurrence")}});if(this.buttonObj=new sf.buttons.Button({iconCss:"e-recurrence-edit e-icons",cssClass:"e-medium "+this.parent.cssClass}),o.appendChild(l),this.buttonObj.appendTo(l),this.buttonObj.isStringTemplate=!0,s.appendChild(o),r.appendChild(s),this.parent.isAdaptive?sf.base.EventHandler.add(l,"click",this.loadRecurrenceEditor,this):this.createRecurrenceEditor(e),this.parent.resourceCollection.length>0){for(var c=this.createDivElement("e-resources-row"),p=0,d=this.parent.resourceBase.resourceCollection;p<d.length;p++){var h=d[p];c.appendChild(this.renderResourceDetails(h))}e.appendChild(c)}var u=this.createDivElement("e-description-row");u.appendChild(this.renderTextBox("e-description")),u.querySelector(".e-description").setAttribute("title",this.parent.editorTitles.description),e.appendChild(u);var f=sf.base.createElement("button",{attrs:{type:"hidden",title:"submit",style:"display:none"}});return e.appendChild(f),e},e.prototype.createRecurrenceEditor=function(e){var t=this.createDivElement();e.appendChild(t),this.recurrenceEditor=this.renderRecurrenceEditor(),this.recurrenceEditor.appendTo(t)},e.prototype.createDivElement=function(e){return sf.base.createElement("div",{className:e})},e.prototype.createInputElement=function(e,t,i){return sf.base.createElement(i||"input",{className:e,attrs:{type:"text",name:t,value:"",id:t,title:""===this.l10n.getConstant(t.charAt(0).toLowerCase()+t.slice(1))?t:this.l10n.getConstant(t.charAt(0).toLowerCase()+t.slice(1))}})},e.prototype.getSlotDuration=function(){return this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount},e.prototype.renderDateTimePicker=function(e,t){var i=this.createDivElement(e+"-container"),a=this.getFieldName(e),n=this.createInputElement(e+" e-field",a);i.appendChild(n);var r=new sf.calendars.DateTimePicker({change:t,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,calendarMode:this.parent.calendarMode,min:this.parent.minDate,max:this.parent.maxDate,cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,locale:this.parent.locale,floatLabelType:"Always",format:(sf.base.isNullOrUndefined(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat)+" "+this.getFormat("timeFormats"),placeholder:this.getFieldLabel(e),step:this.getSlotDuration(),width:"100%"});return r.isStringTemplate=!0,r.appendTo(n),i},e.prototype.refreshDateTimePicker=function(e){var t=this;[].slice.call(this.element.querySelectorAll(".e-start,.e-end")).forEach((function(i){var a=i.ej2_instances[0];a.firstDayOfWeek=t.parent.activeViewOptions.firstDayOfWeek,a.step=e||t.getSlotDuration(),a.dataBind()}))},e.prototype.onTimeChange=function(){var e=this.getInstance("e-start");if(e.element.parentElement.classList.contains("e-input-focus")){var t=this.getInstance("e-end"),i=0;this.cellClickAction?(i=6e4*this.duration,this.eventWindowTime.startTime=e.value):i=this.eventData[this.fields.endTime].getTime()-this.eventData[this.fields.startTime].getTime();var a=sf.base.isNullOrUndefined(e.value)?null:new Date(e.value.getTime()+i);this.cellClickAction&&(this.eventWindowTime.endTime=a),t.value=a,t.dataBind()}},e.prototype.renderResourceDetails=function(e){var t=e.field,i="e-"+t,a=e.title,n=this.createDivElement(i+"-container e-resources"),r=this.createInputElement(i+" e-field",t);n.appendChild(r);var s='<div class="e-resource-template"><div class="e-resource-color" style="background-color:${'+e.colorField+'}"></div><div class="e-resource-text">${'+e.textField+"}</div></div>";if(e.allowMultiple){var o=new sf.dropdowns.MultiSelect({cssClass:this.parent.cssClass||"",dataSource:e.dataSource,change:this.onMultiselectResourceChange.bind(this),itemTemplate:s,fields:{text:e.textField,value:e.idField},htmlAttributes:{title:a,name:t},floatLabelType:"Always",placeholder:a,popupHeight:"230px",popupWidth:"447px",mode:"Box"});o.appendTo(r),o.isStringTemplate=!0}else{var l=new sf.dropdowns.DropDownList({cssClass:this.parent.cssClass||"",change:this.onDropdownResourceChange.bind(this),dataSource:e.dataSource,enableRtl:this.parent.enableRtl,fields:{text:e.textField,value:e.idField},htmlAttributes:{title:a,name:t},floatLabelType:"Always",placeholder:a,popupHeight:"230px",popupWidth:"447px",itemTemplate:s});l.appendTo(r),l.isStringTemplate=!0}return n},e.prototype.renderDropDown=function(e){var t=this.getFieldName(e),i=this.createDivElement(e+"-container"),a=this.createInputElement(e+" e-field",t);i.appendChild(a);var n=new sf.dropdowns.DropDownList({allowFiltering:!0,change:this.onTimezoneChange.bind(this),cssClass:this.parent.cssClass||"",dataSource:Q,enableRtl:this.parent.enableRtl,fields:{text:"Text",value:"Value"},filterBarPlaceholder:"Search Timezone",filtering:function(e){var t=new sf.data.Query;t=""!==e.text?t.where("Text","contains",e.text,!0):t,e.updateData(Q,t)},htmlAttributes:{title:this.getFieldLabel(e),name:t},floatLabelType:"Always",placeholder:this.getFieldLabel(e),popupHeight:"230px"});return n.appendTo(a),n.isStringTemplate=!0,i},e.prototype.onMultiselectResourceChange=function(e){if(e.value&&this.parent.activeViewOptions.group.byGroupID&&!(this.parent.resourceCollection.length<=1))for(var t=this.parent.resourceBase.resourceCollection,i=e.element.getAttribute("name")||this.getColumnName(e.element),a=0;a<t.length;a++)if(t[a].field===i&&a<t.length-1){for(var n=this.createInstance(a),r=[],s=function(i){var n=t[a+1],s=n.dataSource.filter((function(t){return t[n.groupIDField]===e.value[i]}))[0][t[a+1].groupIDField],l=o.filterDatasource(a,s);r=r.concat(l)},o=this,l=0;l<e.value.length;l++)s(l);n.dataSource=r,n.dataBind()}},e.prototype.createInstance=function(e){var t=this.parent.resourceBase.resourceCollection[e+1];return this.element.querySelector(".e-"+t.field).ej2_instances[0]},e.prototype.onDropdownResourceChange=function(e){if(e.value&&!(this.parent.resourceCollection.length<=1)&&this.parent.activeViewOptions.group.byGroupID)for(var t=e.element.getAttribute("name")||this.getColumnName(e.element),i=this.parent.resourceBase.resourceCollection,a=0;a<i.length;a++)if(a<i.length-1&&i[a].field===t){var n=this.createInstance(a),r=e.itemData[i[a].idField];n.dataSource=this.filterDatasource(a,r),n.dataBind();var s=n.dataSource[0][i[a+1].idField];n.value=i[a+1].allowMultiple?[s]:s,n.dataBind()}},e.prototype.filterDatasource=function(e,t){var i=this.parent.resourceBase.resourceCollection[e+1];return i.dataSource.filter((function(e){return e[i.groupIDField]===t}))},e.prototype.onTimezoneChange=function(e){if((e.element.getAttribute("name")||this.getColumnName(e.element))===this.parent.eventFields.startTimezone){var t=this.getInstance("e-start-time-zone"),i=this.getInstance("e-end-time-zone");i.value=t.value,i.dataBind()}},e.prototype.renderCheckBox=function(e){var t=this.createDivElement(e+"-container"),i=this.getFieldName(e),a=this.createInputElement(e+" e-field",i);t.appendChild(a);var n=new sf.buttons.CheckBox({change:this.onChange.bind(this),cssClass:e+" "+this.parent.cssClass,enableRtl:this.parent.enableRtl,label:this.getFieldLabel(e)});return n.appendTo(a),n.isStringTemplate=!0,a.setAttribute("name",i),"Repeat"===i&&(this.repeatStatus=n),t},e.prototype.renderTextBox=function(e){var t=this.createDivElement(e+"-container"),i=this.getFieldName(e),a="e-description"===e?"textarea":"input",n=this.createInputElement(e+" e-field",i,a);return t.appendChild(n),sf.inputs.Input.createInput({element:n,floatLabelType:"Always",properties:{enableRtl:this.parent.enableRtl,placeholder:this.getFieldLabel(e)}}),t},e.prototype.getFieldName=function(e){var t="";switch(e){case"e-subject":t=this.fields.subject;break;case"e-location":t=this.fields.location;break;case"e-start":t=this.fields.startTime;break;case"e-end":t=this.fields.endTime;break;case"e-description":t=this.fields.description;break;case"e-all-day":t=this.fields.isAllDay;break;case"e-start-time-zone":t=this.fields.startTimezone;break;case"e-end-time-zone":t=this.fields.endTimezone;break;case"e-time-zone":t="Timezone";break;case"e-repeat":t="Repeat"}return t},e.prototype.getFieldLabel=function(e){var t="";switch(e){case"e-subject":t=this.parent.editorTitles.subject;break;case"e-location":t=this.parent.editorTitles.location;break;case"e-description":t=this.parent.editorTitles.description;break;case"e-start":t=this.parent.editorTitles.startTime;break;case"e-end":t=this.parent.editorTitles.endTime;break;case"e-start-time-zone":t=this.parent.editorTitles.startTimezone;break;case"e-end-time-zone":t=this.parent.editorTitles.endTimezone;break;case"e-repeat":t=this.parent.editorTitles.recurrenceRule;break;case"e-all-day":t=this.parent.editorTitles.isAllDay;break;case"e-time-zone":t=this.l10n.getConstant("timezone")}return t},e.prototype.onChange=function(e){var t=e.event.target;t.classList.contains("e-all-day")?this.onAllDayChange(e.checked):t.classList.contains("e-time-zone")?this.timezoneChangeStyle(e.checked):t.classList.contains("e-repeat")&&this.onRepeatChange(e.checked)},e.prototype.renderRepeatDialog=function(){var e=sf.base.createElement("div");this.repeatDialogObject=new sf.popups.Dialog({header:this.l10n.getConstant("recurrence"),visible:!1,content:'<div class="e-rec-editor"></div>',closeOnEscape:!0,width:"90%",buttons:[{click:this.repeatSaveDialog.bind(this),buttonModel:{content:this.l10n.getConstant("save"),cssClass:"e-save",isPrimary:!0}},{click:this.repeatCancelDialog.bind(this),buttonModel:{cssClass:"e-cancel",content:this.l10n.getConstant("cancel")}}],target:this.element,animationSettings:{effect:"Zoom"},enableRtl:this.parent.enableRtl,isModal:!0,cssClass:"e-recurrence-dialog",open:this.repeatOpenDialog.bind(this)}),this.element.appendChild(e),this.repeatDialogObject.appendTo(e),this.repeatDialogObject.isStringTemplate=!0,this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector(".e-rec-editor"))},e.prototype.loadRecurrenceEditor=function(){this.repeatDialogObject.show(),this.recurrenceEditor&&this.repeatRule&&this.recurrenceEditor.setRecurrenceRule(this.repeatRule)},e.prototype.onRepeatChange=function(e){if(e)this.repeatDialogObject||this.renderRepeatDialog(),this.recurrenceEditor.setProperties({startDate:this.repeatStartDate,selectedType:0}),this.loadRecurrenceEditor();else{this.repeatDialogObject&&this.repeatDialogObject.hide(),this.repeatRule="",this.recurrenceEditor&&(this.recurrenceEditor.setRecurrenceRule(this.repeatRule),this.updateRepeatLabel(this.repeatRule));var t=this.element.querySelector(".e-recurrence-container");sf.base.addClass([t],"e-hide")}},e.prototype.repeatSaveDialog=function(){this.repeatRule=this.recurrenceEditor.getRecurrenceRule();var e=this.element.querySelector(".e-recurrence-container");this.recurrenceEditor.getRecurrenceRule()?sf.base.removeClass([e],"e-hide"):(sf.base.addClass([e],"e-hide"),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule),this.closeRepeatDialog()},e.prototype.closeRepeatDialog=function(){this.repeatDialogObject.hide()},e.prototype.repeatCancelDialog=function(){this.closeRepeatDialog(),this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule),this.repeatTempRule||this.repeatStatus.setProperties({checked:!1})},e.prototype.repeatOpenDialog=function(){this.repeatTempRule=this.recurrenceEditor.getRecurrenceRule()},e.prototype.onCellDetailsUpdate=function(e,t){if(this.parent.eventSettings.allowAdding){this.element.querySelector("."+B).removeAttribute("data-id"),this.element.querySelector(".e-title-text").innerHTML=this.l10n.getConstant("newEvent"),e.Timezone=!1,this.repeatStartDate=e[this.fields.startTime],this.repeatRule="",this.showDetails(e),e[this.fields.recurrenceRule]&&this.recurrenceEditor&&(this.recurrenceEditor.setRecurrenceRule(e[this.fields.recurrenceRule],e[this.fields.startTime]),this.repeatRule=e[this.fields.recurrenceRule]);var i=this.element.querySelector(".e-event-delete");if(i&&sf.base.addClass([i],"e-disable"),this.recurrenceEditor&&this.recurrenceEditor.setProperties({startDate:e[this.fields.startTime],selectedType:sf.base.isNullOrUndefined(t)?sf.base.isNullOrUndefined(e[this.fields.recurrenceRule])?0:this.recurrenceEditor.selectedType:t}),this.parent.isAdaptive&&sf.base.isNullOrUndefined(this.parent.editorTemplate)){var a=this.element.querySelector(".e-recurrence-container");sf.base.addClass([a],"e-hide"),this.updateRepeatLabel(this.repeatRule)}else{var n=this.element.querySelector(".e-event-save");this.disableButton(n,!1)}this.dialogObject.show()}},e.prototype.convertToEventData=function(e,t){e.subject&&(t[this.fields.subject]=e.subject),t[this.fields.startTime]=e.startTime,t[this.fields.endTime]=e.endTime,t[this.fields.isAllDay]=e.isAllDay,e.RecurrenceRule&&(t[this.fields.recurrenceRule]=e.RecurrenceRule),(this.parent.resourceCollection.length>0||this.parent.activeViewOptions.group.resources.length>0)&&this.parent.resourceBase.setResourceValues(t)},e.prototype.applyFormValidation=function(){var e=function(e){return e&&Object.keys(e).length>0?e:void 0},t=this.element.querySelector("."+B),i={};i[this.parent.eventSettings.fields.subject.name]=e(this.parent.eventSettings.fields.subject.validation),i[this.parent.eventSettings.fields.location.name]=e(this.parent.eventSettings.fields.location.validation),i[this.parent.eventSettings.fields.startTime.name]=e(this.parent.eventSettings.fields.startTime.validation),i[this.parent.eventSettings.fields.endTime.name]=e(this.parent.eventSettings.fields.endTime.validation),i[this.parent.eventSettings.fields.description.name]=e(this.parent.eventSettings.fields.description.validation),this.fieldValidator.renderFormValidator(t,i,this.element)},e.prototype.showDetails=function(e){var t=sf.base.extend({},e,null,!0);0===t[this.fields.endTime].getHours()&&0===t[this.fields.endTime].getMinutes()&&this.trimAllDay(t),this.eventData=t;for(var i=this.getFormElements("e-schedule-dialog"),a=Object.keys(t),n=0,r=i;n<r.length;n++){var s=r[n],o=s.name||this.getColumnName(s);sf.base.isNullOrUndefined(o)||""===o||(-1!==a.indexOf(o)?this.setValueToElement(s,t[o]):this.setDefaultValueToElement(s))}if(sf.base.isNullOrUndefined(this.parent.editorTemplate)){this.onAllDayChange(t[this.fields.isAllDay]);var l=this.getInstance("e-time-zone.e-field");sf.base.isNullOrUndefined(t[this.fields.startTimezone])&&sf.base.isNullOrUndefined(t[this.fields.endTimezone])||(l.checked=!0,l.dataBind()),this.timezoneChangeStyle(l.checked),delete t.Timezone}},e.prototype.getColumnName=function(e){var t=e.getAttribute("data-name")||"";if(""===t){var i=!1,a="";e.classList.contains("e-dropdownlist")?(a="e-ddl",i=!0):e.classList.contains("e-multiselect")?(a="e-multiselect",i=!0):e.classList.contains("e-datetimepicker")?a="e-datetimepicker":e.classList.contains("e-datepicker")?a="e-datepicker":e.classList.contains("e-checkbox")&&(a="e-checkbox");var n=i?"."+a+":not(.e-control)":"."+a,r=sf.base.closest(e,n)||e.querySelector("."+a);if(r){var s=r.querySelector("[name]");s&&(t=s.name)}}return t},e.prototype.onAllDayChange=function(e){var t,i=this.getInstance("e-start"),a=this.getInstance("e-end"),n=this.element.querySelector(".e-time-zone-container");e?(t=sf.base.isNullOrUndefined(this.parent.dateFormat)?this.getFormat("dateFormats"):this.parent.dateFormat,sf.base.addClass(this.element.querySelectorAll(".e-time-icon"),"e-icon-disable"),sf.base.addClass([n],"e-disable"),this.element.querySelector(".e-time-zone-row")&&sf.base.removeClass([this.element.querySelector(".e-time-zone-row")],"e-enable"),i.format=a.format=t):(t=sf.base.isNullOrUndefined(this.parent.dateFormat)?this.getFormat("dateFormats")+" "+this.getFormat("timeFormats"):this.parent.dateFormat+" "+this.getFormat("timeFormats"),sf.base.removeClass(this.element.querySelectorAll(".e-time-icon"),"e-icon-disable"),sf.base.removeClass([n],"e-disable"),this.element.querySelector(".e-checkbox-wrapper .e-time-zone").checked&&sf.base.addClass([this.element.querySelector(".e-time-zone-row")],"e-enable"),i.format=a.format=t),this.cellClickAction&&this.updateDateTime(e,i,a),i.dataBind(),a.dataBind(),sf.base.isNullOrUndefined(this.recurrenceEditor)||this.recurrenceEditor.updateRuleUntilDate(i.value)},e.prototype.updateDateTime=function(e,t,i){var a,n;if(e)if(a=m(new Date(this.eventWindowTime.startTime.getTime())),this.parent.activeCellsData.isAllDay){var r=y(new Date(this.eventWindowTime.endTime.getTime()),-1).getTime();n=+this.eventWindowTime.startTime>r?this.eventWindowTime.endTime:new Date(r)}else n=m(new Date(this.eventWindowTime.endTime.getTime()));else{var s=this.parent.activeCellsData.startTime;if((a=new Date(this.eventWindowTime.startTime.getTime())).setHours(s.getHours(),s.getMinutes(),s.getSeconds()),this.parent.activeCellsData.isAllDay){var o=this.parent.getStartEndTime(this.parent.workHours.start);a.setHours(o.getHours(),o.getMinutes(),o.getSeconds()),(n=new Date(a.getTime())).setMilliseconds(6e4*this.getSlotDuration())}else(n=new Date(a.getTime())).setMilliseconds(this.parent.activeCellsData.endTime.getTime()-this.parent.activeCellsData.startTime.getTime())}this.eventWindowTime={startTime:new Date(a.getTime()),endTime:new Date(n.getTime())},t.value=a,i.value=n,t.dataBind(),i.dataBind()},e.prototype.getFormat=function(e){return sf.base.isBlazor()?"dateFormats"===e?sf.base.IntlBase.compareBlazorDateFormats({skeleton:"d"},this.parent.locale).format:sf.base.IntlBase.compareBlazorDateFormats({skeleton:"t"},this.parent.locale).format:"en"===this.parent.locale||"en-US"===this.parent.locale?sf.base.getValue(e+".short",sf.base.getDefaultDateObject(this.parent.getCalendarMode())):sf.base.getValue("main."+this.parent.locale+".dates.calendars."+this.parent.getCalendarMode()+"."+e+".short",sf.base.cldrData)},e.prototype.onEventDetailsUpdate=function(e){if(this.parent.eventSettings.allowEditing){if(this.parent.isAdaptive||sf.base.removeClass([this.element.querySelector(".e-event-delete")],"e-disable"),this.element.querySelector(".e-title-text").innerHTML=this.l10n.getConstant("editEvent"),this.element.querySelector("."+B).setAttribute("data-id",e[this.fields.id].toString()),sf.base.isNullOrUndefined(this.parent.editorTemplate)){e=sf.base.extend({},e,null,!0);var t=this.getInstance("e-time-zone.e-field"),i=void 0;e[this.fields.startTimezone]||e[this.fields.endTimezone]?(i=!0,this.parent.eventBase.timezoneConvert(e)):i=!1,e.Timezone=i,t.checked=i,t.dataBind()}if(this.showDetails(e),e[this.fields.recurrenceRule]&&this.recurrenceEditor?this.recurrenceEditor.setRecurrenceRule(e[this.fields.recurrenceRule],e[this.fields.startTime]):!this.parent.isAdaptive&&this.recurrenceEditor&&(this.recurrenceEditor.setProperties({startDate:e[this.fields.startTime]}),this.recurrenceEditor.setRecurrenceRule("")),this.repeatStartDate=e[this.fields.startTime],this.repeatRule="",e[this.fields.recurrenceRule]&&(this.recurrenceEditor&&this.recurrenceEditor.setRecurrenceRule(e[this.fields.recurrenceRule],e[this.fields.startTime]),this.repeatRule=e[this.fields.recurrenceRule]),this.parent.isAdaptive&&sf.base.isNullOrUndefined(this.parent.editorTemplate)){var a=this.element.querySelector(".e-recurrence-container");e[this.fields.recurrenceRule]?(sf.base.removeClass([a],"e-hide"),this.repeatStatus.setProperties({checked:!0})):(sf.base.addClass([a],"e-hide"),this.repeatStatus.setProperties({checked:!1})),this.updateRepeatLabel(this.repeatRule)}var n=this.parent.readonly||e[this.fields.isReadonly];if(this.parent.isAdaptive){var r=this.element.querySelector(".e-save-icon");r&&(n?sf.base.addClass([r],"e-icon-disable"):sf.base.removeClass([r],"e-icon-disable"))}else{var s=this.element.querySelector(".e-event-save"),o=this.element.querySelector(".e-event-delete");this.disableButton(s,n),this.disableButton(o,n)}this.dialogObject.show()}},e.prototype.disableButton=function(e,t){e&&(e.ej2_instances[0].disabled=t)},e.prototype.renderRecurrenceEditor=function(){return new Mt({calendarMode:this.parent.calendarMode,cssClass:this.parent.cssClass,dateFormat:this.parent.dateFormat,enableRtl:this.parent.enableRtl,firstDayOfWeek:this.parent.activeViewOptions.firstDayOfWeek,locale:this.parent.locale})},e.prototype.updateRepeatLabel=function(e){this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog();var t=e?this.l10n.getConstant("repeats")+" "+this.recurrenceEditor.getRuleSummary(e):this.l10n.getConstant("repeat");this.repeatStatus.setProperties({label:t})},e.prototype.dialogClose=function(){this.isCrudAction=!1,this.parent.activeEventData={event:void 0,element:void 0},this.parent.currentAction=null,this.dialogObject.hide()},e.prototype.resetForm=function(){this.fieldValidator.destroyToolTip(),this.resetFormFields(),this.parent.isAdaptive||!this.recurrenceEditor||this.recurrenceEditor.isDestroyed||this.recurrenceEditor.resetFields()},e.prototype.timezoneChangeStyle=function(e){var t=this.element.querySelector(".e-time-zone-row"),i=this.parent.tzModule.getLocalTimezoneName();if(e){sf.base.addClass([t],"e-enable");var a=this.getInstance("e-start-time-zone"),n=this.getInstance("e-end-time-zone"),r=a.dataSource;if(!a.value||!this.parent.timezone)r.some((function(e){return e.Value===i}))||(r.push({Value:i,Text:i}),a.dataSource=r,n.dataSource=r,a.dataBind(),n.dataBind());a.value=a.value||this.parent.timezone||i,n.value=n.value||this.parent.timezone||i,a.dataBind(),n.dataBind()}else sf.base.removeClass([t],"e-enable")},e.prototype.resetFormFields=function(){for(var e=0,t=this.getFormElements("e-schedule-dialog");e<t.length;e++){var i=t[e],a=i.name||this.getColumnName(i);sf.base.isNullOrUndefined(a)||""===a||this.setDefaultValueToElement(i)}},e.prototype.eventSave=function(e){var t=this.element.querySelector("."+B);if(!t||!t.classList.contains("e-formvalidator")||t.ej2_instances[0].validate()){var i=this.getEventDataFromEditor();this.processEventValidation(i.tempData,e)||(this.eventCrudData=i.eventData,this.isCrudAction=!0,this.dialogObject.hide())}},e.prototype.getEventDataFromEditor=function(){var e=sf.base.extend({},this.getObjectFromFormData("e-schedule-dialog"));e.Timezone||(e[this.fields.startTimezone]=null,e[this.fields.endTimezone]=null),delete e.Timezone,delete e.Repeat,this.setDefaultValueToObject(e),e[this.fields.recurrenceRule]=this.recurrenceEditor?this.recurrenceEditor.getRecurrenceRule()||null:void 0;var t=sf.base.extend({},e,null,!0);return e[this.fields.isAllDay]&&(e[this.fields.startTime]=sf.base.isNullOrUndefined(e[this.fields.startTime])?null:m(new Date(e[this.fields.startTime].getTime())),e[this.fields.endTime]=sf.base.isNullOrUndefined(e[this.fields.endTime])?null:y(m(new Date(e[this.fields.endTime].getTime())),1)),{eventData:e,tempData:t}},e.prototype.processEventValidation=function(e,t){var i;if(sf.base.isNullOrUndefined(this.parent.editorTemplate)){if(!e[this.fields.startTime]||!e[this.fields.endTime])return this.parent.quickPopup.openValidationError("invalidDateError"),!0;if(e[this.fields.startTime]>e[this.fields.endTime])return this.parent.quickPopup.openValidationError("startEndError"),!0}if(this.recurrenceEditor&&this.recurrenceEditor.value&&""!==this.recurrenceEditor.value){var a=!0;if("seriesChangeAlert"===(i=this.recurrenceValidation(e[this.fields.startTime],e[this.fields.endTime],t))&&this.parent.uiStateValues.isIgnoreOccurrence&&(a=!1),!sf.base.isNullOrUndefined(i)&&a&&(!this.parent.enableRecurrenceValidation&&"wrongPattern"===i||this.parent.enableRecurrenceValidation))return this.parent.quickPopup.openRecurrenceValidationAlert(i),!0}return!1},e.prototype.processCrudActions=function(e){var t=this;this.parent.uiStateValues.isBlock=!1;var i=this.getResourceData(e),a=(this.parent.activeViewOptions.group.resources.length>0||this.parent.resourceCollection.length>0)&&!this.parent.activeViewOptions.group.allowGroupEdit&&!sf.base.isNullOrUndefined(i),n=this.getEventIdFromForm();if(sf.base.isNullOrUndefined(n))this.parent.currentAction="Add",a?this.resourceSaveEvent(e,this.parent.currentAction):(e[this.fields.id]=this.parent.eventBase.getEventMaxID(),this.parent.addEvent(e));else{var r="string"===this.parent.eventBase.getEventIDType()?n:parseInt(n,10),s=this.parent.eventsData.filter((function(e){return e[t.fields.id]===r}))[0];if((e=sf.base.extend({},s,e))[this.fields.isReadonly])return!1;var o=void 0;if(!sf.base.isNullOrUndefined(s[this.fields.recurrenceRule])){if(o=this.parent.currentAction,e.Guid=this.parent.activeEventData.event.Guid,"EditOccurrence"===this.parent.currentAction&&(e[this.fields.recurrenceID]?(r=e[this.fields.recurrenceID],o=null):(e[this.fields.id]=this.parent.eventBase.getEventMaxID(),e.Guid=this.parent.activeEventData.event.Guid),this.parent.enableRecurrenceValidation&&this.editOccurrenceValidation(r,e)))return this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert"),!0;"EditSeries"===this.parent.currentAction||e[this.fields.id]!==s[this.fields.id]?e[this.fields.recurrenceID]=s[this.fields.id]:"EditFollowingEvents"===this.parent.currentAction&&(e[this.fields.id]=this.parent.eventBase.getEventMaxID(),e[this.fields.followingID]=s[this.fields.id])}a?this.resourceSaveEvent(e,"Save",o):this.parent.saveEvent(e,o)}return this.parent.uiStateValues.isBlock},e.prototype.getResourceData=function(e){var t=null;!sf.base.isNullOrUndefined(this.parent.resourceBase)&&!sf.base.isNullOrUndefined(this.parent.resourceBase.resourceCollection)&&this.parent.resourceBase.resourceCollection.length>0&&(t=e[this.parent.resourceBase.resourceCollection.slice(-1)[0].field]);return t},e.prototype.getObjectFromFormData=function(e){for(var t={},i=0,a=this.getFormElements(e);i<a.length;i++){var n=a[i],r=n.name||this.getColumnName(n);sf.base.isNullOrUndefined(r)||""===r||(t[r]=this.getValueFromElement(n))}return t},e.prototype.setDefaultValueToObject=function(e){sf.base.isNullOrUndefined(e[this.fields.subject])||(e[this.fields.subject]=e[this.fields.subject]||this.l10n.getConstant("addTitle")),sf.base.isNullOrUndefined(e[this.fields.location])||(e[this.fields.location]=e[this.fields.location]||this.parent.eventSettings.fields.location.default),sf.base.isNullOrUndefined(e[this.fields.description])||(e[this.fields.description]=e[this.fields.description]||this.parent.eventSettings.fields.description.default)},e.prototype.recurrenceValidation=function(e,t,i){var a,n=this.recurrenceEditor,r=this.getInstance("e-repeat-interval.e-numerictextbox").value;if(i!==this.l10n.getConstant("ok")){var s=this.parent.activeEventData.event,o=[];if(("EditSeries"===this.parent.currentAction||"EditFollowingEvents"===this.parent.currentAction)&&!sf.base.isNullOrUndefined(s)){var l=s[this.parent.eventFields.startTime],c=this.parent.eventBase.getSeriesEvents(this.eventData,l);if(c.length>0)o=this.parent.eventBase.getEditedOccurrences(c,l);else{var p=this.parent.eventBase.getEventById(s[this.parent.eventFields.id]);o=this.parent.eventBase.getEditedOccurrences([p],l)}"EditSeries"!==this.parent.currentAction||sf.base.isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])||o.push(this.eventData)}if(o.length>0&&(a="seriesChangeAlert"),"until"===this.getInstance("e-end-on-left .e-ddl .e-dropdownlist").value&&this.getInstance("e-end-on-date .e-datepicker").value<e&&(a="wrongPattern"),sf.base.isNullOrUndefined(a))switch(n.value.split(";")[0].split("=")[1]){case"DAILY":(t.getTime()-e.getTime())/36e5>=24*r&&(a="createError");break;case"WEEKLY":for(var d=n.value.split(";")[1].split("=")[1].split(","),h={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6},u=[],f=[],m=0;m<d.length*(r+1);m++)u[m]=d.length>m?h[d[m]]:u[m-d.length]+7*r;var v=u.sort((function(e,t){return e-t}));for(m=1;m<v.length;m++)f.push(v[m]-v[m-1]);((t.getTime()-e.getTime())/36e5>=24*Math.min.apply(Math,f)||sf.base.isNullOrUndefined(r))&&(a="createError");break;case"MONTHLY":t.getTime()>=new Date(+e).setMonth(e.getMonth()+r)&&(a="createError");break;case"YEARLY":t.getTime()>=new Date(+e).setFullYear(e.getFullYear()+r)&&(a="createError")}}else t.getTime()>=new Date(+e).setMonth(e.getMonth()+r)&&(a="createError"),sf.base.isNullOrUndefined(a)&&this.parent.quickPopup.quickDialog.hide();return a},e.prototype.getRecurrenceIndex=function(e,t){for(var i,a=0;a<e.length;a++)if(t[this.fields.startTime].valueOf()===e[a][this.fields.startTime].valueOf()){i=a;break}return i},e.prototype.trimAllDay=function(e){if(e[this.fields.isAllDay]){var t=y(new Date(+e[this.fields.endTime]),-1).getTime();e[this.fields.endTime]=+e[this.fields.startTime]>t?e[this.fields.endTime]:new Date(t)}},e.prototype.editOccurrenceValidation=function(e,t,i){var a=this;void 0===i&&(i=this.eventData);var n=this.parent.getOccurrencesByID(e);this.parent.eventsData.filter((function(t){return t[a.fields.recurrenceID]===e})).map((function(e){return n.push(sf.base.extend({},e))})),t=sf.base.extend({},t),this.trimAllDay(t);for(var r=0,s=n;r<s.length;r++){var o=s[r];this.trimAllDay(o)}this.parent.eventBase.sortByTime(n);var l=this.getRecurrenceIndex(n,i);if(sf.base.isNullOrUndefined(l))return!1;if(0===l)return!sf.base.isNullOrUndefined(n[l+1])&&!(new Date(+n[l+1][this.fields.startTime]).setHours(0,0,0,0)>new Date(+t[this.fields.endTime]).setHours(0,0,0,0));if(l===n.length-1){if(!(new Date(+n[l-1][this.fields.endTime]).setHours(0,0,0,0)<new Date(+t[this.fields.startTime]).setHours(0,0,0,0)))return!0}else if(!(new Date(+n[l-1][this.fields.endTime]).setHours(0,0,0,0)<new Date(+t[this.fields.startTime]).setHours(0,0,0,0)&&new Date(+n[l+1][this.fields.startTime]).setHours(0,0,0,0)>new Date(+t[this.fields.endTime]).setHours(0,0,0,0)))return!0;return!1},e.prototype.resourceSaveEvent=function(e,t,i){var a=this,r=this.parent.resourceBase.resourceCollection.slice(-1)[0],s=e[r.field];s=s instanceof Array?s:[s];for(var o=this.parent.resourceBase.lastResourceLevel,l=[],c=function(n){var c=sf.base.extend({},e,null,!0);c[p.fields.id]=p.parent.eventBase.getEventMaxID();var d=[],h=function(){if("Save"===t&&n===s.length-1)if(d.length>0){d[0][a.fields.id]=e[a.fields.id];for(var r=1;r<d.length;r++)d[r][a.fields.id]=a.parent.eventBase.getEventMaxID(n),l.push(d[r]),a.parent.saveEvent(d[0],i)}else c[a.fields.id]=e[a.fields.id],a.parent.saveEvent(c,i);else if(d.length>0)for(var o=0;o<d.length;o++)d[o][a.fields.id]=a.parent.eventBase.getEventMaxID(o),l.push(d[o]);else c[a.fields.id]=a.parent.eventBase.getEventMaxID(n),l.push(c)};if(p.parent.activeViewOptions.group.byGroupID&&!sf.base.isNullOrUndefined(o)){var u=r.dataSource;if((y=x(u,r.idField,s[n]))<0)return{value:void 0};for(var f=u[y][r.groupIDField],m=o.filter((function(e){return e.resourceData[r.idField]===s[n]})).filter((function(e){return e.resourceData[r.groupIDField]===f}))[0].groupOrder,v=0;v<p.parent.resourceBase.resourceCollection.length;v++){var g=p.parent.resourceBase.resourceCollection[v].field;c[g]=m[v]instanceof Array?m[v][0]:m[v]}h()}else{for(var y=0;y<p.parent.resourceBase.resourceCollection.length-1;y++){g=p.parent.resourceBase.resourceCollection[y].field;if(c[g]instanceof Array&&c[g].length>1)for(var b=0;b<c[g].length;b++){var T=sf.base.extend({},c,null,!0);T[g]=e[g][b],T[r.field]=s[n],d.push(T)}else if(0===d.length)c[g]=e[g]instanceof Array?e[g][0]:e[g],c[r.field]=s[n];else for(var w=0;w<d.length;w++)d[w][g]=e[g]instanceof Array?e[g][0]:e[g]}c[r.field]=s[n],h()}},p=this,d=0;d<s.length;d++){var h=c(d);if("object"===n()(h))return h.value}if(l.length>0){for(var u=0,f=l;u<f.length;u++){var m=f[u];m[this.fields.recurrenceException]=null,m[this.fields.recurrenceID]=null}this.parent.addEvent(l)}},e.prototype.getEventIdFromForm=function(){return this.element.querySelector("."+B).getAttribute("data-id")},e.prototype.getFormElements=function(e){var t=[];if(t="e-schedule-dialog"===e?[].slice.call(this.element.querySelectorAll(".e-field")):[].slice.call(this.parent.element.querySelectorAll("."+e+" .e-field")),!sf.base.isBlazor())return t;for(var i=[],a=0,n=t;a<n.length;a++){var r=n[a];r.classList.contains("e-control")?i.push(r):r.querySelector(".e-control")?i.push(r.querySelector(".e-control")):i.push(r)}return i},e.prototype.getValueFromElement=function(e){return e.classList.contains("e-datepicker")||e.classList.contains("e-datetimepicker")||e.classList.contains("e-dropdownlist")||e.classList.contains("e-multiselect")?e.ej2_instances[0].value:e.classList.contains("e-checkbox")?e.ej2_instances[0].checked:"checkbox"===e.type?e.checked:sf.base.SanitizeHtmlHelper.sanitize(e.value)},e.prototype.setValueToElement=function(e,t){if(e.classList.contains("e-datepicker"))(i=e.ej2_instances[0]).value=t,i.dataBind();else if(e.classList.contains("e-datetimepicker")){(i=e.ej2_instances[0]).element.classList.contains("e-start")?this.eventWindowTime.startTime=new Date(""+t):this.eventWindowTime.endTime=new Date(""+t),i.value=t,i.dataBind()}else if(e.classList.contains("e-dropdownlist")){(i=e.ej2_instances[0]).value=t,i.dataBind()}else if(e.classList.contains("e-multiselect")){(i=e.ej2_instances[0]).value=[],i.value=t instanceof Array?t:[t],i.dataBind()}else if(e.classList.contains("e-checkbox")){var i;(i=e.ej2_instances[0]).checked=t,i.dataBind()}else"checkbox"!==e.type?e.value=t||"":e.checked=t},e.prototype.setDefaultValueToElement=function(e){if(e.classList.contains("e-datepicker"))(t=e.ej2_instances[0]).value=this.parent.getCurrentTime(),t.dataBind();else if(e.classList.contains("e-datetimepicker")){var t=e.ej2_instances[0],i=this.parent.getCurrentTime();this.eventWindowTime={startTime:i,endTime:i},t.value=i,t.dataBind()}else if(e.classList.contains("e-dropdownlist")){(t=e.ej2_instances[0]).value=null,t.dataBind()}else if(e.classList.contains("e-multiselect")){(t=e.ej2_instances[0]).value=[],t.dataBind()}else if(e.classList.contains("e-checkbox")){(t=e.ej2_instances[0]).checked=!1,t.dataBind()}else"checkbox"===e.type?e.checked=!1:e.value=""},e.prototype.getInstance=function(e){var t=this.element.querySelector("."+e);return t?t.ej2_instances[0]:null},e.prototype.eventDelete=function(){switch(this.parent.currentAction){case"EditOccurrence":var e=this.parent.eventFields;sf.base.isNullOrUndefined(this.parent.activeEventData.event[e.recurrenceRule])?this.parent.currentAction="Delete":this.parent.currentAction="DeleteOccurrence";break;case"EditSeries":this.parent.currentAction="DeleteSeries";break;case"Save":this.parent.currentAction="Delete"}this.isCrudAction=!1,this.dialogObject.hide(),this.parent.quickPopup.openDeleteAlert()},e.prototype.getRecurrenceEditorInstance=function(){return this.parent.isAdaptive&&!this.repeatDialogObject&&this.renderRepeatDialog(),this.recurrenceEditor},e.prototype.destroyComponents=function(){for(var e=0,t=this.getFormElements("e-schedule-dialog");e<t.length;e++){var i=t[e],a=void 0;(i.classList.contains("e-datetimepicker")||i.classList.contains("e-datepicker")||i.classList.contains("e-checkbox")||i.classList.contains("e-dropdownlist")||i.classList.contains("e-multiselect"))&&(a=i.ej2_instances),a&&a[0]&&a[0].destroy()}this.buttonObj&&this.buttonObj.destroy()},e.prototype.destroy=function(){this.resetEditorTemplate(),this.updateEditorTemplate(),this.recurrenceEditor&&this.recurrenceEditor.destroy(),this.destroyComponents(),this.fieldValidator.destroy(),this.repeatDialogObject&&(this.repeatDialogObject.destroy(),sf.base.remove(this.repeatDialogObject.element)),this.dialogObject&&(this.dialogObject.destroy(),this.dialogObject=null),this.element&&(sf.base.remove(this.element),this.element=null)},e}(),Pt=function(){function e(e){this.translateY=0,this.itemSize=60,this.bufferCount=3,this.renderedLength=0,this.averageRowHeight=0,this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on("virtual-scroll",this.virtualScrolling,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off("virtual-scroll",this.virtualScrolling)},e.prototype.getRenderedCount=function(){return this.setItemSize(),Math.ceil(this.parent.element.clientHeight/this.itemSize)+this.bufferCount},e.prototype.renderVirtualTrack=function(e){var t=sf.base.createElement("div",{className:"e-virtual-track"});t.style.height=this.parent.resourceBase.expandedResources.length*this.itemSize+"px",e.appendChild(t)},e.prototype.updateVirtualScrollHeight=function(){var e=this.parent.element.querySelector(".e-virtual-track"),t=this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex;if(this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex!==t){var i=this.parent.element.querySelector(".e-content-table");this.renderedLength=i.querySelector("tbody").children.length,e.style.height=i.offsetHeight+(this.parent.resourceBase.expandedResources.length-this.renderedLength)*i.offsetHeight/this.renderedLength+"px"}else e.style.height="";this.averageRowHeight=e.offsetHeight/this.parent.resourceBase.expandedResources.length},e.prototype.updateVirtualTrackHeight=function(e){var t=this.parent.resourceBase.renderedResources.length;if(t!==this.getRenderedCount()){e.style.height=this.parent.element.querySelector(".e-content-wrap").clientHeight+"px";var i=this.parent.element.querySelector(".e-resource-column-wrap"),a=this.parent.element.querySelector(".e-content-wrap"),n=this.parent.element.querySelector(".e-event-table");this.translateY=0,this.setTranslate(i,a,n)}else{var r=this.parent.resourceBase.renderedResources[t-1].groupIndex,s=t+(this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex-r);s=s>this.parent.resourceBase.expandedResources.length?this.parent.resourceBase.expandedResources.length:s,e.style.height=s*this.itemSize+"px"}},e.prototype.setItemSize=function(){this.itemSize=o(this.parent.activeView.element,"e-work-cells")||this.itemSize},e.prototype.virtualScrolling=function(){this.parent.quickPopup.quickPopupHide(),this.parent.quickPopup.morePopup.hide();var e=this.parent.element.querySelector(".e-resource-column-wrap"),t=this.parent.element.querySelector(".e-content-wrap"),i=this.parent.element.querySelector(".e-event-table"),n=this.parent.element.querySelector(".e-current-timeline"),r=this.parent.element.querySelector(".e-content-table");this.renderedLength=e.querySelector("tbody").children.length;var s=parseInt(e.querySelector("tbody td").getAttribute("data-group-index"),10),o=this.parent.rowAutoHeight?r.offsetHeight-t.offsetHeight:this.bufferCount*this.itemSize;sf.base.addClass([t],"e-transition");var l=[];t.scrollTop-this.translateY<0?l=this.upScroll(t,s):t.scrollTop-this.translateY>o&&(l=this.downScroll(t,s)),!sf.base.isNullOrUndefined(l)&&l.length>0&&(this.updateContent(e,t,i,l),this.setTranslate(e,t,i,n),this.parent.notify(a,{}),this.parent.dragAndDropModule&&"drag"===this.parent.dragAndDropModule.actionObj.action&&this.parent.dragAndDropModule.navigationWrapper())},e.prototype.upScroll=function(e,t){var i=~~(e.scrollTop/this.itemSize)+Math.ceil(e.clientHeight/this.itemSize)-this.renderedLength;this.parent.rowAutoHeight&&(i=i>t?t-this.bufferCount:i),i=i>0?i:0;var a=this.getBufferCollection(i,i+this.renderedLength);if(this.parent.resourceBase.renderedResources=a,0===t)this.translateY=e.scrollTop;else{var n=this.parent.rowAutoHeight?this.averageRowHeight:this.itemSize;this.translateY=e.scrollTop-this.bufferCount*n>0?e.scrollTop-this.bufferCount*n:0}return a},e.prototype.downScroll=function(e,t){if(this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length-1].groupIndex===this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length-1].groupIndex)return null;var i=~~(e.scrollTop/this.itemSize);this.parent.rowAutoHeight&&(i=(i=~~((e.scrollTop-this.translateY)/this.averageRowHeight)+t)>t+this.bufferCount?i:t+this.bufferCount);var a=i+this.renderedLength;a=a>this.parent.resourceBase.expandedResources.length?i+(this.parent.resourceBase.expandedResources.length-i):a;var n=this.getBufferCollection(a-this.renderedLength,a);return this.translateY=e.scrollTop,n},e.prototype.updateContent=function(e,t,i,a){for(var n=e.querySelector("tbody").children.length,r=0;r<n;r++)sf.base.remove(e.querySelector("tbody tr")),sf.base.remove(t.querySelector("tbody tr")),sf.base.remove(i.querySelector("div"));this.parent.resourceBase.renderedResources=a;var s=this.parent.resourceBase.getContentRows(a),o=this.parent.activeView.getContentRows(),l=this.parent.activeView.getEventRows(a.length);sf.base.append(s,e.querySelector("tbody")),sf.base.append(o,t.querySelector("tbody")),sf.base.append(l,i)},e.prototype.getBufferCollection=function(e,t){return this.parent.resourceBase.expandedResources.slice(e,t)},e.prototype.setTranslate=function(e,t,i,a){sf.base.setStyleAttribute(e.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),sf.base.setStyleAttribute(t.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),sf.base.setStyleAttribute(i,{transform:"translateY("+this.translateY+"px)"}),sf.base.isNullOrUndefined(a)||sf.base.setStyleAttribute(a,{transform:"translateY("+this.translateY+"px)"})},e.prototype.destroy=function(){this.removeEventListener()},e}(),Ht=function(){function e(e){this.parent=e}return e.prototype.render=function(e,t){void 0===t&&(t=!0),this.initializeLayout(e),t&&!this.parent.isServerRenderer()&&this.refreshDataManager()},e.prototype.initializeLayout=function(e){switch(this.parent.activeView&&(this.parent.activeView.removeEventListener(),this.parent.activeView.destroy()),e){case"Day":this.parent.activeView=this.parent.dayModule;break;case"Week":this.parent.activeView=this.parent.weekModule;break;case"WorkWeek":this.parent.activeView=this.parent.workWeekModule;break;case"Month":this.parent.activeView=this.parent.monthModule;break;case"Agenda":this.parent.activeView=this.parent.agendaModule;break;case"MonthAgenda":this.parent.activeView=this.parent.monthAgendaModule;break;case"TimelineDay":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-day-view";break;case"TimelineWorkWeek":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-work-week-view";break;case"TimelineWeek":this.parent.activeView=this.parent.timelineViewsModule,this.parent.activeView.viewClass="e-timeline-week-view";break;case"TimelineMonth":this.parent.activeView=this.parent.timelineMonthModule;break;case"TimelineYear":this.parent.activeView=this.parent.timelineYearModule}if(sf.base.isNullOrUndefined(this.parent.activeView)){var t=this.parent.viewCollections[0].option;if(t)return this.parent.setScheduleProperties({currentView:t}),this.parent.onServerDataBind(),this.parent.headerModule&&(this.parent.headerModule.updateActiveView(),this.parent.headerModule.setCalendarView()),this.initializeLayout(t);throw Error("Inject required modules")}this.parent.activeView.viewIndex=this.parent.viewIndex,this.updateLabelText(e),this.parent.activeView.addEventListener(),this.parent.activeView.getRenderDates(),this.parent.uiStateValues.isGroupAdaptive=this.parent.isAdaptive&&this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.enableCompactView,this.parent.virtualScrollModule&&(this.parent.virtualScrollModule.destroy(),this.parent.virtualScrollModule=null),-1!==this.parent.currentView.indexOf("Timeline")&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.virtualScrollModule=new Pt(this.parent),this.parent.uiStateValues.top=0),this.updateHeader(),this.parent.activeView.renderLayout("e-current-panel"),this.parent.eventTooltip&&(this.parent.eventTooltip.destroy(),this.parent.eventTooltip=null),(this.parent.eventSettings.enableTooltip||this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.headerTooltipTemplate)&&(this.parent.eventTooltip=new ut(this.parent))},e.prototype.updateHeader=function(){this.parent.headerModule&&(this.parent.headerModule.setDayOfWeek(this.parent.activeViewOptions.firstDayOfWeek),this.parent.activeViewOptions.readonly?sf.base.addClass([this.parent.element],"e-read-only"):this.parent.element.classList.contains("e-read-only")&&sf.base.removeClass([this.parent.element],"e-read-only"),this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText()),this.parent.headerModule.updateHeaderItems("remove"))},e.prototype.updateLabelText=function(e){var t=this.parent.activeView.getLabelText(e);this.parent.element.setAttribute("role","main"),this.parent.element.setAttribute("aria-label",t)},e.prototype.refreshDataManager=function(){var e=this,t=this.parent.activeView.startDate(),i=this.parent.activeView.endDate();this.parent.dataModule.getData(this.parent.dataModule.generateQuery(t,i)).then((function(t){return e.dataManagerSuccess(t)})).catch((function(t){return e.dataManagerFailure(t)}))},e.prototype.dataManagerSuccess=function(e){var t=this;this.parent.isDestroyed||this.parent.trigger("dataBinding",e,(function(e){var i=sf.base.extend([],e.result,null,!0);t.parent.eventsData=i.filter((function(e){return!e[t.parent.eventFields.isBlock]})),t.parent.blockData=i.filter((function(e){return e[t.parent.eventFields.isBlock]}));var n=t.parent.eventBase.processData(i);t.parent.notify(a,{processedData:n}),t.parent.dragAndDropModule&&"drag"===t.parent.dragAndDropModule.actionObj.action&&t.parent.dragAndDropModule.navigationWrapper(),t.parent.renderCompleted(),t.parent.trigger("dataBound",null,(function(){return t.parent.hideSpinner()}))}))},e.prototype.dataManagerFailure=function(e){var t=this;this.parent.isDestroyed||this.parent.trigger("actionFailure",{error:e},(function(){return t.parent.hideSpinner()}))},e}(),jt=(Qe=function(e,t){return(Qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Qe(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),It=function(e,t,i,a){var r,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},Lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jt(t,e),It([sf.base.Property(!0)],t.prototype,"highlight",void 0),It([sf.base.Property("09:00")],t.prototype,"start",void 0),It([sf.base.Property("18:00")],t.prototype,"end",void 0),t}(sf.base.ChildProperty),qt=(Xe=function(e,t){return(Xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Xe(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Bt=function(e,t,i,a){var r,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},Nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qt(t,e),Bt([sf.base.Property(!0)],t.prototype,"enable",void 0),Bt([sf.base.Property(60)],t.prototype,"interval",void 0),Bt([sf.base.Property(2)],t.prototype,"slotCount",void 0),Bt([sf.base.Property()],t.prototype,"minorSlotTemplate",void 0),Bt([sf.base.Property()],t.prototype,"majorSlotTemplate",void 0),t}(sf.base.ChildProperty),Ft=(Ke=function(e,t){return(Ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Ke(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ut=function(e,t,i,a){var r,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},Wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ft(t,e),Ut([sf.base.Property("Both")],t.prototype,"templateType",void 0),Ut([sf.base.Property()],t.prototype,"header",void 0),Ut([sf.base.Property()],t.prototype,"content",void 0),Ut([sf.base.Property()],t.prototype,"footer",void 0),t}(sf.base.ChildProperty),zt=(Ze=function(e,t){return(Ze=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Ze(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),_t=function(e,t,i,a){var r,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},Yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zt(t,e),_t([sf.base.Property()],t.prototype,"option",void 0),_t([sf.base.Property()],t.prototype,"template",void 0),t}(sf.base.ChildProperty),Gt=function(){function e(e){this.parent=e}return e.prototype.getQuery=function(){var e=this.parent.activeView.startDate(),t=this.parent.activeView.endDate();return this.parent.dataModule.generateQuery(e,t)},e.prototype.getTable=function(){return this.parent.eventSettings.query?this.parent.eventSettings.query.clone().fromTable:null},e.prototype.refreshData=function(e){var t=this,i={requestType:e.requestType,cancel:!1,data:e.data,addedRecords:e.editParms.addedRecords,changedRecords:e.editParms.changedRecords,deletedRecords:e.editParms.deletedRecords};this.parent.dragAndDropModule&&this.parent.dragAndDropModule.actionObj&&this.parent.dragAndDropModule.actionObj.element&&(this.parent.dragAndDropModule.actionObj.element.style.display="none"),this.parent.resizeModule&&this.parent.resizeModule.actionObj&&this.parent.resizeModule.actionObj.element&&(this.parent.resizeModule.actionObj.element.style.display="none"),this.parent.dataModule.dataManager.dataSource.offline?this.parent.trigger("actionComplete",i,(function(e){e.cancel||t.parent.renderModule.refreshDataManager()})):e.promise.then((function(e){t.parent.isDestroyed||t.parent.trigger("actionComplete",i,(function(e){e.cancel||t.parent.renderModule.refreshDataManager()}))})).catch((function(e){t.parent.isDestroyed||t.parent.trigger("actionFailure",{error:e})}))},e.prototype.addEvent=function(e){var i=this;if(this.parent.eventSettings.allowAdding){if(!this.isBlockEvent(e)&&this.parent.eventBase.isBlockRange(e))return void this.parent.quickPopup.openValidationError("blockAlert",e instanceof Array?[e]:e);var a=e instanceof Array?e:[e],n={requestType:"eventCreate",cancel:!1,addedRecords:a,changedRecords:[],deletedRecords:[]};sf.base.isBlazor()||(n.data=a),this.parent.trigger(t,n,(function(e){if(i.serializeData(e.addedRecords),!e.cancel){var t=i.parent.eventFields,a={addedRecords:[],changedRecords:[],deletedRecords:[]},n=void 0;if(e.addedRecords instanceof Array){for(var r=0,s=e.addedRecords;r<s.length;r++){var o=s[r];a.addedRecords.push(i.parent.eventBase.processTimezone(o,!0))}n=i.parent.dataModule.dataManager.saveChanges(a,t.id,i.getTable(),i.getQuery())}else{var l=i.parent.eventBase.processTimezone(e.addedRecords,!0);a.addedRecords.push(l),n=i.parent.dataModule.dataManager.insert(l,i.getTable(),i.getQuery())}var c={requestType:"eventCreated",cancel:!1,data:e.addedRecords,promise:n,editParms:a};i.refreshData(c)}}))}},e.prototype.saveEvent=function(e,i){var a=this;if(this.parent.eventSettings.allowEditing){if("EditFollowingEvents"!==this.parent.currentAction&&!this.isBlockEvent(e)&&this.parent.eventBase.isBlockRange(e))return void this.parent.quickPopup.openValidationError("blockAlert",e instanceof Array?[e]:e);if(this.parent.currentAction=i,i)switch(i){case"EditOccurrence":this.processOccurrences(e,i);break;case"EditFollowingEvents":this.processFollowSeries(e,i);break;case"EditSeries":this.processEntireSeries(e,i)}else{var n={requestType:"eventChange",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};sf.base.isBlazor()||(n.data=e),this.parent.trigger(t,n,(function(e){if(a.serializeData(e.changedRecords),!e.cancel){var t=void 0,i=a.parent.eventFields,n={addedRecords:[],changedRecords:[],deletedRecords:[]};if(e.changedRecords instanceof Array){for(var r=0,s=e.changedRecords;r<s.length;r++){var o=s[r];n.changedRecords.push(a.parent.eventBase.processTimezone(o,!0))}t=a.parent.dataModule.dataManager.saveChanges(n,i.id,a.getTable(),a.getQuery())}else{var l=a.parent.eventBase.processTimezone(e.changedRecords,!0);n.changedRecords.push(l),t=a.parent.dataModule.dataManager.update(i.id,l,a.getTable(),a.getQuery())}var c={requestType:"eventChanged",cancel:!1,data:e.data,promise:t,editParms:n};a.refreshData(c)}}))}}},e.prototype.deleteEvent=function(e,i){var a=this;if(this.parent.eventSettings.allowDeleting){this.parent.currentAction=i;var n=[];if(n="string"==typeof e||"number"==typeof e?this.parent.eventsData.filter((function(t){return t[a.parent.eventFields.id]===e})):e instanceof Array?e:[e],i)switch(i){case"Delete":this.processEventDelete(n);break;case"DeleteOccurrence":this.processOccurrences(n,i);break;case"DeleteFollowingEvents":this.processFollowSeries(n,i);break;case"DeleteSeries":this.processEntireSeries(n,i)}else{var r={requestType:"eventRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:n};sf.base.isBlazor()||(r.data=e),this.parent.trigger(t,r,(function(e){if(a.serializeData(e.deletedRecords),!e.cancel){var t=void 0,i=a.parent.eventFields,n={addedRecords:[],changedRecords:[],deletedRecords:[]};if(e.deletedRecords.length>1){for(var r=0,s=e.deletedRecords;r<s.length;r++){var o=s[r];n.deletedRecords.push(o)}t=a.parent.dataModule.dataManager.saveChanges(n,i.id,a.getTable(),a.getQuery())}else n.deletedRecords.push(e.deletedRecords[0]),t=a.parent.dataModule.dataManager.remove(i.id,e.deletedRecords[0],a.getTable(),a.getQuery());a.parent.eventBase.selectWorkCellByTime(e.deletedRecords);var l={requestType:"eventRemoved",cancel:!1,data:e.data,promise:t,editParms:n};a.refreshData(l)}}))}}},e.prototype.processOccurrences=function(e,i){var a=this,n=[];if(e instanceof Array)for(var r=0,s=e;r<s.length;r++){var o=s[r];n.push({occurrence:o,parent:this.getParentEvent(o)})}else n={occurrence:e,parent:this.getParentEvent(e)};var l={requestType:"EditOccurrence"===i?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};sf.base.isBlazor()||(l.data=n),this.parent.trigger(t,l,(function(e){if(a.serializeData(e.changedRecords),!e.cancel){for(var t=a.parent.eventFields,r={addedRecords:[],changedRecords:[],deletedRecords:[]},s=n instanceof Array?n:[n],o=function(n,o){var l=e.changedRecords[n],c=s[n].parent,p=c[t.recurrenceException];switch(i){case"EditOccurrence":var d=a.parent.eventsProcessed.filter((function(e){return e.Guid===l.Guid}))[0],h=a.excludeDateCheck(d[t.startTime],p);h!==c[t.recurrenceException]?(c[t.recurrenceException]=h,l[t.recurrenceException]=_e(d[t.startTime]),l[t.recurrenceID]=c[t.id],l[t.followingID]=null,r.changedRecords.push(a.parent.eventBase.processTimezone(c,!0)),r.addedRecords.push(a.parent.eventBase.processTimezone(l,!0))):r.changedRecords.push(a.parent.eventBase.processTimezone(l,!0));break;case"DeleteOccurrence":l[t.recurrenceException]||(c[t.recurrenceException]=a.excludeDateCheck(l[t.startTime],p),r.changedRecords.push(a.parent.eventBase.processTimezone(c,!0))),l[t.id]!==c[t.id]&&r.deletedRecords.push(l)}},l=0,c=e.changedRecords.length;l<c;l++)o(l);var p=a.parent.dataModule.dataManager.saveChanges(r,t.id,a.getTable(),a.getQuery());a.parent.eventBase.selectWorkCellByTime(e.changedRecords);var d={requestType:"EditOccurrence"===i?"eventChanged":"eventRemoved",cancel:!1,data:e.data,promise:p,editParms:r};a.refreshData(d)}}))},e.prototype.processFollowSeries=function(e,i){var a=this,n=[];if(e instanceof Array)for(var r=0,s=e;r<s.length;r++){var o=s[r];n.push({occurrence:o,parent:this.getParentEvent(o)})}else n={occurrence:e,parent:this.getParentEvent(e)};var l={requestType:"EditFollowingEvents"===i?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};sf.base.isBlazor()||(l.data=n),this.parent.trigger(t,l,(function(e){if(a.serializeData(e.changedRecords),!e.cancel){for(var t=a.parent.eventFields,r={addedRecords:[],changedRecords:[],deletedRecords:[]},s=n instanceof Array?n:[n],o=function(n,o){var l=e.changedRecords[n],c=s[n].parent,p=a.parent.eventBase.getEventCollections(c,l);switch(i){case"EditFollowingEvents":a.processRecurrenceRule(c,l);var d=!a.parent.eventBase.isFollowingEvent(c,l);if(l[t.followingID]=d?null:c[t.id],l[t.recurrenceID]=null,r.addedRecords.push(a.parent.eventBase.processTimezone(l,!0)),r.changedRecords.push(a.parent.eventBase.processTimezone(c,!0)),!a.parent.uiStateValues.isIgnoreOccurrence){if(l[t.recurrenceException]=null,p.occurrence.length>0){var h=p.occurrence.slice(-1)[0][t.recurrenceRule];-1===h.indexOf("COUNT")&&(l[t.recurrenceRule]=h)}p.follow.length>0&&(l[t.recurrenceRule]=p.follow.slice(-1)[0][t.recurrenceRule],r.deletedRecords=r.deletedRecords.concat(p.follow)),d&&(p.occurrence=p.occurrence.filter((function(e){return e[t.recurrenceID]===l[t.id]}))),r.deletedRecords=r.deletedRecords.concat(p.occurrence)}break;case"DeleteFollowingEvents":a.processRecurrenceRule(c,l[t.startTime]),r.changedRecords.push(a.parent.eventBase.processTimezone(c,!0)),r.deletedRecords=r.deletedRecords.concat(p.occurrence).concat(p.follow)}},l=0,c=e.changedRecords.length;l<c;l++)o(l);var p=a.parent.dataModule.dataManager.saveChanges(r,t.id,a.getTable(),a.getQuery());a.parent.eventBase.selectWorkCellByTime(e.changedRecords);var d={requestType:"EditFollowingEvents"===i?"eventChanged":"eventRemoved",cancel:!1,data:e.data,promise:p,editParms:r};a.refreshData(d)}}))},e.prototype.processEntireSeries=function(e,i){var a=this,n=[];if(e instanceof Array)for(var r=0,s=e;r<s.length;r++){var o=s[r];n.push(this.getParentEvent(o,!0))}else n=this.getParentEvent(e,!0);var l={requestType:"EditSeries"===i?"eventChange":"eventRemove",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};sf.base.isBlazor()||(l.data=n),this.parent.trigger(t,l,(function(e){if(a.serializeData(e.changedRecords),!e.cancel){for(var t=a.parent.eventFields,r={addedRecords:[],changedRecords:[],deletedRecords:[]},s=n instanceof Array?n:[n],o=function(n,o){var l=e.changedRecords[n],c=s[n],p=a.parent.eventBase.getEventCollections(c),d=p.follow.concat(p.occurrence);switch(i){case"EditSeries":if(l[t.startTime]>c[t.startTime]&&a.processRecurrenceRule(c,l),l[t.id]=c[t.id],l[t.recurrenceID]=null,l[t.followingID]=null,a.parent.uiStateValues.isIgnoreOccurrence&&l[t.recurrenceException]){var h=a.parent.eventsData.filter((function(e){return e[t.id]===l[t.id]}));h.length>0&&(l[t.recurrenceRule]=h[0][t.recurrenceRule])}else l[t.recurrenceException]=null,r.deletedRecords=r.deletedRecords.concat(d);r.changedRecords.push(a.parent.eventBase.processTimezone(l,!0)),a.parent.uiStateValues.isIgnoreOccurrence=!1;break;case"DeleteSeries":r.deletedRecords=r.deletedRecords.concat(d.concat(c))}},l=0,c=e.changedRecords.length;l<c;l++)o(l);var p=a.parent.dataModule.dataManager.saveChanges(r,t.id,a.getTable(),a.getQuery());a.parent.eventBase.selectWorkCellByTime(e.changedRecords);var d={requestType:"EditSeries"===i?"eventChanged":"eventRemoved",cancel:!1,data:e.data,promise:p,editParms:r};a.refreshData(d)}}))},e.prototype.processEventDelete=function(e){for(var i=this,a=[],n=0,r=e;n<r.length;n++){var s=r[n];s[this.parent.eventFields.recurrenceRule]?a.push({occurrence:s,parent:this.getParentEvent(s)}):a.push(s)}var o={requestType:"eventRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:e};sf.base.isBlazor()||(o.data=a),this.parent.trigger(t,o,(function(e){if(i.serializeData(e.deletedRecords),!e.cancel){for(var t=i.parent.eventFields,n={addedRecords:[],changedRecords:[],deletedRecords:[]},r=function(r,s){var o=sf.base.isNullOrUndefined(e.deletedRecords[r][i.parent.eventFields.recurrenceRule]);if(!o){var l=a[r].parent,c=n.changedRecords.filter((function(e){return e[t.id]===l[t.id]})),p=e.deletedRecords[r][t.startTime];if(c.length>0){var d=c[0];d[t.recurrenceException]=i.excludeDateCheck(p,d[t.recurrenceException])}else l[t.recurrenceException]=i.excludeDateCheck(p,l[t.recurrenceException]);0===c.length&&n.changedRecords.push(i.parent.eventBase.processTimezone(l,!0)),o=e.deletedRecords[r][t.id]!==l[t.id]}o&&n.deletedRecords.push(e.deletedRecords[r])},s=0,o=e.deletedRecords.length;s<o;s++)r(s);var l=i.parent.dataModule.dataManager.saveChanges(n,t.id,i.getTable(),i.getQuery()),c={requestType:"eventRemoved",cancel:!1,data:e.data,promise:l,editParms:n};i.refreshData(c)}}))},e.prototype.serializeData=function(e){if(sf.base.isBlazor())for(var t=this.parent.eventFields,i=0,a=e;i<a.length;i++){var n=a[i];n[t.startTime]=this.parent.getDateTime(n[t.startTime]),n[t.endTime]=this.parent.getDateTime(n[t.endTime])}},e.prototype.getParentEvent=function(e,t){void 0===t&&(t=!1);var i=this.parent.eventBase.getParentEvent(e,t)||e;return(i[this.parent.eventFields.startTimezone]||i[this.parent.eventFields.endTimezone])&&this.parent.eventBase.timezoneConvert(i),i},e.prototype.excludeDateCheck=function(e,t){var i=_e(e);return sf.base.isNullOrUndefined(t)?t=i:-1===t.indexOf(i)&&(t=sf.base.isNullOrUndefined(t)?i:t+","+i),t},e.prototype.processRecurrenceRule=function(e,t){var i,a=this.parent.eventFields,n=e[a.recurrenceRule];if(t instanceof Date)i=new Date(+t);else{i=new Date(+t[a.startTime]);var r=t[a.recurrenceRule],s=e[a.startTime],o=Z(s,r,"DeleteFollowingEvents"===this.parent.currentAction?t[a.recurrenceException]:null,this.parent.activeViewOptions.firstDayOfWeek),l=new Date(o.slice(-1)[0]);l.setHours(i.getHours(),i.getMinutes(),i.getSeconds()),i.setHours(s.getHours(),s.getMinutes(),s.getSeconds()),t[a.recurrenceRule]=this.getUpdatedRecurrenceRule(r,new Date(+l),!1)}e[a.recurrenceRule]=this.getUpdatedRecurrenceRule(n,y(new Date(i.getTime()),-1),!0)},e.prototype.getUpdatedRecurrenceRule=function(e,t,i){for(var a="",n=0,r=e.split(";");n<r.length;n++){var s=r[n];if(""!==s){var o=s.split("=")[0],l=s.split("=")[1];"COUNT"!==o&&"UNTIL"!==o||(l=_e(t),s=s.replace(s,"UNTIL="+l)),a+=s+";"}}return i&&-1===a.indexOf("UNTIL")&&(a+="UNTIL="+_e(t)),a},e.prototype.isBlockEvent=function(e){var t=this,i=!1;return(e instanceof Array?e:[e]).forEach((function(e){i=e[t.parent.eventFields.isBlock]||!1})),i},e}(),Qt=function(){function e(e){this.parent=e}return e.prototype.cellMouseDown=function(e){this.isPreventAction(e)||this.parent.notify("cell-mouse-down",{event:e})},e.prototype.cellClick=function(e){var t=this;if(!this.isPreventAction(e)){var i=sf.base.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(!sf.base.isNullOrUndefined(i))if(sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-new-event"))){var a=sf.base.closest(e.target,".e-navigate"),n=this.parent.getNavigateView(),r=this.parent.currentView===n;if(sf.base.isNullOrUndefined(a)||r||sf.base.isNullOrUndefined(this.parent.viewOptions[n.charAt(0).toLowerCase()+n.slice(1)])){if(this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.currentView)return void this.parent.quickPopup.quickPopupHide();if(this.parent.isAdaptive&&(e.target.classList.contains("e-more-indicator")||sf.base.closest(e.target,".e-more-indicator")))return;var s=i.classList.contains("e-work-cells")||i.classList.contains("e-all-day-cells");if(s&&e.shiftKey&&1===e.which&&this.parent.keyboardInteractionModule)return void this.parent.keyboardInteractionModule.onMouseSelection(e);this.parent.activeCellsData=this.parent.getCellDetails(i);var o=sf.base.extend(this.parent.activeCellsData,{cancel:!1,event:e,name:"cellClick"});this.parent.trigger("cellClick",o,(function(a){(a=t.serializingData(a,e)).cancel?t.parent.quickPopup&&t.parent.quickPopup.quickPopupHide():(s&&t.parent.selectCell(i),t.parent.notify("cellClick",a))}))}else{var l=this.parent.getDateFromElement(i);sf.base.isNullOrUndefined(l)||this.parent.isAdaptive||!this.parent.isMinMaxDate(l)||(this.parent.setScheduleProperties({selectedDate:l}),this.parent.changeView(this.parent.getNavigateView(),e))}}else this.parent.eventWindow.openEditor(this.parent.activeCellsData,"Add")}},e.prototype.cellDblClick=function(e){var t=this;if(!this.parent.activeViewOptions.readonly&&!this.isPreventAction(e)){var i=sf.base.extend(this.parent.activeCellsData,{cancel:!1,event:e,name:"cellDoubleClick"});this.parent.trigger("cellDoubleClick",i,(function(i){i=t.serializingData(i,e);var a=new Date(i.startTime.getTime());t.parent.isMinMaxDate(new Date(a.setHours(0,0,0,0)))&&(i.cancel||t.parent.eventWindow.openEditor(t.parent.activeCellsData,"Add"))}))}},e.prototype.serializingData=function(e,t){return sf.base.isBlazor()&&(e.startTime=this.parent.getDateTime(e.startTime),e.endTime=this.parent.getDateTime(e.endTime),e.element&&(e.element=sf.base.getElement(e.element)),e.event&&(e.event=t)),e},e.prototype.onHover=function(e){var t=sf.base.closest(e.target,".e-work-cells,.e-time-slots,.e-all-day-cells,.e-header-cells,.e-resource-cells,.e-appointment,.e-week-number,.e-month-header");if(t){var i={element:t,event:e};this.parent.trigger("hover",i)}},e.prototype.isPreventAction=function(e){if(sf.base.closest(e.target,".e-navigate"))return!1;if(sf.base.closest(e.target,".e-appointment-wrapper")&&!sf.base.closest(e.target,".e-more-indicator"))return!0;var t=sf.base.closest(e.target,".e-appointment,.e-resource-group-cells");return!sf.base.isNullOrUndefined(t)||(t=sf.base.closest(e.target,".e-header-cells"),!(!this.parent.activeView.isTimelineView()||sf.base.isNullOrUndefined(t)))},e}(),Xt=(Je=function(e,t){return(Je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Je(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Kt=function(e,t,i,a){var r,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},Zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xt(t,e),Kt([sf.base.Property()],t.prototype,"name",void 0),Kt([sf.base.Property()],t.prototype,"default",void 0),Kt([sf.base.Property()],t.prototype,"title",void 0),Kt([sf.base.Property({})],t.prototype,"validation",void 0),t}(sf.base.ChildProperty),Jt=($e=function(e,t){return($e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}$e(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),$t=function(e,t,i,a){var r,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},ei=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Jt(t,e),$t([sf.base.Property("Id")],t.prototype,"id",void 0),$t([sf.base.Property("IsBlock")],t.prototype,"isBlock",void 0),$t([sf.base.Complex({name:"Subject",default:"Add title"},Zt)],t.prototype,"subject",void 0),$t([sf.base.Complex({name:"StartTime"},Zt)],t.prototype,"startTime",void 0),$t([sf.base.Complex({name:"EndTime"},Zt)],t.prototype,"endTime",void 0),$t([sf.base.Complex({name:"StartTimezone"},Zt)],t.prototype,"startTimezone",void 0),$t([sf.base.Complex({name:"EndTimezone"},Zt)],t.prototype,"endTimezone",void 0),$t([sf.base.Complex({name:"Location"},Zt)],t.prototype,"location",void 0),$t([sf.base.Complex({name:"Description"},Zt)],t.prototype,"description",void 0),$t([sf.base.Complex({name:"IsAllDay"},Zt)],t.prototype,"isAllDay",void 0),$t([sf.base.Complex({name:"RecurrenceID"},Zt)],t.prototype,"recurrenceID",void 0),$t([sf.base.Complex({name:"RecurrenceRule"},Zt)],t.prototype,"recurrenceRule",void 0),$t([sf.base.Complex({name:"RecurrenceException"},Zt)],t.prototype,"recurrenceException",void 0),$t([sf.base.Property("IsReadonly")],t.prototype,"isReadonly",void 0),$t([sf.base.Property("FollowingID")],t.prototype,"followingID",void 0),t}(sf.base.ChildProperty),ti=(et=function(e,t){return(et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}et(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ii=function(e,t,i,a){var r,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},ai=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ti(t,e),ii([sf.base.Property()],t.prototype,"template",void 0),ii([sf.base.Property([])],t.prototype,"dataSource",void 0),ii([sf.base.Property()],t.prototype,"query",void 0),ii([sf.base.Complex({},ei)],t.prototype,"fields",void 0),ii([sf.base.Property(!1)],t.prototype,"enableTooltip",void 0),ii([sf.base.Property()],t.prototype,"tooltipTemplate",void 0),ii([sf.base.Property()],t.prototype,"resourceColorField",void 0),ii([sf.base.Property(!1)],t.prototype,"editFollowingEvents",void 0),ii([sf.base.Property(!0)],t.prototype,"allowAdding",void 0),ii([sf.base.Property(!0)],t.prototype,"allowEditing",void 0),ii([sf.base.Property(!0)],t.prototype,"allowDeleting",void 0),ii([sf.base.Property(!1)],t.prototype,"enableMaxHeight",void 0),ii([sf.base.Property(!1)],t.prototype,"enableIndicator",void 0),ii([sf.base.Property(!1)],t.prototype,"ignoreWhitespace",void 0),t}(sf.base.ChildProperty),ni=(tt=function(e,t){return(tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}tt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ri=function(e,t,i,a){var r,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},si=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ni(t,e),ri([sf.base.Property(!1)],t.prototype,"byDate",void 0),ri([sf.base.Property(!0)],t.prototype,"byGroupID",void 0),ri([sf.base.Property(!1)],t.prototype,"allowGroupEdit",void 0),ri([sf.base.Property([])],t.prototype,"resources",void 0),ri([sf.base.Property(!0)],t.prototype,"enableCompactView",void 0),ri([sf.base.Property()],t.prototype,"headerTooltipTemplate",void 0),t}(sf.base.ChildProperty),oi=(it=function(e,t){return(it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}it(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),li=function(e,t,i,a){var r,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},ci=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oi(t,e),li([sf.base.Property()],t.prototype,"field",void 0),li([sf.base.Property()],t.prototype,"title",void 0),li([sf.base.Property()],t.prototype,"name",void 0),li([sf.base.Property(!1)],t.prototype,"allowMultiple",void 0),li([sf.base.Property([])],t.prototype,"dataSource",void 0),li([sf.base.Property()],t.prototype,"query",void 0),li([sf.base.Property("Id")],t.prototype,"idField",void 0),li([sf.base.Property("Text")],t.prototype,"textField",void 0),li([sf.base.Property("Expanded")],t.prototype,"expandedField",void 0),li([sf.base.Property("GroupID")],t.prototype,"groupIDField",void 0),li([sf.base.Property("Color")],t.prototype,"colorField",void 0),li([sf.base.Property("StartHour")],t.prototype,"startHourField",void 0),li([sf.base.Property("EndHour")],t.prototype,"endHourField",void 0),li([sf.base.Property("WorkDays")],t.prototype,"workDaysField",void 0),li([sf.base.Property("CssClass")],t.prototype,"cssClassField",void 0),t}(sf.base.ChildProperty),pi=function(){function e(e){this.resourceCollection=[],this.leftPixel=25,this.parent=e}return e.prototype.renderResourceHeaderIndent=function(e){var t=sf.base.createElement("td",{className:"e-resource-left-td"}),a=sf.base.createElement("div",{className:"e-resource-text"});t.appendChild(a);var n={elementType:"emptyCells",element:t};this.parent.trigger(i,n),e.appendChild(t)},e.prototype.hideResourceRows=function(e){if(!(this.resourceCollection.length<=1||this.parent.virtualScrollModule))for(var t=this.lastResourceLevel.length,i=0;i<t;i++){var a=this.lastResourceLevel[i].resourceData,n=this.lastResourceLevel[i].resource;if("e-parent-node"===a.ClassName&&!a[n.expandedField]&&!sf.base.isNullOrUndefined(a[n.expandedField])){var r=[].slice.call(e.children).slice(i+1,i+(parseInt(a.Count,0)+1));sf.base.addClass(r,"e-hidden")}}},e.prototype.createResourceColumn=function(){var e=this.resourceCollection,t=sf.base.createElement("div",{className:"e-resource-column-wrap"}),i=this.parent.activeView.createTableLayout("e-resource-column-table");!this.parent.uiStateValues.isGroupAdaptive&&this.parent.rowAutoHeight&&this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&sf.base.addClass([i],"e-auto-height");var a=i.querySelector("tbody"),n=this.generateTreeData(!0);if(this.countCalculation(e.slice(0,-2),e.slice(0,-1)),this.renderedResources=this.lastResourceLevel,this.parent.virtualScrollModule){var r=this.parent.virtualScrollModule.getRenderedCount();this.setExpandedResources(),n=this.expandedResources.slice(0,r),this.renderedResources=n}return sf.base.append(this.getContentRows(n),a),this.hideResourceRows(a),i.appendChild(a),t.appendChild(i),t},e.prototype.setRenderedResources=function(){var e=this.resourceCollection;this.generateTreeData(!0),this.countCalculation(e.slice(0,-2),e.slice(0,-1)),this.renderedResources=this.lastResourceLevel},e.prototype.setExpandedResources=function(){for(var e=[],t=0;t<this.lastResourceLevel.length;t++){var i=this.lastResourceLevel[t].resourceData,a=i.Count;e.push(this.lastResourceLevel[t]);var n=i[this.lastResourceLevel[t].resource.expandedField];!sf.base.isNullOrUndefined(n)&&!n&&a>0&&(t+=a)}this.expandedResources=e},e.prototype.getContentRows=function(e){for(var t,a,n=[],r=this.resourceCollection,s=sf.base.createElement("tr"),o=sf.base.createElement("td"),l=0;l<e.length;l++){var c=o.cloneNode();if((a=x(r,"name",e[l].resource.name))===r.length-1?(sf.base.extend(e[l].resourceData,{ClassName:"e-child-node"}),this.renderedResources[l].className=["e-child-node"]):(sf.base.extend(e[l].resourceData,{ClassName:"e-parent-node"}),this.renderedResources[l].className=["e-parent-node"]),t=a*this.leftPixel+"px","e-parent-node"===e[l].resourceData.ClassName&&!sf.base.isNullOrUndefined(e[l].resourceData.Count)&&e[l].resourceData.Count>0){var p=void 0;p=e[l].resourceData[r[a].expandedField]||sf.base.isNullOrUndefined(e[l].resourceData[r[a].expandedField])?"e-resource-collapse":"e-resource-expand";var d=sf.base.createElement("div");sf.base.addClass([d],["e-resource-tree-icon",p]),this.setMargin(d,t),c.appendChild(d),this.resourceCollection.length>1&&sf.base.EventHandler.add(d,"click",this.onTreeIconClick,this)}this.parent.activeView.setResourceHeaderContent(c,e[l],"e-resource-text"),c.setAttribute("data-group-index",e[l].groupIndex.toString()),this.parent.activeViewOptions.resourceHeaderTemplate||this.setMargin(c.querySelector(".e-resource-text"),t);var h=["e-resource-cells",e[l].resourceData.ClassName];sf.base.addClass([c],h);var u={elementType:"resourceHeader",element:c,groupIndex:e[l].groupIndex};this.parent.trigger(i,u);var f=s.cloneNode();f.appendChild(c),n.push(f)}return n},e.prototype.setMargin=function(e,t){this.parent.enableRtl?e.style.marginRight=t:e.style.marginLeft=t},e.prototype.countCalculation=function(e,t){for(var i,a=0;a<e.length;a++){for(var n=e[e.length-(a+1)].dataSource,r=0;r<n.length;r++){var s=0;i=this.parent.activeViewOptions.group.byGroupID?new sf.data.DataManager(t[t.length-1].dataSource).executeLocal((new sf.data.Query).where(t[t.length-1].groupIDField,"equal",n[r][e[e.length-(a+1)].idField])):t[t.length-1].dataSource;for(var o=0;o<i.length;o++)s+=parseInt(i[o].Count,0);s+=parseInt(n[r].Count,0),sf.base.extend(n[r],{Count:s})}t=t.slice(0,-1)}},e.prototype.onTreeIconClick=function(e){var i=this;this.parent.eventTooltip&&this.parent.eventTooltip.close();var n,r=e.target,o=sf.base.closest(r,".e-parent-node").parentElement,l=parseInt(o.children[0].getAttribute("data-group-index"),10),c={cancel:!1,event:e,groupIndex:l,requestType:r.classList.contains("e-resource-collapse")?"resourceCollapse":"resourceExpand"};this.parent.trigger(t,c,(function(t){if(!t.cancel){r.classList.contains("e-resource-collapse")?(sf.base.classList(r,["e-resource-expand"],["e-resource-collapse"]),n=!0):(sf.base.classList(r,["e-resource-collapse"],["e-resource-expand"]),n=!1),[].slice.call(i.parent.element.querySelectorAll(".e-appointment")).forEach((function(e){return sf.base.remove(e)})),i.parent.virtualScrollModule?i.updateVirtualContent(l,n):i.updateContent(l,n);var o={cssProperties:i.parent.getCssProperties(),module:"scroll"};i.parent.notify(s,o),c={cancel:!1,event:e,groupIndex:l,requestType:r.classList.contains("e-resource-collapse")?"resourceExpanded":"resourceCollapsed"},i.parent.notify(a,{}),i.parent.trigger("actionComplete",c)}}))},e.prototype.updateContent=function(e,t){for(var i,a=[],n=[],r=[],s=this.lastResourceLevel[e].resourceData,o=[].slice.call(this.parent.element.querySelectorAll(".e-resource-column-wrap tr")),l=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap tbody tr")),c=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap .e-appointment-container")),p=0;p<s.Count;p++)a.push(o[e+p+1]),n.push(l[e+p+1]),r.push(c[e+p+1]);for(var d=this.lastResourceLevel,h=0;h<a.length;h++){var u=!0;if(i=a[h].children[0].classList.contains("e-parent-node"),d[e].resourceData[d[e].resource.expandedField]=!t,t){if(i)(f=a[h].querySelector(".e-resource-tree-icon"))&&sf.base.classList(f,["e-resource-expand"],["e-resource-collapse"]);a[h].classList.contains("e-hidden")||sf.base.addClass([a[h],n[h],r[h]],"e-hidden")}else{if(i){var f,m=a[h].rowIndex;if(d[m].resourceData[d[m].resource.expandedField]||sf.base.isNullOrUndefined(d[m].resourceData[d[m].resource.expandedField])||(a.splice(h+1,parseInt(d[m].resourceData.Count,0)),n.splice(h+1,parseInt(d[m].resourceData.Count,0)),r.splice(h+1,parseInt(d[m].resourceData.Count,0)),u=!1),u)(f=a[h].querySelector(".e-resource-tree-icon"))&&sf.base.classList(f,["e-resource-collapse"],["e-resource-expand"])}a[h].classList.contains("e-hidden")&&sf.base.removeClass([a[h],n[h],r[h]],"e-hidden")}}},e.prototype.updateVirtualContent=function(e,t){this.lastResourceLevel[e].resourceData[this.lastResourceLevel[e].resource.expandedField]=!t,this.setExpandedResources();var i=this.parent.virtualScrollModule.getRenderedCount(),a=this.expandedResources.indexOf(this.renderedResources[0]);if(this.renderedResources=this.expandedResources.slice(a,a+i),this.renderedResources.length<i){var n=this.expandedResources.length-i;n=n>0?n:0,this.renderedResources=this.expandedResources.slice(n,this.expandedResources.length)}var r=this.parent.element.querySelector(".e-virtual-track");this.parent.virtualScrollModule.updateVirtualTrackHeight(r);var s=this.parent.element.querySelector(".e-resource-column-wrap table"),o=this.parent.element.querySelector(".e-content-wrap table"),l=this.parent.element.querySelector(".e-event-table");this.parent.virtualScrollModule.updateContent(s,o,l,this.renderedResources);var c=this.parent.element.querySelector(".e-current-timeline");sf.base.isNullOrUndefined(c)||(c.style.height=this.parent.element.querySelector(".e-content-table").offsetHeight+"px")},e.prototype.renderResourceHeader=function(){var e=sf.base.createElement("div",{className:L});if(e.innerHTML='<div class="e-schedule-resource-toolbar"><div class="e-resource-menu"><div class="e-icons e-icon-menu"></div></div><div class="e-resource-level-title"></div></div>',"MonthAgenda"===this.parent.currentView){var t=this.parent.activeView.getPanel().querySelector(".e-content-wrap");t.insertBefore(e,t.querySelector(".e-wrapper-container"))}else this.parent.element.insertBefore(e,this.parent.element.querySelector(".e-table-container"));this.renderResourceHeaderText(),sf.base.EventHandler.add(e.querySelector(".e-icon-menu"),"click",this.menuClick,this)},e.prototype.renderResourceTree=function(){this.popupOverlay=sf.base.createElement("div",{className:"e-resource-tree-popup-overlay"});var e=sf.base.createElement("div",{className:"e-resource-tree-popup e-popup-close"});if("MonthAgenda"===this.parent.currentView){var t=this.parent.activeView.getPanel().querySelector(".e-wrapper-container");t.insertBefore(e,t.children[0]),t.appendChild(this.popupOverlay)}else this.parent.element.querySelector(".e-table-container").appendChild(e),this.parent.element.querySelector(".e-table-container").appendChild(this.popupOverlay);var i=sf.base.createElement("div",{className:"e-resource-tree"});e.appendChild(i),this.treeViewObj=new sf.navigations.TreeView({cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,fields:{dataSource:[].slice.call(this.generateTreeData()),id:"resourceId",text:"resourceName",child:"resourceChild"},nodeTemplate:this.parent.resourceHeaderTemplate,nodeClicked:this.resourceClick.bind(this)}),this.treeViewObj.appendTo(i),this.treeViewObj.expandAll(),this.treePopup=new sf.popups.Popup(e,{targetType:"relative",actionOnScroll:"none",content:this.treeViewObj.element,enableRtl:this.parent.enableRtl,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.parent.element.querySelector("."+("MonthAgenda"===this.parent.currentView?"e-wrapper-container":"e-table-container"))}),this.parent.on("document-click",this.documentClick,this)},e.prototype.generateTreeData=function(e){var t=this,i=[],a=[],n=0;return this.resourceTreeLevel.forEach((function(r,s){var o=function i(r,s,o){var l,c,p=t.resourceCollection[s];e?(c={type:"resourceHeader",resource:r.resource,resourceData:r.resourceData,groupIndex:n,groupOrder:r.groupOrder},a.push(c),n++):l={resourceId:o,resourceName:r.resourceData[p.textField],resource:r.resource,resourceData:r.resourceData},r.child.length>0&&!e&&(l.resourceChild=[]);for(var d=1,h=0,u=r.child;h<u.length;h++){var f=u[h];e?i(f,s+1,o+"-"+d):l.resourceChild.push(i(f,s+1,o+"-"+d)),d+=1}return e&&sf.base.extend(c.resourceData,{Count:d-1}),l};e?o(r,0,(s+1).toString()):i.push(o(r,0,(s+1).toString()))})),e?(this.lastResourceLevel=a,a):i},e.prototype.renderResourceHeaderText=function(){var e=this,t=this.lastResourceLevel[this.parent.uiStateValues.groupIndex],i=[];t.groupOrder.forEach((function(t,a){var n=e.resourceCollection[a],r=n.dataSource.filter((function(e){return e[n.idField]===t})),s=sf.base.createElement("div",{className:"e-resource-name",innerHTML:r[0][n.textField]});i.push(s);var o=sf.base.createElement("div",{className:"e-icons e-icon-next"});i.push(o)})),i.pop();var a=("MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element).querySelector(".e-resource-level-title");A(a),i.forEach((function(e){return a.appendChild(e)})),1===this.lastResourceLevel.length&&sf.base.addClass([this.parent.element.querySelector(".e-resource-menu")],"e-disable")},e.prototype.menuClick=function(e){if(this.parent.element.querySelector(".e-resource-tree-popup").classList.contains(I))this.treePopup.hide(),sf.base.removeClass([this.popupOverlay],"e-enable");else{var t=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)"));sf.base.removeClass(t,"e-active"),sf.base.addClass([t[this.parent.uiStateValues.groupIndex]],"e-active"),this.treePopup.show(),sf.base.addClass([this.popupOverlay],"e-enable")}},e.prototype.resourceClick=function(e){var t=this;if(!e.node.classList.contains("e-has-child")){this.treePopup.hide(),sf.base.removeClass([this.popupOverlay],"e-enable");var i=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)"));if(this.parent.uiStateValues.groupIndex=i.indexOf(e.node),this.parent.isServerRenderer())this.parent.interopAdaptor.invokeMethodAsync("OnResourceClick",this.parent.uiStateValues.groupIndex).then((function(){if(!t.parent.isDestroyed){t.renderResourceHeaderText(),t.parent.activeView.serverRenderLayout();var e=t.parent.eventBase.processData(t.parent.eventsData);t.parent.notify(a,{processedData:e})}})).catch((function(e){return t.dataManagerFailure(e)}));else{this.parent.renderModule.render(this.parent.currentView,!1);var n=this.parent.eventBase.processData(this.parent.blockData.concat(this.parent.eventsData));this.parent.notify(a,{processedData:n})}}e.event.preventDefault()},e.prototype.documentClick=function(e){if(!sf.base.closest(e.event.target,".e-resource-tree-popup")){var t=this.parent.element.querySelector(".e-resource-tree-popup");t&&t.classList.contains(I)&&(this.treePopup.hide(),sf.base.removeClass([this.popupOverlay],"e-enable"))}},e.prototype.bindResourcesData=function(e){var t=this;if(this.parent.showSpinner(),sf.base.isBlazor())!this.parent.isServerRenderer()&&this.parent.tempResourceCollection&&(this.parent.resourceCollection=this.parent.tempResourceCollection||[],this.refreshLayout(!1));else{for(var i=[],a=0;a<this.parent.resources.length;a++){var n=new z(this.parent.resources[a].dataSource,this.parent.resources[a].query);i.push(n.getData(n.generateQuery()))}Promise.all(i).then((function(i){return t.dataManagerSuccess(i,e)})).catch((function(e){return t.dataManagerFailure(e)}))}},e.prototype.dataManagerSuccess=function(e,t){if(!this.parent.isDestroyed){this.parent.resourceCollection=[];for(var i=0,a=e.length;i<a;i++){var n=this.parent.resources[i],r=this.getResourceModel(n,e[i].result);this.parent.resourceCollection.push(r)}this.refreshLayout(t)}},e.prototype.getResourceModel=function(e,t){return{field:e.field,title:e.title,name:e.name,allowMultiple:e.allowMultiple,dataSource:t||e.dataSource,idField:e.idField,textField:e.textField,groupIDField:e.groupIDField,colorField:e.colorField,startHourField:e.startHourField,endHourField:e.endHourField,workDaysField:e.workDaysField,expandedField:e.expandedField,cssClassField:e.cssClassField}},e.prototype.refreshLayout=function(e){this.parent.uiStateValues.groupIndex=0,this.parent.renderElements(e)},e.prototype.setResourceCollection=function(){var e=[];if(this.resourceCollection=[],this.colorIndex=null,this.parent.activeViewOptions.group.resources.length>0)for(var t=0,i=this.parent.activeViewOptions.group.resources;t<i.length;t++){var a=i[t],n=x(this.parent.resourceCollection,"name",a);n>=0&&e.push(this.parent.resourceCollection[n])}else this.parent.resourceCollection.length>0&&(e=this.parent.resourceCollection);for(var r=0,s=0,o=e;s<o.length;s++){a=o[s];var l=this.getResourceModel(a);a.name===this.parent.eventSettings.resourceColorField&&(this.colorIndex=r),r++,this.resourceCollection.push(l)}sf.base.isNullOrUndefined(this.colorIndex)&&(this.colorIndex=this.resourceCollection.length-1)},e.prototype.generateResourceLevels=function(e,t){var i=this,a=this.resourceCollection,n=[],r=[];return this.resourceTreeLevel=function t(a,s,o,l,c){var p=[],d=a[0];if(d){var h=void 0;if(l&&i.parent.activeViewOptions.group.byGroupID){var u=l[o.idField];h=d.dataSource.filter((function(e){return e[d.groupIDField]===u}))}else h=d.dataSource;for(var f=0;f<h.length;f++){var m=[];c&&c.length>0&&(m=m.concat(c)),m.push(h[f][d.idField]);var v=t(a.slice(1),s+1,d,h[f],m);if(!(0===s&&0===v.length&&i.resourceCollection.length>1)){var g=[],y=i.parent.activeView.renderDates,b=void 0;if(!i.parent.activeViewOptions.group.byDate&&s+1===i.resourceCollection.length){var T=h[f][d.workDaysField],w=h[f][d.startHourField],D=h[f][d.endHourField];T&&T.length>0?(y=i.parent.activeView.getRenderDates(T),b=T,g=i.parent.activeView.getDateSlots(y,T)):(b=i.parent.activeViewOptions.workDays,g=e);var C=i.generateCustomHours(g,w,D,m);r=r.concat(C)}var E=h[f][d.cssClassField],O={type:"resourceHeader",className:["e-resource-cells"],resourceLevelIndex:s,groupOrder:m,resource:d,resourceData:h[f],colSpan:i.parent.activeViewOptions.group.byDate?1:g.length,renderDates:y,workDays:b,cssClass:E,child:v};p.push(O)}}return n[s]||(n[s]=[]),n[s].push(p),p}return[]}(a,0),t?[]:this.generateHeaderLevels(n,r,e)},e.prototype.generateCustomHours=function(e,t,i,a){for(var n=sf.base.extend([],e,null,!0),r=0,s=n;r<s.length;r++){var o=s[r];t&&(o.startHour=this.parent.getStartEndTime(t)),i&&(o.endHour=this.parent.getStartEndTime(i)),a&&(o.groupOrder=a)}return n},e.prototype.generateHeaderLevels=function(e,t,i){for(var a=[],n=e.length-1;n>=0;n--)for(var r=0,s=0,o=e[n];s<o.length;s++)for(var l=0,c=o[s];l<c.length;l++){var p=c[l];if(e[n+1]){for(var d=0,h=0,u=e[n+1][r];h<u.length;h++){var f=u[h];(!this.parent.activeViewOptions.group.byGroupID||this.parent.activeViewOptions.group.byGroupID&&f.resourceData[f.resource.groupIDField]===p.resourceData[p.resource.idField])&&(d+=f.colSpan)}p.colSpan=d}p.groupIndex=r,r++,a[p.resourceLevelIndex]=a[p.resourceLevelIndex]||[],a[p.resourceLevelIndex].push(p)}if(this.lastResourceLevel=a.slice(-1)[0]||[],!this.parent.activeViewOptions.group.byDate){for(var m=0,v=0,g=this.lastResourceLevel;v<g.length;v++){var y=g[v];for(n=0;n<y.colSpan;n++)t[m].groupIndex=y.groupIndex,m++}return a.push(t),a}for(var b=[],T=sf.base.extend([],a,null,!0),w=0,D=0,C=T[0];D<C.length;D++){w+=C[D].colSpan}for(var E=[],O=0,S=i;O<S.length;O++){var x=S[O];x.colSpan=w,E.push(x);for(var k=sf.base.extend([],T,null,!0),A=0,V=k.length;A<V;A++){if(A===k.length-1)for(var M=0,R=k[A];M<R.length;M++){var P=R[M];P.date=x.date,P.workDays=x.workDays,P.startHour=this.parent.getStartEndTime(P.resourceData[P.resource.startHourField])||x.startHour,P.endHour=this.parent.getStartEndTime(P.resourceData[P.resource.endHourField])||x.endHour}b[A]||(b[A]=[]),b[A]=b[A].concat(k[A])}}return b.unshift(E),b},e.prototype.setResourceValues=function(e,t){var i=this,a=function(t,a,n){i.resourceCollection[t].allowMultiple&&i.parent.activeViewOptions.group.allowGroupEdit?e[a]=[n]:e[a]=n};if(void 0===t&&(t=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:this.parent.activeCellsData.groupIndex),this.parent.activeViewOptions.group.resources.length>0&&!sf.base.isNullOrUndefined(t))for(var n=this.lastResourceLevel[t].groupOrder,r=0;r<this.resourceCollection.length;r++)a(r,this.resourceCollection[r].field,n[r]);else if(this.parent.resourceCollection.length>0)for(r=0;r<this.resourceCollection.length;r++){var s=this.resourceCollection[r].dataSource[0];s&&a(r,this.resourceCollection[r].field,s[this.resourceCollection[r].idField])}},e.prototype.getResourceColor=function(e,t){var i=!sf.base.isNullOrUndefined(t)&&this.colorIndex>t.length-1?t.length-1:this.colorIndex,a=this.resourceCollection[i];if(!(sf.base.isNullOrUndefined(t)&&this.parent.activeViewOptions.group.allowGroupEdit&&a.allowMultiple)){var n=sf.base.isNullOrUndefined(t)?e[a.field]:t[i],r=this.filterData(a.dataSource,a.idField,n);return r.length>0?r[0][a.colorField]:void 0}},e.prototype.getCssClass=function(e){var t=this.resourceCollection.slice(-1)[0];if(!this.parent.activeViewOptions.group.allowGroupEdit||!t.allowMultiple){var i=this.filterData(t.dataSource,t.idField,e[t.field]);return i.length>0?i[0][t.cssClassField]:void 0}},e.prototype.getResourceRenderDates=function(){var e=[].concat.apply([],this.lastResourceLevel.map((function(e){return e.renderDates}))),t=e.filter((function(e,t,i){return i.map((function(e){return e.getTime()})).indexOf(e.getTime())===t}));return t.sort((function(e,t){return e.getDay()-t.getDay()})),t},e.prototype.filterData=function(e,t,i){return e.filter((function(e){return e[t]===i}))},e.prototype.dataManagerFailure=function(e){var t=this;this.parent.isDestroyed||this.parent.trigger("actionFailure",{error:e},(function(){return t.parent.hideSpinner()}))},e.prototype.getResourceData=function(e,t,i){if(this.parent.activeViewOptions.group.allowGroupEdit){for(var a={},n=0,r=i;n<r.length;n++)for(var s=r[n],o=this.lastResourceLevel[s].groupOrder,l=0,c=o.length;l<c;l++){var p=this.resourceCollection[l].field;sf.base.isNullOrUndefined(a[p])&&(a[p]=[]),a[p].push(o[l])}e=sf.base.extend(e,a)}else{l=0;for(var d=this.resourceCollection.length;l<d;l++)e[this.resourceCollection[l].field]=this.lastResourceLevel[t].groupOrder[l]}},e.prototype.addResource=function(e,t,i){for(var a=e instanceof Array?e:[e],n=function(e){if(e.name===t)return a.forEach((function(t,a){return new sf.data.DataManager({json:e.dataSource}).insert(t,null,null,i+a)})),"break"},r=0,s=this.parent.resourceCollection;r<s.length;r++){if("break"===n(s[r]))break}this.refreshLayout(!0)},e.prototype.removeResource=function(e,t){for(var i=e instanceof Array?e:[e],a=function(e){if(e.name===t)return i.forEach((function(t){return new sf.data.DataManager({json:e.dataSource}).remove(e.idField,t)})),"break"},n=0,r=this.parent.resourceCollection;n<r.length;n++){if("break"===a(r[n]))break}this.refreshLayout(!0)},e.prototype.getIndexFromResourceId=function(e,t,i){var a=i.dataSource.filter((function(t){return t[i.idField]===e}))[0];return this.lastResourceLevel.map((function(e){return e.resourceData})).indexOf(a)},e.prototype.resourceExpand=function(e,t,i){var a=this.parent.resourceCollection.filter((function(e){return e.name===t?e:null}))[0],n=0,r=a.dataSource.filter((function(t){return t[a.idField]===e}))[0];n=this.parent.activeViewOptions.group.byGroupID?this.lastResourceLevel.map((function(e){return e.resourceData})).indexOf(r):this.getIndexFromResourceId(e,t,a);var s=this.parent.element.querySelector('.e-resource-column-wrap [data-group-index="'+n+'"] .e-resource-tree-icon');s&&(s.classList.contains("e-resource-expand")&&!i||s.classList.contains("e-resource-collapse")&&i)&&s.click()},e.prototype.resourceScroll=function(e,t){if(!(this.parent.isAdaptive||["Agenda","MonthAgenda"].indexOf(this.parent.currentView)>-1)){var i=t||this.parent.resourceCollection.slice(-1)[0].name,a=this.parent.resourceCollection.length-1,n=this.parent.resourceCollection.filter((function(e,t){return e.name===i?(a=t,e):null}))[0],r=this.parent.element.querySelector(".e-content-wrap"),s=0;if(this.parent.activeView.isTimelineView()){if(this.parent.activeViewOptions.group.byGroupID){var o=n.dataSource.filter((function(t){return t[n.idField]===e}))[0];s=this.lastResourceLevel.map((function(e){return e.resourceData})).indexOf(o)}else s=this.getIndexFromResourceId(e,i,n);if(this.parent.virtualScrollModule){var l=this.parent.element.querySelector(".e-virtual-track"),c=Math.round(l.offsetHeight/this.expandedResources.length);if(this.parent.rowAutoHeight&&(r.scrollTop=0,this.parent.virtualScrollModule.virtualScrolling()),r.scrollTop=s*c-(this.parent.virtualScrollModule.bufferCount-1)*c,this.parent.virtualScrollModule.virtualScrolling(),this.parent.rowAutoHeight)(p=this.parent.element.querySelector('.e-work-cells[data-group-index="'+s+'"]'))&&!p.parentElement.classList.contains("e-hidden")&&(r.scrollTop=r.scrollTop<p.offsetTop?p.offsetTop:r.scrollTop+p.offsetTop);else r.scrollTop=s*c}else{var p;(p=this.parent.element.querySelector('.e-work-cells[data-group-index="'+s+'"]'))&&!p.parentElement.classList.contains("e-hidden")&&(r.scrollTop=p.offsetTop)}}else{s=this.parent.activeViewOptions.group.byGroupID?n.dataSource.map((function(e){return e[n.idField]})).indexOf(e):this.getIndexFromResourceId(e,i,n);var d=this.parent.element.querySelector(".e-header-row:nth-child("+(a+1)+")"),h=[].slice.call(d.children).map((function(e){return e.offsetLeft}));r.scrollLeft=h[s]}}},e.prototype.destroy=function(){this.parent.off("document-click",this.documentClick),this.treeViewObj&&(this.treeViewObj.destroy(),this.treeViewObj=null),this.treePopup&&(this.treePopup.destroy(),this.treePopup=null,sf.base.remove(this.parent.element.querySelector(".e-resource-tree-popup")),sf.base.remove(this.parent.element.querySelector(".e-resource-tree-popup-overlay")));var e=this.parent.element.querySelector("."+L);e&&sf.base.remove(e)},e}(),di=(at=function(e,t){return(at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}at(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),hi=function(e,t,i,a){var r,s=arguments.length,o=s<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},ui=function(e){function i(t,i){return e.call(this,t,i)||this}return di(i,e),i.prototype.render=function(){sf.base.isBlazor()&&this.interopAdaptor.invokeMethodAsync("SetAdaptive",this.isAdaptive);var e=[],t=[];e.push(H),this.enableRtl?e.push("e-rtl"):t.push("e-rtl"),this.isAdaptive?e.push("e-device"):t.push("e-device"),this.cssClass&&e.push(this.cssClass),sf.base.classList(this.element,e,t),this.validateDate(),this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate),this.editorTemplateFn=this.templateParser(this.editorTemplate),this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header),this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content),this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer),sf.popups.createSpinner({target:this.element}),this.scrollModule=new F(this),this.scrollModule.setWidth(),this.scrollModule.setHeight(),this.renderModule=new Ht(this),this.eventBase=new pt(this),this.workCellAction=new Qt(this),this.initializeDataModule(),this.on(a,this.resetEventTemplates,this),this.on("events-loaded",this.updateEventTemplates,this),this.renderTableContainer(),this.activeViewOptions=this.getActiveViewOptions(),this.initializeResources()},i.prototype.renderTableContainer=function(){this.element.querySelector(".e-table-container")||this.element.appendChild(this.createElement("div",{className:"e-table-container"}))},i.prototype.isServerRenderer=function(e){void 0===e&&(e=this.currentView);return!(!sf.base.isBlazor()||-1===["Day","Week","WorkWeek","Month","MonthAgenda","TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth"].indexOf(e)||this.virtualScrollModule)},i.prototype.renderCompleted=function(){this.renderComplete()},i.prototype.layoutReady=function(e,t,i){e&&e.length>0&&(t||i)&&(this.resourceCollection=e,this.resourceBase&&this.resourceBase.refreshLayout(i)),this.isServerRenderer()&&this.activeView&&(this.activeView.serverRenderLayout(),this.renderModule&&this.renderModule.refreshDataManager())},i.prototype.refreshLayout=function(e){this.uiStateValues.groupIndex=0,this.resourceCollection=e,this.renderElements(!0),this.layoutReady()},i.prototype.updateLayoutTemplates=function(){var e=this.views[this.viewIndex];if(!this.isServerRenderer(e.option)){if(this.cellHeaderTemplate&&sf.base.updateBlazorTemplate(this.element.id+"_cellHeaderTemplate","CellHeaderTemplate",this),""!==this.activeViewOptions.cellHeaderTemplateName){var t=this.element.id+"_"+this.activeViewOptions.cellHeaderTemplateName+"cellHeaderTemplate";sf.base.updateBlazorTemplate(t,"CellHeaderTemplate",e)}if(this.dateHeaderTemplate&&sf.base.updateBlazorTemplate(this.element.id+"_dateHeaderTemplate","DateHeaderTemplate",this),""!==this.activeViewOptions.dateHeaderTemplateName){var i="dateHeaderTemplate";t=this.element.id+"_"+this.activeViewOptions.dateHeaderTemplateName+i;sf.base.updateBlazorTemplate(t,"DateHeaderTemplate",e)}if(this.cellTemplate&&sf.base.updateBlazorTemplate(this.element.id+"_cellTemplate","CellTemplate",this),""!==this.activeViewOptions.cellTemplateName){t=this.element.id+"_"+this.activeViewOptions.cellTemplateName+"cellTemplate";sf.base.updateBlazorTemplate(t,"CellTemplate",e)}if(this.resourceHeaderTemplate&&sf.base.updateBlazorTemplate(this.element.id+"_resourceHeaderTemplate","ResourceHeaderTemplate",this),""!==this.activeViewOptions.resourceHeaderTemplateName){i="resourceHeaderTemplate",t=this.element.id+"_"+this.activeViewOptions.resourceHeaderTemplateName+i;sf.base.updateBlazorTemplate(t,"ResourceHeaderTemplate",e)}this.timeScale.minorSlotTemplate&&sf.base.updateBlazorTemplate(this.element.id+"_minorSlotTemplate","MinorSlotTemplate",this.timeScale),this.timeScale.majorSlotTemplate&&sf.base.updateBlazorTemplate(this.element.id+"_majorSlotTemplate","MajorSlotTemplate",this.timeScale)}},i.prototype.resetLayoutTemplates=function(){var e=this.viewCollections[this.activeView.viewIndex];if(!this.isServerRenderer(e.option)){if(this.cellHeaderTemplate&&sf.base.resetBlazorTemplate(this.element.id+"_cellHeaderTemplate","CellHeaderTemplate"),""!==e.cellHeaderTemplate&&sf.base.resetBlazorTemplate(this.element.id+"_"+e.cellHeaderTemplateName+"cellHeaderTemplate","CellHeaderTemplate"),this.dateHeaderTemplate&&sf.base.resetBlazorTemplate(this.element.id+"_dateHeaderTemplate","DateHeaderTemplate"),""!==e.dateHeaderTemplateName&&sf.base.resetBlazorTemplate(this.element.id+"_"+e.dateHeaderTemplateName+"dateHeaderTemplate","DateHeaderTemplate"),this.cellTemplate&&sf.base.resetBlazorTemplate(this.element.id+"_cellTemplate","CellTemplate"),""!==e.cellTemplateName&&sf.base.resetBlazorTemplate(this.element.id+"_"+e.cellTemplateName+"cellTemplate","CellTemplate"),this.resourceHeaderTemplate&&sf.base.resetBlazorTemplate(this.element.id+"_resourceHeaderTemplate","ResourceHeaderTemplate"),""!==e.resourceHeaderTemplateName){sf.base.resetBlazorTemplate(this.element.id+"_"+e.resourceHeaderTemplateName+"resourceHeaderTemplate","ResourceHeaderTemplate")}this.timeScale.minorSlotTemplate&&sf.base.resetBlazorTemplate(this.element.id+"_minorSlotTemplate","MinorSlotTemplate"),this.timeScale.majorSlotTemplate&&sf.base.resetBlazorTemplate(this.element.id+"_majorSlotTemplate","MajorSlotTemplate")}},i.prototype.updateEventTemplates=function(){var e=this.views[this.viewIndex];if(this.eventSettings.template&&sf.base.updateBlazorTemplate(this.element.id+"_eventTemplate","Template",this.eventSettings,!1),""!==this.activeViewOptions.eventTemplateName){var t=this.element.id+"_"+this.activeViewOptions.eventTemplateName+"eventTemplate";sf.base.updateBlazorTemplate(t,"EventTemplate",e,!1)}"Agenda"!==this.viewCollections[this.viewIndex].option&&"MonthAgenda"!==this.viewCollections[this.viewIndex].option||this.updateLayoutTemplates()},i.prototype.resetEventTemplates=function(){var e=this.viewCollections[this.activeView.viewIndex];if(this.eventSettings.template&&(sf.base.blazorTemplates[this.element.id+"_eventTemplate"]=[],sf.base.updateBlazorTemplate(this.element.id+"_eventTemplate","Template",this.eventSettings)),""!==e.eventTemplateName){var t=this.element.id+"_"+e.eventTemplateName+"eventTemplate";sf.base.blazorTemplates[t]=[],sf.base.updateBlazorTemplate(t,"EventTemplate",this.views[this.activeView.viewIndex])}"Agenda"!==e.option&&"MonthAgenda"!==e.option||this.resetLayoutTemplates()},i.prototype.initializeResources=function(e){void 0===e&&(e=!1),this.resources.length>0?(this.resourceBase=new pi(this),this.resourceBase.bindResourcesData(e)):(this.resourceBase=null,this.resourceCollection=[],this.renderElements(e))},i.prototype.renderElements=function(e){if(e)return this.initializeView(this.currentView),void this.eventWindow.refresh();this.destroyHeaderModule(),this.showHeaderBar&&(this.headerModule=new N(this)),this.renderTableContainer(),(sf.base.Browser.isDevice||sf.base.Browser.isTouch)&&(this.scheduleTouchModule=new U(this)),this.initializeView(this.currentView),this.destroyPopups(),this.initializePopups(),this.unwireEvents(),this.wireEvents()},i.prototype.validateDate=function(e){void 0===e&&(e=this.selectedDate);var t=e instanceof Date?new Date(e.getTime()):new Date(e);if(this.minDate=this.minDate instanceof Date?new Date(this.minDate.getTime()):new Date(this.minDate),this.maxDate=this.maxDate instanceof Date?new Date(this.maxDate.getTime()):new Date(this.maxDate),!(this.minDate<=this.maxDate))throw Error("minDate should be equal or less than maxDate");t<this.minDate&&(t=this.minDate),t>this.maxDate&&(t=this.maxDate),this.setScheduleProperties({selectedDate:new Date(""+t)})},i.prototype.getViewIndex=function(e){for(var t=0;t<this.viewCollections.length;t++){if(this.viewCollections[t].option===e)return t}return-1},i.prototype.setViewOptions=function(e){var t,i;void 0===e&&(e=!1),this.viewOptions={},this.viewCollections=[];var a=this.viewIndex,n=0;this.viewIndex=-1;for(var r=0,s=this.views;r<s.length;r++){var o=s[r],l="string"!=typeof o;"string"==typeof o?(t=o,this.currentView===t&&(i=t,this.viewIndex=n)):(t=o.option,o.isSelected&&(i=t,this.viewIndex=n));var c=sf.base.extend({option:t},l?o:{}),p=t.charAt(0).toLowerCase()+t.slice(1);c.cellHeaderTemplateName=c.cellHeaderTemplate?c.option:"",c.dateHeaderTemplateName=c.dateHeaderTemplate?c.option:"",c.cellTemplateName=c.cellTemplate?c.option:"",c.resourceHeaderTemplateName=c.resourceHeaderTemplate?c.option:"",c.eventTemplateName=c.eventTemplate?c.option:"",this.viewCollections.push(c),sf.base.isNullOrUndefined(this.viewOptions[p])?this.viewOptions[p]=[c]:this.viewOptions[p].push(c),n++}if(!e&&i&&(this.setScheduleProperties({currentView:i}),this.onServerDataBind()),-1===this.viewIndex){var d=this.getViewIndex(this.currentView);this.viewIndex="string"==typeof this.views[0]||sf.base.isNullOrUndefined(a)||-1===a?-1===d?0:d:a}},i.prototype.onServerDataBind=function(){this.bulkChanges&&this.bulkChanges.selectedDate&&(this.bulkChanges.selectedDate=M(this.bulkChanges.selectedDate)),this.serverDataBind()},i.prototype.getActiveViewOptions=function(){var e={enable:this.timeScale.enable,interval:this.timeScale.interval,slotCount:this.timeScale.slotCount,majorSlotTemplate:this.timeScale.majorSlotTemplate,minorSlotTemplate:this.timeScale.minorSlotTemplate},t={byDate:this.group.byDate,byGroupID:this.group.byGroupID,allowGroupEdit:this.group.allowGroupEdit,resources:this.group.resources,headerTooltipTemplate:this.group.headerTooltipTemplate,enableCompactView:this.group.enableCompactView},i=this.viewCollections[this.viewIndex].workDays?[]:this.workDays;Object.keys(this.viewCollections[this.viewIndex]).indexOf("firstDayOfWeek")>-1&&sf.base.isNullOrUndefined(this.viewCollections[this.viewIndex].firstDayOfWeek)&&delete this.viewCollections[this.viewIndex].firstDayOfWeek;var a={dateFormat:this.dateFormat,endHour:this.endHour,isSelected:!1,option:null,readonly:this.readonly,startHour:this.startHour,allowVirtualScrolling:!1,cellHeaderTemplate:this.cellHeaderTemplate,cellTemplate:this.cellTemplate,eventTemplate:this.eventSettings.template,dateHeaderTemplate:this.dateHeaderTemplate,resourceHeaderTemplate:this.resourceHeaderTemplate,firstDayOfWeek:this.firstDayOfWeek,workDays:i,showWeekend:this.showWeekend,showWeekNumber:this.showWeekNumber,displayName:null,interval:1,timeScale:e,group:t,headerRows:this.headerRows,orientation:"Horizontal"};return sf.base.extend(a,this.viewCollections[this.viewIndex],void 0,!0)},i.prototype.initializeDataModule=function(){this.eventFields={id:this.eventSettings.fields.id,isBlock:this.eventSettings.fields.isBlock,subject:this.eventSettings.fields.subject.name,startTime:this.eventSettings.fields.startTime.name,endTime:this.eventSettings.fields.endTime.name,startTimezone:this.eventSettings.fields.startTimezone.name,endTimezone:this.eventSettings.fields.endTimezone.name,location:this.eventSettings.fields.location.name,description:this.eventSettings.fields.description.name,isAllDay:this.eventSettings.fields.isAllDay.name,recurrenceID:this.eventSettings.fields.recurrenceID.name,recurrenceRule:this.eventSettings.fields.recurrenceRule.name,recurrenceException:this.eventSettings.fields.recurrenceException.name,isReadonly:this.eventSettings.fields.isReadonly,followingID:this.eventSettings.fields.followingID},this.setEditorTitles(),this.dataModule=new z(this.eventSettings.dataSource,this.eventSettings.query),this.crudModule=new Gt(this)},i.prototype.setEditorTitles=function(){this.editorTitles={subject:this.eventSettings.fields.subject.title||this.localeObj.getConstant("title"),startTime:this.eventSettings.fields.startTime.title||this.localeObj.getConstant("start"),endTime:this.eventSettings.fields.endTime.title||this.localeObj.getConstant("end"),isAllDay:this.eventSettings.fields.isAllDay.title||this.localeObj.getConstant("allDay"),startTimezone:this.eventSettings.fields.startTimezone.title||this.localeObj.getConstant("startTimezone"),endTimezone:this.eventSettings.fields.endTimezone.title||this.localeObj.getConstant("endTimezone"),location:this.eventSettings.fields.location.title||this.localeObj.getConstant("location"),description:this.eventSettings.fields.description.title||this.localeObj.getConstant("description"),recurrenceRule:this.eventSettings.fields.recurrenceRule.title||this.localeObj.getConstant("repeat")}},i.prototype.initializeView=function(e){this.showSpinner(),this.activeViewOptions=this.getActiveViewOptions(),this.resourceBase&&this.resourceBase.setResourceCollection(),this.initializeTemplates(),this.renderModule.render(e)},i.prototype.initializeTemplates=function(){this.cellHeaderTemplateFn=this.templateParser(this.activeViewOptions.cellHeaderTemplate),this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),this.majorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate),this.minorSlotTemplateFn=this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate),this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),this.headerTooltipTemplateFn=this.templateParser(this.activeViewOptions.group.headerTooltipTemplate)},i.prototype.initializePopups=function(){this.eventWindow=new Rt(this),this.quickPopup=new ht(this)},i.prototype.getDayNames=function(e){sf.base.isBlazor()&&"narrow"===e&&(e="short");var t,i=[],a="";"en"===this.locale||"en-US"===this.locale?(a=sf.base.isBlazor()?"days.":"days.stand-alone.",t=sf.base.getValue(a+e,sf.base.getDefaultDateObject(this.getCalendarMode()))):(a=sf.base.isBlazor()?this.locale+".dates.days."+e:"main."+this.locale+".dates.calendars."+this.getCalendarMode()+".days.format."+e,t=sf.base.getValue(a,sf.base.cldrData));for(var n=0,r=Object.keys(t);n<r.length;n++){var s=r[n];i.push(sf.base.getValue(s,t))}return i},i.prototype.setCldrTimeFormat=function(){sf.base.isBlazor()?this.timeFormat=sf.base.IntlBase.compareBlazorDateFormats({skeleton:"t"},this.locale).format:"en"===this.locale||"en-US"===this.locale?this.timeFormat=sf.base.getValue("timeFormats.short",sf.base.getDefaultDateObject(this.getCalendarMode())):this.timeFormat=sf.base.getValue("main."+this.locale+".dates.calendars."+this.getCalendarMode()+".timeFormats.short",sf.base.cldrData)},i.prototype.getCalendarMode=function(){return this.calendarMode.toLowerCase()},i.prototype.getTimeString=function(e){return this.globalize.formatDate(e,{format:this.timeFormat,type:"time",calendar:this.getCalendarMode()}).toLocaleUpperCase()},i.prototype.getDateTime=function(e){return e instanceof Date?new Date(e.getTime()):new Date(e)},i.prototype.setCalendarMode=function(){"Islamic"===this.calendarMode?this.calendarUtil=new Y:this.calendarUtil=new _},i.prototype.setScheduleProperties=function(e){this.allowServerDataBinding=!1,this.setProperties(e,!0),this.allowServerDataBinding=!0},i.prototype.changeView=function(e,i,a,n){var r=this;if(sf.base.isNullOrUndefined(n)&&(n=this.getViewIndex(e)),!(!a&&n===this.viewIndex||n<0)){this.viewIndex=n,sf.base.isBlazor()&&this.interopAdaptor.invokeMethodAsync("SetViewIndex",this.viewIndex);var s={requestType:"viewNavigate",cancel:!1,event:i};this.trigger(t,s,(function(t){if(!t.cancel){var a={action:"view",cancel:!1,previousView:r.currentView,currentView:e};r.trigger("navigating",a,(function(t){t.cancel||(r.setScheduleProperties({currentView:e}),r.headerModule&&(r.headerModule.updateActiveView(),r.headerModule.setCalendarDate(r.selectedDate),r.headerModule.setCalendarView()),r.initializeView(r.currentView),r.onServerDataBind(),r.animateLayout(),s={requestType:"viewNavigate",cancel:!1,event:i},r.trigger("actionComplete",s))}))}}))}},i.prototype.changeDate=function(e,i){var a=this,n={requestType:"dateNavigate",cancel:!1,event:i};this.trigger(t,n,(function(t){if(!t.cancel){var r={action:"date",cancel:!1,previousDate:a.selectedDate,currentDate:e};a.trigger("navigating",r,(function(t){t.cancel||(a.uiStateValues.isInitial=!!a.activeView.isTimelineView()||a.uiStateValues.isInitial,a.validateDate(e),a.headerModule&&a.headerModule.setCalendarDate(e),a.initializeView(a.currentView),a.onServerDataBind(),a.animateLayout(),n={requestType:"dateNavigate",cancel:!1,event:i},a.trigger("actionComplete",n))}))}}))},i.prototype.isMinMaxDate=function(e){return void 0===e&&(e=this.selectedDate),e.getTime()>=this.minDate.getTime()&&e.getTime()<=this.maxDate.getTime()},i.prototype.isSelectedDate=function(e){return e.setHours(0,0,0,0)===new Date(""+this.selectedDate).setHours(0,0,0,0)},i.prototype.getCurrentTime=function(){if(this.timezone){var e=(new Date).getTimezoneOffset();return this.tzModule.convert(new Date,e,this.timezone)}return new Date},i.prototype.getNavigateView=function(){return this.activeView.isTimelineView()?"TimelineMonth"===this.currentView||"TimelineYear"===this.currentView?"TimelineDay":"Agenda":"Day"},i.prototype.animateLayout=function(){!sf.base.isBlazor()&&this.activeView.element&&new sf.base.Animation({duration:600,name:"FadeIn",timingFunction:"easeIn"}).animate(this.activeView.element)},i.prototype.requiredModules=function(){var e=[];this.setViewOptions(!0);for(var t=0,i=Object.keys(this.viewOptions);t<i.length;t++){var a=i[t];a="timelineDay"===a||"timelineWeek"===a||"timelineWorkWeek"===a?"timelineViews":a,e.push({member:a,args:[this]})}return this.allowDragAndDrop&&e.push({member:"dragAndDrop",args:[this]}),this.allowResizing&&e.push({member:"resize",args:[this]}),(!sf.base.isBlazor()||sf.base.isBlazor()&&this.isServerRendered&&this.allowExcelExport)&&e.push({member:"excelExport",args:[this]}),e.push({member:"iCalendarExport",args:[this]}),e.push({member:"iCalendarImport",args:[this]}),e.push({member:"print",args:[this]}),e},i.prototype.preRender=function(){this.isAdaptive=sf.base.Browser.isDevice,this.globalize=new sf.base.Internationalization(this.locale),this.tzModule=new G,this.uiStateValues={expand:!1,isInitial:!0,left:0,top:0,isGroupAdaptive:!1,isIgnoreOccurrence:!1,groupIndex:0,action:!1,isBlock:!1},this.activeCellsData={startTime:this.getCurrentTime(),endTime:this.getCurrentTime(),isAllDay:!1},this.activeEventData={event:void 0,element:void 0},this.getDefaultLocale(),this.localeObj=new sf.base.L10n(this.getModuleName(),this.defaultLocale,this.locale),this.setCldrTimeFormat(),this.setCalendarMode(),this.eventsData=[],this.eventsProcessed=[],this.blockData=[],this.blockProcessed=[],this.resourceCollection=[],this.currentAction=null,this.selectedElements=[],this.setViewOptions()},i.prototype.getDefaultLocale=function(){this.defaultLocale={day:"Day",week:"Week",workWeek:"Work Week",month:"Month",year:"Year",agenda:"Agenda",weekAgenda:"Week Agenda",workWeekAgenda:"Work Week Agenda",monthAgenda:"Month Agenda",today:"Today",noEvents:"No events",emptyContainer:"There are no events scheduled on this day.",allDay:"All day",start:"Start",end:"End",more:"more",close:"Close",cancel:"Cancel",noTitle:"(No Title)",delete:"Delete",deleteEvent:"Delete Event",deleteMultipleEvent:"Delete Multiple Events",selectedItems:"Items selected",deleteSeries:"Entire Series",edit:"Edit",editSeries:"Entire Series",editEvent:"Edit Event",createEvent:"Create",subject:"Subject",addTitle:"Add title",moreDetails:"More Details",save:"Save",editContent:"How would you like to change the appointment in the series?",deleteContent:"Are you sure you want to delete this event?",deleteMultipleContent:"Are you sure you want to delete the selected events?",newEvent:"New Event",title:"Title",location:"Location",description:"Description",timezone:"Timezone",startTimezone:"Start Timezone",endTimezone:"End Timezone",repeat:"Repeat",saveButton:"Save",cancelButton:"Cancel",deleteButton:"Delete",recurrence:"Recurrence",wrongPattern:"The recurrence pattern is not valid.",seriesChangeAlert:"Do you want to cancel the changes made to specific instances of this series and match it to the whole series again?",createError:"The duration of the event must be shorter than how frequently it occurs. Shorten the duration, or change the recurrence pattern in the recurrence event editor.",sameDayAlert:"Two occurrences of the same event cannot occur on the same day.",editRecurrence:"Edit Recurrence",repeats:"Repeats",alert:"Alert",startEndError:"The selected end date occurs before the start date.",invalidDateError:"The entered date value is invalid.",blockAlert:"Events cannot be scheduled within the blocked time range.",ok:"Ok",yes:"Yes",no:"No",occurrence:"Occurrence",series:"Series",previous:"Previous",next:"Next",timelineDay:"Timeline Day",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month",timelineYear:"Timeline Year",editFollowingEvent:"Following Events",deleteTitle:"Delete Event",editTitle:"Edit Event",beginFrom:"Begin From",endAt:"Ends At"}},i.prototype.wireEvents=function(){sf.base.EventHandler.add(window,"resize",this.onScheduleResize,this),sf.base.EventHandler.add(window,"orientationchange",this.onScheduleResize,this),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.onDocumentClick,this),sf.base.EventHandler.add(this.element,"mouseover",this.workCellAction.onHover,this.workCellAction),this.allowKeyboardInteraction&&(this.keyboardInteractionModule=new W(this))},i.prototype.removeSelectedClass=function(){for(var e=this.getSelectedElements(),t=0,i=e;t<i.length;t++){var a=i[t];a.setAttribute("aria-selected","false"),a.removeAttribute("tabindex")}sf.base.removeClass(e,"e-selected-cell")},i.prototype.addSelectedClass=function(e,t){for(var i=0,a=e;i<a.length;i++){a[i].setAttribute("aria-selected","true")}sf.base.addClass(e,"e-selected-cell"),t&&(t.setAttribute("tabindex","0"),t.focus())},i.prototype.selectCell=function(e){this.removeSelectedClass(),this.addSelectedClass([e],e)},i.prototype.getAllDayRow=function(){return this.element.querySelector(".e-all-day-row")},i.prototype.getContentTable=function(){return this.activeView.element.querySelector(".e-content-table tbody")},i.prototype.getTableRows=function(){return[].slice.call(this.element.querySelectorAll(".e-content-table tbody tr:not(.e-hidden)"))},i.prototype.getWorkCellElements=function(){return[].slice.call(this.element.querySelectorAll(".e-work-cells"))},i.prototype.getIndexOfDate=function(e,t){return e.map(Number).indexOf(+t)},i.prototype.isAllDayCell=function(e){return!(!(["Month","TimelineMonth","TimelineYear","MonthAgenda"].indexOf(this.currentView)>-1||e.classList.contains("e-all-day-cells")||e.classList.contains("e-header-cells"))&&this.activeViewOptions.timeScale.enable)||!!(this.activeView.isTimelineView()&&this.activeViewOptions.headerRows.length>0&&"Hour"!==this.activeViewOptions.headerRows.slice(-1)[0].option)},i.prototype.getDateFromElement=function(e){var t=e.getAttribute("data-date");if(!sf.base.isNullOrUndefined(t)){var i=parseInt(t,10),a=new Date(i);if(this.isServerRenderer()){var n=new Date(+a+6e4*a.getTimezoneOffset());return new Date(n.getTime()+6e4*(n.getTimezoneOffset()-a.getTimezoneOffset()))}return a}},i.prototype.getMsFromDate=function(e){return this.isServerRenderer()?new Date(+e-6e4*e.getTimezoneOffset()).getTime():e.getTime()},i.prototype.getCellHeaderTemplate=function(){return this.cellHeaderTemplateFn},i.prototype.getCellTemplate=function(){return this.cellTemplateFn},i.prototype.getDateHeaderTemplate=function(){return this.dateHeaderTemplateFn},i.prototype.getMajorSlotTemplate=function(){return this.majorSlotTemplateFn},i.prototype.getMinorSlotTemplate=function(){return this.minorSlotTemplateFn},i.prototype.getAppointmentTemplate=function(){return this.appointmentTemplateFn},i.prototype.getEventTooltipTemplate=function(){return this.eventTooltipTemplateFn},i.prototype.getHeaderTooltipTemplate=function(){return this.headerTooltipTemplateFn},i.prototype.getEditorTemplate=function(){return this.editorTemplateFn},i.prototype.getQuickInfoTemplatesHeader=function(){return this.quickInfoTemplatesHeaderFn},i.prototype.getQuickInfoTemplatesContent=function(){return this.quickInfoTemplatesContentFn},i.prototype.getQuickInfoTemplatesFooter=function(){return this.quickInfoTemplatesFooterFn},i.prototype.getResourceHeaderTemplate=function(){return this.resourceHeaderTemplateFn},i.prototype.getCssProperties=function(){return{border:this.enableRtl?"borderLeftWidth":"borderRightWidth",padding:this.enableRtl?"paddingLeft":"paddingRight",rtlBorder:this.enableRtl?"borderRightWidth":"borderLeftWidth",rtlPadding:this.enableRtl?"paddingRight":"paddingLeft"}},i.prototype.removeNewEventElement=function(){var e=this.element.querySelector(".e-new-event");sf.base.isNullOrUndefined(e)||sf.base.remove(e)},i.prototype.getStartEndTime=function(e){if(!sf.base.isNullOrUndefined(e)&&""!==e){var t=m(this.getCurrentTime()),i=e.split(":");return 2===i.length&&t.setHours(parseInt(i[0],10),parseInt(i[1],10),0),t}return null},i.prototype.onDocumentClick=function(e){this.notify("document-click",{event:e})},i.prototype.onScheduleResize=function(){this.quickPopup&&this.quickPopup.onClosePopup(),"Month"!==this.currentView&&this.activeViewOptions.timeScale.enable&&!this.activeView.isTimelineView()||(this.activeView.resetColWidth(),this.notify(s,{cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0}),this.notify(a,{}))},i.prototype.templateParser=function(e){if(e)try{if(document.querySelectorAll(e).length)return sf.base.compile(document.querySelector(e).innerHTML.trim())}catch(t){return sf.base.compile(e)}},i.prototype.getAnnocementString=function(e,t){var i=t||e[this.eventFields.subject]||this.eventSettings.fields.subject.default,a=sf.base.isBlazor()?"F":"full",n=this.globalize.formatDate(e[this.eventFields.startTime],{type:"dateTime",skeleton:a,calendar:this.getCalendarMode()}),r=this.globalize.formatDate(e[this.eventFields.endTime],{type:"dateTime",skeleton:a,calendar:this.getCalendarMode()});return i+" "+this.localeObj.getConstant("beginFrom")+" "+n+" "+this.localeObj.getConstant("endAt")+" "+r},i.prototype.boundaryValidation=function(e,t){var i={left:!1,right:!1,top:!1,bottom:!1},a=this.element.querySelector(".e-content-wrap").getBoundingClientRect();return e<a.top+30+window.pageYOffset&&e>a.top+window.pageYOffset&&(i.top=!0),e>a.bottom-30+window.pageYOffset&&e<a.bottom+window.pageYOffset&&(i.bottom=!0),t<a.left+30+window.pageXOffset&&t>a.left+window.pageXOffset&&(i.left=!0),t>a.right-30+window.pageXOffset&&t<a.right+window.pageXOffset&&(i.right=!0),i},i.prototype.unwireEvents=function(){sf.base.EventHandler.remove(window,"resize",this.onScheduleResize),sf.base.EventHandler.remove(window,"orientationchange",this.onScheduleResize),sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.onDocumentClick),sf.base.EventHandler.remove(this.element,"mouseover",this.workCellAction.onHover),this.keyboardInteractionModule&&this.keyboardInteractionModule.destroy()},i.prototype.getModuleName=function(){return"schedule"},i.prototype.getPersistData=function(){return this.addOnPersist(["currentView","selectedDate"])},i.prototype.onPropertyChanged=function(e,t){for(var i={isRefresh:!1,isResource:!1,isDate:!1,isView:!1,isLayout:!1,isDataManager:!1},n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];switch(o){case"views":this.setViewOptions(),this.headerModule&&this.headerModule.updateItems(),i.isView=!0;break;case"currentView":i.isView=!0;break;case"minDate":case"maxDate":case"selectedDate":i.isDate=!0;break;case"dateFormat":this.activeViewOptions=this.getActiveViewOptions(),this.headerModule&&this.headerModule.updateDateRange(this.activeView.getDateRangeText());break;case"showHeaderBar":this.destroyHeaderModule(),e.showHeaderBar&&(this.headerModule=new N(this),this.headerModule.updateDateRange(this.activeView.getDateRangeText())),this.notify(s,{cssProperties:this.getCssProperties()}),this.activeView.isTimelineView()&&this.notify(a,{});break;case"showWeekend":case"workDays":case"startHour":case"endHour":case"workHours":case"readonly":case"headerRows":case"showWeekNumber":i.isLayout=!0;break;case"locale":case"calendarMode":this.globalize=new sf.base.Internationalization(this.locale),this.localeObj=new sf.base.L10n(this.getModuleName(),this.defaultLocale,this.locale),this.setCldrTimeFormat(),this.setCalendarMode(),i.isRefresh=!0;break;case"firstDayOfWeek":this.activeViewOptions.firstDayOfWeek=e.firstDayOfWeek,this.eventWindow&&this.eventWindow.refreshRecurrenceEditor(),i.isLayout=!0;break;case"showTimeIndicator":this.activeViewOptions.timeScale.enable&&this.activeView&&this.activeView.highlightCurrentTime();break;case"cellHeaderTemplate":this.activeViewOptions.cellHeaderTemplate=e.cellHeaderTemplate,this.cellHeaderTemplateFn=this.templateParser(this.activeViewOptions.cellHeaderTemplate),i.isLayout=!0;break;case"cellTemplate":this.activeViewOptions.cellTemplate=e.cellTemplate,this.cellTemplateFn=this.templateParser(this.activeViewOptions.cellTemplate),i.isLayout=!0;break;case"dateHeaderTemplate":this.activeViewOptions.dateHeaderTemplate=e.dateHeaderTemplate,this.dateHeaderTemplateFn=this.templateParser(this.activeViewOptions.dateHeaderTemplate),i.isLayout=!0;break;case"resourceHeaderTemplate":this.activeViewOptions.resourceHeaderTemplate=e.resourceHeaderTemplate,this.resourceHeaderTemplateFn=this.templateParser(this.activeViewOptions.resourceHeaderTemplate),i.isLayout=!0;break;case"timezone":this.eventBase.timezonePropertyChange(t.timezone);break;case"enableRtl":this.setRtlClass(),i.isRefresh=!0;break;case"rowAutoHeight":i.isLayout=!0;break;default:this.extendedPropertyChange(o,e,t,i)}}this.propertyChangeAction(i)},i.prototype.propertyChangeAction=function(e){e.isRefresh?this.refresh():e.isResource?this.initializeResources(!0):e.isView?this.changeView(this.currentView,null,!0):e.isDate?this.changeDate(this.selectedDate):e.isLayout?this.initializeView(this.currentView):e.isDataManager&&this.renderModule&&(this.dragAndDropModule&&(this.dragAndDropModule.actionObj.action="",sf.base.removeClass([this.element],"e-event-action")),this.renderModule.refreshDataManager())},i.prototype.extendedPropertyChange=function(e,t,i,n){switch(e){case"width":case"height":this.notify("ui-update",{module:"scroll",properties:{width:t.width,height:t.height}});break;case"cssClass":i.cssClass&&sf.base.removeClass([this.element],i.cssClass),t.cssClass&&sf.base.addClass([this.element],t.cssClass);break;case"hideEmptyAgendaDays":case"agendaDaysCount":this.activeViewOptions=this.getActiveViewOptions(),n.isView=!0;break;case"eventSettings":this.onEventSettingsPropertyChanged(t.eventSettings,i.eventSettings,n);break;case"allowKeyboardInteraction":this.keyboardInteractionModule&&(this.keyboardInteractionModule.destroy(),this.keyboardInteractionModule=null),t.allowKeyboardInteraction&&(this.keyboardInteractionModule=new W(this));break;case"editorTemplate":sf.base.isNullOrUndefined(this.editorTemplate)||(this.editorTemplateFn=this.templateParser(this.editorTemplate)),this.eventWindow&&this.eventWindow.setDialogContent();break;case"quickInfoTemplates":this.quickInfoTemplates.header&&(this.quickInfoTemplatesHeaderFn=this.templateParser(this.quickInfoTemplates.header)),this.quickInfoTemplates.content&&(this.quickInfoTemplatesContentFn=this.templateParser(this.quickInfoTemplates.content)),this.quickInfoTemplates.footer&&(this.quickInfoTemplatesFooterFn=this.templateParser(this.quickInfoTemplates.footer));break;case"group":this.onGroupSettingsPropertyChanged(t.group,i.group,n);break;case"resources":n.isResource=!0;break;case"timeScale":this.activeViewOptions.timeScale.interval=t.timeScale.interval||this.activeViewOptions.timeScale.interval,this.activeViewOptions.timeScale.slotCount=t.timeScale.slotCount||this.activeViewOptions.timeScale.slotCount,this.eventWindow&&this.eventWindow.refreshDateTimePicker(),n.isLayout=!0;break;case"allowDragAndDrop":case"allowResizing":this.notify(a,{processedData:this.eventBase.processData(this.eventsData)});break;case"eventDragArea":this.notify(a,{})}},i.prototype.setRtlClass=function(){this.enableRtl?sf.base.addClass([this.element],"e-rtl"):sf.base.removeClass([this.element],"e-rtl")},i.prototype.refresh=function(){this.isServerRenderer()?(this.setEditorTitles(),this.destroyHeaderModule(),this.showHeaderBar&&(this.headerModule=new N(this),this.renderModule.updateHeader()),this.destroyPopups(),this.initializePopups(),this.notify(s,{cssProperties:this.getCssProperties()}),this.notify(a,{})):(this.tempResourceCollection=this.resourceCollection,e.prototype.refresh.call(this),this.tempResourceCollection=null)},i.prototype.onGroupSettingsPropertyChanged=function(e,t,i){for(var a=0,n=Object.keys(e);a<n.length;a++){var r=n[a];"headerTooltipTemplate"===r?this.headerTooltipTemplateFn=this.templateParser(e[r]):(i.isLayout=!0,this.eventWindow&&this.eventWindow.refresh())}},i.prototype.onEventSettingsPropertyChanged=function(e,t,i){for(var n=0,r=Object.keys(e);n<r.length;n++){switch(r[n]){case"dataSource":case"query":case"fields":this.initializeDataModule(),i.isDataManager=!0;break;case"template":this.activeViewOptions.eventTemplate=e.template,this.appointmentTemplateFn=this.templateParser(this.activeViewOptions.eventTemplate),i.isDataManager=!0;break;case"enableTooltip":this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),e.enableTooltip&&(this.eventTooltip=new ut(this));break;case"tooltipTemplate":this.eventTooltipTemplateFn=this.templateParser(this.eventSettings.tooltipTemplate);break;case"resourceColorField":this.resourceBase&&this.resourceBase.setResourceCollection(),i.isDataManager=!0;break;case"editFollowingEvents":this.quickPopup&&this.quickPopup.refreshQuickDialog();break;case"allowAdding":case"allowEditing":case"allowDeleting":this.eventWindow&&this.eventWindow.refresh();break;case"enableMaxHeight":case"enableIndicator":this.notify(a,{processedData:this.eventBase.processData(this.eventsData)});break;case"ignoreWhitespace":i.isLayout=!0}}},i.prototype.destroyHeaderModule=function(){this.headerModule&&(this.headerModule.destroy(),this.headerModule=null)},i.prototype.destroyPopups=function(){this.quickPopup&&(this.quickPopup.destroy(),this.quickPopup=null),this.eventWindow&&(this.eventWindow.destroy(),this.eventWindow=null)},i.prototype.showSpinner=function(){sf.popups.showSpinner(this.element)},i.prototype.hideSpinner=function(){sf.popups.hideSpinner(this.element)},i.prototype.setWorkHours=function(e,t,i,a){var n;n=this.getWorkHourCells(e,t,i,a),sf.base.addClass(n,"e-work-hours")},i.prototype.resetWorkHours=function(e,t,i,a){if(void 0===e&&(e=this.activeView.renderDates),e&&t&&i){var n=this.getWorkHourCells(e,t,i,a);sf.base.removeClass(n,"e-work-hours")}else{var r=[].slice.call(this.element.querySelectorAll(".e-work-hours"));sf.base.removeClass(r,"e-work-hours")}},i.prototype.getWorkHourCells=function(e,t,i,a){if(["Agenda","MonthAgenda","Month","TimelineMonth"].indexOf(this.currentView)>-1)return[];var n=this.getStartEndTime(t),r=this.getStartEndTime(i),s=this.getContentTable();if(sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(r)||!s)return[];n.setMilliseconds(0),r.setMilliseconds(0);var o=this.activeView.getStartHour();n<o&&(n=o);var l=this.activeView.getEndHour();r>l&&(r=l);for(var c=6e4*this.activeViewOptions.timeScale.interval/this.activeViewOptions.timeScale.slotCount,p=Math.round((n.getTime()-o.getTime())/c),d=Math.ceil((r.getTime()-o.getTime())/c),h=p,u=d,f=[],v=0,g=e;v<g.length;v++){var y=g[v];m(y=this.getDateTime(y));var b=this.activeView.renderDates;sf.base.isNullOrUndefined(a)||!this.resourceBase||this.activeView.isTimelineView()||(b=this.resourceBase.lastResourceLevel[a].renderDates);var T=this.getIndexOfDate(b,y);if(T>=0){if(this.activeView.isTimelineView()){var w=Math.round((l.getTime()-o.getTime())/c);p=h+T*w,d=u+T*w}for(var D=p;D<d;D++)if(this.activeView.isTimelineView()){var C=sf.base.isNullOrUndefined(a)?0:a;f.push(s.rows[C].cells[D])}else if(sf.base.isNullOrUndefined(a))f.push(s.rows[D].cells[T]);else{var E=[].slice.call(s.rows[D].querySelectorAll('.e-work-cells[data-group-index="'+a+'"]'));f.push(E[T])}}}return f},i.prototype.getCellDetails=function(e){var t=e instanceof Array?e:[e],i=sf.base.getElement(t[0]),a=sf.base.getElement(t.slice(-1)[0]),n=this.getDateFromElement(i),r=this.getDateFromElement(a);if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(r)){var s=this.activeView.isTimelineView()&&!sf.base.isNullOrUndefined(a.getAttribute("colSpan"))&&this.headerRows.length>0,o=s?parseInt(a.getAttribute("colSpan"),10):1,l={startTime:n,endTime:r=!this.activeViewOptions.timeScale.enable||s||a.classList.contains("e-all-day-cells")||a.classList.contains("e-header-cells")?y(new Date(r.getTime()),o):this.activeView.getEndDateFromStartDate(r),isAllDay:this.isAllDayCell(i),element:sf.base.isBlazor()?i:e},c=i.getAttribute("data-group-index");return sf.base.isNullOrUndefined(c)||(l.groupIndex=parseInt(c,10)),l}},i.prototype.getSelectedElements=function(){return[].slice.call(this.element.querySelectorAll(".e-selected-cell"))},i.prototype.getResourceCollections=function(){return this.resourceCollection},i.prototype.changeCurrentView=function(e,t){var i=this.getViewIndex(e),a=e.charAt(0).toLowerCase()+e.slice(1),n=this.viewOptions[a];n&&(i=this.viewCollections.indexOf(n[t||0])),-1!==i&&i!==this.viewIndex&&this.changeView(e,null,null,i)},i.prototype.getResourcesByIndex=function(e){if(this.resourceBase&&this.resourceBase.lastResourceLevel){if(e<0||e>=this.resourceBase.lastResourceLevel.length)return;var t=this.resourceBase.lastResourceLevel[e],i={};return this.resourceBase.setResourceValues(i,e),{resource:t.resource,resourceData:t.resourceData,groupData:i}}},i.prototype.expandResource=function(e,t){this.activeView.isTimelineView()&&this.resourceBase&&this.resourceCollection.length>1&&this.resourceBase.resourceExpand(e,t,!1)},i.prototype.collapseResource=function(e,t){this.activeView.isTimelineView()&&this.resourceBase&&this.resourceCollection.length>1&&this.resourceBase.resourceExpand(e,t,!0)},i.prototype.scrollTo=function(e,t){this.activeView.scrollToDate&&sf.base.isNullOrUndefined(e)&&t?this.activeView.scrollToDate(t):this.activeView.scrollToHour&&this.activeView.scrollToHour(e,t)},i.prototype.scrollToResource=function(e,t){this.resourceBase&&this.resourceBase.lastResourceLevel&&this.resourceBase.resourceScroll(e,t)},i.prototype.exportToICalendar=function(e,t){if(!this.iCalendarExportModule)throw Error("Inject ICalendarExport module");this.iCalendarExportModule.initializeCalendarExport(e,t)},i.prototype.importICalendar=function(e){if(!this.iCalendarImportModule)throw Error("Inject ICalendarImport module");this.iCalendarImportModule.initializeCalendarImport(e)},i.prototype.addEvent=function(e){this.crudModule.addEvent(e)},i.prototype.exportToExcel=function(e){if(!this.excelExportModule)throw Error("Inject ExcelExport module");this.excelExportModule.initializeExcelExport(e||{})},i.prototype.print=function(){if(!this.printModule)throw Error("Inject Print module");this.printModule.printScheduler()},i.prototype.saveEvent=function(e,t){this.crudModule.saveEvent(e,t)},i.prototype.deleteEvent=function(e,t){this.crudModule.deleteEvent(e,t)},i.prototype.getEvents=function(e,t,i){var a=[];return a=i?this.eventBase.getProcessedEvents():this.eventsData,e&&(e=this.getDateTime(e)),t&&(t=this.getDateTime(t)),a=this.eventBase.filterEventsByRange(a,e,t)},i.prototype.getBlockEvents=function(e,t,i){var a=[];return a=i?this.eventBase.getProcessedEvents(this.blockData):this.blockData,e&&(e=this.getDateTime(e)),t&&(t=this.getDateTime(t)),a=this.eventBase.filterEventsByRange(a,e,t)},i.prototype.getOccurrencesByID=function(e){return this.eventBase.getOccurrencesByID(e)},i.prototype.getOccurrencesByRange=function(e,t){return e=this.getDateTime(e),t=this.getDateTime(t),this.eventBase.getOccurrencesByRange(e,t)},i.prototype.getCurrentViewDates=function(){return this.activeView?this.activeView.renderDates:[]},i.prototype.setRecurrenceEditor=function(e){this.eventWindow.setRecurrenceEditor(e)},i.prototype.getEventMaxID=function(){return this.eventBase.getEventMaxID()},i.prototype.getDeletedOccurrences=function(e){return this.eventBase.getDeletedOccurrences(e)},i.prototype.getCurrentViewEvents=function(){return this.eventsProcessed},i.prototype.refreshEvents=function(){this.dragAndDropModule&&(this.dragAndDropModule.actionObj.action="",sf.base.removeClass([this.element],"e-event-action")),this.renderModule.refreshDataManager()},i.prototype.getEventDetails=function(e){var t=(e=sf.base.getElement(e)).getAttribute("data-guid");return t?this.eventBase.getEventByGuid(t):{}},i.prototype.isSlotAvailable=function(e,t,i){var a,n,r=this,s=this.activeEventData.event;if(e instanceof Date||"string"==typeof e?(a=e,n=t):(s=e,a=e[this.eventFields.startTime],n=e[this.eventFields.endTime],this.resourceBase&&(i=this.eventBase.getGroupIndexFromEvent(e))),sf.base.isNullOrUndefined(a)||sf.base.isNullOrUndefined(n))return!0;a=this.getDateTime(a),n=this.getDateTime(n);var o=this.eventBase.filterEvents(a,n);return!sf.base.isNullOrUndefined(i)&&this.resourceBase&&this.resourceBase.lastResourceLevel.length>0&&(o=this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[i],o)),s&&(o=s.Guid?o.filter((function(e){return e.Guid!==s.Guid})):o.filter((function(e){return e[r.eventFields.id]!==s[r.eventFields.id]}))),!(o.length>0)},i.prototype.openEditor=function(e,t,i,a){"Add"!==t||i?(e[this.eventFields.startTime]=this.getDateTime(e[this.eventFields.startTime]),e[this.eventFields.endTime]=this.getDateTime(e[this.eventFields.endTime])):(e.startTime=this.getDateTime(e.startTime),e.endTime=this.getDateTime(e.endTime),sf.base.isNullOrUndefined(e.element)||(e.element=sf.base.getElement(e.element))),this.currentAction=t,"Add"!==t&&(this.activeEventData.event=e),this.eventWindow.openEditor(e,t,i,a)},i.prototype.closeEditor=function(){this.eventWindow&&this.eventWindow.dialogClose()},i.prototype.closeQuickInfoPopup=function(){this.quickPopup&&this.quickPopup.quickPopupHide(!0)},i.prototype.addResource=function(e,t,i){this.resourceBase.addResource(e,t,i)},i.prototype.removeResource=function(e,t){this.resourceBase.removeResource(e,t)},i.prototype.destroy=function(){this.eventTooltip&&(this.eventTooltip.destroy(),this.eventTooltip=null),this.destroyPopups(),this.unwireEvents(),this.destroyHeaderModule(),this.scrollModule&&(this.scrollModule.destroy(),this.scrollModule=null),this.activeView&&(this.activeView.removeEventListener(),this.activeView.destroy(),this.activeView=null),this.scheduleTouchModule&&(this.scheduleTouchModule.destroy(),this.scheduleTouchModule=null),e.prototype.destroy.call(this),A(this.element);var t=[H];this.cssClass&&(t=t.concat(this.cssClass.split(" "))),sf.base.removeClass([this.element],t)},hi([sf.base.Property("auto")],i.prototype,"width",void 0),hi([sf.base.Property("auto")],i.prototype,"height",void 0),hi([sf.base.Property(!0)],i.prototype,"showHeaderBar",void 0),hi([sf.base.Property(!0)],i.prototype,"showTimeIndicator",void 0),hi([sf.base.Property("Week")],i.prototype,"currentView",void 0),hi([sf.base.Property(["Day","Week","WorkWeek","Month","Agenda"])],i.prototype,"views",void 0),hi([sf.base.Property(new Date)],i.prototype,"selectedDate",void 0),hi([sf.base.Property(new Date(1900,0,1))],i.prototype,"minDate",void 0),hi([sf.base.Property(new Date(2099,11,31))],i.prototype,"maxDate",void 0),hi([sf.base.Property()],i.prototype,"dateFormat",void 0),hi([sf.base.Property("Gregorian")],i.prototype,"calendarMode",void 0),hi([sf.base.Property(!0)],i.prototype,"showWeekend",void 0),hi([sf.base.Property(0)],i.prototype,"firstDayOfWeek",void 0),hi([sf.base.Property([1,2,3,4,5])],i.prototype,"workDays",void 0),hi([sf.base.Property("00:00")],i.prototype,"startHour",void 0),hi([sf.base.Property("24:00")],i.prototype,"endHour",void 0),hi([sf.base.Property(!0)],i.prototype,"allowResizing",void 0),hi([sf.base.Complex({},Lt)],i.prototype,"workHours",void 0),hi([sf.base.Complex({},Nt)],i.prototype,"timeScale",void 0),hi([sf.base.Property(!0)],i.prototype,"allowKeyboardInteraction",void 0),hi([sf.base.Property(!0)],i.prototype,"allowDragAndDrop",void 0),hi([sf.base.Property()],i.prototype,"dateHeaderTemplate",void 0),hi([sf.base.Property()],i.prototype,"cellHeaderTemplate",void 0),hi([sf.base.Property()],i.prototype,"cellTemplate",void 0),hi([sf.base.Property(!1)],i.prototype,"readonly",void 0),hi([sf.base.Property(!0)],i.prototype,"showQuickInfo",void 0),hi([sf.base.Property(!0)],i.prototype,"allowMultiCellSelection",void 0),hi([sf.base.Property(!0)],i.prototype,"allowMultiRowSelection",void 0),hi([sf.base.Property(!1)],i.prototype,"quickInfoOnSelectionEnd",void 0),hi([sf.base.Property(!1)],i.prototype,"showWeekNumber",void 0),hi([sf.base.Property(!1)],i.prototype,"rowAutoHeight",void 0),hi([sf.base.Property()],i.prototype,"editorTemplate",void 0),hi([sf.base.Complex({},Wt)],i.prototype,"quickInfoTemplates",void 0),hi([sf.base.Property(7)],i.prototype,"agendaDaysCount",void 0),hi([sf.base.Property(!0)],i.prototype,"hideEmptyAgendaDays",void 0),hi([sf.base.Property(!0)],i.prototype,"enableRecurrenceValidation",void 0),hi([sf.base.Property()],i.prototype,"timezone",void 0),hi([sf.base.Complex({},ai)],i.prototype,"eventSettings",void 0),hi([sf.base.Property()],i.prototype,"resourceHeaderTemplate",void 0),hi([sf.base.Complex({},si)],i.prototype,"group",void 0),hi([sf.base.Collection([],ci)],i.prototype,"resources",void 0),hi([sf.base.Collection([],Yt)],i.prototype,"headerRows",void 0),hi([sf.base.Property()],i.prototype,"cssClass",void 0),hi([sf.base.Property()],i.prototype,"eventDragArea",void 0),hi([sf.base.Event()],i.prototype,"created",void 0),hi([sf.base.Event()],i.prototype,"destroyed",void 0),hi([sf.base.Event()],i.prototype,"cellClick",void 0),hi([sf.base.Event()],i.prototype,"cellDoubleClick",void 0),hi([sf.base.Event()],i.prototype,"moreEventsClick",void 0),hi([sf.base.Event()],i.prototype,"hover",void 0),hi([sf.base.Event()],i.prototype,"select",void 0),hi([sf.base.Event()],i.prototype,"actionBegin",void 0),hi([sf.base.Event()],i.prototype,"actionComplete",void 0),hi([sf.base.Event()],i.prototype,"actionFailure",void 0),hi([sf.base.Event()],i.prototype,"navigating",void 0),hi([sf.base.Event()],i.prototype,"renderCell",void 0),hi([sf.base.Event()],i.prototype,"eventClick",void 0),hi([sf.base.Event()],i.prototype,"eventRendered",void 0),hi([sf.base.Event()],i.prototype,"dataBinding",void 0),hi([sf.base.Event()],i.prototype,"popupOpen",void 0),hi([sf.base.Event()],i.prototype,"popupClose",void 0),hi([sf.base.Event()],i.prototype,"dragStart",void 0),hi([sf.base.Event()],i.prototype,"drag",void 0),hi([sf.base.Event()],i.prototype,"dragStop",void 0),hi([sf.base.Event()],i.prototype,"resizeStart",void 0),hi([sf.base.Event()],i.prototype,"resizing",void 0),hi([sf.base.Event()],i.prototype,"resizeStop",void 0),hi([sf.base.Event()],i.prototype,"dataBound",void 0),i=hi([sf.base.NotifyPropertyChanges],i)}(sf.base.Component),fi=function(){function e(e){this.daysVariation=0,this.parent=e,this.actionObj={X:0,Y:0,groupIndex:0,cellWidth:0,cellHeight:0,slotInterval:0,interval:0,actionIndex:0,cloneElement:[],originalElement:[],action:null,isAllDay:null,excludeSelectors:null,index:0,navigationInterval:null,scrollInterval:null},this.scrollArgs={element:null,width:0,height:0},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1}}return e.prototype.getChangedData=function(){var e=sf.base.extend({},this.actionObj.event,null,!0);if(e[this.parent.eventFields.startTime]=this.actionObj.start,e[this.parent.eventFields.endTime]=this.actionObj.end,sf.base.isNullOrUndefined(this.actionObj.isAllDay)||(e[this.parent.eventFields.isAllDay]=this.actionObj.isAllDay),this.parent.activeViewOptions.group.resources.length>0){var t=this.getOriginalElement(this.actionObj.element).map((function(e){return parseInt(e.getAttribute("data-group-index"),10)}));if(-1===t.indexOf(this.actionObj.groupIndex)){var i=parseInt(this.actionObj.clone.getAttribute("data-group-index"),10);(t=t.filter((function(e){return e!==i}))).push(this.actionObj.groupIndex),this.parent.resourceBase.getResourceData(e,this.actionObj.groupIndex,t)}}return e},e.prototype.saveChangedData=function(e){this.parent.activeEventData.event=this.actionObj.event,this.parent.currentAction="Save",sf.base.isBlazor()&&(e.data[this.parent.eventFields.startTime]=this.parent.getDateTime(e.data[this.parent.eventFields.startTime]),e.data[this.parent.eventFields.endTime]=this.parent.getDateTime(e.data[this.parent.eventFields.endTime]));var t=e.data,i=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(this.actionObj.element.getAttribute("data-group-index"),10)===this.actionObj.groupIndex;if(+t[this.parent.eventFields.startTime]!=+this.actionObj.event[this.parent.eventFields.startTime]||+t[this.parent.eventFields.endTime]!=+this.actionObj.event[this.parent.eventFields.endTime]||!i){var a;if(t[this.parent.eventFields.recurrenceRule]){var n=t[this.parent.eventFields.recurrenceID]||t[this.parent.eventFields.id];if(t[this.parent.eventFields.id]===t[this.parent.eventFields.recurrenceID]&&(t[this.parent.eventFields.id]=this.parent.eventBase.getEventMaxID(),a="EditOccurrence"),this.parent.enableRecurrenceValidation&&this.parent.eventWindow.editOccurrenceValidation(n,t,this.actionObj.event))return void this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert")}(t[this.parent.eventFields.startTimezone]||t[this.parent.eventFields.endTimezone])&&this.parent.eventBase.timezoneConvert(t),this.parent.crudModule.saveEvent(t,a)}},e.prototype.calculateIntervalTime=function(e){var t=new Date(+e);return t.setMinutes(Math.floor(t.getMinutes()/this.actionObj.interval)*this.actionObj.interval),t},e.prototype.getContentAreaDimension=function(){var e=this.parent.element.querySelector(".e-content-wrap"),t=[].slice.call(e.querySelector("tr").children);!this.parent.activeView.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.isAdaptive&&(t=this.getResourceElements(t));var i=t[0].getBoundingClientRect(),a=t.slice(-1)[0].getBoundingClientRect();return{bottom:e.scrollHeight-5,left:this.parent.enableRtl?a.left:i.left,right:this.parent.enableRtl?i.right:a.right,top:0}},e.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},e.prototype.getIndex=function(e){var t=[].slice.call(this.parent.getContentTable().querySelector("tr").children),i={minIndex:0,maxIndex:t.length-1};if("resize"===this.actionObj.action&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&!this.parent.activeView.isTimelineView()){var a=this.getResourceElements(t);i.minIndex=a[0].cellIndex,i.maxIndex=a.slice(-1)[0].cellIndex}return e<i.minIndex&&(e=i.minIndex),e>i.maxIndex&&(e=i.maxIndex),e},e.prototype.updateTimePosition=function(e){for(var t=0,i=this.actionObj.cloneElement;t<i.length;t++){var a=i[t].querySelector(".e-time");a&&(a.innerHTML=this.parent.getTimeString(this.actionObj.start)+" - "+this.parent.getTimeString(this.actionObj.end))}if(this.parent.activeViewOptions.timeScale.enable&&this.parent.isAdaptive&&"Month"!==this.parent.currentView&&"TimelineMonth"!==this.parent.currentView){var n=this.parent.element.querySelector(".e-clone-time-indicator");if(!n){n=sf.base.createElement("div",{className:"e-clone-time-indicator"});var r=this.parent.activeView.isTimelineView()?"e-date-header-wrap":"e-time-cells-wrap";this.parent.element.querySelector("."+r).appendChild(n)}n.innerHTML=this.parent.getTimeString(e);var s=0;if(this.parent.activeView.isTimelineView())if(this.parent.enableRtl){var o=parseInt(this.actionObj.clone.style.right,10);s="drag"===this.actionObj.action||this.resizeEdges.left?o+this.actionObj.clone.offsetWidth:o,n.style.right=sf.base.formatUnit(s)}else{var l=parseInt(this.actionObj.clone.style.left,10);s="drag"===this.actionObj.action||this.resizeEdges.left?l:l+this.actionObj.clone.offsetWidth,n.style.left=sf.base.formatUnit(s)}else s="drag"===this.actionObj.action||this.resizeEdges.top?this.actionObj.clone.offsetTop:this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight,n.style.top=sf.base.formatUnit(s)}},e.prototype.getResourceElements=function(e){var t=this;return e.filter((function(e){return parseInt(e.getAttribute("data-group-index"),10)===t.actionObj.groupIndex}))},e.prototype.getOriginalElement=function(e){var t,i=e.getAttribute("data-guid");if(e.offsetParent&&e.offsetParent.classList.contains("e-more-event-popup")||this.parent.activeView.isTimelineView())t=[].slice.call(this.parent.element.querySelectorAll('[data-guid="'+i+'"]'));else{var a=sf.base.closest(e,"tr");t=[].slice.call(a.querySelectorAll('[data-guid="'+i+'"]'))}return t},e.prototype.createCloneElement=function(e){var t=sf.base.createElement("div",{innerHTML:e.outerHTML}).children[0],i=["e-schedule-event-clone"];return i.push("drag"===this.actionObj.action?"e-drag-clone":"e-resize-clone"),"Month"!==this.parent.currentView&&"TimelineMonth"!==this.parent.currentView||i.push("e-month-event"),sf.base.addClass([t],i),sf.base.addClass([e],"e-event-action"),sf.base.isNullOrUndefined(e.parentElement)||e.parentElement.appendChild(t),t.style.width=sf.base.formatUnit(t.offsetWidth-2),this.parent.eventDragArea&&"drag"===this.actionObj.action&&document.querySelector(this.parent.eventDragArea).appendChild(t),sf.base.setStyleAttribute(t,{border:"0px"}),t},e.prototype.removeCloneElementClasses=function(){var e=this.actionObj.originalElement;"Month"===this.parent.currentView&&(e=[].slice.call(this.parent.element.querySelectorAll(".e-event-action"))),e.forEach((function(e){return sf.base.removeClass([e],"e-event-action")}))},e.prototype.removeCloneElement=function(){this.actionObj.originalElement=[],this.actionObj.cloneElement.forEach((function(e){sf.base.isNullOrUndefined(e.parentNode)||sf.base.remove(e)})),this.actionObj.cloneElement=[];var e=this.parent.element.querySelector(".e-clone-time-indicator");e&&sf.base.remove(e)},e.prototype.getCursorElement=function(e){var t=this.getPageCoordinates(e);return document.elementFromPoint(t.clientX,t.clientY)},e.prototype.autoScroll=function(){var e=this.parent.element.querySelector(".e-content-wrap"),t=e.offsetHeight<=e.scrollHeight,i=e.offsetWidth<=e.scrollWidth,a=t&&e.scrollTop>=0&&e.scrollTop+e.offsetHeight<=e.scrollHeight,n=i&&e.scrollLeft>=0&&e.scrollLeft+e.offsetWidth<=e.scrollWidth;a&&(this.scrollEdges.top||this.scrollEdges.bottom)&&(e.scrollTop+=this.scrollEdges.top?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&e.scrollHeight!==e.offsetHeight+e.scrollTop&&e.scrollTop>0&&(this.actionObj.Y+=this.scrollEdges.top?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy)),n&&(this.scrollEdges.left||this.scrollEdges.right)&&(e.scrollLeft+=this.scrollEdges.left?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&e.scrollWidth!==e.offsetWidth+e.scrollLeft&&e.scrollLeft>0&&(this.actionObj.X+=this.scrollEdges.left?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy))},e.prototype.autoScrollValidation=function(e){if(!this.actionObj.scroll.enable)return!1;var t=this.parent.boundaryValidation(this.actionObj.pageY,this.actionObj.pageX);return this.scrollEdges=t,t.bottom||t.top||t.left||t.right},e.prototype.actionClass=function(e){"addClass"===e?sf.base.addClass([this.parent.element],"e-event-action"):sf.base.removeClass([this.parent.element],"e-event-action")},e.prototype.updateScrollPosition=function(e){var t=this;this.actionObj.scroll.enable&&sf.base.isNullOrUndefined(this.actionObj.scrollInterval)&&(this.actionObj.scrollInterval=window.setInterval((function(){if(t.autoScrollValidation(e)&&!t.actionObj.clone.classList.contains("e-all-day-appointment")){if(t.parent.activeView.isTimelineView()&&t.parent.activeViewOptions.group.resources.length>0&&0===t.actionObj.groupIndex)return;t.autoScroll(),"drag"===t.actionObj.action?t.parent.dragAndDropModule.updateDraggingDateTime(e):t.parent.resizeModule.updateResizingDirection(e)}}),this.actionObj.scroll.timeDelay))},e.prototype.updateOriginalElement=function(e){var t='[data-id="'+e.getAttribute("data-id")+'"]';this.parent.activeViewOptions.group.resources.length>0&&(t=t.concat('[data-group-index = "'+e.getAttribute("data-group-index")+'"]')),[].slice.call(this.parent.element.querySelectorAll(t)).forEach((function(e){return sf.base.addClass([e],"e-event-action")})),[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone")).forEach((function(e){return sf.base.removeClass([e],"e-event-action")}))},e.prototype.getUpdatedEvent=function(e,t,i){var a=JSON.parse(JSON.stringify(i));return a[this.parent.eventFields.startTime]=e,a[this.parent.eventFields.endTime]=t,a},e.prototype.dynamicEventsRendering=function(e){var t,i=this,a=this.parent.activeView.renderDates,n=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells")),r=this.parent.activeViewOptions.workDays;if(this.parent.activeViewOptions.group.resources.length>0){var s=this.parent.resourceBase.lastResourceLevel.filter((function(e){return e.groupIndex===i.actionObj.groupIndex}));a=s[0].renderDates,n=[].slice.call(this.parent.element.querySelectorAll('.e-work-cells[data-group-index="'+this.actionObj.groupIndex+'"]')),r=s[0].workDays,t=s[0].groupOrder}this.monthEvent.dateRender=a,this.monthEvent.getSlotDates(r);var o=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));o.length>0&&o.forEach((function(e){return sf.base.remove(e)}));for(var l=0,c=this.monthEvent.splitEvent(e,a);l<c.length;l++){var p=c[l],d=this.parent.getIndexOfDate(a,m(p[this.monthEvent.fields.startTime])),h=p.data.count*this.actionObj.cellWidth-7,u=this.monthEvent.createAppointmentElement(p,this.actionObj.groupIndex,!0);u.setAttribute("drag","true"),sf.base.addClass([u],"e-schedule-event-clone"),this.monthEvent.applyResourceColor(u,p,"backgroundColor",t),sf.base.setStyleAttribute(u,{width:h+"px",border:"0px","pointer-events":"none"});var f=n[d];this.monthEvent.renderElement(f,u,!0),this.actionObj.cloneElement.push(u)}},e.prototype.destroy=function(){this.parent.isDestroyed||(this.actionObj={},this.scrollArgs={},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1})},e}(),mi=(nt=function(e,t){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}nt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),vi=function(e){function t(t){var i=e.call(this,t)||this;return i.renderedEvents=[],i.monthHeaderHeight=0,i.moreIndicatorHeight=19,i.renderType="day",i.element=i.parent.activeView.getPanel(),i.fields=i.parent.eventFields,i.maxHeight=i.parent.eventSettings.enableMaxHeight&&!i.parent.eventSettings.enableIndicator&&!i.parent.rowAutoHeight,i.withIndicator=i.parent.eventSettings.enableMaxHeight&&i.parent.eventSettings.enableIndicator&&!i.parent.rowAutoHeight,i.maxOrIndicator=i.maxHeight||i.withIndicator,i.moreIndicatorHeight=i.parent.rowAutoHeight&&i.parent.eventSettings.ignoreWhitespace?0:i.moreIndicatorHeight,i.addEventListener(),i}return mi(t,e),t.prototype.renderAppointments=function(){var e=this.parent.element.querySelector(".e-content-wrap");this.parent.rowAutoHeight&&(this.parent.uiStateValues.top=e.scrollTop,this.parent.uiStateValues.left=e.scrollLeft);for(var t=0,i=[].slice.call(this.element.querySelectorAll(".e-appointment-wrapper"));t<i.length;t++){var a=i[t];sf.base.remove(a)}if(this.removeHeightProperty("e-content-table"),this.element.querySelector(".e-work-cells")){this.eventHeight=o(this.element,"e-appointment");var n=e.scrollTop;if(this.parent.rowAutoHeight&&this.parent.virtualScrollModule&&!sf.base.isNullOrUndefined(this.parent.currentAction)&&(e.scrollTop=e.scrollTop-1),this.parent.activeViewOptions.group.resources.length>0?this.renderResourceEvents():this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays),this.parent.rowAutoHeight){this.updateBlockElements();var r={cssProperties:this.parent.getCssProperties(),module:this.parent.getModuleName(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};this.parent.virtualScrollModule&&(this.parent.currentAction?(e.scrollTop=n,this.parent.currentAction=null):this.parent.virtualScrollModule.updateVirtualScrollHeight()),this.parent.notify(s,r)}}},t.prototype.renderEventsHandler=function(e,t,i){var a,n;this.renderedEvents=[];var r=0;i?(r=i.groupIndex,this.cssClass=i.cssClass,this.groupOrder=i.groupOrder,a=this.parent.eventBase.filterEventsByResource(i,this.parent.eventsProcessed),n=this.parent.eventBase.filterEventsByResource(i,this.parent.blockProcessed),this.workCells=[].slice.call(this.element.querySelectorAll('.e-work-cells[data-group-index="'+r+'"]'))):(a=this.parent.eventsProcessed,n=this.parent.blockProcessed,this.workCells=[].slice.call(this.element.querySelectorAll(".e-work-cells"))),this.sortByDateTime(a),this.sortByDateTime(n),this.cellWidth=this.workCells.slice(-1)[0].getBoundingClientRect().width,this.cellHeight=this.workCells.slice(-1)[0].offsetHeight,this.dateRender=e;var s=this.getRenderedDates(e);this.getSlotDates(t),this.processBlockEvents(n,r,i);for(var o=0,l=a;o<l.length;o++){var c=l[o];this.parent.resourceBase&&!i&&(this.cssClass=this.parent.resourceBase.getCssClass(c));for(var p=0,d=this.splitEvent(c,s||this.dateRender);p<d.length;p++){var h=d[p];if(this.maxHeight){var u="Month"===this.parent.currentView?h[this.fields.startTime]:this.getStartTime(h,h.data);if(this.getIndex(u)>0)continue}this.updateIndicatorIcon(h),this.renderEvents(h,r,a)}}this.cssClass=null,this.groupOrder=null},t.prototype.processBlockEvents=function(e,t,i){for(var a=0,n=e;a<n.length;a++){var r=n[a];this.parent.resourceBase&&!i&&(this.cssClass=this.parent.resourceBase.getCssClass(r));var s=[];if("day"!==this.renderType||r[this.fields.isAllDay])s.push(r);else{var o,l=sf.base.extend({},r,null,!0),c=this.isSameDate(l[this.fields.startTime],l[this.fields.endTime]);if(l.isBlockIcon=c,!c&&v(l[this.fields.startTime])>0)(o=sf.base.extend({},r,null,!0))[this.fields.endTime]=y(m(new Date(r[this.fields.startTime]+"")),1),o.isBlockIcon=!0,l[this.fields.startTime]=o[this.fields.endTime],s.push(o);if(!(c=this.isSameDate(l[this.fields.startTime],l[this.fields.endTime]))&&v(l[this.fields.endTime])>0)(o=sf.base.extend({},r,null,!0))[this.fields.startTime]=m(new Date(r[this.fields.endTime]+"")),o.isBlockIcon=!0,s.push(o),l[this.fields.endTime]=o[this.fields.startTime];s.push(l)}for(var p=0,d=s;p<d.length;p++)for(var h=d[p],u=0,f=this.splitEvent(h,this.dateRender);u<f.length;u++){var g=f[u];this.renderBlockEvents(g,t,!!h.isBlockIcon)}}},t.prototype.isSameDate=function(e,t){return new Date(+e).setHours(0,0,0,0)===new Date(+t).setHours(0,0,0,0)},t.prototype.renderBlockEvents=function(e,t,i){var a=e.data,n=this.getStartTime(e,a),r=this.getEndTime(e,a),s=this.parent.getIndexOfDate(this.dateRender,m(new Date(n.getTime())));if(!(s<0||n>r)){var o=this.getCellTd(s),l=this.getPosition(n,r,e[this.fields.isAllDay],s);if(i)this.renderBlockIndicator(o,l,t);else{var c=a.count,p=this.getEventWidth(n,r,e[this.fields.isAllDay],c);p=p<=0?this.cellWidth:p;var d=this.parent.enableRtl?0:l,h=this.parent.enableRtl?l:0;this.renderWrapperElement(o);var u=this.cellHeight-this.monthHeaderHeight,f=this.getRowTop(t),v=this.createBlockAppointmentElement(e,t);sf.base.setStyleAttribute(v,{width:p+"px",height:u+"px",left:d+"px",right:h+"px",top:f+"px"}),this.renderEventElement(e,v,o)}}},t.prototype.renderBlockIndicator=function(e,t,i){var a=sf.base.createElement("div",{className:"e-icons e-block-indicator"});sf.base.isNullOrUndefined(e.querySelector(".e-block-indicator"))&&e.appendChild(a)},t.prototype.getStartTime=function(e,t){return e[this.fields.startTime]},t.prototype.getEndTime=function(e,t){return e[this.fields.endTime]},t.prototype.getCellTd=function(e){return this.workCells[e]},t.prototype.getEventWidth=function(e,t,i,a){return a*this.cellWidth-1},t.prototype.getPosition=function(e,t,i,a){return 0},t.prototype.getRowTop=function(e){return 0},t.prototype.updateIndicatorIcon=function(e){if(-1!==this.parent.currentView.indexOf("Timeline")&&"TimelineMonth"!==this.parent.currentView&&!e[this.fields.isAllDay]){var t=e.data,i=w(e[this.fields.startTime],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour()),a=w(e[this.fields.endTime],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour());t.isLeft=t.isLeft||t[this.fields.startTime].getTime()<i.startHour.getTime(),t.isRight=t.isRight||t[this.fields.endTime].getTime()>a.endHour.getTime()}},t.prototype.renderResourceEvents=function(){for(var e=0,t=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.lastResourceLevel;e<t.length;e++){var i=t[e];this.renderEventsHandler(i.renderDates,i.workDays,i)}},t.prototype.getSlotDates=function(e){this.slots=[];for(var t=this.dateRender.map((function(e){return+e})),i=this.parent.activeViewOptions.showWeekend?7:e.length;t.length>0;)this.slots.push(t.splice(0,i))},t.prototype.createAppointmentElement=function(e,t,i){void 0===i&&(i=!1);var a=e[this.fields.subject]||this.parent.eventSettings.fields.subject.default,n=sf.base.createElement("div",{className:"e-appointment",attrs:{"data-id":"Appointment_"+e[this.fields.id],role:"button",tabindex:"0","aria-readonly":this.parent.eventBase.getReadonlyAttribute(e),"aria-selected":"false","aria-grabbed":"true","aria-label":this.parent.getAnnocementString(e.data,a)}});i||n.setAttribute("data-guid",e.Guid),sf.base.isNullOrUndefined(this.cssClass)||sf.base.addClass([n],this.cssClass),e[this.fields.isReadonly]&&sf.base.addClass([n],"e-read-only");var r,s=sf.base.createElement("div",{className:"e-appointment-details"});n.appendChild(s),this.parent.activeViewOptions.group.resources.length>0&&n.setAttribute("data-group-index",t.toString());var o=e.data,l=this.getEventData(e);if(sf.base.isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)){var c=e[this.fields.location]||this.parent.eventSettings.fields.location.default||"",p=sf.base.createElement("div",{className:"e-subject",innerHTML:a+(c?";&nbsp"+c:"")}),d=sf.base.createElement("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:this.parent.getTimeString(o[this.fields.startTime])}),h=sf.base.createElement("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:this.parent.getTimeString(o[this.fields.endTime])});if("Month"===this.parent.currentView)e[this.fields.isAllDay]?(r=[p],sf.base.addClass([p],"e-text-center")):o.count<=1&&!o.isLeft&&!o.isRight?r=[d,p]:(r=[],sf.base.addClass([p],"e-text-center"),o.isLeft||r.push(d),r.push(p),o.isRight||r.push(h));else{var u=void 0;if(e[this.fields.isAllDay]){u=[p,sf.base.createElement("div",{className:"e-time",innerHTML:this.parent.localeObj.getConstant("allDay")})]}else{var f=this.parent.getTimeString(o[this.fields.startTime])+" - "+this.parent.getTimeString(o[this.fields.endTime]);u=[p,sf.base.createElement("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:f}),sf.base.createElement("div",{className:"e-location",innerHTML:c})]}var m=sf.base.createElement("div",{className:"e-inner-wrap"});sf.base.append(u,m),r=[m]}}else{var v=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",g=R(l,this.parent.eventFields);r=this.parent.getAppointmentTemplate()(g,this.parent,"eventTemplate",v,!1)}return sf.base.append(r,s),this.appendEventIcons(e,s),this.renderResizeHandler(n,e.data,e[this.fields.isReadonly]),n},t.prototype.appendEventIcons=function(e,t){var i=e.data;if(!sf.base.isNullOrUndefined(e[this.fields.recurrenceRule])||!sf.base.isNullOrUndefined(e[this.fields.recurrenceID])){var a=e[this.fields.id]===e[this.fields.recurrenceID]?"e-recurrence-icon":"e-recurrence-edit-icon";t.appendChild(sf.base.createElement("div",{className:j+" "+a+(this.parent.isAdaptive?" e-disable":"")}))}if(i.isLeft){var n=sf.base.createElement("div",{className:"e-indicator "+j+" e-left-icon"});sf.base.prepend([n],t)}if(i.isRight){var r=sf.base.createElement("div",{className:"e-indicator "+j+" e-right-icon"});sf.base.append([r],t)}},t.prototype.renderEvents=function(e,t,i){var a=e[this.fields.startTime],n=e[this.fields.endTime],r=this.parent.getIndexOfDate(this.dateRender,m(a));if(!(r<0||a.getTime()<this.parent.minDate.getTime()||n.getTime()>this.parent.maxDate.getTime())){var s=this.getIndex(a);e.Index=s;var o=this.eventHeight;this.renderedEvents.push(sf.base.extend({},e,null,!0));var l=e.data.count;if(a.getTime()<=n.getTime()){var c=l*this.cellWidth-5,p=this.workCells[r],d=s*(o+0);this.renderWrapperElement(p);var h=this.monthHeaderHeight+(s+1)*(o+0)+this.moreIndicatorHeight,u=this.maxOrIndicator?s<1:this.cellHeight>h;if(this.parent.rowAutoHeight||u){var f=this.createAppointmentElement(e,t);if(this.applyResourceColor(f,e,"backgroundColor",this.groupOrder),this.wireAppointmentEvents(f,e),sf.base.setStyleAttribute(f,{width:c+"px",top:d+"px"}),this.renderEventElement(e,f,p),this.parent.rowAutoHeight){var v=p.parentElement.firstElementChild;this.updateCellHeight(v,h)}}else for(var g=0;g<l;g++){var b=this.workCells[r+g];if(b&&sf.base.isNullOrUndefined(b.querySelector(".e-more-indicator"))){var T=new Date(this.dateRender[r+g].getTime()),w=y(this.dateRender[r+g],1),D=b.getAttribute("data-group-index"),C=this.getFilteredEvents(T,w,D),E=this.cellHeight-this.monthHeaderHeight-this.moreIndicatorHeight;o=this.withIndicator?E:o;var O=Math.floor(E/(o+0)),S=C.length-O<=0?1:C.length-O,x=this.getMoreIndicatorElement(S,T,w);sf.base.isNullOrUndefined(D)||x.setAttribute("data-group-index",D),x.style.top=E+"px",x.style.width=b.offsetWidth-2+"px",this.renderElement(b,x),sf.base.EventHandler.add(x,"click",this.moreIndicatorClick,this)}}}}},t.prototype.updateCellHeight=function(e,t){t>e.offsetHeight&&sf.base.setStyleAttribute(e,{height:t+"px"})},t.prototype.updateBlockElements=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-block-appointment"));e<t.length;e++){var i=t[e],a=sf.base.closest(i,"tr");this.monthHeaderHeight=i.offsetParent.offsetTop-a.offsetTop,i.style.height=a.offsetHeight-1-this.monthHeaderHeight+"px";var n=a.firstElementChild,r=Math.round(i.offsetWidth/n.offsetWidth);i.style.width=n.offsetWidth*r+"px"}},t.prototype.getFilteredEvents=function(e,t,i,a){var n;if(sf.base.isNullOrUndefined(i))n=this.filterEvents(e,t);else{var r=this.parent.resourceBase.lastResourceLevel[parseInt(i,10)];n=this.filterEvents(e,t,sf.base.isNullOrUndefined(a)?void 0:a,r)}return n},t.prototype.getOverlapEvents=function(e,t){for(var i=[],a=0,n=t;a<n.length;a++){var r=n[a];m(r[this.fields.startTime]).getTime()<=m(e).getTime()&&m(r[this.fields.endTime]).getTime()>=m(e).getTime()&&i.push(r)}return i},t.prototype.getIndex=function(e){var t=-1,i=this.renderedEvents;if(i.length>0){var a=this.getOverlapEvents(e,i).map((function(e){return e.Index}));t=a.length>0?this.getSmallestMissingNumber(a):0}return-1===t?0:t},t.prototype.moreIndicatorClick=function(e){var t=this,i=sf.base.closest(e.target,".e-more-indicator"),a=new Date(parseInt(i.getAttribute("data-start-date"),10)),n=new Date(parseInt(i.getAttribute("data-end-date"),10)),r=i.getAttribute("data-group-index"),s={cancel:!1,event:e,element:i,isPopupOpen:!0,startTime:a,endTime:n,viewName:this.parent.getNavigateView()};r&&(s.groupIndex=parseInt(r,10)),this.parent.trigger("moreEventsClick",s,(function(i){if(sf.base.isBlazor()&&(i.startTime=new Date(""+i.startTime),i.endTime=new Date(""+i.endTime),i.element=sf.base.getElement(i.element)),!i.cancel)if(i.isPopupOpen){var s=t.getFilteredEvents(a,n,r),o={date:a,event:s,element:e.target};t.parent.quickPopup.moreEventClick(o,n,r)}else t.parent.setScheduleProperties({selectedDate:a}),t.parent.changeView(i.viewName,e)}))},t.prototype.renderEventElement=function(e,t,i){var a=this,n=t.classList.contains("e-block-appointment")?"blockEvent":"event",r=t.classList.contains("e-appointment"),s={data:this.getEventData(e),element:t,cancel:!1,type:n};this.parent.trigger("eventRendered",s,(function(e){e.cancel?a.renderedEvents.pop():a.renderElement(i,t,r)}))},t.prototype.getEventData=function(e){var t=sf.base.extend({},e,null,!0);return t[this.fields.startTime]=e.data[this.fields.startTime],t[this.fields.endTime]=e.data[this.fields.endTime],t},t.prototype.renderElement=function(e,t,i){if(void 0===i&&(i=!1),this.maxOrIndicator&&i&&this.setMaxEventHeight(t,e),e.querySelector(".e-appointment-wrapper"))e.querySelector(".e-appointment-wrapper").appendChild(t);else{var a=sf.base.createElement("div",{className:"e-appointment-wrapper"});a.appendChild(t),e.appendChild(a)}},t.prototype.renderWrapperElement=function(e){var t=e.querySelector(".e-appointment-wrapper");if(sf.base.isNullOrUndefined(t)){var i=sf.base.createElement("div",{className:"e-appointment-wrapper"});e.appendChild(i),this.monthHeaderHeight=i.offsetTop-e.offsetTop}else this.monthHeaderHeight=t.offsetTop-e.offsetTop},t.prototype.getMoreIndicatorElement=function(e,t,i){return sf.base.createElement("div",{className:"e-more-indicator",innerHTML:"+"+e+"&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more")),attrs:{tabindex:"0","data-start-date":t.getTime().toString(),"data-end-date":i.getTime().toString(),role:"list"}})},t.prototype.removeHeightProperty=function(e){for(var t=0,i=[].slice.call(this.element.querySelectorAll("."+e+" tbody tr"));t<i.length;t++){i[t].firstElementChild.style.height=""}},t.prototype.setMaxEventHeight=function(e,t){var i=k(t.querySelector(".e-date-header")),a=t.offsetHeight-i-(this.maxHeight?0:this.moreIndicatorHeight);sf.base.setStyleAttribute(e,{height:a+"px","align-items":"center"})},t}(pt),gi=(rt=function(e,t){return(rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}rt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),yi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gi(t,e),t.prototype.wireResizeEvent=function(e){var t=this;[].slice.call(e.querySelectorAll(".e-event-resize")).forEach((function(e){return sf.base.EventHandler.add(e,sf.base.Browser.touchStartEvent,t.resizeStart,t)}))},t.prototype.resizeHelper=function(){var e=this;this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit?this.actionObj.originalElement.forEach((function(t,i){var a=e.createCloneElement(t);e.actionObj.cloneElement[i]=a,e.actionObj.element===t&&(e.actionObj.clone=a)})):(this.actionObj.clone=this.createCloneElement(this.actionObj.element),this.actionObj.cloneElement=[this.actionObj.clone],this.actionObj.originalElement=[this.actionObj.element])},t.prototype.resizeStart=function(e){var t=this;this.actionObj.action="resize",this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var i=sf.base.closest(e.target,".e-event-resize");this.actionObj.element=sf.base.closest(i,".e-appointment"),this.actionObj.event=this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute("data-guid"));var a=sf.base.extend({},this.actionObj.event,null,!0),n={cancel:!1,data:a,element:this.actionObj.element,event:e,interval:this.actionObj.interval,scroll:{enable:!0,scrollBy:30,timeDelay:100}};this.parent.trigger("resizeStart",n,(function(n){if(!n.cancel){sf.base.isBlazor()&&(n.element&&(n.element=sf.base.getElement(n.element)),n.data[t.parent.eventFields.startTime]=t.parent.getDateTime(n.data[t.parent.eventFields.startTime]),n.data[t.parent.eventFields.endTime]=t.parent.getDateTime(n.data[t.parent.eventFields.endTime])),t.actionClass("addClass"),t.parent.uiStateValues.action=!0,t.resizeEdges={left:i.classList.contains("e-left-handler"),right:i.classList.contains("e-right-handler"),top:i.classList.contains("e-top-handler"),bottom:i.classList.contains("e-bottom-handler")},t.actionObj.groupIndex=t.parent.uiStateValues.isGroupAdaptive?t.parent.uiStateValues.groupIndex:0;var r=t.parent.element.querySelector(".e-work-cells");t.actionObj.cellWidth=r.offsetWidth,t.actionObj.cellHeight=r.offsetHeight;var s=t.parent.activeViewOptions.headerRows.map((function(e){return e.option}));if(t.parent.activeView.isTimelineView()&&s.length>0&&["Date","Hour"].indexOf(s.slice(-1)[0])<0){var o=t.parent.getContentTable().querySelector("tr"),l=0;[].slice.call(o.children).forEach((function(e){return l+=parseInt(e.getAttribute("colspan"),10)})),t.actionObj.cellWidth=o.offsetWidth/l,t.actionObj.cellHeight=o.offsetHeight}var c=t.getPageCoordinates(e);t.actionObj.X=c.pageX,t.actionObj.Y=c.pageY,t.actionObj.groupIndex=parseInt(t.actionObj.element.getAttribute("data-group-index")||"0",10),t.actionObj.interval=n.interval,t.actionObj.scroll=n.scroll,t.actionObj.start=new Date(a[t.parent.eventFields.startTime].getTime()),t.actionObj.end=new Date(a[t.parent.eventFields.endTime].getTime()),t.actionObj.originalElement=t.getOriginalElement(t.actionObj.element),"Month"===t.parent.currentView&&(t.daysVariation=-1,t.monthEvent=new vi(t.parent));var p=t.parent.element.querySelector(".e-content-wrap");t.scrollArgs={element:p,width:p.scrollWidth,height:p.scrollHeight},sf.base.EventHandler.add(document,sf.base.Browser.touchMoveEvent,t.resizing,t),sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,t.resizeStop,t)}}))},t.prototype.resizing=function(e){if(this.parent.quickPopup.quickPopupHide(),0===this.parent.element.querySelectorAll(".e-resize-clone").length&&this.resizeHelper(),sf.base.isNullOrUndefined(e.target)||!e.target.classList.contains("e-disable-dates")){var t=this.getPageCoordinates(e);this.actionObj.pageX=t.pageX,this.actionObj.pageY=t.pageY,this.updateScrollPosition(e),this.updateResizingDirection(e);var i={cancel:!1,data:sf.base.extend({},this.actionObj.event,null,!0),element:this.actionObj.element,event:e,startTime:this.actionObj.start,endTime:this.actionObj.end};this.parent.group.resources.length>0&&(i.groupIndex=this.actionObj.groupIndex),this.parent.trigger("resizing",i)}},t.prototype.updateResizingDirection=function(e){if("Month"!==this.parent.currentView){var t=this.resizeValidation(e);if(this.resizeEdges.left){if(t)for(var i=this.getLeftRightStyles(e,!0),a=0,n=this.actionObj.cloneElement;a<n.length;a++){var r=n[a];sf.base.setStyleAttribute(r,i),sf.base.addClass([r],"e-left-handler")}this.horizontalResizing(!this.parent.enableRtl)}if(this.resizeEdges.right){if(t)for(var s=this.getLeftRightStyles(e,!1),o=0,l=this.actionObj.cloneElement;o<l.length;o++){r=l[o];sf.base.setStyleAttribute(r,s),sf.base.addClass([r],"e-right-handler")}this.horizontalResizing(this.parent.enableRtl)}if(this.resizeEdges.top){if(t)for(var c=this.getTopBottomStyles(e,!0),p=0,d=this.actionObj.cloneElement;p<d.length;p++){r=d[p];sf.base.setStyleAttribute(r,c),sf.base.addClass([r],"e-top-handler")}this.verticalResizing(!0)}if(this.resizeEdges.bottom){if(t)for(var h=this.getTopBottomStyles(e,!1),u=0,f=this.actionObj.cloneElement;u<f.length;u++){r=f[u];sf.base.setStyleAttribute(r,h),sf.base.addClass([r],"e-bottom-handler")}this.verticalResizing(!1)}}else this.monthResizing()},t.prototype.monthResizing=function(){this.removeCloneElement();var e=document.elementFromPoint(this.actionObj.pageX,this.actionObj.pageY);if(!sf.base.isNullOrUndefined(e)){var t=this.parent.getDateFromElement(e),i=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(e.getAttribute("data-group-index"),10)===this.actionObj.groupIndex,a=new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime()),n=new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());if(!this.parent.enableRtl&&this.resizeEdges.left||this.parent.enableRtl&&this.resizeEdges.right?a=t:(!this.parent.enableRtl&&this.resizeEdges.right||this.parent.enableRtl&&this.resizeEdges.left)&&(n=y(t,1)),i&&a<n){this.actionObj.start=a,this.actionObj.end=n;var r=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);this.dynamicEventsRendering(r),this.updateOriginalElement(this.actionObj.clone)}}},t.prototype.resizeStop=function(e){var t=this;sf.base.EventHandler.remove(document,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeStop),clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.removeCloneElementClasses(),this.removeCloneElement(),this.actionClass("removeClass"),this.parent.uiStateValues.action=!1;var i={cancel:!1,data:this.getChangedData(),element:this.actionObj.element,event:e};this.parent.trigger("resizeStop",i,(function(e){e.cancel||t.saveChangedData(e)}))},t.prototype.verticalResizing=function(e){var t=this.actionObj.clone.offsetTop;e||(t+=this.actionObj.clone.offsetHeight);var i=t/this.actionObj.cellHeight*this.actionObj.slotInterval,a=this.actionObj.clone.offsetParent;if(!sf.base.isNullOrUndefined(a)){var n=m(this.parent.getDateFromElement(a));n.setHours(this.parent.activeView.getStartHour().getHours()),n.setMinutes(i+this.parent.activeView.getStartHour().getMinutes()),e?this.actionObj.start=this.calculateIntervalTime(n):this.actionObj.end=this.calculateIntervalTime(n),this.updateTimePosition(n)}},t.prototype.horizontalResizing=function(e){var t,i=new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime()),a=new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());if(this.parent.activeView.isTimelineView()){var n=this.parent.getContentTable().querySelector("tr"),r=this.parent.currentView;if(this.parent.activeViewOptions.headerRows.length>0){var s=this.parent.activeViewOptions.headerRows.map((function(e){return e.option}));r=s.slice(-1)[0],"TimelineMonth"===this.parent.currentView&&"Hour"===r&&(r=s.slice(-2)[0]||"Month")}t=e?i:a;var o=0,l=[].slice.call(n.children),c=!1;if(-1!==["Year","Month","Week","Date"].indexOf(r)){var p=0;l.forEach((function(e){return p+=parseInt(e.getAttribute("colspan"),10)}));var d=this.parent.enableRtl?parseInt(this.actionObj.clone.style.right,10):parseInt(this.actionObj.clone.style.left,10);e||(d+=this.actionObj.clone.offsetWidth-this.actionObj.cellWidth),o=Math.floor(d/Math.floor(n.offsetWidth/p)),c=(o=e?o:"TimelineMonth"===this.parent.currentView?o+1:o)===l.length,o=o<0?0:o>=p?p-1:o}else{var h="TimelineMonth"!==this.parent.currentView&&this.parent.activeViewOptions.timeScale.enable?this.actionObj.cellWidth-this.actionObj.interval*(this.actionObj.cellWidth/this.actionObj.slotInterval):this.actionObj.cellWidth;if(o=e?Math.floor(this.actionObj.clone.offsetLeft/this.actionObj.cellWidth):Math.ceil((this.actionObj.clone.offsetLeft+(this.actionObj.clone.offsetWidth-h))/this.actionObj.cellWidth),this.parent.enableRtl){var u=0;("TimelineMonth"===r||!this.parent.activeViewOptions.timeScale.enable&&"TimelineMonth"!==this.parent.currentView)&&(u=this.actionObj.cellWidth);var f=Math.floor(parseInt(this.actionObj.clone.style.right,10)/this.actionObj.cellWidth)*this.actionObj.cellWidth+(e?0:this.actionObj.clone.offsetWidth-u);o=Math.floor(f/this.actionObj.cellWidth)}c=o===l.length,o=this.getIndex(o)}var m=void 0;if(m=-1!==["Year","Month","Week","Date"].indexOf(r)?new Date(this.parent.activeView.renderDates[o].getTime()):this.parent.getDateFromElement(n.children[o]),-1===["TimelineMonth","Year","Month","Week","Date"].indexOf(r)&&this.parent.activeViewOptions.timeScale.enable){d=this.parent.enableRtl?parseFloat(this.actionObj.clone.style.right):parseFloat(this.actionObj.clone.style.left);e||(d+=this.actionObj.clone.offsetWidth);var v=Math.ceil(this.actionObj.slotInterval/this.actionObj.cellWidth*(d-Math.floor(d/this.actionObj.cellWidth)*this.actionObj.cellWidth));v=c?this.actionObj.slotInterval:v,(t=new Date(m.getTime())).setMinutes(t.getMinutes()+v),this.updateTimePosition(t)}else t=new Date(m.setHours(t.getHours(),t.getMinutes(),t.getSeconds()))}else{var g=sf.base.closest(this.actionObj.clone,"td").cellIndex,b=Math.ceil((e?this.actionObj.element.offsetWidth:0)/this.actionObj.cellWidth)*this.actionObj.cellWidth,T=Math.ceil((this.actionObj.clone.offsetWidth-b)/this.actionObj.cellWidth),w=(n=sf.base.closest(this.actionObj.clone,"tr"),e?g-T:g+T-1);w=this.getIndex(w),t=this.parent.getDateFromElement(n.children[w]),e?t.setHours(i.getHours(),i.getMinutes(),i.getSeconds()):t.setHours(a.getHours(),a.getMinutes(),a.getSeconds())}if(e)this.actionObj.start=this.parent.activeViewOptions.timeScale.enable?this.calculateIntervalTime(t):t;else{var D=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.currentView)>-1&&this.parent.activeViewOptions.timeScale.enable||0!==t.getHours()||0!==t.getMinutes()?t:y(t,1);this.actionObj.end=this.parent.activeViewOptions.timeScale.enable&&"Month"!==this.parent.currentView?this.calculateIntervalTime(D):D}},t.prototype.getTopBottomStyles=function(e,t){var i=this.parent.element.querySelector(".e-content-wrap"),a=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,n=t?this.actionObj.element.offsetHeight+(this.actionObj.Y-this.actionObj.pageY):this.actionObj.element.offsetHeight+(this.actionObj.pageY-this.actionObj.Y),r=t?this.actionObj.element.offsetTop-(this.actionObj.Y-this.actionObj.pageY):this.actionObj.clone.offsetTop;return n=r<0||this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight>this.scrollArgs.height?this.actionObj.clone.offsetHeight:n,r=r<0?0:r,n=(r=Math.floor(r/a)*a)+n>=i.scrollHeight?i.scrollHeight-r:Math.ceil(n/a)*a,{height:sf.base.formatUnit(n<this.actionObj.cellHeight?this.actionObj.cellHeight:n),top:sf.base.formatUnit(n<this.actionObj.cellHeight&&t?this.actionObj.clone.offsetTop:r),left:"0px",right:"0px",width:"100%"}},t.prototype.getLeftRightStyles=function(e,t){var i={},a=this.parent.activeView.isTimelineView(),n=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.currentView)>-1&&this.parent.activeViewOptions.timeScale.enable,r=this.actionObj.cellWidth/this.actionObj.slotInterval*this.actionObj.interval,s=t?this.actionObj.X-this.actionObj.pageX:this.actionObj.pageX-this.actionObj.X,o=a?this.actionObj.element.offsetWidth/this.actionObj.cellWidth*this.actionObj.cellWidth:"Month"===this.parent.currentView?this.actionObj.element.offsetWidth:Math.ceil(this.actionObj.element.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth,l=o+Math.ceil(s/this.actionObj.cellWidth)*this.actionObj.cellWidth,c=this.parent.enableRtl?parseInt(this.actionObj.element.style.right,10):this.actionObj.clone.offsetLeft;n&&(l=o+Math.ceil(s/r)*r,l=Math.ceil((c+l)/r)*r-c,this.actionObj.event[this.parent.eventFields.isAllDay]=!1);var p=!t&&l+this.actionObj.clone.offsetLeft>this.scrollArgs.width?this.actionObj.clone.offsetWidth:l<this.actionObj.cellWidth?this.actionObj.cellWidth:l;if(this.parent.enableRtl){var d=a?parseInt(this.actionObj.element.style.right,10):-(l-this.actionObj.cellWidth);d=a?d:t||d>0?0:d,a&&!t&&(d=(d=Math.ceil((this.actionObj.element.offsetLeft+(this.actionObj.element.offsetWidth+(this.actionObj.pageX-this.actionObj.X)))/r)*r)<0?Math.abs(d):-d),d=d>=this.scrollArgs.width?this.scrollArgs.width-this.actionObj.cellWidth:d,i.right=sf.base.formatUnit(d),p=p+d>this.scrollArgs.width?this.actionObj.clone.offsetWidth:p}else{var h=t?this.actionObj.element.offsetLeft-(this.actionObj.X-this.actionObj.pageX):this.parent.enableRtl?this.actionObj.element.offsetLeft:0;a&&(h=t?h:parseInt(this.actionObj.clone.style.left,10),h=this.parent.enableRtl?t?h:this.actionObj.pageX<this.actionObj.X-this.actionObj.clone.offsetWidth?parseInt(this.actionObj.clone.style.right,10):h:t&&this.actionObj.pageX>this.actionObj.X+this.actionObj.clone.offsetWidth&&this.actionObj.clone.offsetWidth===this.actionObj.cellWidth?parseInt(this.actionObj.clone.style.left,10):h);var u=h;(h=a?n?t?Math.floor(h/r)*r:h:Math.floor(h/this.actionObj.cellWidth)*this.actionObj.cellWidth:Math.ceil(Math.abs(h)/this.actionObj.cellWidth)*this.actionObj.cellWidth)<0&&(h=0,p=this.actionObj.clone.offsetWidth);var f=Math.ceil(this.actionObj.clone.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth;t&&(i.left=sf.base.formatUnit(a?h:t?u<0?-h:Math.ceil((o-f)/this.actionObj.cellWidth)*this.actionObj.cellWidth:h))}return i.width=sf.base.formatUnit(p),i},t.prototype.resizeValidation=function(e){var t=this.getPageCoordinates(e),i=this.getContentAreaDimension(),a=!1;return this.resizeEdges.left&&(a=t.pageX-this.actionObj.cellWidth>=i.left),this.resizeEdges.right&&(a=t.pageX+this.actionObj.cellWidth<=i.right),this.resizeEdges.top&&(a=this.actionObj.clone.offsetTop>=i.top),this.resizeEdges.bottom&&(a=this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight<=this.scrollArgs.height),a},t.prototype.getModuleName=function(){return"resize"},t}(fi),bi=(st=function(e,t){return(st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}st(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ti=function(e){function t(t,i){var a=e.call(this,t)||this;return a.startHour=a.parent.activeView.getStartHour(),a.endHour=a.parent.activeView.getEndHour(),a.slotCount=a.parent.activeViewOptions.timeScale.slotCount,a.interval=a.parent.activeViewOptions.timeScale.interval,a.day=0,a.rowIndex=0,a.renderType=i,a.appContainers=[].slice.call(a.element.querySelectorAll(".e-appointment-container")),a.dayLength=0===a.element.querySelectorAll(".e-content-table tbody tr").length?0:a.element.querySelectorAll(".e-content-table tbody tr")[0].children.length,a.content=a.parent.element.querySelector(".e-content-table"),a}return bi(t,e),t.prototype.getSlotDates=function(){this.slots=[],this.slots.push(this.parent.activeView.renderDates.map((function(e){return+e}))),this.parent.headerRows.length>0&&"Hour"!==this.parent.headerRows[this.parent.headerRows.length-1].option?(this.renderType="day",this.cellWidth=this.content.offsetWidth/this.dateRender.length,this.slotsPerDay=1):this.slotsPerDay=this.dayLength/this.dateRender.length},t.prototype.getOverlapEvents=function(e,t){var i=[];if("day"===this.renderType)for(var a=0,n=t;a<n.length;a++){m((o=n[a])[this.fields.startTime]).getTime()<=m(new Date(e.getTime())).getTime()&&m(o[this.fields.endTime]).getTime()>=m(new Date(e.getTime())).getTime()&&i.push(o)}else for(var r=0,s=t;r<s.length;r++){var o,l=(o=s[r]).data;l.trimStartTime.getTime()<=e.getTime()&&l.trimEndTime.getTime()>e.getTime()&&i.push(o)}return i},t.prototype.renderResourceEvents=function(){this.removeHeightProperty("e-resource-column-table");for(var e=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.renderedResources,t=0;t<e.length;t++)this.rowIndex=t,this.renderEventsHandler(this.parent.activeView.renderDates,this.parent.activeViewOptions.workDays,e[t])},t.prototype.renderEvents=function(e,t,i){var a=e[this.fields.startTime],n=e[this.fields.endTime];if(!(a.getTime()<this.parent.minDate.getTime()||n.getTime()>this.parent.maxDate.getTime())){var r=e.data;if(a=this.getStartTime(e,r),n=this.getEndTime(e,r),this.day=this.parent.getIndexOfDate(this.dateRender,m(new Date(a.getTime()))),!(this.day<0)){var s=this.getCellTd(),o=this.getIndex(a);e.Index=o;var l=this.eventHeight,c=r.count,p=sf.base.extend({},e,null,!0);p[this.fields.startTime]=r[this.fields.startTime],p[this.fields.endTime]=r[this.fields.endTime];var d=w(m(new Date(this.dateRender[this.day].getTime())),this.startHour,this.endHour),h=this.isValidEvent(p,a,n,d);if(a<=n&&h){var u=this.getEventWidth(a,n,e[this.fields.isAllDay],c);u="day"===this.renderType?u-2:u;var f,v,g=this.getPosition(a,n,e[this.fields.isAllDay],this.day);u=u<=0?this.cellWidth:u,this.renderedEvents.push(sf.base.extend({},e,null,!0));var b=this.getRowTop(t),T=b+2+o*(l+2);f=this.parent.enableRtl?0:g,v=this.parent.enableRtl?g:0;var D=(o+1)*(l+2)+this.moreIndicatorHeight,C=this.maxOrIndicator?o<1:this.cellHeight>D;if(this.parent.rowAutoHeight||C){var E=this.createAppointmentElement(e,t);if(this.applyResourceColor(E,e,"backgroundColor",this.groupOrder),sf.base.setStyleAttribute(E,{width:u+"px",left:f+"px",right:v+"px",top:T+"px"}),this.wireAppointmentEvents(E,e),this.renderEventElement(e,E,s),this.parent.rowAutoHeight){var O=this.getFirstChild(t);this.updateCellHeight(O,D)}}else for(var S=0;S<c;S++){var x=s.querySelector(".e-more-indicator"),k=this.parent.enableRtl?v:f;if(k=Math.floor(k/this.cellWidth)*this.cellWidth,s&&sf.base.isNullOrUndefined(x)||!this.isAlreadyAvail(k,s)){var A=this.interval/this.slotCount,V=new Date(this.dateRender[this.day+S].getTime()),M=y(this.dateRender[this.day+S],1),R=new Date(+a),P=new Date(R.setMinutes(Math.floor(R.getMinutes()/A)*A)),H=new Date(P.getTime()+6e4*A),j=void 0;this.parent.activeViewOptions.group.resources.length>0&&!sf.base.isNullOrUndefined(t)&&(j=t.toString());var I=this.getFilterEvents(V,M,P,H,j,i),L=this.cellHeight-this.moreIndicatorHeight;l=this.withIndicator?L-2:l;var q=Math.floor(L/(l+2)),B=I.length-q<=0?1:I.length-q,N=void 0;N="day"===this.renderType?this.getMoreIndicatorElement(B,V,M):this.getMoreIndicatorElement(B,P,H),sf.base.isNullOrUndefined(j)||N.setAttribute("data-group-index",j),N.style.top=b+L+"px",N.style.width=this.cellWidth+"px",N.style.left=Math.floor(f/this.cellWidth)*this.cellWidth+"px",N.style.right=Math.floor(v/this.cellWidth)*this.cellWidth+"px",this.renderElement(s,N),sf.base.EventHandler.add(N,"click",this.moreIndicatorClick,this)}}}}}},t.prototype.updateCellHeight=function(e,t){if(t>e.offsetHeight){if(sf.base.setStyleAttribute(e,{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0){var i=this.parent.element.querySelector('.e-resource-column-table tbody td[data-group-index="'+e.getAttribute("data-group-index")+'"]');i&&sf.base.setStyleAttribute(i,{height:t+"px"})}var a=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(e.parentElement.rowIndex+1)+") td");a&&sf.base.setStyleAttribute(a,{height:t+"px"})}},t.prototype.getFirstChild=function(e){var t="";return this.parent.activeViewOptions.group.resources.length>0&&(t='[data-group-index="'+e.toString()+'"]'),this.parent.element.querySelector(".e-content-table tbody td"+t)},t.prototype.updateBlockElements=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-block-appointment"));e<t.length;e++){var i=t[e],a=parseInt(i.getAttribute("data-group-index"),10),n=this.getFirstChild(a);i.style.height=n.offsetHeight+"px";var r=Math.round(i.offsetWidth/n.offsetWidth);i.style.width=n.offsetWidth*r+"px"}for(var s=0,o=[].slice.call(this.element.querySelectorAll(".e-block-indicator"));s<o.length;s++){i=o[s],a=parseInt(i.getAttribute("data-group-index"),10);i.style.top=this.getRowTop(a)+this.getFirstChild(a).offsetHeight-18+"px"}},t.prototype.getStartTime=function(e,t){var i=e[this.fields.startTime],a=w(i,this.startHour,this.endHour);return i=a.startHour.getTime()>=t[this.fields.startTime]?a.startHour:a.endHour.getTime()<=t[this.fields.startTime]?this.getNextDay(a.startHour,t):t[this.fields.startTime],t.trimStartTime=e[this.fields.isAllDay]?a.startHour:t[this.fields.startTime],i},t.prototype.getNextDay=function(e,t){for(var i,a=1;a<=this.dateRender.length;a++)if(i=y(e,a),-1!==this.parent.getIndexOfDate(this.dateRender,m(new Date(e.getTime()))))return t.count=t.count-1,i;return i},t.prototype.getEndTime=function(e,t){var i=e[this.fields.endTime],a=w(i,this.startHour,this.endHour);return i=a.endHour.getTime()<=t[this.fields.endTime]?a.endHour:t[this.fields.endTime],t.trimEndTime=e[this.fields.isAllDay]?a.endHour:t[this.fields.endTime],i},t.prototype.getEventWidth=function(e,t,i,a){return"day"===this.renderType||i?a*this.slotsPerDay*this.cellWidth:this.isSameDay(e,t)?this.getSameDayEventsWidth(e,t):this.getSpannedEventsWidth(e,t,a)},t.prototype.getSameDayEventsWidth=function(e,t){return(t.getTime()-e.getTime())/6e4*(this.cellWidth*this.slotCount)/this.interval},t.prototype.getSpannedEventsWidth=function(e,t,i){var a,n,r=i*this.slotsPerDay*this.cellWidth,s=w(m(new Date(e.getTime())),this.startHour,this.endHour);if(a=this.getSameDayEventsWidth(s.startHour,e),-1===this.parent.getIndexOfDate(this.dateRender,m(new Date(t.getTime()))))n=0;else{var o=w(m(new Date(t.getTime())),this.startHour,this.endHour);n=this.getSameDayEventsWidth(t,o.endHour),n=this.slotsPerDay*this.cellWidth===n?0:n}var l=a+n;return r>l?r-l:n-a},t.prototype.isSameDay=function(e,t){return this.parent.getIndexOfDate(this.dateRender,m(new Date(e.getTime())))===this.parent.getIndexOfDate(this.dateRender,m(new Date(t.getTime())))},t.prototype.getAppointmentLeft=function(e,t,i){var a=this.isSameDay(t,e.startHour)?(t.getTime()-e.startHour.getTime())/(6e4*this.interval)*this.slotCount:0;return 0===i?a:Math.round((e.endHour.getTime()-e.startHour.getTime())/6e4/this.interval*this.slotCount)*i+a},t.prototype.getPosition=function(e,t,i,a){if("day"===this.renderType||i)return a*this.slotsPerDay*this.cellWidth;var n=w(m(new Date(this.dateRender[a].getTime())),this.startHour,this.endHour);return(n.endHour.getTime()<=t.getTime()&&n.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(n,n.startHour,a):n.endHour.getTime()<=t.getTime()?this.getAppointmentLeft(n,e,a):n.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(n,n.startHour,a):this.getAppointmentLeft(n,e,a))*this.cellWidth},t.prototype.getFilterEvents=function(e,t,i,a,n,r){return"day"===this.renderType?this.getFilteredEvents(e,t,n,r):this.getFilteredEvents(i,a,n,r)},t.prototype.isAlreadyAvail=function(e,t){for(var i=[].slice.call(t.querySelectorAll(".e-more-indicator")),a=0;a<i.length;a++){var n=void 0;if(i&&(n=this.parent.enableRtl?i[a].style.right:i[a].style.left),parseInt(n,10)===Math.floor(e))return!0}return!1},t.prototype.getRowTop=function(e){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.element.querySelector('.e-content-wrap tbody td[data-group-index="'+e.toString()+'"]').offsetTop:0},t.prototype.getCellTd=function(){var e=this.parent.uiStateValues.isGroupAdaptive?0:this.rowIndex;return this.appContainers[e]},t.prototype.renderBlockIndicator=function(e,t,i){if(!(this.parent.headerRows.length>0&&("Hour"!==this.parent.headerRows[this.parent.headerRows.length-1].option||"Date"!==this.parent.headerRows[this.parent.headerRows.length-1].option)||(t=Math.floor(t/this.cellWidth)*this.cellWidth+this.cellWidth-22,this.isAlreadyAvail(t,e)))){var a=sf.base.createElement("div",{className:"e-icons e-block-indicator"});this.parent.activeViewOptions.group.resources.length>0&&a.setAttribute("data-group-index",i.toString()),this.parent.enableRtl?a.style.right=t+"px":a.style.left=t+"px",a.style.top=this.getRowTop(i)+this.cellHeight-18+"px",this.renderElement(e,a)}},t.prototype.setMaxEventHeight=function(e,t){sf.base.setStyleAttribute(e,{height:this.cellHeight-2-(this.maxHeight?0:this.moreIndicatorHeight)+"px"})},t}(vi),wi=(ot=function(e,t){return(ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ot(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Di=function(e){function t(t){var i=e.call(this,t)||this;return i.dateRender=[],i.renderedEvents=[],i.renderedAllDayEvents=[],i.overlapEvents=[],i.moreEvents=[],i.overlapList=[],i.allDayEvents=[],i.slotCount=i.parent.activeViewOptions.timeScale.slotCount,i.interval=i.parent.activeViewOptions.timeScale.interval,i.allDayLevel=0,i.startHour=i.parent.activeView.getStartHour(),i.endHour=i.parent.activeView.getEndHour(),i.element=i.parent.activeView.getPanel(),i.fields=i.parent.eventFields,i.animation=new sf.base.Animation({progress:i.animationUiUpdate.bind(i)}),i.addEventListener(),i}return wi(t,e),t.prototype.renderAppointments=function(){if([].slice.call(this.parent.element.querySelectorAll(".e-block-appointment,.e-appointment,.e-row-count-wrapper")).forEach((function(e){return sf.base.remove(e)})),this.element.querySelector(".e-work-cells")&&(this.allDayElement=[].slice.call(this.element.querySelectorAll(".e-all-day-cells")),this.setAllDayRowHeight(0),0!==this.parent.eventsProcessed.length||0!==this.parent.blockProcessed.length)){var e=this.element.querySelector(".e-all-day-appointment-section");sf.base.EventHandler.remove(e,"click",this.rowExpandCollapse),sf.base.EventHandler.add(e,"click",this.rowExpandCollapse,this),this.renderedEvents=[],this.renderedAllDayEvents=[],this.initializeValues(),this.processBlockEvents(),this.renderEvents("normalEvents"),this.allDayEvents.length>0&&(this.allDayEvents=this.allDayEvents.filter((function(e,t,i){return t===i.map((function(e){return e.Guid})).indexOf(e.Guid)})),sf.base.removeClass(this.allDayElement,"e-animate"),this.slots.push(this.parent.activeView.renderDates.map((function(e){return+e}))),this.renderEvents("allDayEvents")),this.parent.notify(r,{}),sf.base.addClass(this.allDayElement,"e-animate")}},t.prototype.initializeValues=function(){var e=this;this.resources=this.parent.activeViewOptions.group.resources.length>0?this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.lastResourceLevel:[],this.cellHeight=parseFloat(this.element.querySelector(".e-content-wrap tbody tr").getBoundingClientRect().height.toFixed(2)),this.dateRender[0]=this.parent.activeView.renderDates,this.parent.activeViewOptions.group.resources.length>0&&this.resources.forEach((function(t,i){return e.dateRender[i]=t.renderDates}))},t.prototype.getHeight=function(e,t){var i=(t.getTime()-e.getTime())/6e4*(this.cellHeight*this.slotCount)/this.interval;return i=i<=0?this.cellHeight:i},t.prototype.appendEvent=function(e,t,i,a){var n=[].slice.call(this.element.querySelectorAll(".e-appointment-wrapper"));this.parent.enableRtl?sf.base.setStyleAttribute(t,{right:a}):sf.base.setStyleAttribute(t,{left:a});var r=t.classList.contains("e-block-appointment")?"blockEvent":"event",s={data:sf.base.extend({},e,null,!0),element:t,cancel:!1,type:r};this.parent.trigger("eventRendered",s,(function(e){e.cancel||n[i].appendChild(t)}))},t.prototype.processBlockEvents=function(){for(var e=0,t=0,i=this.getResourceList();t<i.length;t++)for(var a=i[t],n=this.dateRender[a],r=0,s=n.length;r<s;r++){for(var o=new Date(n[r].getTime()),l=y(n[r],1),c=0,p=this.filterEvents(o,l,this.parent.blockProcessed,this.resources[a]);c<p.length;c++){var d=p[c];this.parent.resourceBase&&this.setValues(d,a),this.renderBlockEvents(d,r,a,e),this.cssClass=null,this.groupOrder=null}e+=1}},t.prototype.renderBlockEvents=function(e,t,i,a){var n=this.isSpannedEvent(e,t,i),r=n[this.fields.startTime],s=n[this.fields.endTime],o=w(m(new Date(this.dateRender[i][t].getTime())),this.startHour,this.endHour);if(r<=s&&this.isValidEvent(e,r,s,o)){var l=void 0,c=void 0;if(n[this.fields.isAllDay]){var p=this.parent.element.querySelector(".e-content-wrap table");c=sf.base.formatUnit(p.offsetHeight),l=sf.base.formatUnit(0)}else c=sf.base.formatUnit(this.getHeight(r,s)),l=sf.base.formatUnit(this.getTopValue(r,t,i));var d=this.createBlockAppointmentElement(e,i);sf.base.setStyleAttribute(d,{width:"100%",height:c,top:l});var h=this.parent.activeViewOptions.group.byDate?this.resources.length*t+i:a;this.appendEvent(e,d,h,"0px")}},t.prototype.renderEvents=function(e){sf.base.removeClass(this.allDayElement,"e-animate");for(var t="allDayEvents"===e?this.sortByDateTime(this.allDayEvents):void 0,i=0,a=0,n=this.getResourceList();a<n.length;a++){var r=n[a];this.slots=[];var s=this.dateRender[r],o=this.getRenderedDates(s)||s;this.slots.push(s.map((function(e){return+e})));for(var l=0,c=s.length;l<c&&s[l]<=o[o.length-1];l++){this.renderedEvents=[];for(var p=new Date(s[l].getTime()),d=y(s[l],1),h=0,u=this.filterEvents(p,d,t,this.resources[r]);h<u.length;h++){var f=u[h];if(this.parent.resourceBase&&this.setValues(f,r),"allDayEvents"===e)this.renderAllDayEvents(f,l,r,i);else if(this.isAllDayAppointment(f))this.allDayEvents.push(sf.base.extend({},f,null,!0));else{if(this.parent.eventSettings.enableMaxHeight&&this.getOverlapIndex(f,l,!1,r)>0)continue;this.renderNormalEvents(f,l,r,i)}this.cssClass=null,this.groupOrder=null}i+=1}}},t.prototype.setValues=function(e,t){this.parent.activeViewOptions.group.resources.length>0?(this.cssClass=this.resources[t].cssClass,this.groupOrder=this.resources[t].groupOrder):this.cssClass=this.parent.resourceBase.getCssClass(e)},t.prototype.getResourceList=function(){return Array.apply(null,{length:this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.resources.length:1}).map((function(e,t){return t}))},t.prototype.createAppointmentElement=function(e,t,i,a){var n=this.parent.eventFields,r=e[n.subject]||this.parent.eventSettings.fields.subject.default,s=sf.base.createElement("div",{className:"e-appointment",attrs:{"data-id":"Appointment_"+e[n.id],"data-guid":e.Guid,role:"button",tabindex:"0","aria-readonly":this.parent.eventBase.getReadonlyAttribute(e),"aria-selected":"false","aria-grabbed":"true","aria-label":this.parent.getAnnocementString(e)}});e[this.fields.isReadonly]&&sf.base.addClass([s],"e-read-only");var o,l=sf.base.createElement("div",{className:"e-appointment-details"});if(s.appendChild(l),this.parent.activeViewOptions.group.resources.length>0){var c=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:a;s.setAttribute("data-group-index",c.toString())}var p=i;if(sf.base.isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)){var d=sf.base.createElement("div",{className:"e-subject",innerHTML:r});if(t)if(e[n.isAllDay])o=[d];else{o=[];var h=sf.base.createElement("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:this.parent.getTimeString(e[n.startTime])}),u=sf.base.createElement("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:this.parent.getTimeString(e[n.endTime])});sf.base.addClass([d],"e-text-center"),p.isLeft||o.push(h),o.push(d),p.isRight||o.push(u)}else{var f=this.parent.getTimeString(e[n.startTime])+" - "+this.parent.getTimeString(e[n.endTime]);o=[d,sf.base.createElement("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:f}),sf.base.createElement("div",{className:"e-location",innerHTML:e[n.location]||this.parent.eventSettings.fields.location.default||""})]}}else{var m=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",v=R(e,this.parent.eventFields);o=this.parent.getAppointmentTemplate()(v,this.parent,"eventTemplate",m,!1)}if(sf.base.append(o,l),!(this.parent.isAdaptive||sf.base.isNullOrUndefined(e[n.recurrenceRule])&&sf.base.isNullOrUndefined(e[n.recurrenceID]))){var g=e[n.id]===e[n.recurrenceID]?"e-recurrence-icon":"e-recurrence-edit-icon",y=sf.base.createElement("div",{className:j+" "+g});t?l.appendChild(y):s.appendChild(y)}return this.renderSpannedIcon(t?l:s,p),sf.base.isNullOrUndefined(this.cssClass)||sf.base.addClass([s],this.cssClass),this.applyResourceColor(s,e,"backgroundColor",this.groupOrder),this.renderResizeHandler(s,p,e[this.fields.isReadonly]),s},t.prototype.createMoreIndicator=function(e,t,i){var a=i+t,n=e[a];if(n.childElementCount<=0){var r=sf.base.createElement("div",{className:"e-row-count-wrapper",id:"e-row-count-wrapper-"+a.toString()}),s=sf.base.createElement("div",{className:"e-more-indicator",attrs:{tabindex:"0",role:"list","data-index":a.toString(),"data-count":"1"},innerHTML:"+1&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))});r.appendChild(s),n.appendChild(r),sf.base.EventHandler.add(s,"click",this.rowExpandCollapse,this)}else{var o=n.querySelector(".e-more-indicator"),l=parseInt(o.getAttribute("data-count"),10)+1;o.setAttribute("data-count",l.toString()),o.innerHTML="+"+l+"&nbsp;"+(this.parent.isAdaptive?"":this.parent.localeObj.getConstant("more"))}},t.prototype.renderSpannedIcon=function(e,t){var i=sf.base.createElement("div",{className:"e-indicator "+j});if(t.isLeft){var a=i.cloneNode();sf.base.addClass([a],"e-left-icon"),sf.base.prepend([a],e)}if(t.isRight){var n=i.cloneNode();sf.base.addClass([n],"e-right-icon"),sf.base.append([n],e)}if(t.isTop){var r=i.cloneNode();sf.base.addClass([r],"e-up-icon"),sf.base.prepend([r],e)}if(t.isBottom){var s=i.cloneNode();sf.base.addClass([s],"e-down-icon"),sf.base.append([s],e)}},t.prototype.isSpannedEvent=function(e,t,i){var a=m(this.dateRender[i][t]),n=this.getRenderedDates(this.dateRender[i])||[a];0===n.filter((function(e){return e.getDay()===t})).length&&(a=m(n[0]));var r=this.parent.eventFields,s=w(a,this.startHour,this.endHour),o=sf.base.extend({},e,null,!0);return o.isSpanned={isBottom:!1,isTop:!1},e[r.startTime].getTime()<s.startHour.getTime()&&(o[r.startTime]=s.startHour,o.isSpanned.isTop=!0),e[r.endTime].getTime()>s.endHour.getTime()&&(o[r.endTime]=s.endHour,o.isSpanned.isBottom=!0),o},t.prototype.renderAllDayEvents=function(e,t,i,a){var n=this,r=this.getRenderedDates(this.dateRender[i])||this.dateRender[i];this.parent.activeViewOptions.group.byDate&&(this.slots[0]=[this.dateRender[i][t].getTime()],r=[this.dateRender[i][t]]);var s=this.splitEvent(e,r)[0],o=this.element.querySelector(".e-all-day-cells:first-child"),l=o.offsetTop,c=new Date(s[this.parent.eventFields.startTime].getTime()),p=new Date(s[this.parent.eventFields.endTime].getTime()),d=0,h=1,u=r[0].getTime()<=c.getTime()&&y(r.slice(-1)[0],1).getTime()>=c.getTime();if(c<=p&&u){var f=[];if(this.renderedAllDayEvents[i]&&(f=this.renderedAllDayEvents[i].filter((function(t){return t.Guid===e.Guid})),this.parent.activeViewOptions.group.byDate&&(f=f.filter((function(e){return e[n.parent.eventFields.startTime]>=r[t]&&e[n.parent.eventFields.endTime]<=y(new Date(+r[t]),1)})))),0===f.length){var m=s.data.count,v=this.getOverlapIndex(s,t,!0,i);s.Index=v,this.allDayLevel=this.allDayLevel<v?v:this.allDayLevel;var g=s.data.isRight?0:"Day"===this.parent.currentView?4:7;m>=0&&(d=100*m-g),sf.base.isNullOrUndefined(this.renderedAllDayEvents[i])&&(this.renderedAllDayEvents[i]=[]),this.renderedAllDayEvents[i].push(sf.base.extend({},s,null,!0));var b=[].slice.call(this.element.querySelector(".e-all-day-row").children),T=this.parent.activeViewOptions.group.byDate?this.resources.length*t+i:a,w=this.element.querySelector(".e-all-day-appointment-wrapper:nth-child("+(T+1)+")"),D=this.createAppointmentElement(e,!0,s.data,i);sf.base.addClass([D],"e-all-day-appointment");var C={data:e,element:D,cancel:!1};this.parent.trigger("eventRendered",C,(function(t){if(!t.cancel){w.appendChild(D);var i=D.offsetHeight;if(h+=(0===v?l:l+v*i)+1,sf.base.setStyleAttribute(D,{width:d+"%",top:sf.base.formatUnit(h)}),v>1){n.moreEvents.push(D);for(var a=0,r=m;a<r;a++)n.createMoreIndicator(b,a,T)}o.setAttribute("data-count",n.allDayLevel.toString());var s=4+(!n.parent.uiStateValues.expand&&n.allDayLevel>2?3*i:(n.allDayLevel+1)*i);n.setAllDayRowHeight(s),n.addOrRemoveClass(),n.wireAppointmentEvents(D,e)}}))}}},t.prototype.renderNormalEvents=function(e,t,i,a){var n=this.isSpannedEvent(e,t,i),r=n[this.fields.startTime],s=n[this.fields.endTime],o=0,l=w(m(new Date(this.dateRender[i][t].getTime())),this.startHour,this.endHour),c=this.isValidEvent(e,r,s,l);if(r<=s&&c){var p=this.getHeight(r,s);r.getTime()>l.startHour.getTime()&&(o=this.getTopValue(r,t,i));var d=this.getOverlapIndex(n,t,!1,i);n.Index=d,this.overlapList.push(n),this.overlapList.length>1?(sf.base.isNullOrUndefined(this.overlapEvents[d])&&(this.overlapEvents[d]=[]),this.overlapEvents[d].push(n)):(this.overlapEvents=[],this.overlapEvents.push([n]));var h={index:d,left:"0%",width:this.getEventWidth(),day:t,dayIndex:a,record:n,resource:i},u=this.adjustOverlapElements(h);u.appWidth,sf.base.isNullOrUndefined(this.renderedEvents[i])&&(this.renderedEvents[i]=[]),this.renderedEvents[i].push(sf.base.extend({},n,null,!0));var f=this.createAppointmentElement(e,!1,n.isSpanned,i);sf.base.setStyleAttribute(f,{width:this.parent.eventSettings.enableMaxHeight?"100%":u.appWidth,height:p+"px",top:o+"px"});var v=p-40-15*f.querySelectorAll(".e-indicator").length,g=f.querySelector(".e-subject");!this.parent.isAdaptive&&g&&(g.style.maxHeight=sf.base.formatUnit(v));var y=this.parent.activeViewOptions.group.byDate?this.resources.length*t+i:a;this.appendEvent(e,f,y,u.appLeft),this.wireAppointmentEvents(f,e)}},t.prototype.getEventWidth=function(){var e=(("Day"===this.parent.currentView?97:94)-this.overlapEvents.length)/this.overlapEvents.length;return(e<0?0:e)+"%"},t.prototype.getEventLeft=function(e,t){var i=(parseFloat(e)+1)*t;return(i>99?99:i)+"%"},t.prototype.getTopValue=function(e,t,i){var a=w(m(this.dateRender[i][t]),this.startHour,this.endHour).startHour;return(60*(e.getHours()-a.getHours())+(e.getMinutes()-a.getMinutes()))*this.cellHeight*this.slotCount/this.interval},t.prototype.getOverlapIndex=function(e,t,i,a){var n=this,r=this.parent.eventFields,s=[],o=-1;if(this.overlapEvents=[],i){if(!sf.base.isNullOrUndefined(this.renderedAllDayEvents[a])){var l=m(new Date(this.dateRender[a][t].getTime()));s=this.renderedAllDayEvents[a].filter((function(e){return m(e[r.startTime]).getTime()<=l.getTime()&&m(e[r.endTime]).getTime()>=l.getTime()})),this.parent.activeViewOptions.group.resources.length>0&&(s=this.filterEventsByResource(this.resources[a],s))}}else{var c=sf.base.isNullOrUndefined(this.renderedEvents[a])?[]:this.renderedEvents[a],p=[],d=e[r.startTime],h=e[r.endTime];this.overlapList=c.filter((function(e){return e[r.endTime]>d&&e[r.startTime]<h||e[r.startTime]>=h&&e[r.endTime]<=d})),this.parent.activeViewOptions.group.resources.length>0&&(this.overlapList=this.filterEventsByResource(this.resources[a],this.overlapList)),this.overlapList.forEach((function(e){var t=c.filter((function(t){return t[r.endTime]>=e[r.startTime]&&t[r.startTime]<=e[r.endTime]}));n.parent.activeViewOptions.group.resources.length>0&&(t=n.filterEventsByResource(n.resources[a],t));var i=n.overlapList.filter((function(e){return-1===t.indexOf(e)}));return p.concat(i)})),this.overlapList=this.overlapList.concat(p);for(var u=0,f=s=this.overlapList;u<f.length;u++){var v=f[u],g=v.Index;sf.base.isNullOrUndefined(this.overlapEvents[g])?this.overlapEvents[g]=[v]:this.overlapEvents[g].push(v)}}if(s.length>0){var y=s.map((function(e){return e.Index}));o=y.length>0?this.getSmallestMissingNumber(y):0}return-1===o?0:o},t.prototype.adjustOverlapElements=function(e){for(var t={appWidth:e.width,appLeft:e.left},i=0,a=this.overlapEvents.length;i<a;i++)if(!sf.base.isNullOrUndefined(this.overlapEvents[i]))for(var n=0,r=this.overlapEvents[i].length;n<r;n++){var s=this.parent.activeViewOptions.group.byDate?this.resources.length*e.day+e.resource:e.dayIndex,o=this.element.querySelector("#e-appointment-wrapper-"+s);if(o.childElementCount>0){var l=this.overlapEvents[i][n].Guid;if(o.querySelectorAll('div[data-guid="'+l+'"]').length>0&&l!==e.record.Guid){var c=o.querySelector('div[data-guid="'+l+'"]');parseFloat(e.width)<=parseFloat(c.style.width)&&(this.parent.enableRtl?c.style.right=this.getEventLeft(e.width,i):c.style.left=this.getEventLeft(e.width,i),c.style.width=parseFloat(e.width)+"%",t.appWidth=c.style.width)}else{var p=e.width;sf.base.isNullOrUndefined(this.overlapEvents[i-1])&&(p=this.getEventWidth()),t.appWidth=p,t.appLeft=this.getEventLeft(p,e.index)}}}return t},t.prototype.setAllDayRowHeight=function(e){for(var t=0,i=this.allDayElement;t<i.length;t++){i[t].style.height=e/12+"em"}this.animation.animate(this.allDayElement[0])},t.prototype.addOrRemoveClass=function(){var e=this;this.moreEvents.filter((function(t){!e.parent.uiStateValues.expand&&e.allDayLevel>2?(sf.base.addClass([t],"e-appointment-hide"),t.setAttribute("tabindex","-1")):(sf.base.removeClass([t],"e-appointment-hide"),t.setAttribute("tabindex","0"))}));var t=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand?(sf.base.removeClass([t],"e-appointment-expand"),sf.base.addClass([t],"e-appointment-collapse")):(sf.base.removeClass([t],"e-appointment-collapse"),sf.base.addClass([t],"e-appointment-expand")),this.allDayLevel>2?sf.base.removeClass([t],"e-disable"):sf.base.addClass([t],"e-disable"),[].slice.call(this.element.querySelectorAll(".e-row-count-wrapper")).filter((function(t){!e.parent.uiStateValues.expand&&e.allDayLevel>2?sf.base.removeClass([t],"e-disable"):sf.base.addClass([t],"e-disable")}))},t.prototype.getEventHeight=function(){var e=sf.base.createElement("div",{className:"e-appointment",styles:"visibility:hidden"});this.element.querySelector(".e-all-day-appointment-wrapper:first-child").appendChild(e);var t=e.offsetHeight;return sf.base.remove(e),t},t.prototype.rowExpandCollapse=function(){var e,t=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand=t.classList.contains("e-appointment-expand"),this.parent.uiStateValues.expand?(t.setAttribute("title","Collapse-all-day-section"),t.setAttribute("aria-label","Collapse section"),e=(this.allDayLevel+1)*this.getEventHeight()+4):(t.setAttribute("title","Expand-all-day-section"),t.setAttribute("aria-label","Expand section"),e=3*this.getEventHeight()+4),this.setAllDayRowHeight(e),this.addOrRemoveClass(),this.animation.animate(t)},t.prototype.animationUiUpdate=function(){this.parent.notify(r,{})},t}(pt),Ci=(lt=function(e,t){return(lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}lt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ei=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.widthUptoCursorPoint=0,t.heightUptoCursorPoint=0,t.cursorPointIndex=0,t.isHeaderRows=!1,t.isTimelineDayProcess=!1,t.widthPerMinute=0,t.heightPerMinute=0,t.minDiff=0,t.isStepDragging=!1,t.isMorePopupOpened=!1,t.isAllDayDrag=!1,t}return Ci(t,e),t.prototype.wireDragEvent=function(e){new sf.base.Draggable(e,{abort:".e-event-resize",clone:!0,isDragScroll:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!!this.parent.eventDragArea,cursorAt:this.parent.eventDragArea?{left:-20,top:-20}:{left:0,top:0},dragArea:this.parent.eventDragArea?document.querySelector(this.parent.eventDragArea):this.parent.element.querySelector(".e-content-table"),dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this),queryPositionInfo:this.dragPosition.bind(this)})},t.prototype.dragHelper=function(e){return this.setDragActionDefaultValues(),this.actionObj.element=e.element,this.actionObj.action="drag",this.actionObj.clone=this.createCloneElement(this.actionObj.element),this.parent.eventDragArea||"Month"===this.parent.currentView||!this.parent.timeScale.enable||this.parent.activeView.isTimelineView()||this.actionObj.element.classList.contains("e-all-day-appointment")||sf.base.setStyleAttribute(this.actionObj.clone,{cursor:"move",left:"0%",right:"0%",width:"100%"}),this.actionObj.clone.style.top=sf.base.formatUnit(this.actionObj.element.offsetTop),this.actionObj.cloneElement=[this.actionObj.clone],this.actionObj.originalElement=[this.actionObj.element],this.actionObj.clone},t.prototype.dragPosition=function(e){if(this.parent.eventDragArea)return{left:e.left,top:e.top};var t,i=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,a=sf.base.formatUnit(0);if("Month"===this.parent.currentView&&(a=e.left),this.parent.activeView.isTimelineView()&&(a=sf.base.formatUnit(this.actionObj.clone.offsetLeft)),this.parent.activeView.isTimelineView()||!this.parent.timeScale.enable||!sf.base.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains("e-more-event-popup"))t=sf.base.formatUnit(this.actionObj.clone.offsetTop);else if("Month"===this.parent.currentView)t=sf.base.formatUnit(0);else if(this.actionObj.clone.classList.contains("e-all-day-appointment"))t=sf.base.formatUnit(this.parent.element.querySelector(".e-all-day-row").offsetTop),sf.base.setStyleAttribute(this.actionObj.clone,{width:sf.base.formatUnit(Math.ceil(this.actionObj.clone.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth),right:this.parent.enableRtl&&sf.base.formatUnit(0)});else{this.actionObj.element.classList.contains("e-all-day-appointment")&&!this.actionObj.clone.classList.contains("e-all-day-appointment")&&sf.base.setStyleAttribute(this.actionObj.clone,{height:sf.base.formatUnit(this.actionObj.cellHeight),width:sf.base.formatUnit(this.actionObj.cellWidth-1),pointerEvents:"none"});var n=parseInt(e.top,10);n=n<0?0:n,t=sf.base.formatUnit(Math.ceil(n/i)*i);var r=this.parent.element.querySelector(".e-content-wrap").scrollHeight,s=parseInt(t,10)+this.actionObj.clone.offsetHeight;s>r&&(t=parseInt(t,10)-(s-r)+"px")}return{left:a,top:t}},t.prototype.setDragActionDefaultValues=function(){this.actionObj.action="drag",this.actionObj.isAllDay=null,this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var e=this.parent.element.querySelector(".e-work-cells");this.actionObj.cellWidth=e.offsetWidth,this.actionObj.cellHeight=e.offsetHeight},t.prototype.dragStart=function(e){var t=this,i=this.actionObj.element.getAttribute("data-guid");this.actionObj.event=this.parent.eventBase.getEventByGuid(i);var a=sf.base.extend({},this.actionObj.event,null,!0),n={cancel:!1,data:a,event:e,excludeSelectors:null,element:this.actionObj.element,interval:this.actionObj.interval,navigation:{enable:!1,timeDelay:2e3},scroll:{enable:!0,scrollBy:30,timeDelay:100}};this.parent.trigger("dragStart",n,(function(i){if(i.cancel||!sf.base.isNullOrUndefined(t.actionObj.element)&&sf.base.isNullOrUndefined(t.actionObj.element.parentElement)){var n=t.actionObj.element.ej2_instances[0];return sf.base.isNullOrUndefined(n)||n.intDestroy(e.event),t.actionObj.action="",t.removeCloneElementClasses(),void t.removeCloneElement()}sf.base.isBlazor()&&(e.bindEvents(e.dragElement),i.element&&(i.element=sf.base.getElement(i.element)),i.data[t.parent.eventFields.startTime]=t.parent.getDateTime(i.data[t.parent.eventFields.startTime]),i.data[t.parent.eventFields.endTime]=t.parent.getDateTime(i.data[t.parent.eventFields.endTime])),t.actionClass("addClass"),t.parent.uiStateValues.action=!0,t.actionObj.start=a[t.parent.eventFields.startTime],t.actionObj.end=a[t.parent.eventFields.endTime],t.actionObj.groupIndex=parseInt(t.actionObj.element.getAttribute("data-group-index")||"0",10),t.actionObj.interval=i.interval,t.actionObj.navigation=i.navigation,t.actionObj.scroll=i.scroll,t.actionObj.excludeSelectors=i.excludeSelectors;var r=t.parent.element.querySelector(".e-content-wrap");if(t.scrollArgs={element:r,width:r.scrollWidth,height:r.scrollHeight},t.widthPerMinute=t.actionObj.cellWidth/t.actionObj.slotInterval*t.actionObj.interval,t.heightPerMinute=t.actionObj.cellHeight/t.actionObj.slotInterval*t.actionObj.interval,t.widthUptoCursorPoint=0,t.heightUptoCursorPoint=0,t.cursorPointIndex=-1,t.isHeaderRows=!1,t.isTimelineDayProcess=!1,t.minDiff=0,t.isMorePopupOpened=!1,t.daysVariation=-1,t.parent.activeView.isTimelineView()||!t.parent.timeScale.enable){!sf.base.isNullOrUndefined(t.actionObj.clone.offsetParent)&&t.actionObj.clone.offsetParent.classList.contains("e-more-event-popup")&&(t.isMorePopupOpened=!0);var s=t.parent.activeViewOptions.headerRows;t.isHeaderRows=s.length>0&&"Hour"!==s[s.length-1].option&&"Date"!==s[s.length-1].option,t.isTimelineDayProcess=!t.parent.activeViewOptions.timeScale.enable||t.isHeaderRows||"TimelineMonth"===t.parent.currentView||s.length>0&&"Date"===s[s.length-1].option,t.isStepDragging=!t.isTimelineDayProcess&&t.actionObj.slotInterval!==t.actionObj.interval,t.isTimelineDayProcess?t.timelineEventModule=new Ti(t.parent,"day"):t.timelineEventModule=new Ti(t.parent,"hour")}"Month"===t.parent.currentView&&(t.updateOriginalElement(t.actionObj.clone),t.monthEvent=new vi(t.parent)),"Day"!==t.parent.currentView&&"Week"!==t.parent.currentView&&"WorkWeek"!==t.parent.currentView||(t.verticalEvent=new Di(t.parent))}))},t.prototype.drag=function(e){if(this.parent.quickPopup.quickPopupHide(!0),sf.base.isNullOrUndefined(e.target)||!e.target.classList.contains("e-disable-dates")){var t=sf.base.extend({},this.actionObj.event,null,!0),i=this.getPageCoordinates(e);if(this.actionObj.Y=this.actionObj.pageY=i.pageY,this.actionObj.X=this.actionObj.pageX=i.pageX,this.actionObj.target=e.target,this.widthUptoCursorPoint=0===this.widthUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().left-this.actionObj.X)/this.widthPerMinute)*this.widthPerMinute:this.widthUptoCursorPoint,this.widthUptoCursorPoint=this.isMorePopupOpened?this.actionObj.cellWidth:this.widthUptoCursorPoint,this.heightUptoCursorPoint=0===this.heightUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().top-this.actionObj.Y)/this.heightPerMinute)*this.heightPerMinute:this.heightUptoCursorPoint,this.isAllDayDrag=this.parent.activeViewOptions.timeScale.enable?this.actionObj.clone.classList.contains("e-all-day-appointment"):this.actionObj.event[this.parent.eventFields.isAllDay],this.isStepDragging&&0===this.minDiff&&this.calculateMinutesDiff(t),("Month"===this.parent.currentView||this.isAllDayDrag)&&this.daysVariation<0){var a=this.parent.getDateFromElement(this.actionObj.target);if(sf.base.isNullOrUndefined(a))this.daysVariation=0;else{var n=m(a),r=m(new Date(t[this.parent.eventFields.startTime].getTime()));this.daysVariation=(n.getTime()-r.getTime())/864e5}}else this.daysVariation=0;if(this.parent.eventDragArea){var s=i.target;this.actionObj.clone.style.top=sf.base.formatUnit(s.offsetTop),this.actionObj.clone.style.left=sf.base.formatUnit(s.offsetLeft),sf.base.closest(s,"."+H)?"Week"!==this.parent.currentView&&"WorkWeek"!==this.parent.currentView&&"Day"!==this.parent.currentView&&(this.actionObj.clone.style.width=sf.base.formatUnit(this.actionObj.element.offsetWidth)):(this.actionObj.clone.style.height="",this.actionObj.clone.style.width="")}this.updateScrollPosition(e),this.updateNavigatingPosition(e),this.updateDraggingDateTime(e);var o={data:t,event:e,element:this.actionObj.element,startTime:this.actionObj.start,endTime:this.actionObj.end};this.parent.group.resources.length>0&&(o.groupIndex=this.actionObj.groupIndex),this.parent.trigger("drag",o)}},t.prototype.calculateMinutesDiff=function(e){this.parent.enableRtl?this.minDiff=(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint)/this.widthPerMinute*this.actionObj.interval:this.minDiff=this.widthUptoCursorPoint/this.widthPerMinute*this.actionObj.interval;var t=e[this.parent.eventFields.startTime],i=w(this.parent.activeView.renderDates[0],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour());i.startHour.getTime()>t.getTime()&&(this.minDiff=this.minDiff+(i.startHour.getTime()-t.getTime())/6e4)},t.prototype.dragStop=function(e){var t=this;if(this.removeCloneElementClasses(),this.removeCloneElement(),clearInterval(this.actionObj.navigationInterval),this.actionObj.navigationInterval=null,clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.actionClass("removeClass"),this.parent.uiStateValues.action=!1,this.actionObj.action=null,!this.isAllowDrop(e)){var i={cancel:!1,data:this.getChangedData(),event:e,element:this.actionObj.element,target:e.target};this.parent.trigger("dragStop",i,(function(e){e.cancel||t.saveChangedData(e)}))}},t.prototype.updateNavigatingPosition=function(e){var t=this;if(this.actionObj.navigation.enable){var i=this.parent.getCurrentTime();sf.base.isNullOrUndefined(this.actionObj.navigationInterval)&&(this.actionObj.navigationInterval=window.setInterval((function(){if(i){var a=t.parent.getCurrentTime().getSeconds(),n=i.getSeconds()+t.actionObj.navigation.timeDelay/1e3;(n=n>=60?n-60:n)===a&&(i=t.parent.getCurrentTime(),t.viewNavigation(e),t.updateDraggingDateTime(e))}}),this.actionObj.navigation.timeDelay))}},t.prototype.updateDraggingDateTime=function(e){!sf.base.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains("e-more-event-popup")?this.morePopupEventDragging(e):this.parent.activeView.isTimelineView()?(this.timelineEventModule.dateRender=this.parent.activeView.renderDates,this.timelineEventModule.cellWidth=this.actionObj.cellWidth,this.timelineEventModule.getSlotDates(),this.actionObj.cellWidth=this.isHeaderRows?this.timelineEventModule.cellWidth:this.actionObj.cellWidth,this.calculateTimelineTime(e)):"Month"===this.parent.currentView?this.calculateVerticalDate(e):this.calculateVerticalTime(e)},t.prototype.navigationWrapper=function(){if(this.parent.activeView.isTimelineView()){var e=void 0,t=(e=this.parent.activeViewOptions.group.resources.length>0?this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(this.actionObj.index):this.parent.element.querySelector(".e-appointment-container")).querySelector(".e-appointment-wrapper");t||(t=sf.base.createElement("div",{className:"e-appointment-wrapper"}),e.appendChild(t)),t.appendChild(this.actionObj.clone)}else if("Month"!==this.parent.currentView&&this.parent.timeScale.enable){var i=this.actionObj.clone.classList.contains("e-all-day-appointment")?".e-all-day-appointment-wrapper":".e-appointment-wrapper";if(this.parent.element.querySelectorAll(i).item(this.actionObj.index).appendChild(this.actionObj.clone),".e-all-day-appointment-wrapper"===i){var a=this.getAllDayEventHeight(),n=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells:first-child"));n[0].offsetHeight<a&&n.forEach((function(e){return e.style.height=(a+2)/12+"em"})),this.actionObj.clone.style.height=sf.base.formatUnit(a)}this.actionObj.height=parseInt(this.actionObj.clone.style.height,0)}else{var r=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"));this.actionObj.index=this.parent.activeView.renderDates.length<this.actionObj.index?this.parent.activeView.renderDates.length-1:this.actionObj.index;var s=r[this.actionObj.index].querySelector(".e-appointment-wrapper");s||(s=sf.base.createElement("div",{className:"e-appointment-wrapper"}),r[this.actionObj.index].appendChild(s)),s.appendChild(this.actionObj.clone)}},t.prototype.viewNavigation=function(e){var t,i=this.parent.element.querySelector(".e-content-wrap");i&&(!this.scrollEdges.top&&!this.scrollEdges.bottom||sf.base.closest(this.actionObj.clone,".e-all-day-appointment-wrapper"))&&(0===i.scrollLeft&&Math.round(this.actionObj.X)<=Math.round(i.getBoundingClientRect().left+this.actionObj.cellWidth+window.pageXOffset)?t=this.parent.enableRtl?"next":"previous":Math.round(i.scrollLeft)+i.clientWidth===i.scrollWidth&&Math.round(this.actionObj.X)>=Math.round(i.getBoundingClientRect().right-this.actionObj.cellWidth+window.pageXOffset)&&(t=this.parent.enableRtl?"previous":"next"),t&&this.parent.changeDate(this.parent.activeView.getNextPreviousDate(t)))},t.prototype.morePopupEventDragging=function(e){if(!(sf.base.isNullOrUndefined(e.target)||e.target&&sf.base.isNullOrUndefined(sf.base.closest(e.target,"td")))){var t=sf.base.extend({},this.actionObj.event,null,!0),i=t[this.parent.eventFields.endTime].getTime()-t[this.parent.eventFields.startTime].getTime(),a=sf.base.closest(e.target,"td"),n=this.parent.getDateFromElement(a),r=new Date(n.getTime());r.setMilliseconds(i),this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(a.getAttribute("data-group-index"),10)),this.actionObj.start=new Date(n.getTime()),this.actionObj.end=new Date(r.getTime()),this.actionObj.clone.style.top=sf.base.formatUnit(a.offsetParent.offsetTop),this.actionObj.clone.style.left=sf.base.formatUnit(a.offsetLeft),this.actionObj.clone.style.width=sf.base.formatUnit(a.offsetWidth);var s,o=a;if(this.parent.activeView.isTimelineView()){var l=sf.base.closest(a,"tr").rowIndex;o=this.parent.element.querySelectorAll(".e-appointment-container").item(l)}(s=o.querySelector(".e-appointment-wrapper"))||(s=sf.base.createElement("div",{className:"e-appointment-wrapper"}),o.appendChild(s)),this.appendCloneElement(s)}},t.prototype.calculateVerticalTime=function(e){if(!(sf.base.isNullOrUndefined(this.actionObj.target)||this.actionObj.target&&sf.base.isNullOrUndefined(sf.base.closest(this.actionObj.target,"tr"))||!sf.base.closest(this.actionObj.target,"td").classList.contains("e-work-cells")&&!sf.base.closest(this.actionObj.target,"td").classList.contains("e-all-day-cells"))){this.parent.activeViewOptions.timeScale.enable&&this.swapDragging(e);var t=this.parent.element.querySelector(".e-content-wrap"),i=sf.base.extend({},this.actionObj.event,null,!0),a=i[this.parent.eventFields.startTime],n=i[this.parent.eventFields.endTime].getTime()-a.getTime(),r=Math.floor(parseInt(this.actionObj.clone.style.top,10)/this.actionObj.cellHeight)*this.actionObj.cellHeight;r=r<0?0:r,(this.scrollEdges.top||this.scrollEdges.bottom)&&(r=this.scrollEdges.top?t.scrollTop-this.heightUptoCursorPoint+this.actionObj.cellHeight:t.scrollTop+t.offsetHeight-this.actionObj.clone.offsetHeight+(this.actionObj.clone.offsetHeight-this.heightUptoCursorPoint),r=Math.round(r/this.actionObj.cellHeight)*this.actionObj.cellHeight,this.actionObj.clone.style.top=sf.base.formatUnit(r));var s,o,l=r/this.actionObj.cellHeight,c=this.actionObj.cellHeight/this.actionObj.slotInterval,p=parseInt(this.actionObj.clone.style.top,10)-r;if(this.isAllDayDrag)s=this.parent.element.querySelector(".e-all-day-row");else s=[].slice.call(this.parent.getContentTable().querySelectorAll("tr"))[l];(sf.base.closest(this.actionObj.target,"td").classList.contains("e-work-cells")||sf.base.closest(this.actionObj.target,"td").classList.contains("e-all-day-cells"))&&(o=sf.base.closest(this.actionObj.target,"td").cellIndex);var d=sf.base.isNullOrUndefined(o)?sf.base.closest(this.actionObj.clone,"td").cellIndex:o;if(this.actionObj.index=d,!sf.base.isNullOrUndefined(s)){var h,u,f=s.children[d];this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(f.getAttribute("data-group-index"),10)),this.parent.activeViewOptions.timeScale.enable&&!this.isAllDayDrag?(this.appendCloneElement(this.getEventWrapper(d)),(h=this.parent.getDateFromElement(f)).setMinutes(h.getMinutes()+p/c),u=new Date(h.getTime()),this.actionObj.element.classList.contains("e-all-day-appointment")?u.setMinutes(u.getMinutes()+this.actionObj.slotInterval):u.setMilliseconds(n)):((h=this.parent.getDateFromElement(f)).setDate(h.getDate()-this.daysVariation),h.setHours(a.getHours(),a.getMinutes(),a.getSeconds()),(u=new Date(h.getTime())).setMilliseconds(n),!this.actionObj.element.classList.contains("e-all-day-appointment")&&this.actionObj.clone.classList.contains("e-all-day-appointment")&&(u=y(m(u),1)),this.updateAllDayEvents(h,u,this.parent.activeViewOptions.group.byDate?d:void 0)),this.actionObj.start=new Date(+h),this.actionObj.end=new Date(+u);var v=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);this.updateEventHeight(v),this.updateTimePosition(this.actionObj.start)}}},t.prototype.updateEventHeight=function(e){this.verticalEvent.initializeValues();for(var t=0,i=0;i<this.actionObj.groupIndex;i++)t+=this.verticalEvent.dateRender[i].length;var a,n=this.parent.activeViewOptions.group.byDate?this.parent.getIndexOfDate(this.verticalEvent.dateRender[this.actionObj.groupIndex],m(this.parent.getDateFromElement(this.actionObj.target))):this.actionObj.index-t,r=this.verticalEvent.isSpannedEvent(e,n,this.actionObj.groupIndex),s=r[this.verticalEvent.fields.startTime],o=r[this.verticalEvent.fields.endTime],l=this.verticalEvent.getHeight(s,o);a=this.verticalEvent.getTopValue(s,n,this.actionObj.groupIndex),this.actionObj.clone.style.top=sf.base.formatUnit(a),this.actionObj.clone.style.height=sf.base.formatUnit(l)},t.prototype.updateAllDayEvents=function(e,t,i){var a=this;this.parent.eventBase.slots=[];var n=this.getUpdatedEvent(e,t,this.actionObj.event),r=this.parent.activeView.renderDates;(this.parent.eventBase.slots.push(this.parent.activeView.renderDates.map((function(e){return+e}))),this.parent.activeViewOptions.group.resources.length>0)&&(this.parent.eventBase.slots=[],r=this.parent.resourceBase.lastResourceLevel.filter((function(e){return e.groupIndex===a.actionObj.groupIndex}))[0].renderDates,this.parent.eventBase.slots.push(r.map((function(e){return+e}))));var s=this.parent.eventBase.splitEvent(n,r),o='.e-all-day-cells[data-date="'+this.parent.getMsFromDate(s[0][this.parent.eventFields.startTime])+'"]';this.parent.activeViewOptions.group.resources.length>0&&(o=o.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]'));var l=[].slice.call(this.parent.element.querySelectorAll(o));if(l.length>0||!sf.base.isNullOrUndefined(i)){var c=sf.base.isNullOrUndefined(i)?l[0].cellIndex:i;this.appendCloneElement(this.getEventWrapper(c)),this.actionObj.clone.style.width=sf.base.formatUnit(s[0].data.count*this.actionObj.cellWidth)}},t.prototype.swapDragging=function(e){var t=sf.base.closest(this.actionObj.target,"td").cellIndex;if(sf.base.closest(this.actionObj.target,".e-date-header-wrap")&&!sf.base.closest(this.actionObj.clone,".e-all-day-appointment-wrapper")){sf.base.addClass([this.actionObj.clone],"e-all-day-appointment"),this.appendCloneElement(this.getEventWrapper(t)),this.actionObj.isAllDay=!0;var i=this.getAllDayEventHeight(),a=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells:first-child"));a[0].offsetHeight<i&&a.forEach((function(e){return e.style.height=(i+2)/12+"em"})),sf.base.setStyleAttribute(this.actionObj.clone,{width:sf.base.formatUnit(this.actionObj.cellWidth),height:sf.base.formatUnit(i),top:sf.base.formatUnit(this.parent.element.querySelector(".e-all-day-row").offsetTop)})}if(sf.base.closest(this.actionObj.target,".e-work-cells")&&!sf.base.closest(this.actionObj.clone,".e-day-wrapper")){sf.base.removeClass([this.actionObj.clone],"e-all-day-appointment"),this.appendCloneElement(this.getEventWrapper(t)),this.actionObj.isAllDay=!1;var n=0===this.actionObj.element.offsetHeight?this.actionObj.height:this.actionObj.element.offsetHeight;sf.base.setStyleAttribute(this.actionObj.clone,{left:sf.base.formatUnit(0),height:sf.base.formatUnit(n),width:sf.base.formatUnit(this.actionObj.cellWidth)})}},t.prototype.calculateVerticalDate=function(e){if(!(sf.base.isNullOrUndefined(e.target)||e.target&&sf.base.isNullOrUndefined(sf.base.closest(e.target,"tr"))||e.target&&"DIV"===e.target.tagName)){this.removeCloneElement();var t=sf.base.extend({},this.actionObj.event,null,!0),i=t[this.parent.eventFields.endTime].getTime()-t[this.parent.eventFields.startTime].getTime(),a=sf.base.closest(this.actionObj.target,"td");if(!sf.base.isNullOrUndefined(a)){var n=a.parentElement;this.actionObj.index=n.rowIndex*n.children.length+a.cellIndex,a=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"))[this.actionObj.index];var r=this.parent.getDateFromElement(a);if(!sf.base.isNullOrUndefined(r)){this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(a.getAttribute("data-group-index"),10));var s=new Date(r.setDate(r.getDate()-this.daysVariation)),o=new Date(s.getTime()),l=new Date(o.getTime()),c=t[this.parent.eventFields.startTime].getTime()-m(new Date(+t[this.parent.eventFields.startTime])).getTime();o=new Date(o.getTime()+c),l=new Date(o.getTime()+i),this.actionObj.start=new Date(o.getTime()),this.actionObj.end=new Date(l.getTime())}}var p=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);this.dynamicEventsRendering(p)}},t.prototype.calculateTimelineTime=function(e){var t,i=sf.base.extend({},this.actionObj.event,null,!0),a=i[this.parent.eventFields.endTime].getTime()-i[this.parent.eventFields.startTime].getTime(),n=this.parent.enableRtl?Math.abs(this.actionObj.clone.offsetLeft)-this.actionObj.clone.offsetWidth:parseInt(this.actionObj.clone.style.left,10);n=Math.floor(n/this.actionObj.cellWidth)*this.actionObj.cellWidth,this.parent.enableRtl&&(t=Math.abs(parseInt(this.actionObj.clone.style.right,10)),this.actionObj.clone.style.right=sf.base.formatUnit(t)),n=this.getOffsetValue(n,t);var r=this.getColumnIndex(n),s=Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().left)/this.actionObj.cellWidth);this.parent.enableRtl&&(s=Math.abs(Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().right)/this.actionObj.cellWidth))-1),this.cursorPointIndex<0&&this.cursorIndex(e,i,n,s);var o=this.parent.getContentTable().querySelector("tr"),l=this.getCursorCurrentIndex(r,s,o);l=l<0?0:l;var c=this.isHeaderRows?new Date(this.timelineEventModule.dateRender[l].getTime()):this.parent.getDateFromElement(o.children[l]);if(this.isStepDragging){var p=this.getWidthDiff(o,l);if(0!==p){var d=Math.round(p/this.widthPerMinute);c.setMinutes(c.getMinutes()+d*this.actionObj.interval),c.setMinutes(c.getMinutes()-this.minDiff)}else c=this.actionObj.start}else c.setMinutes(c.getMinutes()-this.cursorPointIndex*(this.isTimelineDayProcess?1440:this.actionObj.slotInterval));if(c=this.calculateIntervalTime(c),this.isTimelineDayProcess){var h=i[this.parent.eventFields.startTime];c.setHours(h.getHours(),h.getMinutes(),h.getSeconds())}var u=new Date(c.getTime());u.setMilliseconds(a);var f=this.getUpdatedEvent(c,u,this.actionObj.event),v=this.timelineEventModule.splitEvent(f,this.timelineEventModule.dateRender),g=v[0].data,y=this.timelineEventModule.getStartTime(v[0],g),b=this.timelineEventModule.getEndTime(v[0],g),T=this.timelineEventModule.getEventWidth(y,b,i[this.parent.eventFields.isAllDay],g.count),w=this.parent.getIndexOfDate(this.timelineEventModule.dateRender,m(new Date(y.getTime())));w=w<0?0:w;var D=this.timelineEventModule.getPosition(y,b,i[this.parent.eventFields.isAllDay],w);this.parent.enableRtl?this.actionObj.clone.style.right=sf.base.formatUnit(D):this.actionObj.clone.style.left=sf.base.formatUnit(D),this.isMorePopupOpened||(this.actionObj.clone.style.width=sf.base.formatUnit(T)),this.parent.activeViewOptions.group.resources.length>0&&this.calculateResourceGroupingPosition(e),this.actionObj.start=new Date(c.getTime()),this.actionObj.end=new Date(u.getTime()),this.updateTimePosition(this.actionObj.start)},t.prototype.getOffsetValue=function(e,t){if(this.scrollEdges.left||this.scrollEdges.right){var i=this.parent.element.querySelector(".e-content-wrap");this.parent.enableRtl?(t=i.offsetWidth-i.scrollLeft,this.scrollEdges.right?t=t-i.offsetWidth+this.actionObj.clone.offsetWidth-(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint):(t+=this.widthUptoCursorPoint)-this.widthUptoCursorPoint>=i.scrollWidth&&(this.actionObj.clone.style.width=sf.base.formatUnit(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint+this.actionObj.cellWidth),t=i.scrollLeft-i.scrollWidth),this.actionObj.clone.style.left=sf.base.formatUnit(t)):(this.scrollEdges.left?(e=i.scrollLeft-this.widthUptoCursorPoint+this.actionObj.cellWidth,i.scrollLeft+i.offsetWidth>=i.offsetWidth?i.scrollLeft=i.scrollLeft-1:0===this.actionObj.clone.offsetLeft&&(e=i.scrollLeft)):e=i.scrollLeft+i.offsetWidth-this.actionObj.clone.offsetWidth+(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint),e=e<0?0:e,this.actionObj.clone.style.left=sf.base.formatUnit(e))}return e},t.prototype.getWidthDiff=function(e,t){var i=this.scrollArgs.element.getBoundingClientRect();if(i.left<=this.actionObj.pageX&&i.right>=this.actionObj.pageX){var a=e.children[t].offsetLeft,n=this.actionObj.pageX-i.left;return this.parent.enableRtl?a+this.actionObj.cellWidth-(this.scrollArgs.element.scrollLeft+n):this.scrollArgs.element.scrollLeft+n-a}return 0},t.prototype.getColumnIndex=function(e){var t=Math.floor(e/this.actionObj.cellWidth);return this.isHeaderRows?t:this.getIndex(t)},t.prototype.getCursorCurrentIndex=function(e,t,i){var a=e+t;if(this.isHeaderRows){var n=Math.floor(i.offsetWidth/this.actionObj.cellWidth);return a>n-1?n-1:a}return a>i.children.length-1?i.children.length-1:a},t.prototype.cursorIndex=function(e,t,i,a){var n=sf.base.closest(e.target,".e-work-cells");if(sf.base.isNullOrUndefined(n)||this.isMorePopupOpened)this.cursorPointIndex=0;else{var r=this.parent.getDateFromElement(n);if(this.isHeaderRows){var s=Math.floor(i/this.actionObj.cellWidth);r=new Date(this.timelineEventModule.dateRender[s+a].getTime())}var o=r.getTime()-t[this.parent.eventFields.startTime].getTime();if(this.isTimelineDayProcess)this.cursorPointIndex=Math.abs(Math.ceil(o/864e5));else{var l=Math.floor(o/6e4/(this.actionObj.slotInterval/this.actionObj.cellWidth));this.cursorPointIndex=Math.floor(l/this.actionObj.cellWidth),this.cursorPointIndex=this.cursorPointIndex<0?0:this.cursorPointIndex}}},t.prototype.calculateResourceGroupingPosition=function(e){var t=this.parent.element.querySelector(".e-content-wrap"),i=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap .e-content-table tr:not(.e-hidden)")),a=l(t.querySelector("table"));a=sf.base.isNullOrUndefined(a)?0:a;var n=this.parent.rowAutoHeight?~~(t.querySelector("table").offsetHeight/i.length):this.actionObj.cellHeight,r=Math.floor(Math.floor(this.actionObj.Y+(t.scrollTop-a-window.scrollY)-t.getBoundingClientRect().top)/n);r=r<0?0:r>i.length-1?i.length-1:r,this.actionObj.index=r;var s=this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(r),o=s.querySelector(".e-appointment-wrapper");o||(o=sf.base.createElement("div",{className:"e-appointment-wrapper"}),s.appendChild(o)),this.appendCloneElement(o);var c=sf.base.closest(e.target,"td");this.actionObj.groupIndex=c&&!isNaN(parseInt(c.getAttribute("data-group-index"),10))?parseInt(c.getAttribute("data-group-index"),10):this.actionObj.groupIndex;var p=i[r].offsetTop;if(this.parent.rowAutoHeight){var d=this.getCursorElement(e);d&&(p=d.classList.contains("e-work-cells")?d.offsetTop:d.offsetParent.classList.contains("e-appointment")?d.offsetParent.offsetTop:p)}this.actionObj.clone.style.top=sf.base.formatUnit(p)},t.prototype.appendCloneElement=function(e){this.parent.eventDragArea?document.querySelector(this.parent.eventDragArea).appendChild(this.actionObj.clone):e.appendChild(this.actionObj.clone)},t.prototype.getEventWrapper=function(e){var t,i=this.actionObj.clone.classList.contains("e-all-day-appointment");if(this.parent.activeViewOptions.timeScale.enable){var a=i?".e-all-day-appointment-wrapper":".e-appointment-wrapper";t=this.parent.element.querySelectorAll(a).item(e)}else{var n=this.parent.element.querySelectorAll(".e-work-cells").item(e);(t=n.querySelector(".e-appointment-wrapper"))||(t=sf.base.createElement("div",{className:"e-appointment-wrapper"}),n.appendChild(t))}return t},t.prototype.getAllDayEventHeight=function(){var e=sf.base.createElement("div",{className:"e-appointment"});this.parent.element.querySelector(".e-all-day-appointment-wrapper").appendChild(e);var t=e.offsetHeight;return sf.base.remove(e),t},t.prototype.isAllowDrop=function(e){if(!this.actionObj.excludeSelectors)return!1;for(var t=!1,i=0,a=this.actionObj.excludeSelectors.split(",");i<a.length;i++){var n=a[i];if(e.target.classList.contains(n)){t=!0;break}}return t},t.prototype.getModuleName=function(){return"dragAndDrop"},t}(fi);(ct=e.ViewHelper||(e.ViewHelper={})).getDayName=function(e,t){return e.getDayNames("abbreviated")[t.getDay()]},ct.getDate=function(e,t){return e.globalize.formatDate(t,{format:"d",calendar:e.getCalendarMode()})},ct.getTime=function(e,t){return e.isAdaptive?"HH:mm"===e.timeFormat||"HH.mm"===e.timeFormat?e.globalize.formatDate(t,{format:"H",calendar:e.getCalendarMode()}):sf.base.isBlazor()?e.globalize.formatDate(t,{format:"h",calendar:e.getCalendarMode()}):e.globalize.formatDate(t,{skeleton:"h",calendar:e.getCalendarMode()}):e.getTimeString(t)},ct.getTimelineDate=function(e,t){var i=sf.base.isBlazor()?"M":"MMMd";return P(e.globalize.formatDate(t,{skeleton:i,calendar:e.getCalendarMode()})+", "+e.getDayNames("wide")[t.getDay()],"multiple")};var Oi,Si,xi,ki,Ai,Vi,Mi,Ri,Pi,Hi,ji,Ii,Li=function(){function e(e){this.parent=e}return e.prototype.isTimelineView=function(){return-1!==this.parent.currentView.indexOf("Timeline")},e.prototype.getContentRows=function(){return[]},e.prototype.serverRenderLayout=function(){},e.prototype.createEventTable=function(e){var t=sf.base.createElement("div",{className:"e-event-table"});return sf.base.append(this.getEventRows(e),t),t},e.prototype.getEventRows=function(e){for(var t,i=[],a=0;a<e;a++)t=sf.base.createElement("div",{className:"e-appointment-container"}),this.parent.resourceBase&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderedResources&&t.setAttribute("data-group-index",this.parent.resourceBase.renderedResources[a].groupIndex.toString()),i.push(t);return i},e.prototype.collapseRows=function(e){this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(this.parent.resourceBase.hideResourceRows(e.querySelector("tbody")),this.parent.resourceBase.hideResourceRows(e.querySelector(".e-event-table")))},e.prototype.createTableLayout=function(e){var t=e||"",i=sf.base.createElement("table",{className:"e-schedule-table "+t}),a=sf.base.createElement("tbody");return i.appendChild(a),i},e.prototype.createColGroup=function(e,t){var i=t.length;t[0]&&t[0].colSpan&&(i=t.map((function(e){return e.colSpan})).reduce((function(e,t){return e+t})));for(var a=sf.base.createElement("colgroup"),n=0;n<i;n++)a.appendChild(sf.base.createElement("col"));sf.base.prepend([a],e)},e.prototype.getScrollXIndent=function(e){return e.offsetHeight-e.clientHeight>0?S():0},e.prototype.scrollTopPanel=function(e){this.getDatesHeaderElement().firstElementChild.scrollLeft=e.scrollLeft},e.prototype.scrollHeaderLabels=function(e){for(var t=this,i=this.element.querySelector(".e-date-header-wrap table"),a=i.offsetWidth/i.querySelectorAll("colgroup col").length,n=function(t,i){for(var n,r=0,s=0,o=i?e.scrollWidth-e.offsetWidth-e.scrollLeft:e.scrollLeft,l=0;l<t.length;l++){if((s+=parseInt(t[l].getAttribute("colSpan"),10))>Math.floor(o/a)){n=t[l];break}r+=t[l].offsetWidth}n.children[0].style[i?"right":"left"]=o-r+"px"},r=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"],s=0;s<r.length;s++){var o=[].slice.call(this.element.querySelectorAll(r[s]));o.length>0&&(o.forEach((function(e){return e.children[0].style[t.parent.enableRtl?"right":"left"]=""})),n(o,this.parent.enableRtl))}},e.prototype.addAttributes=function(e,t){e.template&&sf.base.append(e.template,t),e.colSpan&&t.setAttribute("colspan",e.colSpan.toString()),e.className&&sf.base.addClass([t],e.className)},e.prototype.getHeaderBarHeight=function(){var e=2;if(this.parent.headerModule&&(e+=k(this.parent.headerModule.getHeaderElement())),this.parent.uiStateValues.isGroupAdaptive){var t=this.parent.element.querySelector(".e-schedule-resource-toolbar");t&&(e+=t.offsetHeight)}return e},e.prototype.renderPanel=function(e){"e-previous-panel"===e||sf.base.isBlazor()?sf.base.prepend([this.element],this.parent.element.querySelector(".e-table-container")):this.parent.element.querySelector(".e-table-container").appendChild(this.element)},e.prototype.setPanel=function(e){this.element=e},e.prototype.getPanel=function(){return this.element},e.prototype.getDatesHeaderElement=function(){return this.element.querySelector(".e-date-header-container")},e.prototype.getDateSlots=function(e,t){return[]},e.prototype.generateColumnLevels=function(){return[]},e.prototype.getColumnLevels=function(){return this.colLevels},e.prototype.highlightCurrentTime=function(){},e.prototype.startDate=function(){return this.renderDates[0]},e.prototype.endDate=function(){return y(this.renderDates[this.renderDates.length-1],1)},e.prototype.getStartHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);return sf.base.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.getEndHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);return sf.base.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.isCurrentDate=function(e){return e.setHours(0,0,0,0)===this.parent.getCurrentTime().setHours(0,0,0,0)},e.prototype.isCurrentMonth=function(e){return e.getFullYear()===this.parent.getCurrentTime().getFullYear()&&e.getMonth()===this.parent.getCurrentTime().getMonth()},e.prototype.isWorkDay=function(e,t){return void 0===t&&(t=this.parent.activeViewOptions.workDays),t.indexOf(e.getDay())>=0},e.prototype.isWorkHour=function(e,t,i,a){return!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&(t.setMilliseconds(0),i.setMilliseconds(0),!(v(e)<v(t)||v(e)>=v(i)||!this.isWorkDay(e,a)))},e.prototype.getRenderDates=function(e){var t=[];if("Week"===this.parent.currentView||"TimelineWeek"===this.parent.currentView)for(var i=c(m(this.parent.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),a=0,n=7*this.parent.activeViewOptions.interval;a<n;a++)(this.parent.activeViewOptions.showWeekend||this.isWorkDay(i,e))&&t.push(i),i=y(i,1);else if("WorkWeek"===this.parent.currentView||"TimelineWorkWeek"===this.parent.currentView){i=c(m(this.parent.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),a=0;for(var r=7*this.parent.activeViewOptions.interval;a<r;a++)this.isWorkDay(i,e)&&t.push(i),i=y(i,1)}else{i=m(this.parent.selectedDate);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(i,e))&&t.push(i),i=y(i,1)}while(this.parent.activeViewOptions.interval!==t.length)}return e||(this.renderDates=t),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),t},e.prototype.getNextPreviousDate=function(e){if("Day"===this.parent.currentView||"TimelineDay"===this.parent.currentView){if(this.parent.activeViewOptions.showWeekend){var t=this.parent.activeViewOptions.interval;return y(this.parent.selectedDate,"next"===e?t:-t)}var i=void 0;if("next"===e)for(i=y(this.renderDates.slice(-1)[0],1);!this.isWorkDay(i);)i=y(i,1);else{i=y(this.renderDates[0],-1);var a=0;do{this.isWorkDay(i)&&(a+=1),this.parent.activeViewOptions.interval!==a&&(i=y(i,-1))}while(this.parent.activeViewOptions.interval!==a)}return i}return y(this.parent.selectedDate,"next"===e?7*this.parent.activeViewOptions.interval:-7*this.parent.activeViewOptions.interval)},e.prototype.getLabelText=function(e){var t=e.charAt(0).toLowerCase()+e.substring(1);return this.parent.localeObj.getConstant(t)+" of "+P(sf.base.isBlazor()?this.parent.globalize.formatDate(this.parent.selectedDate,{skeleton:"D",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(this.parent.selectedDate,{skeleton:"long",calendar:this.parent.getCalendarMode()}),"single")},e.prototype.getDateRangeText=function(){return this.parent.isAdaptive?P(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y",calendar:this.parent.getCalendarMode()}),"single"):this.formatDateRange(this.renderDates[0],this.renderDates[this.renderDates.length-1])},e.prototype.formatDateRange=function(e,t){var i,a=this.parent.globalize,n=this.parent.getCalendarMode();if(e===t&&(t=null),!sf.base.isNullOrUndefined(this.parent.activeViewOptions.dateFormat)){return P(t?a.formatDate(e,{format:this.parent.activeViewOptions.dateFormat,calendar:n})+" - "+a.formatDate(t,{format:this.parent.activeViewOptions.dateFormat,calendar:n}):a.formatDate(e,{format:this.parent.activeViewOptions.dateFormat,calendar:n}),"multiple")}if(i=sf.base.isBlazor()?"MMMM d, y":"en"===this.parent.locale||"en-US"===this.parent.locale?sf.base.getValue("dateFormats.long",sf.base.getDefaultDateObject(n)):sf.base.getValue("main."+this.parent.locale+".dates.calendars."+n+".dateFormats.long",sf.base.cldrData),!t)return P(a.formatDate(e,{format:i,calendar:n}),"single");var r=i.trim().toLocaleLowerCase();return P("d"===r.substr(0,1)?e.getFullYear()===t.getFullYear()?e.getMonth()===t.getMonth()?a.formatDate(e,{format:"dd",calendar:n})+" - "+a.formatDate(t,{format:"dd MMMM yyyy",calendar:n}):a.formatDate(e,{format:"dd MMM",calendar:n})+" - "+a.formatDate(t,{format:"dd MMM yyyy",calendar:n}):a.formatDate(e,{format:"dd MMM yyyy",calendar:n})+" - "+a.formatDate(t,{format:"dd MMM yyyy",calendar:n}):"m"===r.substr(0,1)?e.getFullYear()===t.getFullYear()?e.getMonth()===t.getMonth()?a.formatDate(e,{format:"MMMM dd",calendar:n})+" - "+a.formatDate(t,{format:"dd, yyyy",calendar:n}):a.formatDate(e,{format:"MMM dd",calendar:n})+" - "+a.formatDate(t,{format:"MMM dd, yyyy",calendar:n}):a.formatDate(e,{format:"MMM dd, yyyy",calendar:n})+" - "+a.formatDate(t,{format:"MMM dd, yyyy",calendar:n}):a.formatDate(e,{format:i,calendar:n})+" - "+a.formatDate(t,{format:i,calendar:n}),"multiple")},e.prototype.getMobileDateElement=function(e,t){return sf.base.createElement("div",{className:t,innerHTML:'<div class="e-m-date">'+this.parent.globalize.formatDate(e,{format:"d",calendar:this.parent.getCalendarMode()})+'</div><div class="e-m-day">'+P(this.parent.globalize.formatDate(e,{format:"E",calendar:this.parent.getCalendarMode()}),"single")+"</div>"})},e.prototype.setResourceHeaderContent=function(e,t,i){if(void 0===i&&(i=q),this.parent.activeViewOptions.resourceHeaderTemplate){var a={resource:t.resource,resourceData:t.resourceData},n=this.parent.element.id+"_"+this.parent.activeViewOptions.resourceHeaderTemplateName+"resourceHeaderTemplate",r=[].slice.call(this.parent.getResourceHeaderTemplate()(a,this.parent,"resourceHeaderTemplate",n,!1));sf.base.append(r,e)}else e.appendChild(sf.base.createElement("div",{className:i,innerHTML:t.resourceData[t.resource.textField]}))},e.prototype.renderResourceMobileLayout=function(){this.parent.resourceBase.lastResourceLevel&&this.parent.resourceBase.lastResourceLevel.length<=0||(this.parent.resourceBase.renderResourceHeader(),this.parent.resourceBase.renderResourceTree())},e.prototype.addAutoHeightClass=function(e){!this.parent.uiStateValues.isGroupAdaptive&&this.parent.rowAutoHeight&&this.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&sf.base.addClass([e],"e-auto-height")},e.prototype.getColElements=function(){return[].slice.call(this.element.querySelectorAll(".e-content-wrap col, .e-date-header-wrap col"))},e.prototype.setColWidth=function(e){if(this.isTimelineView()){var t=this.getColElements(),i=this.element.querySelector(".e-content-table tbody"),a=Math.ceil(i.offsetWidth/(t.length/2));if(t.forEach((function(e){return sf.base.setStyleAttribute(e,{width:sf.base.formatUnit(a)})})),e.offsetHeight!==e.clientHeight){var n=this.parent.element.querySelector(".e-resource-column-wrap");sf.base.isNullOrUndefined(n)||sf.base.setStyleAttribute(n,{height:sf.base.formatUnit(e.clientHeight)})}}},e.prototype.resetColWidth=function(){this.getColElements().forEach((function(e){return e.style.width=""}))},e.prototype.getContentAreaElement=function(){return this.element.querySelector(".e-content-wrap")},e.prototype.wireExpandCollapseIconEvents=function(){var e=this;this.parent.resourceBase&&this.parent.resourceBase.resourceCollection.length>1&&[].slice.call(this.element.querySelectorAll(".e-resource-tree-icon")).forEach((function(t){sf.base.EventHandler.clearEvents(t),sf.base.EventHandler.add(t,"click",e.parent.resourceBase.onTreeIconClick,e.parent.resourceBase)}))},e.prototype.scrollToDate=function(e){if(-1!==["Month","TimelineMonth"].indexOf(this.parent.currentView)&&!sf.base.isNullOrUndefined(e)){var t=this.getContentAreaElement(),i='.e-work-cells[data-date="'+this.parent.getMsFromDate(new Date(m(new Date(+e)).getTime()))+'"]',a=t.querySelector(i);"Month"===this.parent.currentView&&a&&(t.scrollTop=a.offsetTop),"TimelineMonth"===this.parent.currentView&&a&&(t.scrollLeft=a.offsetLeft)}},e}(),qi=(Oi=function(e,t){return(Oi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Oi(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Bi=function(t){function n(e){var i=t.call(this,e)||this;return i.viewClass="e-day-view",i.isInverseTableSelect=!0,i.baseCssClass="e-vertical-view",i}return qi(n,t),n.prototype.addEventListener=function(){this.parent.on(s,this.scrollUiUpdate,this),this.parent.on(a,this.renderEvents,this)},n.prototype.removeEventListener=function(){this.parent.off(s,this.scrollUiUpdate),this.parent.off(a,this.renderEvents)},n.prototype.renderEvents=function(){this.parent.activeViewOptions.timeScale.enable?new Di(this.parent).renderAppointments():new vi(this.parent).renderAppointments();this.parent.notify("events-loaded",{})},n.prototype.onContentScroll=function(e){this.parent.removeNewEventElement();var t=e.target;this.parent.notify("virtual-scroll",e),this.scrollLeftPanel(t),this.scrollTopPanel(t),this.parent.isAdaptive||(this.parent.uiStateValues.top=t.scrollTop),this.parent.uiStateValues.left=t.scrollLeft,sf.base.isNullOrUndefined(this.parent.quickPopup)||this.parent.quickPopup.quickPopupHide()},n.prototype.onApaptiveMove=function(e){this.parent.uiStateValues.action&&e.preventDefault()},n.prototype.onApaptiveScroll=function(e){this.parent.removeNewEventElement(),this.parent.uiStateValues.top=e.target.scrollTop},n.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();sf.base.isNullOrUndefined(t)||(t.scrollTop=e.scrollTop)},n.prototype.scrollUiUpdate=function(e){var t=this.getHeaderBarHeight(),i=this.getLeftPanelElement(),a=this.getScrollableElement(),n=this.getDatesHeaderElement(),r=this.parent.element.offsetHeight-t-n.offsetHeight;this.setContentHeight(a,i,r);var s=S();n.firstElementChild.style[e.cssProperties.rtlBorder]="",n.style[e.cssProperties.rtlPadding]="",a.offsetWidth-a.clientWidth>0?(n.firstElementChild.style[e.cssProperties.border]=s>0?"1px":"0px",n.style[e.cssProperties.padding]=s>0?s-1+"px":"0px"):(n.firstElementChild.style[e.cssProperties.border]="",n.style[e.cssProperties.padding]=""),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=!1):(a.scrollTop=this.parent.uiStateValues.top,a.scrollLeft=this.parent.uiStateValues.left)),this.setColWidth(a),this.parent.activeViewOptions.timeScale.enable&&this.highlightCurrentTime()},n.prototype.setContentHeight=function(e,t,i){!this.parent.isAdaptive||this.isTimelineView()||this.parent.isServerRenderer()?(sf.base.isNullOrUndefined(t)||(t.style.height="auto"===this.parent.height?"auto":sf.base.formatUnit(i-this.getScrollXIndent(e))),e.style.height="auto"===this.parent.height?"auto":sf.base.formatUnit(i)):e.style.height="auto"===this.parent.height?"auto":sf.base.formatUnit(i)},n.prototype.scrollToWorkHour=function(){if(this.parent.workHours.highlight){var e=this.element.querySelector(".e-work-hours");e&&(this.getScrollableElement().scrollTop=e.offsetTop,this.parent.uiStateValues.top=e.offsetTop,this.parent.uiStateValues.left=0)}},n.prototype.scrollToHour=function(e,t){var i=this.parent.getStartEndTime(e);!sf.base.isNullOrUndefined(i)&&sf.base.isNullOrUndefined(t)&&(this.getScrollableElement().scrollTop=this.getTopFromDateTime(i))},n.prototype.generateColumnLevels=function(){var e=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays),t=[];if(this.parent.activeViewOptions.group.resources.length>0){if(t=this.parent.resourceBase.generateResourceLevels(e),this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){var i=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex],a=i.resourceData[i.resource.startHourField],n=i.resourceData[i.resource.endHourField];t=[this.getDateSlots(i.renderDates,i.workDays,a,n)]}}else t.push(e);return this.colLevels=t,t},n.prototype.getDateSlots=function(e,t,i,a){void 0===i&&(i=this.parent.workHours.start),void 0===a&&(a=this.parent.workHours.end);for(var n=[],r=this.parent.getStartEndTime(i),s=this.parent.getStartEndTime(a),o=0,l=e;o<l.length;o++){var c=l[o],p=["e-header-cells"];this.isCurrentDate(c)&&p.push("e-current-day"),n.push({date:c,type:"dateHeader",className:p,colSpan:1,workDays:t,startHour:new Date(+r),endHour:new Date(+s)})}return n},n.prototype.isWorkHourRange=function(e){return this.getStartHour().getTime()<=e.getTime()&&this.getEndHour().getTime()>=e.getTime()},n.prototype.highlightCurrentTime=function(){var e=this;this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option||(this.parent.showTimeIndicator&&this.isWorkHourRange(this.parent.getCurrentTime())&&this.getCurrentTimeIndicatorIndex().length>0?([].slice.call(this.element.querySelectorAll(".e-work-cells")).length>0&&this.changeCurrentTimePosition(),sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)&&(this.currentTimeIndicatorTimer=window.setInterval((function(){e.changeCurrentTimePosition()}),6e4))):this.clearCurrentTimeIndicatorTimer())},n.prototype.getCurrentTimeIndicatorIndex=function(){var e=[];if(!sf.base.isNullOrUndefined(this.parent.resourceBase)&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive)for(var t=0,i=0,a=this.parent.resourceBase.lastResourceLevel;i<a.length;i++){var n=a[i];if((s=this.parent.getIndexOfDate(n.renderDates,m(this.parent.getCurrentTime())))>=0){var r=this.parent.activeViewOptions.group.byDate?this.parent.resourceBase.lastResourceLevel.length*s+t:t+s;e.push(r)}t+=this.parent.activeViewOptions.group.byDate?1:n.renderDates.length}else{var s,o=this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0?this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates:this.renderDates;(s=this.parent.getIndexOfDate(o,m(this.parent.getCurrentTime())))>=0&&e.push(s)}return e},n.prototype.clearCurrentTimeIndicatorTimer=function(){sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)||(window.clearInterval(this.currentTimeIndicatorTimer),this.currentTimeIndicatorTimer=null,this.removeCurrentTimeIndicatorElements())},n.prototype.removeCurrentTimeIndicatorElements=function(){[].slice.call(this.element.querySelectorAll(".e-previous-timeline,.e-current-timeline,.e-current-time")).forEach((function(e){return sf.base.remove(e)}))},n.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.parent.getContentTable().rows[0],i=this.getTopFromDateTime(this.parent.getCurrentTime()),a=sf.base.formatUnit(i),n=Math.floor(i/t.cells[0].offsetHeight);if(!sf.base.isNullOrUndefined(n)&&!isNaN(n)){for(var r=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper")),s=0,o=e[0];s<o;s++)r[s].appendChild(sf.base.createElement("div",{className:"e-previous-timeline",styles:"top:"+a}));for(var l=0,c=e;l<c.length;l++){r[c[l]].appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:"top:"+a}))}var p=sf.base.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time",styles:"top:"+a}),d=this.getLeftPanelElement(),h=[].slice.call(d.querySelectorAll("tr"));n<=h.length&&(sf.base.removeClass(d.querySelectorAll(".e-hide-childs"),"e-hide-childs"),sf.base.addClass([h[n].lastElementChild],"e-hide-childs"),sf.base.prepend([p],d),p.style.top=sf.base.formatUnit(p.offsetTop-p.offsetHeight/2))}}},n.prototype.getTopFromDateTime=function(e){var t=this.getStartHour();return(60*(e.getHours()-t.getHours())+(e.getMinutes()-t.getMinutes()))*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},n.prototype.getWorkCellHeight=function(){return this.element.querySelector(".e-work-cells").offsetHeight},n.prototype.getTdContent=function(t,i,a){var n,r=sf.base.createElement("div"),s="",o=this.parent.element.id+"_",l=M(t);switch(i){case"dateHeader":if(this.parent.activeViewOptions.dateHeaderTemplate){s="dateHeaderTemplate";var c={date:l,type:i},p=this.parent.activeViewOptions.dateHeaderTemplateName;n=[].slice.call(this.parent.getDateHeaderTemplate()(c,this.parent,s,o+p+s,!1))}else r.innerHTML=this.parent.activeView.isTimelineView()?'<span class="e-header-date e-navigate">'+e.ViewHelper.getTimelineDate(this.parent,t)+"</span>":'<div class="e-header-day">'+P(e.ViewHelper.getDayName(this.parent,t),"single")+'</div><div class="e-header-date e-navigate" role="link">'+e.ViewHelper.getDate(this.parent,t)+"</div>",n=[].slice.call(r.childNodes);break;case"majorSlot":if(this.parent.activeViewOptions.timeScale.majorSlotTemplate){s="majorSlotTemplate";c={date:l,type:i};n=[].slice.call(this.parent.getMajorSlotTemplate()(c,this.parent,s,o+s,!1))}else r.innerHTML="<span>"+e.ViewHelper.getTime(this.parent,t)+"</span>",n=[].slice.call(r.childNodes);break;case"minorSlot":if(this.parent.activeViewOptions.timeScale.minorSlotTemplate){s="minorSlotTemplate";c={date:l,type:i};n=[].slice.call(this.parent.getMinorSlotTemplate()(c,this.parent,s,o+s,!1))}else r.innerHTML="&nbsp;",n=[].slice.call(r.childNodes);break;case"alldayCells":if(this.parent.activeViewOptions.cellTemplate){p=this.parent.activeViewOptions.cellTemplateName;s="cellTemplate";c={date:l,type:i,groupIndex:a};n=[].slice.call(this.parent.getCellTemplate()(c,this.parent,s,o+p+s,!1))}}return n},n.prototype.serverRenderLayout=function(){this.setPanel(this.parent.element.querySelector(".e-table-wrap")),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+L)&&this.renderResourceMobileLayout();for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));e<t.length;e++){var i=t[e];sf.base.EventHandler.clearEvents(i),this.wireMouseEvents(i)}for(var a=0,n=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-all-day-cells"));a<n.length;a++){i=n[a];sf.base.EventHandler.clearEvents(i),this.wireCellEvents(i)}var s=this.element.querySelector(".e-content-wrap"),o=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(o),this.wireCellEvents(o),sf.base.EventHandler.clearEvents(s),sf.base.EventHandler.add(s,"scroll",this.onContentScroll,this),sf.base.EventHandler.add(s,sf.base.Browser.touchMoveEvent,this.onApaptiveMove,this),this.wireExpandCollapseIconEvents(),this.parent.notify(r,{})},n.prototype.renderLayout=function(e){if(this.parent.isServerRenderer())return this.colLevels=this.generateColumnLevels(),void(this.parent.resourceBase&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.activeView.isTimelineView()&&this.parent.resourceBase.setRenderedResources());this.setPanel(sf.base.createElement("div",{className:"e-table-wrap"}));var t=[this.baseCssClass,this.viewClass];t.push(e),this.parent.activeViewOptions.group.byDate&&t.push("e-by-date"),this.parent.activeViewOptions.timeScale.enable||sf.base.addClass([this.element],["e-timescale-disable",this.viewClass]),this.parent.activeViewOptions.allowVirtualScrolling&&t.push("e-virtual-scroll"),this.parent.eventSettings.ignoreWhitespace&&t.push("e-ignore-whitespace"),this.renderPanel(e),sf.base.addClass([this.element],t),this.element.appendChild(this.createTableLayout("e-outer-table")),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent(),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+L)&&this.renderResourceMobileLayout(),this.parent.notify(r,{}),this.parent.updateLayoutTemplates()},n.prototype.renderHeader=function(){var e=sf.base.createElement("tr"),t=sf.base.createElement("td");if(t.appendChild(this.renderDatesHeader()),this.parent.activeViewOptions.timeScale.enable){var i=sf.base.createElement("td",{className:"e-left-indent"});i.appendChild(this.renderLeftIndent()),e.appendChild(i)}e.appendChild(t),sf.base.prepend([e],this.element.querySelector("tbody"))},n.prototype.renderContent=function(){var e=sf.base.createElement("tr"),t=sf.base.createElement("td");if(this.parent.isAdaptive){t.setAttribute("colspan",this.parent.activeViewOptions.timeScale.enable?"2":"1");var i=sf.base.createElement("div",{className:"e-scroll-container"});this.parent.activeViewOptions.timeScale.enable&&i.appendChild(this.renderTimeCells()),i.appendChild(this.renderContentArea()),t.appendChild(i),sf.base.EventHandler.add(i,"scroll",this.onApaptiveScroll,this),sf.base.EventHandler.add(i,sf.base.Browser.touchMoveEvent,this.onApaptiveMove,this),e.appendChild(t)}else{if(t.appendChild(this.renderContentArea()),this.parent.activeViewOptions.timeScale.enable){var a=sf.base.createElement("td");a.appendChild(this.renderTimeCells()),e.appendChild(a)}e.appendChild(t)}this.element.querySelector("tbody").appendChild(e)},n.prototype.renderLeftIndent=function(){for(var e=sf.base.createElement("div",{className:"e-left-indent-wrap"}),t=this.createTableLayout(),i=sf.base.createElement("tr"),a=this.colLevels.length,n=0;n<a;n++){var r=i.cloneNode(),s={className:[this.colLevels[n][0]&&this.colLevels[n][0].className[0]],type:"emptyCells"};if(this.parent.activeViewOptions.showWeekNumber&&-1!==s.className.indexOf("e-header-cells")){s.className.push("e-week-number");var o=p(this.renderDates.slice(-1)[0],this.parent.firstDayOfWeek),l="Day"===this.parent.currentView?u(o):u(this.renderDates.slice(-1)[0]);s.template=[sf.base.createElement("span",{innerHTML:""+l,attrs:{title:this.parent.localeObj.getConstant("week")+" "+l}})]}r.appendChild(this.createTd(s)),t.querySelector("tbody").appendChild(r)}var c=i.cloneNode(),d=sf.base.createElement("div",{attrs:{tabindex:"0",role:"list",title:"Expand-all-day-section","aria-disabled":"false","aria-label":"Expand section"},className:"e-all-day-appointment-section e-appointment-expand "+j+" e-disable"}),h={className:["e-all-day-cells"],type:"emptyCells"},f=this.createTd(h);return f.appendChild(d),c.appendChild(f),t.querySelector("tbody").appendChild(c),e.appendChild(t),e},n.prototype.renderDatesHeader=function(){var e=sf.base.createElement("div",{className:"e-date-header-container"}),t=sf.base.createElement("div",{className:"e-date-header-wrap"});e.appendChild(t);var i=this.createTableLayout(),a=sf.base.createElement("tr"),n=this.colLevels.length,r=this.colLevels[n-1];this.createColGroup(i,r);for(var s=0;s<n;s++){var o=a.cloneNode();sf.base.addClass([o],"e-header-row");for(var l=this.colLevels[s],c=0;c<l.length;c++)o.appendChild(this.createTd(l[c]));i.querySelector("tbody").appendChild(o)}return this.createAllDayRow(i,r),t.appendChild(i),e},n.prototype.createAllDayRow=function(e,t){var i=sf.base.createElement("tr");sf.base.addClass([i],"e-all-day-row");for(var a=0;a<t.length;a++){var n=sf.base.extend({},t[a]);n.className=["e-all-day-cells"],n.type="alldayCells";var r=this.createTd(n);r.setAttribute("data-date",n.date.getTime().toString()),sf.base.isNullOrUndefined(n.groupIndex)||r.setAttribute("data-group-index",""+n.groupIndex),this.wireCellEvents(r),i.appendChild(r)}e.querySelector("tbody").appendChild(i);var s=sf.base.createElement("thead");s.appendChild(this.createEventWrapper("allDay")),sf.base.prepend([s],e)},n.prototype.createTd=function(e){var t=sf.base.createElement("td");if(this.addAttributes(e,t),e.date&&e.type){var a=this.getTdContent(e.date,e.type,e.groupIndex);a&&a.length&&sf.base.append(a,t)}this.parent.isMinMaxDate(m(new Date(""+e.date)))||sf.base.addClass([t],"e-disable-dates"),"resourceHeader"===e.type&&this.setResourceHeaderContent(t,e),"dateHeader"===e.type&&e.className.indexOf("e-header-cells")>=0&&(t.setAttribute("data-date",e.date.getTime().toString()),sf.base.isNullOrUndefined(e.groupIndex)||t.setAttribute("data-group-index",""+e.groupIndex),this.wireMouseEvents(t));var n={elementType:e.type,element:t,date:e.date,groupIndex:e.groupIndex};return this.parent.trigger(i,n),t},n.prototype.wireCellEvents=function(e){sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),this.wireMouseEvents(e)},n.prototype.wireMouseEvents=function(e){sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},n.prototype.renderTimeCells=function(){var e=this,t=sf.base.createElement("div",{className:"e-time-cells-wrap"}),i=this.createTableLayout(),a=sf.base.createElement("tr");return this.getTimeSlotRows((function(t){t.type=t.first?"majorSlot":"minorSlot",t.className=t.last?["e-time-cells","e-time-slots"]:["e-time-slots"];var n=a.cloneNode(),r={date:t.date,type:t.type,className:t.className};return n.appendChild(e.createTd(r)),i.querySelector("tbody").appendChild(n),t})),t.appendChild(i),t},n.prototype.renderContentArea=function(){var e=sf.base.createElement("div",{className:"e-content-wrap"}),t=this.createTableLayout("e-content-table");return this.addAutoHeightClass(t),this.createColGroup(t,this.colLevels.slice(-1)[0]),this.renderContentTable(t),e.appendChild(t),this.wireCellEvents(t.querySelector("tbody")),sf.base.EventHandler.add(e,"scroll",this.onContentScroll,this),sf.base.EventHandler.add(e,sf.base.Browser.touchMoveEvent,this.onApaptiveMove,this),e},n.prototype.renderContentTable=function(e){var t=this,i=sf.base.createElement("tr",{attrs:{role:"row"}}),a=sf.base.createElement("td",{attrs:{role:"gridcell","aria-selected":"false"}}),n=e.querySelector("tbody");this.getTimeSlotRows((function(e){for(var r=i.cloneNode(),s=0,o=t.colLevels[t.colLevels.length-1];s<o.length;s++){var l=o[s],c=t.createContentTd(l,e,a);r.appendChild(c)}return n.appendChild(r),e})),this.renderContentTableHeader(e)},n.prototype.createContentTd=function(e,t,a){var n=a.cloneNode();e.colSpan&&n.setAttribute("colspan",e.colSpan.toString());var r=this.getContentTdClass(t);this.parent.isMinMaxDate(m(new Date(""+e.date)))||r.push("e-disable-dates");var s=m(new Date(""+e.date));f(s,v(t.date));var o="workCells";if(-1!==e.className.indexOf("e-parent-node")&&(r.push("e-resource-group-cells"),o="resourceGroupCells"),this.parent.workHours.highlight&&(this.parent.activeViewOptions.timeScale.enable&&this.isWorkHour(s,e.startHour,e.endHour,e.workDays)||!this.parent.activeViewOptions.timeScale.enable&&this.isWorkDay(s,e.workDays))&&r.push("e-work-hours"),sf.base.addClass([n],r),this.parent.activeViewOptions.cellTemplate){var l={date:M(s),type:o,groupIndex:e.groupIndex},c=this.parent.element.id+"_"+this.parent.activeViewOptions.cellTemplateName+"cellTemplate",p=[].slice.call(this.parent.getCellTemplate()(l,this.parent,"cellTemplate",c,!1));sf.base.append(p,n)}if(n.setAttribute("data-date",s.getTime().toString()),!sf.base.isNullOrUndefined(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive){var d=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex;n.setAttribute("data-group-index",""+d)}var h={elementType:o,element:n,date:s,groupIndex:e.groupIndex};return this.parent.trigger(i,h),n},n.prototype.getContentTdClass=function(e){return e.last?["e-work-cells"]:["e-work-cells","e-alternate-cells"]},n.prototype.renderContentTableHeader=function(e){var t=sf.base.createElement("thead");t.appendChild(this.createEventWrapper()),this.parent.activeViewOptions.timeScale.enable&&t.appendChild(this.createEventWrapper("timeIndicator")),sf.base.prepend([t],e)},n.prototype.createEventWrapper=function(e){void 0===e&&(e="");var t=sf.base.createElement("tr");return this.colLevels.slice(-1)[0].forEach((function(i,a){var n=sf.base.createElement("td",{className:"allDay"===e?"e-all-day-appointment-wrapper":"timeIndicator"===e?"e-timeline-wrapper":"e-day-wrapper",attrs:{"data-date":i.date.getTime().toString()}});if(sf.base.isNullOrUndefined(i.groupIndex)||n.setAttribute("data-group-index",i.groupIndex.toString()),""===e){var r=sf.base.createElement("div",{id:"e-appointment-wrapper-"+a.toString(),className:"e-appointment-wrapper"});n.appendChild(r)}t.appendChild(n)})),t},n.prototype.getScrollableElement=function(){return!this.parent.isAdaptive||this.isTimelineView()||this.parent.isServerRenderer()?this.getContentAreaElement():this.element.querySelector(".e-scroll-container")},n.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-time-cells-wrap")},n.prototype.getEndDateFromStartDate=function(e){var t=6e4*this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,i=new Date(e.getTime());return i.setMilliseconds(i.getMilliseconds()+t),i},n.prototype.getTimeSlotRows=function(e){var t=[],i=this.getStartHour(),a=this.getEndHour(),n=6e4*this.parent.activeViewOptions.timeScale.interval,r=n/this.parent.activeViewOptions.timeScale.slotCount,s=Math.round(864e5/r),o=i.getTime(),l=a.getTime();o!==l&&(s=Math.abs(l-o)/r-(new Date(l).getTimezoneOffset()-new Date(o).getTimezoneOffset())/(60/this.parent.activeViewOptions.timeScale.slotCount)),this.parent.activeViewOptions.timeScale.enable||(s=1);for(var c=this.parent.getStartEndTime(this.parent.workHours.start),p=this.parent.getStartEndTime(this.parent.workHours.end),d=0;d<s;d++){var h=new Date(o+r*d);if(V(h)||new Date(o).getTimezoneOffset()!==h.getTimezoneOffset()){var u=new Date(o).getTimezoneOffset()-h.getTimezoneOffset();h=new Date(h.getTime()-6e4*u)}var f=d%(n/r),m={date:new Date(""+h),startHour:c,endHour:p,first:0===f,middle:f<this.parent.activeViewOptions.timeScale.slotCount-1,last:f===this.parent.activeViewOptions.timeScale.slotCount-1,type:""};e&&e(m),t.push(m)}return t},n.prototype.getModuleName=function(){return"verticalView"},n.prototype.destroy=function(){if(!this.parent.isDestroyed&&(this.clearCurrentTimeIndicatorTimer(),this.element)){var e=this.getContentAreaElement();if(e&&sf.base.EventHandler.remove(e,"scroll",this.onContentScroll),this.parent.resourceBase&&this.parent.resourceBase.destroy(),sf.base.isBlazor()){var t=this.parent.viewCollections[this.viewIndex].option;this.parent.isServerRenderer(t)?("Agenda"!==this.parent.currentView&&"TimelineYear"!==this.parent.currentView||(this.element.style.display="none"),this.parent.resetEventTemplates()):(this.parent.resetLayoutTemplates(),this.parent.resetEventTemplates(),sf.base.remove(this.element))}else sf.base.remove(this.element);this.element=null,this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues()}},n}(Li),Ni=(Si=function(e,t){return(Si=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Si(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Fi=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-day-view",i}return Ni(t,e),t.prototype.getModuleName=function(){return"day"},t}(Bi),Ui=(xi=function(e,t){return(xi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}xi(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Wi=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-week-view",i}return Ui(t,e),t.prototype.getModuleName=function(){return"week"},t}(Bi),zi=(ki=function(e,t){return(ki=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ki(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),_i=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-work-week-view",i}return zi(t,e),t.prototype.startDate=function(){var e=this.renderDates[0];return this.parent.activeViewOptions.group.resources.length>0&&(e=this.parent.resourceBase.getResourceRenderDates()[0]),e},t.prototype.endDate=function(){var e=y(this.renderDates[this.renderDates.length-1],1);return this.parent.activeViewOptions.group.resources.length>0&&(e=y(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0],1)),e},t.prototype.getModuleName=function(){return"workWeek"},t}(Bi),Yi=(Ai=function(e,t){return(Ai=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Ai(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Gi=function(e){function t(t){var i=e.call(this,t)||this;return i.dayNameFormat="wide",i.viewClass="e-month-view",i.isInverseTableSelect=!1,i.monthDates={},i}return Yi(t,e),t.prototype.addEventListener=function(){this.parent.on(s,this.onScrollUIUpdate,this),this.parent.on(a,this.onDataReady,this),this.parent.on("cellClick",this.onCellClick,this)},t.prototype.removeEventListener=function(){this.parent.off(s,this.onScrollUIUpdate),this.parent.off(a,this.onDataReady),this.parent.off("cellClick",this.onCellClick)},t.prototype.onDataReady=function(e){new vi(this.parent).renderAppointments(),this.parent.notify("events-loaded",{})},t.prototype.onCellClick=function(e){},t.prototype.onContentScroll=function(e){this.parent.removeNewEventElement(),this.parent.notify("virtual-scroll",e),this.scrollTopPanel(e.target),this.scrollLeftPanel(e.target)},t.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();t&&(t.scrollTop=e.scrollTop)},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-week-number-wrapper")},t.prototype.onScrollUIUpdate=function(e){var t=this.getHeaderBarHeight(),i=this.getDatesHeaderElement(),a=this.getContentAreaElement(),n=this.parent.element.offsetHeight-t-i.offsetHeight,r=this.getLeftPanelElement();this.setContentHeight(a,r,n);var s=S();if(i.firstElementChild.style[e.cssProperties.rtlBorder]="",i.style[e.cssProperties.rtlPadding]="",a.offsetWidth-a.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=s>0?"1px":"0px",i.style[e.cssProperties.padding]=s>0?s-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]=""),this.setColWidth(a),e.scrollPosition)a.scrollTop=e.scrollPosition.top,a.scrollLeft=e.scrollPosition.left;else{var o=document.querySelector('.e-header-cells[data-date="'+this.parent.getMsFromDate(this.parent.selectedDate)+'"]');a.scrollLeft=null!==o?o.offsetLeft:0}},t.prototype.setContentHeight=function(e,t,i){e.style.height="auto","Month"===this.parent.currentView&&(e.style.height=sf.base.formatUnit(i)),t&&("MonthAgenda"===this.parent.currentView&&(i=this.element.querySelector(".e-content-table").offsetHeight),t.style.height="auto",t.style.height=sf.base.formatUnit(i-this.getScrollXIndent(e)))},t.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);if(this.parent.activeViewOptions.group.resources.length>0){if(e=this.parent.resourceBase.generateResourceLevels(t),"MonthAgenda"===this.parent.currentView&&(e=[t]),this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.lastResourceLevel.length>0){var i=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];e=[this.getDateSlots(i.renderDates,i.workDays)]}}else e.push(t);return this.colLevels=e,e},t.prototype.getDateSlots=function(e,t){for(var i=this.parent.activeViewOptions.showWeekend?7:t.length,a=[],n=0;n<i;n++){var r=["e-header-cells"],s=e.slice(0,i).map((function(e){return e.getDay()}));this.isCurrentMonth(this.parent.selectedDate)&&s.indexOf(this.parent.getCurrentTime().getDay())===n&&r.push("e-current-day"),a.push({date:e[n],type:"monthDay",className:r,colSpan:1,workDays:t})}return a},t.prototype.getDayNameFormat=function(){return this.parent.isAdaptive||this.parent.activeViewOptions.group.resources.length>0?"abbreviated":"wide"},t.prototype.serverRenderLayout=function(){this.setPanel(this.parent.element.querySelector(".e-table-wrap"));for(var e="MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element,t=0,i=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));t<i.length;t++){var a=i[t];sf.base.EventHandler.clearEvents(a),this.wireCellEvents(a)}var n=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(n),this.wireCellEvents(n);var s=this.element.querySelector(".e-content-wrap");sf.base.EventHandler.clearEvents(s),sf.base.EventHandler.add(s,"scroll",this.onContentScroll,this),this.wireExpandCollapseIconEvents(),this.renderAppointmentContainer(),this.parent.uiStateValues.isGroupAdaptive&&!e.querySelector("."+L)&&this.renderResourceMobileLayout(),this.parent.notify(r,{})},t.prototype.renderLayout=function(e){if(this.dayNameFormat=this.getDayNameFormat(),this.parent.isServerRenderer())return this.colLevels=this.generateColumnLevels(),void(this.parent.activeView.isTimelineView()&&this.parent.resourceBase&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.setRenderedResources());this.setPanel(sf.base.createElement("div",{className:"e-table-wrap"}));var t=[this.viewClass];t.push(e),this.parent.activeViewOptions.group.byDate&&t.push("e-by-date"),this.parent.activeViewOptions.allowVirtualScrolling&&t.push("e-virtual-scroll"),this.parent.eventSettings.ignoreWhitespace&&t.push("e-ignore-whitespace"),sf.base.addClass([this.element],t),this.renderPanel(e),this.element.appendChild(this.createTableLayout("e-outer-table")),this.element.querySelector("table").setAttribute("role","presentation"),this.colLevels=this.generateColumnLevels(),this.renderHeader(),this.renderContent();var i="MonthAgenda"===this.parent.currentView?this.parent.activeView.getPanel():this.parent.element;this.parent.uiStateValues.isGroupAdaptive&&!i.querySelector("."+L)&&this.renderResourceMobileLayout(),this.parent.notify(r,{}),this.parent.updateLayoutTemplates()},t.prototype.wireCellEvents=function(e){sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},t.prototype.renderHeader=function(){var e=sf.base.createElement("tr");this.renderLeftIndent(e);var t=sf.base.createElement("td");t.appendChild(this.renderDatesHeader()),e.appendChild(t),sf.base.prepend([e],this.element.querySelector("tbody"))},t.prototype.renderLeftIndent=function(e){this.parent.activeViewOptions.showWeekNumber&&e.appendChild(sf.base.createElement("td",{className:"e-left-indent"}))},t.prototype.renderContent=function(){var e=sf.base.createElement("tr");this.parent.activeViewOptions.showWeekNumber&&e.appendChild(this.renderWeekNumberContent());var t=sf.base.createElement("td"),i=sf.base.createElement("div",{className:"e-content-wrap"}),a=this.renderContentArea();if("Month"===this.parent.currentView)i.appendChild(a);else{var n=sf.base.createElement("div",{className:"e-table-container"});n.appendChild(a),i.appendChild(n)}sf.base.EventHandler.add(i,"scroll",this.onContentScroll,this),t.appendChild(i),e.appendChild(t),this.element.querySelector("tbody").appendChild(e),this.renderAppointmentContainer()},t.prototype.renderWeekNumberContent=function(){var e=this.renderDates.map((function(e){return new Date(+e)})),t=sf.base.createElement("td"),i=sf.base.createElement("div",{className:"e-week-number-wrapper"});t.appendChild(i);var a=this.createTableLayout();i.appendChild(a);for(var n=this.parent.activeViewOptions.showWeekend?7:this.parent.activeViewOptions.workDays.length,r=0,s=this.renderDates.length/n;r<s;r++){var o=u(e.splice(0,n).slice(-1)[0]).toString();a.querySelector("tbody").appendChild(this.createWeekNumberElement(o))}return t},t.prototype.renderAppointmentContainer=function(){},t.prototype.renderDatesHeader=function(){var e=sf.base.createElement("div",{className:"e-date-header-container"}),t=sf.base.createElement("div",{className:"e-date-header-wrap"});e.appendChild(t);var i=this.createTableLayout();this.createColGroup(i,this.colLevels[this.colLevels.length-1]);for(var a=sf.base.createElement("tr"),n=0;n<this.colLevels.length;n++){for(var r=this.colLevels[n],s=a.cloneNode(),o=0;o<r.length;o++){var l=r[o];s.appendChild(this.createHeaderCell(l))}i.querySelector("tbody").appendChild(s)}return t.appendChild(i),e},t.prototype.createHeaderCell=function(e){var t=sf.base.createElement("td");if(this.addAttributes(e,t),"monthDay"===e.type){var a=sf.base.createElement("span",{innerHTML:P(this.parent.getDayNames(this.dayNameFormat)[e.date.getDay()],"single")});t.appendChild(a)}if("resourceHeader"===e.type&&this.setResourceHeaderContent(t,e),"dateHeader"===e.type){if(sf.base.addClass([t],"e-date-header"),t.setAttribute("data-date",e.date.getTime().toString()),this.parent.activeViewOptions.dateHeaderTemplate){var n={date:M(e.date),type:e.type},r=this.parent.element.id+"_"+this.parent.activeViewOptions.dateHeaderTemplateName+"dateHeaderTemplate",s=[].slice.call(this.parent.getDateHeaderTemplate()(n,this.parent,"dateHeaderTemplate",r,!1));s&&s.length&&sf.base.append(s,t)}else{a=sf.base.createElement("span",{className:"e-navigate"});var o=sf.base.isBlazor()?"D":"full",l=this.parent.globalize.formatDate(e.date,{skeleton:o,calendar:this.parent.getCalendarMode()});a.setAttribute("title",P(l,"multiple"));var c=!this.parent.calendarUtil.isMonthStart(e.date)||this.isCurrentDate(e.date)||this.parent.isAdaptive?sf.base.isBlazor()?this.parent.globalize.formatDate(e.date,{format:"d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{skeleton:"d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{format:"MMM d",calendar:this.parent.getCalendarMode()});a.innerHTML=P(c,"single"),t.appendChild(a)}this.wireCellEvents(t)}var p={elementType:e.type,element:t,date:e.date,groupIndex:e.groupIndex};return sf.base.isBlazor()||this.parent.trigger(i,p),t},t.prototype.getContentSlots=function(){if(!this.colLevels[this.colLevels.length-1]||!this.colLevels[this.colLevels.length-1][0])return[];var e=[],t=function(t,i,a,n){var r={date:new Date(+i),groupIndex:a.groupIndex,workDays:a.workDays,type:"monthCells",className:n||["e-work-cells"]};e[t]||(e[t]=[]),e[t].push(r)},i="MonthAgenda"!==this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0;if(!i||this.parent.uiStateValues.isGroupAdaptive||this.parent.activeViewOptions.group.byDate)for(h=this.renderDates.map((function(e){return new Date(+e)})),u=this.parent.activeViewOptions.showWeekend?7:this.parent.activeViewOptions.workDays.length,f=0;f<this.renderDates.length/u;f++)for(var a=0,n=h.splice(0,u);a<n.length;a++){g=n[a];if(i)for(var r=this.colLevels[this.colLevels.length-1],s=r.slice(0,r.length/u),o=0;o<s.length;o++){var l=void 0;0!==o&&(l=["e-work-cells","e-disable-date"]),t(f,g,s[o],l)}else t(f,g,this.colLevels[this.colLevels.length-1][0])}else for(var c=0,p=this.colLevels[this.colLevels.length-2];c<p.length;c++)for(var d=p[c],h=d.renderDates.map((function(e){return new Date(+e)})),u=this.parent.activeViewOptions.showWeekend?7:d.workDays.length,f=0;f<d.renderDates.length/u;f++)for(var m=0,v=h.splice(0,u);m<v.length;m++){var g;t(f,g=v[m],d)}return e},t.prototype.updateClassList=function(e){this.isOtherMonth(e.date)&&e.className.push("e-other-month"),this.parent.isMinMaxDate(e.date)||e.className.push("e-disable-dates"),"MonthAgenda"===this.parent.currentView&&this.parent.isSelectedDate(e.date)&&e.className.push("e-selected-cell")},t.prototype.isOtherMonth=function(e){return e.getTime()<this.monthDates.start.getTime()||e.getTime()>this.monthDates.end.getTime()},t.prototype.renderContentArea=function(){var e=this.createTableLayout("e-content-table");this.addAutoHeightClass(e),"TimelineMonth"===this.parent.currentView&&this.createColGroup(e,this.colLevels[this.colLevels.length-1]);var t=new Date(this.parent.selectedDate.getTime());this.monthDates={start:this.parent.calendarUtil.firstDateOfMonth(t),end:this.parent.calendarUtil.lastDateOfMonth(b(t,this.parent.activeViewOptions.interval-1))};var i=e.querySelector("tbody");return sf.base.append(this.getContentRows(),i),this.wireCellEvents(i),e},t.prototype.getContentRows=function(){for(var e=[],t=sf.base.createElement("tr",{attrs:{role:"row"}}),i=sf.base.createElement("td",{attrs:{role:"gridcell","aria-selected":"false"}}),a=this.getContentSlots(),n=0;n<a.length;n++){for(var r=t.cloneNode(),s=0;s<a[n].length;s++){var o=this.createContentTd(a[n][s],i);r.appendChild(o)}e.push(r)}return e},t.prototype.createContentTd=function(e,t){var a=t.cloneNode();e.colSpan&&a.setAttribute("colspan",e.colSpan.toString()),this.updateClassList(e);var n=e.type;if(-1!==e.className.indexOf("e-parent-node")&&(e.className.push("e-resource-group-cells"),n="resourceGroupCells"),this.parent.workHours.highlight&&this.isWorkDay(e.date,e.workDays)&&e.className.push("e-work-days"),this.isCurrentDate(e.date)&&e.className.push("e-current-date"),sf.base.addClass([a],e.className),a.setAttribute("data-date",e.date.getTime().toString()),!sf.base.isNullOrUndefined(e.groupIndex)||this.parent.uiStateValues.isGroupAdaptive){var r=this.parent.uiStateValues.isGroupAdaptive?this.parent.uiStateValues.groupIndex:e.groupIndex;a.setAttribute("data-group-index",""+r)}if(this.renderDateHeaderElement(e,a),this.parent.activeViewOptions.cellTemplate){var s={date:M(e.date),type:n,groupIndex:e.groupIndex},o=this.parent.element.id+"_"+this.parent.activeViewOptions.cellTemplateName+"cellTemplate",l=[].slice.call(this.parent.getCellTemplate()(s,this.parent,"cellTemplate",o,!1));sf.base.append(l,a)}var c={elementType:n,element:a,date:e.date,groupIndex:e.groupIndex};return sf.base.isBlazor()||this.parent.trigger(i,c),a},t.prototype.renderDateHeaderElement=function(e,t){if("TimelineMonth"!==this.parent.currentView){var i=sf.base.createElement("div",{className:"e-date-header"});if(this.parent.activeViewOptions.cellHeaderTemplate){var a={date:M(e.date),type:e.type,groupIndex:e.groupIndex},n=this.parent.element.id+"_"+this.parent.activeViewOptions.cellHeaderTemplateName+"cellHeaderTemplate",r=[].slice.call(this.parent.getCellHeaderTemplate()(a,this.parent,"cellHeaderTemplate",n,!1));sf.base.append(r,i)}else{var s=!this.parent.calendarUtil.isMonthStart(e.date)||this.isCurrentDate(e.date)||this.parent.isAdaptive?sf.base.isBlazor()?this.parent.globalize.formatDate(e.date,{format:"d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{skeleton:"d",calendar:this.parent.getCalendarMode()}):this.parent.globalize.formatDate(e.date,{format:"MMM d",calendar:this.parent.getCalendarMode()});i.innerHTML=P(s,"single")}if(t.appendChild(i),"month"===this.getModuleName()){sf.base.addClass([i],"e-navigate");var o=sf.base.isBlazor()?"D":"full",l=this.parent.globalize.formatDate(e.date,{skeleton:o,calendar:this.parent.getCalendarMode()});i.setAttribute("aria-label",l)}}},t.prototype.getMonthStart=function(e){var t=c(this.parent.calendarUtil.firstDateOfMonth(e),this.parent.activeViewOptions.firstDayOfWeek);return new Date(t.getFullYear(),t.getMonth(),t.getDate())},t.prototype.getMonthEnd=function(e){var t=b(e,this.parent.activeViewOptions.interval-1);return y(c(this.parent.calendarUtil.lastDateOfMonth(t),this.parent.activeViewOptions.firstDayOfWeek),6)},t.prototype.getRenderDates=function(e){var t=[],i=m(this.parent.selectedDate),a=this.getMonthStart(i),n=this.getMonthEnd(i);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(a,e))&&t.push(a),a=y(a,1)}while(a.getTime()<=n.getTime());return e||(this.renderDates=t),this.parent.headerModule&&this.parent.headerModule.previousNextIconHandler(),t},t.prototype.getNextPreviousDate=function(e){return b(this.parent.selectedDate,"next"===e?this.parent.activeViewOptions.interval:-this.parent.activeViewOptions.interval)},t.prototype.getEndDateFromStartDate=function(e){return y(new Date(e.getTime()),1)},t.prototype.getDateRangeText=function(){if(this.parent.isAdaptive||sf.base.isNullOrUndefined(this.parent.activeViewOptions.dateFormat)){if(this.parent.activeViewOptions.interval>1){var e=b(h(this.parent.selectedDate),this.parent.activeViewOptions.interval-1);return this.parent.selectedDate.getFullYear()===e.getFullYear()?P(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" - "+this.parent.globalize.formatDate(e,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+e.getFullYear(),"single"):P(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM",calendar:this.parent.getCalendarMode()})+" "+this.parent.selectedDate.getFullYear()+" - "+this.parent.globalize.formatDate(e,{format:"MMMM ",calendar:this.parent.getCalendarMode()})+e.getFullYear(),"single")}return P(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")}return this.formatDateRange(this.parent.selectedDate)},t.prototype.getLabelText=function(e){return this.parent.localeObj.getConstant(e)+" of "+P(this.parent.globalize.formatDate(this.parent.selectedDate,{format:"MMMM y",calendar:this.parent.getCalendarMode()}),"single")},t.prototype.createWeekNumberElement=function(e){var t=sf.base.createElement("tr"),a=sf.base.createElement("td",{className:"e-week-number",attrs:{title:e?this.parent.localeObj.getConstant("week")+" "+e:""},innerHTML:e||""});t.appendChild(a);var n={elementType:"weekNumberCell",element:a};return sf.base.isBlazor()||this.parent.trigger(i,n),t},t.prototype.unwireEvents=function(){},t.prototype.getModuleName=function(){return"month"},t.prototype.destroy=function(){if(!this.parent.isDestroyed&&this.element){if(this.unwireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),sf.base.isBlazor()){var e=this.parent.viewCollections[this.viewIndex].option;this.parent.isServerRenderer(e)?(-1===["Month","MonthAgenda","TimelineMonth"].indexOf(this.parent.currentView)&&(this.element.style.display="none"),this.parent.resetEventTemplates()):(this.parent.resetLayoutTemplates(),this.parent.resetEventTemplates(),sf.base.remove(this.element))}else sf.base.remove(this.element);this.element=null,this.parent.scheduleTouchModule&&this.parent.scheduleTouchModule.resetValues()}},t}(Li),Qi=function(){function e(e){this.parent=e,this.viewBase=new Li(e)}return e.prototype.createAgendaContentElement=function(e,t,i,a,n){var r,s=this.parent.eventFields;if("noEvents"===e){var o=[{subject:this.parent.localeObj.getConstant("noEvents")}];r=sf.lists.ListBase.createList(this.parent.createElement,o,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass,template:"<div class=e-no-event>${subject}</div>"})}else{r=sf.lists.ListBase.createList(this.parent.createElement,t,{moduleName:"agenda",listClass:this.parent.activeView.viewClass,itemClass:this.parent.activeView.viewClass});for(var l=function(e,i){var o=sf.base.createElement("div",{className:"e-appointment",attrs:{"data-id":"Appointment_"+t[e][c.parent.eventFields.id],"data-guid":t[e].Guid,role:"button",tabindex:"0","aria-readonly":c.parent.eventBase.getReadonlyAttribute(t[e]),"aria-selected":"false","aria-grabbed":"true","aria-label":c.parent.getAnnocementString(t[e])}});sf.base.isNullOrUndefined(n)||o.setAttribute("data-group-index",n.toString()),c.parent.eventBase.applyResourceColor(o,t[e],"borderColor",a);var l=void 0;if(sf.base.isNullOrUndefined(c.parent.activeViewOptions.eventTemplate))l=c.createAppointment(t[e]);else{sf.base.addClass([o],"e-template");var p=c.parent.element.id+"_"+c.parent.activeViewOptions.eventTemplateName+"eventTemplate",d=R(t[e],c.parent.eventFields);if(l=c.parent.getAppointmentTemplate()(d,c.parent,"eventTemplate",p,!1),!sf.base.isNullOrUndefined(t[e][s.recurrenceRule])){var h=t[e][s.id]===t[e][s.recurrenceID]?"e-recurrence-icon":"e-recurrence-edit-icon";o.appendChild(sf.base.createElement("div",{className:j+" "+h}))}}sf.base.append([].slice.call(l),o),A(r.children[e]),r.children[e].appendChild(o);var u={data:sf.base.extend({},t[e],null,!0),element:r.children[e],cancel:!1};c.parent.trigger("eventRendered",u,(function(t){t.cancel&&sf.base.remove(r.children[e])}))},c=this,p=0,d=t.length;p<d;p++)l(p)}return i.appendChild(r),("MonthAgenda"===this.parent.currentView&&this.parent.activeViewOptions.group.resources.length>0||"Agenda"===this.parent.currentView)&&sf.base.addClass([i],"e-day-border"),i},e.prototype.createAppointment=function(e){var t=this.parent.eventFields,i=e[t.subject]||this.parent.eventSettings.fields.subject.default,a=e[t.location]||this.parent.eventSettings.fields.location.default,n=sf.base.createElement("div",{className:"e-subject-wrap"});if(sf.base.isNullOrUndefined(a)||""===a||(i+=","),n.appendChild(sf.base.createElement("div",{className:"e-subject",innerHTML:i})),sf.base.isNullOrUndefined(a)||""===a||n.appendChild(sf.base.createElement("div",{className:"e-location",innerHTML:a})),!sf.base.isNullOrUndefined(e[t.recurrenceRule])){var r=e[t.id]===e[t.recurrenceID]?"e-recurrence-icon":"e-recurrence-edit-icon";n.appendChild(sf.base.createElement("div",{className:j+" "+r}))}var s=e[t.startTime],o=e[t.endTime],l=e[t.isAllDay],c=this.parent.localeObj.getConstant("allDay"),p=this.parent.getTimeString(s)+" - "+this.parent.getTimeString(o);sf.base.isNullOrUndefined(e.data)||(c=((o.getTimezoneOffset()!==s.getTimezoneOffset()?o.getTime()-s.getTime()+36e5:o.getTime()-s.getTime())/864e5>=1?c:p)+" ("+this.parent.localeObj.getConstant("day")+" "+e.data.index+"/"+e.data.count+")");var d=!sf.base.isNullOrUndefined(e.data)||l?c:p;return[n,sf.base.createElement("div",{className:"e-date-time",innerHTML:d})]},e.prototype.processAgendaEvents=function(e){var t=[];if(sf.base.isNullOrUndefined(e))return t;for(var i=0,a=e;i<a.length;i++){var n=a[i],r=this.parent.eventBase.splitEventByDay(n);t=t.concat(r.length>1?r:n)}return t},e.prototype.wireEventActions=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));e<t.length;e++){var i=t[e];this.parent.eventBase.wireAppointmentEvents(i,null,!0)}for(var a=0,n=[].slice.call(this.parent.element.querySelectorAll(".e-m-date"));a<n.length;a++){i=n[a];sf.base.EventHandler.add(i,"click",this.parent.agendaModule.dayNavigationClick,this)}},e.prototype.calculateResourceTableElement=function(e,t,i){if(sf.base.isNullOrUndefined(this.parent.resourceBase.lastResourceLevel)){var a=this.viewBase.getDateSlots(this.viewBase.renderDates,this.parent.activeViewOptions.workDays);this.parent.resourceBase.generateResourceLevels(a)}for(var n=y(new Date(i.getTime()),t),r=this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView?t:1,s=this.parent.resourceBase.resourceCollection,o=this.parent.resourceBase.lastResourceLevel,l=i,c=0;c<r;c++){var p=[],d=[],h=0,u=void 0,f=void 0,m=y(l,c),v=this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView?y(m,1):n,g=this.parent.eventBase.filterEvents(m,v);if(g.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView){for(var b=0;b<o.length;b++){t=this.parent.activeViewOptions.group.byDate&&"MonthAgenda"!==this.parent.currentView?1:t;var T=[];i=m;var w=this.parent.eventBase.filterEvents(i,n,g,o[b]);if(w.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView)for(var D=0;D<t;D++){var C=this.parent.eventBase.filterEvents(i,y(i,1),w,void 0);if((C.length>0||!this.parent.hideEmptyAgendaDays||"MonthAgenda"===this.parent.currentView)&&(T.push(C[0]),u={rowSpan:1,type:"eventColumn",resource:s[s.length-1],groupIndex:o[b].groupIndex,groupOrder:o[b].groupOrder,resourceData:o[b].resourceData,eventData:C,date:i},f={rowSpan:1,type:"dateColumn",resource:s[s.length-1],groupOrder:o[b].groupOrder,resourceData:o[b].resourceData,date:i},p[h]||(p[h]=[]),p[h].push(u),p[h].push(f),h++),(i=y(i,1)).getTime()>=n.getTime()||this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){p[p.length-1][1].cssClass="e-day-border";var E={rowSpan:T.length,type:"resourceColumn",resource:s[s.length-1],groupOrder:o[b].groupOrder.slice(0,-1),resourceData:o[b].resourceData,groupIndex:p.length-T.length,className:["e-resource-name"],date:i};p[p.length-T.length].push(E),d.push(sf.base.extend({},E,null,!0));break}}}for(var O=s.slice(0,-1),S=[],x=0,k=0;k<O.length;k++){T=O[O.length-(k+1)].dataSource;for(var A=0;A<T.length;A++)for(var V=0,M=0;M<d.length;M++)d[M].groupOrder[O.length-(k+1)]===T[A][O[O.length-(k+1)].idField]&&(x+=d[M].rowSpan,S.push(sf.base.extend({},d[M],null,!0))),++V===d.length&&S.length>0&&(S[0].rowSpan=x,S[0].type="parentColumnLevel_"+(k+1),S[0].resource=O[O.length-(k+1)],S[0].resourceData=T[A],S[0].date=i,p[S[0].groupIndex].push(S[0]),S=[],x=0)}this.createResourceTableRow(p,e)}}0===this.parent.eventBase.filterEvents(l,n).length&&!this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&this.renderEmptyContent(e,l)},e.prototype.createResourceTableRow=function(e,t){var i,a,n,r=sf.base.createElement("tr",{attrs:{role:"row"}}),s=sf.base.createElement("td",{attrs:{role:"gridcell","aria-selected":"false"}}),o=0;if(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){for(var l=[],c=this.parent.resourceBase.resourceCollection.slice(0,-1),p=0;p<e.length;p++)l=l.concat(e[p]);n=c.length>0?"parentColumnLevel_"+c.length:"resourceColumn";for(var d=l.filter((function(e){return e.type===n})),h=0;h<d.length;h++)o+=d[h].rowSpan}for(var u=0;u<e.length;u++){i=r.cloneNode();for(var f=e[u].length-1;f>=0;f--){var m=e[u][f],v=s.cloneNode();if("dateColumn"===m.type){if(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView){a=e[u][f];continue}v.setAttribute("data-date",m.date.getTime().toString()),v.appendChild(this.createDateHeaderElement(m.date));var g=["e-agenda-cells","e-date-column"];m.cssClass&&g.push(m.cssClass),sf.base.addClass([v],g),i.appendChild(v)}else if("eventColumn"===m.type){var y=0===m.eventData.length?"noEvents":"data";(v=this.createAgendaContentElement(y,m.eventData,v,m.groupOrder,m.groupIndex)).setAttribute("data-date",m.date.getTime().toString()),(this.parent.activeViewOptions.group.byDate||"MonthAgenda"===this.parent.currentView)&&sf.base.addClass([v],["e-agenda-cells","e-day-padding"]),i.appendChild(v)}else v.setAttribute("rowspan",m.rowSpan.toString()),sf.base.addClass([v],"e-resource-column"),this.viewBase.setResourceHeaderContent(v,m,m.className[0]),i.appendChild(v)}if(this.parent.activeViewOptions.group.byDate&&0===u&&"MonthAgenda"!==this.parent.currentView){(v=s.cloneNode()).setAttribute("data-date",a.date.getTime().toString()),v.setAttribute("rowspan",o.toString()),v.appendChild(this.createDateHeaderElement(a.date)),sf.base.addClass([v],["e-agenda-cells","e-date-column","e-date-border"]);var b=C(this.parent.selectedDate.getTime(),a.date.getTime());if(i.setAttribute("aria-rowindex",b.toString()),this.parent.element.querySelector('.e-agenda-view tr[aria-rowindex="'+b+'"]'))break;i.insertBefore(v,i.childNodes[0])}t.appendChild(i)}},e.prototype.createDateHeaderElement=function(e){var t;if(this.parent.activeViewOptions.dateHeaderTemplate){t=sf.base.createElement("div",{className:"e-day-date-header"});var i={date:M(e),type:"dateHeader"},a=this.parent.element.id+"_"+this.parent.activeViewOptions.dateHeaderTemplateName+"dateHeaderTemplate",n=[].slice.call(this.parent.getDateHeaderTemplate()(i,this.parent,"dateHeaderTemplate",a,!1));sf.base.append(n,t)}else t=this.viewBase.getMobileDateElement(e,"e-day-date-header");return t},e.prototype.renderEmptyContent=function(e,t){var i=this.createTableRowElement(t,"noEvents"),a=i.children[0],n=sf.base.createElement("div",{className:"e-empty-event",innerHTML:this.parent.localeObj.getConstant("noEvents")});a.appendChild(n),e.appendChild(i)},e.prototype.createTableRowElement=function(e,t){var i=C(this.parent.selectedDate.getTime(),e.getTime()),a=sf.base.createElement("tr",{attrs:{role:"row","aria-rowindex":i.toString()}}),n=sf.base.createElement("td",{attrs:{class:"monthHeader"===t?"e-month-header":"e-agenda-cells",role:"gridcell","aria-selected":"false","aria-colindex":i.toString(),"data-date":e.getTime().toString()}}),r=n.cloneNode(),s=n.cloneNode();return a.appendChild(r),"noEvents"!==t&&a.appendChild(s),a},e}(),Xi=(Vi=function(e,t){return(Vi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Vi(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ki=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-agenda-view",i.isInverseTableSelect=!1,i.agendaDates={},i.virtualScrollTop=1,i.agendaBase=new Qi(t),i}return Xi(t,e),t.prototype.getModuleName=function(){return"agenda"},t.prototype.renderLayout=function(){this.agendaDates={},this.element=sf.base.createElement("div",{className:"e-table-wrap"}),sf.base.addClass([this.element],this.viewClass),this.element.appendChild(this.createTableLayout("e-outer-table")),this.element.querySelector("table").setAttribute("role","presentation"),this.parent.element.querySelector(".e-table-container").appendChild(this.element);var e=sf.base.createElement("tr");this.element.querySelector("tbody").appendChild(e);var t=sf.base.createElement("td");e.appendChild(t);var i=sf.base.createElement("div",{className:"e-content-wrap"});t.appendChild(i);var a=this.createTableLayout("e-content-table");i.appendChild(a);var n=a.querySelector("tbody"),s=m(this.parent.selectedDate);this.agendaBase.renderEmptyContent(n,s),this.wireEvents(),this.parent.resourceBase&&this.parent.resourceBase.generateResourceLevels([{renderDates:this.parent.activeView.renderDates}]),this.parent.uiStateValues.isGroupAdaptive&&!this.parent.element.querySelector("."+L)&&this.renderResourceMobileLayout(),this.parent.notify(r,{})},t.prototype.eventLoad=function(e){this.dataSource=sf.base.extend([],this.parent.eventsData,null,!0);for(var t=0,i=this.parent.eventsData;t<i.length;t++){delete i[t].generatedDates}var a=e.processedData;if(this.parent.uiStateValues.isGroupAdaptive){var n=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];this.dataSource=this.parent.eventBase.filterEventsByResource(n,this.dataSource),a=this.parent.eventBase.filterEventsByResource(n,a)}this.parent.eventsProcessed=this.agendaBase.processAgendaEvents(a);var r=m(this.parent.selectedDate),s=this.element.querySelector(".e-content-table tbody");A(s),this.renderInitialContent(s,r),this.agendaBase.wireEventActions(),sf.base.closest(s,".e-content-wrap").scrollTop=1,this.parent.notify("events-loaded",{})},t.prototype.refreshEvent=function(e){for(var t=[],i=0,a=this.dataSource;i<a.length;i++){var n=a[i],r=this.parent.eventFields,s=n;sf.base.isNullOrUndefined(s[r.recurrenceID])&&!sf.base.isNullOrUndefined(s[r.recurrenceRule])&&!sf.base.isNullOrUndefined(s.generatedDates)&&e>=s.generatedDates.end&&(t=t.concat(this.parent.eventBase.generateOccurrence(s,e)))}this.parent.eventsProcessed=this.parent.eventsProcessed.concat(this.agendaBase.processAgendaEvents(t))},t.prototype.renderInitialContent=function(e,t){var i=sf.base.createElement("tbody"),a=new Date(t.getTime()),n=this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays?this.getEndDateFromStartDate(a):y(a,this.parent.agendaDaysCount);if(this.renderContent(i,a,n),sf.base.append([].slice.call(i.childNodes),e),this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays&&this.parent.eventsData.length>0)for(var r=this.getContentAreaElement();r.offsetWidth<=r.clientWidth;){var s=sf.base.createElement("tbody");if(a=y(n=a,-this.parent.agendaDaysCount),this.renderContent(s,a,n),sf.base.prepend([].slice.call(s.childNodes),e),a<=this.parent.minDate)break}e.childNodes.length<=0&&this.agendaBase.renderEmptyContent(e,t)},t.prototype.renderContent=function(e,t,i){var a,n=this.parent.eventFields,r=new Date(t.getTime()),s=this.appointmentFiltering(r,i);if(s.length>0&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.hideEmptyAgendaDays){var o=s;t=o[0][n.startTime],t=new Date(new Date(t.getTime()).setHours(0,0,0,0)),this.updateHeaderText(o[0][n.startTime])}if(!this.parent.hideEmptyAgendaDays||this.parent.agendaDaysCount>0&&s.length>0){if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var l=t;this.parent.activeViewOptions.group.byDate||(this.parent.activeViewOptions.allowVirtualScrolling=!1,l=r,this.parent.headerModule&&(this.parent.headerModule.updateDateRange(this.parent.activeView.getDateRangeText()),this.parent.headerModule.updateHeaderItems("remove"))),this.agendaBase.calculateResourceTableElement(e,this.parent.agendaDaysCount,l)}else for(var c=0;c<this.parent.agendaDaysCount;c++){var p;p=this.appointmentFiltering(t);var d=this.agendaBase.createTableRowElement(t,"data");if(!this.element.querySelector('tr[aria-rowindex="'+parseInt(d.getAttribute("aria-rowindex"),10)+'"]')){var h=d.children[0],u=d.children[1];if(p.length>0||!this.parent.hideEmptyAgendaDays&&0===p.length){var f=this.parent.hideEmptyAgendaDays||0!==p.length?"data":"noEvents";h.appendChild(this.agendaBase.createDateHeaderElement(t)),d.appendChild(h);var m=this.agendaBase.createAgendaContentElement(f,p,u);d.appendChild(m),m.querySelectorAll("li").length>0&&e.appendChild(d)}else this.parent.activeViewOptions.allowVirtualScrolling&&c--;if(this.isCurrentDate(new Date(t.getTime()))&&sf.base.addClass(h.childNodes,"e-current-day"),(t=y(t,1)).getTime()>i.getTime())break}}a=new Date(t.getTime()-864e5)}this.agendaDates={start:r,end:a}},t.prototype.agendaScrolling=function(e){this.parent.quickPopup.quickPopupHide(),this.parent.activeViewOptions.allowVirtualScrolling&&this.virtualScrolling(e)},t.prototype.virtualScrolling=function(e){var t,i=e.target,a=i.scrollTop,n=i.scrollHeight,r=a+i.clientHeight,s=this.virtualScrollTop<a?"next":"previous",o=i.querySelector("tbody"),l=sf.base.createElement("tbody"),c=this.getElementFromScrollerPosition(e,s),p=this.parent.getDateFromElement(c);if(0===a){if(t=this.getPreviousNextDate(y(p,-1),s),this.appointmentFiltering(t.start,t.end).length>0||!this.parent.hideEmptyAgendaDays){this.renderContent(l,t.start,t.end),sf.base.prepend([].slice.call(l.childNodes),o),this.agendaBase.wireEventActions();for(var d=0,h=o.children;d<h.length;d++)if(h[d].getAttribute("aria-rowindex")===c.getAttribute("aria-colindex")){var u=h[d].offsetTop-this.element.querySelector(".e-agenda-item").offsetHeight;i.scrollTop=u;break}this.updateHeaderText(p)}}else r===n?(t=this.getPreviousNextDate(y(p,1),s),(this.appointmentFiltering(t.start,t.end).length>0||!this.parent.hideEmptyAgendaDays)&&(this.renderContent(l,t.start,t.end),sf.base.append([].slice.call(l.childNodes),o),this.agendaBase.wireEventActions(),this.updateHeaderText(p))):this.updateHeaderText(p);this.virtualScrollTop=a;var f=this.parent.eventBase.getSelectedAppointments();f.length>0&&f[f.length-1].focus()},t.prototype.getElementFromScrollerPosition=function(e,t){var i,a,n=e.target,r=n.scrollTop,s=n.scrollHeight,o=r+n.clientHeight,l=[].slice.call(n.querySelectorAll(".e-agenda-item"));if(l.length>0)if(0===r)a=l[0],i=sf.base.closest(a,".e-agenda-cells");else if(o===s)a=l[l.length-1],i=sf.base.closest(a,".e-agenda-cells");else for(var c=0,p=l.length;c<p;c++)if((a=l[c]).getBoundingClientRect().top>=0){i=sf.base.closest(a,".e-agenda-cells");break}return i},t.prototype.updateHeaderText=function(e){this.parent.showHeaderBar&&this.parent.headerModule.updateDateRange(this.getDateRangeText(e))},t.prototype.getPreviousNextDate=function(e,t){var i=new Date(e.getTime()),a=this.getStartDateFromEndDate(e),n=this.getEndDateFromStartDate(e),r=0;do{if((this.appointmentFiltering(i).length>0||!this.parent.hideEmptyAgendaDays)&&r++,(i=y(i,"next"===t?1:-1))<a||i>n)break}while(r!==this.parent.agendaDaysCount);var s=y(i,"next"===t?-1:1);return"next"===t?{start:e,end:y(s,1)}:{start:s,end:y(e,1)}},t.prototype.appointmentFiltering=function(e,t){var i,a;!sf.base.isNullOrUndefined(e)&&sf.base.isNullOrUndefined(t)?(i=m(new Date(e.getTime())),a=f(new Date(i.getTime()),864e5)):(i=new Date(e.getTime()),a=new Date(t.getTime()));var n=this.parent.eventBase.filterEvents(i,a);return 0===n.length&&(this.refreshEvent(e),n=this.parent.eventBase.filterEvents(i,a)),n},t.prototype.getStartDateFromEndDate=function(e){var t,i=this.parent.eventFields;if(this.parent.eventsProcessed.length>0){var a=Math.min.apply(Math,this.parent.eventsProcessed.map((function(e){return e[i.startTime].getTime()})));t=this.parent.hideEmptyAgendaDays?new Date(a):this.parent.minDate}else t=this.parent.hideEmptyAgendaDays?b(e,-1):this.parent.minDate;return m(t)},t.prototype.getEndDateFromStartDate=function(e){var t,i=this.parent.eventFields;if(this.parent.eventsProcessed.length>0){var a=Math.max.apply(Math,this.parent.eventsProcessed.map((function(e){return e[i.endTime].getTime()})));t=this.parent.hideEmptyAgendaDays?new Date(a):this.parent.maxDate}else t=this.parent.hideEmptyAgendaDays?b(e,1):this.parent.maxDate;return m(y(t,1))},t.prototype.getNextPreviousDate=function(e){var t="next"===e?1:-1;return y(this.parent.selectedDate,t)},t.prototype.startDate=function(){return m(this.parent.selectedDate)},t.prototype.endDate=function(){return this.parent.activeViewOptions.allowVirtualScrolling?this.getEndDateFromStartDate(this.startDate()):y(this.startDate(),this.parent.agendaDaysCount)},t.prototype.getDateRangeText=function(e){var t=this.parent.activeViewOptions.dateFormat?this.parent.activeViewOptions.dateFormat:"MMMM y";if(this.parent.activeViewOptions.allowVirtualScrolling||this.parent.isAdaptive){var i=sf.base.isNullOrUndefined(e)?this.parent.selectedDate:e;return P(this.parent.globalize.formatDate(i,{format:t,calendar:this.parent.getCalendarMode()}),"multiple")}var a=this.parent.selectedDate,n=y(a,this.parent.agendaDaysCount-1);return this.formatDateRange(a,n)},t.prototype.dayNavigationClick=function(e){var t=this.parent.getDateFromElement(sf.base.closest(e.currentTarget,".e-agenda-cells"));sf.base.isNullOrUndefined(t)||this.parent.isAdaptive||!this.parent.isMinMaxDate(t)||(this.parent.setScheduleProperties({selectedDate:t}),this.parent.changeView("Day",e))},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element.querySelector(".e-content-wrap"),"scroll",this.agendaScrolling,this)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element.querySelector(".e-content-wrap"),"scroll",this.agendaScrolling);for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-m-date"));e<t.length;e++){var i=t[e];sf.base.EventHandler.remove(i,"click",this.dayNavigationClick)}},t.prototype.addEventListener=function(){this.parent.on(s,this.onAgendaScrollUiUpdate,this),this.parent.on(a,this.eventLoad,this)},t.prototype.removeEventListener=function(){this.parent.off(s,this.onAgendaScrollUiUpdate),this.parent.off(a,this.eventLoad)},t.prototype.onAgendaScrollUiUpdate=function(){var e=this.getHeaderBarHeight();this.parent.headerModule&&(this.parent.activeViewOptions.allowVirtualScrolling?this.parent.headerModule.updateHeaderItems("add"):this.parent.headerModule.updateHeaderItems("remove")),this.element.querySelector(".e-content-wrap").style.height=sf.base.formatUnit(this.parent.element.offsetHeight-e)},t.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.unWireEvents(),this.parent.resourceBase&&this.parent.resourceBase.destroy(),sf.base.isBlazor()&&(this.parent.resetLayoutTemplates(),this.parent.resetEventTemplates()),sf.base.remove(this.element),this.element=null,this.parent.headerModule&&this.parent.activeViewOptions.allowVirtualScrolling&&this.parent.headerModule.updateHeaderItems("remove"))},t}(Li),Zi=(Mi=function(e,t){return(Mi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Mi(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ji=function(e){function t(t){var i=e.call(this,t)||this;return i.dayNameFormat="narrow",i.viewClass="e-month-agenda-view",i.agendaDates={},i.agendaBase=new Qi(t),i.monthAgendaDate=new Date(""+t.selectedDate),i}return Zi(t,e),t.prototype.renderAppointmentContainer=function(){if(this.parent.isServerRenderer())this.setEventWrapperHeight();else{var e=this.getContentAreaElement(),t=sf.base.createElement("div",{className:"e-wrapper-container"});e.appendChild(t);var i=sf.base.createElement("div",{className:"e-appointment-wrap"});t.appendChild(i),this.appendAppContainer(i),this.setEventWrapperHeight()}},t.prototype.getDayNameFormat=function(){return this.parent.isAdaptive?"narrow":"abbreviated"},t.prototype.setEventWrapperHeight=function(){var e=(this.parent.headerModule?this.parent.headerModule.getHeaderElement().offsetHeight:0)+2,t=this.parent.element.querySelector(".e-schedule-resource-toolbar");t&&(e+=t.offsetHeight);var i=this.getContentAreaElement().firstElementChild,a=this.element.querySelector(".e-date-header-wrap"),n=this.parent.element.offsetHeight-e-a.offsetHeight-i.offsetHeight,r=this.element.querySelector(".e-wrapper-container"),s=this.element.querySelector(".e-appointment-wrap");r.style.height=s.style.height=sf.base.formatUnit(n)},t.prototype.onDataReady=function(e){this.setEventWrapperHeight(),this.clearElements();var t=e.processedData;if(this.parent.uiStateValues.isGroupAdaptive){var i=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];t=this.parent.eventBase.filterEventsByResource(i,t)}this.parent.eventsProcessed=this.agendaBase.processAgendaEvents(t);for(var a=0,n=0,r=this.renderDates;n<r.length;n++){var s=r[n],o=this.appointmentFiltering(s),l=this.element.querySelectorAll(".e-work-cells")[a];o.length>0&&(l.querySelector(".e-appointment-indicator")||l.appendChild(sf.base.createElement("div",{className:"e-appointment-indicator"})),s.getTime()===m(new Date(this.monthAgendaDate.getTime())).getTime()&&this.onEventRender(o,s)),a++}this.parent.notify("events-loaded",{})},t.prototype.onCellClick=function(e){this.parent.quickPopup.quickPopupHide();var t=this.appointmentFiltering(e.startTime);this.parent.resetEventTemplates(),this.onEventRender(t,e.startTime),this.parent.notify("events-loaded",{}),this.monthAgendaDate=new Date(""+e.startTime)},t.prototype.onEventRender=function(e,t){var i=this.element.querySelector(".e-appointment-wrap");if(A(i),0===this.parent.activeViewOptions.group.resources.length||this.parent.uiStateValues.isGroupAdaptive)if(e.length>0){var a=sf.base.createElement("div",{className:"e-appointment-container"});i.appendChild(this.agendaBase.createAgendaContentElement("data",e,a))}else this.appendAppContainer(i);else if(e.length>0){var n=this.createTableLayout(),r=n.querySelector("tbody");this.agendaBase.calculateResourceTableElement(r,1,t),n.appendChild(r),i.appendChild(n)}else this.appendAppContainer(i);this.agendaBase.wireEventActions()},t.prototype.appointmentFiltering=function(e){var t=m(new Date(e.getTime())),i=f(new Date(t.getTime()),864e5);return this.parent.eventBase.filterEvents(t,i)},t.prototype.clearElements=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-appointment-indicator"));e<t.length;e++){var i=t[e];sf.base.remove(i)}this.appendAppContainer(this.element.querySelector(".e-appointment-wrap"))},t.prototype.appendAppContainer=function(e){var t=sf.base.createElement("div",{className:"e-appointment-container"});sf.base.addClass([t],"e-no-event"),t.innerHTML=this.parent.localeObj.getConstant("noEvents"),A(e),e.appendChild(t)},t.prototype.getNextPreviousDate=function(e){var t=this.parent.selectedDate,i="next"===e?this.parent.activeViewOptions.interval:-this.parent.activeViewOptions.interval,a=b(this.parent.selectedDate,i),n="next"===e?2:0,r=new Date(t.getFullYear(),t.getMonth()+n,0).getDate(),s=r>=this.monthAgendaDate.getDate()?this.monthAgendaDate.getDate():r;return this.monthAgendaDate=new Date(a.getFullYear(),a.getMonth(),s),this.monthAgendaDate},t.prototype.getModuleName=function(){return"monthAgenda"},t}(Gi),$i=function(){function e(e,t){this.parent=e,this.renderDates=t}return e.prototype.groupByYear=function(e){for(var t={},i=0,a=e;i<a.length;i++){var n=a[i],r=n.getFullYear();t[r]=t[r]||[],t[r].push(n)}return t},e.prototype.groupByMonth=function(e){for(var t={},i=0,a=e;i<a.length;i++){var n=a[i],r=12*(n.getFullYear()-1970)+n.getMonth();t[r]=t[r]||[],t[r].push(n)}return t},e.prototype.groupByWeek=function(e){for(var t={},i=0,a=e;i<a.length;i++){var n=a[i],r=+new Date(1970,0,1),s=n.getTimezoneOffset()-new Date(1970,0,1).getTimezoneOffset(),o=Math.ceil(((+n-r-60*s*1e3)/864e5+new Date(r).getDay()+1)/7);this.parent.firstDayOfWeek&&this.parent.firstDayOfWeek>new Date(+n).getDay()&&(o-=1),t[o]=t[o]||[],t[o].push(n)}return t},e.prototype.generateSlots=function(e,t,i,a,n){for(var r=this,s=function(e,t){return r.parent.globalize.formatDate(e,{format:t,calendar:r.parent.getCalendarMode()})},o=[],l=Object.keys(e),c=0;c<l.length;c++){var d=e[l[c]],h=void 0;if(i.template){var f={date:d[0],type:n};h=[].slice.call(this.parent.templateParser(i.template)(f))}else{var m=void 0;switch(i.option){case"Year":m='<span class="e-header-year">'+s(d[0],"y")+"</span>";break;case"Month":m='<span class="e-header-month">'+P(s(d[0],"MMMM"),"single")+"</span>";break;case"Week":var v=p(d.slice(-1)[0],this.parent.firstDayOfWeek);"TimelineMonth"===this.parent.currentView&&(v=p(d.slice(-1)[0],0)),m='<span class="e-header-week">'+u(v)+"</span>"}var g=sf.base.createElement("div",{innerHTML:m});h=[].slice.call(g.childNodes)}o.push({date:d[0],type:n,className:[a],colSpan:d.length*t,template:h})}return o},e.prototype.generateColumnLevels=function(e,t){var i=[],a=this.parent.activeViewOptions.headerRows,n=1;"Hour"===a[a.length-1].option&&t.length>0&&(n=t.length/e.length);for(var r=[],s=0,o=a;s<o.length;s++){var l=o[s];switch(l.option){case"Year":var c=this.groupByYear(this.renderDates);r=this.generateSlots(c,n,l,"e-header-year-cell","yearHeader"),i.push(r);break;case"Month":var p=this.groupByMonth(this.renderDates);r=this.generateSlots(p,n,l,"e-header-month-cell","monthHeader"),i.push(r);break;case"Week":var d=this.groupByWeek(this.renderDates);r=this.generateSlots(d,n,l,"e-header-week-cell","weekHeader"),i.push(r);break;case"Date":r=(r=e).map((function(e){return e.colSpan=n,e})),i.push(r);break;case"Hour":t.length>0&&i.push(t)}}return i},e}(),ea=(Ri=function(e,t){return(Ri=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Ri(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ta=function(e){function t(t){var i=e.call(this,t)||this;return i.baseCssClass="e-timeline-view",i}return ea(t,e),t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},t.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},t.prototype.scrollToWorkHour=function(){var e=this.parent.getStartEndTime(this.parent.workHours.start),t=this.isWorkDay(this.parent.selectedDate)&&this.parent.workHours.highlight&&!sf.base.isNullOrUndefined(e)?new Date(+this.parent.selectedDate).setHours(e.getHours(),e.getMinutes(),0,0):new Date(+this.parent.selectedDate).setHours(0,0,0,0),i='[data-date="'+this.parent.getMsFromDate(new Date(t))+'"]',a=this.element.querySelector(i);a&&(this.getScrollableElement().scrollLeft=a.offsetLeft)},t.prototype.scrollToHour=function(e,t){var i,a;if(t&&(a=this.parent.getIndexOfDate(this.renderDates,m(t)))>=0){var n=e.split(":");2===n.length&&(i=new Date(t.setHours(parseInt(n[0],10),parseInt(n[1],10),0)))}i=sf.base.isNullOrUndefined(t)?this.parent.getStartEndTime(e):i,sf.base.isNullOrUndefined(i)||(this.getScrollableElement().scrollLeft=sf.base.isNullOrUndefined(t)?this.getLeftFromDateTime(null,i):this.getLeftFromDateTime([a],i))},t.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);e.push(t),this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.generateResourceLevels(t,!this.parent.uiStateValues.isGroupAdaptive);var i=[];(this.parent.activeViewOptions.timeScale.enable&&(i=this.generateTimeSlots(e[e.length-1]),e.push(i)),this.parent.activeViewOptions.headerRows.length>0)&&(e=new $i(this.parent,this.renderDates).generateColumnLevels(t,i));return e},t.prototype.generateTimeSlots=function(e){for(var t=this,i=this.getTimeSlotRows((function(e){return e.type=e.first?"majorSlot":"minorSlot",e.className=e.first?["e-time-slots"]:["e-time-slots","e-time-cells"],e.workDays=t.parent.activeViewOptions.workDays,e})),a=[],n=0,r=e;n<r.length;n++){var s=r[n];s.colSpan=i.length;for(var o=0,l=sf.base.extend([],i,null,!0);o<l.length;o++){var c=l[o],p=m(new Date(""+s.date));c.date=f(p,v(c.date)),a.push(c)}}return a},t.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.getLeftFromDateTime(e,this.parent.getCurrentTime()),i=this.element.querySelector(".e-content-table").offsetHeight,a=this.element.querySelector(".e-date-header-wrap");if(this.element.querySelector(".e-content-wrap").appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:(this.parent.enableRtl?"right":"left")+":"+sf.base.formatUnit(t)+"; height:"+sf.base.formatUnit(i)})),this.parent.virtualScrollModule){var n=this.parent.element.querySelector(".e-current-timeline"),r=this.parent.element.querySelector(".e-content-wrap table");sf.base.setStyleAttribute(n,{transform:r.style.transform})}var s=sf.base.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time"});a.appendChild(s),s.style[this.parent.enableRtl?"right":"left"]=sf.base.formatUnit(t-s.offsetWidth/2)}},t.prototype.getLeftFromDateTime=function(e,t){var i=this.getStartHour(),a=this.getEndHour(),n=0,r=60*(t.getHours()-i.getHours())+(t.getMinutes()-i.getMinutes());if(!sf.base.isNullOrUndefined(e)){var s=0===a.getHours()?24:a.getHours();0!==e[0]&&(n=e[0]*(60*(s-i.getHours()))+(a.getMinutes()-i.getMinutes())),r=n+r}return r*this.getWorkCellWidth()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},t.prototype.getWorkCellWidth=function(){return this.element.querySelector(".e-work-cells").getBoundingClientRect().width},t.prototype.renderHeader=function(){var e=sf.base.createElement("tr");this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderResourceHeaderIndent(e);var t=sf.base.createElement("td");t.appendChild(this.renderDatesHeader()),e.appendChild(t),sf.base.prepend([e],this.element.querySelector("tbody"))},t.prototype.createAllDayRow=function(e,t){},t.prototype.getCurrentTimeIndicatorIndex=function(){var e=[],t=this.parent.getIndexOfDate(this.renderDates,m(this.parent.getCurrentTime()));return t>=0&&e.push(t),e},t.prototype.renderContent=function(){var e=sf.base.createElement("tr");if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var t=sf.base.createElement("td");t.appendChild(this.parent.resourceBase.createResourceColumn()),e.appendChild(t)}var i=sf.base.createElement("td"),a=this.renderContentArea();a.appendChild(this.createEventTable(this.getRowCount())),this.collapseRows(a),i.appendChild(a),e.appendChild(i),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.renderVirtualTrack(a),this.element.querySelector("tbody").appendChild(e)},t.prototype.getRowCount=function(){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.resourceBase.renderedResources.length:1},t.prototype.getResourceTdData=function(e,t){var i=this.parent.resourceBase.renderedResources[e],a=i.resourceData[i.resource.startHourField]||this.parent.workHours.start,n=i.resourceData[i.resource.endHourField]||this.parent.workHours.end;return t.startHour=this.parent.getStartEndTime(a),t.endHour=this.parent.getStartEndTime(n),t.workDays=i.resourceData[i.resource.workDaysField]||this.parent.workDays,t.className=i.className,t.groupIndex=i.groupIndex,t.groupOrder=i.groupOrder,t},t.prototype.renderContentTable=function(e){var t=e.querySelector("tbody");sf.base.append(this.getContentRows(),t)},t.prototype.getContentRows=function(){for(var e=[],t=sf.base.createElement("tr",{attrs:{role:"row"}}),i=sf.base.createElement("td",{attrs:{role:"gridcell","aria-selected":"false"}}),a=this.getRowCount(),n=0;n<a;n++){for(var r=t.cloneNode(),s=0,o=this.colLevels[this.colLevels.length-1];s<o.length;s++){var l=o[s];this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(l=this.getResourceTdData(n,l));var c=this.createContentTd(l,l,i);r.appendChild(c)}e.push(r)}return e},t.prototype.getContentTdClass=function(e){return e.first||!this.parent.activeViewOptions.timeScale.enable?["e-work-cells"]:["e-work-cells","e-alternate-cells"]},t.prototype.renderEvents=function(){this.parent.activeViewOptions.timeScale.enable?new Ti(this.parent,"hour").renderAppointments():new Ti(this.parent,"day").renderAppointments();this.parent.notify("events-loaded",{})},t.prototype.getModuleName=function(){return"timelineViews"},t}(Bi),ia=(Pi=function(e,t){return(Pi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Pi(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),aa=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-timeline-month-view",i.isInverseTableSelect=!0,i}return ia(t,e),t.prototype.getModuleName=function(){return"timelineMonth"},t.prototype.onDataReady=function(e){new Ti(this.parent,"day").renderAppointments(),this.parent.notify("events-loaded",{})},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},t.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},t.prototype.setContentHeight=function(e,t,i){t&&(t.style.height=sf.base.formatUnit(i-this.getScrollXIndent(e))),e.style.height=sf.base.formatUnit(i)},t.prototype.getDateSlots=function(e,t){for(var i=[],a=0,n=e;a<n.length;a++){var r=n[a],s=["e-header-cells"];this.isCurrentDate(r)&&s.push("e-current-day"),i.push({date:r,type:"dateHeader",className:s,colSpan:1,workDays:t})}return i},t.prototype.renderLeftIndent=function(e){this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.parent.resourceBase.renderResourceHeaderIndent(e)},t.prototype.renderContent=function(){var e=sf.base.createElement("tr");if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var t=sf.base.createElement("td");t.appendChild(this.parent.resourceBase.createResourceColumn()),e.appendChild(t)}var i=sf.base.createElement("td");this.element.querySelector("tbody").appendChild(e);var a=sf.base.createElement("div",{className:"e-content-wrap"});a.appendChild(this.renderContentArea()),a.appendChild(this.createEventTable(this.getRowCount())),this.collapseRows(a),sf.base.EventHandler.add(a,"scroll",this.onContentScroll,this),i.appendChild(a),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.renderVirtualTrack(a),e.appendChild(i)},t.prototype.getRowCount=function(){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.resourceBase.renderedResources.length:1},t.prototype.getContentSlots=function(){for(var e=[],t=0;t<this.getRowCount();t++)for(var i=0,a=this.colLevels[this.colLevels.length-1];i<a.length;i++){var n=a[i];if(n.className=["e-work-cells"],this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var r=this.parent.resourceBase.renderedResources[t];n.workDays=r.resourceData[r.resource.workDaysField]||this.parent.workDays,n.className=n.className.concat(r.className),n.groupIndex=r.groupIndex,n.groupOrder=r.groupOrder}var s={date:new Date(+n.date),colSpan:n.colSpan,groupIndex:n.groupIndex,workDays:n.workDays,type:"monthCells",className:n.className};e[t]||(e[t]=[]),e[t].push(s)}return e},t.prototype.updateClassList=function(e){this.parent.isMinMaxDate(e.date)||e.className.push("e-disable-dates")},t.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.getContentAreaElement(),"scroll",this.onContentScroll)},t.prototype.getMonthStart=function(e){var t=this.parent.calendarUtil.firstDateOfMonth(m(e));return new Date(t.getFullYear(),t.getMonth(),t.getDate())},t.prototype.getMonthEnd=function(e){var t=this.parent.calendarUtil.firstDateOfMonth(m(e));return this.parent.calendarUtil.lastDateOfMonth(b(new Date(+t),this.parent.activeViewOptions.interval-1))},t.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots(this.renderDates,this.parent.activeViewOptions.workDays);e.push(t),this.parent.activeViewOptions.group.resources.length>0&&this.parent.resourceBase.generateResourceLevels(t,!this.parent.uiStateValues.isGroupAdaptive);this.parent.activeViewOptions.headerRows.length>0&&(e=new $i(this.parent,this.renderDates).generateColumnLevels(t,[]));return this.colLevels=e,e},t}(Gi),na=(Hi=function(e,t){return(Hi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Hi(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ra=function(e){function t(t){return e.call(this,t,"day")||this}return na(t,e),t.prototype.renderAppointments=function(){this.fields=this.parent.eventFields;var e=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-wrapper,.e-more-indicator"));[].slice.call(e).forEach((function(e){return sf.base.remove(e)})),this.renderedEvents=[],"TimelineYear"!==this.parent.currentView?this.yearViewEvents():(this.removeCellHeight(),this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.timelineResourceEvents():this.timelineYearViewEvents()),this.parent.notify(r,{})},t.prototype.yearViewEvents=function(){for(var e=0;e<12;e++)for(var t=".e-month-calendar:nth-child("+(e+1)+") td.e-work-cells",i=[].slice.call(this.parent.element.querySelectorAll(t)),a=new Date(this.parent.selectedDate.getFullYear(),e,this.parent.selectedDate.getDate()),n=this.parent.calendarUtil.getMonthStartDate(new Date(a.getTime())),r=this.parent.calendarUtil.getMonthEndDate(new Date(a.getTime())),s=c(n,this.parent.firstDayOfWeek),o=y(p(r,this.parent.firstDayOfWeek),1),l=0;s.getTime()<o.getTime();l++){var d=m(new Date(s.getTime())),h=y(new Date(d.getTime()),1);if(this.parent.eventBase.filterEvents(d,h).length>0){var u=i[l];u&&u.appendChild(sf.base.createElement("div",{className:"e-appointment"}))}s=y(new Date(s.getTime()),1)}},t.prototype.timelineYearViewEvents=function(){var e=this.parent.element.querySelector(".e-work-cells");this.cellWidth=e.offsetWidth,this.cellHeader=k(e.querySelector(".e-date-header"));var t=this.parent.element.querySelector(".e-event-table");this.eventHeight=o(t,"e-appointment");for(var i=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container")),a=0;a<12;a++){var n=i[a],r=a+1,s=sf.base.createElement("div",{className:"e-appointment-wrapper"});n.appendChild(s);for(var l=new Date(this.parent.selectedDate.getFullYear(),a,1),c=new Date(l.getFullYear(),l.getMonth()+1,0),p=l.getDay(),d=[];l.getTime()<=c.getTime();){var h=void 0,u=void 0;if("Vertical"===this.parent.activeViewOptions.orientation){var f=i[p];r=p+1;var v=f.querySelector(".e-appointment-wrapper");v||(v=sf.base.createElement("div",{className:"e-appointment-wrapper"}),f.appendChild(v)),this.parent.enableRtl?u=a*this.cellWidth:h=a*this.cellWidth}else this.parent.enableRtl?u=(p+l.getDate()-1)*this.cellWidth:h=(p+l.getDate()-1)*this.cellWidth;var g=this.parent.element.querySelector(".e-content-wrap tr:nth-child("+r+") td");this.cellHeight=g.offsetHeight;for(var b=m(new Date(l.getTime())),T=y(new Date(b.getTime()),1),w=this.parent.eventBase.filterEvents(b,T),D=function(e,t){var i=sf.base.extend({},w[e],null,!0),n=C.getIndex(i[C.fields.startTime]);i.Index=n;var r=C.cellHeader+C.eventHeight*(e+1)+2+C.moreIndicatorHeight;if("Horizontal"===C.parent.activeViewOptions.orientation){var o=C.renderedEvents.filter((function(e){return e.Guid===i.Guid})),l=d.filter((function(e){return e.Guid===i.Guid}));if(o.length>0||l.length>0)return"continue"}if(!(C.parent.rowAutoHeight&&"Horizontal"===C.parent.activeViewOptions.orientation||C.cellHeight>r)){var c="Horizontal"===C.parent.activeViewOptions.orientation?a:p;if(C.renderMoreIndicatior(s,t-e,b,c,h,u),"Horizontal"===C.parent.activeViewOptions.orientation)for(var f=e;f<w.length;f++){var m=sf.base.extend({},w[f],{Index:n+f},!0);C.renderedEvents.push(m),d.push(i)}return"break"}C.renderEvent(s,i,a,h,u,p),C.updateCellHeight(g,r),d.push(i)},C=this,E=0,O=w.length;E<O;E++){if("break"===D(E,O))break}l=y(new Date(l.getTime()),1),"Vertical"===this.parent.activeViewOptions.orientation&&(p++,this.renderedEvents=[])}}},t.prototype.timelineResourceEvents=function(){var e=this,t=this.parent.element.querySelector(".e-work-cells");this.cellWidth=t.offsetWidth,this.cellHeader=0;var i=this.parent.element.querySelector(".e-event-table");this.eventHeight=o(i,"e-appointment");var a=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container")),n=this.parent.uiStateValues.isGroupAdaptive?[this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]]:this.parent.resourceBase.lastResourceLevel;if("Horizontal"===this.parent.activeViewOptions.orientation)for(var r=function(t){n.forEach((function(i,n){e.renderedEvents=[],e.renderResourceEvent(a[n],i,t,n)}))},s=0;s<12;s++)r(s);else n.forEach((function(t,i){e.renderedEvents=[];for(var n=0;n<12;n++)e.renderResourceEvent(a[i],t,n,i)}))},t.prototype.renderResourceEvent=function(e,t,i,a){var n=sf.base.createElement("div",{className:"e-appointment-wrapper"});e.appendChild(n);var r=d(new Date(this.parent.selectedDate.getFullYear(),i,1)),s=y(h(new Date(r.getTime())),1),o=this.parent.eventBase.filterEvents(r,s,void 0,t),l="Vertical"===this.parent.activeViewOptions.orientation?a:i,c=this.parent.element.querySelector(".e-content-wrap tr:nth-child("+(l+1)+") td");this.cellHeight=c.offsetHeight;for(var p=0;p<o.length;p++){var u=o[p],f=sf.base.extend({},u,null,!0),m=this.getIndex(f[this.fields.startTime]);f.Index=m;var v=this.cellHeader+this.eventHeight*(p+1)+2+this.moreIndicatorHeight,g="Vertical"===this.parent.activeViewOptions.orientation?i*this.cellWidth:a*this.cellWidth;if(!(this.parent.rowAutoHeight||this.cellHeight>v)){var b="Horizontal"===this.parent.activeViewOptions.orientation?i:a;if(this.renderMoreIndicatior(n,o.length-p,r,b,g,a),"Horizontal"===this.parent.activeViewOptions.orientation)for(var T=a;T<o.length;T++){var w=sf.base.extend({},o[T],{Index:m+T},!0);this.renderedEvents.push(w)}break}this.renderEvent(n,f,i,g,null,a),this.updateCellHeight(c,v)}},t.prototype.renderEvent=function(e,t,i,a,n,r){var s,o,l=this,c=this.isSpannedEvent(t,i),p=this.createEventElement(c);c[this.fields.isAllDay]&&(c[this.fields.endTime]=new Date(c[this.fields.startTime].getTime())),"Horizontal"===this.parent.activeViewOptions.orientation?(o=i+1,s=c.isSpanned.count*this.cellWidth):(o=r+1,s=this.cellWidth);var d=this.parent.element.querySelector(".e-content-wrap tr:nth-child("+o+") td").offsetTop+this.cellHeader+this.eventHeight*c.Index+2;sf.base.setStyleAttribute(p,{width:s+"px",height:this.eventHeight+"px",left:a+"px",right:n+"px",top:d+"px"});var h={data:c,element:p,cancel:!1,type:"event"};this.parent.trigger("eventRendered",h,(function(t){t.cancel||(e.appendChild(p),l.wireAppointmentEvents(p,c,!0),c.isSpanned.isRight||l.renderedEvents.push(sf.base.extend({},c,null,!0)))}))},t.prototype.renderMoreIndicatior=function(e,t,i,a,n,r,s){var o=y(new Date(i.getTime()),1),l=this.getMoreIndicatorElement(t,i,o),c=this.parent.element.querySelector(".e-content-wrap tr:nth-child("+(a+1)+")").offsetTop+(this.cellHeight-this.moreIndicatorHeight);n=Math.floor(n/this.cellWidth)*this.cellWidth,r=Math.floor(r/this.cellWidth)*this.cellWidth,sf.base.setStyleAttribute(l,{width:this.cellWidth+"px",left:n+"px",right:r+"px",top:c+"px"}),sf.base.isNullOrUndefined(s)||l.setAttribute("data-group-index",s.toString()),e.appendChild(l),sf.base.EventHandler.add(l,"click",this.moreIndicatorClick,this)},t.prototype.createEventElement=function(e){var t=e[this.fields.subject]||this.parent.eventSettings.fields.subject.default,i=sf.base.createElement("div",{className:"e-appointment",attrs:{"data-id":"Appointment_"+e[this.fields.id],"data-guid":e.Guid,role:"button",tabindex:"0","aria-readonly":this.parent.eventBase.getReadonlyAttribute(e),"aria-selected":"false","aria-grabbed":"true","aria-label":this.parent.getAnnocementString(e)}});if(this.cssClass&&sf.base.addClass([i],this.cssClass),e[this.fields.isReadonly]&&sf.base.addClass([i],"e-read-only"),this.parent.activeViewOptions.group.resources.length>0){var a=this.getGroupIndexFromEvent(e);i.setAttribute("data-group-index",a.toString())}var n=[],r=sf.base.extend({},e,null,!0);if(this.parent.activeViewOptions.eventTemplate){var s=this.parent.element.id+"_"+this.parent.activeViewOptions.eventTemplateName+"eventTemplate",o=R(r,this.parent.eventFields);n=this.parent.getAppointmentTemplate()(o,this.parent,"eventTemplate",s,!1)}else{var l=e[this.fields.location]||this.parent.eventSettings.fields.location.default||"",c=sf.base.createElement("div",{className:"e-subject",innerHTML:t+(l?";&nbsp"+l:"")}),p=sf.base.createElement("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:this.parent.getTimeString(r[this.fields.startTime])}),d=sf.base.createElement("div",{className:"e-time"+(this.parent.isAdaptive?" e-disable":""),innerHTML:this.parent.getTimeString(r[this.fields.endTime])});sf.base.addClass([c],"e-text-center"),e[this.fields.isAllDay]?n=[c]:r.isLeft||r.isRight?(r.isLeft||n.push(p),n.push(c),r.isRight||n.push(d)):n=[p,c,d]}var h=sf.base.createElement("div",{className:"e-appointment-details"});return sf.base.append(n,h),i.appendChild(h),this.applyResourceColor(i,r,"backgroundColor",this.groupOrder),i},t.prototype.isSpannedEvent=function(e,t){var i=new Date(this.parent.selectedDate.getFullYear(),t,1),a=y(new Date(this.parent.selectedDate.getFullYear(),t+1,0),1),n=sf.base.extend({},e,null,!0),r=n[this.fields.startTime],s=n[this.fields.endTime],o={isLeft:!1,isRight:!1,count:1};return r.getTime()<i.getTime()&&(n[this.fields.startTime]=i,o.isLeft=!0),s.getTime()>a.getTime()&&(n[this.fields.endTime]=a,o.isRight=!0),0===this.parent.activeViewOptions.group.resources.length&&(o.count=Math.ceil((n[this.fields.endTime].getTime()-n[this.fields.startTime].getTime())/864e5)),n.isSpanned=o,n},t.prototype.getOverlapEvents=function(e,t){for(var i=[],a=0,n=t;a<n.length;a++){var r=n[a],s=new Date(r[this.fields.startTime].getTime()),o=new Date(r[this.fields.endTime].getTime());m(s).getTime()<=m(new Date(e.getTime())).getTime()&&m(o).getTime()>=m(new Date(e.getTime())).getTime()&&i.push(r)}return i},t.prototype.removeCellHeight=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-month-header-wrapper tbody tr,.e-resource-column-table tbody tr,.e-content-table tbody tr"));e<t.length;e++){t[e].firstElementChild.style.height=""}},t}(Ti),sa=(ji=function(e,t){return(ji=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ji(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),oa=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-year-view",i.isInverseTableSelect=!1,i.workCellAction=new Qt(t),i}return sa(t,e),t.prototype.renderLayout=function(e){this.parent.resourceBase&&this.parent.resourceBase.generateResourceLevels([{renderDates:this.parent.activeView.renderDates}]),this.setPanel(sf.base.createElement("div",{className:"e-table-wrap"}));var t="Horizontal"===this.parent.activeViewOptions.orientation?"e-horizontal":"e-vertical";sf.base.addClass([this.element],[this.viewClass,t,e]),this.renderPanel(e);var i=this.createTableLayout("e-outer-table");this.element.appendChild(i),this.element.querySelector("table").setAttribute("role","presentation");var a=i.querySelector("tbody");this.rowCount=this.getRowColumnCount("row"),this.columnCount=this.getRowColumnCount("column"),this.renderHeader(a),this.renderContent(a),this.parent.uiStateValues.isGroupAdaptive&&(this.generateColumnLevels(),this.renderResourceMobileLayout()),this.wireEvents(this.element.querySelector(".e-content-wrap"),"scroll"),this.parent.notify(r,{})},t.prototype.renderHeader=function(e){},t.prototype.renderContent=function(e){var t=sf.base.createElement("tr");e.appendChild(t);var i=sf.base.createElement("td");t.appendChild(i),this.element.querySelector("tbody").appendChild(t);var a=sf.base.createElement("div",{className:"e-content-wrap"});i.appendChild(a);var n=this.createTableLayout("e-calendar-table");a.appendChild(n);var r=sf.base.createElement("tr");n.querySelector("tbody").appendChild(r);var s=sf.base.createElement("td");r.appendChild(s);var o=sf.base.createElement("div",{className:"e-calendar-wrapper"});s.appendChild(o);for(var l=0,c=Array.apply(null,{length:12}).map((function(e,t){return t}));l<c.length;l++){var p=c[l],d=new Date(this.parent.selectedDate.getFullYear(),p,this.parent.selectedDate.getDate()),h=sf.base.createElement("div",{className:"e-month-calendar e-calendar",attrs:{"data-role":"calendar"}});h.appendChild(this.renderCalendarHeader(d)),h.appendChild(this.renderCalendarContent(d)),o.appendChild(h)}},t.prototype.renderCalendarHeader=function(e){var t=sf.base.createElement("div",{className:"e-header e-month"}),a=sf.base.createElement("div",{className:"e-day e-title",innerHTML:this.getMonthName(e)});return t.appendChild(a),this.parent.trigger(i,{elementType:"headerCells",element:a,date:e}),t},t.prototype.renderCalendarContent=function(e){var t=this.getMonthDates(e),a=sf.base.createElement("div",{className:"e-content e-month"}),n=this.createTableLayout("e-calendar-table e-content-table");a.appendChild(n);for(var r=sf.base.createElement("thead",{className:"e-week-header"}),s=sf.base.createElement("tr"),o=c(d(e),this.parent.firstDayOfWeek),l=0;l<7;l++)s.appendChild(sf.base.createElement("th",{innerHTML:this.parent.getDayNames("narrow")[o.getDay()]})),o=new Date(o.getTime()+864e5);r.appendChild(s),sf.base.prepend([r],n);for(var p=n.querySelector("tbody");t.length>0;){var h=t.splice(0,7),f=sf.base.createElement("tr",{attrs:{role:"row"}});if(this.parent.activeViewOptions.showWeekNumber){var m=u(h.slice(-1)[0]),v=sf.base.createElement("td",{className:"e-week-number",attrs:{role:"gridcell",title:"Week "+m},innerHTML:m.toString()});f.appendChild(v),this.parent.trigger(i,{elementType:"weekNumberCells",element:v})}for(var g=0,y=h;g<y.length;g++){var b=y[g];(v=sf.base.createElement("td",{className:"e-cell e-work-cells",attrs:{role:"gridcell","aria-selected":"false","data-date":b.getTime().toString()}})).appendChild(sf.base.createElement("span",{className:"e-day",innerHTML:b.getDate().toString()}));var T=[];e.getMonth()!==b.getMonth()&&T.push("e-other-month"),this.isCurrentDate(b)&&e.getMonth()===b.getMonth()&&(T=T.concat(["e-today","e-selected"])),T.length>0&&sf.base.addClass([v],T),f.appendChild(v),this.wireEvents(v,"cell"),this.parent.trigger(i,{elementType:"workCells",element:v,date:b})}p.appendChild(f)}return a},t.prototype.createTableColGroup=function(e){for(var t=sf.base.createElement("colgroup"),i=0;i<e;i++)t.appendChild(sf.base.createElement("col"));return t},t.prototype.getMonthName=function(e){return P(this.parent.globalize.formatDate(e,{format:this.parent.activeViewOptions.dateFormat||"MMMM",calendar:this.parent.getCalendarMode()}),"multiple")},t.prototype.generateColumnLevels=function(){var e=[],t=this.getDateSlots([this.parent.selectedDate],this.parent.activeViewOptions.workDays);if(this.parent.activeViewOptions.group.resources.length>0){if(e=this.parent.resourceBase.generateResourceLevels(t),this.parent.uiStateValues.isGroupAdaptive){var i=this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];e=[this.getDateSlots([this.parent.selectedDate],i.workDays)]}}else e.push(t);return e.pop(),this.colLevels=e,e},t.prototype.getDateSlots=function(e,t,i,a){return void 0===i&&(i=this.parent.workHours.start),void 0===a&&(a=this.parent.workHours.end),[{date:e[0],type:"dateHeader",className:["e-header-cells"],colSpan:1,workDays:t,startHour:new Date(+this.parent.globalize.parseDate(i,sf.base.isBlazor()?{skeleton:"t"}:{skeleton:"Hm"})),endHour:new Date(+this.parent.globalize.parseDate(a,sf.base.isBlazor()?{skeleton:"t"}:{skeleton:"Hm"}))}]},t.prototype.getMonthDates=function(e){for(var t=c(d(e),this.parent.firstDayOfWeek),i=y(new Date(+t),42),a=[],n=t.getTime();n<i.getTime();n+=864e5)a.push(m(new Date(n)));return a},t.prototype.getRowColumnCount=function(e){for(var t=this.parent.selectedDate.getFullYear(),i=[],a=0;a<12;a++)i.push(new Date(t,a,1).getDay()+new Date(t,a+1,0).getDate());var n,r=Math.max.apply(Math,i);return"row"===e?(n="Horizontal"===this.parent.activeViewOptions.orientation?12:r,this.parent.activeViewOptions.timeScale.enable||"Vertical"!==this.parent.activeViewOptions.orientation||(n=1)):n="Horizontal"===this.parent.activeViewOptions.orientation?r:12,n},t.prototype.isCurrentDate=function(e){return m(new Date).getTime()===m(new Date(e.getTime())).getTime()},t.prototype.onCellClick=function(e){var t=sf.base.closest(e.target,".e-work-cells"),i=this.parent.getDateFromElement(t),a=y(new Date(i.getTime()),1),n={date:i,event:this.parent.eventBase.filterEvents(i,a),element:e.target};this.parent.quickPopup.moreEventClick(n,new Date)},t.prototype.onContentScroll=function(e){var t=e.target,i=this.getDatesHeaderElement();i&&(i.firstElementChild.scrollLeft=t.scrollLeft);var a=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");a&&(a.scrollTop=t.scrollTop)},t.prototype.onScrollUiUpdate=function(e){var t=this.parent.element.offsetHeight-this.getHeaderBarHeight(),i=this.element.querySelector(".e-date-header-container");i&&(t-=i.offsetHeight);var a=this.element.querySelector(".e-content-wrap");a&&(a.style.height=sf.base.formatUnit(t));var n=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");if(n&&(n.style.height=sf.base.formatUnit(t-this.getScrollXIndent(a))),!this.parent.isAdaptive&&i){var r=S();a.offsetWidth-a.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=r>0?"1px":"0px",i.style[e.cssProperties.padding]=r>0?r-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]="")}this.setColWidth(this.getContentAreaElement())},t.prototype.startDate=function(){return c(new Date(this.parent.selectedDate.getFullYear(),0,1),this.parent.firstDayOfWeek)},t.prototype.endDate=function(){return y(p(new Date(this.parent.selectedDate.getFullYear(),11,31),this.parent.firstDayOfWeek),1)},t.prototype.getEndDateFromStartDate=function(e){var t=new Date(e.getTime());return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(t=h(t)),y(new Date(t.getTime()),1)},t.prototype.getNextPreviousDate=function(e){return T(this.parent.selectedDate,"next"===e?1:-1)},t.prototype.getDateRangeText=function(){return this.parent.globalize.formatDate(this.parent.selectedDate,sf.base.isBlazor()?{format:"yyyy"}:{skeleton:"y"})},t.prototype.addEventListener=function(){this.parent.on(s,this.onScrollUiUpdate,this),this.parent.on(a,this.onDataReady,this)},t.prototype.removeEventListener=function(){this.parent.off(s,this.onScrollUiUpdate),this.parent.off(a,this.onDataReady)},t.prototype.onDataReady=function(e){new ra(this.parent).renderAppointments(),this.parent.notify("events-loaded",e)},t.prototype.wireEvents=function(e,t){"cell"===t?"TimelineYear"!==this.parent.currentView?sf.base.EventHandler.add(e,"click",this.onCellClick,this):(sf.base.EventHandler.add(e,"click",this.workCellAction.cellClick,this.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.workCellAction.cellDblClick,this.workCellAction)):sf.base.EventHandler.add(e,"scroll",this.onContentScroll,this)},t.prototype.getModuleName=function(){return"year"},t.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.parent.resourceBase&&this.parent.resourceBase.destroy(),sf.base.isBlazor()&&(this.parent.resetLayoutTemplates(),this.parent.resetEventTemplates()),sf.base.remove(this.element),this.element=null)},t}(Li),la=(Ii=function(e,t){return(Ii=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Ii(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ca=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-timeline-year-view",i.isInverseTableSelect=!0,i}return la(t,e),t.prototype.getModuleName=function(){return"timelineYear"},t.prototype.renderHeader=function(e){var t=sf.base.createElement("tr");if(e.appendChild(t),"Vertical"===this.parent.activeViewOptions.orientation&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive)this.parent.resourceBase.renderResourceHeaderIndent(t);else{var a=sf.base.createElement("td",{className:"e-left-indent"});t.appendChild(a),a.appendChild(this.renderResourceHeader("e-left-indent-wrap"))}var n=sf.base.createElement("td");t.appendChild(n);var r=sf.base.createElement("div",{className:"e-date-header-container"});if(n.appendChild(r),"Horizontal"===this.parent.activeViewOptions.orientation&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive)r.appendChild(this.renderResourceHeader("e-date-header-wrap")),this.columnCount=this.colLevels.slice(-1)[0].length;else{var s=sf.base.createElement("div",{className:"e-date-header-wrap"});r.appendChild(s);var o=this.createTableLayout();s.appendChild(o),o.appendChild(this.createTableColGroup(this.columnCount));var l=sf.base.createElement("tr");o.querySelector("tbody").appendChild(l);for(var c=0;c<this.columnCount;c++){var p=sf.base.createElement("td",{className:"e-header-cells"});if("Horizontal"===this.parent.activeViewOptions.orientation)p.innerHTML="<span>"+this.parent.getDayNames("abbreviated")[c%7]+"</span>";else{var d=new Date(this.parent.selectedDate.getFullYear(),c,1);p.innerHTML="<span>"+this.getMonthName(d)+"</span>",p.setAttribute("data-date",d.getTime().toString())}l.appendChild(p),this.parent.trigger(i,{elementType:"headerCells",element:p})}}},t.prototype.renderResourceHeader=function(e){var t=sf.base.createElement("div",{className:e}),a=this.createTableLayout();t.appendChild(a);var n=sf.base.createElement("tr");if(this.parent.activeViewOptions.group.resources.length>0)this.colLevels=this.generateColumnLevels();else{var r=[{className:["e-header-cells"],type:"headerCell"}];this.colLevels=[r]}for(var s=0,o=this.colLevels;s<o.length;s++){for(var l=o[s],c=n.cloneNode(),p=0,d="e-date-header-wrap"===e?l:[l[0]];p<d.length;p++){var h=d[p],u=sf.base.createElement("td");h.className&&sf.base.addClass([u],h.className),"e-date-header-wrap"===e&&(h.template&&sf.base.append(h.template,u),h.colSpan&&u.setAttribute("colspan",h.colSpan.toString()),this.setResourceHeaderContent(u,h));var f={elementType:h.type,element:u,date:h.date,groupIndex:h.groupIndex};this.parent.trigger(i,f),c.appendChild(u)}a.querySelector("tbody").appendChild(c)}return"e-date-header-wrap"===e&&a.appendChild(this.createTableColGroup(this.colLevels.slice(-1)[0].length)),t},t.prototype.renderContent=function(e){var t=sf.base.createElement("tr");e.appendChild(t);var i,a=sf.base.createElement("td"),n=sf.base.createElement("td"),r=[];if("Vertical"===this.parent.activeViewOptions.orientation&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive)r.push(a),a.appendChild(this.parent.resourceBase.createResourceColumn()),this.rowCount=this.parent.resourceBase.lastResourceLevel.length;else{r.push(a);var s=sf.base.createElement("div",{className:"e-month-header-wrapper"});a.appendChild(s),s.appendChild(this.createTableLayout()),i=s.querySelector("tbody")}r.push(n),sf.base.append(r,t);var o=sf.base.createElement("div",{className:"e-content-wrap"});n.appendChild(o);var l=this.createTableLayout("e-content-table");o.appendChild(l);var c=sf.base.createElement("div",{className:"e-event-table"});o.appendChild(c);var p=l.querySelector("tbody");if(this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){this.parent.rowAutoHeight&&sf.base.addClass([l],"e-auto-height");var d="Horizontal"===this.parent.activeViewOptions.orientation?this.colLevels.slice(-1)[0].length:12;l.appendChild(this.createTableColGroup(d)),this.renderResourceContent(c,i,p)}else l.appendChild(this.createTableColGroup(this.columnCount)),this.renderDefaultContent(c,i,p)},t.prototype.renderDefaultContent=function(e,t,a){for(var n=0;n<this.rowCount;n++){e.appendChild(sf.base.createElement("div",{className:"e-appointment-container"}));var r=new Date(this.parent.selectedDate.getFullYear(),n,1),s=this.parent.calendarUtil.getMonthStartDate(new Date(r.getTime())),o=this.parent.calendarUtil.getMonthEndDate(new Date(r.getTime())),l=sf.base.createElement("tr",{attrs:{role:"row"}}),c=l.cloneNode();t.appendChild(c);var p=l.cloneNode();a.appendChild(p);var d=sf.base.createElement("td",{className:"e-month-header",attrs:{role:"gridcell"}});"Horizontal"===this.parent.activeViewOptions.orientation?(d.setAttribute("data-date",r.getTime().toString()),d.innerHTML="<span>"+this.getMonthName(r)+"</span>"):d.innerHTML="<span>"+this.parent.getDayNames("abbreviated")[n%7]+"</span>",c.appendChild(d),this.parent.trigger(i,{elementType:"leftHeaderCells",element:d});for(var h=new Date(s.getTime()),u=0;u<this.columnCount;u++){var f=void 0;if("Vertical"===this.parent.activeViewOptions.orientation){r=new Date(this.parent.selectedDate.getFullYear(),u,1),s=this.parent.calendarUtil.getMonthStartDate(new Date(r.getTime())),o=this.parent.calendarUtil.getMonthEndDate(new Date(r.getTime()));var m=n-s.getDay()+1;h=new Date(this.parent.selectedDate.getFullYear(),u,m),f=m>0&&h.getTime()<o.getTime()}else f=u>=s.getDay()&&h.getTime()<o.getTime();var v=sf.base.createElement("td",{className:"e-work-cells",attrs:{role:"gridcell","aria-selected":"false"}});p.appendChild(v);var g=sf.base.createElement("div",{className:"e-date-header e-navigate",innerHTML:f?h.getDate().toString():""}),b=sf.base.isBlazor()?"D":"full",T=this.parent.globalize.formatDate(h,{skeleton:b,calendar:this.parent.getCalendarMode()});if(g.setAttribute("aria-label",T),f){var w=[v],D=[];this.parent.activeViewOptions.workDays.indexOf(h.getDay())>-1&&D.push("e-work-days"),this.isCurrentDate(h)&&(D.push("e-current-day"),"Horizontal"===this.parent.activeViewOptions.orientation?w.push(this.element.querySelector(".e-header-cells:nth-child("+(u+1)+")")):w.push(this.element.querySelectorAll(".e-month-header").item(n))),D.length>0&&sf.base.addClass(w,D)}else sf.base.addClass([v],"e-other-month");v.appendChild(g),f&&(v.setAttribute("data-date",h.getTime().toString()),this.wireEvents(v,"cell"),"Horizontal"===this.parent.activeViewOptions.orientation&&(h=y(new Date(h.getTime()),1))),this.parent.trigger(i,{elementType:"workCells",element:v,date:h})}}},t.prototype.renderResourceContent=function(e,t,a){for(var n=0;n<this.rowCount;n++){e.appendChild(sf.base.createElement("div",{className:"e-appointment-container"}));var r=sf.base.createElement("tr",{attrs:{role:"row"}});a.appendChild(r);var s=void 0;this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(s=this.parent.resourceBase.lastResourceLevel[n]);var o=new Date(this.parent.selectedDate.getFullYear(),n,1),l=this.parent.calendarUtil.getMonthStartDate(new Date(o.getTime()));if("Horizontal"===this.parent.activeViewOptions.orientation){var c=r.cloneNode();t.appendChild(c);var p=sf.base.createElement("td",{className:"e-month-header",innerHTML:"<span>"+this.getMonthName(o)+"</span>",attrs:{role:"gridcell","data-date":l.getTime().toString()}});c.appendChild(p)}for(var d=0;d<this.columnCount;d++){var h=[],u=n;"Vertical"===this.parent.activeViewOptions.orientation?((h=h.concat(s.className)).indexOf("e-parent-node")>-1?h.push("e-resource-group-cells"):h.push("e-work-days"),o=new Date(this.parent.selectedDate.getFullYear(),d,1),l=this.parent.calendarUtil.getMonthStartDate(new Date(o.getTime()))):(u=this.colLevels.slice(-1)[0][d].groupIndex,h.push("e-work-days"));var f=sf.base.createElement("td",{className:"e-work-cells",attrs:{role:"gridcell","aria-selected":"false","data-date":l.getTime().toString()}});sf.base.addClass([f],h),f.setAttribute("data-group-index",u.toString()),this.wireEvents(f,"cell"),r.appendChild(f),this.parent.trigger(i,{elementType:"workCells",element:f,date:l})}}"Vertical"===this.parent.activeViewOptions.orientation&&this.collapseRows(this.parent.element.querySelector(".e-content-wrap"))},t}(oa),pa=function(){function e(e){this.parent=e}return e.prototype.initializeCalendarExport=function(e,t){var i=this,a=t||sf.base.extend([],this.parent.eventsData,null,!0);a=this.parent.eventBase.sortByTime(a);var n=-1!==navigator.appVersion.indexOf("Win")?"\r\n":"\n",r=[],s=[],o=this.parent.timezone||this.parent.tzModule.getLocalTimezoneName(),l=this.parent.eventFields;a.forEach((function(e){var t=i.parent.eventBase.generateGuid(),c=[];e[l.recurrenceID]&&(t=i.filterEvents(s,l.id,e[l.recurrenceID])[0].UID);if(!e[l.recurrenceID]&&e[l.recurrenceRule]&&e[l.recurrenceException]){var p=void 0,d=e[l.recurrenceException].split(",");i.filterEvents(a,l.recurrenceID,e[l.id]).forEach((function(e){c.push(_e(e[l.startTime]))})),p=d.filter((function(e){return-1===c.indexOf(e)})),e[l.recurrenceException]=p.length>0?p.join(",")+",":""}var h=e[l.startTimezone]||o,u=e[l.endTimezone]||o,f=["BEGIN:VEVENT","LOCATION:"+(e[l.location]||""),"SUMMARY:"+(e[l.subject]||""),"UID:"+t,"DESCRIPTION:"+(e[l.description]||""),"END:VEVENT"];if(e[l.isAllDay]?(f.splice(4,0,"DTEND;VALUE=DATE:"+i.convertDateToString(e[l.endTime],!0)),f.splice(4,0,"DTSTART;VALUE=DATE:"+i.convertDateToString(e[l.startTime],!0))):e[l.isAllDay]||e[l.recurrenceRule]?(f.splice(4,0,'DTEND;TZID="'+u+'":'+i.convertDateToString(e[l.endTime])),f.splice(4,0,'DTSTART;TZID="'+h+'":'+i.convertDateToString(e[l.startTime]))):(f.splice(4,0,"DTEND:"+i.convertDateToString(e[l.endTime])),f.splice(4,0,"DTSTART:"+i.convertDateToString(e[l.startTime]))),e[l.recurrenceRule]&&f.splice(4,0,"RRULE:"+e[l.recurrenceRule]),e[l.recurrenceException]){d=e[l.recurrenceException].split(",");for(var m=0;m<d.length-1;m++)f.splice(5,0,"EXDATE:"+i.convertDateToString(J(d[m]),e[l.isAllDay]))}e[l.recurrenceID]&&f.splice(4,0,'RECURRENCE-ID;TZID="'+h+'":'+i.convertDateToString(e[l.startTime],e[l.isAllDay]));var v=i.customFieldFilter(e,l);v.length>0&&v.forEach((function(t){return f.splice(4,0,t+":"+(e[t]||""))}));var g=sf.base.extend({},e);g.UID=t,s.push(g),r.push(f.join(n))}));var c=["BEGIN:VCALENDAR","PRODID:-//Syncfusion Inc//Scheduler//EN","VERSION:2.0","CALSCALE:GREGORIAN","METHOD:PUBLISH","X-WR-CALNAME:"+(e||"Calendar"),"X-WR-TIMEZONE:"+o].join(n)+n+r.join(n)+n+"END:VCALENDAR";this.download(c,e)},e.prototype.customFieldFilter=function(e,t){var i=Object.keys(t).map((function(e){return t[e]}));return Object.keys(e).filter((function(e){return-1===i.indexOf(e)&&"Guid"!==e}))},e.prototype.convertDateToString=function(e,t){var i=("0000"+e.getFullYear().toString()).slice(-4),a=("00"+(e.getMonth()+1).toString()).slice(-2),n=("00"+e.getDate().toString()).slice(-2),r=("00"+e.getHours().toString()).slice(-2),s=("00"+e.getMinutes().toString()).slice(-2),o=("00"+e.getSeconds().toString()).slice(-2);return t?i+a+n:i+a+n+"T"+r+s+o},e.prototype.download=function(e,t){var i=new Blob([e],{type:"data:text/calendar;charset=utf8"});if(t=(t||"Calendar")+".ics",navigator.msSaveBlob)navigator.msSaveBlob(i,t);else{var a=document.createElementNS("http://www.w3.org/1999/xhtml","a");a.download=t,a.href=URL.createObjectURL(i);var n=document.createEvent("MouseEvent");n.initEvent("click",!0,!0),a.dispatchEvent(n),setTimeout((function(){URL.revokeObjectURL(a.href),a.href=void 0}))}},e.prototype.filterEvents=function(e,t,i){return e.filter((function(e){return e[t]===i}))},e.prototype.getModuleName=function(){return"iCalendarExport"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.parent=null)},e}(),da=function(){function e(e){this.allDay=!1,this.parent=e}return e.prototype.initializeCalendarImport=function(e){var t=this;if(e&&e instanceof Blob){var i=new FileReader;i.onload=function(e){var a=i.result;t.iCalendarParser(a)},i.readAsText(e,"ISO-8859-8")}else e&&"string"==typeof e&&this.iCalendarParser(e)},e.prototype.iCalendarParser=function(e){var t=this,i=this.parent.eventFields,a=[],n=e.replace(new RegExp("\\r","g"),"").split("\n"),r=!1,s=null,o=this.parent.eventBase.getEventMaxID();n.forEach((function(e){var n,l,c;if(r||"BEGIN:VEVENT"!==e||(r=!0,s={}),r&&"END:VEVENT"===e&&(r=!1,a.push(s),s=null),r)if(n=e.indexOf(":"),l=e.substr(0,n).replace(/^\s\s*/,"").replace(/\s\s*$/,""),c=e.substr(n+1,e.length-(n+1)).replace(/^\s\s*/,"").replace(/\s\s*$/,""),-1!==e.indexOf("SUMMARY")&&(l="SUMMARY"),-1!==e.indexOf("DTSTART"))s[i.startTime]=t.dateParsing(e),s[i.isAllDay]=t.allDay,t.allDay=!1;else if(-1!==e.indexOf("DTEND"))s[i.endTime]=t.dateParsing(e);else if(-1!==e.indexOf("EXDATE"))c=_e(t.dateParsing(e)),s[i.recurrenceException]=sf.base.isNullOrUndefined(s[i.recurrenceException])?c:s[i.recurrenceException]+","+c;else if(-1!==e.indexOf("RECURRENCE-ID"))c=_e(t.dateParsing(e)),s[i.recurrenceException]=c,s[i.recurrenceID]=c;else switch(l){case"BEGIN":break;case"UID":s.UID=c,s[i.id]=o++;break;case"SUMMARY":s[i.subject]=c;break;case"LOCATION":s[i.location]=c;break;case"DESCRIPTION":s[i.description]=c;break;case"RRULE":s[i.recurrenceRule]=c;break;default:s[l]=c}}));var l=sf.base.extend([],a,null,!0);this.parent.addEvent(this.processOccurrence(l))},e.prototype.processOccurrence=function(e){var t=[],i=this.parent.eventFields;return e.forEach((function(a){var n,r;a.hasOwnProperty(i.recurrenceID)||(n=a,r=a[i.id]);var s=e.filter((function(e){return e.UID===a.UID}));if(s.length>1&&sf.base.isNullOrUndefined(a[i.recurrenceID])){for(var o=0;o<s.length;o++)if(s[o].hasOwnProperty(i.recurrenceID)){var l=s[o][i.recurrenceID];s[o][i.recurrenceID]=r,s[o][i.recurrenceException]=null,n[i.recurrenceException]=sf.base.isNullOrUndefined(n[i.recurrenceException])?l:n[i.recurrenceException]+","+l,t.push(s[o])}t.push(n)}else a.hasOwnProperty(i.recurrenceID)||t.push(a)})),t},e.prototype.getDateString=function(e){return(e=e||"").replace(/\\\,/g,",").replace(/\\\;/g,";").replace(/\\[nN]/g,"\n").replace(/\\\\/g,"\\")},e.prototype.dateParsing=function(e){var t=e.match(/([^':;]+)((?:;(?:[^':;]+)(?:=(?:(?:'[^']*')|(?:[^':;]+))))*):(.*)/).slice(1),i=t[t.length-1],a=new Date(this.getDateString(i));if(e&&e.indexOf("VALUE=DATE")>-1){var n=/^(\d{4})(\d{2})(\d{2})$/.exec(i);null!==n&&(a=new Date(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10))),e.indexOf("DTSTART")>-1&&(this.allDay=!0)}var r=/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2})(Z)?$/.exec(i);return null!==r&&(a="Z"===r[7]?new Date(Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10))):new Date(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10))),a},e.prototype.getModuleName=function(){return"iCalendarImport"},e.prototype.destroy=function(){this.parent.isDestroyed},e}(),ha=function(){function e(e){this.parent=e}return e.prototype.initializeExcelExport=function(e){var t,i=this,a=e.fields||Object.keys(this.parent.eventFields).map((function(e){return i.parent.eventFields[e]})),n=e.fileName||"Schedule",r=e.exportType||"xlsx",s=e.includeOccurrences||!1;t=e.customData?s?this.parent.eventBase.getProcessedEvents(e.customData):e.customData:s?this.parent.eventsProcessed:this.parent.eventsData,this.processWorkbook(a,n,r,t)},e.prototype.processWorkbook=function(e,t,i,a){var n=this,r=[],s=[],o=[];e.forEach((function(e,t){return r.push({index:t+1,width:"Id"===e?20:150})}));var l={fontSize:12,borders:{color:"#E0E0E0"},bold:!0};e.forEach((function(e,t){return o.push({index:t+1,value:e,style:l})})),s.push({index:1,cells:o});for(var c=2,p=function(t){var i=[];e.forEach((function(e,a){var r={index:a+1,value:t[e]||""};if(e===n.parent.eventFields.startTime||e===n.parent.eventFields.endTime){r=sf.base.extend({},r,{style:{fontSize:12,numberFormat:"m/d/yyyy h:mm AM/PM"}},!0)}i.push(r)})),s.push({index:c,cells:i}),c++},d=0,h=a;d<h.length;d++){p(h[d])}var u=[{columns:r,rows:s}];new sf.excelexport.Workbook({worksheets:u},i,this.parent.locale).save(t+"."+i)},e.prototype.getModuleName=function(){return"excelExport"},e.prototype.destroy=function(){this.parent=null},e}(),ua=function(){function e(e){this.parent=e}return e.prototype.printScheduler=function(){var e=this.parent.element.cloneNode(!0);e.id=this.parent.element.id+"_print",document.body.appendChild(e);var t=this.getScrollableElement(this.parent.element);this.print(e,t.scrollTop,t.scrollLeft)},e.prototype.getScrollableElement=function(e){return"MonthAgenda"===this.parent.currentView?e.querySelector(".e-appointment-wrap"):e.querySelector(".e-content-wrap")},e.prototype.print=function(e,t,i){for(var a=this,n=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("link, style")),r="",s=0,o=n.length;s<o;s++)r+=n[s].outerHTML;var l=sf.base.createElement("div");e.style.width=this.parent.element.offsetWidth+"px";var c=100*Math.round(parseInt(e.style.width,10)/100);l.appendChild(e);var p=window.open("","print","height=550,width="+c+",tabbar=no");p.document.write("<!DOCTYPE html> <html><head>"+r+"</head><body>"+l.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),p.document.close(),p.focus(),setTimeout((function(){p.ready&&(a.scrolledScheduler(p,t,i),p.print(),p.close())}),500)},e.prototype.scrolledScheduler=function(e,t,i){var a=this.getScrollableElement(e.document.body);a.scrollLeft=i,a.scrollTop=t;var n=e.document.querySelector(".e-date-header-wrap");(this.parent.activeView.isTimelineView()&&(n.scrollLeft=i),"Day"===this.parent.currentView||"Week"===this.parent.currentView||"WorkWeek"===this.parent.currentView)&&(e.document.querySelector(".e-time-cells-wrap").scrollTop=t,n.scrollLeft=i);"Month"===this.parent.currentView&&(n.scrollLeft=i)},e.prototype.getModuleName=function(){return"print"},e.prototype.destroy=function(){this.parent=null},e}();return ui.Inject(Fi,Wi,_i,Gi,Ki,Ji,ta,aa,ca,yi,Ei,ha,pa,da,ua),e.Schedule=ui,e.cellClick="cellClick",e.cellDoubleClick="cellDoubleClick",e.moreEventsClick="moreEventsClick",e.select="select",e.hover="hover",e.actionBegin=t,e.actionComplete="actionComplete",e.actionFailure="actionFailure",e.navigating="navigating",e.renderCell=i,e.eventClick="eventClick",e.eventRendered="eventRendered",e.dataBinding="dataBinding",e.dataBound="dataBound",e.popupOpen="popupOpen",e.popupClose="popupClose",e.dragStart="dragStart",e.drag="drag",e.dragStop="dragStop",e.resizeStart="resizeStart",e.resizing="resizing",e.resizeStop="resizeStop",e.initialLoad="initial-load",e.initialEnd="initial-end",e.dataReady=a,e.eventsLoaded="events-loaded",e.contentReady=r,e.scroll="scroll",e.virtualScroll="virtual-scroll",e.scrollUiUpdate=s,e.uiUpdate="ui-update",e.documentClick="document-click",e.cellMouseDown="cell-mouse-down",e.WEEK_LENGTH=7,e.MS_PER_DAY=864e5,e.MS_PER_MINUTE=6e4,e.getElementHeightFromClass=o,e.getTranslateY=l,e.getWeekFirstDate=c,e.getWeekLastDate=p,e.firstDateOfMonth=d,e.lastDateOfMonth=h,e.getWeekNumber=u,e.setTime=f,e.resetTime=m,e.getDateInMs=v,e.getDateCount=g,e.addDays=y,e.addMonths=b,e.addYears=T,e.getStartEndHours=w,e.getMaxDays=D,e.getDaysCount=C,e.getDateFromString=E,e.getScrollBarWidth=S,e.findIndexInData=x,e.getOuterHeight=k,e.removeChildren=A,e.isDaylightSavingTime=V,e.addLocalOffset=M,e.addLocalOffsetToEvent=R,e.capitalizeFirstWord=P,e.Resize=yi,e.DragAndDrop=Ei,e.HeaderRenderer=N,e.ViewBase=Li,e.Day=Fi,e.Week=Wi,e.WorkWeek=_i,e.Month=Gi,e.Agenda=Ki,e.MonthAgenda=Ji,e.TimelineViews=ta,e.TimelineMonth=aa,e.TimelineYear=ca,e.Timezone=G,e.timezoneData=Q,e.ICalendarExport=pa,e.ICalendarImport=da,e.ExcelExport=ha,e.Print=ua,e.RecurrenceEditor=Mt,e.generateSummary=X,e.generate=Z,e.getDateFromRecurrenceDateString=J,e.extractObjectFromRule=ge,e.getCalendarUtil=Ce,e.getRecurrenceStringFromDate=_e,e.Gregorian=_,e.Islamic=Y,e},sfBlazor.loadDependencies(sfBlazor.dependencyJson.schedule,(function(){sf.schedule=sf.schedule({})}))}}]);