(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"./bundles/grids.js":function(e,t,r){"use strict";r.r(t);var i=r("../node_modules/@babel/runtime/helpers/typeof.js"),n=r.n(i);window.sf=window.sf||{},window.sf.grids=function(e){var t,r,i,s=function(){function e(e){this.intl=new sf.base.Internationalization,sf.base.isNullOrUndefined(e)||(this.intl.culture=e)}return e.prototype.getFormatFunction=function(e){if(e.type){if(sf.base.isBlazor()){e.isServerRendered=!0}return this.intl.getDateFormat(e)}return this.intl.getNumberFormat(e)},e.prototype.getParserFunction=function(e){if(e.type){if(sf.base.isBlazor()){e.isServerRendered=!0}return this.intl.getDateParser(e)}return this.intl.getNumberParser(e)},e.prototype.fromView=function(e,t,r){return"date"!==r&&"datetime"!==r&&"number"!==r||sf.base.isNullOrUndefined(t)?e:t(e)},e.prototype.toView=function(e,t){var r=e;return sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(e)||(r=t(e)),r},e.prototype.setCulture=function(e){sf.base.isNullOrUndefined(e)||sf.base.setCulture(e)},e}(),o=function(e,t,r,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=function(){function e(e){var t=this;this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=function(){return t.editTemplateFn},this.getFilterTemplate=function(){return t.filterTemplateFn},sf.base.merge(this,e),"none"===this.type?this.type=sf.base.isBlazor()&&!sf.base.isNullOrUndefined(this.template)&&sf.base.isNullOrUndefined(this.field)?"none":null:this.type&&(this.type="string"==typeof this.type?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),sf.base.isNullOrUndefined(this.uid)&&(this.uid=Qt("grid-column"));var r=new s;if(e.format&&(e.format.skeleton||e.format.format)&&(this.setFormatter(r.getFormatFunction(e.format)),this.setParser(r.getParserFunction(e.format))),this.toJSON=function(){for(var e={},r=["filter","dataSource",sf.base.isBlazor()?" ":"headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate"],i=Object.keys(t),n=0;n<i.length;n++)if("columns"===i[n]){e[i[n]]=[];for(var s=0;s<t[i[n]].length;s++)e[i[n]].push(t[i[n]][s].toJSON())}else r.indexOf(i[n])<0&&(e[i[n]]=t[i[n]]);return e},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some((function(e){return e.allowResizing})))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=Bt(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=Bt(this.headerTemplate)),!sf.base.isNullOrUndefined(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=Bt(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=Bt(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=Bt(this.filterTemplate)),this.isForeignColumn()&&(sf.base.isNullOrUndefined(this.editType)||"dropdownedit"===this.editType||"defaultedit"===this.editType)&&(this.editType="dropdownedit",this.edit.params=sf.base.extend({dataSource:this.dataSource,query:new sf.data.Query,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){var i=this.sortComparer;this.sortComparer=function(e,t,r,n){if("string"==typeof i&&(i=Sr(i,window)),"Descending"===this.sortDirection){var s=e;e=t,t=s;var o=r;r=n,n=o}return i(e,t,r,n)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=function(e,r){return e=Sr(t.foreignKeyValue,yr(t,{},e)[0]),r=Sr(t.foreignKeyValue,yr(t,{},r)[0]),"Descending"===t.sortDirection?sf.data.DataUtil.fnDescending(e,r):sf.data.DataUtil.fnAscending(e,r)})}return e.prototype.getSortDirection=function(){return this.sortDirection},e.prototype.setSortDirection=function(e){this.sortDirection=e},e.prototype.setProperties=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)this[t[r]]=e[t[r]]},e.prototype.isForeignColumn=function(){return!(!this.dataSource||!this.foreignKeyValue)},e.prototype.getFormatter=function(){return this.formatFn},e.prototype.setFormatter=function(e){this.formatFn=e},e.prototype.getParser=function(){return this.parserFn},e.prototype.setParser=function(e){this.parserFn=e},e.prototype.getColumnTemplate=function(){return this.templateFn},e.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},e.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},e.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},e}(),l=function(){function e(){}return o([sf.base.Property()],e.prototype,"title",void 0),o([sf.base.Property()],e.prototype,"type",void 0),o([sf.base.Property()],e.prototype,"buttonOption",void 0),e}(),d="actionBegin",c="actionComplete",h="dataBound",p="initial-load",u="initial-end",f="data-ready",g="content-ready",m="ui-update",y="on-empty",v="inbound-model-changed",b="model-changed",C="header-refreshed",w="key-pressed",S="click",x="destroy",R="toolbar-refresh",I="auto-col",T="prevent-batch",E="filter-Prevent";(t=e.CellType||(e.CellType={}))[t.Data=0]="Data",t[t.Header=1]="Header",t[t.Summary=2]="Summary",t[t.GroupSummary=3]="GroupSummary",t[t.CaptionSummary=4]="CaptionSummary",t[t.Filter=5]="Filter",t[t.Indent=6]="Indent",t[t.GroupCaption=7]="GroupCaption",t[t.GroupCaptionEmpty=8]="GroupCaptionEmpty",t[t.Expand=9]="Expand",t[t.HeaderIndent=10]="HeaderIndent",t[t.StackedHeader=11]="StackedHeader",t[t.DetailHeader=12]="DetailHeader",t[t.DetailExpand=13]="DetailExpand",t[t.CommandColumn=14]="CommandColumn",t[t.DetailFooterIntent=15]="DetailFooterIntent",t[t.RowDragIcon=16]="RowDragIcon",t[t.RowDragHIcon=17]="RowDragHIcon",(r=e.RenderType||(e.RenderType={}))[r.Header=0]="Header",r[r.Content=1]="Content",r[r.Summary=2]="Summary",(i=e.ToolbarItem||(e.ToolbarItem={}))[i.Add=0]="Add",i[i.Edit=1]="Edit",i[i.Update=2]="Update",i[i.Delete=3]="Delete",i[i.Cancel=4]="Cancel",i[i.Print=5]="Print",i[i.Search=6]="Search",i[i.ColumnChooser=7]="ColumnChooser",i[i.PdfExport=8]="PdfExport",i[i.ExcelExport=9]="ExcelExport",i[i.CsvExport=10]="CsvExport",i[i.WordExport=11]="WordExport";var D,F,O=function(){function e(e,t){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=e,this.serviceLocator=t,this.initDataManager(),this.parent.isDestroyed||"foreignKey"===this.getModuleName()||(this.parent.on("rows-added",this.addRows,this),this.parent.on("row-position-changed",this.reorderRows,this),this.parent.on("rows-removed",this.removeRows,this),this.parent.on("datasource-modified",this.initDataManager,this),this.parent.on(x,this.destroy,this),this.parent.on("update-data",this.crudActions,this),this.parent.on("add-delete-Action",this.getData,this),this.parent.on(I,this.refreshFilteredCols,this),this.parent.on("columns-prepared",this.refreshFilteredCols,this))}return e.prototype.reorderRows=function(e){this.dataManager.dataSource.json.splice(e.toIndex,0,this.dataManager.dataSource.json.splice(e.fromIndex,1)[0])},e.prototype.getModuleName=function(){return"data"},e.prototype.initDataManager=function(){var e=this.parent;this.dataManager=e.dataSource instanceof sf.data.DataManager?e.dataSource:sf.base.isNullOrUndefined(e.dataSource)?new sf.data.DataManager:new sf.data.DataManager(e.dataSource),this.isQueryInvokedFromData=!0,e.query=e.query instanceof sf.data.Query?e.query:new sf.data.Query},e.prototype.generateQuery=function(e){var t=this.parent.getQuery().clone();if("ExcludeHidden"===this.parent.columnQueryMode)t.select(this.parent.getColumns().filter((function(e){return!(!0!==e.isPrimaryKey&&!1===e.visible||void 0===e.field)})).map((function(e){return e.field})));else if("Schema"===this.parent.columnQueryMode){for(var r=[],i=this.parent.columns,n=0;n<i.length;n++)r.push(i[n].field);t.select(r)}return this.filterQuery(t),this.searchQuery(t),this.aggregateQuery(t),this.sortQuery(t),wr(this.parent)?this.virtualGroupPageQuery(t):this.pageQuery(t,e),this.groupQuery(t),t},e.prototype.aggregateQuery=function(e,t){for(var r=this.parent.aggregates,i=0;i<r.length;i++)for(var n=r[i],s=0;s<n.columns.length;s++)for(var o=n.columns[s],a=o.type instanceof Array?o.type:[o.type],l=0;l<a.length;l++)e.aggregate(a[l].toLowerCase(),o.field);return e},e.prototype.virtualGroupPageQuery=function(e){this.parent;if(e.queries.length)for(var t=0;t<e.queries.length;t++)"onPage"===e.queries[t].fn&&e.queries.splice(t,1);return e},e.prototype.pageQuery=function(e,t){var r=this.parent;if((r.allowPaging||r.enableVirtualization||r.enableInfiniteScrolling)&&!0!==t){if(r.pageSettings.currentPage=Math.max(1,r.pageSettings.currentPage),r.pageSettings.pageCount<=0&&(r.pageSettings.pageCount=8),r.pageSettings.pageSize<=0&&(r.pageSettings.pageSize=12),e.queries.length)for(var i=0;i<e.queries.length;i++)"onPage"===e.queries[i].fn&&e.queries.splice(i,1);!sf.base.isNullOrUndefined(r.infiniteScrollModule)&&r.enableInfiniteScrolling?this.parent.notify("infinite-page-query",e):e.page(r.pageSettings.currentPage,r.pageSettings.pageSize)}return e},e.prototype.groupQuery=function(e){var t=this.parent;if(t.allowGrouping&&t.groupSettings.columns.length)for(var r=t.groupSettings.columns,i=0,n=r.length;i<n;i++){var s=this.getColumnByField(r[i]);s||this.parent.log("initial_action",{moduleName:"group",columnName:r[i]});var o=s.enableGroupByFormat,a=s.format;o?e.group(r[i],this.formatGroupColumn.bind(this),a):e.group(r[i],null)}return e},e.prototype.sortQuery=function(e){var t=this.parent;if((t.allowSorting||t.allowGrouping)&&t.sortSettings.columns.length){for(var r=t.sortSettings.columns,i=[],n=r.length-1;n>-1;n--){var s=this.getColumnByField(r[n].field);if(!s)return this.parent.log("initial_action",{moduleName:"sort",columnName:r[n].field}),e;s.setSortDirection(r[n].direction);var o=r[n].direction;s.sortComparer&&(this.parent.log("grid_sort_comparer"),o=this.isRemote()?r[n].direction:s.sortComparer.bind(s)),-1===t.groupSettings.columns.indexOf(r[n].field)?e.sortBy(s.field,o):i.push({direction:o,field:s.field})}n=0;for(var a=i.length;n<a;n++)e.sortBy(i[n].field,i[n].direction)}return e},e.prototype.searchQuery=function(e){var t=this.parent.searchSettings,r=t.fields.length?t.fields:this.getSearchColumnFieldNames(),i=[];if(this.parent.searchSettings.key.length)if(this.parent.getForeignKeyColumns().some((function(e){return r.indexOf(e.field)>-1}))&&this.dataManager.adaptor.getModuleName&&"ODataV4Adaptor"===this.dataManager.adaptor.getModuleName()){for(var n=0;n<r.length;n++){var s=this.getColumnByField(r[n]);s.isForeignColumn()?i=this.fGeneratePredicate(s,i):i.push(new sf.data.Predicate(s.field,t.operator,t.key,t.ignoreCase,t.ignoreAccent))}e.where(sf.data.Predicate.or(i))}else e.search(t.key,r,t.operator,t.ignoreCase,t.ignoreAccent);return e},e.prototype.filterQuery=function(e,t,r){var i=this.parent,n=[],s=[],o=this.parent.getForeignKeyColumns();if(i.allowFiltering&&i.filterSettings.columns.length){for(var a=t||i.filterSettings.columns,l={},d=0,c=i.getColumns();d<c.length;d++){l[(x=c[d]).field]=x.filter.type?x.filter.type:i.filterSettings.type}for(var h=[],p=[],u=0,f=a;u<f.length;u++){(x=f[u]).isForeignKey?h.push(x):p.push(x)}if(p.length){if("FilterBar"===i.filterSettings.type||"Menu"===i.filterSettings.type)for(var g=0,m=p.length;g<m;g++)p[g].uid=p[g].uid||this.parent.grabColumnByFieldFromAllCols(p[g].field).uid;for(var y=jr.getPredicate(p),v=0,b=Object.keys(y);v<b.length;v++){var C=b[v];n.push(y[C])}}if(h.length)for(var w=0,S=h;w<S.length;w++){var x;(x=S[w]).uid=x.uid||this.parent.grabColumnByFieldFromAllCols(x.field).uid;var R=this.parent.grabColumnByUidFromAllCols(x.uid);if(R||this.parent.log("initial_action",{moduleName:"filter",columnName:x.field}),R.isForeignColumn()&&vr(x.field,o)&&!r)s.push(x),n=this.fGeneratePredicate(R,n);else{y=jr.getPredicate(a);for(var I=0,T=Object.keys(y);I<T.length;I++){C=T[I];n.push(y[C])}}}n.length?e.where(sf.data.Predicate.and(n)):this.parent.notify("showEmptyGrid",{})}return e},e.prototype.fGeneratePredicate=function(e,t){var r={};return e&&(this.parent.notify("generateQuery",{predicate:r,column:e}),r.predicate.predicates.length&&t.push(r.predicate)),t},e.prototype.getData=function(e,t){var r=this;void 0===e&&(e={requestType:""});var i=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource)return this.eventPromise(e,t,i).promise;var n=void 0;switch(e.requestType){case"delete":if(t=t||this.generateQuery(),1===Object.keys(e.data).length)n=this.dataManager.remove(i,e.data[0],t.fromTable,t);else{var s={addedRecords:[],deletedRecords:[],changedRecords:[]};s.deletedRecords=e.data,n=this.dataManager.saveChanges(s,i,t.fromTable,t.requiresCount())}break;case"save":sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.notify("offset",e),t=t||this.generateQuery(),e.index=sf.base.isNullOrUndefined(e.index)?0:e.index,n=this.dataManager.insert(e.data,t.fromTable,t,e.index)}return e.promise=n,!n||Array.isArray(n)||n.hasOwnProperty("deletedRecords")?this.insert(t,e):sf.base.isBlazor()?n.then((function(i){return r.insert(t,e)})).catch((function(e){return null})):n.then((function(i){return r.insert(t,e)}))},e.prototype.insert=function(e,t){return"save"===t.requestType&&this.parent.notify("recordAdded",t),this.executeQuery(e)},e.prototype.executeQuery=function(e){var t=this;if(this.dataManager.ready){var r=new sf.data.Deferred;return this.dataManager.ready.then((function(i){t.dataManager.executeQuery(e).then((function(e){r.resolve(e)}))})).catch((function(e){r.reject(e)})),r.promise}return this.dataManager.executeQuery(e)},e.prototype.formatGroupColumn=function(e,t){this.parent;var r=this.serviceLocator,i=this.getColumnByField(t),o=e;return i.type||(i.type=o.getDay?o.getHours()>0||o.getMinutes()>0||o.getSeconds()>0||o.getMilliseconds()>0?"datetime":"date":n()(e)),sf.base.isNullOrUndefined(i.getFormatter())&&lr(r,i),s.prototype.toView(e,i.getFormatter())},e.prototype.crudActions=function(e){var t=this.generateQuery(),r=null,i="promise",n=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());switch(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(e,t,n),e.requestType){case"save":sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.notify("offset",e),r=this.dataManager.update(n,e.data,t.fromTable,t,e.previousData)}e[i]=r||e[i],this.parent.notify("crud-Action",e)},e.prototype.saveChanges=function(e,t,r,i){if(void 0===i&&(i=this.generateQuery()),i.requiresCount(),"result"in this.parent.dataSource){this.getStateEventArgument(i);var n=new sf.data.Deferred,s={requestType:"batchsave",changes:e,key:t,query:i,endEdit:n.resolve};return this.setState({isPending:!0,resolver:n.resolve}),this.parent.trigger("dataSourceChanged",s),n.promise}if(sf.base.isBlazor()&&this.parent.isServerRendered){for(var o=0;o<e.changedRecords.length;o++){s={data:e.changedRecords[o]};this.parent.notify("offset",s),e.changedRecords[o]=s.data}for(o=0;o<e.addedRecords.length;o++){s={data:e.addedRecords[o]};this.parent.notify("offset",s),e.addedRecords[o]=s.data}}return this.dataManager.saveChanges(e,t,i.fromTable,i,r)},e.prototype.getKey=function(e){if(e&&e.length)return e[0]},e.prototype.isRemote=function(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url&&""!==this.dataManager.dataSource.url},e.prototype.addRows=function(e){for(var t=e.records.length;t>0;t--)this.dataManager.dataSource.json.splice(e.toIndex,0,e.records[t-1])},e.prototype.removeRows=function(e){var t=this.dataManager.dataSource.json;this.dataManager.dataSource.json=t.filter((function(t,r){return-1===e.records.indexOf(t)}))},e.prototype.getColumnByField=function(e){var t;return this.parent.columnModel.some((function(r){return t=r,r.field===e}))&&t},e.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off("rows-added",this.addRows),this.parent.off("rows-removed",this.removeRows),this.parent.off("datasource-modified",this.initDataManager),this.parent.off(x,this.destroy),this.parent.off("update-data",this.crudActions),this.parent.off("add-delete-Action",this.getData),this.parent.off(I,this.refreshFilteredCols),this.parent.off("columns-prepared",this.refreshFilteredCols))},e.prototype.getState=function(){return this.dataState},e.prototype.setState=function(e){return this.dataState=e},e.prototype.getForeignKeyDataState=function(){return this.foreignKeyDataState},e.prototype.setForeignKeyDataState=function(e){this.foreignKeyDataState=e},e.prototype.getStateEventArgument=function(e){var t=new sf.data.UrlAdaptor,r=new sf.data.DataManager({url:"",adaptor:new sf.data.UrlAdaptor}),i=t.processQuery(r,e),n=JSON.parse(i.data);return sf.base.extend(n,i.pvtData)},e.prototype.eventPromise=function(e,t,r){var i,n=this,s=e;i=this.getStateEventArgument(t);var o=new sf.data.Deferred,a=new sf.data.Deferred;if(void 0!==e.requestType&&!1!==this.dataState.isDataChanged)if(i.action=e,"save"===e.requestType||"delete"===e.requestType){var l=e;l.key=r;l.promise=a.promise,l.state=i,this.setState({isPending:!0,resolver:a.resolve}),s.endEdit=a.resolve,s.cancelEdit=a.reject,this.parent.trigger("dataSourceChanged",l),a.promise.then((function(e){n.setState({isPending:!0,resolver:o.resolve,group:i.group,aggregates:i.aggregates}),"save"===l.requestType&&n.parent.notify("recordAdded",l),n.parent.trigger("dataStateChange",i)})).catch((function(){}))}else this.setState({isPending:!0,resolver:o.resolve,group:i.group,aggregates:i.aggregates}),this.parent.trigger("dataStateChange",i);else this.setState({}),o.resolve(this.parent.dataSource);return o},e.prototype.getSearchColumnFieldNames=function(){for(var e=[],t=0,r=this.parent.getColumns();t<r.length;t++){var i=r[t];i.allowSearching&&!sf.base.isNullOrUndefined(i.field)&&e.push(i.field)}return e},e.prototype.refreshFilteredCols=function(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&Or(this.parent,this.parent.filterSettings.columns)},e}(),M=function(){function e(e){sf.base.merge(this,e)}return e.prototype.clone=function(){var t=new e({});return sf.base.merge(t,this),t.cells=this.cells.map((function(e){return e.clone()})),t},e}(),k=function(){function e(e){this.isSpanned=!1,this.isRowSpanned=!1,sf.base.merge(this,e)}return e.prototype.clone=function(){var t=new e({});return sf.base.merge(t,this),t},e}(),A=function(){function t(e,t){this.serviceLocator=e,this.parent=t}return t.prototype.render=function(t,r,i,n){var s,o=this.serviceLocator.getService("cellRendererFactory").getCellRenderer(r.cells[i].cellType||e.CellType.Data),a=r.cells[i].cellSpan?r.cells[i].cellSpan:t.colSpan+i<=r.cells.length?t.colSpan:r.cells.length-i,l=t.rowSpan,d=0;if(r.index>0){var c=this.parent.groupSettings.columns.length>0&&!this.parent.getRowsObject()[r.index-1].isDataRow?this.parent.getRowsObject()[r.index].cells:this.parent.getRowsObject()[r.index-1].cells,h=r.cells[i];s=c.filter((function(e){return e.column.uid===h.column.uid}))[0]}for(var p=s&&s.colSpanRange>1&&s.rowSpanRange>1?s.colSpanRange:a,u=i+1;u<i+p&&u<r.cells.length;u++)!1===r.cells[u].visible?d++:r.cells[u].isSpanned=!0;if(d>0){for(u=i+a;u<i+a+d&&u<r.cells.length;u++)r.cells[u].isSpanned=!0;i+a+d>=r.cells.length&&(a-=i+a+d-r.cells.length)}return r.cells[i].cellSpan&&(r.data[t.column.field]=r.cells[i].spanText,n=o.render(r.cells[i],r.data,{index:sf.base.isNullOrUndefined(r.index)?"":r.index.toString()})),a>1&&sf.base.attributes(n,{colSpan:a.toString(),"aria-colSpan":a.toString()}),l>1&&(sf.base.attributes(n,{rowspan:l.toString(),"aria-rowspan":l.toString()}),r.cells[i].isRowSpanned=!0,r.cells[i].rowSpanRange=Number(l),a>1&&(r.cells[i].colSpanRange=Number(a))),r.index>0&&s.rowSpanRange>1&&(r.cells[i].isSpanned=!0,r.cells[i].rowSpanRange=Number(s.rowSpanRange-1),r.cells[i].colSpanRange=s.rowSpanRange>0?s.colSpanRange:1),!this.parent.enableColumnVirtualization||r.cells[i].cellSpan||this.containsKey(t.column.field,t.data[t.column.field])||this.backupMergeCells(t.column.field,t.data[t.column.field],t.colSpan),n},t.prototype.backupMergeCells=function(e,t,r){this.setMergeCells(this.generteKey(e,t),r)},t.prototype.generteKey=function(e,t){return e+"__"+t.toString()},t.prototype.splitKey=function(e){return e.split("__")},t.prototype.containsKey=function(e,t){return this.getMergeCells().hasOwnProperty(this.generteKey(e,t))},t.prototype.getMergeCells=function(){return this.parent.mergeCells},t.prototype.setMergeCells=function(e,t){this.parent.mergeCells[e]=t},t.prototype.updateVirtualCells=function(e){for(var t=this.getMergeCells(),r=0,i=Object.keys(t);r<i.length;r++){var n=i[r],s=t[n],o=this.splitKey(n),a=this.getIndexFromAllColumns(o[0]),l=this.parent.getColumnIndexesInView(),d=s-(l[0]-a);if(a<l[0]&&d>1)for(var c=0,h=e;c<h.length;c++){var p=h[c];if(p.data[o[0]].toString()===o[1].toString()){p.cells[0].cellSpan=d,p.cells[0].spanText=o[1];break}}}return e},t.prototype.getIndexFromAllColumns=function(e){return kt(this.parent.getVisibleColumns(),(function(t,r){if(t.field===e)return r}))[0]},t}(),B=function(){function t(e,t,r){this.isSpan=!1,this.cellType=t,this.serviceLocator=e,this.parent=r,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}return t.prototype.render=function(e,t,r,i,n){return this.refreshRow(e,t,r,i,n)},t.prototype.refresh=function(e,t,r,i,n){r&&(e.data=Tr({},e.changes),this.refreshMergeCells(e));var s=this.parent.element.querySelector("[data-uid="+e.uid+"]"),o=this.refreshRow(e,t,i,n,null,r),a=[].slice.call(o.cells);s.innerHTML="";for(var l=0,d=a;l<d.length;l++){var c=d[l];s.appendChild(c)}},t.prototype.refreshRow=function(t,r,i,n,s,o){var a=sf.base.isNullOrUndefined(s)?this.element.cloneNode():s,l={data:t.data},d={data:t.data},c=sf.base.extend({},i,{}),h=this.parent.getColumns().filter((function(e){return"checkbox"===e.type&&e.field}))[0],p=!1;h&&(p=Sr(h.field,l.data)),t.isDataRow&&(t.isSelected=this.parent.getSelectedRowIndexes().indexOf(t.index)>-1||p),t.isDataRow&&this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(t.isSelected=!0,-1===this.parent.getSelectedRowIndexes().indexOf(t.index)&&this.parent.getSelectedRowIndexes().push(t.index)),this.buildAttributeFromRow(a,t),sf.base.attributes(a,c),Pt(a,t.attributes);for(var u=this.serviceLocator.getService("cellRendererFactory"),f=function(r,i){var n=t.cells[r];n.isSelected=t.isSelected;var s=u.getCellRenderer(t.cells[r].cellType||e.CellType.Data),l={index:sf.base.isNullOrUndefined(t.index)?"":t.index.toString()};t.isExpand&&t.cells[r].cellType===e.CellType.DetailExpand&&(l.class=g.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");var c=s.render(t.cells[r],t.data,l,t.isExpand,o);if(t.cells[r].cellType!==e.CellType.Filter){if(t.cells[r].cellType===e.CellType.Data||t.cells[r].cellType===e.CellType.CommandColumn){g.parent.trigger("queryCellInfo",sf.base.extend(d,{cell:c,column:n.column,colSpan:1,rowSpan:1,foreignKeyData:t.cells[r].foreignKeyData,requestType:g.parent.requestTypeAction}));var h=!1;if(t.index>0&&g.isSpan){var p=g.parent.groupSettings.columns.length>0&&!g.parent.getRowsObject()[t.index-1].isDataRow?g.parent.getRowsObject()[t.index].cells:g.parent.getRowsObject()[t.index-1].cells,f=p.filter((function(e){return e.column.uid===t.cells[r].column.uid}))[0];h=f.isRowSpanned?f.isRowSpanned:f.rowSpanRange>1}if(d.colSpan>1||t.cells[r].cellSpan>1||d.rowSpan>1||h)g.isSpan=!0,c=new A(g.serviceLocator,g.parent).render(d,t,r,c)}t.cells[r].isSpanned||a.appendChild(c)}},g=this,m=0,y=t.cells.length;m<y;m++)f(m);var v={row:a,rowHeight:this.parent.rowHeight};if(t.isDataRow&&(this.parent.trigger("rowDataBound",sf.base.extend(l,v)),this.parent.childGrid||this.parent.isRowDragable()||this.parent.detailTemplate)){var b=a.querySelectorAll(".e-rowcell:not(.e-hide)")[0];b&&b.classList.add("e-detailrowvisible")}if(this.parent.enableVirtualization&&(l.rowHeight=this.parent.rowHeight),l.rowHeight?a.style.height=l.rowHeight+"px":this.parent.rowHeight&&(a.querySelector(".e-headercell")||a.querySelector(".e-groupcaption"))&&(a.style.height=this.parent.rowHeight+"px"),t.cssClass&&a.classList.add(t.cssClass),!(this.parent.enableColumnVirtualization&&0!==this.parent.frozenColumns)&&this.parent.element.scrollHeight>this.parent.height&&this.parent.aggregates.length)for(m=0;m<this.parent.aggregates.length;m++){if(this.parent.aggregates[m].properties.columns[0].footerTemplate){var C=a.querySelectorAll(".e-summarycell");if(C.length){var w=C[C.length-1];sf.base.addClass([w],["e-lastsummarycell"])}}}return a},t.prototype.refreshMergeCells=function(e){for(var t=0,r=e.cells;t<r.length;t++){r[t].isSpanned=!1}return e},t.prototype.buildAttributeFromRow=function(e,t){var r={},i="aria-rowindex",n="data-uid",s="aria-selected",o=[];t.isDataRow&&o.push("e-row"),t.isAltRow&&o.push("e-altrow"),sf.base.isNullOrUndefined(t.index)||(r[i]=t.index),t.rowSpan&&(r.rowSpan=t.rowSpan),t.uid&&(r[n]=t.uid),t.isSelected&&(r[s]=!0),!1===t.visible&&o.push("e-hide"),r.class=o,Pt(e,r)},t}(),P=function(){function t(e){this.parent=e}return t.prototype.generateRows=function(e,t){for(var r=[],i=this.parent.enableInfiniteScrolling&&"infiniteScroll"===t.requestType,n=this.parent.enableVirtualization||i?t.startIndex:0,s=0,o=Object.keys(e).length;s<o;s++,n++)r[s]=this.generateRow(e[s],n);return r},t.prototype.ensureColumns=function(){var t=[];if(this.parent.detailTemplate||this.parent.childGrid){var r={};this.parent.notify("detail-indentcell-info",r),t.push(this.generateCell(r,null,e.CellType.DetailExpand))}return this.parent.isRowDragable()&&t.push(this.generateCell({},null,e.CellType.RowDragIcon)),t},t.prototype.generateRow=function(e,t,r,i,n,s,o){var a={foreignKeyData:{}};a.uid=sf.base.isBlazor()&&this.parent.isServerRendered?this.parent.getRowUid("grid-row"):Qt("grid-row"),a.data=e,a.index=t,a.indent=i,a.tIndex=s,a.isDataRow=!0,a.parentGid=n,a.parentUid=o,this.parent.isPrinting&&("All"===this.parent.hierarchyPrintMode?a.isExpand=!0:"Expanded"===this.parent.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[t]&&(a.isExpand=this.parent.expandedRows[t].isExpand)),a.cssClass=r,a.isAltRow=!!this.parent.enableAltRow&&t%2!=0,a.isAltRow=!!this.parent.enableAltRow&&t%2!=0,sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.enableVirtualization&&this.parent.selectionModule.checkBoxState?(a.isSelected=this.parent.selectionModule.checkBoxState,a.isSelected&&-1===this.parent.selectionModule.selectedRowIndexes.indexOf(t)&&this.parent.selectionModule.selectedRowIndexes.push(t)):a.isSelected=this.parent.getSelectedRowIndexes().indexOf(t)>-1,this.refreshForeignKeyRow(a);var l=this.ensureColumns(),d=new M(a);return d.cells=l.concat(this.generateCells(a)),d},t.prototype.refreshForeignKeyRow=function(e){for(var t=this.parent.getForeignKeyColumns(),r=0;r<t.length;r++)sf.base.setValue(t[r].field,yr(t[r],e.data),e.foreignKeyData)},t.prototype.generateCells=function(t){for(var r=this.parent.getColumns(),i=[],n=0;n<r.length;n++)i.push(this.generateCell(r[n],t.uid,sf.base.isNullOrUndefined(r[n].commands)?void 0:e.CellType.CommandColumn,null,n,t.foreignKeyData));return i},t.prototype.generateCell=function(t,r,i,n,s,o){var a={visible:t.visible,isDataCell:!sf.base.isNullOrUndefined(t.field||t.template),isTemplate:!sf.base.isNullOrUndefined(t.template),rowID:r,column:t,cellType:sf.base.isNullOrUndefined(i)?e.CellType.Data:i,colSpan:n,commands:t.commands,isForeignKey:t.isForeignColumn&&t.isForeignColumn(),foreignKeyData:t.isForeignColumn&&t.isForeignColumn()&&sf.base.getValue(t.field,o)};return(a.isDataCell||"checkbox"===a.column.type||a.commands)&&(a.index=s),new k(a)},t.prototype.refreshRows=function(e){for(var t=0;t<e.length;t++)this.refreshForeignKeyRow(e[t]),e[t].cells=this.generateCells(e[t]);return e},t}(),z=(D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),N=function(){function t(e){this.parent=e}return t.prototype.getData=function(){for(var e=this,t=[],r=this.parent.aggregates.slice(),i=0;i<r.length;i++){var n=r[i].columns.filter((function(t){return!(t.footerTemplate||t.groupFooterTemplate||t.groupCaptionTemplate)||e.columnSelector(t)}));n.length&&t.push({columns:n})}return t},t.prototype.columnSelector=function(e){return void 0!==e.footerTemplate},t.prototype.getColumns=function(e,t){var r=[];if(this.parent.allowGrouping)for(var i=0;i<this.parent.groupSettings.columns.length;i++)r.push(new a({}));return(this.parent.detailTemplate||!sf.base.isNullOrUndefined(this.parent.childGrid)||this.parent.isRowDragable())&&r.push(new a({})),r.push.apply(r,this.parent.getColumns()),sf.base.isNullOrUndefined(e)?r:r.slice(e,t)},t.prototype.generateRows=function(e,t,r,i){if(0===e.length&&(void 0===t||!t.count))return[];for(var n=this.buildSummaryData(e,t),s=[],o=this.getData(),a=0;a<o.length;a++)s.push(this.getGeneratedRow(o[a],n[a],t?t.level:void 0,r,i,t?t.parentUid:void 0));return s},t.prototype.getGeneratedRow=function(t,r,i,n,s,o){var a=[],l=this.getIndentByLevel(i),d=!sf.base.isNullOrUndefined(this.parent.childGrid),c=this.parent.getIndentCount();this.parent.isRowDragable()&&(l=["e-indentcelltop"]);for(var h=this.getColumns(n,s),p=0;p<h.length;p++)a.push(this.getGeneratedCell(h[p],t,p>=c?this.getCellType():p<this.parent.groupSettings.columns.length?e.CellType.Indent:e.CellType.DetailFooterIntent,l[p],d));var u=new M({data:r,attributes:{class:"e-summaryrow"}});return u.cells=a,sf.base.isBlazor()&&this.parent.isServerRendered&&!sf.base.isNullOrUndefined(o)?u.uid=this.parent.getRowUid("grid-row"):u.uid=Qt("grid-row"),u.parentUid=o,u.visible=a.some((function(e){return e.isDataCell&&e.visible})),u},t.prototype.getGeneratedCell=function(e,t,r,i,n){var s=t.columns.filter((function(t){return t.columnName===e.field}))[0],o={style:{textAlign:e.textAlign},"e-mappinguid":e.uid,index:e.index};i&&(o.class=i),sf.base.isNullOrUndefined(i)&&n&&(o.class="e-detailindentcelltop");var a={visible:e.visible,isDataCell:!sf.base.isNullOrUndefined(s),isTemplate:s&&!sf.base.isNullOrUndefined(s.footerTemplate||s.groupFooterTemplate||s.groupCaptionTemplate),column:s||{},attributes:o,cellType:r};return new k(a)},t.prototype.buildSummaryData=function(e,t){for(var r=[],i=this.getData(),n={},s=0;s<i.length;s++){n={};for(var o=i[s].columns,a=0;a<o.length;a++)n=this.setTemplate(o[a],t&&t.aggregates?t:e,n);r.push(n)}return r},t.prototype.getIndentByLevel=function(e){return this.parent.groupSettings.columns.map((function(){return"e-indentcelltop"}))},t.prototype.setTemplate=function(e,t,r){var i=e.type,n={},s=e.getFormatter()||function(e){return e},o=t;i instanceof Array||(i=[e.type]);for(var a=0;a<i.length;a++){var l=e.field+" - "+i[a].toLowerCase(),d=e.columnName,c="Custom"!==i[a]&&o.aggregates&&l in o.aggregates?o.aggregates[l]:Yt(i[a],o.aggregates?o:t,e,this.parent);r[d]=r[d]||{},r[d][l]=c,r[d][i[a]]=sf.base.isNullOrUndefined(c)?" ":s(c),o.field&&(r[d].field=o.field,r[d].key=o.key)}return n.format=e.getFormatter(),e.setTemplate(n),r},t.prototype.getCellType=function(){return e.CellType.Summary},t}(),L=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return z(r,t),r.prototype.columnSelector=function(e){return void 0!==e.groupFooterTemplate},r.prototype.getIndentByLevel=function(e){return void 0===e&&(e=this.parent.groupSettings.columns.length),this.parent.groupSettings.columns.map((function(t,r){return r<=e-1?"":"e-indentcelltop"}))},r.prototype.getCellType=function(){return e.CellType.GroupSummary},r}(N),q=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return z(r,t),r.prototype.columnSelector=function(e){return void 0!==e.groupCaptionTemplate},r.prototype.getData=function(){return[t.prototype.getData.call(this).reduce((function(e,t){return e.columns=e.columns.concat(t.columns),e}),{columns:[]})]},r.prototype.isEmpty=function(){return 0===(this.getData()[0].columns||[]).length},r.prototype.getCellType=function(){return e.CellType.CaptionSummary},r}(N),H=(F=function(e,t){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}F(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),U=function(t){function r(e){var r=t.call(this,e)||this;return r.rows=[],r.index=0,r.parent=e,r.summaryModelGen=new L(e),r.captionModelGen=new q(e),r}return H(r,t),r.prototype.generateRows=function(e,r){if(0===this.parent.groupSettings.columns.length)return t.prototype.generateRows.call(this,e,r);var i=this.parent.enableInfiniteScrolling&&"infiniteScroll"===r.requestType;this.rows=[],this.index=this.parent.enableVirtualization||i?r.startIndex:0;for(var n=0,s=e.length;n<s;n++)this.getGroupedRecords(0,e[n],e.level,n,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows},r.prototype.getGroupedRecords=function(e,t,r,i,n,s,o){var a,l=this.parent.enableInfiniteScrolling&&this.prevKey===t.key,d=r;if(sf.base.isNullOrUndefined(t.items))if(sf.base.isNullOrUndefined(t.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(t,e,i,this.rows.length,o));else for(var c=0,h=t.length;c<h;c++)this.getGroupedRecords(e,t[c],t.level,i,e,this.rows.length,o);else{var p=this.generateCaptionRow(t,e,i,n,s,o);if(l||(this.rows=this.rows.concat(p)),t.items&&t.items.length&&this.getGroupedRecords(e+1,t.items,t.items.level,i,e+1,this.rows.length,p.uid),this.parent.aggregates.length){var u=this.rows.length;(a=this.rows).push.apply(a,this.summaryModelGen.generateRows(t,{level:d,parentUid:p.uid}));for(var f=u-1;f>=0;f--)if(this.rows[f].isCaptionRow)this.rows[f].aggregatesCount=this.rows.length-u;else if(!this.rows[f].isCaptionRow&&!this.rows[f].isDataRow)break}}this.prevKey=t.key},r.prototype.getCaptionRowCells=function(t,r,i){var n=[],s=[],o=this.parent.getColumnByField(t),a=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(o=this.parent.columns.filter((function(e){return e.field===t}))[0]);var l=this.parent.groupSettings.columns.length,d=this.parent;if(!this.parent.enableColumnVirtualization||-1!==a.indexOf(r)){for(var c=0;c<r;c++)n.push(this.generateIndentCell());n.push(this.generateCell({},null,e.CellType.Expand))}if(r=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+l+(d.detailTemplate||d.childGrid?1:0)-r+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){var h=this.captionModelGen.generateRows(i)[0];sf.base.extend(i,h.data);var p=0;h.cells.some((function(e,t){return p=t,e.visible&&e.isDataCell})),s=h.cells.slice(p).filter((function(e){return e.visible})),h.visible&&s[0].column.field===this.parent.getVisibleColumns()[0].field&&(s=s.slice(1)),1===this.parent.getVisibleColumns().length&&(s=[]),r-=s.length}for(var u=this.parent.enableColumnVirtualization?this.parent.getColumns():[o],f=!0,g=0;g<u.length;g++){var m=f&&-1!==a.indexOf(r);m&&(f=!1);var y=!this.parent.enableColumnVirtualization||m?e.CellType.GroupCaption:e.CellType.GroupCaptionEmpty;r=this.parent.enableColumnVirtualization&&y===e.CellType.GroupCaption?r+l:r,d.isRowDragable()&&r++,n.push(this.generateCell(o,null,y,r))}return n.push.apply(n,s),n},r.prototype.generateCaptionRow=function(e,t,r,i,n,s){var o={},a=this.parent.getColumnByField(e.field);o.data=sf.base.extend({},e),a&&(o.data.field=e.field),o.isDataRow=!1,o.isExpand=!this.parent.isCollapseStateEnabled(),o.parentGid=r,o.childGid=i,o.tIndex=n,o.isCaptionRow=!0,o.parentUid=s,o.gSummary=sf.base.isNullOrUndefined(e.items.records)?e.items.length:e.items.records.length,o.uid=sf.base.isBlazor()&&this.parent.isServerRendered?this.parent.getRowUid("grid-row"):Qt("grid-row");var l=new M(o);return l.indent=t,this.getForeignKeyData(l),l.cells=this.getCaptionRowCells(e.field,t,l.data),l},r.prototype.getForeignKeyData=function(e){var t=e.data,r=this.parent.getColumnByField(t.field);if(r&&r.isForeignColumn&&r.isForeignColumn()){var i=sf.base.isNullOrUndefined(t.key)?"":r.valueAccessor(r.foreignKeyValue,yr(r,{},t.key)[0],r);sf.base.setValue("foreignKey",i,e.data)}},r.prototype.generateDataRows=function(e,t,r,i,n){for(var s=[],o=this.parent.getColumnIndexesInView(),a=0,l=e.length;a<l;a++,i++){s[a]=this.generateRow(e[a],this.index,a?void 0:"e-firstchildrow",t,r,i,n);for(var d=0;d<t;d++)this.parent.enableColumnVirtualization&&-1===o.indexOf(t)||s[a].cells.unshift(this.generateIndentCell());this.index++}return s},r.prototype.generateIndentCell=function(){return this.generateCell({},null,e.CellType.Indent)},r.prototype.refreshRows=function(e){for(var t=this.parent.getColumnIndexesInView(),r=0;r<e.length;r++)if(e[r].isDataRow){e[r].cells=this.generateCells(e[r]);for(var i=0;i<e[r].indent;i++)this.parent.enableColumnVirtualization&&-1===t.indexOf(e[r].indent)||e[r].cells.unshift(this.generateIndentCell())}else{var n=this.generateCaptionRow(e[r].data,e[r].indent);e[r].cells=n.cells}return e},r.prototype.ensureRowVisibility=function(){for(var e=0;e<this.rows.length;e++){var t=this.rows[e];if(t.isCaptionRow)for(var r=e+1;r<this.rows.length;r++){var i=this.rows[r];t.uid===i.parentUid&&(this.rows[r].visible=t.isExpand)}}},r}(P),j=function(){function e(e,t){var r=this;this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.isLoaded=!0,this.viewColIndexes=[],this.drop=function(e){r.parent.notify("columnDrop",{target:e.target,droppedElement:e.droppedElement}),sf.base.remove(e.droppedElement)},this.infiniteCache={},this.isRemove=!1,this.visibleRows=[],this.isAddRows=!1,this.rafCallback=function(e){var t=e;return function(){if(r.parent.getFrozenColumns()&&r.parent.enableVirtualization){var i=[].slice.call(r.parent.getMovableVirtualContent().querySelectorAll(".e-row")),n=[].slice.call(r.parent.getFrozenVirtualContent().querySelectorAll(".e-row"));if(r.isLoaded=!!i&&i.length===n.length,r.parent.enableColumnVirtualization&&"virtualscroll"===e.requestType&&r.isLoaded){var s=[].slice.call(r.parent.getMovableVirtualHeader().querySelectorAll(".e-row")),o=[].slice.call(r.parent.getFrozenVirtualHeader().querySelectorAll(".e-row"));r.isLoaded=s.length===o.length}}if(r.ariaService.setBusy(r.getPanel().querySelector(".e-content"),!1),!r.parent.isDestroyed){var a=r.rows.slice(0);if(0!==r.parent.getFrozenColumns()&&(a=e.isFrozen?r.freezeRows:r.movableRows),r.parent.notify(g,{rows:a,args:t}),r.isLoaded&&r.parent.trigger(h,{},(function(){r.parent.allowTextWrap&&r.parent.notify("freezerender",{case:"textwrap"})})),t){var l=(t.requestType||"").toLowerCase()+"-complete";r.parent.notify(l,t),"batchsave"===e.requestType&&(e.cancel=!1,r.parent.trigger(c,e))}r.isLoaded&&r.parent.hideSpinner()}}},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.generator=this.getModelGenerator(),this.parent.isDestroyed||(this.parent.enableColumnVirtualization||this.parent.enableVirtualization||this.parent.on("column-visible-changed",this.setVisible,this),this.parent.on("colgroup-refresh",this.colGroupRefresh,this),this.parent.on(m,this.enableAfterRender,this),this.parent.on("refresh-infinite-mode-blocks",this.refreshContentRows,this),this.parent.on("beforecellfocused",this.beforeCellFocused,this))}return e.prototype.beforeCellFocused=function(e){!e.byKey||"upArrow"!==e.keyArgs.action&&"downArrow"!==e.keyArgs.action?this.pressedKey=void 0:this.pressedKey=e.keyArgs.action},e.prototype.renderPanel=function(){var e=this.parent,t=this.parent.element.querySelector(".e-gridcontent");if(t)return this.ariaService.setOptions(this.parent.element.querySelector(".e-content"),{busy:!1}),void this.setPanel(t);t=this.parent.createElement("div",{className:"e-gridcontent"});var r=this.parent.createElement("div",{className:"e-content"});this.ariaService.setOptions(r,{busy:!1}),t.appendChild(r),this.setPanel(t),e.element.appendChild(t)},e.prototype.renderTable=function(){var e=this.getPanel(),t=e.querySelector(".e-virtualtable"),r=e.querySelector(".e-virtualtrack");!this.parent.enableVirtualization||sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(r)||sf.base.isBlazor()&&(!sf.base.isBlazor()||this.parent.isServerRendered)||(sf.base.remove(t),sf.base.remove(r)),e.appendChild(this.createContentTable("_content_table")),this.setTable(e.querySelector(".e-table")),this.ariaService.setOptions(this.getTable(),{multiselectable:"Multiple"===this.parent.selectionSettings.type}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdrcont")},e.prototype.createContentTable=function(e){var t=this.getPanel().firstElementChild;sf.base.isBlazor()||this.getTable()&&sf.base.remove(this.getTable());var r=t.querySelector(".e-table")?t.querySelector(".e-table"):this.parent.createElement("table",{className:"e-table",attrs:{cellspacing:"0.25px",role:"grid",id:this.parent.element.id+e}});return this.setColGroup(this.parent.element.querySelector(".e-gridheader").querySelector("colgroup").cloneNode(!0)),r.appendChild(this.getColGroup()),r.appendChild(this.parent.createElement("tbody")),t.appendChild(r),t},e.prototype.splitRows=function(e){this.parent.getFrozenColumns()&&(0===e?(this.freezeRows=this.rows,this.freezeRowElements=this.rowElements):this.movableRows=this.rows)},e.prototype.refreshContentRows=function(e){var t=this;void 0===e&&(e={});var r=this.parent;if(0!==r.currentViewData.length){var i=this.currentMovableRows||r.currentViewData,n=document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=sf.base.extend([],i));var s,o,a,l=document.createDocumentFragment(),d=r.getColumns(),c=r.getFrozenColumns(),h=new B(this.serviceLocator,null,this.parent),p=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;p||(this.rowElements=[],this.rows=[]);var u,f=this.getPanel().querySelector(".e-frozencontent"),m=this.getPanel().querySelector(".e-movablecontent"),y=this.getPanel().querySelector(".e-content");wr(r)&&["sorting","filtering","searching","grouping","ungrouping","reorder"].some((function(t){return e.requestType===t}))&&(r.vcRows=[],r.vRows=[]);if(sf.base.isBlazor()&&this.parent.isServerRendered){u=this.generator.generateRows(i,e),this.parent.enableVirtualization&&(this.prevInfo=this.prevInfo?this.prevInfo:e.virtualInfo,this.prevInfo=e.virtualInfo.sentinelInfo&&"Y"===e.virtualInfo.sentinelInfo.axis&&this.currentInfo.page&&this.currentInfo.page!==e.virtualInfo.page?this.currentInfo:e.virtualInfo),this.rows=u,this.freezeRows=u,this.rowElements=[].slice.call(this.getTable().querySelectorAll("tr.e-row[data-uid]")),c&&(this.movableRows=u.map((function(e){var t=new M(e);return t.cells=e.cells.slice(c,e.cells.length),e.cells=e.cells.slice(0,c),t})),this.freezeRowElements=this.rowElements),this.isLoaded=!0,this.parent.hideSpinner(),e.isFrozen=0!==this.parent.getFrozenColumns()&&!e.isFrozen;var v=sf.base.extend({rows:this.rows},e);if(this.getTable().querySelector(".e-emptyrow")&&(sf.base.remove(this.getTable().querySelector(".e-emptyrow")),sf.base.isNullOrUndefined(this.getTable().querySelectorAll(".e-table > tbody")[1])||sf.base.remove(this.getTable().querySelectorAll(".e-table > tbody")[1])),this.parent.notify("contentcolgroup",{}),this.rafCallback(v)(),c&&(y.style.overflowY="hidden",f.style.height=m.offsetHeight-er()+"px",m.style.overflowY="auto"!==this.parent.height?"scroll":"auto",f.style.borderRightWidth="1px",this.parent.notify(g,{rows:this.movableRows,args:sf.base.extend({},v,{isFrozen:!1})})),!this.parent.isCheckBoxSelection&&"Multiple"!==this.parent.selectionSettings.type||!this.parent.isPersistSelection&&!this.parent.enableVirtualization){"Normal"!==this.parent.editSettings.mode||sf.base.isNullOrUndefined(e.editRowIndex)||this.parent.selectRow(e.editRowIndex)}if(this.parent.enableVirtualization&&!this.parent.getHeaderContent().querySelectorAll(".e-check").length){for(var b=this.parent.getRows().filter((function(e){return e.getAttribute("aria-selected")})).map((function(e){return e.getAttribute("data-uid")})),C=this.parent.getRows().filter((function(e){return null===e.getAttribute("aria-selected")})).map((function(e){return e.getAttribute("data-uid")})),w=0;w<b.length;w++)if(!sf.base.isNullOrUndefined(this.parent.getRowObjectFromUID(b[w]))&&!this.parent.getRowObjectFromUID(b[w]).isSelected){this.parent.getRowElementByUID(b[w]).removeAttribute("aria-selected"),sf.base.isNullOrUndefined(this.parent.getRowElementByUID(b[w]).querySelector(".e-check"))||sf.base.removeClass([this.parent.getRowElementByUID(b[w]).querySelector(".e-check")],["e-check"]);for(var S=0;S<this.parent.getRowElementByUID(b[w]).children.length;S++)this.parent.getRowElementByUID(b[w]).children[S].classList.remove("e-selectionbackground","e-active")}for(w=0;w<C.length;w++)if(!sf.base.isNullOrUndefined(this.parent.getRowObjectFromUID(C[w]))&&this.parent.getRowObjectFromUID(C[w]).isSelected){this.parent.getRowElementByUID(C[w]).setAttribute("aria-selected","true"),sf.base.isNullOrUndefined(this.parent.getRowElementByUID(C[w]).querySelector(".e-frame"))||sf.base.addClass([this.parent.getRowElementByUID(C[w]).querySelector(".e-frame")],["e-check"]);for(S=0;S<this.parent.getRowElementByUID(C[w]).children.length;S++)this.parent.getRowElementByUID(C[w]).children[S].classList.add("e-selectionbackground","e-active")}}}else{if(this.parent.enableVirtualization&&this.parent.getFrozenColumns()){if(this.parent.enableColumnVirtualization&&"virtualscroll"===e.requestType)if("X"===e.virtualInfo.sentinelInfo.axis)u=this.parent.contentModule.generateRows(i,e),e.renderMovableContent=!0;else if(m.scrollLeft>0&&!e.renderMovableContent){this.viewColIndexes=e.virtualInfo.columnIndexes;var x=[];for(w=0;w<this.parent.getFrozenColumns();w++)x.push(w);this.parent.setColumnIndexesInView(x),e.virtualInfo.columnIndexes=x}u=this.parent.contentModule.generateRows(i,e)}else this.isAddRows=p&&!sf.base.isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage]),this.isAddRows&&this.parent.infiniteScrollSettings.enableCache?u=this.infiniteCache[this.parent.pageSettings.currentPage]:(this.isAddRows=!1,u=this.generator.generateRows(i,e));this.parent.notify("set-infinite-cache",{isInfiniteScroll:p,modelData:u}),sf.base.isNullOrUndefined(u[0].cells[0])&&(m.querySelector("tbody").innerHTML="");var R=u[0].cells[0].index;if(this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&e.renderMovableContent&&"virtualscroll"===e.requestType&&m.scrollLeft>0&&0!==e.virtualInfo.columnIndexes[0]&&(R=this.parent.getFrozenColumns()),this.parent.registeredTemplate&&this.parent.registeredTemplate.template&&!e.isFrozen){var I=[];for(w=0;w<this.parent.registeredTemplate.template.length;w++)for(S=0;S<this.parent.registeredTemplate.template[w].rootNodes.length;S++)sf.base.isNullOrUndefined(this.parent.registeredTemplate.template[w].rootNodes[S].parentNode)&&I.push(this.parent.registeredTemplate.template[w]);this.parent.destroyTemplate(["template"],I)}if(this.parent.enableColumnVirtualization)new A(this.serviceLocator,this.parent).updateVirtualCells(u);this.tbody=c&&R>=c?m.querySelector("tbody"):this.getTable().querySelector("tbody");var T=0,E=!0;if(wr(r)&&r.vcRows.length){var D=sf.base.isNullOrUndefined(e.virtualInfo.offsets)?sf.base.isNullOrUndefined(e.scrollTop)?0:e.scrollTop.top:e.virtualInfo.offsets.top;if(0!==D){for(var F=r.vGroupOffsets,O=r.pageSettings.pageSize/2,k=Object.keys(F).map((function(e){return F[e]})),P=0;P<k.length;P++)if(D<k[P]){if(sf.base.isNullOrUndefined(e.virtualInfo)||"up"!==e.virtualInfo.direction){e.virtualInfo.blockIndexes=0===P||1===P?[1,2]:[P,P+1],T=0===P||1===P?0:P*O;break}e.virtualInfo.blockIndexes=0===P||1===P?[1,2]:[P,P+1],T=0===P||1===P?0:P*O;break}D+this.contentPanel.firstElementChild.offsetHeight!==this.contentPanel.firstElementChild.scrollHeight||e.rowObject||(E=!1)}}var z=r.frozenRows&&!r.getFrozenColumns()&&this.parent.enableVirtualization&&"reorder"===e.requestType;if(r.frozenRows&&"virtualscroll"===e.requestType&&"X"===e.virtualInfo.sentinelInfo.axis||z){var N=e.virtualInfo.blockIndexes,L=e.virtualInfo.page;e.virtualInfo.blockIndexes=[1,2],z&&(e.virtualInfo.page=1);var q=z?this.initialPageRecords:i,H=this.vgenerator.generateRows(q,e);H.splice(this.parent.frozenRows);for(w=0;w<this.parent.frozenRows;w++)H[w].cells.splice(0,this.parent.getFrozenColumns()),s=h.render(H[w],d),l.appendChild(s);e.virtualInfo.blockIndexes=N,e.virtualInfo.page=L,z&&1===e.virtualInfo.page&&u.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(l,u,h,e,i,d);w=T;for(var U=u.length;w<U&&(this.isAddRows||this.rows.push(u[w]),sf.base.isNullOrUndefined(this.parent.infiniteScrollModule)||this.isRemove||this.visibleRows.push(u[w]),!(wr(r)&&this.rows.length>=r.pageSettings.pageSize&&E));w++){if(r.rowTemplate){var j=r.element.id+"rowTemplate",V=r.getRowTemplate()(sf.base.extend({index:w},i[w]),r,"rowTemplate",j);if("TBODY"===V[0].tagName){for(S=0;S<V.length;S++){var G="tr"===V[S].nodeName.toLowerCase();(G||V[S].querySelectorAll&&V[S].querySelectorAll("tr").length)&&(s=G?V[S]:V[S].querySelector("tr"))}r.frozenRows&&w<r.frozenRows?l.appendChild(s):n.appendChild(s)}else r.frozenRows&&w<r.frozenRows?s=Jt(l,V):a=(s=Jt(n,V)).lastElementChild;v={data:u[w].data,row:a||s};this.parent.trigger("rowDataBound",v)}else{s=h.render(u[w],d);var _=r.enableVirtualization&&("reorder"===e.requestType||"refresh"===e.requestType);r.frozenRows&&w<r.frozenRows&&"virtualscroll"!==e.requestType&&!_?l.appendChild(s):n.appendChild(s),u[w].isExpand&&r.notify("expandchildgrid",s.cells[r.groupSettings.columns.length])}u[w].isDataRow&&this.rowElements.push(s),this.ariaService.setOptions(this.getTable(),{colcount:r.getColumns().length.toString()})}this.splitRows(R),(r.frozenRows&&"virtualscroll"!==e.requestType||"virtualscroll"===e.requestType&&e.virtualInfo.sentinelInfo&&"X"===e.virtualInfo.sentinelInfo.axis)&&((o=c?r.getHeaderContent().querySelector(0===R?".e-frozenheader":".e-movableheader").querySelector("tbody"):r.getHeaderTable().querySelector("tbody")).innerHTML="",o.appendChild(l)),!r.enableVirtualization&&r.frozenRows&&0===R&&y.offsetHeight===Number(r.height)&&(y.style.height=y.offsetHeight-o.offsetHeight+"px"),c&&0===R&&(this.getPanel().firstChild.style.overflowY="hidden"),sf.base.isBlazor()&&!this.parent.isJsComponent||(e.rows=this.rows.slice(0)),e.isFrozen=0!==this.parent.getFrozenColumns()&&!e.isFrozen,this.index=R,It((function(){t.parent.notify("beforeFragAppend",e);var i=t.parent.enableVirtualization&&0!==t.parent.getFrozenColumns();t.parent.enableVirtualization||p||(sf.base.remove(t.tbody),t.tbody=t.parent.createElement("tbody")),c&&!i?(t.tbody.appendChild(n),0===t.index?(t.isLoaded=!1,f.querySelector("table").appendChild(t.tbody)):(t.tbody.childElementCount<1&&t.tbody.appendChild(t.parent.createElement("tr").appendChild(t.parent.createElement("td"))),t.isLoaded=!0,m.querySelector("table").appendChild(t.tbody),0===t.parent.getFrozenColumns()||t.parent.allowTextWrap||t.parent.notify("freezerender",{case:"refreshHeight"}),f.style.height=m.offsetHeight-er()+"px",m.style.overflowY="auto"!==t.parent.height?"scroll":"auto",f.style.borderRightWidth="1px")):(r.rowTemplate&&sf.base.updateBlazorTemplate(r.element.id+"rowTemplate","RowTemplate",r),i?e.renderMovableContent?(t.appendContent(m.querySelector("tbody"),n,e),e.virtualInfo&&"right"!==e.virtualInfo.direction&&"left"!==e.virtualInfo.direction&&(f.style.height=m.offsetHeight-er()+"px"),e.renderMovableContent=!1):(t.appendContent(f.querySelector("tbody"),n,e),t.parent.enableColumnVirtualization&&"virtualscroll"===e.requestType&&m.scrollLeft>0&&(t.parent.setColumnIndexesInView(t.viewColIndexes),e.virtualInfo.columnIndexes=t.viewColIndexes)):!sf.base.isNullOrUndefined(t.parent.infiniteScrollModule)&&t.parent.enableInfiniteScrolling?(t.parent.notify("remove-infinite-rows",{args:e}),t.parent.notify("append-infinite-content",{tbody:t.tbody,frag:n,args:e,rows:t.rows,rowElements:t.rowElements,visibleRows:t.visibleRows})):t.appendContent(t.tbody,n,e)),c&&0===R&&(i&&(e.renderMovableContent=!0),t.refreshContentRows(sf.base.extend({},e))),n=null}),this.rafCallback(sf.base.extend({},e)))}}},e.prototype.appendContent=function(e,t,r){e.appendChild(t),this.getTable().appendChild(e)},e.prototype.getReorderedVFRows=function(e){return this.parent.contentModule.getReorderedFrozenRows(e)},e.prototype.virtualFrozenHdrRefresh=function(e,t,r,i,n,s){if(this.parent.frozenRows&&this.parent.getFrozenColumns()&&this.parent.enableVirtualization&&("reorder"===i.requestType||"refresh"===i.requestType)){var o=void 0;this.currentMovableRows=n;for(var a=this.getReorderedVFRows(i),l=0;l<a.length;l++)o=r.render(a[l],s),e.appendChild(o);1===i.virtualInfo.page&&t.splice(0,this.parent.frozenRows),i.renderMovableContent&&(this.parent.currentViewData=this.currentMovableRows,this.currentMovableRows=null)}},e.prototype.getPanel=function(){return this.contentPanel},e.prototype.setPanel=function(e){this.contentPanel=e},e.prototype.getTable=function(){return this.contentTable},e.prototype.setTable=function(e){this.contentTable=e},e.prototype.getRows=function(){return this.parent.getFrozenColumns()?this.freezeRows:this.rows},e.prototype.getMovableRows=function(){return this.movableRows},e.prototype.getRowElements=function(){return this.parent.getFrozenColumns()?this.freezeRowElements:this.rowElements},e.prototype.getMovableRowElements=function(){return this.rowElements},e.prototype.setRowElements=function(e){this.rowElements=e},e.prototype.getColGroup=function(){return this.colgroup},e.prototype.setColGroup=function(e){return sf.base.isNullOrUndefined(e)||(e.id="content-"+e.id),this.colgroup=e},e.prototype.setVisible=function(e){var t=this.parent;sf.base.isBlazor()&&t.isServerRendered&&this.parent.notify("setvisibility",e);var r,i=t.getFrozenColumns(),n=[];if(i)for(var s=this.freezeRows,o=this.movableRows,a=s.length,l=void 0,d=0,c=void 0;d<a;d++){l=o[d].cells.length,c=s[d].clone();for(var h=0;h<l;h++)c.cells.push(o[d].cells[h]);n.push(c)}else n=this.getRows();n.some((function(e){return e.isDataRow&&(r=e),e.isDataRow}));var p=!0;!t.groupSettings.columns.length&&r&&(p=!1);for(var u=t.getDataRows(),f=this.rows.filter((function(e){return!e.isDetailRow})),g=0,m=e.length;g<m;g++){var y=e[g],v=this.parent.getNormalizedColumnIndex(y.uid),b=this.parent.getColumnIndexByUid(y.uid),C=!0===y.visible?"":"none";if(-1!==v&&r&&v<r.cells.length)if(i)if(v<i)sf.base.setStyleAttribute(this.getColGroup().childNodes[v],{display:C}),f=this.freezeRows;else{var w=t.getContent().querySelector(".e-movablecontent").querySelector("colgroup");b=v-=i,sf.base.setStyleAttribute(w.childNodes[v],{display:C}),u=t.getMovableDataRows(),f=this.movableRows}else sf.base.setStyleAttribute(this.getColGroup().childNodes[v],{display:C});p||this.setDisplayNone(u,b,C,f),!this.parent.invokedFromMedia&&y.hideAtMedia&&this.parent.updateMediaColumns(y),this.parent.invokedFromMedia=!1}p?this.refreshContentRows({requestType:"refresh"}):this.parent.getFrozenColumns()?(this.parent.notify("partial-refresh",{rows:this.freezeRows,args:{isFrozen:!0,rows:this.freezeRows}}),this.parent.notify("partial-refresh",{rows:this.movableRows,args:{isFrozen:!1,rows:this.movableRows}})):this.parent.notify("partial-refresh",{rows:f,args:{}})},e.prototype.setDisplayNone=function(e,t,r,i){for(var n=Object.keys(e),s=0;s<n.length;s++)e[n[s]].querySelectorAll("td.e-rowcell").length&&(sf.base.setStyleAttribute(e[n[s]].querySelectorAll("td.e-rowcell")[t],{display:r}),e[n[s]].querySelectorAll("td.e-rowcell")[t].classList.contains("e-hide")&&sf.base.removeClass([e[n[s]].querySelectorAll("td.e-rowcell")[t]],["e-hide"]),i[n[s]].cells[t].visible=""===r)},e.prototype.colGroupRefresh=function(){if(this.getColGroup()){var e=void 0;e=this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()?this.parent.getMovableVirtualHeader().querySelector("colgroup").cloneNode(!0):sf.base.isBlazor()?this.parent.getHeaderTable().querySelector("colgroup").cloneNode(!0):this.parent.element.querySelector(".e-gridheader").querySelector("colgroup").cloneNode(!0),this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e)}},e.prototype.initializeContentDrop=function(){var e=this.parent;new sf.base.Droppable(e.getContent(),{accept:".e-dragclone",drop:this.drop})},e.prototype.canSkip=function(e,t,r){return sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(e.visible)||t.cells[r].visible===e.visible},e.prototype.getModelGenerator=function(){return this.generator=this.parent.allowGrouping?new U(this.parent):new P(this.parent)},e.prototype.renderEmpty=function(e){sf.base.isBlazor()&&!this.parent.isJsComponent&&this.parent.frozenRows||(this.getTable().appendChild(e),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector("tbody").innerHTML=""))},e.prototype.setSelection=function(e,t,r){if(this.parent.getFrozenColumns())for(var i=this.getMovableRows().filter((function(t){return r||e===t.uid})),n=0;n<i.length;n++)i[n].isSelected=t;for(var s=this.getRows().filter((function(t){return r||e===t.uid})),o=0;o<s.length;o++){s[o].isSelected=t;for(var a=s[o].cells,l=0;l<a.length;l++)a[l].isSelected=t}},e.prototype.getRowByIndex=function(e){return"upArrow"!==this.pressedKey&&"downArrow"!==this.pressedKey&&this.isRemove&&(e=this.getInfiniteRowIndex(e)),this.parent.getDataRows()[e]},e.prototype.getInfiniteRowIndex=function(e){return e-parseInt(this.parent.getRows()[0].getAttribute("aria-rowindex"),10)},e.prototype.getVirtualRowIndex=function(e){return e},e.prototype.getMovableRowByIndex=function(e){return this.parent.getMovableDataRows()[e]},e.prototype.enableAfterRender=function(e){"group"===e.module&&e.enable&&(this.generator=this.getModelGenerator())},e.prototype.setRowObjects=function(e){this.rows=e},e}(),V=function(){function t(e,t){var r=this;this.frzIdx=0,this.notfrzIdx=0,this.helper=function(e){var t=r.parent,i=r.draggable.currentStateTarget,n=Ut(i,"e-headercell");if(!t.allowReordering&&!t.allowGrouping||!sf.base.isNullOrUndefined(n)&&n.querySelectorAll(".e-checkselectall").length>0)return!1;var s=r.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),o=i.classList.contains("e-headercell")?i:n;if(!o||!t.allowReordering&&o.classList.contains("e-stackedheadercell"))return!1;var a,l=o.offsetHeight,d=o.querySelector(".e-headercelldiv")||o.querySelector(".e-stackedheadercelldiv");if(d){if(a=o.querySelector(".e-stackedheadercelldiv")?t.getStackedHeaderColumnByHeaderText(d.innerText.trim(),t.columns):t.getColumnByUid(d.getAttribute("e-mappinguid")),r.column=a,r.column.lockColumn)return!1;s.setAttribute("e-mappinguid",r.column.uid)}if(a&&!sf.base.isNullOrUndefined(a.headerTemplate))if(sf.base.isNullOrUndefined(a.headerTemplate))s.innerHTML=a.headerTemplate;else{var c=t.getColumnIndexByField(a.field);Jt(s,a.getHeaderTemplate()(sf.base.extend({index:c},a),t,"headerTemplate"))}else s.innerHTML=d?a.headerText:o.firstElementChild.innerHTML;return s.style.width=o.offsetWidth+"px",s.style.height=o.offsetHeight+"px",s.style.lineHeight=(l-6).toString()+"px",t.element.appendChild(s),s},this.dragStart=function(e){var t=r.parent;t.element.querySelector(".e-gridpopup").style.display="none",t.notify("columnDragStart",{target:r.draggable.currentStateTarget,column:r.column,event:e.event}),sf.base.isBlazor()&&e.bindEvents(e.dragElement)},this.drag=function(e){var t=r.parent,i=e.target;if(i){var n=sf.base.closest(i,".e-grid"),s=r.parent.element.querySelector(".e-cloneproperties");if(!(n&&n.getAttribute("id")===t.element.getAttribute("id")||(sf.base.classList(s,["e-notallowedcur"],["e-defaultcur"]),t.allowReordering&&(t.element.querySelector(".e-reorderuparrow").style.display="none",t.element.querySelector(".e-reorderdownarrow").style.display="none"),t.groupSettings.allowReordering)))return;t.notify("columnDrag",{target:e.target,column:r.column,event:e.event})}},this.dragStop=function(e){var t,i=r.parent;i.element.querySelector(".e-gridpopup").style.display="none",(!Ut(e.target,"e-headercell")&&!Ut(e.target,"e-groupdroparea")||!i.allowReordering&&Ut(e.target,"e-headercell")||!e.helper.getAttribute("e-mappinguid")&&Ut(e.target,"e-groupdroparea"))&&(sf.base.remove(e.helper),t=!0),i.notify("column-drag-stop",{target:e.target,event:e.event,column:r.column,cancel:t})},this.drop=function(e){var t=r.parent,i=e.droppedElement.getAttribute("e-mappinguid"),n=sf.base.closest(e.target,".e-grid");sf.base.remove(e.droppedElement),n&&n.getAttribute("id")!==t.element.getAttribute("id")||!t.allowReordering&&!t.allowGrouping||t.notify("header-drop",{target:e.target,uid:i,droppedElement:e.droppedElement})},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),this.parent.isDestroyed||(this.parent.enableColumnVirtualization||this.parent.on("column-visible-changed",this.setVisible,this),this.parent.on("column-position-changed",this.colPosRefresh,this))}return t.prototype.renderPanel=function(){var e=this.parent.element.querySelector(".e-gridheader"),t=null!=e;e=t?e:this.parent.createElement("div",{className:"e-gridheader"});var r=t?e.querySelector(".e-headercontent"):this.parent.createElement("div",{className:"e-headercontent"});this.toggleStackClass(e),e.appendChild(r),this.setPanel(e),t||this.parent.element.appendChild(e)},t.prototype.renderTable=function(){var e=this.getPanel();e.appendChild(this.createHeaderTable()),this.setTable(e.querySelector(".e-table")),this.parent.getFrozenColumns()||(this.initializeHeaderDrag(),this.initializeHeaderDrop()),this.parent.notify(C,{rows:this.rows,args:{isFrozen:0!==this.parent.getFrozenColumns()}})},t.prototype.getPanel=function(){return this.headerPanel},t.prototype.setPanel=function(e){this.headerPanel=e},t.prototype.getTable=function(){return this.headerTable},t.prototype.setTable=function(e){this.headerTable=e},t.prototype.getColGroup=function(){return this.colgroup},t.prototype.setColGroup=function(e){return this.colgroup=e},t.prototype.getRows=function(){return this.getTable().tHead.rows},t.prototype.createHeaderTable=function(){var e=sf.base.isBlazor()&&0!==this.parent.frozenRows,t=this.createTable(),r=this.getPanel().querySelector(".e-headercontent");return e||r.appendChild(t),r},t.prototype.createTable=function(t){void 0===t&&(t=null);var r=sf.base.isBlazor()&&0!==this.parent.frozenRows,i=this.parent;sf.base.isBlazor()&&!i.isJsComponent||!this.getTable()||i.getFrozenColumns()||sf.base.remove(this.getTable());i.getColumns();var n=this.getPanel().querySelector(".e-headercontent"),s=r?t||n.querySelector(".e-table"):this.parent.createElement("table",{className:"e-table",attrs:{cellspacing:"0.25px",role:"grid"}}),o=this.createHeaderContent(),a=o.thead,l=this.parent.createElement("tbody",{className:this.parent.frozenRows?"":"e-hide"});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});for(var d,c=this.parent.createElement("colgroup"),h=this.parent.createElement("tr"),p=this.rows=o.rows,u=(new B(this.serviceLocator,e.CellType.Header,this.parent),0),f=p.length;u<f;u++)for(var g=0,m=p[u].cells.length;g<m;g++){p[u].cells[g];d=this.parent.createElement("td"),h.appendChild(d)}return(i.allowFiltering||i.allowSorting||i.allowGrouping)&&s.classList.add("e-sortfilter"),this.updateColGroup(c),r||l.appendChild(h),s.appendChild(this.setColGroup(c)),s.appendChild(a),r||s.appendChild(l),s.appendChild(this.caption),this.ariaService.setOptions(s,{colcount:i.getColumns().length.toString()}),s},t.prototype.createHeaderContent=function(){var t=this.parent,r=t.getColumns(),i=this.parent.createElement("thead"),n=this.parent.createElement("tr",{className:"e-columnheader"}),s=new B(this.serviceLocator,e.CellType.Header,t);s.element=n;var o,a=[];this.colDepth=Dr(t.columns);for(var l=0,d=this.colDepth;l<d;l++)a[l]=this.generateRow(l),a[l].cells=[];a=this.ensureColumns(a),a=this.getHeaderCells(a);for(l=0,d=this.colDepth;l<d;l++)o=s.render(a[l],r),this.parent.rowHeight&&o.querySelector(".e-headercell")&&(o.style.height=this.parent.rowHeight+"px"),i.appendChild(o);return{thead:i,rows:a}},t.prototype.updateColGroup=function(e){var t,r=this.parent.getColumns(),i=this.parent.getColumnIndexesInView();if(this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()&&(r=sf.base.extend([],this.parent.getColumns())).splice(0,this.parent.getFrozenColumns()),e.id=this.parent.element.id+"colGroup",this.parent.allowGrouping)for(var n=0,s=this.parent.groupSettings.columns.length;n<s;n++)this.parent.enableColumnVirtualization&&-1===i.indexOf(n)||(t=this.parent.createElement("col",{className:"e-group-intent"}),e.appendChild(t));(this.parent.detailTemplate||this.parent.childGrid)&&(t=this.parent.createElement("col",{className:"e-detail-intent"}),e.appendChild(t)),this.parent.isRowDragable()&&(t=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(t));for(n=0,s=r.length;n<s;n++)t=this.parent.createElement("col"),!1===r[n].visible&&sf.base.setStyleAttribute(t,{display:"none"}),e.appendChild(t);return e},t.prototype.ensureColumns=function(t){for(var r=this.parent,i=this.parent.getColumnIndexesInView(),n=0,s=t.length;n<s;n++){if(r.allowGrouping)for(var o=0,a=r.groupSettings.columns.length;o<a;o++)this.parent.enableColumnVirtualization&&-1===i.indexOf(o)||t[n].cells.push(this.generateCell({},e.CellType.HeaderIndent));if(r.detailTemplate||r.childGrid){var l={};this.parent.notify("detail-indentcell-info",l),t[n].cells.push(this.generateCell(l,e.CellType.DetailHeader))}r.isRowDragable()&&t[n].cells.push(this.generateCell({},e.CellType.RowDragHIcon))}return t},t.prototype.getHeaderCells=function(e){var t=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),r=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(var i=0;i<r.length;i++)this.lockColsRendered=!1,e=this.appendCells(r[i],e,0,0===i,!1,i===r.length-1,t);i=0;for(var n=r.length;i<n;i++)this.notfrzIdx=0,this.lockColsRendered=!0,e=this.appendCells(r[i],e,0,0===i,!1,i===n-1,t);return e},t.prototype.appendCells=function(t,r,i,n,s,o,a){var l,d=o?"e-lastcell":"",c=this.parent.getFrozenColumns();if(this.parent.enableColumnVirtualization&&c&&(l=this.parent.getContent().querySelector(".e-movablecontent").scrollLeft),t.columns){var h=this.getCellCnt(t,0);if(h){var p=this.refreshFrozenHdr(t.columns,{isPartial:!1,isComp:!0,cnt:0}),u=this.getStackedLockColsCount(t,0);(!c&&(!this.parent.lockcolPositionCount||!this.lockColsRendered&&u||this.lockColsRendered&&h-u)||c&&(!a&&(this.parent.frozenColumns-this.frzIdx>0||p.isPartial)||a&&h+this.frzIdx>this.parent.frozenColumns&&!p.isComp))&&r[i].cells.push(new k({cellType:e.CellType.StackedHeader,column:t,colSpan:this.getColSpan(h,a,p.cnt,u)}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(var f=0;f<t.columns.length;f++)r=this.appendCells(t.columns[f],r,i+1,n,0===f,f===t.columns.length-1&&o,a);if(this.lockColsRendered){f=0;for(var g=t.columns.length;f<g;f++)r=this.appendCells(t.columns[f],r,i+1,n,0===f,f===g-1&&o,a)}}else(l&&l>0&&this.parent.contentModule.isXaxis()&&0!==this.parent.inViewIndexes[0]&&this.frzIdx>this.parent.getFrozenColumns()||!c&&(!this.parent.lockcolPositionCount||t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered)||c&&(!a&&(this.frzIdx+this.notfrzIdx<this.parent.frozenColumns||t.isFrozen)&&(!this.parent.lockcolPositionCount||t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered)||a&&this.frzIdx+this.notfrzIdx>=this.parent.frozenColumns&&!t.isFrozen&&(!this.parent.lockcolPositionCount||t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered)))&&r[i].cells.push(this.generateCell(t,e.CellType.Header,this.colDepth-i,(n?"":s?"e-firstcell":"")+d,i,this.parent.getColumnIndexByUid(t.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;return r},t.prototype.getStackedLockColsCount=function(e,t){if(e.columns)for(var r=0;r<e.columns.length;r++)t=this.getStackedLockColsCount(e.columns[r],t);else e.lockColumn&&t++;return t},t.prototype.refreshFrozenHdr=function(e,t){for(var r=0;r<e.length;r++)e[r].columns?t=this.refreshFrozenHdr(e[r].columns,t):(e[r].isFrozen&&(t.isPartial=!0,t.cnt++),t.isComp=t.isComp&&(e[r].isFrozen||this.parent.getColumnIndexByField(e[r].field)<this.parent.frozenColumns));return t},t.prototype.getColSpan=function(e,t,r,i){var n=this.parent.frozenColumns;return this.parent.getFrozenColumns()&&this.frzIdx+e>n?t?e=e-(n>this.frzIdx?n-this.frzIdx:0)-r:e-=e-(n>this.frzIdx?n+r-this.frzIdx:r):this.parent.lockcolPositionCount&&(e=this.lockColsRendered?e-i:i),e},t.prototype.generateRow=function(e){return new M({})},t.prototype.generateCell=function(e,t,r,i,n,s){var o={visible:e.visible,isDataCell:!1,isTemplate:!sf.base.isNullOrUndefined(e.headerTemplate),rowID:"",column:e,cellType:t,rowSpan:r,className:i,index:n,colIndex:s};return(!o.rowSpan||o.rowSpan<2)&&delete o.rowSpan,new k(o)},t.prototype.setVisible=function(e){for(var t,r,i=this.parent,n=([].slice.call(this.getRows()),i.getFrozenColumns()),s=0,o=e.length;s<o;s++){var a=e[s];if(r=i.getNormalizedColumnIndex(a.uid),t=a.visible?"":"none",n)if(r<n)sf.base.isBlazor()&&i.isServerRendered?(sf.base.setStyleAttribute(this.getTable().querySelector("colgroup").children[r],{display:t}),sf.base.setStyleAttribute(this.getTable().querySelectorAll("th")[r],{display:t})):sf.base.setStyleAttribute(this.getColGroup().children[r],{display:t});else{var l=i.getHeaderContent().querySelector(".e-movableheader").querySelector("colgroup"),d=i.getHeaderContent().querySelector(".e-movableheader").querySelector("table");sf.base.setStyleAttribute(l.children[r-n],{display:t}),sf.base.isBlazor()&&i.isServerRendered&&sf.base.setStyleAttribute(d.querySelectorAll("th")[r-n],{display:t})}else sf.base.setStyleAttribute(this.getColGroup().children[r],{display:t})}this.refreshUI()},t.prototype.colPosRefresh=function(){sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.frozenRows&&this.parent.getFrozenColumns()&&(this.freezeReorder=!0),this.refreshUI()},t.prototype.refreshUI=function(){var e=this.parent.getFrozenColumns(),t=this.parent.enableColumnVirtualization&&0!==e,r=sf.base.isBlazor()&&this.parent.isServerRendered&&0!==this.parent.frozenRows&&0!==e,i=this.getPanel();this.toggleStackClass(i);var n=this.freezeReorder?this.headerPanel.querySelector(".e-movableheader").querySelector(".e-table"):this.getTable();if(t&&(n=this.parent.contentModule.getVirtualFreezeHeader()),r&&!t&&(n=this.freezeReorder?this.headerPanel.querySelector(".e-movableheader").querySelector(".e-table"):this.headerPanel.querySelector(".e-frozenheader").querySelector(".e-table")),n){sf.base.isBlazor()&&this.parent.isServerRendered?(n.removeChild(n.querySelector("colgroup")),n.removeChild(n.querySelector("thead"))):(sf.base.remove(n),n.removeChild(n.firstChild),n.removeChild(n.childNodes[0]));var s=this.parent.createElement("colgroup"),o=this.createHeaderContent();this.rows=o.rows,n.insertBefore(o.thead,n.firstChild),this.updateColGroup(s),n.insertBefore(this.setColGroup(s),n.firstChild),t||r||this.setTable(n),sf.base.isBlazor()&&this.parent.isServerRendered||this.appendContent(n),this.parent.notify("colgroup-refresh",{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),(!e||this.parent.enableColumnVirtualization&&e)&&this.initializeHeaderDrag();for(var a=[].slice.call(i.querySelectorAll("tr.e-columnheader")),l=0,d=a;l<d.length;l++){var c=d[l],h=[].slice.call(c.querySelectorAll(".e-grouptopleftcell"));h.length&&h[h.length-1].classList.add("e-lastgrouptopleftcell")}e||this.parent.notify(C,{rows:this.rows,args:{isFrozen:0!==this.parent.getFrozenColumns()}}),this.parent.enableColumnVirtualization&&Ut(n,"e-movableheader")&&this.parent.notify(C,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&"Header"===this.parent.textWrapSettings.wrapMode&&ar(a,!0)}},t.prototype.toggleStackClass=function(e){this.parent.columns.some((function(e){return!sf.base.isNullOrUndefined(e.columns)}))?e.classList.add("e-stackedheader"):e.classList.remove("e-stackedheader")},t.prototype.appendContent=function(e){this.getPanel().querySelector(".e-headercontent").appendChild(e)},t.prototype.getCellCnt=function(e,t){if(e.columns)for(var r=0,i=e.columns.length;r<i;r++)t=this.getCellCnt(e.columns[r],t);else e.visible&&t++;return t},t.prototype.initializeHeaderDrag=function(){var e=this.parent;(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)&&(this.draggable=new sf.base.Draggable(e.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler"}))},t.prototype.initializeHeaderDrop=function(){var e=this.parent;new sf.base.Droppable(e.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})},t}(),G=function(){function e(e,t){this.localizer=t.getService("localization"),this.formatter=t.getService("valueFormatter"),this.parent=e,this.element=this.parent.createElement("TD",{className:"e-rowcell",attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox"}})}return e.prototype.getGui=function(){return""},e.prototype.format=function(e,t,r){return sf.base.isNullOrUndefined(e.format)||(t=this.formatter.toView(t,e.getFormatter())),sf.base.isNullOrUndefined(t)?"":t.toString()},e.prototype.evaluate=function(e,t,r,i,n,s){var o,a;if(t.column.template){var l=["index"],d=Tr({},r,((o={}).foreignKeyData=n,o.column=t.column,o)),c=this.parent.element.id+t.column.uid,h="isStringTemplate";if(sf.base.isBlazor()&&s){var p="Batch"!==this.parent.editSettings.mode?parseInt(i.index,10):null;a=t.column.getColumnTemplate()(sf.base.extend({index:i[l[0]]},d),this.parent,"template",c,this.parent[h],p),window[c]=null,"Batch"!==this.parent.editSettings.mode&&sf.base.updateBlazorTemplate(c,"Template",t.column,!1)}else a=t.column.getColumnTemplate()(sf.base.extend({index:i[l[0]]},d),this.parent,"template",c,this.parent[h]);return Jt(e,a),this.parent.notify("template-result",{template:a}),a=null,e.setAttribute("aria-label",e.innerText+" is template cell column header "+t.column.headerText),!1}return!0},e.prototype.invokeFormatter=function(e,t,r){sf.base.isNullOrUndefined(e.formatter)||(t=xt(e.formatter,"getValue")?(new(0,e.formatter)).getValue(e,r):"function"==typeof e.formatter?e.formatter(e,r):e.formatter.getValue(e,r));return t},e.prototype.render=function(e,t,r,i,n){return this.refreshCell(e,t,r,n)},e.prototype.refreshTD=function(e,t,r,i){var n="Batch"===this.parent.editSettings.mode&&e.classList.contains("e-editedbatchcell"),s=this.refreshCell(t,r,i,n);e.innerHTML="",e.setAttribute("aria-label",s.getAttribute("aria-label"));for(var o=0,a=[].slice.call(s.childNodes);o<a.length;o++){var l=a[o];e.appendChild(l)}},e.prototype.refreshCell=function(e,t,r,i){var n,s,o=this.element.cloneNode(),a=e.column;e.isForeignKey&&(s=e.foreignKeyData[0]||((n={})[a.foreignKeyValue]=a.format?null:"",n));var l=this.getGui(),d=e.isForeignKey?this.getValue(a.foreignKeyValue,s,a):this.getValue(a.field,t,a);if("date"!==a.type&&"datetime"!==a.type||sf.base.isNullOrUndefined(d)||(d=new Date(d)),l=(d=this.format(a,d,t)).toString(),"boolean"===a.type&&!a.displayAsCheckBox){var c="true"!==d&&"false"!==d?null:"true"===d?"True":"False";l=c?this.localizer.getConstant(c):l}var h=this.invokeFormatter(a,d,t);if(l=sf.base.isNullOrUndefined(a.formatter)?l:sf.base.isNullOrUndefined(h)?"":h.toString(),o.setAttribute("aria-label",(""===l?"empty":l)+" column header "+e.column.headerText),sf.base.isNullOrUndefined(e.column.headerText)||o.setAttribute("aria-label",l+" column header "+e.column.headerText),this.evaluate(o,e,t,r,s,i)&&"checkbox"!==a.type)this.appendHtml(o,l,a.getDomSetter?a.getDomSetter():"innerHTML");else if("checkbox"===a.type){o.classList.add("e-gridchkbox"),o.setAttribute("aria-label","checkbox"),d=!!this.parent.selectionSettings.persistSelection&&"true"===d,(u=sf.buttons.createCheckBox(this.parent.createElement,!1,{checked:d,label:" "})).insertBefore(this.rowChkBox.cloneNode(),u.firstChild),o.appendChild(u)}if("Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0),this.setAttributes(o,e,r),"boolean"===a.type&&a.displayAsCheckBox){var p=isNaN(parseInt(d.toString(),10))?"true"===d:parseInt(d.toString(),10)>0,u=sf.buttons.createCheckBox(this.parent.createElement,!1,{checked:p,label:" "});o.innerHTML="",u.classList.add("e-checkbox-disabled"),o.appendChild(u),o.setAttribute("aria-label",p+" column header "+e.column.headerText)}return o},e.prototype.appendHtml=function(e,t,r){return void 0===r&&(r="innerHTML"),e[r]=t,e},e.prototype.setAttributes=function(e,t,r){var i=t.column;this.buildAttributeFromCell(e,t,"checkbox"===i.type),Pt(e,r),Pt(e,t.attributes),i.customAttributes&&Pt(e,i.customAttributes),i.textAlign&&(e.style.textAlign=i.textAlign),"Clip"===i.clipMode||!i.clipMode&&"Clip"===this.parent.clipMode?e.classList.add("e-gridclip"):("EllipsisWithTooltip"===i.clipMode||!i.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==i.type&&e.classList.add("e-ellipsistooltip")},e.prototype.buildAttributeFromCell=function(e,t,r){var i={},n=[];t.colSpan&&(i.colSpan=t.colSpan),t.rowSpan&&(i.rowSpan=t.rowSpan),t.isTemplate&&n.push("e-templatecell"),t.isSelected&&(n.push.apply(n,["e-selectionbackground","e-active"]),r&&e.querySelector(".e-frame").classList.add("e-check")),sf.base.isNullOrUndefined(t.index)||(i["aria-colindex"]=t.index),t.visible||n.push("e-hide"),i.class=n,Pt(e,i)},e.prototype.getValue=function(e,t,r){return r.valueAccessor(e,t,r)},e}(),_=function(){function e(){}return e.prototype.setOptions=function(e,t){for(var r=Object.keys(t),i=0;i<r.length;i++)K(e,le[r[i]],t[r[i]])},e.prototype.setExpand=function(e,t){K(e,le.expand,t)},e.prototype.setSort=function(e,t){K(e,le.sort,t,"boolean"==typeof t)},e.prototype.setBusy=function(e,t){K(e,le.busy,t),K(e,le.invalid,null,!0)},e.prototype.setGrabbed=function(e,t,r){K(e,le.grabbed,t,r)},e.prototype.setDropTarget=function(e,t){K(e,le.dropeffect,"copy",!t)},e}();function K(e,t,r,i){i&&e?e.removeAttribute(t):e&&e.setAttribute(t,r)}var W,Q,J,X,Y,$,Z,ee,te,re,ie,ne,se,oe,ae,le={expand:"aria-expanded",role:"role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount"},de=(W=function(e,t){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}W(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-headercell",attrs:{role:"columnheader",tabindex:"-1"}}),t.ariaService=new _,t.hTxtEle=t.parent.createElement("span",{className:"e-headertext"}),t.sortEle=t.parent.createElement("div",{className:"e-sortfilterdiv e-icons"}),t.gui=t.parent.createElement("div"),t.chkAllBox=t.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox"}}),t}return de(t,e),t.prototype.getGui=function(){return this.gui.cloneNode()},t.prototype.render=function(e,t,r){var i=this.element.cloneNode(),n=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,i,n)},t.prototype.refresh=function(e,t){this.clean(t);var r=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,t,r)},t.prototype.clean=function(e){e.innerHTML=""},t.prototype.prepareHeader=function(e,t,r){var i,n,s=e.column,o={},a=this.getGui();if(sf.base.attributes(a,{"e-mappinguid":s.uid,class:"e-headercelldiv"}),sf.base.isNullOrUndefined(s.headerValueAccessor)||(i=this.getValue(s.headerText,s)),"checkbox"!==s.type){var l=s.headerText;sf.base.isNullOrUndefined(i)||(l=i);var d=this.hTxtEle.cloneNode();d[s.getDomSetter()]=l,a.appendChild(d)}else{s.editType="booleanedit";var c=sf.buttons.createCheckBox(this.parent.createElement,!1,{checked:!1,label:" "});c.insertBefore(this.chkAllBox.cloneNode(),c.firstChild),a.appendChild(c),a.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(t,e),this.appendHtml(t,a),t.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&s.allowFiltering&&!sf.base.isNullOrUndefined(s.field)&&(!this.parent.showColumnMenu||!s.showColumnMenu)){sf.base.attributes(r,{"e-mappinguid":"e-flmenu-"+s.uid}),t.classList.add("e-fltr-icon");var h=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==h.length)for(var p=0;p<this.parent.columns.length;p++)for(var u=0;u<this.parent.filterSettings.columns.length;u++)if(this.parent.filterSettings.columns[u].field===s.field){r.classList.add("e-filtered"),h.push(s.field);break}t.appendChild(r.cloneNode())}e.className&&t.classList.add(e.className),s.customAttributes&&Pt(t,s.customAttributes),s.allowSorting&&(o.sort="none"),s.allowGrouping&&(o.grabbed=!1),t=this.extendPrepareHeader(s,t);var f=this.parent,g=f.getColumnIndexByField(s.field);if(!sf.base.isNullOrUndefined(s.headerTemplate)){var m=f.element.id+s.uid+"headerTemplate",y=sf.base.isBlazor()?s.toJSON():s;n=s.getHeaderTemplate()(sf.base.extend({index:g},y),f,"headerTemplate",m,this.parent.isStringTemplate),t.firstElementChild.innerHTML="",Jt(t.firstElementChild,n)}if(this.ariaService.setOptions(t,o),!sf.base.isNullOrUndefined(s.headerTextAlign)||!sf.base.isNullOrUndefined(s.textAlign)){var v=s.headerTextAlign||s.textAlign;a.style.textAlign=v,"Right"===v||"Left"===v?t.classList.add("Right"===v?"e-rightalign":"e-leftalign"):"Center"===v&&t.classList.add("e-centeralign")}return"Clip"===s.clipMode||!s.clipMode&&"Clip"===this.parent.clipMode?t.classList.add("e-gridclip"):("EllipsisWithTooltip"===s.clipMode||!s.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==s.type&&t.classList.add("e-ellipsistooltip"),t.setAttribute("aria-rowspan",(sf.base.isNullOrUndefined(e.rowSpan)?1:e.rowSpan).toString()),t.setAttribute("aria-colspan","1"),this.parent.trigger("headerCellInfo",{cell:e,node:t}),t},t.prototype.getValue=function(e,t){return t.headerValueAccessor(e,t)},t.prototype.extendPrepareHeader=function(e,t){if(this.parent.showColumnMenu&&e.showColumnMenu&&!sf.base.isNullOrUndefined(e.field)){var r=this.parent.createElement("div",{className:"e-icons e-columnmenu"}),i=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==i.length)for(var n=0;n<this.parent.columns.length;n++)for(var s=0;s<this.parent.filterSettings.columns.length;s++)if(this.parent.filterSettings.columns[s].field===e.field){r.classList.add("e-filtered"),i.push(e.field);break}t.classList.add("e-fltr-icon"),t.appendChild(r)}if(this.parent.allowResizing){var o=this.parent.createElement("div");o.className=e.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",t.appendChild(o)}return t},t.prototype.appendHtml=function(e,t){return e.appendChild(t),e},t}(G),he=(Q=function(e,t){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Q(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{role:"columnheader",tabindex:"-1"}}),t}return he(t,e),t.prototype.render=function(e,t,r){var i=this.element.cloneNode(),n=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":e.column.uid}}),s=e.column;if(i.appendChild(n),sf.base.isNullOrUndefined(s.headerTemplate)?this.appendHtml(n,s.headerText,s.getDomSetter()):Jt(n,s.getHeaderTemplate()(s,this.parent,"headerTemplate")),e.column.toolTip&&i.setAttribute("title",e.column.toolTip),"Clip"===s.clipMode||!s.clipMode&&"Clip"===this.parent.clipMode?i.classList.add("e-gridclip"):("EllipsisWithTooltip"===s.clipMode||!s.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&i.classList.add("e-ellipsistooltip"),sf.base.isNullOrUndefined(e.column.textAlign)||(n.style.textAlign=e.column.textAlign),e.column.customAttributes&&Pt(i,e.column.customAttributes),i.setAttribute("colspan",e.colSpan.toString()),i.setAttribute("aria-colspan",e.colSpan.toString()),i.setAttribute("aria-rowspan","1"),this.parent.allowResizing){var o=this.parent.createElement("div");o.className=e.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",i.appendChild(o)}return this.parent.trigger("headerCellInfo",{cell:e,node:i}),i},t}(G),ue=(J=function(e,t){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}J(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-indentcell"}),t}return ue(t,e),t.prototype.render=function(e,t){var r=this.element.cloneNode();return Pt(r,e.attributes),r},t}(G),ge=(X=function(e,t){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}X(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:t.parent.element.id+"captioncell",role:"gridcell",tabindex:"-1"}}),t}return ge(t,e),t.prototype.render=function(e,t){var r,i,n=this.element.cloneNode(),s=this.parent;t.headerText=e.column.headerText,e.isForeignKey&&(i=this.format(e.column,e.column.valueAccessor("foreignKey",t,e.column)));var o=e.isForeignKey?i:e.column.enableGroupByFormat?t.key:this.format(e.column,e.column.valueAccessor("key",t,e.column));if(sf.base.isNullOrUndefined(s.groupSettings.captionTemplate))n.innerHTML=e.column.headerText+": "+o+" - "+t.count+" "+(t.count<2?this.localizer.getConstant("Item"):this.localizer.getConstant("Items"));else{if(sf.base.isBlazor()){var a=s.element.id+"captionTemplate";r=Bt(s.groupSettings.captionTemplate)(t,null,null,a)}else r=Bt(s.groupSettings.captionTemplate)(t);Jt(n,r)}return n.setAttribute("colspan",e.colSpan.toString()),n.setAttribute("aria-label",n.innerHTML+" is groupcaption cell"),n.setAttribute("title",n.innerHTML),n},t}(G),ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-groupcaption"}),t}return ge(t,e),t.prototype.render=function(e,t){var r=this.element.cloneNode();return r.innerHTML="&nbsp;",r.setAttribute("colspan",e.colSpan.toString()),r},t}(G),ve=(Y=function(e,t){return(Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Y(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ve(t,e),t.prototype.render=function(e,t,r,i){var n=this.element.cloneNode();return n.className=i?"e-recordplusexpand":"e-recordpluscollapse",n.setAttribute("ej-mappingname",t.field),n.setAttribute("ej-mappingvalue",t.key),n.setAttribute("aria-expanded",i?"true":"false"),n.setAttribute("tabindex","-1"),n.appendChild(this.parent.createElement("div",{className:i?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow"})),n},t}(fe),Ce=($=function(e,t){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}$(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),we=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-grouptopleftcell"}),t}return Ce(t,e),t.prototype.render=function(e,t){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),r},t}(G),Se=(Z=function(e,t){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Z(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-detailheadercell"}),t}return Se(t,e),t.prototype.render=function(e,t){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),r},t}(G),Re=(ee=function(e,t){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}ee(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",role:"gridcell",tabindex:"-1"}}),t}return Re(t,e),t.prototype.render=function(e,t,r){var i=this.element.cloneNode();return r&&!sf.base.isNullOrUndefined(r.class)?(i.className="",i.className=r.class,i.appendChild(this.parent.createElement("div",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow"}))):i.appendChild(this.parent.createElement("div",{className:"e-icons e-dtdiagonalright e-icon-grightarrow"})),i},t}(G),Te=(te=function(e,t){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}te(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-rowdragdrop",attrs:{role:"gridcell",tabindex:"-1"}}),t}return Te(t,e),t.prototype.render=function(e,t){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon"})),e.isSelected&&(r.classList.add("e-selectionbackground"),r.classList.add("e-active")),r},t}(G),De=(re=function(e,t){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}re(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-rowdragheader"}),t}return De(t,e),t.prototype.render=function(e,t){var r=this.element.cloneNode();return r.appendChild(sf.base.createElement("div",{className:"e-emptycell"})),r},t}(G),Oe=function(){function t(e,t){this.emptyGrid=!1,this.counter=0,this.parent=e,this.locator=t,this.data=new O(e,t),this.l10n=t.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return t.prototype.render=function(){var t=this.parent;this.headerRenderer=this.renderer.getRenderer(e.RenderType.Header),this.contentRenderer=this.renderer.getRenderer(e.RenderType.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),t.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),"auto"!==this.parent.height&&this.parent.scrollModule.setPadding(),sf.base.isBlazor()&&this.parent.isServerRendered||this.refreshDataManager()},t.prototype.refresh=function(e){var t=this;void 0===e&&(e={requestType:"refresh"});var r=this.parent;if(r.notify(e.requestType+"-begin",e),sf.base.isBlazor()&&this.resetTemplates(),sf.base.isBlazor()&&r.isServerRendered){if(r.bulkChanges.dataSource&&delete r.bulkChanges.dataSource,r.notify("blazor-action-begin",e),"filtering"===e.requestType){e.columns=null}if("sorting"===e.requestType){e.target=null}"Batch"!==r.editSettings.mode||r.isEdit||r.notify("closebatch",{})}var i=this.parent.preventUpdate;r.trigger(d,e,(function(n){if(void 0===n&&(n={requestType:"refresh"}),"delete"===n.requestType&&sf.base.isBlazor()&&!r.isJsComponent){if(sf.base.isNullOrUndefined(r.commandDelIndex))n.data=r.getSelectedRecords();else{var s=n.data;n.data={},n.data[0]=s}}if(n.cancel)r.notify("cancel-Begin",n);else{if("Normal"===r.editSettings.mode&&r.isEdit&&r.notify("closeinline",{}),"delete"===n.requestType&&r.allowPaging){var o=n.data.length,a=r.pageSettings.totalRecordsCount-o;r.currentViewData.length-o||!a||(r.prevPageMoving=!0,r.setProperties({pageSettings:{totalRecordsCount:a,currentPage:Math.ceil(a/r.pageSettings.pageSize)}},!0),r.pagerModule.pagerObj.totalRecordsCount=a)}if(sf.base.isBlazor()&&t.parent.isServerRendered){if(i){return void(r.bulkChanges={})}"refresh"===e.requestType&&t.parent.notify("updateaction",n),"virtualscroll"!==n.requestType&&t.parent.showSpinner(),"delete"===n.requestType||"save"===n.requestType?(t.parent.notify("add-delete-Action",n),t.parent.notify("add-delete-success",n)):(t.parent.allowServerDataBinding=!0,t.parent.serverDataBind(),t.parent.allowServerDataBinding=!1)}else t.refreshDataManager(n)}}))},t.prototype.resetTemplates=function(){var e=this.parent,t=e.getColumns();if(e.detailTemplate){var r=e.element.id+"detailTemplate";sf.base.blazorTemplates[r]=[],sf.base.resetBlazorTemplate(r,"DetailTemplate")}e.groupSettings.captionTemplate&&sf.base.resetBlazorTemplate(e.element.id+"captionTemplate","CaptionTemplate"),e.rowTemplate&&sf.base.resetBlazorTemplate(e.element.id+"rowTemplate","RowTemplate"),e.toolbarTemplate&&sf.base.resetBlazorTemplate(e.element.id+"toolbarTemplate","ToolbarTemplate"),e.pageSettings.template&&sf.base.resetBlazorTemplate(e.element.id+"_template","pageSettings");for(var i=0;i<t.length;i++)t[i].template&&(sf.base.blazorTemplates[e.element.id+t[i].uid]=[],sf.base.resetBlazorTemplate(e.element.id+t[i].uid,"Template")),t[i].headerTemplate&&sf.base.resetBlazorTemplate(e.element.id+t[i].uid+"headerTemplate","HeaderTemplate"),t[i].filterTemplate&&sf.base.resetBlazorTemplate(e.element.id+t[i].uid+"filterTemplate","FilterTemplate");for(var n=0;n<e.aggregates.length;n++)for(var s=0;s<e.aggregates[n].columns.length;s++){if(e.aggregates[n].columns[s].footerTemplate){var o=e.element.id+e.aggregates[n].columns[s].guid+"footerTemplate";sf.base.resetBlazorTemplate(o,"FooterTemplate")}if(e.aggregates[n].columns[s].groupFooterTemplate){o=e.element.id+e.aggregates[n].columns[s].guid+"groupFooterTemplate";sf.base.resetBlazorTemplate(o,"GroupFooterTemplate")}if(e.aggregates[n].columns[s].groupCaptionTemplate){o=e.element.id+e.aggregates[n].columns[s].guid+"groupCaptionTemplate";sf.base.resetBlazorTemplate(o,"GroupCaptionTemplate")}}},t.prototype.refreshComplete=function(e){sf.base.isBlazor()&&!this.parent.isJsComponent&&(e.rows=null),this.parent.trigger(c,e)},t.prototype.refreshDataManager=function(e){var t,r=this;void 0===e&&(e={}),"virtualscroll"!==e.requestType&&this.parent.showSpinner(),this.parent.notify("reset-infinite-blocks",e),this.emptyGrid=!1;var i=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector(".e-content"),!0),i){var n=new sf.data.Deferred;t=this.getFData(n,e)}if(t=t?t.then((function(t){var i=r.data.generateQuery().requiresCount();if(r.emptyGrid){var n=new sf.data.Deferred;return n.resolve({result:[],count:0}),n.promise}return r.data.getData(e,i)})):this.data.getData(e,this.data.generateQuery().requiresCount()),this.parent.getForeignKeyColumns().length&&(!i||this.parent.searchSettings.key.length)){var s=new sf.data.Deferred;t=t.then((function(i){return r.parent.notify("getForeignKeyData",{dataManager:t,result:i,promise:s,action:e}),s.promise}))}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(t=t.then((function(e){return r.validateGroupRecords(e)}))),t.then((function(t){return r.dataManagerSuccess(t,e)})).catch((function(t){return r.dataManagerFailure(t,e)}))},t.prototype.getFData=function(e,t){return this.parent.notify("getForeignKeyData",{isComplex:!0,promise:e,action:t}),e.promise},t.prototype.isNeedForeignAction=function(){var e=this.parent;return!!(e.allowFiltering&&e.filterSettings.columns.length||e.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())},t.prototype.foreignKey=function(e){var t=this;return e.some((function(e){return!(!t.parent.filterSettings.columns.some((function(t){return e.uid===t.uid}))&&!t.parent.searchSettings.key.length)}))},t.prototype.sendBulkRequest=function(e){var t=this;e.requestType="batchsave";var r=this.data.saveChanges(e.changes,this.parent.getPrimaryKeyFieldNames()[0],e.original);if(sf.base.isBlazor()&&!this.parent.isJsComponent)r.then((function(r){t.parent.notify("editsuccess",e)})).catch((function(e){sf.base.isNullOrUndefined(e.error)||sf.base.isNullOrUndefined(e.error.message)||(e.error=e.error.message),t.parent.trigger("actionFailure",e)}));else{var i=this.data.generateQuery().requiresCount();if(this.data.dataManager.dataSource.offline)return void this.refreshDataManager({requestType:"batchsave"});r.then((function(r){t.data.getData(e,i).then((function(r){return t.dmSuccess(r,e)})).catch((function(r){return t.dmFailure(r,e)}))})).catch((function(r){return t.dmFailure(r,e)}))}},t.prototype.dmSuccess=function(e,t){this.dataManagerSuccess(e,t)},t.prototype.dmFailure=function(e,t){this.dataManagerFailure(e,t)},t.prototype.renderEmptyRow=function(){this.emptyRow(!0)},t.prototype.emptyRow=function(e){var t,r=this.parent,i=this.contentRenderer.getTable().querySelector("tbody");sf.base.isNullOrUndefined(i)||sf.base.remove(i),i=this.parent.createElement("tbody");var n=0;(r.detailTemplate||r.childGrid)&&++n,(t=this.parent.createElement("tr",{className:"e-emptyrow"})).appendChild(this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(r.getColumns().length+n).toString()}})),i.appendChild(t),this.contentRenderer.renderEmpty(i),e&&(this.parent.trigger(h,{}),this.parent.notify(y,{rows:[new M({isDataRow:!0,cells:[new k({isDataCell:!0,visible:!0})]})]}))},t.prototype.dynamicColumnChange=function(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])},t.prototype.updateColumnType=function(e){for(var t,r=this.parent.getColumns(),i=e&&e.items?e.items[0]:e,o=this.locator.getService("valueFormatter"),a=0,l=r.length;a<l;a++){t=Sr(r[a].field||"",i),sf.base.isNullOrUndefined(r[a].customFormat)||(r[a].format=r[a].customFormat),sf.base.isNullOrUndefined(r[a].validationRules)||sf.base.isNullOrUndefined(r[a].validationRules.equalTo)||(r[a].validationRules.equalTo[0]=this.parent.element.id+r[a].validationRules.equalTo[0]),r[a].isForeignColumn()&&r[a].columnData&&(t=Sr(r[a].foreignKeyValue||"",r[a].columnData[0])),sf.base.isNullOrUndefined(t)?r[a].type=r[a].type||(sf.base.isBlazor()&&this.parent.isServerRendered?"none":null):(this.isColTypeDef=!0,(!r[a].type||sf.base.isBlazor()&&this.parent.isServerRendered&&"none"===r[a].type)&&(r[a].type=t.getDay?t.getHours()>0||t.getMinutes()>0||t.getSeconds()>0||t.getMilliseconds()>0?"datetime":"date":n()(t)));var d=new s;if(r[a].format&&(r[a].format.skeleton||r[a].format.format)&&(r[a].setFormatter(d.getFormatFunction(r[a].format)),r[a].setParser(d.getParserFunction(r[a].format))),"string"==typeof r[a].format){var c=this.parent.isServerRendered||this.parent.printModule.isPrintGrid();lr(this.locator,r[a],c)}else r[a].format||"number"!==r[a].type||r[a].setParser(o.getParserFunction({format:"n2"}))}},t.prototype.dataManagerSuccess=function(t,r){var i=this,n=this.parent;this.contentRenderer=this.renderer.getRenderer(e.RenderType.Content),this.headerRenderer=this.renderer.getRenderer(e.RenderType.Header),t.actionArgs=r,n.trigger("beforeDataBound",t,(function(e){if(!e.cancel){e.result=sf.base.isNullOrUndefined(e.result)?[]:e.result;var t=Object.keys(e.result).length;if(!i.parent.isDestroyed)if(n.getColumns().length||t||n.columns.length&&n.columns[0]instanceof a){if(i.parent.isEdit=!1,i.parent.notify("edit-reset",{}),i.parent.notify("tooltip-destroy",{}),n.currentViewData=e.result,sf.base.isBlazor()&&"FilterBar"===n.filterSettings.type&&(sf.base.isNullOrUndefined(n.currentViewData)||!sf.base.isNullOrUndefined(n.currentViewData)&&!n.currentViewData.length))for(var s=n.getColumns(),o=0;o<s.length;o++)if(s[o].filterTemplate){var l=n.element.id+s[o].uid+"filterTemplate";sf.base.resetBlazorTemplate(l,"FilterTemplate");for(var d=s[o].field,h=n.filterSettings.columns,p=0;p<h.length;p++)d===h[p].field&&(sf.base.blazorTemplates[l][0][d]=h[p].value);sf.base.updateBlazorTemplate(l,"FilterTemplate",s[o],!1)}if(!t&&e.count&&n.allowPaging&&r&&"delete"!==r.requestType)return n.prevPageMoving=!0,n.pageSettings.totalRecordsCount=e.count,"paging"!==r.requestType&&(n.pageSettings.currentPage=Math.ceil(e.count/n.pageSettings.pageSize)),void n.dataBind();if((n.getColumns().length||!t)&&i.isLayoutRendered||wr(n)||i.updatesOnInitialRender(e),!i.isColTypeDef&&n.getCurrentViewRecords()&&i.updateColumnType(n.getCurrentViewRecords()[0]),i.parent.isInitialLoad||!i.parent.groupSettings.disablePageWiseAggregates||i.parent.groupSettings.columns.length||(e.result=i.parent.dataSource instanceof Array?i.parent.dataSource:i.parent.currentViewData),i.parent.notify(f,sf.base.extend({count:e.count,result:e.result,aggregates:e.aggregates},r)),(n.groupSettings.columns.length||r&&"ungrouping"===r.requestType)&&r&&"filtering"!==r.requestType&&i.headerRenderer.refreshUI(),t){if(wr(n)){r.scrollTop={top:i.contentRenderer.content.scrollTop}}i.contentRenderer.refreshContentRows(r)}else{if(!n.getColumns().length)return n.element.innerHTML="",void alert(i.l10n.getConstant("EmptyDataSourceError"));if(i.contentRenderer.setRowElements([]),i.contentRenderer.setRowObjects([]),i.ariaService.setBusy(i.parent.getContent().querySelector(".e-content"),!1),i.renderEmptyRow(),r){var u=(r.requestType||"").toLowerCase()+"-complete";i.parent.notify(u,r),"batchsave"===r.requestType&&(r.cancel=!1,r.rows=[],r.isFrozen=0!==i.parent.getFrozenColumns()&&!r.isFrozen,i.parent.trigger(c,r))}i.parent.hideSpinner()}i.parent.notify(R,{})}else n.hideSpinner()}}))},t.prototype.dataManagerFailure=function(e,t){this.ariaService.setOptions(this.parent.getContent().querySelector(".e-content"),{busy:!1,invalid:!0}),this.parent.trigger("actionFailure",{error:e}),this.parent.hideSpinner(),"save"!==t.requestType&&"delete"!==t.requestType&&"bulk-save"!==t.name&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.log("actionfailure",{error:e}))},t.prototype.updatesOnInitialRender=function(e){this.isLayoutRendered=!0,this.parent.columns.length<1&&this.buildColumns(e.result[0]),Lt(this.parent.columns),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(I,{})},t.prototype.iterateComplexColumns=function(e,t,r){for(var i=Object.keys(e),s=0;s<i.length;s++){("object"!==n()(e[i[s]])||!e[i[s]]||e[i[s]]instanceof Date?[]:Object.keys(e[i[s]])).length?this.iterateComplexColumns(e[i[s]],t+(i[s]+"."),r):(r[this.counter]=t+i[s],this.counter++)}},t.prototype.buildColumns=function(e){var t=[],r={};this.iterateComplexColumns(e,"",r);for(var i=Object.keys(r).filter((function(e){return"BlazId"!==r[e]})).map((function(e){return r[e]})),n=0,s=i.length;n<s;n++)t[n]={field:i[n]},this.parent.enableColumnVirtualization&&(t[n].width=sf.base.isNullOrUndefined(t[n].width)?200:t[n].width);this.parent.setProperties({columns:t},!0)},t.prototype.instantiateRenderer=function(){this.renderer.addRenderer(e.RenderType.Header,new V(this.parent,this.locator)),this.renderer.addRenderer(e.RenderType.Content,new j(this.parent,this.locator));var t=this.locator.getService("cellRendererFactory");t.addCellRenderer(e.CellType.Header,new ce(this.parent,this.locator)),t.addCellRenderer(e.CellType.Data,new G(this.parent,this.locator)),t.addCellRenderer(e.CellType.StackedHeader,new pe(this.parent,this.locator)),t.addCellRenderer(e.CellType.Indent,new fe(this.parent,this.locator)),t.addCellRenderer(e.CellType.GroupCaption,new me(this.parent,this.locator)),t.addCellRenderer(e.CellType.GroupCaptionEmpty,new ye(this.parent,this.locator)),t.addCellRenderer(e.CellType.Expand,new be(this.parent,this.locator)),t.addCellRenderer(e.CellType.HeaderIndent,new we(this.parent,this.locator)),t.addCellRenderer(e.CellType.StackedHeader,new pe(this.parent,this.locator)),t.addCellRenderer(e.CellType.DetailHeader,new xe(this.parent,this.locator)),t.addCellRenderer(e.CellType.RowDragHIcon,new Fe(this.parent,this.locator)),t.addCellRenderer(e.CellType.DetailExpand,new Ie(this.parent,this.locator)),t.addCellRenderer(e.CellType.DetailFooterIntent,new fe(this.parent,this.locator)),t.addCellRenderer(e.CellType.RowDragIcon,new Ee(this.parent,this.locator))},t.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||(this.parent.on(p,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(b,this.refresh,this),this.parent.on("refresh-complete",this.refreshComplete,this),this.parent.on("bulk-save",this.sendBulkRequest,this),this.parent.on("showEmptyGrid",(function(){e.emptyGrid=!0}),this),this.parent.on(I,this.dynamicColumnChange,this))},t.prototype.validateGroupRecords=function(e){var t=this,r=e.result.length-1;if(r<0)return Promise.resolve(e);var i=e.result[0],n=e.result[r],s=[],o=function(e){for(var r=[i,n],o=0;o<r.length;o++)s.push(new sf.data.Predicate("field","==",r[o].field).and(t.getPredicate("key","equal",r[o].key)));e.where(sf.data.Predicate.or(s))},a=new sf.data.Query;o(a);var l=new sf.data.DataManager(e.result).executeLocal(a),d=this.data.generateQuery(!0),c=[];if(this.data.isRemote()||sf.base.isBlazor()){for(var h=[i,n],p=0;p<h.length;p++)c.push(this.getPredicate(h[p].field,"equal",h[p].key));d.where(sf.data.Predicate.or(c))}else o(d);var u=new sf.data.Deferred;return this.data.getData({},d).then((function(r){t.updateGroupInfo(l,r.result),u.resolve(e)})).catch((function(e){return u.reject(e)})),u.promise},t.prototype.getPredicate=function(e,t,r){return r instanceof Date?br({field:e,operator:t,value:r}):new sf.data.Predicate(e,t,r)},t.prototype.updateGroupInfo=function(e,t){for(var r=new sf.data.DataManager(t),i=e,n=0;n<i.length;n++){var s=r.executeLocal((new sf.data.Query).where(new sf.data.Predicate("field","==",i[n].field).and(this.getPredicate("key","equal",i[n].key))))[0];i[n].count=s.count;var o=i[n].items,a=s.items;o.GroupGuid&&(i[n].items=this.updateGroupInfo(i[n].items,s.items));for(var l=this.parent.aggregates,d=0;d<l.length;d++)for(var c=l[d],h=0;h<c.columns.length;h++)for(var p=c.columns[h].type instanceof Array?c.columns[h].type:[c.columns[h].type],u=0;u<p.length;u++){var f=c.columns[h].field+" - "+p[u].toLowerCase(),g=o.level?a.records:s.items,m=this.parent;if("Custom"===p[u]){var y=o.level?a:s;i[n].aggregates[f]=c.columns[h].customAggregate?c.columns[h].customAggregate.call(m,y,c.columns[h]):""}else i[n].aggregates[f]=sf.data.DataUtil.aggregates[p[u].toLowerCase()](g,c.columns[h].field)}}return e},t}(),Me=function(){function t(){this.cellRenderMap={}}return t.prototype.addCellRenderer=function(t,r){t="string"==typeof t?t:sf.base.getEnumValue(e.CellType,t),sf.base.isNullOrUndefined(this.cellRenderMap[t])&&(this.cellRenderMap[t]=r)},t.prototype.getCellRenderer=function(t){if(t="string"==typeof t?t:sf.base.getEnumValue(e.CellType,t),sf.base.isNullOrUndefined(this.cellRenderMap[t]))throw"The cellRenderer "+t+" is not found";return this.cellRenderMap[t]},t}(),ke=function(){function e(){this.services={}}return e.prototype.register=function(e,t){sf.base.isNullOrUndefined(this.services[e])&&(this.services[e]=t)},e.prototype.getService=function(e){if(sf.base.isNullOrUndefined(this.services[e]))throw"The service "+e+" is not registered";return this.services[e]},e}(),Ae=function(){function t(){this.rendererMap={}}return t.prototype.addRenderer=function(t,r){var i=sf.base.getEnumValue(e.RenderType,t);sf.base.isNullOrUndefined(this.rendererMap[i])&&(this.rendererMap[i]=r)},t.prototype.getRenderer=function(t){var r=sf.base.getEnumValue(e.RenderType,t);if(sf.base.isNullOrUndefined(this.rendererMap[r]))throw"The renderer "+r+" is not found";return this.rendererMap[r]},t}(),Be=function(){function e(e){this.parent=e}return e.prototype.setWidthToColumns=function(){var e,t=0,r=this.parent.getColumnIndexesInView(),i=!0;if(this.parent.allowGrouping)for(var n=this.parent.groupSettings.columns.length;t<n;t++)this.parent.enableColumnVirtualization&&-1===r.indexOf(t)?i=!1:this.setColumnWidth(new a({width:"30px"}),t);(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new a({width:"30px"}),t),t++),this.parent.isRowDragable()&&(this.setColumnWidth(new a({width:"30px"}),t),t++);for(var s=this.parent.getColumns(),o=0;o<s.length;o++)this.setColumnWidth(s[o],i&&this.parent.enableColumnVirtualization?void 0:o+t);e=this.getTableWidth(this.parent.getColumns()),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(e)},e.prototype.setMinwidthBycalculation=function(e){var t=0,r=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)||"auto"===e.width}));if(r.length){sf.base.isNullOrUndefined(this.parent.width)||"auto"===this.parent.width||(t=("string"==typeof this.parent.width?parseInt(this.parent.width,10):this.parent.width)-e);for(var i=0,n=0,s=r;n<s.length;n++){var o=s[n];i+=sf.base.isNullOrUndefined(o.minWidth)?0:"string"==typeof o.minWidth?parseInt(o.minWidth,10):o.minWidth}for(var a=0;a<r.length;a++)0===e&&this.parent.allowResizing&&this.isWidthUndefined()&&a!==r.length-1&&this.setUndefinedColumnWidth(r),0!==e&&t<i?this.setWidth(r[a].minWidth,this.parent.getColumnIndexByField(r[a].field)):0!==e&&t>i&&this.setWidth("",this.parent.getColumnIndexByField(r[a].field),!0)}},e.prototype.setUndefinedColumnWidth=function(e){for(var t=0;t<e.length;t++)t!==e.length-1&&(e[t].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[t].field)))},e.prototype.setColumnWidth=function(e,t,r){if(!(this.parent.getColumns().length<1)){var i=sf.base.isNullOrUndefined(t)?this.parent.getNormalizedColumnIndex(e.uid):t,n=this.getWidth(e),s=this.getTableWidth(this.parent.getColumns());null!==n&&(this.setWidth(n,i),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(s),(this.parent.allowResizing&&"resize"===r||this.parent.getFrozenColumns()&&this.parent.allowResizing)&&this.setWidthToTable(),this.parent.notify("column-width-changed",{index:i,width:n,column:e,module:r}))}},e.prototype.setWidth=function(e,t,r){if("string"==typeof e&&-1!==e.indexOf("%")&&(!Boolean(window.chrome)||!Boolean(window.chrome.webstore))&&this.parent.allowGrouping){var i=this.parent.element.offsetWidth;e=parseInt(e,10)/100*i}var n,s,o=this.parent.getHeaderTable(),a=this.parent.getContentTable(),l=sf.base.formatUnit(e),d=this.parent.getFrozenColumns(),c=this.parent.getHeaderContent().querySelector(".e-movableheader"),h=this.parent.getContent().querySelector(".e-movablecontent");if(d&&t>=d&&c&&c.querySelector("colgroup"))n=c.querySelector("colgroup").children[t-d];else if(this.parent.enableColumnVirtualization&&d&&this.parent.contentModule.isXaxis()&&c.scrollLeft>0){n=(p=c.querySelector("colgroup")).children[p.children.length-1-t]}else n=o.querySelector("colgroup").children[t];if(n&&!r?n.style.width=l:n&&r&&(n.style.width=" "),d&&t>=d)s=this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup").children[t-d];else if(this.parent.enableColumnVirtualization&&d&&this.parent.contentModule.isXaxis()&&h.scrollLeft>0){var p;s=(p=this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup")).children[p.children.length-1-t]}else s=a.querySelector("colgroup").children[t];s&&!r?s.style.width=l:s&&r&&(s.style.width=" ");for(var u=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),f=[],g=0;g<u.length;g++)if(Ut(u[g],"e-grid").id===this.parent.element.id)for(var m=0;m<u[g].querySelector("colgroup").children.length;m++)f.push(u[g].querySelector("colgroup").children[m]);u.length&&f.length&&(f[t].style.width=l)},e.prototype.getSiblingsHeight=function(e){return this.getHeightFromDirection(e,"previous")+this.getHeightFromDirection(e,"next")},e.prototype.getHeightFromDirection=function(e,t){for(var r=e[t+"ElementSibling"],i=0,n=["e-gridheader","e-gridfooter","e-groupdroparea","e-gridpager","e-toolbar"];r;)n.some((function(e){return r.classList.contains(e)}))&&(i+=r.offsetHeight),r=r[t+"ElementSibling"];return i},e.prototype.isWidthUndefined=function(){var e=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)&&sf.base.isNullOrUndefined(e.minWidth)})).length;return this.parent.getColumns().length===e},e.prototype.getWidth=function(e){if(sf.base.isNullOrUndefined(e.width)&&this.parent.allowResizing&&sf.base.isNullOrUndefined(e.minWidth)&&!this.isWidthUndefined()&&(e.width=200),this.parent.frozenColumns&&sf.base.isNullOrUndefined(e.width)&&e.index<this.parent.frozenColumns&&(e.width=200),!e.width)return null;var t=parseInt(e.width.toString(),10);return e.minWidth&&t<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&t>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width},e.prototype.getTableWidth=function(e){for(var t=0,r=0,i=e;r<i.length;r++){var n=i[r],s=this.getWidth(n);"auto"===n.width&&(s=0),!1!==n.visible&&null!==s&&(t+=parseInt(s.toString(),10))}return t},e.prototype.calcMovableOrFreezeColWidth=function(e){var t=this.parent.getColumns().slice();return"movable"===e?t.splice(0,this.parent.getFrozenColumns()):"freeze"===e&&t.splice(this.parent.getFrozenColumns(),t.length),sf.base.formatUnit(this.getTableWidth(t))},e.prototype.setWidthToFrozenTable=function(){var e=this.calcMovableOrFreezeColWidth("freeze");this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e},e.prototype.setWidthToMovableTable=function(){var e="",t=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)})).length>=1,r=this.parent.getColumns().filter((function(e){return"auto"===e.width})).length>=1;"number"!=typeof this.parent.width||t||r?t||r||(e=this.calcMovableOrFreezeColWidth("movable")):e=sf.base.formatUnit(this.parent.width-parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0],10)-5),this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild&&(this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild.style.width=e),this.parent.getContent().querySelector(".e-movablecontent").firstElementChild.style.width=e},e.prototype.setWidthToFrozenEditTable=function(){var e=this.calcMovableOrFreezeColWidth("freeze");this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=e},e.prototype.setWidthToMovableEditTable=function(){var e=this.calcMovableOrFreezeColWidth("movable");this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=e},e.prototype.setWidthToTable=function(){var e=sf.base.formatUnit(this.getTableWidth(this.parent.getColumns()));this.parent.getFrozenColumns()?(this.setWidthToFrozenTable(),this.setWidthToMovableTable()):((this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new a({width:"30px"})),this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e);var t=this.parent.element.querySelector(".e-table.e-inline-edit");t&&this.parent.getFrozenColumns()?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):t&&(t.style.width=e)},e}(),Pe=(ie=function(e,t){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}ie(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ze=function(){function e(e){this.currentInfo={},this.oneTime=!0,this.swap={},this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.parent=e,this.rowModelGen=new P(this.parent),this.addEventListener()}return e.prototype.focusCheck=function(e){var t=e.target;this.focusByClick=!0,this.skipFocus=t.classList.contains("e-grid")},e.prototype.onFocus=function(){if(!(this.parent.isDestroyed||sf.base.Browser.isDevice||this.parent.enableVirtualization)){this.setActive(!this.parent.enableHeaderFocus&&0===this.parent.frozenRows,0!==this.parent.frozenColumns),this.parent.enableHeaderFocus||this.parent.getCurrentViewRecords().length||this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new M({isDataRow:!0})]}),this.getContent().selector,!1);var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.skipFocus&&(this.focus(),this.skipFocus=!1)}},e.prototype.passiveFocus=function(e){this.parent.isDestroyed||e.target&&e.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,sf.base.addClass([this.currentInfo.element],["e-focused","e-focus"]))},e.prototype.onBlur=function(e){this.parent.isEdit||e&&(!e.relatedTarget||sf.base.closest(e.relatedTarget,".e-grid"))||(this.removeFocus(),this.skipFocus=!1,this.currentInfo.skipAction=!1,this.getContent().getFocusInfo().elementToFocus&&(this.getContent().getFocusInfo().elementToFocus.tabIndex=0))},e.prototype.onClick=function(e,t){var r=!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-gridcontent")),i=!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-gridheader"));r=r&&i?!r:r;var n=!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-frozencontent"))||!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-frozenheader"));if(!(!r&&sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-gridheader"))||e.target.classList.contains("e-content"))&&sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-unboundcell")))if(this.setActive(r,n),r||!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-gridheader"))){var s={cancel:!1,byKey:!1,byClick:!sf.base.isNullOrUndefined(e.target),clickArgs:e};if(this.parent.notify("beforecellfocused",s),!s.cancel&&!sf.base.closest(e.target,".e-inline-edit")&&(this.setActive(r,n),this.getContent())){if(!1===this.getContent().onClick(e,t))return;this.focus()}}else this.clearOutline()},e.prototype.onKeyPress=function(e){if(!this.skipOn(e)){this.activeKey=e.action;var t={cancel:!1,byKey:!0,byClick:!1,keyArgs:e};if(this.parent.notify("beforecellfocused",t),!t.cancel){var r=this.getContent().matrix.current;this.currentInfo.outline=!0;var i=this.getContent().jump(e.action,r);this.swap=i,i.swap&&(this.setActive(!i.toHeader,i.toFrozen),this.getContent().matrix.current=this.getContent().getNextCurrent(r,i,this.active,e.action),this.prevIndexes={}),this.setActiveByKey(e.action,this.getContent()),!1!==this.getContent().onKeyPress(e)?(e.preventDefault(),this.focus(e)):this.clearIndicator()}}},e.prototype.skipOn=function(e){var t=e.target;if(!t)return!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(e.action)>-1)return this.clearIndicator(),!0;sf.base.closest(t,"th")&&!sf.base.closest(t,"th").tabIndex&&null!==sf.base.closest(document.activeElement,".e-filterbarcell")&&this.removeFocus();var r=null!==sf.base.closest(document.activeElement,".e-filterbarcell");if(this.parent.enableHeaderFocus&&r){var i=this.active.matrix,n=i.current;r=i.matrix[n[0]].lastIndexOf(1)!==n[1]}return"delete"===e.action||"Batch"!==this.parent.editSettings.mode&&(this.parent.isEdit||["insert","f2"].indexOf(e.action)>-1)||r||null!==sf.base.closest(document.activeElement,"#"+this.parent.element.id+"_searchbar")&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(e.action)>-1||null===sf.base.closest(t,".e-gridcontent")&&null===sf.base.closest(t,".e-gridheader")||"space"===e.action&&!t.classList.contains("e-gridchkbox")&&null===sf.base.closest(t,".e-gridchkbox")&&null===sf.base.closest(t,".e-headerchkcelldiv")||null!==sf.base.closest(t,".e-filter-popup")},e.prototype.focusVirtualElement=function(e){var t=this;if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){var r={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify("get-virtual-data",r);var i=this.actions.some((function(e){return e===t.activeKey})),n=!!this.parent.contentModule&&this.parent.contentModule.selectedRowIndex>-1;r.isAdd||Object.keys(r.virtualData).length||i||r.isCancel||n?(r.isCancel=!1,this.parent.contentModule.selectedRowIndex=-1,i&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",e)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.currentInfo.elementToFocus.focus()}},e.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},e.prototype.getContent=function(){return this.active||this.content},e.prototype.setActive=function(e,t){this.active=e?t?this.fContent:this.content:t?this.fHeader:this.header},e.prototype.setFocusedElement=function(e,t){var r=this;this.currentInfo.elementToFocus=e,setTimeout((function(){sf.base.isNullOrUndefined(r.currentInfo.elementToFocus)||(r.parent.enableVirtualization||r.parent.enableInfiniteScrolling?r.focusVirtualElement(t):r.currentInfo.elementToFocus.focus())}),0)},e.prototype.focus=function(e){this.parent.notify("virtaul-cell-focus",e),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)},e.prototype.removeFocus=function(e){this.currentInfo.element&&(sf.base.removeClass([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1)},e.prototype.addOutline=function(){var e=this.getContent().getFocusInfo();e.element&&(sf.base.addClass([e.element],["e-focused"]),sf.base.addClass([e.elementToFocus],["e-focus"]))},e.prototype.focusHeader=function(){this.setActive(!1,0!==this.parent.frozenColumns),this.resetFocus()},e.prototype.focusContent=function(){this.setActive(!0,0!==this.parent.frozenColumns),this.resetFocus()},e.prototype.resetFocus=function(){var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.focus()},e.prototype.addFocus=function(e,t){if(this.currentInfo=e,this.currentInfo.outline=e.outline&&!sf.base.isNullOrUndefined(t),e.element){var r=e.elementToFocus.classList.contains("e-focus");if(!r){this.currentInfo.outline&&sf.base.addClass([e.element],["e-focused"]),sf.base.addClass([e.elementToFocus],["e-focus"]),e.element.tabIndex=0,r||this.setFocusedElement(e.elementToFocus,t),this.parent.notify("cellfocused",{element:e.elementToFocus,parent:e.element,indexes:this.getContent().matrix.current,byKey:!sf.base.isNullOrUndefined(t),byClick:sf.base.isNullOrUndefined(t),keyArgs:t,isJump:this.swap.swap,container:this.getContent().getInfo(t),outline:!sf.base.isNullOrUndefined(t),swapInfo:this.swap});var i=this.getContent().matrix.current,n=i[0],s=i[1];this.prevIndexes={rowIndex:n,cellIndex:s},this.focusedColumnUid=this.parent.getColumnByIndex(s).uid,this.focusByClick=!1}}},e.prototype.refreshMatrix=function(e){var t=this;return function(r){e&&r.args&&r.args.isFrozen&&!t.fContent?t.fContent=new He(t.parent):e&&!t.content&&(t.content=new Le(t.parent)),!e&&r.args&&r.args.isFrozen&&!t.fHeader?t.fHeader=new Ue(t.parent):e||t.header||(t.header=new qe(t.parent));var i=e?r.args&&r.args.isFrozen?t.fContent:t.content:r.args&&r.args.isFrozen?t.fHeader:t.header,n=e?r.rows.slice(t.parent.frozenRows):r.rows,s=e?r.rows.slice(0,t.parent.frozenRows):r.rows;t.parent.isCollapseStateEnabled()&&e&&(n=n.filter((function(e){return!1!==e.visible})));var o,a=!sf.base.isNullOrUndefined(t.parent.rowTemplate),l=i.matrix.generate(s,i.selector,a),d=t.parent.getFrozenColumns();if("batchAdd"===r.name&&d){var c=t.parent.getMovableRowsObject().map((function(e){return e.clone()})),h=n.map((function(e){return e.clone()}));t.fContent.matrix.generate(h,t.fContent.selector,a),t.content.matrix.generate(c,t.content.selector,a)}else i.matrix.generate(n,i.selector,a);if(i.generateRows(s,{matrix:l,handlerInstance:r.args&&r.args.isFrozen?t.fHeader:t.header}),!sf.base.Browser.isDevice&&r&&r.args&&(t.focusByClick||"paging"!==r.args.requestType||(t.skipFocus=!1,t.parent.element.focus()),"grouping"===r.args.requestType&&(t.skipFocus=!0)),r&&r.args&&"virtualscroll"===r.args.requestType)if(t.currentInfo.uid){if(r.rows.some((function(e,r){return o=r,e.uid===t.currentInfo.uid}))&&(t.content.matrix.current[0]=o,t.content.matrix.current[1]=t.parent.getColumnIndexByUid(t.focusedColumnUid)||0,f=t.getContent().getFocusInfo().elementToFocus)){var p=f.getBoundingClientRect(),u=t.parent.element.getBoundingClientRect();p.top>=0&&p.left>=0&&p.right<=Math.min(u.right,window.innerWidth||document.documentElement.clientWidth)&&p.bottom<=Math.min(u.bottom,window.innerHeight||document.documentElement.clientHeight)&&t.focus()}}else if(r.args.focusElement&&r.args.focusElement.classList.contains("e-filtertext")){var f;(f=t.parent.element.querySelector("#"+r.args.focusElement.id))&&f.focus()}}},e.prototype.addEventListener=function(){var e=this;if(!this.parent.isDestroyed){sf.base.EventHandler.add(this.parent.element,"mousedown",this.focusCheck,this),sf.base.EventHandler.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=function(t){return e.passiveFocus(t)},!0),sf.base.EventHandler.add(this.parent.element,"focusout",this.onBlur,this),this.parent.on(w,this.onKeyPress,this),this.parent.on(S,this.onClick,this),this.parent.on(g,this.refMatrix,this),this.parent.on("partial-refresh",this.refMatrix,this),this.parent.on(C,this.refreshMatrix(),this),this.parent.on("close-edit",this.restoreFocus,this),this.parent.on("restore-Focus",this.restoreFocus,this);for(var t=["start-edit","start-add"],r=0;r<t.length;r++)this.parent.on(t[r],this.clearIndicator,this);this.parent.on("sorting-complete",this.restoreFocus,this),this.parent.on("filtering-complete",this.filterfocus,this);for(var i=["grouping","ungrouping"],n=0;n<i.length;n++)this.parent.on(i[n]+"-complete",this.restoreFocusWithAction,this);this.parent.on("batchAdd",this.refMatrix,this),this.parent.on("batchCancel",this.refMatrix,this),this.parent.on("batchDelete",this.refMatrix,this),this.parent.on("detailDataBound",this.refMatrix,this),this.parent.on(y,this.refMatrix,this),this.parent.on("cellfocused",this.internalCellFocus,this)}},e.prototype.filterfocus=function(){"FilterBar"!==this.parent.filterSettings.type&&this.restoreFocus()},e.prototype.removeEventListener=function(){if(!this.parent.isDestroyed){sf.base.EventHandler.remove(this.parent.element,"mousedown",this.focusCheck),sf.base.EventHandler.remove(this.parent.element,"focus",this.onFocus),sf.base.EventHandler.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),this.parent.off(w,this.onKeyPress),this.parent.off(S,this.onClick),this.parent.off(g,this.refMatrix),this.parent.off("partial-refresh",this.refMatrix),this.parent.off(C,this.refreshMatrix()),this.parent.off("close-edit",this.restoreFocus),this.parent.off("restore-focus",this.restoreFocus);for(var e=["start-edit","start-add"],t=0;t<e.length;t++)this.parent.off(e[t],this.clearOutline);this.parent.off("sorting-complete",this.restoreFocus),this.parent.off("filtering-complete",this.filterfocus);for(var r=["grouping","ungrouping"],i=0;i<r.length;i++)this.parent.on(r[i]+"-complete",this.restoreFocusWithAction);this.parent.off("batchAdd",this.refMatrix),this.parent.off("batchDelete",this.refMatrix),this.parent.off("batchCancel",this.refMatrix),this.parent.off("detailDataBound",this.refMatrix),this.parent.off(y,this.refMatrix),this.parent.off("cellfocused",this.internalCellFocus)}},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.restoreFocus=function(){this.addFocus(this.getContent().getFocusInfo())},e.prototype.restoreFocusWithAction=function(e){if(!this.parent.enableInfiniteScrolling){var t=this.getContent().matrix,r=t.current;switch(e.requestType){case"grouping":case"ungrouping":r[1]=!r.length||this.parent.groupSettings.showGroupedColumn||sf.base.isNullOrUndefined(t.matrix[r[0]])?"grouping"===e.requestType?r[1]+1:r[1]-1:t.matrix[r[0]].indexOf(1)}this.getContent().matrix.current=r,this.addFocus(this.getContent().getFocusInfo())}},e.prototype.clearOutline=function(){this.getContent().matrix.current=this.getContent().matrix.get(0,-1,[0,1],"downArrow",this.getContent().validator()),this.clearIndicator()},e.prototype.clearIndicator=function(){this.currentInfo.element&&this.currentInfo.elementToFocus&&sf.base.removeClass([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},e.prototype.getPrevIndexes=function(){var e=this.forget;return this.forget=!1,e||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes},e.prototype.forgetPrevious=function(){this.forget=!0},e.prototype.setActiveByKey=function(e,t){var r=this;if(0!==this.parent.frozenColumns||0!==this.parent.frozenRows){var i,n={home:function(){return{toHeader:!i.isContent,toFrozen:!0}},end:function(){return{toHeader:!i.isContent,toFrozen:!1}},ctrlHome:function(){return{toHeader:!0,toFrozen:0!==r.parent.frozenColumns}},ctrlEnd:function(){return{toHeader:!1,toFrozen:!1}}};if(e in n){i=t.getInfo();var s=n[e]();this.setActive(!s.toHeader,s.toFrozen),this.getContent().matrix.current=t.matrix.current}}},e.prototype.internalCellFocus=function(e){if(e.byKey&&e.container.isContent&&"enter"===e.keyArgs.action&&(e.parent.classList.contains("e-detailcell")||e.parent.classList.contains("e-unboundcell")||e.parent.classList.contains("e-templatecell"))){this.clearIndicator();var t=this.getContent().getFocusable(this.getFocusedElement());this.setFocusedElement(t),this.currentInfo.skipAction=!0}},e}(),Ne=function(){function e(){this.matrix=[],this.current=[]}return e.prototype.set=function(e,t,r){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.columns)),this.matrix[e]=this.matrix[e]||[],this.matrix[e][t]=r?1:0},e.prototype.get=function(e,t,r,i,n){var s=t;if(e+r[0]<0)return[e,t];e=Math.max(0,Math.min(e+r[0],this.rows));var o=!0;if(sf.base.isNullOrUndefined(this.matrix[e]))return null;if(t=Math.max(0,Math.min(t+r[1],this.matrix[e].length-1)),s+r[1]>this.matrix[e].length-1&&n(e,t,i))return[e,s];var a=this.first(this.matrix[e],t,r,!0,i);t=null===a?s:a;var l=sf.base.getValue(e+"."+t,this.matrix);if(e!==this.rows||"downArrow"!==i&&"enter"!==i||(r[0]=-1),null===a){e=this.current[0];for(var d=0;d<this.rows;d++)if(this.matrix[d].some((function(e){return 1===e}))){o=!1;break}if(o)return[e,t]}return this.inValid(l)||!n(e,t,i)?this.get(e,s,r,i,n):[e,t]},e.prototype.first=function(e,t,r,i,n){return(t<0||t===e.length)&&this.inValid(e[t])&&"upArrow"!==n&&"downArrow"!==n||!e.some((function(e){return 1===e}))?null:this.inValid(e[t])?this.first(e,-1!==["upArrow","downArrow","shiftUp","shiftDown"].indexOf(n)?i?0:++t:t+r[1],r,!1,n):t},e.prototype.select=function(e,t){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.matrix[e].length-1)),this.current=[e,t]},e.prototype.generate=function(e,t,r){this.rows=e.length-1,this.matrix=[];for(var i=0;i<e.length;i++){var n=e[i].cells.filter((function(e){return!0!==e.isSpanned}));this.columns=Math.max(n.length-1,0|this.columns);for(var s=0;s<n.length;s++)this.set(i,s,t(e[i],n[s],r))}return this.matrix},e.prototype.inValid=function(e){return 0===e||void 0===e},e}(),Le=function(){function t(e){var t=this;this.matrix=new Ne,this.parent=e,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=function(e){return{home:[t.matrix.current[0],-1,0,1],end:[t.matrix.current[0],t.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[t.matrix.rows,t.matrix.columns+1,0,-1]}[e]||null}}return t.prototype.getTable=function(){return this.parent.frozenColumns?this.parent.getContent().querySelector(".e-movablecontent .e-table"):this.parent.getContentTable()},t.prototype.onKeyPress=function(e){var t=this.keyActions[e.action],r=this.getCurrentFromAction(e.action,t,e.action in this.keyActions,e);if(r){if((["tab","shiftTab"].indexOf(e.action)>-1&&this.matrix.current||[]).toString()===r.toString()){if(r.toString()===[this.matrix.rows,this.matrix.columns].toString()||r.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===r.toString())return!1;r=this.editNextRow(r[0],r[1],e.action)}this.matrix.select(r[0],r[1])}},t.prototype.editNextRow=function(e,t,r){var i=this.parent,n=i.editSettings.allowNextRowEdit&&(i.isEdit||i.isLastCellPrimaryKey),s=i.getColumnIndexByField(i.getVisibleColumns()[0].field),o=this.getTable().rows[e].cells[t];"tab"===r&&n&&(e++,t=s+(this.getTable().rows[e].querySelectorAll(".e-indentcell").length+this.getTable().rows[e].querySelectorAll(".e-detailrowcollapse").length));return"shiftTab"===r&&n&&(e--,t=i.getColumnIndexByField(i.getVisibleColumns()[i.getVisibleColumns().length-1].field)),o.classList.contains("e-rowcell")||o.classList.contains("e-headercell")||o.classList.contains("e-groupcaption")?[e,t]:this.editNextRow(e,t,r)},t.prototype.getCurrentFromAction=function(e,t,r,i){if(void 0===t&&(t=[0,0]),!r&&!this.indexesByKey(e)||0===this.matrix.current.length)return null;if(!this.shouldFocusChange(i))return this.matrix.current;var n=this.indexesByKey(e)||this.matrix.current.concat(t),s=n[0],o=n[1],a=n[2],l=n[3];return this.matrix.get(s,o,[a,l],e,this.validator())},t.prototype.onClick=function(e,t){var r=e.target;if(r=(r=r.classList.contains("e-rowcell")?r:sf.base.closest(r,"td"))||(sf.base.closest(e.target,"td.e-detailrowcollapse")||sf.base.closest(e.target,"td.e-detailrowexpand")),!(r=(r=sf.base.closest(e.target,"td.e-detailcell")&&sf.base.isNullOrUndefined(sf.base.closest(sf.base.closest(e.target,".e-grid"),"td.e-detailcell"))?null:r)&&sf.base.closest(r,"table").classList.contains("e-table")?r:null))return!1;var i=[r.parentElement.rowIndex,r.cellIndex],n=i[0],s=i[1],o=this.matrix.current,a=o[0],l=o[1],d=sf.base.getValue(n+"."+s,this.matrix.matrix);if(this.matrix.inValid(d)||!t&&a===n&&l===s)return!1;this.matrix.select(n,s)},t.prototype.getFocusInfo=function(){var e={},t=this.matrix.current,r=t[0],i=void 0===r?0:r,n=t[1],s=void 0===n?0:n;return this.matrix.current=[i,s],e.element=sf.base.isNullOrUndefined(this.getTable().rows[i])?null:this.getTable().rows[i].cells[s],e.element?(e.elementToFocus=e.element.classList.contains("e-unboundcell")||e.element.classList.contains("e-detailcell")?e.element:this.getFocusable(e.element),e.outline=!0,e.uid=e.element.parentElement.getAttribute("data-uid"),e):e},t.prototype.getFocusable=function(e){var t='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])';this.parent.isEdit&&(t='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea');var r=[].slice.call(e.querySelectorAll(t));return r.length?r[0]:e},t.prototype.selector=function(t,r,i){var n=[e.CellType.Expand,e.CellType.GroupCaption,e.CellType.CaptionSummary,e.CellType.GroupSummary];return(t.isDataRow&&r.visible&&(r.isDataCell||r.isTemplate)||t.isDataRow&&r.cellType===e.CellType.DetailExpand&&sf.base.isNullOrUndefined(r.visible)||!t.isDataRow&&n.indexOf(r.cellType)>-1||r.column&&"checkbox"===r.column.type||r.cellType===e.CellType.CommandColumn||t.isDataRow&&i)&&!("delete"===t.edit&&t.isDirty)},t.prototype.jump=function(e,t){var r=this.parent.frozenColumns>0&&("leftArrow"===e||"shiftTab"===e)&&0===t[1],i=0!==this.parent.frozenRows&&"shiftEnter"===e;"tab"!==e||this.parent.isEdit||t[1]!==this.matrix.matrix[t[0]].lastIndexOf(1)||this.matrix.matrix.length-1===t[0]||(this.matrix.current[0]=this.matrix.current[0]+1,this.matrix.current[1]=-1,r=this.parent.frozenColumns>0),"shiftTab"!==e||this.parent.isEdit||0===t[0]||this.matrix.matrix[t[0]].indexOf(1)!==t[1]||(this.matrix.current[0]=this.matrix.current[0]-1,this.matrix.current[1]=this.matrix.matrix[t[0]].length);var n=!1,s=document.activeElement.parentElement;(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&s.classList.contains("e-row")&&(n=parseInt(s.getAttribute("aria-rowindex"),10)>0);return{swap:!n&&(("upArrow"===e||i)&&0===t[0]||r),toHeader:("upArrow"===e||i)&&0===t[0],toFrozen:r}},t.prototype.getNextCurrent=function(e,t,r,i){void 0===e&&(e=[]);var n=[];return"rightArrow"===i||"tab"===i?(n[0]=e[0],n[1]=-1):"downArrow"!==i&&"enter"!==i||(n[0]=-1,n[1]=e[1]),n},t.prototype.generateRows=function(e,t){var r,i=t.matrix,n=t.handlerInstance,s=n.matrix.matrix.length,o=this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type?s+1:s;n.matrix.matrix=n.matrix.matrix.slice(0,o),n.matrix.rows=o,(r=n.matrix.matrix).push.apply(r,i),n.matrix.rows+=i.length},t.prototype.getInfo=function(e){var t=this.getFocusInfo(),r=this.matrix.current,i=r[0],n=r[1],s=t.element.classList.contains("e-rowcell"),o=s||e&&"enter"!==e.action&&(t.element.classList.contains("e-detailrowcollapse")||t.element.classList.contains("e-detailrowexpand")),a=[Math.min(parseInt(t.element.parentElement.getAttribute("aria-rowindex"),10),i),Math.min(parseInt(t.element.getAttribute("aria-colindex"),10),n)];return{isContent:!0,isDataCell:s,indexes:[a[0],a[1]],isSelectable:o}},t.prototype.validator=function(){var e=this.getTable();return function(t,r,i){if(!sf.base.isNullOrUndefined(e.rows[t])){var n=void 0,s=0!==(n=e.rows[t].cells[0].classList.contains("e-editcell")?e.rows[t].cells[0].querySelectorAll("td")[r]:e.rows[t].cells[r]).getBoundingClientRect().width;if("enter"===i||"shiftEnter"===i)return s&&n.classList.contains("e-rowcell");if(("shiftUp"===i||"shiftDown"===i)&&n.classList.contains("e-rowcell"))return s;if("shiftUp"!==i&&"shiftDown"!==i)return s}return!1}},t.prototype.shouldFocusChange=function(e){var t=this.matrix.current,r=t[0],i=void 0===r?-1:r,n=t[1],s=void 0===n?-1:n;if(i<0||s<0)return!0;var o=sf.base.getValue(i+".cells."+s,this.getTable().rows);return!o||("enter"!==e.action&&"shiftEnter"!==e.action||o.classList.contains("e-rowcell")&&!o.classList.contains("e-unboundcell")&&(!o.classList.contains("e-templatecell")||o.classList.contains("e-editedbatchcell"))&&!o.classList.contains("e-detailcell"))},t}(),qe=function(t){function r(e){return t.call(this,e)||this}return Pe(r,t),r.prototype.getTable=function(){return this.parent.getFrozenColumns()?this.parent.getHeaderContent().querySelector(".e-movableheader .e-table"):this.parent.getHeaderTable()},r.prototype.onClick=function(e){var t=e.target;if((t=t.classList.contains("e-headercell")?t:sf.base.closest(t,"th"))||0===this.parent.frozenRows||(t=e.target.classList.contains("e-rowcell")?e.target:sf.base.closest(e.target,"td")),e.target.classList.contains("e-columnheader")||e.target.querySelector(".e-stackedheadercell"))return!1;if(t){var r=[t.parentElement.rowIndex,t.cellIndex],i=r[0],n=r[1],s=sf.base.getValue(i+"."+n,this.matrix.matrix);if(this.matrix.inValid(s))return!1;this.matrix.select(t.parentElement.rowIndex,t.cellIndex)}},r.prototype.getFocusInfo=function(){var e={},t=this.matrix.current,r=t[0],i=void 0===r?0:r,n=t[1],s=void 0===n?0:n;return e.element=this.getTable().rows[i].cells[s],e.elementToFocus=this.getFocusable(e.element),e.outline=!e.element.classList.contains("e-filterbarcell"),e},r.prototype.selector=function(t,r){return r.visible&&(void 0!==r.column.field||r.isTemplate)||"checkbox"===r.column.type||r.cellType===e.CellType.StackedHeader},r.prototype.jump=function(e,t){var r,i,n=this.parent.frozenColumns>0&&("leftArrow"===e||"shiftTab"===e)&&0===t[1],s=0!==this.parent.frozenRows&&"enter"===e,o=n,a=this.parent.focusModule.fHeader&&this.parent.focusModule.fHeader.matrix.matrix,l=a&&!sf.base.isNullOrUndefined(a[t[0]]);return this.parent.enableHeaderFocus&&"tab"===e&&(i=this.matrix.matrix.length-1===t[0],(r=t[1]===this.matrix.matrix[t[0]].lastIndexOf(1))&&(this.matrix.current[0]=i?0:this.matrix.current[0]+1,this.matrix.current[1]=-1),this.parent.frozenColumns>0&&i&&r&&(n=!0,o=!1)),{swap:("downArrow"===e||s)&&t[0]===this.matrix.matrix.length-1||l&&n||"tab"===e&&i&&r,toHeader:o,toFrozen:n}},r.prototype.getNextCurrent=function(e,t,r,i){void 0===e&&(e=[]);var n=[];return"upArrow"===i||"shiftEnter"===i?(n[0]=this.matrix.matrix.length,n[1]=e[1]):"rightArrow"!==i&&"tab"!==i||(n[0]=e[0],n[1]=-1),n},r.prototype.generateRows=function(e){var t=this.matrix.matrix.length;if(this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type){this.matrix.rows=++this.matrix.rows;for(var r=e[0].cells,i=0;i<r.length;i++)this.matrix.set(t,i,r[i].visible&&!1!==r[i].column.allowFiltering)}},r.prototype.getInfo=function(e){return sf.base.extend(t.prototype.getInfo.call(this,e),{isContent:!1,isHeader:!0})},r.prototype.validator=function(){return function(){return!0}},r.prototype.shouldFocusChange=function(e){var t=this.matrix.current,r=t[0],i=t[1];if(r<0||i<0)return!0;var n=sf.base.getValue(r+".cells."+i,this.getTable().rows);return!n||("enter"!==e.action&&"altDownArrow"!==e.action||!n.classList.contains("e-headercell"))},r}(Le),He=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pe(t,e),t.prototype.getTable=function(){return this.parent.getContent().querySelector(".e-frozencontent .e-table")},t.prototype.jump=function(e,t){var r=0!==this.parent.frozenRows&&"shiftEnter"===e;return{swap:("upArrow"===e||r)&&0===t[0]||("tab"===e||"rightArrow"===e)&&t[1]===this.matrix.columns,toHeader:("upArrow"===e||r)&&0===t[0],toFrozen:("upArrow"===e||r)&&0===t[0]}},t.prototype.getNextCurrent=function(e,t,r,i){void 0===e&&(e=[]);var n=[];return"tab"===i&&this.parent.enableHeaderFocus&&(n[0]=e[0],n[1]=-1),"leftArrow"===i||"shiftTab"===i?(n[0]=e[0],n[1]=r.matrix.columns+1):"downArrow"!==i&&"enter"!==i||(n[0]=-1,n[1]=e[1]),n},t}(Le),Ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pe(t,e),t.prototype.jump=function(e,t){var r=0!==this.parent.frozenRows&&"enter"===e,i=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,n=i&&!sf.base.isNullOrUndefined(i[t[0]]);return{swap:("downArrow"===e||r)&&t[0]===this.matrix.matrix.length-1||("rightArrow"===e||"tab"===e)&&t[1]===this.matrix.columns&&n,toHeader:("rightArrow"===e||"tab"===e)&&t[1]===this.matrix.columns,toFrozen:("downArrow"===e||r)&&t[0]===this.matrix.matrix.length-1}},t.prototype.getTable=function(){return this.parent.getHeaderContent().querySelector(".e-frozenheader .e-table")},t.prototype.getNextCurrent=function(e,t,r,i){void 0===e&&(e=[]);var n=[];return"leftArrow"===i||"shiftTab"===i?(n[0]=e[0],n[1]=r.matrix.columns+1):"upArrow"!==i&&"shiftEnter"!==i||(n[0]=this.matrix.matrix.length,n[1]=e[1]),n},t}(qe),je=function(){function e(e){this.searchBox=e}return e.prototype.searchFocus=function(e){e.target.parentElement.classList.add("e-input-focus")},e.prototype.searchBlur=function(e){e.target.parentElement.classList.remove("e-input-focus")},e.prototype.wireEvent=function(){this.searchBox&&(sf.base.EventHandler.add(this.searchBox,"focus",this.searchFocus,this),sf.base.EventHandler.add(this.searchBox,"blur",this.searchBlur,this))},e.prototype.unWireEvent=function(){this.searchBox&&(sf.base.EventHandler.remove(this.searchBox,"focus",this.searchFocus),sf.base.EventHandler.remove(this.searchBox,"blur",this.searchBlur))},e}(),Ve=(ne=function(e,t){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}ne(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Ge=function(e,t,r,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},_e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ve(t,e),Ge([sf.base.Property(12)],t.prototype,"pageSize",void 0),Ge([sf.base.Property(8)],t.prototype,"pageCount",void 0),Ge([sf.base.Property(1)],t.prototype,"currentPage",void 0),Ge([sf.base.Property()],t.prototype,"totalRecordsCount",void 0),Ge([sf.base.Property(!1)],t.prototype,"enableQueryString",void 0),Ge([sf.base.Property(!1)],t.prototype,"pageSizes",void 0),Ge([sf.base.Property(null)],t.prototype,"template",void 0),t}(sf.base.ChildProperty),Ke=(se=function(e,t){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}se(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),We=function(e,t,r,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},Qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ke(t,e),We([sf.base.Property("startsWith")],t.prototype,"operator",void 0),t}(sf.base.ChildProperty),Je=function(){return(Je=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Xe=function(){function t(e,t,r){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.autoFillRLselection=!0,this.parent=e,this.selectionSettings=t,this.factory=r.getService("rendererFactory"),this.focus=r.getService("focus"),this.addEventListener(),this.wireEvents()}return t.prototype.initializeSelection=function(){this.parent.log("selection_key_missing"),sf.base.EventHandler.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this)},t.prototype.onActionBegin=function(e,t){this.parent.trigger(t,this.fDataUpdate(e))},t.prototype.fDataUpdate=function(e){if(e.cellIndex||e.rowIndex){var t=this.getRowObj(sf.base.isNullOrUndefined(e.rowIndex)?sf.base.isNullOrUndefined(e.cellIndex)?this.currentIndex:e.cellIndex.rowIndex:e.rowIndex);e.foreignKeyData=t.foreignKeyData}return e},t.prototype.onActionComplete=function(e,t){this.parent.trigger(t,this.fDataUpdate(e))},t.prototype.getModuleName=function(){return"selection"},t.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.hidePopUp(),this.clearSelection(),this.removeEventListener(),this.unWireEvents(),sf.base.EventHandler.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler))},t.prototype.isEditing=function(){return("Normal"===this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.isPersistSelection},t.prototype.getSelectedMovableRow=function(e){var t=this.parent;return t.getFrozenColumns()&&this.parent.getContent().querySelector(".e-movablecontent")?t.getMovableRowByIndex(e):null},t.prototype.getCurrentBatchRecordChanges=function(){var e=this.parent;if("Batch"===e.editSettings.mode&&e.editModule){var t=At(this.parent.getCurrentViewRecords());t=this.parent.editModule.getBatchChanges().addedRecords.concat(t);for(var r=this.parent.editModule.getBatchChanges().deletedRecords,i=this.parent.getPrimaryKeyFieldNames()[0],n=0;n<r.length;n++)for(var s=0;s<t.length;s++)if(r[n][i]===t[s][i]){t.splice(s,1);break}return t}return e.getCurrentViewRecords()},t.prototype.selectRow=function(e,t){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection)this.addRowsToSelection([e]);else{var r,i=this.parent,n=i.getRowByIndex(e),s=this.getSelectedMovableRow(e);if(i.enableVirtualization&&e>-1){this.parent.notify("select-virtual-Row",{selectedIndex:e});var o=i.getFrozenColumns()?i.contentModule.getRowObjectByIndex(e):null;if(!n||!i.getRowObjectFromUID(n.getAttribute("data-uid"))&&!o)return void(this.parent.getSelectedRecords().length>0&&this.clearRowSelection());r=o||i.getRowObjectFromUID(n.getAttribute("data-uid")).data}else r=this.getCurrentBatchRecordChanges()[e];if(this.isRowType()&&n&&!this.isEditing()){var a,l=n.hasAttribute("aria-selected");this.activeTarget();if(t=t?!!this.selectedRowIndexes.length&&(1===this.selectedRowIndexes.length&&e===this.selectedRowIndexes[0]):t)this.rowSelectingCallBack(a,t,e,r,!1,l,"cancel")(a);else{!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid?(a={data:r,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:n,previousRow:i.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},a=this.addMovableArgs(a,s)):a={data:r,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowIndex:this.prevRowIndex,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},this.parent.trigger("rowSelecting",this.fDataUpdate(a),this.rowSelectingCallBack(a,t,e,r,!1,l,"cancel"))}}}},t.prototype.rowSelectingCallBack=function(e,t,r,i,n,s,o){var a=this;return function(e){sf.base.isNullOrUndefined(e)||!0!==e[o]?(a.index=r,a.toggle=t,a.data=i,a.removed=n,s&&a.selectionSettings.persistSelection&&"ResetOnRowClick"!==a.selectionSettings.checkboxMode?(a.clearSelectedRow(r),n=!0,a.removed=n,a.selectRowCallBack()):!s&&a.selectionSettings.persistSelection&&a.selectRowCallBack(),a.selectionSettings.persistSelection&&"ResetOnRowClick"!==a.selectionSettings.checkboxMode||(a.selectRowCheck=!0,a.clearRow())):a.disableInteracted()}},t.prototype.selectRowCallBack=function(){var e,t=this.parent,r=this.index,i=this.toggle,n=this.data,s=this.removed,o=t.getRowByIndex(r),a=this.getSelectedMovableRow(r);if(i||s||(this.selectedRowIndexes.indexOf(r)<=-1&&(this.updateRowSelection(o,r),t.getFrozenColumns()&&this.updateRowSelection(a,r)),this.selectRowIndex(r)),!i){!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid?(e={data:n,rowIndex:r,row:o,previousRow:t.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked},e=this.addMovableArgs(e,a)):e={data:n,rowIndex:r,row:o,previousRow:t.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked},this.onActionComplete(e,"rowSelected")}if(sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.enableVirtualization){this.parent.interopAdaptor.invokeMethodAsync("MaintainSelection",!0,"normal",[r])}this.isInteracted=!1,this.updateRowProps(r)},t.prototype.addMovableArgs=function(e,t){if(this.parent.getFrozenColumns()){var r={mRow:t,previousMovRow:this.parent.getMovableRows()[this.prevRowIndex]};e=Je({},e,r)}return e},t.prototype.selectRowsByRange=function(e,t){this.selectRows(this.getCollectionFromIndexes(e,t)),this.selectRowIndex(t)},t.prototype.selectRows=function(e){var t=this,r=this.parent,i=this.isSingleSel()?e[e.length-1]:e[0],n=r.getRowByIndex(i),s=this.getSelectedMovableRow(i),o=r.getFrozenColumns(),a=this.getCurrentBatchRecordChanges()[e[0]];if(this.isRowType()&&!this.isEditing()){var l;this.activeTarget(),!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid?(l={cancel:!1,rowIndexes:e,row:n,rowIndex:i,target:this.actualTarget,prevRow:r.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:a,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},l=this.addMovableArgs(l,s)):l={cancel:!1,rowIndexes:e,rowIndex:i,previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:a,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},this.parent.trigger("rowSelecting",this.fDataUpdate(l),(function(l){if(sf.base.isNullOrUndefined(l)||!0!==l.cancel){if(t.clearRow(),t.selectRowIndex(e.slice(-1)[0]),t.isSingleSel())t.updateRowSelection(r.getRowByIndex(i),i),o&&t.updateRowSelection(r.getMovableRowByIndex(i),i),t.updateRowProps(i);else for(var d=0,c=e;d<c.length;d++){var h=c[d];t.updateRowSelection(r.getRowByIndex(h),h),o&&t.updateRowSelection(r.getMovableRowByIndex(h),h),t.updateRowProps(i)}!sf.base.isBlazor()||t.parent.isJsComponent||t.parent.isHybrid?(l={rowIndexes:e,row:n,rowIndex:i,target:t.actualTarget,prevRow:r.getRows()[t.prevRowIndex],previousRowIndex:t.prevRowIndex,data:sf.base.isBlazor()?a:t.getSelectedRecords(),isInteracted:t.isInteracted,isHeaderCheckboxClicked:t.isHeaderCheckboxClicked},l=t.addMovableArgs(l,s)):l={rowIndexes:e,rowIndex:i,previousRowIndex:t.prevRowIndex,row:n,prevRow:r.getRows()[t.prevRowIndex],data:sf.base.isBlazor()?a:t.getSelectedRecords(),isInteracted:t.isInteracted,isHeaderCheckboxClicked:t.isHeaderCheckboxClicked},t.isRowSelected&&t.onActionComplete(l,"rowSelected")}else t.disableInteracted()}))}},t.prototype.addRowsToSelection=function(e){var t=this,r=this.parent,i=this.target,s=this.isSingleSel()?r.getRowByIndex(e[e.length-1]):r.getRowByIndex(e[0]),o=this.isSingleSel()?this.getSelectedMovableRow(e[e.length-1]):this.getSelectedMovableRow(e[0]),a=r.getFrozenColumns();if(this.isRowType()&&!this.isEditing())for(var l,d=this.parent.getColumns().filter((function(e){return"checkbox"===e.type})),c=function(e){var n=h.getRowObj(e),c=h.selectedRowIndexes.indexOf(e)>-1;if(h.selectRowIndex(e),c&&(d.length||h.selectionSettings.enableToggle||h.isMultiCtrlRequest)){if(h.rowDeselect("rowDeselecting",[e],[n.data],[s],[n.foreignKeyData],i),h.isCancelDeSelect)return{value:void 0};h.selectedRowIndexes.splice(h.selectedRowIndexes.indexOf(e),1),h.selectedRecords.splice(h.selectedRecords.indexOf(s),1),s.removeAttribute("aria-selected"),h.addRemoveClassesForRow(s,!1,null,"e-selectionbackground","e-active"),o&&(h.selectedRecords.splice(h.selectedRecords.indexOf(o),1),o.removeAttribute("aria-selected"),h.addRemoveClassesForRow(o,!1,null,"e-selectionbackground","e-active")),h.rowDeselect("rowDeselected",[e],[n.data],[s],[n.foreignKeyData],i,[o]),h.isInteracted=!1}else{var p="isHybrid";h.activeTarget(),!sf.base.isBlazor()||h.parent.isJsComponent||h.parent[p]?(l={cancel:!1,data:n.data,rowIndex:e,row:s,target:h.actualTarget,prevRow:r.getRows()[h.prevRowIndex],previousRowIndex:h.prevRowIndex,isCtrlPressed:h.isMultiCtrlRequest,isShiftPressed:h.isMultiShiftRequest,foreignKeyData:n.foreignKeyData,isInteracted:h.isInteracted,isHeaderCheckboxClicked:h.isHeaderCheckboxClicked},l=h.addMovableArgs(l,o)):l={cancel:!1,data:n.data,rowIndex:e,previousRowIndex:h.prevRowIndex,isCtrlPressed:h.isMultiCtrlRequest,isShiftPressed:h.isMultiShiftRequest,foreignKeyData:n.foreignKeyData,isInteracted:h.isInteracted,isHeaderCheckboxClicked:h.isHeaderCheckboxClicked},h.parent.trigger("rowSelecting",h.fDataUpdate(l),(function(r){sf.base.isNullOrUndefined(r)||!0!==r.cancel?(t.isSingleSel()&&t.clearRow(),t.updateRowSelection(s,e),a&&t.updateRowSelection(o,e)):t.disableInteracted()}))}if(!c){p="isHybrid";!sf.base.isBlazor()||h.parent.isJsComponent||h.parent[p]?(l={data:n.data,rowIndex:e,row:s,target:h.actualTarget,prevRow:r.getRows()[h.prevRowIndex],previousRowIndex:h.prevRowIndex,foreignKeyData:n.foreignKeyData,isInteracted:h.isInteracted,isHeaderCheckboxClicked:h.isHeaderCheckboxClicked},l=h.addMovableArgs(l,o)):l={data:n.data,rowIndex:e,previousRowIndex:h.prevRowIndex,row:s,prevRow:r.getRows()[h.prevRowIndex],foreignKeyData:n.foreignKeyData,isInteracted:h.isInteracted,isHeaderCheckboxClicked:h.isHeaderCheckboxClicked},h.onActionComplete(l,"rowSelected")}if(h.isInteracted=!1,h.updateRowProps(e),h.isSingleSel())return"break"},h=this,p=0,u=e;p<u.length;p++){var f=c(u[p]);if("object"===n()(f))return f.value;if("break"===f)break}},t.prototype.getCollectionFromIndexes=function(e,t){for(var r=[],i=e<=t?{i:e,max:t}:{i:t,max:e},n=i.i,s=i.max;n<=s;n++)r.push(n);return e>t&&r.reverse(),r},t.prototype.clearRow=function(){this.clearRowCheck=!0,this.clearRowSelection()},t.prototype.clearRowCallBack=function(){this.isCancelDeSelect&&"Check"!==this.parent.checkAllRows||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},t.prototype.clearSelectedRow=function(e){if(this.target){var t=this.target.parentElement;this.disableUI||(t.removeAttribute("aria-selected"),this.addRemoveClassesForRow(t,!1,!0,"e-selectionbackground","e-active")),this.updatePersistCollection(t,!1),this.updateCheckBoxes(t),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(e),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(e)),1)}},t.prototype.updateRowProps=function(e){this.prevRowIndex=e,this.isRowSelected=this.selectedRowIndexes.length&&!0},t.prototype.updatePersistCollection=function(e,t){var r=this;if(this.parent.isPersistSelection&&!sf.base.isNullOrUndefined(e)){var i=this.getRowObj(e),n=i.data?i.data[this.primaryKey]:null;if(null===n)return;i.isSelected=t,t?(this.selectedRowState[n]=t,this.persistSelectedData.some((function(e){return e[r.primaryKey]===n}))||this.persistSelectedData.push(i.data)):this.updatePersistDelete(n)}},t.prototype.updatePersistDelete=function(e){var t,r=this;delete this.selectedRowState[e],this.persistSelectedData.some((function(i,n){return t=n,i[r.primaryKey]===e}))&&this.persistSelectedData.splice(t,1)},t.prototype.updateCheckBoxes=function(e,t,r){if(!sf.base.isNullOrUndefined(e)){var i=e.querySelector(".e-checkselect");sf.base.isNullOrUndefined(i)||(gr(i.nextElementSibling,t),(sf.base.isNullOrUndefined(this.checkedTarget)||!sf.base.isNullOrUndefined(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(r))}},t.prototype.updateRowSelection=function(e,t){if(e){this.selectedRowIndexes.push(t);var r=this.selectedRowIndexes.length;if(this.parent.getFrozenColumns()&&r>1&&this.selectedRowIndexes[r-2]===this.selectedRowIndexes[r-1]&&this.selectedRowIndexes.pop(),this.selectedRecords.push(e),e.setAttribute("aria-selected","true"),this.updatePersistCollection(e,!0),this.updateCheckBoxes(e,!0),this.addRemoveClassesForRow(e,!0,null,"e-selectionbackground","e-active"),!this.preventFocus){var i=this.focus.getPrevIndexes().cellIndex?e.cells[this.focus.getPrevIndexes().cellIndex]:e.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(!i)return;this.focus.onClick({target:i},!0)}}},t.prototype.clearSelection=function(){if(!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!sf.base.isNullOrUndefined(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){var e=this.parent.element.querySelector(".e-gridpopup").querySelector("span");e.classList.contains("e-rowselect")&&e.classList.remove("e-spanclicked"),this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.prevRowIndex=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1}},t.prototype.clearRowSelection=function(){var e=this;if(this.isRowSelected){for(var t=this.parent,r=this.parent.getDataRows(),i=[],n=[],s=[],o=[],a=t.getFrozenColumns(),l=[],d=this.target,c=(this.parent.getCurrentViewRecords(),0),h=this.selectedRowIndexes.length;c<h;c++){var p="Batch"===this.parent.editSettings.mode?this.parent.getRows()[this.selectedRowIndexes[c]]:this.parent.getDataRows()[this.selectedRowIndexes[c]],u=this.getRowObj(p);u&&(i.push(u.data),n.push(p),o.push(this.selectedRowIndexes[c]),l.push(u.foreignKeyData)),a&&s.push(t.getMovableRows()[this.selectedRowIndexes[c]])}this.selectionSettings.persistSelection&&(this.isInteracted=!!this.checkSelectAllClicked),this.rowDeselect("rowDeselecting",o,i,n,l,d,s,(function(){if(e.isCancelDeSelect&&(e.isInteracted||e.checkSelectAllClicked)){if(e.parent.isPersistSelection)if("Intermediate"===e.getCheckAllStatus(e.parent.element.querySelector(".e-checkselectall")))for(var t=0;t<e.selectedRecords.length;t++)e.updatePersistCollection(e.selectedRecords[t],!0);else e.parent.checkAllRows="Check",e.updatePersistSelectedData(!0);e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1))}else{for(var a=[].slice.call(r.filter((function(e){return e.hasAttribute("aria-selected")}))),c=0;c<a.length;c++)e.disableUI&&!sf.base.isBlazor()||(a[c].removeAttribute("aria-selected"),e.addRemoveClassesForRow(a[c],!1,!0,"e-selectionbackground","e-active")),e.updatePersistCollection(a[c],!1),e.updateCheckBoxes(a[c]);sf.base.isBlazor()&&e.parent.isServerRendered&&e.parent.enableVirtualization&&e.getRenderer().setSelection(null,!1,!0);t=0;for(var h=e.selectedRowIndexes.length;t<h;t++){var p=e.getSelectedMovableRow(e.selectedRowIndexes[t]);p&&(e.disableUI&&!sf.base.isBlazor()||(p.removeAttribute("aria-selected"),e.addRemoveClassesForRow(p,!1,!0,"e-selectionbackground","e-active")),e.updatePersistCollection(p,!1))}e.selectedRowIndexes=[],e.selectedRecords=[],e.isRowSelected=!1,e.selectRowIndex(-1),e.rowDeselect("rowDeselected",o,i,n,l,d,s),e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1))}}))}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},t.prototype.rowDeselect=function(e,t,r,i,n,s,o,a){var l=this;if(this.selectionSettings.persistSelection&&this.isInteracted||!this.selectionSettings.persistSelection){var d={rowIndex:t,data:this.selectionSettings.persistSelection&&"Uncheck"===this.parent.checkAllRows?this.persistSelectedData:r,foreignKeyData:n,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};if(!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid){d.row=i,d.target=this.actualTarget,this.actualTarget&&!sf.base.isNullOrUndefined(sf.base.closest(this.actualTarget,"thead"))&&(d.rowIndex=t[0],d.rowIndexes=t)}else{d.rowIndex=d.rowIndex[d.rowIndex.length-1],d.data=d.data[d.data.length-1]}this.parent.trigger(e,sf.base.isBlazor()&&!this.parent.isJsComponent||0===this.parent.getFrozenColumns()?d:Je({},d,{mRow:o}),(function(e){l.isCancelDeSelect=e.cancel,l.isCancelDeSelect&&(l.isInteracted||l.checkSelectAllClicked)||(l.updatePersistCollection(i[0],!1),l.updateCheckBoxes(i[0],void 0,t[0])),void 0!==a&&a()}))}else this.selectionSettings.persistSelection&&!this.isInteracted&&void 0!==a&&a()},t.prototype.getRowObj=function(e){return void 0===e&&(e=this.currentIndex),sf.base.isNullOrUndefined(e)?{}:("number"==typeof e&&(e=this.parent.getRowByIndex(e)),e&&this.parent.getRowObjectFromUID(e.getAttribute("data-uid"))||{})},t.prototype.getSelectedMovableCell=function(e){var t=this.parent,r=t.getFrozenColumns();return r&&e.cellIndex>=r?t.getMovableCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex)):null},t.prototype.selectCell=function(e,t){if(this.isCellType()){var r,i=this.parent,n=this.getSelectedMovableCell(e);n||(n=i.getCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex))),this.currentIndex=e.rowIndex;var s=this.getCurrentBatchRecordChanges()[this.currentIndex];if(this.isCellType()&&n&&!this.isEditing()){var o=n.classList.contains("e-cellselectionbackground");if(t=t?!sf.base.isUndefined(this.prevCIdxs)&&e.rowIndex===this.prevCIdxs.rowIndex&&e.cellIndex===this.prevCIdxs.cellIndex&&o:t)this.successCallBack(r,t,e,n,s)(r);else{if(r={data:s,cellIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1},!sf.base.isBlazor()||this.parent.isJsComponent){r.currentCell=n;r.previousRowCellIndex=this.prevECIdxs}this.parent.trigger("cellSelecting",this.fDataUpdate(r),this.successCallBack(r,t,e,n,s)),this.cellselected=!0}}}},t.prototype.successCallBack=function(e,t,r,i,n){var s=this;return function(e){if((sf.base.isNullOrUndefined(e)||!0!==e.cancel)&&(t||(e.currentCell=e.currentCell?e.currentCell:i),s.clearCell(),t||s.updateCellSelection(i,r.rowIndex,r.cellIndex),!t)){var o=void 0;if(!sf.base.isBlazor()||s.parent.isJsComponent||s.parent.isHybrid){(o={data:n,cellIndex:r,currentCell:i,selectedRowCellIndex:s.selectedRowCellIndexes,previousRowCell:s.prevECIdxs?s.getCellIndex(s.prevECIdxs.rowIndex,s.prevECIdxs.cellIndex):void 0}).previousRowCellIndex=s.prevECIdxs}else o={data:n,cellIndex:r,selectedRowCellIndex:s.selectedRowCellIndexes};s.updateCellProps(r,r),s.onActionComplete(o,"cellSelected")}}},t.prototype.getCellIndex=function(e,t){return this.parent.getFrozenColumns()&&t>=this.parent.getFrozenColumns()?this.parent.getMovableCellFromIndex(e,t):this.parent.getCellFromIndex(e,t)},t.prototype.selectCellsByRange=function(e,t){var r=this;if(this.isCellType()){var i,n,s=this.parent,o=this.getSelectedMovableCell(e),a=s.getFrozenColumns();o||(o=s.getCellFromIndex(e.rowIndex,e.cellIndex));var l,d=e,c=t=t||e;this.currentIndex=e.rowIndex;var h=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var p={data:h,cellIndex:e,currentCell:o,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};if(!sf.base.isBlazor()){p.previousRowCellIndex=this.prevECIdxs}this.parent.trigger("cellSelecting",this.fDataUpdate(p),(function(p){if(sf.base.isNullOrUndefined(p)||!0!==p.cancel){if(r.clearCell(),e.rowIndex>t.rowIndex){var u=e;e=t,t=u}for(var f=e.rowIndex;f<=t.rowIndex;f++){r.selectionSettings.cellSelectionMode.indexOf("Box")<0?(i=f===e.rowIndex?e.cellIndex:0,n=f===t.rowIndex?t.cellIndex:r.getLastColIndex(f)):(i=e.cellIndex,n=t.cellIndex),l=[];for(var g=i<n?i:n,m=i>n?i:n;g<=m;g++)(o=a?g<a?s.getCellFromIndex(f,g):s.getMovableCellFromIndex(f,g):s.getCellFromIndex(f,g))&&(l.push(g),r.updateCellSelection(o),r.addAttribute(o));r.selectedRowCellIndexes.push({rowIndex:f,cellIndexes:l})}var y;if(!sf.base.isBlazor()||r.parent.isJsComponent||r.parent.isHybrid){(y={data:h,cellIndex:c,currentCell:s.getCellFromIndex(c.rowIndex,c.cellIndex),selectedRowCellIndex:r.selectedRowCellIndexes,previousRowCell:r.prevECIdxs?r.getCellIndex(r.prevECIdxs.rowIndex,r.prevECIdxs.cellIndex):void 0}).previousRowCellIndex=r.prevECIdxs}else y={data:h,cellIndex:c,selectedRowCellIndex:r.selectedRowCellIndexes};r.isDragged||(r.onActionComplete(y,"cellSelected"),r.cellselected=!0),r.updateCellProps(d,c)}}))}}},t.prototype.selectCells=function(e){if(this.isCellType()){var t=this.parent,r=this.getSelectedMovableCell(e[0]),i=t.getFrozenColumns();r||(r=t.getCellFromIndex(e[0].rowIndex,e[0].cellIndexes[0])),this.currentIndex=e[0].rowIndex;var n=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var s,o;if(!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid)(s={data:n,cellIndex:e[0].cellIndexes[0],currentCell:r,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0})["previousRowCellIndex"]=this.prevECIdxs;else s={data:n,cellIndex:e[0].cellIndexes[0],isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};this.onActionBegin(s,"cellSelecting");for(var a=0,l=e.length;a<l;a++)for(var d=0,c=e[a].cellIndexes.length;d<c;d++)(r=i?e[a].cellIndexes[d]<i?t.getCellFromIndex(e[a].rowIndex,e[a].cellIndexes[d]):t.getMovableCellFromIndex(e[a].rowIndex,e[a].cellIndexes[d]):t.getCellFromIndex(e[a].rowIndex,e[a].cellIndexes[d]))&&(this.updateCellSelection(r),this.addAttribute(r),this.addRowCellIndex({rowIndex:e[a].rowIndex,cellIndex:e[a].cellIndexes[d]}));if(this.updateCellProps({rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]},{rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]}),!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid)(o={data:n,cellIndex:e[0].cellIndexes[0],currentCell:r,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0})["previousRowCellIndex"]=this.prevECIdxs;else o={data:n,cellIndex:e[0].cellIndexes[0],selectedRowCellIndex:this.selectedRowCellIndexes};this.onActionComplete(o,"cellSelected")}}},t.prototype.addCellsToSelection=function(e){if(this.isCellType()){var t,r,i=this.parent,n=i.getFrozenColumns();this.currentIndex=e[0].rowIndex;var s=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var o;this.hideAutoFill(),o=n&&e[0].cellIndex>=n?i.getMovableRowsObject()[e[0].rowIndex]:this.getRowObj(e[0].rowIndex);for(var a=[],l=0,d=e;l<d.length;l++){for(var c=d[l],h=0,p=this.selectedRowCellIndexes.length;h<p;h++)if(this.selectedRowCellIndexes[h].rowIndex===c.rowIndex){r=h;break}(t=this.getSelectedMovableCell(c))||(t=i.getCellFromIndex(c.rowIndex,this.getColIndex(c.rowIndex,c.cellIndex))),a.push(o.cells[n&&e[0].cellIndex>=n?c.cellIndex-n:c.cellIndex].foreignKeyData);var u=void 0;if(!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid)(u={cancel:!1,data:s,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,currentCell:t,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?i.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0})["previousRowCellIndex"]=this.prevECIdxs;else u={cancel:!1,data:s,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,isCtrlPressed:this.isMultiCtrlRequest};var f=r>-1;if(f){var g=this.selectedRowCellIndexes[r].cellIndexes;g.indexOf(c.cellIndex)>-1?(this.cellDeselect("cellDeselecting",[{rowIndex:c.rowIndex,cellIndexes:[c.cellIndex]}],s,[t],a),g.splice(g.indexOf(c.cellIndex),1),0===g.length&&this.selectedRowCellIndexes.splice(r,1),t.classList.remove("e-cellselectionbackground"),t.removeAttribute("aria-selected"),this.cellDeselect("cellDeselected",[{rowIndex:c.rowIndex,cellIndexes:[c.cellIndex]}],s,[t],a)):(f=!1,this.onActionBegin(u,"cellSelecting"),this.addRowCellIndex({rowIndex:c.rowIndex,cellIndex:c.cellIndex}),this.updateCellSelection(t),this.addAttribute(t))}else{if(this.onActionBegin(u,"cellSelecting"),!sf.base.isNullOrUndefined(u)&&!0===u.cancel)return;this.updateCellSelection(t,c.rowIndex,c.cellIndex)}if(!f){var m=void 0;if(!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid)(m={data:s,cellIndex:e[0],currentCell:t,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes})["previousRowCellIndex"]=this.prevECIdxs;else m={data:s,cellIndex:e[0],selectedRowCellIndex:this.selectedRowCellIndexes};this.onActionComplete(m,"cellSelected"),this.cellselected=!0}this.updateCellProps(c,c)}}}},t.prototype.getColIndex=function(e,t){var r,i=this.parent.getFrozenColumns();if(i&&t>=i&&(r=this.parent.getMovableDataRows()[e]&&this.parent.getMovableDataRows()[e].querySelectorAll("td.e-rowcell")),r||(r=this.parent.getDataRows()[e]&&this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell")),r)for(var n=0;n<r.length;n++){if(parseInt(r[n].getAttribute("aria-colindex"),10)===t)return i&&t>=i&&(n+=i),n}return-1},t.prototype.getLastColIndex=function(e){var t=this.parent.getFrozenColumns()?this.parent.getMovableDataRows()[e].querySelectorAll("td.e-rowcell"):this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell");return parseInt(t[t.length-1].getAttribute("aria-colindex"),10)},t.prototype.clearCell=function(){this.clearCellSelection()},t.prototype.cellDeselect=function(e,t,r,i,n){i[0]&&i[0].classList.contains("e-gridchkbox")&&this.updateCheckBoxes(sf.base.closest(i[0],"tr"));var s={cells:i,data:r,cellIndexes:t,foreignKeyData:n,cancel:!1};this.parent.trigger(e,s),this.isPreventCellSelect=s.cancel},t.prototype.updateCellSelection=function(e,t,r){sf.base.isNullOrUndefined(t)||this.addRowCellIndex({rowIndex:t,cellIndex:r}),e.classList.add("e-cellselectionbackground"),e.classList.contains("e-gridchkbox")&&this.updateCheckBoxes(sf.base.closest(e,"tr"),!0),this.addAttribute(e)},t.prototype.addAttribute=function(e){this.target=e,sf.base.isNullOrUndefined(e)||(e.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:e},!0))},t.prototype.updateCellProps=function(e,t){this.prevCIdxs=e,this.prevECIdxs=t,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},t.prototype.addRowCellIndex=function(e){for(var t,r,i=0,n=this.selectedRowCellIndexes.length;i<n;i++)if(this.selectedRowCellIndexes[i].rowIndex===e.rowIndex){t=!0,r=i;break}t?this.selectedRowCellIndexes[r].cellIndexes.indexOf(e.cellIndex)<0&&this.selectedRowCellIndexes[r].cellIndexes.push(e.cellIndex):this.selectedRowCellIndexes.push({rowIndex:e.rowIndex,cellIndexes:[e.cellIndex]})},t.prototype.clearCellSelection=function(){if(this.isCellSelected){var e=this.parent,t=this.getSelectedCellsElement(),r=this.selectedRowCellIndexes,i=[],n=[],s=[],o=this.getCurrentBatchRecordChanges(),a=e.getFrozenColumns();this.hideAutoFill();for(var l=0,d=r.length;l<d;l++){i.push(o[r[l].rowIndex]);for(var c=this.getRowObj(r[l].rowIndex),h=0,p=r[l].cellIndexes.length;h<p;h++)a?r[l].cellIndexes[h]<a?n.push(e.getCellFromIndex(r[l].rowIndex,r[l].cellIndexes[h])):n.push(e.getMovableCellFromIndex(r[l].rowIndex,r[l].cellIndexes[h])):(c.cells&&s.push(c.cells[r[l].cellIndexes[h]].foreignKeyData),n.push(e.getCellFromIndex(r[l].rowIndex,r[l].cellIndexes[h])))}if(this.cellDeselect("cellDeselecting",r,i,n,s),!0===this.isPreventCellSelect)return;for(l=0,d=t.length;l<d;l++)t[l].classList.remove("e-cellselectionbackground"),t[l].removeAttribute("aria-selected");this.bdrBottom&&this.hideBorders(),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect("cellDeselected",r,i,n,s)}},t.prototype.getSelectedCellsElement=function(){var e,t=this.parent,r=t.getDataRows();t.getFrozenColumns()&&(e=t.getMovableDataRows(),r=t.addMovableRows(r,e));for(var i=[],n=0,s=r.length;n<s;n++)i=i.concat([].slice.call(r[n].querySelectorAll(".e-cellselectionbackground")));return i},t.prototype.mouseMoveHandler=function(e){e.preventDefault();var t,r=this.parent.element.getBoundingClientRect(),i=this.x,n=this.y,s=Kt(e),o=s.x-r.left,a=s.y-r.top,l=sf.base.closest(e.target,"tr");if(this.isDragged=!0,this.isCellDrag||(l||(l=sf.base.closest(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr")),i>o&&(t=o,o=i,i=t),n>a&&(t=a,a=n,n=t),this.element.style.left=i+"px",this.element.style.top=n+"px",this.element.style.width=o-i+"px",this.element.style.height=a-n+"px"),l&&!e.ctrlKey&&!e.shiftKey){var d=parseInt(l.getAttribute("aria-rowindex"),10);if(this.isCellDrag){var c=Ut(e.target,"e-rowcell");c&&(this.startAFCell=this.startCell,this.endAFCell=Ut(e.target,"e-rowcell"),this.selectLikeExcel(e,d,parseInt(c.getAttribute("aria-colindex"),10)))}else this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,d)}},t.prototype.selectLikeExcel=function(e,t,r){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(e)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:r}),this.drawBorders())},t.prototype.drawBorders=function(){"BoxWithBorder"===this.selectionSettings.cellSelectionMode&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.bdrBottom||this.createBorders(),this.positionBorders()):this.hideBorders()},t.prototype.isLastCell=function(e){var t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]===e},t.prototype.isLastRow=function(e){var t=[].slice.call(sf.base.closest(e,"tbody").querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[t.length-1]},t.prototype.positionBorders=function(){if(this.updateStartEndCells(),this.startCell&&this.bdrLeft&&this.selectedRowCellIndexes.length){this.showBorders();var e=this.startCell.getBoundingClientRect(),t=this.endCell.getBoundingClientRect(),r=this.isLastCell(this.endCell)?2:0,i=this.isLastRow(this.endCell)?2:0,n=this.startCell.offsetParent.getBoundingClientRect();this.bdrLeft.style.left=e.left-n.left+"px",this.bdrLeft.style.top=e.top-n.top+"px",this.bdrLeft.style.height=t.top-e.top>0?t.top-n.top+t.height+1-(e.top-n.top)-i+"px":t.height+"px",this.bdrRight.style.left=t.left-n.left+t.width-r+"px",this.bdrRight.style.top=this.bdrLeft.style.top,this.bdrRight.style.height=parseInt(this.bdrLeft.style.height,10)-i+"px",this.bdrTop.style.left=this.bdrLeft.style.left,this.bdrTop.style.top=this.bdrRight.style.top,this.bdrTop.style.width=parseInt(this.bdrRight.style.left,10)-parseInt(this.bdrLeft.style.left,10)+1+"px",this.bdrBottom.style.left=this.bdrLeft.style.left,this.bdrBottom.style.top=parseInt(this.bdrLeft.style.top,10)+parseInt(this.bdrLeft.style.height,10)-i+"px",this.bdrBottom.style.width=this.bdrTop.style.width}},t.prototype.createBorders=function(){this.bdrLeft||(this.bdrLeft=this.parent.getContentTable().parentElement.appendChild(sf.base.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_bdrleft",styles:"width: 2px;"})),this.bdrRight=this.parent.getContentTable().parentElement.appendChild(sf.base.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_bdrright",styles:"width: 2px;"})),this.bdrBottom=this.parent.getContentTable().parentElement.appendChild(sf.base.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_bdrbottom",styles:"height: 2px;"})),this.bdrTop=this.parent.getContentTable().parentElement.appendChild(sf.base.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_bdrtop",styles:"height: 2px;"})))},t.prototype.showBorders=function(){this.bdrLeft&&(this.bdrLeft.style.display="",this.bdrRight.style.display="",this.bdrBottom.style.display="",this.bdrTop.style.display="")},t.prototype.hideBorders=function(){this.bdrLeft&&(this.bdrLeft.style.display="none",this.bdrRight.style.display="none",this.bdrBottom.style.display="none",this.bdrTop.style.display="none")},t.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()},t.prototype.positionAFBorders=function(){if(this.startCell&&this.bdrAFLeft){this.showBorders();var e=this.startAFCell.getBoundingClientRect(),t=this.endAFCell.getBoundingClientRect(),r=this.isLastCell(this.endAFCell)?2:0,i=this.isLastRow(this.endAFCell)?2:0,n=this.startAFCell.offsetParent.getBoundingClientRect();this.bdrAFLeft.style.left=e.left-n.left+"px",this.bdrAFLeft.style.top=e.top-n.top+"px",this.bdrAFLeft.style.height=t.top-e.top>0?t.top-n.top+t.height+1-(e.top-n.top)-i+"px":t.height+"px",this.bdrAFRight.style.left=t.left-n.left+t.width-r+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)-i+"px",this.bdrAFTop.style.left=this.bdrAFLeft.style.left,this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)+1+"px",this.bdrAFBottom.style.left=this.bdrAFLeft.style.left,this.bdrAFBottom.style.top=parseInt(this.bdrAFLeft.style.top,10)+parseInt(this.bdrAFLeft.style.height,10)-i+"px",this.bdrAFBottom.style.width=this.bdrAFTop.style.width}},t.prototype.createAFBorders=function(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.getContentTable().parentElement.appendChild(sf.base.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.getContentTable().parentElement.appendChild(sf.base.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.getContentTable().parentElement.appendChild(sf.base.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.getContentTable().parentElement.appendChild(sf.base.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))},t.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},t.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},t.prototype.updateValue=function(e,t,r){var i=this.createBeforeAutoFill(e,t,r);if(!i.cancel){var n=this.parent.getColumnByIndex(t);this.parent.editModule&&r&&("number"===n.type?this.parent.editModule.updateCell(e,n.field,parseInt(i.value,10)):this.parent.editModule.updateCell(e,n.field,i.value))}},t.prototype.createBeforeAutoFill=function(e,t,r){var i={column:this.parent.getColumnByIndex(t),value:r.innerText};return this.parent.trigger("beforeAutoFill",i),i},t.prototype.selectLikeAutoFill=function(e,t){var r=parseInt(Ut(this.startAFCell,"e-row").getAttribute("aria-rowindex"),10),i=parseInt(this.startAFCell.getAttribute("aria-colindex"),10),n=parseInt(Ut(this.endAFCell,"e-row").getAttribute("aria-rowindex"),10),s=parseInt(this.endAFCell.getAttribute("aria-colindex"),10),o=this.selectedRowCellIndexes.length-1,a=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!Ut(e.target,"e-rowcell"):this.startAFCell=this.parent.getCellFromIndex(r,i),this.endAFCell=this.parent.getCellFromIndex(r+o,i+a),this.drawAFBorders();break;case this.autoFillRLselection&&i+a<s&&s-i-a+1>n-r-o&&s-i-a+1>r-n:if(this.endAFCell=this.parent.getCellFromIndex(r+o,s),n=parseInt(Ut(this.endAFCell,"e-row").getAttribute("aria-rowindex"),10),s=parseInt(this.endAFCell.getAttribute("aria-colindex"),10),t){for(var l=parseInt(this.endCell.getAttribute("aria-colindex"),10),d=r;d<=n;d++)for(var c=[].slice.call(this.parent.getDataRows()[d].querySelectorAll(".e-cellselectionbackground")),h=0,p=l+1;p<=s;p++)h>a&&(h=0),this.updateValue(d,p,c[h]),h++;this.selectCellsByRange({rowIndex:r,cellIndex:this.startCellIndex},{rowIndex:n,cellIndex:s})}else this.drawAFBorders();break;case this.autoFillRLselection&&i>s&&i-s+1>n-r-o&&i-s+1>r-n:if(this.startAFCell=this.parent.getCellFromIndex(r,s),this.endAFCell=this.endCell,t){for(d=r;d<=r+o;d++){(c=[].slice.call(this.parent.getDataRows()[d].querySelectorAll(".e-cellselectionbackground"))).reverse();for(h=0,p=this.startCellIndex-1;p>=s;p--)h>a&&(h=0),this.updateValue(d,p,c[h]),h++}this.selectCellsByRange({rowIndex:r,cellIndex:s},{rowIndex:r+o,cellIndex:this.startCellIndex+a})}else this.drawAFBorders();break;case r>n:if(this.startAFCell=this.parent.getCellFromIndex(n,i),this.endAFCell=this.endCell,t){var u=f=parseInt(this.endCell.parentElement.getAttribute("aria-rowindex"),10);for(d=r-1;d>=n;d--){u===this.startIndex-1&&(u=f);c=[].slice.call(this.parent.getDataRows()[u].querySelectorAll(".e-cellselectionbackground")),h=0;u--;for(p=this.startCellIndex;p<=this.startCellIndex+a;p++)this.updateValue(d,p,c[h]),h++}this.selectCellsByRange({rowIndex:n,cellIndex:i+a},{rowIndex:r+o,cellIndex:i})}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(n,i+a),t){var f=parseInt(this.endCell.parentElement.getAttribute("aria-rowindex"),10);for(u=this.startIndex,d=f+1;d<=n;d++){u===f+1&&(u=this.startIndex);c=[].slice.call(this.parent.getDataRows()[u].querySelectorAll(".e-cellselectionbackground"));u++;h=0;for(var g=this.startCellIndex;g<=this.startCellIndex+a;g++)this.updateValue(d,g,c[h]),h++}this.selectCellsByRange({rowIndex:f-o,cellIndex:i},{rowIndex:n,cellIndex:i+a})}else this.drawAFBorders()}},t.prototype.mouseUpHandler=function(e){if(document.body.classList.remove("e-disableuserselect"),this.element&&sf.base.remove(this.element),this.isDragged&&1===this.selectedRowCellIndexes.length&&1===this.selectedRowCellIndexes[0].cellIndexes.length?this.mUPTarget=Ut(e.target,"e-rowcell"):this.mUPTarget=null,this.isDragged){var t=e.target,r=parseInt(t.parentElement.getAttribute("aria-rowindex"),10),i=parseInt(t.getAttribute("aria-colindex"),10);this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:r,cellIndex:i})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){this.startAFCell=this.startCell;var n=Ut(e.target,"e-rowcell");this.endAFCell=n||this.endAFCell,this.updateStartCellsIndex(),this.selectLikeAutoFill(e,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.isAutoFillSel=!1}sf.base.EventHandler.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),sf.base.EventHandler.remove(document.body,"mouseup",this.mouseUpHandler)},t.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},t.prototype.updateAutoFillPosition=function(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){var e=[].slice.call(this.parent.getDataRows()[this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex].querySelectorAll(".e-cellselectionbackground"));this.parent.element.querySelector("#"+this.parent.element.id+"_autofill")||(this.autofill=sf.base.createElement("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",this.parent.getContentTable().parentElement.appendChild(this.autofill));var t=e[e.length-1];if(t&&t.offsetParent){var r=t.getBoundingClientRect(),i=t.offsetParent.getBoundingClientRect(),n=this.isLastCell(t)?4:0,s=this.isLastRow(t)?5:0;this.autofill.style.left=r.left-i.left+r.width-4-n+"px",this.autofill.style.top=r.top-i.top+r.height-3-s+"px"}this.autofill.style.display=""}else this.hideAutoFill()},t.prototype.mouseDownHandler=function(e){var t,r=e.target,i=this.parent,n=Ut(r,"e-grid");if(!n||n.id===i.element.id){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),Ut(r,"e-rowcell")&&!e.shiftKey&&!e.ctrlKey){if(i.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,t=!0;else if(i.allowRowDragAndDrop&&!i.isEdit){if(!this.isRowType()||this.isSingleSel()||sf.base.closest(r,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);t=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),i.getContent().appendChild(this.element)}t&&this.enableDrag(e,!0)}this.updateStartEndCells(),(r.classList.contains("e-autofill")||r.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e))}},t.prototype.updateStartEndCells=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute("aria-rowindex"),10),this.startCellIndex=parseInt(Ut(this.startCell,"e-rowcell").getAttribute("aria-colindex"),10))},t.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute("aria-rowindex"),10),this.startCellIndex=parseInt(Ut(this.startCell,"e-rowcell").getAttribute("aria-colindex"),10))},t.prototype.enableDrag=function(e,t){var r=this.parent;if(t){var i=sf.base.closest(e.target,"tr");this.startDIndex=parseInt(i.getAttribute("aria-rowindex"),10),this.startDCellIndex=parseInt(Ut(e.target,"e-rowcell").getAttribute("aria-colindex"),10)}document.body.classList.add("e-disableuserselect");var n=r.element.getBoundingClientRect(),s=Kt(e);this.x=s.x-n.left,this.y=s.y-n.top,sf.base.EventHandler.add(r.getContent(),"mousemove",this.mouseMoveHandler,this),sf.base.EventHandler.add(document.body,"mouseup",this.mouseUpHandler,this)},t.prototype.clearSelAfterRefresh=function(e){var t=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;"virtualscroll"===e.requestType||this.parent.isPersistSelection||t||this.clearSelection()},t.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(m,this.enableAfterRender,this),this.parent.on(u,this.initializeSelection,this),this.parent.on("rowselected",this.onActionComplete,this),this.parent.on("cellselected",this.onActionComplete,this),this.parent.on(v,this.onPropertyChanged,this),this.parent.on("cellfocused",this.onCellFocused,this),this.parent.on("beforeFragAppend",this.clearSelAfterRefresh,this),this.parent.on("column-position-changed",this.columnPositionChanged,this),this.parent.on(g,this.initialEnd,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(d,this.actionBeginFunction),this.parent.addEventListener(c,this.actionCompleteFunction),this.parent.on("rows-removed",this.rowsRemoved,this),this.parent.on(C,this.refreshHeader,this),this.addEventListener_checkbox())},t.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(m,this.enableAfterRender),this.parent.off(u,this.initializeSelection),this.parent.off("rowselected",this.onActionComplete),this.parent.off("cellselected",this.onActionComplete),this.parent.off(v,this.onPropertyChanged),this.parent.off("cellfocused",this.onCellFocused),this.parent.off("beforeFragAppend",this.clearSelAfterRefresh),this.parent.off("column-position-changed",this.columnPositionChanged),this.parent.removeEventListener(d,this.actionBeginFunction),this.parent.removeEventListener(c,this.actionCompleteFunction),this.parent.off("rows-removed",this.rowsRemoved),this.parent.off(C,this.refreshHeader),this.removeEventListener_checkbox())},t.prototype.wireEvents=function(){this.isMacOS=-1!==navigator.userAgent.indexOf("Mac OS"),this.isMacOS&&(sf.base.EventHandler.add(this.parent.element,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(this.parent.element,"keyup",this.keyUpHandler,this))},t.prototype.unWireEvents=function(){this.isMacOS&&(sf.base.EventHandler.remove(this.parent.element,"keydown",this.keyDownHandler),sf.base.EventHandler.remove(this.parent.element,"keyup",this.keyUpHandler))},t.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},t.prototype.refreshHeader=function(){this.setCheckAllState()},t.prototype.rowsRemoved=function(e){for(var t=0;t<e.records.length;t++)delete this.selectedRowState[e.records[t][this.primaryKey]],--this.totalRecordsCount;this.setCheckAllState()},t.prototype.beforeFragAppend=function(e){"virtualscroll"===e.requestType||this.parent.isPersistSelection||this.clearSelection()},t.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},t.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.render()},t.prototype.render=function(e){sf.base.EventHandler.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),this.initPerisistSelection()},t.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){var t=this.parent;sf.base.isNullOrUndefined(e.properties.type)||"Single"!==this.selectionSettings.type||(this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()),sf.base.isNullOrUndefined(e.properties.mode)&&sf.base.isNullOrUndefined(e.properties.cellSelectionMode)||(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.initPerisistSelection(),this.parent.getColumns().filter((function(e){return"checkbox"===e.type})).length&&(t.isCheckBoxSelection=!("ResetOnRowClick"===this.selectionSettings.checkboxMode)),this.drawBorders()}},t.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").querySelectorAll(".e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},t.prototype.initialEnd=function(){this.parent.off(g,this.initialEnd),this.selectRow(this.parent.selectedRowIndex)},t.prototype.checkBoxSelectionChanged=function(){this.parent.off(g,this.checkBoxSelectionChanged);var e=this.parent,t=e.getColumns().filter((function(e){return"checkbox"===e.type}));t.length>0&&(e.isCheckBoxSelection=!0,this.chkField=t[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,sf.base.isNullOrUndefined(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(e.selectionSettings.type="Multiple",e.dataBind()):this.initPerisistSelection()),e.isCheckBoxSelection||this.isPersisted||(this.chkField=null,this.initPerisistSelection())},t.prototype.initPerisistSelection=function(){var e=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(e.isPersistSelection=!1,this.selectedRowState={})},t.prototype.ensureCheckboxFieldSelection=function(){var e=this.parent;if(this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!e.enableVirtualization&&this.chkField&&(e.isPersistSelection&&0===Object.keys(this.selectedRowState).length||!e.isPersistSelection)){var t=this.parent.getDataModule(),r=(new sf.data.Query).where(this.chkField,"equal",!0);r.params||(r.params=this.parent.query.params);var i=t.getData({},r),n=this;this.parent.showSpinner(),i.then((function(e){n.dataSuccess(e.result),n.refreshPersistSelection(),n.parent.hideSpinner()}))}},t.prototype.dataSuccess=function(e){for(var t=0;t<e.length;t++)sf.base.isNullOrUndefined(this.selectedRowState[e[t][this.primaryKey]])&&e[t][this.chkField]&&(this.selectedRowState[e[t][this.primaryKey]]=e[t][this.chkField]);this.persistSelectedData=e},t.prototype.setRowSelection=function(e){if(!this.parent.getDataModule().isRemote()&&!sf.base.isBlazor())if(e)if(this.parent.groupSettings.columns.length)for(var t=0,r=this.getData().records;t<r.length;t++){var i=r[t];this.selectedRowState[i[this.primaryKey]]=!0}else for(var n=0,s=this.getData();n<s.length;n++){i=s[n];this.selectedRowState[i[this.primaryKey]]=!0}else this.selectedRowState={}},t.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},t.prototype.refreshPersistSelection=function(){var e=this.parent.getRows();if(e.length>0&&(this.parent.isPersistSelection||this.chkField)){for(var t=[],r=0;r<e.length;r++){var i=this.getRowObj(e[r]),n=i&&i.data?i.data[this.primaryKey]:null;if(null===n)return;var s=void 0,o=e[r].querySelector(".e-checkselect");this.selectedRowState[n]||"Check"===this.parent.checkAllRows&&this.chkAllCollec.indexOf(n)<0||"Uncheck"===this.parent.checkAllRows&&this.chkAllCollec.indexOf(n)>0||"Intermediate"===this.parent.checkAllRows&&!sf.base.isNullOrUndefined(this.chkField)&&i.data[this.chkField]?(t.push(parseInt(e[r].getAttribute("aria-rowindex"),10)),s=!0):(s=!1,this.checkedTarget!==o&&this.parent.isCheckBoxSelection&&gr(o.nextElementSibling,s)),this.updatePersistCollection(e[r],s)}this.isSingleSel()&&t.length>0?this.selectRow(t[0],!0):this.selectRows(t)}this.parent.isCheckBoxSelection&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()},t.prototype.actionBegin=function(e){if("save"===e.requestType&&this.parent.isPersistSelection){var t=this.parent.element.querySelector(".e-edit-checkselect");if(!sf.base.isNullOrUndefined(t)){var r=sf.base.closest(t,".e-editedrow");if(r){"Dialog"===this.parent.editSettings.mode&&(r=this.parent.element.querySelector(".e-dlgeditrow"));var i=this.getRowObj(r);if(!i)return;this.selectedRowState[i.data[this.primaryKey]]=i.isSelected=t.checked}else this.isCheckedOnAdd=t.checked}}},t.prototype.actionComplete=function(e){if("save"===e.requestType&&this.parent.isPersistSelection){if("add"===e.action&&this.isCheckedOnAdd){var t=this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));this.selectedRowState[t.data[this.primaryKey]]=t.isSelected=this.isCheckedOnAdd}this.refreshPersistSelection()}if("delete"===e.requestType&&this.parent.isPersistSelection){for(var r=(sf.base.isBlazor()?this.getSelectedRecords():e.data).slice(),i=0;i<r.length;i++)sf.base.isNullOrUndefined(r[i][this.primaryKey])||this.updatePersistDelete(r[i][this.primaryKey]);this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}"paging"===e.requestType&&(this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0)},t.prototype.onDataBound=function(){!this.parent.enableVirtualization&&this.parent.isPersistSelection&&this.refreshPersistSelection(),this.parent.enableVirtualization&&this.setCheckAllState()},t.prototype.updatePersistSelectedData=function(e){if(this.parent.isPersistSelection){for(var t=this.parent.getRows(),r=0;r<t.length;r++)this.updatePersistCollection(t[r],e);"Uncheck"===this.parent.checkAllRows?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:[]):"Check"===this.parent.checkAllRows&&(this.setRowSelection(!0),this.persistSelectedData=this.parent.getDataModule().isRemote()||sf.base.isBlazor()?this.persistSelectedData:this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice())}},t.prototype.checkSelectAllAction=function(e){var t=this.getRenderer(),r=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),e&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(e),sf.base.isBlazor()&&this.parent.enableVirtualization&&!sf.base.isNullOrUndefined(this.parent.contentModule.currentInfo.endIndex)?this.selectRowsByRange(this.parent.contentModule.currentInfo.startIndex,this.parent.contentModule.currentInfo.endIndex):this.selectRowsByRange(t.getVirtualRowIndex(0),t.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(e),this.clearSelection()),this.chkAllCollec=[],!sf.base.isNullOrUndefined(r)){var i=r.querySelector(".e-edit-checkselect");sf.base.isNullOrUndefined(i)||gr(i.nextElementSibling,e)}},t.prototype.checkSelectAll=function(e){var t=this,r=this.getCheckAllStatus(e),i="Check"===r;if(this.isHeaderCheckboxClicked=!0,"Intermediate"===r&&(i=this.getCurrentBatchRecordChanges().some((function(e){return e[t.primaryKey]in t.selectedRowState}))),this.parent.isPersistSelection&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!i),sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.enableVirtualization){if(this.parent.interopAdaptor.invokeMethodAsync("MaintainSelection",!i,"checkbox",null),this.checkBoxState=!i,!i){var n=this.parent.contentModule.vgenerator.rowCache;Object.values(n).forEach((function(e){return e.isSelected=!0}));for(var s=0;s<Object.keys(n).length;s++)-1===this.parent.selectionModule.selectedRowIndexes.indexOf(Number(Object.keys(n)[s]))&&this.parent.selectionModule.selectedRowIndexes.push(Number(Object.keys(n)[s]))}}this.target=null,this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState(),this.triggerChkChangeEvent(e,!i)},t.prototype.getCheckAllStatus=function(e){var t=e?e.nextElementSibling.classList:this.getCheckAllBox().nextElementSibling.classList;return t.contains("e-check")?"Check":t.contains("e-uncheck")?"Uncheck":t.contains("e-stop")?"Intermediate":"None"},t.prototype.checkSelect=function(e){var t=sf.base.closest(this.checkedTarget,".e-rowcell"),r=this.parent;this.isMultiCtrlRequest=!0;var i=0;if(this.isHeaderCheckboxClicked=!1,wr(r)){var n=t.parentElement.getAttribute("data-uid");i=r.getRows().map((function(e){return e.getAttribute("data-uid")})).indexOf(n)}else i=parseInt(t.parentElement.getAttribute("aria-rowindex"),10);this.parent.isPersistSelection&&this.parent.element.querySelectorAll(".e-addedrow").length>0&&++i,this.rowCellSelectionHandler(i,parseInt(t.getAttribute("aria-colindex"),10)),this.moveIntoUncheckCollection(sf.base.closest(t,".e-row")),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(e,e.nextElementSibling.classList.contains("e-check"))},t.prototype.moveIntoUncheckCollection=function(e){if("Check"===this.parent.checkAllRows||"Uncheck"===this.parent.checkAllRows){var t=this.getRowObj(e),r=t&&t.data?t.data[this.primaryKey]:null;if(!r)return;this.chkAllCollec.indexOf(r)<0?this.chkAllCollec.push(r):this.chkAllCollec.splice(this.chkAllCollec.indexOf(r),1)}},t.prototype.triggerChkChangeEvent=function(e,t){this.parent.trigger("checkBoxChange",{checked:t,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:e}),this.parent.isEdit||(this.checkedTarget=null)},t.prototype.updateSelectedRowIndex=function(e){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.getDataModule().isRemote()&&(!sf.base.isBlazor()||!this.parent.isServerRendered))if("Check"===this.parent.checkAllRows){this.selectedRowIndexes=[];for(var t=this.getData().length,r=0;r<t;r++)this.selectedRowIndexes.push(r)}else if("Uncheck"===this.parent.checkAllRows)this.selectedRowIndexes=[];else if(e&&"false"===this.parent.getRowByIndex(e).getAttribute("aria-selected")){var i=this.selectedRowIndexes.indexOf(e);this.selectedRowIndexes.splice(i,1)}},t.prototype.setCheckAllState=function(e,t){if(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode){var r=void 0,i=sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.enableVirtualization;if(i){r=!Object.values(this.parent.contentModule.vgenerator.rowCache).filter((function(e){return void 0===e.isSelected||!1===e.isSelected})).length&&Object.values(this.parent.contentModule.vgenerator.rowCache).filter((function(e){return e.isSelected})).length===this.selectedRowIndexes.length}var n=Object.keys(this.selectedRowState).length;if(this.parent.isPersistSelection||i||(n=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.getCheckAllBox()){var s=this.getCheckAllBox().nextElementSibling;sf.base.removeClass([s],["e-check","e-stop","e-uncheck"]),r||n===this.totalRecordsCount&&this.totalRecordsCount||!(!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling||this.parent.allowPaging||this.parent.getDataModule().isRemote()||sf.base.isBlazor()&&this.parent.isServerRendered||n!==this.getData().length)?(sf.base.addClass([s],["e-check"]),t&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):i&&!this.selectedRowIndexes.length||0===n&&!i||0===this.getCurrentBatchRecordChanges().length?(sf.base.addClass([s],["e-uncheck"]),t&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck",0===n&&0===this.getCurrentBatchRecordChanges().length?sf.base.addClass([s.parentElement],["e-checkbox-disabled"]):sf.base.removeClass([s.parentElement],["e-checkbox-disabled"])):(sf.base.addClass([s],["e-stop"]),this.parent.checkAllRows="Intermediate"),!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling||this.parent.allowPaging||this.parent.getDataModule().isRemote()||this.updateSelectedRowIndex(e)}}},t.prototype.keyDownHandler=function(e){(("chrome"===sf.base.Browser.info.name||"safari"===sf.base.Browser.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===sf.base.Browser.info.name&&17===e.keyCode||"mozilla"===sf.base.Browser.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!0)},t.prototype.keyUpHandler=function(e){(("chrome"===sf.base.Browser.info.name||"safari"===sf.base.Browser.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===sf.base.Browser.info.name&&17===e.keyCode||"mozilla"===sf.base.Browser.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!1)},t.prototype.clickHandler=function(e){var t=e.target;this.actualTarget=t,(Ut(t,"e-row")||Ut(t,"e-headerchkcelldiv"))&&(this.isInteracted=!0),this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.isMultiShiftRequest=e.shiftKey,this.popUpClickHandler(e);var r,i=!1;this.preventFocus=!0;var n=Ut(t,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!(!n||!n.querySelectorAll(".e-checkselectall")),n&&n.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(r=n.querySelector('input[type="checkbox"]'),i=!0),this.drawBorders(),(t=Ut(t,"e-rowcell"))&&t.parentElement.classList.contains("e-row")&&!this.parent.selectionSettings.checkboxOnly||i){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=t,sf.base.isNullOrUndefined(r)){var s=this.parent,o=0;if(wr(s)){var a=t.parentElement.getAttribute("data-uid");o=s.getRows().map((function(e){return e.getAttribute("data-uid")})).indexOf(a)}else o=parseInt(t.parentElement.getAttribute("aria-rowindex"),10);this.parent.isPersistSelection&&this.parent.element.querySelectorAll(".e-addedrow").length>0&&++o,this.mUPTarget&&this.mUPTarget.isEqualNode(t)||this.rowCellSelectionHandler(o,parseInt(t.getAttribute("aria-colindex"),10)),this.parent.hoverFrozenRows(e),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(sf.base.closest(t,".e-row")),this.setCheckAllState())}else this.checkedTarget=r,r.classList.contains("e-checkselectall")?this.checkSelectAll(r):this.checkSelect(r);this.parent.isCheckBoxSelection||!sf.base.Browser.isDevice||this.isSingleSel()||this.showPopup(e)}this.isMultiCtrlRequest=!1,this.isMultiShiftRequest=!1,sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-unboundcell"))&&(this.preventFocus=!1)},t.prototype.popUpClickHandler=function(e){var t=e.target;sf.base.closest(t,".e-headercell")||e.target.classList.contains("e-rowcell")||sf.base.closest(t,".e-gridpopup")?t.classList.contains("e-rowselect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},t.prototype.showPopup=function(e){this.selectionSettings.enableSimpleMultiRowSelection||qt(this.parent.element.querySelector(".e-gridpopup"),e,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>(this.parent.getFrozenColumns()?2:1)||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},t.prototype.rowCellSelectionHandler=function(e,t){this.parent;if(!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel())this.isDragged||this.selectRow(e,this.selectionSettings.enableToggle),this.selectCell({rowIndex:e,cellIndex:t},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders();else if(this.isMultiShiftRequest)this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!sf.base.closest(this.target,".e-rowcell").classList.contains("e-gridchkbox")?this.selectRowsByRange(sf.base.isUndefined(this.prevRowIndex)?e:this.prevRowIndex,e):this.addRowsToSelection([e]),this.selectCellsByRange(sf.base.isUndefined(this.prevCIdxs)?{rowIndex:e,cellIndex:t}:this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.updateAutoFillPosition(),this.drawBorders();else{if(this.addRowsToSelection([e]),sf.base.isBlazor()&&this.parent.enableVirtualization&&this.parent.isServerRendered){var r=this.parent.getSelectedRowIndexes();this.parent.interopAdaptor.invokeMethodAsync("MaintainSelection",!0,"normal",r)}this.addCellsToSelection([{rowIndex:e,cellIndex:t}]),this.hideBorders()}this.isDragged=!1},t.prototype.onCellFocused=function(e){if(this.parent.frozenRows&&e.container.isHeader&&e.byKey)if("upArrow"===e.keyArgs.action)this.parent.allowFiltering?e.isJump="INPUT"===e.element.tagName:e.isJump="TH"===e.element.tagName;else if("downArrow"===e.keyArgs.action){var t=Number(e.element.parentElement.getAttribute("aria-rowindex"));e.isJump=0===t}else"ctrlHome"===e.keyArgs.action&&(e.isJump=!0);var r=this.parent.getFrozenColumns()?(e.container.isHeader&&"TD"!==e.element.tagName&&e.isJump||(e.container.isContent||"TD"===e.element.tagName)&&!(e.container.isSelectable||"TD"===e.element.tagName))&&!(e.byKey&&"space"===e.keyArgs.action):(e.container.isHeader&&e.isJump||e.container.isContent&&!e.container.isSelectable)&&!(e.byKey&&"space"===e.keyArgs.action),i=e.container.isHeader&&"TD"!==e.element.tagName&&!sf.base.closest(e.element,".e-rowcell")&&!(e.byKey&&"space"===e.keyArgs.action);if(e.byKey&&!r){var n=e.container.isContent?e.container.indexes:e.indexes,s=n[0],o=n[1],a=this.focus.getPrevIndexes();if(this.parent.frozenRows)if(e.container.isHeader&&("TD"===e.element.tagName||sf.base.closest(e.element,".e-rowcell"))){var l=this.parent.getHeaderTable().querySelector("thead").childElementCount;s-=l,a.rowIndex=sf.base.isNullOrUndefined(a.rowIndex)?null:a.rowIndex-l}else s+=this.parent.frozenRows,a.rowIndex=0!==a.rowIndex&&sf.base.isNullOrUndefined(a.rowIndex)?null:a.rowIndex+this.parent.frozenRows;if(this.parent.getFrozenColumns()){var d=Number(e.element.getAttribute("aria-colindex")),c=this.parent.getSelectedRowCellIndexes();c.length&&0===a.cellIndex&&(a.cellIndex=c[c.length-1].cellIndexes[0]),a.cellIndex=sf.base.isNullOrUndefined(a.cellIndex)?null:a.cellIndex===o?d:d-1,o=d}if(!(i||-1===["ctrlPlusA","escape"].indexOf(e.keyArgs.action)&&"space"!==e.keyArgs.action&&s===a.rowIndex&&o===a.cellIndex)){switch(this.preventFocus=!0,e.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=e.element,this.applyDownUpKey(s,o);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(s,o);break;case"shiftDown":case"shiftUp":this.shiftDownKey(s,o);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(s,o);break;case"home":case"end":o="end"===e.keyArgs.action?this.getLastColIndex(s):0,this.applyHomeEndKey(s,o);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(s,o);break;case"escape":this.clearSelection();break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(e.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(s)}this.preventFocus=!1,this.positionBorders(),this.updateAutoFillPosition()}}else r&&!this.parent.isCheckBoxSelection&&this.clearSelection()},t.prototype.ctrlPlusA=function(){this.isRowType()&&!this.isSingleSel()&&this.selectRowsByRange(0,this.getCurrentBatchRecordChanges().length-1),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},t.prototype.applySpaceSelection=function(e){e.classList.contains("e-checkselectall")?(this.checkedTarget=e,this.checkSelectAll(this.checkedTarget)):e.classList.contains("e-checkselect")&&(this.checkedTarget=e,this.checkSelect(this.checkedTarget))},t.prototype.applyDownUpKey=function(e,t){var r=this.parent;this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&!this.selectionSettings.persistSelection&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&(this.parent.frozenRows,this.selectRow(e,!0),this.applyUpDown(r.selectedRowIndex)),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)},t.prototype.applyUpDown=function(e){if(!(e<0)){this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);var t=parseInt(this.target.getAttribute("aria-colindex"),10),r=this.parent.getFrozenColumns();this.target=r&&t>=r?this.contentRenderer.getMovableRowByIndex(e).querySelectorAll(".e-rowcell")[t-r]:this.contentRenderer.getRowByIndex(e).querySelectorAll(".e-rowcell")[t],this.addAttribute(this.target)}},t.prototype.applyRightLeftKey=function(e,t){this.parent;this.isCellType()&&(this.selectCell({rowIndex:e,cellIndex:t},!0),this.addAttribute(this.target))},t.prototype.applyHomeEndKey=function(e,t){this.isCellType()?this.selectCell({rowIndex:e,cellIndex:t},!0):this.addAttribute(this.parent.getCellFromIndex(e,t))},t.prototype.shiftDownKey=function(e,t){this.parent;this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(sf.base.isUndefined(this.prevRowIndex)?this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,e),this.applyUpDown(e))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},t.prototype.applyShiftLeftRightKey=function(e,t){this.parent;this.isMultiShiftRequest=!0,this.selectCellsByRange(this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},t.prototype.applyCtrlHomeEndKey=function(e,t){this.isRowType()&&(this.selectRow(e,!0),this.addAttribute(this.parent.getCellFromIndex(e,t))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)},t.prototype.addRemoveClassesForRow=function(e,t,r){for(var i=[],n=3;n<arguments.length;n++)i[n-3]=arguments[n];if(e){var s=[].slice.call(e.querySelectorAll(".e-rowcell")),o=e.querySelector(".e-detailrowcollapse")||e.querySelector(".e-detailrowexpand"),a=e.querySelector(".e-rowdragdrop");o&&s.push(o),a&&s.push(a),dr.apply(void 0,[s,t].concat(i))}this.getRenderer().setSelection(e?e.getAttribute("data-uid"):null,t,r)},t.prototype.isRowType=function(){return"Row"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},t.prototype.isCellType=function(){return"Cell"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},t.prototype.isSingleSel=function(){return"Single"===this.selectionSettings.type},t.prototype.getRenderer=function(){return sf.base.isNullOrUndefined(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(e.RenderType.Content)),this.contentRenderer},t.prototype.getSelectedRecords=function(){return this.selectionSettings.persistSelection?this.persistSelectedData:this.parent.getRowsObject().filter((function(e){return e.isSelected})).map((function(e){return e.data}))},t.prototype.addEventListener_checkbox=function(){var e=this;this.parent.on(f,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(h,this.onDataBoundFunction),this.parent.on(g,this.checkBoxSelectionChanged,this),this.parent.on(y,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(c,this.actionCompleteFunc),this.parent.on(S,this.clickHandler,this),this.resizeEndFn=function(){e.updateAutoFillPosition(),e.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener("resizeStop",this.resizeEndFn)},t.prototype.removeEventListener_checkbox=function(){this.parent.off(f,this.dataReady),this.parent.removeEventListener(h,this.onDataBoundFunction),this.parent.removeEventListener(c,this.actionCompleteFunc),this.parent.off(y,this.setCheckAllForEmptyGrid),this.parent.off(S,this.clickHandler)},t.prototype.setCheckAllForEmptyGrid=function(){var e=this.getCheckAllBox();if(e){this.parent.isCheckBoxSelection=!0;var t=e.nextElementSibling;sf.base.removeClass([t],["e-check","e-stop","e-uncheck"])}},t.prototype.dataReady=function(e){this.isHeaderCheckboxClicked=!1;var t=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;"virtualscroll"===e.requestType||this.parent.isPersistSelection||t||(this.disableUI=!0,this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)},t.prototype.actionCompleteHandler=function(e){"save"===e.requestType&&this.parent.isPersistSelection&&this.refreshPersistSelection()},t.prototype.selectRowIndex=function(e){this.parent.isSelectedRowIndexUpdating=!0,this.parent.selectedRowIndex=e},t.prototype.disableInteracted=function(){this.isInteracted=!1},t.prototype.activeTarget=function(){this.actualTarget=this.isInteracted?this.actualTarget:null},t}(),Ye=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.search=function(e){var t=this.parent;e=sf.base.isNullOrUndefined(e)?"":e,or(t)?t.notify(T,{instance:this,handler:this.search,arg1:e}):e!==t.searchSettings.key?(t.searchSettings.key=e.toString(),t.dataBind()):this.refreshSearch&&t.refresh()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(v,this.onPropertyChanged,this),this.parent.on("searching-complete",this.onSearchComplete,this),this.parent.on(x,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(c,this.actionCompleteFunc),this.parent.on("cancel-Begin",this.cancelBeginEvent,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(v,this.onPropertyChanged),this.parent.off("searching-complete",this.onSearchComplete),this.parent.off(x,this.destroy),this.parent.removeEventListener(c,this.actionCompleteFunc),this.parent.off("cancel-Begin",this.cancelBeginEvent))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&(sf.base.isNullOrUndefined(e.properties.key)?this.parent.notify(b,{requestType:"searching",type:d}):this.parent.notify(b,{requestType:"searching",type:d,searchString:this.parent.searchSettings.key}))},e.prototype.onSearchComplete=function(e){sf.base.isBlazor()&&!this.parent.isJsComponent&&(e.rows=null),this.parent.trigger(c,sf.base.extend(e,{searchString:this.parent.searchSettings.key,requestType:"searching",type:c}))},e.prototype.onActionComplete=function(e){this.refreshSearch="searching"!==e.requestType},e.prototype.cancelBeginEvent=function(e){"searching"===e.requestType&&this.parent.setProperties({searchSettings:{key:""}},!0)},e.prototype.getModuleName=function(){return"search"},e}(),$e=function(){function e(e){this.parent=e}return e.prototype.show=function(e,t){var r=this.getToggleFields(e),i=this.getColumns(r,t);this.parent.notify("tooltip-destroy",{module:"edit"});for(var n=0;n<i.length;n++)i[n].visible=!0;this.setVisible(i)},e.prototype.hide=function(e,t){var r=this.getToggleFields(e),i=this.getColumns(r,t);this.parent.notify("tooltip-destroy",{module:"edit"});for(var n=0;n<i.length;n++)i[n].visible=!1;this.setVisible(i)},e.prototype.getToggleFields=function(e){return"string"==typeof e?[e]:e},e.prototype.getColumns=function(e,t){var r=this;return kt(e,(function(e,i){return kt(r.parent.columnModel,(function(r,i){if(r[t]===e)return r}))[0]}))},e.prototype.setVisible=function(e,t){var r=this;if(void 0===t&&(t=[]),or(this.parent))this.parent.notify(T,{instance:this,handler:this.setVisible,arg1:e});else{var i={requestType:"columnstate",cancel:!1,columns:t=t.length>0?t:sf.base.isBlazor()?JSON.parse(JSON.stringify(e)):e};this.parent.trigger(d,i,(function(i){var n=r.parent.getColumns();if(e=sf.base.isNullOrUndefined(e)?n:e,i.cancel)e.length>0&&(e[0].visible=!0);else{if(r.parent.allowSelection&&r.parent.getSelectedRecords().length&&r.parent.clearSelection(),r.parent.enableColumnVirtualization)e.filter((function(e){return n.some((function(t){return e.field===t.field}))})).length&&r.parent.notify("column-visible-changed",e);else r.parent.notify("column-visible-changed",e);var s={requestType:"columnstate",columns:t};r.parent.trigger(c,s),"All"!==r.parent.columnQueryMode&&r.parent.refresh()}}))}},e}(),Ze=function(){function e(e){this.lastScrollTop=0,this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.widthService=new Be(e),this.addEventListener()}return e.prototype.getModuleName=function(){return"scroll"},e.prototype.setWidth=function(e){this.parent.element.style.width=sf.base.formatUnit(this.parent.width),e&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element&&this.parent.toolbarModule.toolbar.refreshOverflow()},e.prototype.setHeight=function(){var e=0,t=this.parent.getContent().querySelector(".e-content");if(!this.parent.enableVirtualization&&this.parent.frozenRows&&"auto"!==this.parent.height){var r=this.parent.getHeaderContent().querySelector("tbody");e=r?r.offsetHeight:0,t.style.height=sf.base.formatUnit(this.parent.height-e)}else t.style.height=sf.base.formatUnit(this.parent.height);this.ensureOverflow(t)},e.prototype.setPadding=function(){var t=this.parent.getHeaderContent(),r=e.getScrollBarWidth()-this.getThreshold(),i=this.getCssProperties();t.querySelector(".e-headercontent").style[i.border]=r>0?"1px":"0px",t.style[i.padding]=r>0?r+"px":"0px"},e.prototype.removePadding=function(e){var t=this.getCssProperties(e),r=this.parent.getHeaderContent().querySelector(".e-headercontent");r.style[t.border]="",r.parentElement.style[t.padding]="";var i=this.parent.getFooterContent();i&&i.classList.contains("e-footerpadding")&&i.classList.remove("e-footerpadding")},e.prototype.refresh=function(){if("100%"===this.parent.height){var e=this.parent.getContent();this.parent.element.style.height="100%";var t=this.widthService.getSiblingsHeight(e);e.style.height="calc(100% - "+t+"px)"}},e.prototype.getThreshold=function(){return"mozilla"===sf.base.Browser.info.name?.5:1},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(y,this.wireEvents,this),this.parent.on(g,this.wireEvents,this),this.parent.on(m,this.onPropertyChanged,this),this.parent.on("textWrapRefresh",this.wireEvents,this),this.parent.on(C,this.setScrollLeft,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(y,this.wireEvents),this.parent.off(g,this.wireEvents),this.parent.off(m,this.onPropertyChanged),this.parent.off("textWrapRefresh",this.wireEvents),this.parent.off(C,this.setScrollLeft))},e.prototype.setScrollLeft=function(){this.parent.frozenColumns&&(this.parent.headerModule.getMovableHeader().scrollLeft=this.previousValues.left)},e.prototype.onContentScroll=function(e){var t=this,r=e,i=r.classList.contains("e-headercontent");return function(e){if(null!==t.content.querySelector("tbody")&&!t.parent.isPreventScrollEvent){!sf.base.isNullOrUndefined(t.parent.infiniteScrollModule)&&t.parent.enableInfiniteScrolling&&t.parent.notify("infinite-scroll-handler",e),t.parent.notify("virtual-scroll-edit",{});var n=e.target,s=n.scrollLeft,o=(n.scrollWidth,n.classList.contains("e-summarycontent"));t.previousValues.left!==s?(t.parent.notify("close-filter-dialog",e),r.scrollLeft=s,o&&(t.header.scrollLeft=s),t.previousValues.left=s,t.parent.notify("scroll",{left:s})):t.previousValues.top=i?n.scrollTop:t.previousValues.top}}},e.prototype.onFreezeContentScroll=function(e){var t=this,r=e;return function(e){if(null!==t.content.querySelector("tbody")){var i=e.target.scrollTop;t.previousValues.top!==i&&(r.scrollTop=i,t.previousValues.top=i,t.parent.isDestroyed)}}},e.prototype.onWheelScroll=function(e){var t=this,r=e;return function(e){if(null!==t.content.querySelector("tbody")){var i=r.scrollTop+(1===e.deltaMode?30*e.deltaY:e.deltaY);t.previousValues.top!==i&&(e.preventDefault(),t.parent.getContent().querySelector(".e-frozencontent").scrollTop=i,r.scrollTop=i,t.previousValues.top=i)}}},e.prototype.onTouchScroll=function(e){var t=this,r=e;return function(e){if("mouse"!==e.pointerType){var i,n,s=t.getPointXY(e),o=r.scrollTop+(t.pageXY.y-s.y),a=r.scrollLeft+(t.pageXY.x-s.x);if(t.parent.getHeaderContent().contains(e.target)){if(n=t.parent.getFrozenColumns()?t.parent.getHeaderContent().querySelector(".e-movableheader"):t.parent.getHeaderContent().querySelector(".e-headercontent"),t.previousValues.left===a||a<0||n.scrollWidth-n.clientWidth<a)return;e.preventDefault(),n.scrollLeft=a,r.scrollLeft=a,t.pageXY.x=s.x,t.previousValues.left=a}else{if(i=t.parent.getContent().querySelector(".e-frozencontent"),t.previousValues.top===o&&(o<0||i.scrollHeight-i.clientHeight<o)||o<0||i.scrollHeight-i.clientHeight<o)return;e.preventDefault(),i.scrollTop=o,r.scrollTop=o,t.pageXY.y=s.y,t.previousValues.top=o}}}},e.prototype.setPageXY=function(){var e=this;return function(t){"mouse"!==t.pointerType&&(e.pageXY=e.getPointXY(t))}},e.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},e.prototype.wireEvents=function(){var e=this;if(this.oneTimeReady){var t=this.parent.getFrozenColumns();this.content=this.parent.getContent().querySelector(".e-content"),this.header=this.parent.getHeaderContent().querySelector(".e-headercontent");var r=this.content.querySelector(".e-movablecontent"),i=this.content.querySelector(".e-frozencontent"),n=this.header.querySelector(".e-movableheader");this.parent.frozenRows&&(sf.base.EventHandler.add(t?n:this.header,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(t?n:this.header,"touchmove pointermove",this.onTouchScroll(t?r:this.content),this)),t?(sf.base.EventHandler.add(r,"scroll",this.onContentScroll(n),this),sf.base.EventHandler.add(r,"scroll",this.onFreezeContentScroll(i),this),sf.base.EventHandler.add(i,"scroll",this.onFreezeContentScroll(r),this),sf.base.EventHandler.add(n,"scroll",this.onContentScroll(r),this),sf.base.EventHandler.add(i,"wheel",this.onWheelScroll(r),this),sf.base.EventHandler.add(i,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(i,"touchmove pointermove",this.onTouchScroll(r),this)):(sf.base.EventHandler.add(this.content,"scroll",this.onContentScroll(this.header),this),sf.base.EventHandler.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.aggregates.length&&sf.base.EventHandler.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.refresh(),this.oneTimeReady=!1}var s,o,a,l=this.parent.getContentTable();It((function(){s=e.header.scrollLeft,o=l.scrollHeight,a=e.parent.getContent().clientHeight}),(function(){e.parent.enableVirtualization||(o<a&&(sf.base.addClass(l.querySelectorAll("tr:last-child td"),"e-lastrowcell"),e.parent.getFrozenColumns()&&sf.base.addClass(e.parent.getContent().querySelector(".e-movablecontent").querySelectorAll("tr:last-child td"),"e-lastrowcell")),(e.parent.frozenRows>0||e.parent.frozenColumns>0)&&e.header.querySelector(".e-movableheader")?e.header.querySelector(".e-movableheader").scrollLeft=e.previousValues.left:e.header.scrollLeft=e.previousValues.left,e.content.scrollLeft=e.previousValues.left,e.content.scrollTop=e.previousValues.top),e.parent.enableColumnVirtualization||(e.content.scrollLeft=s),e.parent.frozenColumns&&e.header.querySelector(".e-movableheader")&&(e.header.querySelector(".e-movableheader").scrollLeft=e.content.querySelector(".e-movablecontent").scrollLeft)})),this.parent.isPreventScrollEvent=!1},e.prototype.getCssProperties=function(e){var t={},r=sf.base.isNullOrUndefined(e)?this.parent.enableRtl:e;return t.border=r?"borderLeftWidth":"borderRightWidth",t.padding=r?"paddingLeft":"paddingRight",t},e.prototype.ensureOverflow=function(e){this.parent.getFrozenColumns()?(e.querySelector(".e-movablecontent").style.overflowY="auto"===this.parent.height?"auto":"scroll","scroll"===e.querySelector(".e-movablecontent").style.overflowY&&this.setPadding()):e.style.overflowY="auto"===this.parent.height?"auto":"scroll"},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){this.setPadding(),this.oneTimeReady=!0,"auto"===this.parent.height&&this.removePadding(),this.wireEvents(),this.setHeight();this.setWidth(!sf.base.isNullOrUndefined(e.properties.width))}},e.prototype.destroy=function(){var e=this.parent.element;if(e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))){this.removeEventListener(),this.removePadding();var t=this.parent.getContent().querySelector(".e-content");sf.base.removeClass([this.parent.getHeaderContent().querySelector(".e-headercontent")],"e-headercontent"),sf.base.removeClass([t],"e-content"),t.style.height="",this.parent.element.style.width="",sf.base.EventHandler.remove(t,"scroll",this.onContentScroll)}},e.getScrollBarWidth=function(){return er()},e}(),et=(oe=function(e,t){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}oe(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),tt=function(e,t,r,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},rt=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.templateFn={},e}return et(r,t),r.prototype.setFormatter=function(e){var t=new s(e);this.format&&(this.format.skeleton||this.format.format)&&(this.formatFn=t.getFormatFunction(this.format))},r.prototype.getFormatter=function(){return this.formatFn},r.prototype.setTemplate=function(t){void 0===t&&(t={}),void 0!==this.footerTemplate&&(this.templateFn[sf.base.getEnumValue(e.CellType,e.CellType.Summary)]={fn:sf.base.compile(this.footerTemplate,t),property:"footerTemplate"}),void 0!==this.groupFooterTemplate&&(this.templateFn[sf.base.getEnumValue(e.CellType,e.CellType.GroupSummary)]={fn:sf.base.compile(this.groupFooterTemplate,t),property:"groupFooterTemplate"}),void 0!==this.groupCaptionTemplate&&(this.templateFn[sf.base.getEnumValue(e.CellType,e.CellType.CaptionSummary)]={fn:sf.base.compile(this.groupCaptionTemplate,t),property:"groupCaptionTemplate"})},r.prototype.getTemplate=function(t){return this.templateFn[sf.base.getEnumValue(e.CellType,t)]},r.prototype.setPropertiesSilent=function(e){this.setProperties(e,!0)},tt([sf.base.Property()],r.prototype,"type",void 0),tt([sf.base.Property()],r.prototype,"field",void 0),tt([sf.base.Property()],r.prototype,"columnName",void 0),tt([sf.base.Property()],r.prototype,"format",void 0),tt([sf.base.Property()],r.prototype,"footerTemplate",void 0),tt([sf.base.Property()],r.prototype,"groupFooterTemplate",void 0),tt([sf.base.Property()],r.prototype,"groupCaptionTemplate",void 0),tt([sf.base.Property()],r.prototype,"customAggregate",void 0),r}(sf.base.ChildProperty),it=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return et(t,e),tt([sf.base.Collection([],rt)],t.prototype,"columns",void 0),t}(sf.base.ChildProperty),nt=function(){function e(e){this.copyContent="",this.isSelect=!1,this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(g,this.initialEnd,this),this.parent.on(w,this.keyDownHandler,this),this.parent.on(S,this.clickHandler,this),sf.base.EventHandler.add(this.parent.element,"keydown",this.pasteHandler,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(w,this.keyDownHandler),this.parent.off(g,this.initialEnd),this.parent.off(S,this.clickHandler),sf.base.EventHandler.remove(this.parent.element,"keydown",this.pasteHandler))},e.prototype.clickHandler=function(e){var t=e.target;t=Ut(t,"e-rowcell")},e.prototype.pasteHandler=function(e){var t=this,r=this.parent;if(86===e.keyCode&&e.ctrlKey&&!r.isEdit){if(!sf.base.closest(document.activeElement,".e-rowcell")||!r.editSettings.allowEditing||"Batch"!==r.editSettings.mode||"Cell"!==r.selectionSettings.mode||"Flow"===r.selectionSettings.cellSelectionMode)return;this.activeElement=document.activeElement,this.clipBoardTextArea.value="";var i=window.scrollX,n=window.scrollY;this.clipBoardTextArea.focus(),setTimeout((function(){t.activeElement.focus(),window.scrollTo(i,n),t.paste(t.clipBoardTextArea.value,t.parent.getSelectedRowCellIndexes()[0].rowIndex,t.parent.getSelectedRowCellIndexes()[0].cellIndexes[0])}),10)}},e.prototype.paste=function(e,t,r){var i,n,s,o=this.parent,a=r,l=t;if(o.editSettings.allowEditing&&"Batch"===o.editSettings.mode&&"Cell"===o.selectionSettings.mode&&"Flow"!==o.selectionSettings.cellSelectionMode){var d,c,h=e.split("\n"),p=o.getDataRows(),u=this.parent.getFrozenColumns();u&&(c=o.getMovableDataRows());for(var f=0;f<h.length;f++){if(d=h[f].split("\t"),a=r,f===h.length-1&&""===h[f]||sf.base.isUndefined(o.getRowByIndex(l))){a++;break}for(var g=0;g<d.length;g++){if(s=o.getCellFromIndex(l,a),u){var m=p[l],y=c[l];s=!!m.querySelector('[aria-colindex="'+a+'"]')||y.querySelector('[aria-colindex="'+a+'"]')}if(!s){a++;break}if(n=(i=o.getColumnByIndex(a)).getParser()?i.getParser()(d[g]):d[g],i.allowEditing&&!i.isPrimaryKey&&!i.template){var v={column:i,data:n,rowIndex:l};this.parent.trigger("beforePaste",v),l=v.rowIndex,v.cancel||o.editModule&&("number"===i.type?this.parent.editModule.updateCell(l,i.field,parseInt(v.data,10)):o.editModule.updateCell(l,i.field,v.data))}a++}l++}o.selectionModule.selectCellsByRange({rowIndex:t,cellIndex:r},{rowIndex:l-1,cellIndex:a-1});var b=this.parent.getCellFromIndex(l-1,a-1);b&&sf.base.classList(b,["e-focus","e-focused"],[])}},e.prototype.initialEnd=function(){this.parent.off(g,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":"clipboard"}}),this.parent.element.appendChild(this.clipBoardTextArea)},e.prototype.keyDownHandler=function(e){"ctrlPlusC"===e.action?this.copy():"ctrlShiftPlusH"===e.action&&this.copy(!0)},e.prototype.setCopyData=function(e){if(""===window.getSelection().toString()){var t=this.parent.getFrozenColumns();this.clipBoardTextArea.value=this.copyContent="";var r=void 0,i=this.parent.getRows();if(t&&(r=this.parent.getMovableDataRows()),"Cell"!==this.parent.selectionSettings.mode){var n=this.parent.getSelectedRowIndexes().sort((function(e,t){return e-t}));if(e){for(var s=[],o=0;o<this.parent.getVisibleColumns().length;o++)s[o]=this.parent.getVisibleColumns()[o].headerText;this.getCopyData(s,!1,"\t",e),this.copyContent+="\n"}for(o=0;o<n.length;o++){o>0&&(this.copyContent+="\n");var a=[].slice.call(i[n[o]].querySelectorAll(".e-rowcell"));t&&a.push.apply(a,[].slice.call(r[n[o]].querySelectorAll(".e-rowcell"))),this.getCopyData(a,!1,"\t",e)}}else{var l=this.checkBoxSelection();if(l.status){if(e){var d=[];for(o=0;o<l.colIndexes.length;o++)d.push(this.parent.getColumnHeaderByIndex(l.colIndexes[o]));this.getCopyData(d,!1,"\t",e),this.copyContent+="\n"}for(o=0;o<l.rowIndexes.length;o++){o>0&&(this.copyContent+="\n");a=[].slice.call(i[l.rowIndexes[o]].querySelectorAll(".e-cellselectionbackground"));t&&a.push.apply(a,[].slice.call(r[l.rowIndexes[o]].querySelectorAll(".e-cellselectionbackground"))),this.getCopyData(a,!1,"\t",e)}}else this.getCopyData([].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),!0,"\n",e)}var c={data:this.copyContent,cancel:!1};if(this.parent.trigger("beforeCopy",c),c.cancel)return;this.clipBoardTextArea.value=this.copyContent=c.data,sf.base.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},e.prototype.getCopyData=function(e,t,r,i){for(var n="string"!=typeof e[0],s=0;s<e.length;s++)i&&t&&(this.copyContent+=this.parent.getColumns()[parseInt(e[s].getAttribute("aria-colindex"),10)].headerText+"\n"),n?e[s].classList.contains("e-hide")||(sf.base.isBlazor()?!e[s].classList.contains("e-gridchkbox")&&Object.keys(e[s].querySelectorAll(".e-check")).length?this.copyContent+=!0:!e[s].classList.contains("e-gridchkbox")&&Object.keys(e[s].querySelectorAll(".e-uncheck")).length?this.copyContent+=!1:this.copyContent+=e[s].innerText:this.copyContent+=e[s].innerText):this.copyContent+=e[s],s<e.length-1&&(this.copyContent+=r)},e.prototype.copy=function(e){document.queryCommandSupported("copy")&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},e.prototype.getModuleName=function(){return"clipboard"},e.prototype.destroy=function(){this.removeEventListener(),this.clipBoardTextArea&&sf.base.remove(this.clipBoardTextArea)},e.prototype.checkBoxSelection=function(){var e=this.parent,t={status:!1};if("Cell"===e.selectionSettings.mode){var r=e.getSelectedRowCellIndexes(),i=void 0,n=[],s=void 0;for(s=0;s<r.length&&(r[s].cellIndexes.length&&n.push(r[s].rowIndex),!r[s].cellIndexes.length||(i||(i=JSON.stringify(r[s].cellIndexes.sort())),i===JSON.stringify(r[s].cellIndexes.sort())));s++);n.sort((function(e,t){return e-t})),s===r.length&&n[n.length-1]-n[0]==n.length-1&&(t={status:!0,rowIndexes:n,colIndexes:r[0].cellIndexes})}return t},e}(),st=new sf.base.Observer,ot=function(){function t(e){this.aria=new _,this.actionArgs={},this.virtualHeight=0,this.parent=e,this.addEventListener()}return t.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("detailclick",this.onDetailRowClick,this),this.parent.on("add-delete-success",this.addDeleteSuccess,this),this.parent.on("editsuccess",this.editSuccess,this),this.parent.on("setvisibility",this.setColumnVisibility,this),this.parent.on("offset",this.setServerOffSet,this),this.parent.on("updateaction",this.modelChanged,this),this.parent.on(b,this.modelChanged,this),this.parent.on("group-expand-collapse",this.onGroupClick,this),this.parent.on("setcolumnstyles",this.setColVTableWidthAndTranslate,this),this.parent.on("refresh-virtual-indices",this.invokeServerDataBind,this),this.parent.on("contentcolgroup",this.contentColGroup,this),this.parent.on("datasource-modified",this.dataSourceModified,this))},t.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("detailclick",this.onDetailRowClick),this.parent.off("add-delete-success",this.addDeleteSuccess),this.parent.off("editsuccess",this.editSuccess),this.parent.off("setvisibility",this.setColumnVisibility),this.parent.off("offset",this.setServerOffSet),this.parent.off("updateaction",this.modelChanged),this.parent.off(b,this.modelChanged),this.parent.off("group-expand-collapse",this.onGroupClick),this.parent.off("setcolumnstyles",this.setColVTableWidthAndTranslate),this.parent.off("refresh-virtual-indices",this.invokeServerDataBind),this.parent.off("contentcolgroup",this.contentColGroup),this.parent.off("datasource-modified",this.dataSourceModified))},t.prototype.getModuleName=function(){return"blazor"},t.prototype.modelChanged=function(e){this.actionArgs=e,this.parent.currentAction=e},t.prototype.addDeleteSuccess=function(e){var t,r=this;t={requestType:e.requestType,data:e.data,action:e.action},sf.base.isNullOrUndefined(e.index)||(t.index=e.index),e.promise.then((function(e){return r.editSuccess(t)})).catch((function(e){if(sf.base.isBlazor()&&r.parent.isServerRendered){sf.base.isNullOrUndefined(e.error)||sf.base.isNullOrUndefined(e.error.message)||(e.error=e.error.message)}r.parent.trigger("actionFailure",sf.base.isBlazor()&&e instanceof Array?e[0]:e),r.parent.hideSpinner(),r.parent.log("actionfailure",{error:e})}))},t.prototype.editSuccess=function(e){this.parent.renderModule.resetTemplates(),this.invokeServerDataBind(e)},t.prototype.invokeServerDataBind=function(e){this.actionArgs=e,this.parent.currentAction=e,this.parent.allowServerDataBinding=!0,this.parent.serverDataBind(),this.parent.allowServerDataBinding=!1},t.prototype.onDetailRowClick=function(t){var r=this.parent,i=t.parentElement,n=i.getAttribute("data-uid"),s=r.getRowObjectFromUID(n),o={uid:n,classList:t.classList[0],index:i.getAttribute("aria-rowindex"),rowIndex:r.getRowsObject().indexOf(s),colSpan:this.parent.getVisibleColumns().length};if(r.interopAdaptor.invokeMethodAsync("OnDetailClick",o),t.classList.contains("e-detailrowcollapse")){for(var a=r.getRowsObject(),l=s.data,d=this.parent.getRowUid("grid-row"),c=r.groupSettings.columns.length,h=new M({isDataRow:!0,isExpand:!0,uid:d,isDetailRow:!0,cells:[new k({cellType:e.CellType.Indent}),new k({isDataCell:!0,visible:!0})]}),p=0;p<c;p++)h.cells.unshift(new k({cellType:e.CellType.Indent}));a.splice(o.rowIndex+1,0,h),r.trigger("detailDataBound",{data:l}),r.notify("detailDataBound",{rows:r.getRowsObject()}),s.isExpand=!0,this.aria.setExpand(t,!0)}else r.getRowsObject().splice(o.rowIndex+1,1),r.notify("detailDataBound",{rows:r.getRowsObject()}),s.isExpand=!1,this.aria.setExpand(t,!1)},t.prototype.setColumnVisibility=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].uid]=e[r].visible;this.parent.interopAdaptor.invokeMethodAsync("setColumnVisibility",{visible:t})},t.prototype.dataSuccess=function(e){this.parent.enableVirtualization&&0===Object.keys(this.actionArgs).length&&(this.actionArgs.requestType="virtualscroll");if(this.actionArgs.startIndex=e.startIndex,this.actionArgs.endIndex=e.endIndex,this.parent.enableVirtualization){if(this.virtualContentModule=this.parent.contentModule,"downArrow"===this.virtualContentModule.activeKey||"upArrow"===this.virtualContentModule.activeKey){var t=this.parent.getRowByIndex(this.virtualContentModule.blzRowIndex);t&&(this.parent.selectRow(parseInt(t.getAttribute("aria-rowindex"),10)),t.cells[0].focus({preventScroll:!0}))}this.virtualContentModule.blazorDataLoad=!1}if(e.foreignColumnsData)for(var r=this.parent.getColumns(),i=0;i<r.length;i++)e.foreignColumnsData[r[i].field]&&(r[i].columnData=e.foreignColumnsData[r[i].field]);if(this.parent.allowGrouping&&this.parent.groupSettings.columns){var n=[],s=this.parent.aggregates;for(i=0;i<s.length;i++)for(var o=s[i],a=0;a<o.columns.length;a++){var l;l={type:o.columns[a].type.toString().toLowerCase(),field:o.columns[a].field},n.push(l)}for(var d=void 0,c=void 0,h=this.parent.groupSettings.columns,p=0;p<h.length;p++)c=d||e.result,d=sf.data.DataUtil.group(c,h[p],n,null,null);e.result=d||e.result}var u="offset";if(this.parent.rowUid=e.rowUid,e[u]=1===Math.sign(e[u])?-Math.abs(e[u]):Math.abs(e[u]),this.parent.offsetTime=e[u],this.parent.offsetTime!==(new Date).getTimezoneOffset()/60)if("Batch"!==this.parent.editSettings.mode){"edit"===this.actionArgs.action?this.setClientOffSet(e,this.actionArgs.rowIndex):"add"===this.actionArgs.action&&this.setClientOffSet(e,this.actionArgs.index)}else if("Batch"===this.parent.editSettings.mode){var f=this.parent.getPrimaryKeyFieldNames()[0],g=this.actionArgs.changes||{changedRecords:[],addedRecords:[]};for(i=0;i<g.changedRecords.length;i++)for(a=0;a<e.result.length;a++)g.changedRecords[i][f]===e.result[a][f]&&this.setClientOffSet(e,a);for(i=0;i<g.addedRecords.length;i++)for(a=0;a<e.result.length;a++)g.addedRecords[i][f]===e.result[a][f]&&this.setClientOffSet(e,a)}this.parent.renderModule.dataManagerSuccess(e,this.actionArgs),this.parent.getMediaColumns(),this.parent.enableVirtualization&&(this.virtualContentModule=this.parent.contentModule,this.setColVTableWidthAndTranslate(),this.parent.groupSettings.columns.length&&this.virtualContentModule.setVirtualHeight(this.virtualHeight)),this.actionArgs=this.parent.currentAction={}},t.prototype.removeDisplayNone=function(){for(var e=this.parent.getContentTable().querySelectorAll("tr"),t=0;t<e.length;t++)for(var r=e[t].querySelectorAll("td"),i=0;i<r.length;i++)r[i].style.display=""},t.prototype.setVirtualTrackHeight=function(e){this.virtualHeight=e.VisibleGroupedRowsCount*this.parent.getRowHeight(),this.virtualContentModule.setVirtualHeight(this.virtualHeight)},t.prototype.setColVTableWidthAndTranslate=function(e){if(this.parent.enableColumnVirtualization&&this.virtualContentModule.prevInfo&&JSON.stringify(this.virtualContentModule.currentInfo.columnIndexes)!==JSON.stringify(this.virtualContentModule.prevInfo.columnIndexes)||e&&e.refresh){var t=this.virtualContentModule.getColumnOffset(this.virtualContentModule.startColIndex-1),r=this.virtualContentModule.getColumnOffset(this.virtualContentModule.endColIndex-1)-t+"";this.virtualContentModule.header.virtualEle.setWrapperWidth(r),this.virtualContentModule.virtualEle.setWrapperWidth(r),this.virtualContentModule.header.virtualEle.adjustTable(t,0),this.parent.getContentTable().parentElement.style.width=r+"px"}this.dataSourceChanged&&(this.virtualContentModule.getPanel().firstElementChild.scrollTop=0,this.virtualContentModule.getPanel().firstElementChild.scrollLeft=0,this.virtualContentModule.header.virtualEle&&this.virtualContentModule.header.virtualEle.adjustTable(0,0),this.parent.getContentTable().parentElement.style.transform="translate(0px,0px)",this.virtualContentModule.refreshOffsets(),this.virtualContentModule.refreshVirtualElement(),this.dataSourceChanged=!1)},t.prototype.dataSourceModified=function(){this.dataSourceChanged=!0},t.prototype.setClientOffSet=function(e,t){var r=sf.data.DataUtil.serverTimezoneOffset;sf.data.DataUtil.serverTimezoneOffset=0,e.result[t]=sf.data.DataUtil.parse.parseJson(JSON.stringify(e.result[t])),sf.data.DataUtil.serverTimezoneOffset=r},t.prototype.setServerOffSet=function(e){var t=sf.data.DataUtil.serverTimezoneOffset,r=(new Date).getTimezoneOffset()/60*2+this.parent.offsetTime;sf.data.DataUtil.serverTimezoneOffset=r,e.data=sf.data.DataUtil.parse.parseJson(JSON.stringify(e.data)),sf.data.DataUtil.serverTimezoneOffset=t},t.prototype.onGroupClick=function(e){var t=this;e.exactTopIndex=Math.round(this.parent.element.querySelector(".e-content").scrollTop/this.parent.getRowHeight());e.rowHeight=this.parent.getRowHeight(),this.parent.interopAdaptor.invokeMethodAsync("OnGroupExpandClick",e).then((function(){t.parent.contentModule.rowElements=[].slice.call(t.parent.getContentTable().querySelectorAll("tr.e-row[data-uid]"))}))},t.prototype.setPersistData=function(e){var t=this.parent;t.mergePersistGridData(e);t.bulkChanges.columns&&delete t.bulkChanges.columns,t.headerModule.refreshUI(),t.notify("persist-data-changed",{}),t.notify("column-visible-changed",t.getColumns())},t.prototype.resetPersistData=function(e){var t=this.parent,r=JSON.parse(e),i={filterSettings:r.filterSettings,groupSettings:r.groupSettings,pageSettings:r.pageSettings,sortSettings:r.sortSettings,searchSettings:r.searchSettings,columns:r.columns};i.sortSettings.columns||(i.sortSettings.columns=[]),i.groupSettings.columns||(i.groupSettings.columns=[]),i.pageSettings.currentPage||(t.pageSettings.currentPage=1);for(var n=0;n<t.columns.length;n++)t.groupSettings.columns.indexOf(t.columns[n].field)>-1&&(t.columns[n].visible=!0);t.mergePersistGridData(i),t.notify("persist-data-changed",{}),t.bulkChanges.columns&&delete t.bulkChanges.columns,t.headerModule.refreshUI();for(n=0;n<t.columns.length;n++)t.columns[n].editType=t.columns[n].editType.toLowerCase();t.setProperties({filterSettings:{columns:[]}},!0)},t.prototype.contentColGroup=function(){var e=this.parent,t=e.getContent().querySelector(".e-table");if(t.insertBefore(t.querySelector("#content-"+e.element.id+"colGroup"),t.querySelector("tbody")),e.frozenRows){var r=e.getHeaderContent().querySelector(".e-table");r.insertBefore(r.querySelector("#"+e.element.id+"colGroup"),r.querySelector("tbody"))}if(0!==e.getFrozenColumns()){var i=e.getContent().querySelector(".e-movablecontent").querySelector(".e-table");if(i.insertBefore(i.querySelector("#"+e.element.id+"colGroup"),i.querySelector("tbody")),e.frozenRows){var n=e.getHeaderContent().querySelector(".e-movableheader").querySelector(".e-table");n.insertBefore(n.querySelector("#"+e.element.id+"colGroup"),n.querySelector("tbody"))}}},t.prototype.dataFailure=function(e){this.parent.renderModule.dataManagerFailure(e,this.actionArgs),this.actionArgs=this.parent.currentAction={}},t.prototype.destroy=function(){this.removeEventListener()},t}(),at=(ae=function(e,t){return(ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}ae(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),lt=function(e,t,r,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),lt([sf.base.Property()],t.prototype,"field",void 0),lt([sf.base.Property()],t.prototype,"direction",void 0),lt([sf.base.Property(!1)],t.prototype,"isFromGroup",void 0),t}(sf.base.ChildProperty),ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),lt([sf.base.Collection([],dt)],t.prototype,"columns",void 0),lt([sf.base.Property(!0)],t.prototype,"allowUnsort",void 0),t}(sf.base.ChildProperty),ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),lt([sf.base.Property()],t.prototype,"field",void 0),lt([sf.base.Property()],t.prototype,"operator",void 0),lt([sf.base.Property()],t.prototype,"value",void 0),lt([sf.base.Property()],t.prototype,"matchCase",void 0),lt([sf.base.Property()],t.prototype,"ignoreAccent",void 0),lt([sf.base.Property()],t.prototype,"predicate",void 0),lt([sf.base.Property({})],t.prototype,"actualFilterValue",void 0),lt([sf.base.Property({})],t.prototype,"actualOperator",void 0),lt([sf.base.Property()],t.prototype,"type",void 0),lt([sf.base.Property()],t.prototype,"ejpredicate",void 0),lt([sf.base.Property()],t.prototype,"uid",void 0),lt([sf.base.Property()],t.prototype,"isForeignKey",void 0),t}(sf.base.ChildProperty),pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),lt([sf.base.Property(!1)],t.prototype,"enableCache",void 0),lt([sf.base.Property(3)],t.prototype,"maxBlocks",void 0),lt([sf.base.Property(3)],t.prototype,"initialBlocks",void 0),t}(sf.base.ChildProperty),ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),lt([sf.base.Collection([],ht)],t.prototype,"columns",void 0),lt([sf.base.Property("FilterBar")],t.prototype,"type",void 0),lt([sf.base.Property()],t.prototype,"mode",void 0),lt([sf.base.Property(!0)],t.prototype,"showFilterBarStatus",void 0),lt([sf.base.Property(1500)],t.prototype,"immediateModeDelay",void 0),lt([sf.base.Property()],t.prototype,"operators",void 0),lt([sf.base.Property(!1)],t.prototype,"ignoreAccent",void 0),lt([sf.base.Property(!1)],t.prototype,"enableCaseSensitivity",void 0),t}(sf.base.ChildProperty),ft=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),lt([sf.base.Property("Row")],t.prototype,"mode",void 0),lt([sf.base.Property("Flow")],t.prototype,"cellSelectionMode",void 0),lt([sf.base.Property("Single")],t.prototype,"type",void 0),lt([sf.base.Property(!1)],t.prototype,"checkboxOnly",void 0),lt([sf.base.Property(!1)],t.prototype,"persistSelection",void 0),lt([sf.base.Property("Default")],t.prototype,"checkboxMode",void 0),lt([sf.base.Property(!1)],t.prototype,"enableSimpleMultiRowSelection",void 0),lt([sf.base.Property(!0)],t.prototype,"enableToggle",void 0),t}(sf.base.ChildProperty),gt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),lt([sf.base.Property([])],t.prototype,"fields",void 0),lt([sf.base.Property("")],t.prototype,"key",void 0),lt([sf.base.Property("contains")],t.prototype,"operator",void 0),lt([sf.base.Property(!0)],t.prototype,"ignoreCase",void 0),lt([sf.base.Property(!1)],t.prototype,"ignoreAccent",void 0),t}(sf.base.ChildProperty),mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),lt([sf.base.Property()],t.prototype,"targetID",void 0),t}(sf.base.ChildProperty),yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),lt([sf.base.Property("Both")],t.prototype,"wrapMode",void 0),t}(sf.base.ChildProperty),vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),lt([sf.base.Property(!0)],t.prototype,"showDropArea",void 0),lt([sf.base.Property(!1)],t.prototype,"allowReordering",void 0),lt([sf.base.Property(!1)],t.prototype,"showToggleButton",void 0),lt([sf.base.Property(!1)],t.prototype,"showGroupedColumn",void 0),lt([sf.base.Property(!0)],t.prototype,"showUngroupButton",void 0),lt([sf.base.Property(!1)],t.prototype,"disablePageWiseAggregates",void 0),lt([sf.base.Property([])],t.prototype,"columns",void 0),lt([sf.base.Property()],t.prototype,"captionTemplate",void 0),t}(sf.base.ChildProperty),bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return at(t,e),lt([sf.base.Property(!1)],t.prototype,"allowAdding",void 0),lt([sf.base.Property(!1)],t.prototype,"allowEditing",void 0),lt([sf.base.Property(!1)],t.prototype,"allowDeleting",void 0),lt([sf.base.Property("Normal")],t.prototype,"mode",void 0),lt([sf.base.Property(!0)],t.prototype,"allowEditOnDblClick",void 0),lt([sf.base.Property(!0)],t.prototype,"showConfirmDialog",void 0),lt([sf.base.Property(!1)],t.prototype,"showDeleteConfirmDialog",void 0),lt([sf.base.Property("")],t.prototype,"template",void 0),lt([sf.base.Property("")],t.prototype,"headerTemplate",void 0),lt([sf.base.Property("")],t.prototype,"footerTemplate",void 0),lt([sf.base.Property("Top")],t.prototype,"newRowPosition",void 0),lt([sf.base.Property({})],t.prototype,"dialog",void 0),lt([sf.base.Property(!1)],t.prototype,"allowNextRowEdit",void 0),t}(sf.base.ChildProperty),Ct=function(t){function r(e,r){var n=t.call(this,e,r)||this;return n.isPreventScrollEvent=!1,n.inViewIndexes=[],n.media={},n.componentRefresh=sf.base.Component.prototype.refresh,n.isVirtualAdaptive=!1,n.vRows=[],n.vcRows=[],n.vGroupOffsets={},n.rowUid=0,n.currentViewData=[],n.lockcolPositionCount=0,n.prevPageMoving=!1,n.pageTemplateChange=!1,n.isAutoGen=!1,n.mediaBindInstance={},n.commandDelIndex=void 0,n.enableLogger=!0,n.needsID=!0,i.Inject(Xe),sf.base.setValue("mergePersistData",n.mergePersistGridData,n),n}var i;return at(r,t),i=r,r.prototype.getPersistData=function(){for(var e=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],t={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]},r=0;r<e.length;r++)for(var i=this[e[r]],n=0,s=t[e[r]];n<s.length;n++){delete i[s[n]]}return this.pageSettings.template=void 0,this.pageTemplateChange=!sf.base.isNullOrUndefined(this.pagerTemplate),this.addOnPersist(e)},r.prototype.requiredModules=function(){var e=[];return this.isDestroyed||(this.allowFiltering&&e.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator]}),this.allowExcelExport&&e.push({member:"ExcelExport",args:[this,this.serviceLocator]}),this.allowPdfExport&&e.push({member:"PdfExport",args:[this]}),this.allowSorting&&e.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator]}),this.allowPaging&&e.push({member:"pager",args:[this,this.pageSettings]}),this.allowSelection&&e.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator]}),e.push({member:"resize",args:[this]}),this.allowReordering&&e.push({member:"reorder",args:[this]}),this.allowRowDragAndDrop&&e.push({member:"rowDragAndDrop",args:[this]}),this.allowGrouping&&e.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator]}),this.aggregates.length&&e.push({member:"aggregate",args:[this,this.serviceLocator]}),this.isDetail()&&e.push({member:"detailRow",args:[this,this.serviceLocator]}),(this.toolbar||this.toolbarTemplate)&&e.push({member:"toolbar",args:[this,this.serviceLocator]}),(this.enableVirtualization||this.enableColumnVirtualization)&&e.push({member:"virtualscroll",args:[this,this.serviceLocator]}),(this.getFrozenColumns()||this.frozenRows)&&e.push({member:"freeze",args:[this,this.serviceLocator]}),this.isCommandColumn(this.columns)&&e.push({member:"commandColumn",args:[this,this.serviceLocator]}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&e.push({member:"edit",args:[this,this.serviceLocator]}),this.extendRequiredModules(e)),e},r.prototype.extendRequiredModules=function(e){this.enableInfiniteScrolling&&e.push({member:"infiniteScroll",args:[this,this.serviceLocator]}),this.contextMenuItems&&e.push({member:"contextMenu",args:[this,this.serviceLocator]}),this.showColumnMenu&&e.push({member:"columnMenu",args:[this,this.serviceLocator]}),this.showColumnChooser&&e.push({member:"columnChooser",args:[this,this.serviceLocator]}),this.isForeignKeyEnabled(this.columns)&&e.push({member:"foreignKey",args:[this,this.serviceLocator]}),this.enableLogger&&e.push({member:"logger",args:[this]}),sf.base.isBlazor()&&e.push({member:"blazor",args:[this]})},r.prototype.preRender=function(){this.serviceLocator=new ke,this.initProperties(),this.initializeServices()},r.prototype.initProperties=function(){if(this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,sf.base.isBlazor()&&this.enableVirtualization&&this.allowGrouping){this.isExpanded=!1}this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=sf.base.Component.prototype.refresh,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",SearchColumns:"search columns",Matchs:"No Matches Found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No Matches Found",ClearFilter:"Clear Filter",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",FilterMenuDialogARIA:"Filter menu dialog",ExcelFilterDialogARIA:"Excel filter dialog",DialogEditARIA:"Edit dialog",ColumnChooserDialogARIA:"Column chooser dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}},r.prototype.render=function(){this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{role:"grid"}),sf.base.isBlazor()&&this.renderComplete(),sf.popups.createSpinner({target:this.element},this.createElement),this.renderModule=new Oe(this,this.serviceLocator),this.searchModule=new Ye(this),this.scrollModule=new Ze(this),this.notify(p,{}),!0!==this.getDataModule().dataManager.dataSource.offline&&void 0!==this.getDataModule().dataManager.dataSource.url||(this.isVirtualAdaptive=!0),this.trigger("load"),Lt(this.columns,this.enableColumnVirtualization),this.enablePersistence&&this.notify("columns-prepared",{}),sf.base.isBlazor()&&this.isServerRendered||(this.getMediaColumns(),Nt(this.columns)),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),this.showSpinner(),this.notify(u,{}),sf.base.isBlazor()&&this.isServerRendered&&st.notify("component-rendered",{id:this.element.id,grid:this})},r.prototype.showSpinner=function(){sf.popups.showSpinner(this.element)},r.prototype.hideSpinner=function(){sf.popups.hideSpinner(this.element)},r.prototype.updateStackedFilter=function(){this.allowFiltering&&"FilterBar"===this.filterSettings.type&&this.getHeaderContent().querySelectorAll(".e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")},r.prototype.getMediaColumns=function(){if(!this.enableColumnVirtualization){var e=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!sf.base.isNullOrUndefined(e))for(var t=0;t<e.length;t++)sf.base.isNullOrUndefined(e[t].hideAtMedia)||!sf.base.isNullOrUndefined(e[t].visible)&&!e[t].visible||this.pushMediaColumn(e[t],t)}},r.prototype.pushMediaColumn=function(e,t){this.mediaCol.push(e),this.media[e.uid]=window.matchMedia(e.hideAtMedia),this.mediaQueryUpdate(t,this.media[e.uid]),this.mediaBindInstance[t]=this.mediaQueryUpdate.bind(this,t),this.media[e.uid].addListener(this.mediaBindInstance[t])},r.prototype.updateMediaColumns=function(e){if(!this.enableColumnVirtualization){for(var t=this.getColumnIndexByUid(e.uid),r=0;r<this.mediaCol.length;r++)if(e.uid===this.mediaCol[r].uid)return void this.mediaCol.splice(r,1);this.pushMediaColumn(e,t)}},r.prototype.mediaQueryUpdate=function(e,t){var r=this.getColumns()[e];this.mediaCol.some((function(e){return e.uid===r.uid}))&&(r.visible=t.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,r.visible?this.showHider.show(r.headerText,"headerText"):this.showHider.hide(r.headerText,"headerText")))},r.prototype.refreshMediaCol=function(){this.isInitialLoad=!0;var e=this.element.querySelector(".e-gridfooter");this.aggregates.length&&this.element.scrollHeight>this.height&&e&&sf.base.addClass([e],["e-footerpadding"]),this.getColumns().filter((function(e){return"checkbox"===e.type})).length&&"ResetOnRowClick"===this.selectionSettings.checkboxMode&&(this.isCheckBoxSelection=!1)},r.prototype.removeMediaListener=function(){for(var e=0;e<this.mediaCol.length;e++)this.media[this.mediaCol[e].uid].removeListener(this.mediaBindInstance[this.mediaCol[e].index])},r.prototype.eventInitializer=function(){},r.prototype.destroy=function(){var e=this.element;if(e){var r=!(!e.querySelector(".e-gridheader")||!e.querySelector(".e-gridcontent"));r&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(x,{}),this.destroyDependentModules(),r&&t.prototype.destroy.call(this),this.toolTipObj.destroy();for(var i=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"],n=0;n<i.length;n++)this[i[n]]&&(this[i[n]]=null);sf.base.isBlazor()&&this.isServerRendered?this.element.style.display="none":this.element.innerHTML="",sf.base.classList(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"])}},r.prototype.destroyDependentModules=function(){var e=this.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy())},r.prototype.getModuleName=function(){return"grid"},r.prototype.enableBoxSelection=function(){this.enableAutoFill&&(this.selectionSettings.cellSelectionMode="BoxWithBorder")},r.prototype.onPropertyChanged=function(e,t){var r,i=!1,n=!1,s=!1;if(!this.isDestroyed){this.log("module_missing");var o=Object.keys(e);o.indexOf("columns")>-1&&(this.updateColumnObject(),n=!0);for(var a=0,l=o;a<l.length;a++){var d=l[a];switch(d){case"allowPaging":this.notify(m,{module:"pager",enable:this.allowPaging}),i=!0;break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(v,{module:"pager",properties:e.pageSettings});break}this.notify(v,{module:"pager",properties:e.pageSettings}),(sf.base.isNullOrUndefined(e.pageSettings.currentPage)&&sf.base.isNullOrUndefined(e.pageSettings.pageSize)&&sf.base.isNullOrUndefined(e.pageSettings.totalRecordsCount)||!sf.base.isNullOrUndefined(t.pageSettings)&&e.pageSettings.currentPage!==t.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(i=!0);break;case"allowSorting":this.notify(m,{module:"sort",enable:this.allowSorting}),i=!0,r=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(m,{module:"filter",enable:this.allowFiltering}),i=!0,"FilterBar"!==this.filterSettings.type&&this.refreshHeader();break;case"height":case"width":this.notify(m,{module:"scroll",properties:{width:e.width,height:e.height}});break;case"allowReordering":this.headerModule.refreshUI(),r=!0;break;case"allowRowDragAndDrop":this.notify(m,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(m,{module:"selection",enable:this.allowSelection});break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=Bt(this.rowTemplate),i=!0;break;case"detailTemplate":this.detailTemplateFn=Bt(this.detailTemplate),i=!0;break;case"allowGrouping":this.notify(m,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),i=!0,r=!0;break;case"enableInfiniteScrolling":case"childGrid":i=!0;break;case"toolbar":this.notify(m,{module:"toolbar"});break;case"groupSettings":this.notify(v,{module:"group",properties:e.groupSettings,oldProperties:t.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(i=!0),this.notify(m,{module:"aggregate",properties:e});break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"currencyCode":case"locale":this.log("frozen_rows_columns"),s=!0,n=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(i=!0),this.getDataModule().isQueryInvokedFromData=!1;break;default:this.extendedPropertyChange(d,e,n)}}r&&this.updateDefaultCursor(),n?s||this.frozenColumns||this.frozenRows?sf.base.isBlazor()&&this.isServerRendered||this.freezeRefresh():this.refresh():i&&(this.notify(b,{requestType:"refresh"}),i=!1,this.maintainSelection(e.selectedRowIndex))}},r.prototype.extendedPropertyChange=function(e,t,r){switch(e){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=t.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),"auto"!==this.height&&(this.scrollModule.removePadding(!t.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=t.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=t.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=t.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),this.notify("rtl-updated",{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?sf.base.addClass([this.element],"e-grid-min-height"):sf.base.removeClass([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(m,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(m,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(m,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.notify(m,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(v,{module:"filter",properties:t.filterSettings});break;case"searchSettings":this.notify(v,{module:"search",properties:t.searchSettings});break;case"sortSettings":this.notify(v,{module:"sort"});break;case"selectionSettings":this.notify(v,{module:"selection",properties:t.selectionSettings});break;case"editSettings":this.notify(v,{module:"edit",properties:t.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify("freezerender",{case:"textwrap",isModeChg:"textWrapSettings"===e});break;case"dataSource":var i=this.getDataModule().getState();if(Object.getPrototypeOf(t).deepWatch)for(var n=this.getPrimaryKeyFieldNames()[0],s=0,o=Object.keys(t.dataSource);s<o.length;s++)this.setRowData(sf.base.getValue(n,this.dataSource[o[s]]),this.dataSource[o[s]]);else if(i.isPending){var a=sf.base.isNullOrUndefined(this.dataSource)?[]:this.dataSource.result,l=i.group||[];for(s=0;s<l.length;s++)a=sf.data.DataUtil.group(a,l[s],i.aggregates||[]);this.dataSource={result:a,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),i.resolver(this.dataSource)}else this.getDataModule().setState({isDataChanged:!1}),this.notify("datasource-modified",{}),r||this.renderModule.refresh();this.scrollRefresh();break;case"enableHover":(t.enableHover?sf.base.addClass:sf.base.removeClass)([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(t.selectedRowIndex),this.isSelectedRowIndexUpdating=!1}},r.prototype.maintainSelection=function(e){var t=this;if(-1!==e){this.on(g,(function r(){t.selectRow(e),t.off(g,r)}),this)}},r.prototype.setProperties=function(e,r){t.prototype.setProperties.call(this,e,r);e.filterSettings&&this.filterModule&&r&&this.filterModule.refreshFilter()},r.prototype.updateDefaultCursor=function(){var e=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)")),t=[].slice.call(this.getHeaderContent().querySelectorAll(".e-stackedheadercell")),r=this.getColumns();if(this.enableColumnVirtualization&&this.getFrozenColumns()){var i=this.contentModule.getHeaderCells();e=i.length?i:e}for(var n=0;n<e.length;n++){var s=e[n];(this.allowGrouping||this.allowReordering||this.allowSorting)&&(r[n].allowReordering&&r[n].allowSorting&&r[n].allowGrouping?s.classList.add("e-mousepointer"):s.classList.add("e-defaultcursor"))}for(var o=0;o<t.length;o++)this.allowReordering&&t[o].classList.add("e-mousepointer")},r.prototype.updateColumnModel=function(e){for(var t=0,r=e.length;t<r;t++)e[t].columns?this.updateColumnModel(e[t].columns):this.columnModel.push(e[t]);this.updateFrozenColumns(),this.updateLockableColumns()},r.prototype.updateFrozenColumns=function(){for(var e=this.columnModel,t=0,r=0,i=e.length;r<i;r++)e[r].isFrozen&&(e.splice(this.frozenColumns+t,0,e.splice(r,1)[0]),t++)},r.prototype.updateLockableColumns=function(){for(var e=this.columnModel,t=0,r=0,i=this.getFrozenColumns(),n=0;n<e.length;n++)e[n].lockColumn&&(n<i?(e.splice(t,0,e.splice(n,1)[0]),t++):(e.splice(i+r,0,e.splice(n,1)[0]),r++))},r.prototype.checkLockColumns=function(e){for(var t=0;t<e.length;t++)e[t].columns?this.checkLockColumns(e[t].columns):e[t].lockColumn&&this.lockcolPositionCount++},r.prototype.getColumns=function(e){var t=this,r=this.inViewIndexes.map((function(e){return e-t.groupSettings.columns.length})).filter((function(e){return e>-1})),i=r.length;(!this.enableColumnVirtualization||sf.base.isNullOrUndefined(this.columnModel)||0===this.columnModel.length||e)&&(this.columnModel=[],this.updateColumnModel(this.columns));var n=0===i?this.columnModel:this.columnModel.slice(r[0],r[i-1]+1);this.contentModule&&this.enableColumnVirtualization&&this.getFrozenColumns()&&r.length&&r[0]>0&&(n=this.contentModule.ensureFrozenCols(n));return n},r.prototype.getStackedHeaderColumnByHeaderText=function(e,t){for(var r=0;r<t.length;r++){var i=t[r];if(i.field===e||i.headerText===e){this.stackedColumn=i;break}i.columns&&this.getStackedHeaderColumnByHeaderText(e,i.columns)}return this.stackedColumn},r.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},r.prototype.getQuery=function(){return this.query},r.prototype.getLocaleConstants=function(){return this.defaultLocale},r.prototype.setColumnIndexesInView=function(e){this.inViewIndexes=e},r.prototype.getVisibleColumns=function(){for(var e=[],t=0,r=this.columnModel;t<r.length;t++){var i=r[t];i.visible&&e.push(i)}return e},r.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},r.prototype.setGridHeaderContent=function(e){this.headerModule.setPanel(e)},r.prototype.getContentTable=function(){return this.contentModule.getTable()},r.prototype.setGridContentTable=function(e){this.contentModule.setTable(e)},r.prototype.getContent=function(){return this.contentModule.getPanel()},r.prototype.setGridContent=function(e){this.contentModule.setPanel(e)},r.prototype.getHeaderTable=function(){return this.headerModule.getTable()},r.prototype.setGridHeaderTable=function(e){this.headerModule.setTable(e)},r.prototype.getFooterContent=function(){return this.footerElement=this.element.getElementsByClassName("e-gridfooter")[0],this.footerElement},r.prototype.getFooterContentTable=function(){return this.footerElement=this.element.getElementsByClassName("e-gridfooter")[0],this.footerElement.firstChild.firstChild},r.prototype.getPager=function(){return this.gridPager},r.prototype.setGridPager=function(e){this.gridPager=e},r.prototype.getRowByIndex=function(e){return this.contentModule.getRowByIndex(e)},r.prototype.getMovableRowByIndex=function(e){return this.contentModule.getMovableRowByIndex(e)},r.prototype.getFrozenRowByIndex=function(e){return this.getFrozenDataRows()[e]},r.prototype.getRows=function(){return this.contentModule.getRowElements()},r.prototype.getRowInfo=function(e){var t=e,r={target:e};if(!sf.base.isNullOrUndefined(e)&&sf.base.isNullOrUndefined(Ut(t,"e-detailrowcollapse")&&sf.base.isNullOrUndefined(Ut(t,"e-recordplusexpand")))&&!this.isEdit){var i=sf.base.closest(t,".e-rowcell");if(!i){var n=sf.base.closest(t,".e-row");if(!sf.base.isNullOrUndefined(n)){var s=this.getRowObjectFromUID(n.getAttribute("data-uid")),o=parseInt(n.getAttribute("aria-rowindex"),10);r={row:n,rowData:s.data,rowIndex:o}}return r}var a=parseInt(i.getAttribute("aria-colindex"),10);if(!sf.base.isNullOrUndefined(i)&&!isNaN(a)){var l=sf.base.closest(i,".e-row"),d=(o=parseInt(l.getAttribute("aria-rowindex"),10),this.getFrozenColumns()),c=!!d&&a>=d,h=(c?this.contentModule.getMovableRows():this.contentModule.getRows()).filter((function(e){return e.uid===l.getAttribute("data-uid")})),p={},u=void 0;Object.keys(h).length&&(p=h[0].data,u=h[0].cells[c?a-d:a+this.getIndentCount()].column),r={cell:i,cellIndex:a,row:l,rowIndex:o,rowData:p,column:u,target:e}}}return r},r.prototype.getMovableRows=function(){return this.contentModule.getMovableRowElements()},r.prototype.getDataRows=function(){if(sf.base.isNullOrUndefined(this.getContentTable().querySelector("tbody")))return[];var e=[].slice.call(this.getContentTable().querySelector("tbody").children);if(this.frozenRows){var t=[].slice.call(this.getHeaderTable().querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},r.prototype.addMovableRows=function(e,t){for(var r=0,i=t.length;r<i;r++)e.push(t[r]);return e},r.prototype.generateDataRows=function(e){for(var t=[],r=0,i=e.length;r<i;r++)e[r].classList.contains("e-row")&&!e[r].classList.contains("e-hiddenrow")&&(this.isCollapseStateEnabled()?t[parseInt(e[r].getAttribute("aria-rowindex"))]=e[r]:t.push(e[r]));return t},r.prototype.getMovableDataRows=function(){var e=[].slice.call(this.getContent().querySelector(".e-movablecontent").querySelector("tbody").children);if(this.frozenRows){var t=[].slice.call(this.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},r.prototype.getFrozenDataRows=function(){var e=[].slice.call(this.getContent().querySelector(".e-frozencontent").querySelector("tbody").children);if(this.frozenRows){var t=[].slice.call(this.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},r.prototype.setCellValue=function(e,t,r){var i,n,s,o,a,l=this.getPrimaryKeyFieldNames()[0],d=new G(this,this.serviceLocator),c={},h=this.contentModule.getRows(),p=this.contentModule.getMovableRows();if(i=this.getColumnIndexByField(t),this.groupSettings.columns.length&&(i+=this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&i++,this.isRowDragable()&&i++,n=this.getColumnByField(t),a=h.filter((function(t){return sf.base.getValue(l,t.data)===e}))[0],c=p.filter((function(t){return sf.base.getValue(l,t.data)===e}))[0],s=sf.base.isNullOrUndefined(a)?null:this.element.querySelector("[data-uid="+a.uid+"]"),o=sf.base.isNullOrUndefined(c)?null:this.element.querySelector("[data-uid="+c.uid+"]"),!sf.base.isNullOrUndefined(s)){sf.base.setValue(t,r,a.data);var u=sf.base.isNullOrUndefined(s.cells[i])?o.cells[i-this.frozenColumns]:s.cells[i];if(!sf.base.isNullOrUndefined(u)){var f=a.cells[i],g=void 0;this.frozenColumns&&(g=c.cells[i-this.frozenColumns]),d.refreshTD(u,sf.base.isNullOrUndefined(f)?g:f,a.data,{index:a.index}),this.aggregates.length>0&&(this.notify("refresh-footer-rendered",{}),this.groupSettings.columns.length>0&&this.notify("group-aggregates",{})),sf.base.isNullOrUndefined(c)||sf.base.isNullOrUndefined(c.changes)||(c.changes[t]=r),this.trigger("queryCellInfo",{cell:u,column:n,data:a.data})}}},r.prototype.setRowData=function(e,t){var r,i=this.contentModule.getRows(),n=this.getPrimaryKeyFieldNames()[0],s=new B(this.serviceLocator,null,this);this.groupSettings.columns.length>0&&this.aggregates.length>0&&(i=i.filter((function(e){return e.isDataRow}))),r=i.filter((function(t){return sf.base.getValue(n,t.data)===e}))[0],!sf.base.isNullOrUndefined(r)&&this.element.querySelectorAll("[data-uid="+r.uid+"]").length&&(r.changes=t,mr(r,this.getForeignKeyColumns(),r.changes),s.refresh(r,this.getColumns(),!0),this.aggregates.length>0&&(this.notify("refresh-footer-rendered",{}),this.groupSettings.columns.length>0&&this.notify("group-aggregates",{})))},r.prototype.getCellFromIndex=function(e,t){return this.getDataRows()[e]&&this.getDataRows()[e].querySelectorAll(".e-rowcell")[t]},r.prototype.getMovableCellFromIndex=function(e,t){return this.getMovableDataRows()[e]&&this.getMovableDataRows()[e].querySelectorAll(".e-rowcell")[t-this.getFrozenColumns()]},r.prototype.getColumnHeaderByIndex=function(e){return this.getHeaderTable().querySelectorAll(".e-headercell")[e]},r.prototype.getRowObjectFromUID=function(e){var t=this.contentModule.getRows(),r=this.rowObject(t,e);return this.getFrozenColumns()&&!r?r=this.rowObject(this.contentModule.getMovableRows(),e):sf.base.isNullOrUndefined(r)&&this.enableVirtualization&&this.groupSettings.columns.length>0?r=this.rowObject(this.vRows,e):r},r.prototype.rowObject=function(e,t){for(var r=0,i=e;r<i.length;r++){var n=i[r];if(n.uid===t)return n}return null},r.prototype.getRowsObject=function(){return this.contentModule.getRows()},r.prototype.getMovableRowsObject=function(){return this.contentModule.getMovableRows()},r.prototype.getColumnHeaderByField=function(e){var t=this.getColumnByField(e);return t?this.getColumnHeaderByUid(t.uid):void 0},r.prototype.getColumnHeaderByUid=function(e){var t=this.getHeaderContent().querySelector("[e-mappinguid="+e+"]");return t?t.parentElement:void 0},r.prototype.getColumnByIndex=function(e){var t;return this.getColumns().some((function(r,i){return t=r,i===e})),t},r.prototype.getColumnByField=function(e){return kt(this.getColumns(),(function(t,r){if(t.field===e)return t}))[0]},r.prototype.getColumnIndexByField=function(e){for(var t=this.getColumns(),r=0;r<t.length;r++)if(t[r].field===e)return r;return-1},r.prototype.getColumnByUid=function(e){return kt(this.getColumns().concat(this.getStackedColumns(this.columns)),(function(t,r){if(t.uid===e)return t}))[0]},r.prototype.getStackedColumns=function(e,t){void 0===t&&(t=[]);for(var r=0,i=e;r<i.length;r++){var n=i[r];n.columns&&(t.push(n),this.getStackedColumns(n.columns,t))}return t},r.prototype.getColumnIndexByUid=function(e){var t=kt(this.getColumns(),(function(t,r){if(t.uid===e)return r}))[0];return sf.base.isNullOrUndefined(t)?-1:t},r.prototype.getUidByColumnField=function(e){return kt(this.getColumns(),(function(t,r){if(t.field===e)return t.uid}))[0]},r.prototype.getNormalizedColumnIndex=function(e){return this.getColumnIndexByUid(e)+this.getIndentCount()},r.prototype.getIndentCount=function(){var e=0;return this.allowGrouping&&(e+=this.groupSettings.columns.length),this.isDetail()&&e++,this.allowRowDragAndDrop&&sf.base.isNullOrUndefined(this.rowDropSettings.targetID)&&e++,e},r.prototype.getColumnFieldNames=function(){for(var e,t=[],r=0,i=this.getColumns().length;r<i;r++)(e=this.getColumns()[r]).visible&&t.push(e.field);return t},r.prototype.getRowTemplate=function(){return this.rowTemplateFn},r.prototype.getDetailTemplate=function(){return this.detailTemplateFn},r.prototype.getEditTemplate=function(){return this.editTemplateFn},r.prototype.getEditHeaderTemplate=function(){return this.editHeaderTemplateFn},r.prototype.getEditFooterTemplate=function(){return this.editFooterTemplateFn},r.prototype.getPrimaryKeyFieldNames=function(){for(var e=[],t=0;t<this.columnModel.length;t++)this.columnModel[t].isPrimaryKey&&e.push(this.columnModel[t].field);return e},r.prototype.refresh=function(){this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh()},r.prototype.refreshHeader=function(){this.headerModule.refreshUI()},r.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},r.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},r.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]},r.prototype.getSelectedRecords=function(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]},r.prototype.getDataModule=function(){return this.renderModule.data},r.prototype.showColumns=function(e,t){t=t||"headerText",this.showHider.show(e,t)},r.prototype.hideColumns=function(e,t){t=t||"headerText",this.showHider.hide(e,t)},r.prototype.getFrozenColumns=function(){return this.frozenColumns+this.getFrozenCount(this.columns,0)},r.prototype.getVisibleFrozenColumns=function(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)},r.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},r.prototype.getVisibleFrozenColumnsCount=function(){for(var e=0,t=this.columns,r=0;r<this.frozenColumns;r++)t[r].visible&&e++;return e},r.prototype.getVisibleFrozenCount=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r].columns?t=this.getVisibleFrozenCount(e[r].columns,t):e[r].isFrozen&&e[r].visible&&t++;return t},r.prototype.getFrozenCount=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r].columns?t=this.getFrozenCount(e[r].columns,t):e[r].isFrozen&&t++;return t},r.prototype.goToPage=function(e){this.pagerModule&&this.pagerModule.goToPage(e)},r.prototype.updateExternalMessage=function(e){this.pagerModule&&this.pagerModule.updateExternalMessage(e)},r.prototype.sortColumn=function(e,t,r){this.sortModule&&this.sortModule.sortColumn(e,t,r)},r.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},r.prototype.removeSortColumn=function(e){this.sortModule&&this.sortModule.removeSortColumn(e)},r.prototype.filterByColumn=function(e,t,r,i,n,s,o,a){this.filterModule&&this.filterModule.filterByColumn(e,t,r,i,n,s,o,a)},r.prototype.clearFiltering=function(e){this.filterModule&&this.filterModule.clearFiltering(e)},r.prototype.removeFilteredColsByField=function(e,t){this.filterModule&&this.filterModule.removeFilteredColsByField(e,t)},r.prototype.selectRow=function(e,t){this.selectionModule&&this.selectionModule.selectRow(e,t)},r.prototype.selectRows=function(e){this.selectionModule&&this.selectionModule.selectRows(e)},r.prototype.clearSelection=function(){this.selectionModule&&this.selectionModule.clearSelection()},r.prototype.selectCell=function(e,t){this.selectionModule&&this.selectionModule.selectCell(e,t)},r.prototype.selectCellsByRange=function(e,t){this.selectionModule.selectCellsByRange(e,t)},r.prototype.search=function(e){this.searchModule&&this.searchModule.search(e)},r.prototype.print=function(){this.printModule&&this.printModule.print()},r.prototype.deleteRecord=function(e,t){this.editModule&&this.editModule.deleteRecord(e,t)},r.prototype.startEdit=function(){this.editModule&&this.editModule.startEdit()},r.prototype.endEdit=function(){this.editModule&&this.editModule.endEdit()},r.prototype.closeEdit=function(){this.editModule&&this.editModule.closeEdit()},r.prototype.addRecord=function(e,t){this.editModule&&this.editModule.addRecord(e,t)},r.prototype.deleteRow=function(e){this.editModule&&this.editModule.deleteRow(e)},r.prototype.editCell=function(e,t){this.editModule&&this.editModule.editCell(e,t)},r.prototype.saveCell=function(){this.editModule&&this.editModule.saveCell()},r.prototype.updateCell=function(e,t,r){this.editModule&&this.editModule.updateCell(e,t,r)},r.prototype.updateRow=function(e,t){this.editModule&&this.editModule.updateRow(e,t)},r.prototype.getBatchChanges=function(){return this.editModule?this.editModule.getBatchChanges():{}},r.prototype.enableToolbarItems=function(e,t){this.toolbarModule&&this.toolbarModule.enableItems(e,t)},r.prototype.copy=function(e){this.clipboardModule&&this.clipboardModule.copy(e)},r.prototype.recalcIndentWidth=function(){var e=this;if(this.getHeaderTable().querySelector(".e-emptycell")&&(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())&&!this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")&&this.getContentTable()){var t=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,r=[].slice.call(this.getHeaderTable().querySelector("colgroup").childNodes),i=[].slice.call(this.getContentTable().querySelector("colgroup").childNodes),n=t/30,s=0,o=function(t,n){r[t].style.width=n+"px",i[t].style.width=n+"px",e.notify("column-width-changed",{index:t,width:n})};for(n>=1&&(t=30/n),(this.enableColumnVirtualization||this.isAutoGen)&&(t=30);s<this.groupSettings.columns.length;)o(s,t),s++;this.isDetail()&&(o(s,t),s++),this.isRowDragable()&&o(s,t),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}},r.prototype.isRowDragable=function(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID},r.prototype.reorderColumns=function(e,t){this.reorderModule&&this.reorderModule.reorderColumns(e,t)},r.prototype.reorderColumnByIndex=function(e,t){this.reorderModule&&this.reorderModule.reorderColumnByIndex(e,t)},r.prototype.reorderColumnByTargetIndex=function(e,t){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(e,t)},r.prototype.reorderRows=function(e,t){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(e,t)},r.prototype.refreshDataSource=function(e,t){this.notify("refreshdataSource",e)},r.prototype.disableRowDD=function(e){var t=this.getHeaderTable(),r=this.getContentTable(),i=t.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),n=this.getRows(),s=e?"none":"";sf.base.setStyleAttribute(t.querySelector("colgroup").childNodes[0],{display:s}),sf.base.setStyleAttribute(r.querySelector("colgroup").childNodes[0],{display:s});for(var o=0;o<this.getRows().length;o++){var a=n[o].firstElementChild;e?sf.base.addClass([a],"e-hide"):sf.base.removeClass([a],["e-hide"])}for(var l=0;l<t.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;l++){a=i[l];e?sf.base.addClass([a],"e-hide"):sf.base.removeClass([a],["e-hide"])}},r.prototype.autoFitColumns=function(e){this.resizeModule&&this.resizeModule.autoFitColumns(e)},r.prototype.createColumnchooser=function(e,t,r){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(e,t,r)},r.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new Be(this)),this.serviceLocator.register("cellRendererFactory",new Me),this.serviceLocator.register("rendererFactory",new Ae),this.serviceLocator.register("localization",this.localeObj=new sf.base.L10n(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new s(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new $e(this)),this.serviceLocator.register("ariaService",this.ariaService=new _),this.serviceLocator.register("focus",this.focusModule=new ze(this))},r.prototype.processModel=function(){var e,t,r=this.groupSettings.columns,i=this.sortSettings.columns;if(this.allowGrouping)for(var n=function(n,o){t=0;for(var a=i.length;t<a;t++)if(i[t].field===r[n]){e=!0;break}if(e?s.allowSorting?s.sortedColumns.push(i[t].field):i[t].direction="Ascending":i.push({field:r[n],direction:"Ascending",isFromGroup:!0}),!s.groupSettings.showGroupedColumn){var l=s.enableColumnVirtualization?s.columns.filter((function(e){return e.field===r[n]}))[0]:s.getColumnByField(r[n]);l?l.visible=!1:s.log("initial_action",{moduleName:"group",columnName:r[n]})}},s=this,o=0,a=r.length;o<a;o++)n(o);if(!r.length)for(o=0;o<i.length;o++)this.sortedColumns.push(i[o].field);if(this.rowTemplateFn=Bt(this.rowTemplate),this.detailTemplateFn=Bt(this.detailTemplate),this.editTemplateFn=Bt(this.editSettings.template),this.editHeaderTemplateFn=Bt(this.editSettings.headerTemplate),this.editFooterTemplateFn=Bt(this.editSettings.footerTemplate),!sf.base.isNullOrUndefined(this.parentDetails)){var l=sf.base.isNullOrUndefined(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",l,!0)}this.initForeignColumn()},r.prototype.initForeignColumn=function(){this.isForeignKeyEnabled(this.getColumns())&&this.notify("initForeignKeyColumn",this.getForeignKeyColumns())},r.prototype.gridRender=function(){this.updateRTL(),this.enableHover&&this.element.classList.add("e-gridhover"),sf.base.Browser.isDevice&&this.element.classList.add("e-device"),this.rowHeight&&this.element.classList.add("e-grid-min-height"),sf.base.classList(this.element,["e-responsive","e-default"],[]);var t=this.serviceLocator.getService("rendererFactory");this.headerModule=t.getRenderer(e.RenderType.Header),this.contentModule=t.getRenderer(e.RenderType.Content),this.printModule=new St(this,this.scrollModule),this.clipboardModule=new nt(this),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()},r.prototype.dataReady=function(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),"auto"!==this.height&&this.scrollModule.setPadding()},r.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},r.prototype.createGridPopUpElement=function(){var e=this.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),t=this.createElement("div",{className:"e-content",attrs:{tabIndex:"-1"}});sf.base.append([t,this.createElement("div",{className:"e-uptail e-tail"})],e),t.appendChild(this.createElement("span")),sf.base.append([t,this.createElement("div",{className:"e-downtail e-tail"})],e),this.element.appendChild(e)},r.prototype.updateGridLines=function(){switch(sf.base.classList(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines")}this.updateResizeLines()},r.prototype.updateResizeLines=function(){this.allowResizing&&"Vertical"!==this.gridLines&&"Both"!==this.gridLines?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},r.prototype.applyTextWrap=function(){if(this.allowTextWrap){var e=[].slice.call(this.element.querySelectorAll(".e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":ar(this.element,!1),ar(this.getContent(),!1),ar(e,!0);break;case"Content":ar(this.getContent(),!0),ar(this.element,!1),ar(e,!1);break;default:ar(this.element,!0),ar(this.getContent(),!1),ar(e,!1)}}},r.prototype.removeTextWrap=function(){ar(this.element,!1),ar([].slice.call(this.element.querySelectorAll(".e-columnheader")),!1),ar(this.getContent(),!1)},r.prototype.createTooltip=function(){this.toolTipObj=new sf.popups.Tooltip({opensOn:"custom",content:""},this.element)},r.prototype.freezeRefresh=function(){this.enableVirtualization&&(this.pageSettings.currentPage=1),this.componentRefresh()},r.prototype.getTooltipStatus=function(e){var t,r=this.getHeaderTable(),i=(this.getContentTable(),this.createTable(r,"e-gridheader","header")),n=this.createTable(r,"e-gridheader","content"),s=e.classList.contains("e-headercell")?i:n,o=e.classList.contains("e-headercell")?"th":"tr";return s.querySelector(o).className=e.className,s.querySelector(o).innerHTML=e.innerHTML,t=s.querySelector(o).getBoundingClientRect().width,document.body.removeChild(i),document.body.removeChild(n),t>e.getBoundingClientRect().width},r.prototype.mouseMoveHandler=function(e){if(this.isEllipsisTooltip()){var t=Ut(e.target,"e-ellipsistooltip");this.prevElement===t&&"mouseout"!==e.type||this.toolTipObj.close();var r=e.target.tagName;if(t&&"mouseout"!==e.type&&(!sf.base.Browser.isDevice||-1===["A","BUTTON","INPUT"].indexOf(r))){if(t.getAttribute("aria-describedby"))return;this.getTooltipStatus(t)&&(t.getElementsByClassName("e-headertext").length?this.toolTipObj.content=t.getElementsByClassName("e-headertext")[0].innerText:this.toolTipObj.content=t.innerText,this.prevElement=t,this.toolTipObj.open(t))}}this.hoverFrozenRows(e)},r.prototype.hoverFrozenRows=function(e){if(this.getFrozenColumns()){var t=Ut(e.target,"e-row");if([].slice.call(this.element.querySelectorAll(".e-frozenhover")).length&&"mouseout"===e.type)for(var r=[].slice.call(this.element.querySelectorAll(".e-frozenhover")),i=0;i<r.length;i++)r[i].classList.remove("e-frozenhover");else if(t){(r=[].slice.call(this.element.querySelectorAll('tr[aria-rowindex="'+t.getAttribute("aria-rowindex")+'"]'))).splice(r.indexOf(t),1),"true"!=t.getAttribute("aria-selected")&&r[0]?r[0].classList.add("e-frozenhover"):r[0]&&r[0].classList.remove("e-frozenhover")}}},r.prototype.isEllipsisTooltip=function(){var e=this.getColumns();if("EllipsisWithTooltip"===this.clipMode)return!0;for(var t=0;t<e.length;t++)if("EllipsisWithTooltip"===e[t].clipMode)return!0;return!1},r.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.toolTipObj.close()},r.prototype.createTable=function(e,t,r){var i=this.createElement("div");i.className=this.element.className,i.style.cssText="display: inline-block;visibility:hidden;position:absolute";var n=this.createElement("div");n.className=t;var s=this.createElement("table");s.className=e.className,s.style.cssText="table-layout: auto;width: auto";var o="header"===r?"th":"td",a=this.createElement("tr"),l=this.createElement(o);return a.appendChild(l),s.appendChild(a),n.appendChild(s),i.appendChild(n),document.body.appendChild(i),i},r.prototype.onKeyPressed=function(e){"tab"!==e.action&&"shiftTab"!==e.action||this.toolTipObj.close()},r.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.mouseClickHandler,this),sf.base.EventHandler.add(this.element,"touchend",this.mouseClickHandler,this),sf.base.EventHandler.add(this.element,"focusout",this.focusOutHandler,this),sf.base.EventHandler.add(this.element,"dblclick",this.dblClickHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyPressHandler,this),this.allowKeyboard&&(this.element.tabIndex=-1===this.element.tabIndex?0:this.element.tabIndex),this.keyboardModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),sf.base.EventHandler.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),sf.base.EventHandler.add(this.element,"mousemove",this.mouseMoveHandler,this),sf.base.EventHandler.add(this.element,"mouseout",this.mouseMoveHandler,this),sf.base.EventHandler.add(this.getContent(),"touchstart",this.tapEvent,this),sf.base.EventHandler.add(document.body,"keydown",this.keyDownHandler,this)},r.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.element,"click",this.mouseClickHandler),sf.base.EventHandler.remove(this.element,"touchend",this.mouseClickHandler),sf.base.EventHandler.remove(this.element,"focusout",this.focusOutHandler),sf.base.EventHandler.remove(this.element,"dblclick",this.dblClickHandler),sf.base.EventHandler.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),sf.base.EventHandler.remove(this.element,"mousemove",this.mouseMoveHandler),sf.base.EventHandler.remove(this.element,"mouseout",this.mouseMoveHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyPressHandler),sf.base.EventHandler.remove(this.getContent(),"touchstart",this.tapEvent),sf.base.EventHandler.remove(document.body,"keydown",this.keyDownHandler)},r.prototype.addListener=function(){this.isDestroyed||(this.on(f,this.dataReady,this),this.on(g,this.recalcIndentWidth,this),this.on(C,this.recalcIndentWidth,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(h,this.dataBoundFunction),this.on(w,this.onKeyPressed,this),this.on(g,this.blazorTemplate,this))},r.prototype.removeListener=function(){this.isDestroyed||(this.off(f,this.dataReady),this.off(g,this.recalcIndentWidth),this.off(C,this.recalcIndentWidth),this.removeEventListener(h,this.dataBoundFunction),this.off(w,this.onKeyPressed))},r.prototype.blazorTemplate=function(){if(sf.base.isBlazor()){this.pageSettings.template&&sf.base.updateBlazorTemplate(this.element.id+"_template","Template",this.pageSettings);for(var e=0;e<this.columnModel.length;e++){if(this.columnModel[e].template&&sf.base.updateBlazorTemplate(this.element.id+this.columnModel[e].uid,"Template",this.columnModel[e],!1),this.columnModel[e].headerTemplate&&sf.base.updateBlazorTemplate(this.element.id+this.columnModel[e].uid+"headerTemplate","HeaderTemplate",this.columnModel[e],!1),"FilterBar"==this.filterSettings.type&&this.columnModel[e].filterTemplate){for(var t=this.columnModel[e].field,r=this.element.id+this.columnModel[e].uid+"filterTemplate",i=this.filterSettings.columns,n=0;n<i.length;n++)t==i[n].field&&(sf.base.blazorTemplates[r][0][t]=i[n].value);sf.base.updateBlazorTemplate(this.element.id+this.columnModel[e].uid+"filterTemplate","FilterTemplate",this.columnModel[e],!1)}"FilterBar"!=this.filterSettings.type&&this.columnModel[e].filterTemplate&&sf.base.updateBlazorTemplate(this.element.id+this.columnModel[e].uid+"filterTemplate","FilterTemplate",this.columnModel[e])}this.groupSettings.captionTemplate&&sf.base.updateBlazorTemplate(this.element.id+"captionTemplate","CaptionTemplate",this.groupSettings);for(n=0;n<this.aggregates.length;n++)for(var s=0;s<this.aggregates[n].columns.length;s++)this.aggregates[n].columns[s].footerTemplate&&sf.base.updateBlazorTemplate(this.element.id+this.aggregates[n].columns[s].guid+"footerTemplate","FooterTemplate",this.aggregates[n].columns[s]),this.aggregates[n].columns[s].groupFooterTemplate&&sf.base.updateBlazorTemplate(this.element.id+this.aggregates[n].columns[s].guid+"groupFooterTemplate","GroupFooterTemplate",this.aggregates[n].columns[s]),this.aggregates[n].columns[s].groupCaptionTemplate&&sf.base.updateBlazorTemplate(this.element.id+this.aggregates[n].columns[s].guid+"groupCaptionTemplate","GroupCaptionTemplate",this.aggregates[n].columns[s])}},r.prototype.getCurrentViewRecords=function(){return wr(this)?sf.base.isNullOrUndefined(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData},r.prototype.mouseClickHandler=function(e){if(!(this.isChildGrid(e)||Ut(e.target,"e-gridpopup")&&e.touches||this.element.querySelectorAll(".e-cloneproperties").length||this.checkEdit(e))&&((this.allowRowDragAndDrop||!Ut(e.target,"e-gridcontent")&&"TD"!==e.target.tagName)&&(this.allowGrouping||this.allowReordering||!Ut(e.target,"e-gridheader"))||!e.touches)){Ut(e.target,"e-gridheader")&&this.allowRowDragAndDrop&&e.preventDefault();var t=this.getRowInfo(e.target);t.cancel=!1;var r=!1,i=sf.base.closest(e.target,"tr");if(i&&i.getAttribute("data-uid")){var n=this.getRowObjectFromUID(i.getAttribute("data-uid"));r=!!n&&n.isDataRow}if(sf.base.isBlazor()){var s=sf.base.extend({},t.column);t={rowData:t.rowData,rowIndex:t.rowIndex,cellIndex:t.cellIndex,column:s}}r&&this.trigger("recordClick",t),this.notify(S,e)}},r.prototype.checkEdit=function(e){var t=Ut(e.target,"e-row"),r="Batch"!==this.editSettings.mode&&this.isEdit&&t&&(t.classList.contains("e-editedrow")||t.classList.contains("e-addedrow"));return!Ut(e.target,"e-unboundcelldiv")&&(r||Ut(e.target,"e-rowcell")&&Ut(e.target,"e-rowcell").classList.contains("e-editedbatchcell"))},r.prototype.dblClickHandler=function(e){var t=Ut(e.target,"e-grid");if(!sf.base.isNullOrUndefined(t)&&t.id===this.element.id&&!sf.base.closest(e.target,".e-unboundcelldiv")){var r=!1,i=sf.base.closest(e.target,"tr");if(i&&i.getAttribute("data-uid")){var n=this.getRowObjectFromUID(i.getAttribute("data-uid"));r=!!n&&n.isDataRow}var s=this.getRowInfo(e.target);s.target=e.target,r&&this.trigger("recordDoubleClick",s),this.notify("dblclick",e)}},r.prototype.focusOutHandler=function(e){if(!this.isChildGrid(e)){Ut(e.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");var t=this.element.querySelector(".e-cancel:not(.e-hide)");t&&t.classList.add("e-hide");var r=e.relatedTarget,i=r?r.getAttribute("aria-owns"):null;r&&(Ut(r,"e-grid")||(!sf.base.isNullOrUndefined(i)&&i)===e.target.getAttribute("aria-owns"))||this.keyPress||!this.isEdit||sf.base.Browser.isDevice||("Batch"===this.editSettings.mode&&(this.editModule.saveCell(),this.notify("editNextValCell",{})),"Normal"===this.editSettings.mode&&this.editModule.editFormValidate()),this.keyPress=!1}},r.prototype.isChildGrid=function(e){var t=Ut(e.target,"e-grid");return!(!t||t.id===this.element.id)},r.prototype.mergePersistGridData=function(e){var t=window.localStorage.getItem(this.getModuleName()+this.element.id);if(!sf.base.isNullOrUndefined(t)&&""!==t||!sf.base.isNullOrUndefined(e)){var r=sf.base.isNullOrUndefined(e)?JSON.parse(t):e;this.enableVirtualization&&(r.pageSettings.currentPage=1);var i=Object.keys(r);this.isProtectedOnChange=!0;for(var s=0,o=i;s<o.length;s++){var a=o[s];"object"!==n()(this[a])||sf.base.isNullOrUndefined(this[a])?this[a]=r[a]:Array.isArray(this[a])&&"columns"===a?(sf.base.isBlazor()&&this.isServerRendered||Nt(this[a]),this.mergeColumns(r[a],this[a]),this[a]=r[a]):sf.base.extend(this[a],r[a])}this.isProtectedOnChange=!1}},r.prototype.mergeColumns=function(e,t){for(var r=e,i=function(e){var i=t.filter((function(t){return t.index===r[e].index}))[0];if(!sf.base.isNullOrUndefined(i))if(i.columns&&i.columns.length)n.mergeColumns(r[e].columns,i.columns),r[e]=sf.base.extend(i,r[e],{},!0);else{if(sf.base.isBlazor()){r[e].guid=i.guid,r[e].uid=i.uid}r[e]=sf.base.extend(i,r[e],{},!0)}},n=this,s=0;s<r.length;s++)i(s)},r.prototype.isDetail=function(){return!sf.base.isNullOrUndefined(this.detailTemplate)||!sf.base.isNullOrUndefined(this.childGrid)},r.prototype.isCommandColumn=function(e){var t=this;return e.some((function(e){return e.columns?t.isCommandColumn(e.columns):!(!e.commands&&!e.commandsTemplate)}))},r.prototype.isForeignKeyEnabled=function(e){var t=this;return e.some((function(e){return e.columns?t.isForeignKeyEnabled(e.columns):!(!e.dataSource||!e.foreignKeyValue)}))},r.prototype.keyPressHandler=function(e){var t=sf.base.extend(e,{cancel:!1});this.trigger("keyPressed",t),!0===t.cancel&&e.stopImmediatePropagation()},r.prototype.keyDownHandler=function(e){e.altKey&&(74===e.keyCode&&(this.focusModule.focusHeader(),this.focusModule.addOutline()),87===e.keyCode&&(this.focusModule.focusContent(),this.focusModule.addOutline()))},r.prototype.keyActionHandler=function(e){this.keyPress="space"!==e.action,this.isChildGrid(e)||this.isEdit&&"escape"!==e.action&&"enter"!==e.action&&"shiftEnter"!==e.action&&"tab"!==e.action&&"shiftTab"!==e.action||this.allowKeyboard&&("ctrlPlusP"===e.action&&(e.preventDefault(),this.print()),this.notify(w,e))},r.prototype.setInjectedModules=function(e){this.injectedModules=e},r.prototype.updateColumnObject=function(){Lt(this.columns,this.enableColumnVirtualization),sf.base.isBlazor()&&this.isServerRendered||Nt(this.columns),this.initForeignColumn(),this.notify(I,{})},r.prototype.getForeignKeyColumns=function(){return this.getColumns().filter((function(e){return e.isForeignColumn()}))},r.prototype.getRowHeight=function(){return this.rowHeight?this.rowHeight:tr(this.element)},r.prototype.refreshColumns=function(){var e=this.getContent().querySelector(".e-frozencontent");if(1===this.getFrozenColumns()&&!e||0===this.getFrozenColumns()&&e)this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(this.isPreventScrollEvent=!0,this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.getFrozenColumns()){var t=this.contentModule.getMovableContent().querySelector(".e-table");sf.base.remove(t.querySelector("colgroup"));var r=this.getHeaderContent().querySelector(".e-movableheader").querySelector("colgroup").cloneNode(!0);t.insertBefore(r,t.querySelector("tbody"))}this.getFrozenColumns()&&(this.headerModule.getMovableHeader().scrollLeft=this.contentModule.getMovableContent().scrollLeft)},r.prototype.excelExport=function(e,t,r,i){return sf.base.isBlazor()?(this.excelExportModule.Map(this,e,t,r,!1,i),null):this.excelExportModule?this.excelExportModule.Map(this,e,t,r,!1,i):null},r.prototype.csvExport=function(e,t,r,i){return sf.base.isBlazor()?(this.excelExportModule.Map(this,e,t,r,!0,i),null):this.excelExportModule?this.excelExportModule.Map(this,e,t,r,!0,i):null},r.prototype.pdfExport=function(e,t,r,i){return sf.base.isBlazor()?(this.pdfExportModule.Map(this,e,t,r,i),null):this.pdfExportModule?this.pdfExportModule.Map(this,e,t,r,i):null},r.prototype.groupColumn=function(e){this.groupModule&&this.groupModule.groupColumn(e)},r.prototype.groupExpandAll=function(){this.groupModule&&this.groupModule.expandAll()},r.prototype.groupCollapseAll=function(){this.groupModule&&this.groupModule.collapseAll()},r.prototype.clearGrouping=function(){this.groupModule&&this.groupModule.clearGrouping()},r.prototype.ungroupColumn=function(e){this.groupModule&&this.groupModule.ungroupColumn(e)},r.prototype.openColumnChooser=function(e,t){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(e,t)},r.prototype.scrollRefresh=function(){var e=this;this.on(g,(function t(){e.scrollModule.refresh(),e.off(g,t)}),this)},r.prototype.detailCollapseAll=function(){this.detailRowModule&&this.detailRowModule.collapseAll()},r.prototype.detailExpandAll=function(){this.detailRowModule&&this.detailRowModule.expandAll()},r.prototype.clearCellSelection=function(){this.selectionModule&&this.selectionModule.clearCellSelection()},r.prototype.clearRowSelection=function(){this.selectionModule&&this.selectionModule.clearRowSelection()},r.prototype.selectCells=function(e){this.selectionModule&&this.selectionModule.selectCells(e)},r.prototype.selectRowsByRange=function(e,t){this.selectionModule&&this.selectionModule.selectRowsByRange(e,t)},r.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},r.prototype.ensureModuleInjected=function(e){return this.getInjectedModules().indexOf(e)>=0},r.prototype.destroyTemplate=function(e,t){this.clearTemplate(e,t)},r.prototype.log=function(e,t){this.loggerModule&&this.loggerModule.log(e,t)},r.prototype.applyBiggerTheme=function(e){this.element.classList.contains("e-bigger")&&e.classList.add("e-bigger")},r.prototype.getPreviousRowData=function(){return this.getRowsObject()[this.getRows().length-1].data},r.prototype.hideScroll=function(){var e=this.getContent().querySelector(".e-content"),t=e.querySelector(".e-movablecontent")?e.querySelector(".e-movablecontent"):e,r=e.querySelector(".e-frozencontent")?e.querySelector(".e-frozencontent"):e;t.scrollHeight<=t.clientHeight&&r.scrollHeight<=r.clientHeight&&(this.scrollModule.removePadding(),t.style.overflowY="auto"),this.frozenColumns&&t.scrollWidth<=t.clientWidth&&(t.style.overflowX="auto",t.style.overflowY="auto",this.notify("frozenHeight",0))},r.prototype.getRowIndexByPrimaryKey=function(e){var t=this.getPrimaryKeyFieldNames()[0];e="object"===n()(e)?e[t]:e;for(var r=0;r<this.getRowsObject().length;r++)if(this.getRowsObject()[r].data[t]===e)return this.getRowsObject()[r].index;return-1},r.prototype.grabColumnByFieldFromAllCols=function(e){var t;this.columnModel=[],this.updateColumnModel(this.columns);for(var r=this.columnModel,i=0;i<r.length;i++)e===r[i].field&&(t=r[i]);return t},r.prototype.grabColumnByUidFromAllCols=function(e){var t;this.columnModel=[],this.updateColumnModel(this.columns);for(var r=this.columnModel,i=0;i<r.length;i++)e===r[i].uid&&(t=r[i]);return t},r.prototype.getFilteredRecords=function(){if(this.allowFiltering&&this.filterSettings.columns.length){var e=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof sf.data.DataManager?this.renderModule.data.getData(this.dataSource,e):this.dataSource instanceof sf.data.DataManager?this.dataSource.executeLocal(e):new sf.data.DataManager(this.dataSource,e).executeLocal(e)}return[]},r.prototype.getUserAgent=function(){var e=sf.base.Browser.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)},r.prototype.tapEvent=function(t){this.getUserAgent()&&(e.Global.timer?(clearTimeout(e.Global.timer),e.Global.timer=null,this.dblClickHandler(t),this.notify("double-tap",t)):e.Global.timer=setTimeout((function(){e.Global.timer=null}),300))},r.prototype.getRowUid=function(e){return""+e+this.rowUid++},r.prototype.getMovableVirtualContent=function(){return this.getContent().querySelector(".e-movablecontent")},r.prototype.getFrozenVirtualContent=function(){return this.getContent().querySelector(".e-frozencontent")},r.prototype.getMovableVirtualHeader=function(){return this.getHeaderContent().querySelector(".e-movableheader")},r.prototype.getFrozenVirtualHeader=function(){return this.getHeaderContent().querySelector(".e-frozenheader")},r.prototype.getRowElementByUID=function(e){var t,r=[];if(this.getFrozenColumns()){var i=[].slice.call(this.getFrozenVirtualContent().querySelector("tbody").children),n=[].slice.call(this.getMovableVirtualContent().querySelector("tbody").children);r=this.frozenRows?(r=(r=[].slice.call(this.getFrozenVirtualHeader().querySelector("tbody").children)).concat([].slice.call(this.getMovableVirtualHeader().querySelector("tbody").children))).concat(i).concat(n):i.concat(n)}else{var s=[].slice.call(this.getContent().querySelector("tbody").children);r=this.frozenRows?(r=[].slice.call(this.getHeaderContent().querySelector("tbody").children)).concat(s):s}for(var o=0,a=r;o<a.length;o++){var l=a[o];if(l.getAttribute("data-uid")===e){t=l;break}}return t},r.prototype.getHiddenColumns=function(){for(var e=[],t=0,r=this.columnModel;t<r.length;t++){var i=r[t];!1===i.visible&&e.push(i)}return e},r.prototype.calculatePageSizeByParentHeight=function(e){if(this.allowPaging&&(this.allowTextWrap&&"Header"==this.textWrapSettings.wrapMode||!this.allowTextWrap)){var t=0;if(-1!=e.indexOf("%")&&(e=parseInt(e)/100*this.element.clientHeight),e>this.getNoncontentHeight()+this.getRowHeight()){t=(e-this.getNoncontentHeight())/this.getRowHeight()}if(t>0)return Math.floor(t)}return 0},r.prototype.getNoncontentHeight=function(){var e=0;if(sf.base.isNullOrUndefined(this.getHeaderContent().clientHeight)||(e+=this.getHeaderContent().clientHeight),this.toolbar&&!sf.base.isNullOrUndefined(this.element.querySelector(".e-toolbar").clientHeight)&&(e+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!sf.base.isNullOrUndefined(this.element.querySelector(".e-gridpager").clientHeight)&&(e+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!sf.base.isNullOrUndefined(this.element.querySelector(".e-columnheader").clientHeight)&&(e+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!sf.base.isNullOrUndefined(this.element.querySelector(".e-groupdroparea").clientHeight)&&(e+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!sf.base.isNullOrUndefined(this.element.querySelector(".e-summaryrow").clientHeight))for(var t=0;t<this.element.querySelectorAll(".e-summaryrow").length;t++)e+=this.element.querySelectorAll(".e-summaryrow")[t].clientHeight;return e},r.prototype.getSummaryValues=function(e,t){return sf.data.DataUtil.aggregates[e.type.toLowerCase()](t,e.field)},r.prototype.isCollapseStateEnabled=function(){return!1===this.isExpanded},r.prototype.updateRowValue=function(e,t){var r={requestType:"save",data:t};this.showSpinner(),this.notify("update-data",r),this.refresh()},r.prototype.setForeignKeyData=function(){this.dataBind();var e=this.getDataModule().getForeignKeyDataState();e.isPending?(this.getDataModule().setForeignKeyDataState({}),e.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())},r.prototype.resetFilterDlgPosition=function(e){var t=this.getColumnHeaderByField(e);if(t){var r=t.querySelector(".e-filtermenudiv"),i=this.element.querySelector(".e-filter-popup");if(r&&i){var n=this.element.getBoundingClientRect(),s=r.getBoundingClientRect();i&&(i.style.left=(s.right-n.left).toString()+"px")}}},lt([sf.base.Property()],r.prototype,"parentDetails",void 0),lt([sf.base.Property([])],r.prototype,"columns",void 0),lt([sf.base.Property(!0)],r.prototype,"enableAltRow",void 0),lt([sf.base.Property(!0)],r.prototype,"enableHover",void 0),lt([sf.base.Property(!1)],r.prototype,"enableAutoFill",void 0),lt([sf.base.Property(!0)],r.prototype,"allowKeyboard",void 0),lt([sf.base.Property(!1)],r.prototype,"allowTextWrap",void 0),lt([sf.base.Complex({},yt)],r.prototype,"textWrapSettings",void 0),lt([sf.base.Property(!1)],r.prototype,"allowPaging",void 0),lt([sf.base.Complex({},_e)],r.prototype,"pageSettings",void 0),lt([sf.base.Property(!1)],r.prototype,"enableVirtualization",void 0),lt([sf.base.Property(!1)],r.prototype,"enableColumnVirtualization",void 0),lt([sf.base.Property(!1)],r.prototype,"enableInfiniteScrolling",void 0),lt([sf.base.Complex({},gt)],r.prototype,"searchSettings",void 0),lt([sf.base.Property(!1)],r.prototype,"allowSorting",void 0),lt([sf.base.Property("Ellipsis")],r.prototype,"clipMode",void 0),lt([sf.base.Property(!0)],r.prototype,"allowMultiSorting",void 0),lt([sf.base.Property(!1)],r.prototype,"allowExcelExport",void 0),lt([sf.base.Property(!1)],r.prototype,"allowPdfExport",void 0),lt([sf.base.Complex({},ct)],r.prototype,"sortSettings",void 0),lt([sf.base.Complex({},pt)],r.prototype,"infiniteScrollSettings",void 0),lt([sf.base.Property(!0)],r.prototype,"allowSelection",void 0),lt([sf.base.Property(-1)],r.prototype,"selectedRowIndex",void 0),lt([sf.base.Complex({},ft)],r.prototype,"selectionSettings",void 0),lt([sf.base.Property(!1)],r.prototype,"allowFiltering",void 0),lt([sf.base.Property(!1)],r.prototype,"allowReordering",void 0),lt([sf.base.Property(!1)],r.prototype,"allowResizing",void 0),lt([sf.base.Property(!1)],r.prototype,"allowRowDragAndDrop",void 0),lt([sf.base.Complex({},mt)],r.prototype,"rowDropSettings",void 0),lt([sf.base.Complex({},ut)],r.prototype,"filterSettings",void 0),lt([sf.base.Property(!1)],r.prototype,"allowGrouping",void 0),lt([sf.base.Property(!1)],r.prototype,"showColumnMenu",void 0),lt([sf.base.Complex({},vt)],r.prototype,"groupSettings",void 0),lt([sf.base.Complex({},bt)],r.prototype,"editSettings",void 0),lt([sf.base.Collection([],it)],r.prototype,"aggregates",void 0),lt([sf.base.Property(!1)],r.prototype,"showColumnChooser",void 0),lt([sf.base.Complex({},Qe)],r.prototype,"columnChooserSettings",void 0),lt([sf.base.Property(!1)],r.prototype,"enableHeaderFocus",void 0),lt([sf.base.Property("auto")],r.prototype,"height",void 0),lt([sf.base.Property("auto")],r.prototype,"width",void 0),lt([sf.base.Property("Default")],r.prototype,"gridLines",void 0),lt([sf.base.Property()],r.prototype,"rowTemplate",void 0),lt([sf.base.Property()],r.prototype,"detailTemplate",void 0),lt([sf.base.Property()],r.prototype,"childGrid",void 0),lt([sf.base.Property()],r.prototype,"queryString",void 0),lt([sf.base.Property("AllPages")],r.prototype,"printMode",void 0),lt([sf.base.Property("Expanded")],r.prototype,"hierarchyPrintMode",void 0),lt([sf.base.Property([])],r.prototype,"dataSource",void 0),lt([sf.base.Property(null)],r.prototype,"rowHeight",void 0),lt([sf.base.Property()],r.prototype,"query",void 0),lt([sf.base.Property("USD")],r.prototype,"currencyCode",void 0),lt([sf.base.Property()],r.prototype,"toolbar",void 0),lt([sf.base.Property()],r.prototype,"contextMenuItems",void 0),lt([sf.base.Property()],r.prototype,"columnMenuItems",void 0),lt([sf.base.Property()],r.prototype,"toolbarTemplate",void 0),lt([sf.base.Property()],r.prototype,"pagerTemplate",void 0),lt([sf.base.Property(0)],r.prototype,"frozenRows",void 0),lt([sf.base.Property(0)],r.prototype,"frozenColumns",void 0),lt([sf.base.Property("All")],r.prototype,"columnQueryMode",void 0),lt([sf.base.Property({})],r.prototype,"currentAction",void 0),lt([sf.base.Event()],r.prototype,"created",void 0),lt([sf.base.Event()],r.prototype,"destroyed",void 0),lt([sf.base.Event()],r.prototype,"load",void 0),lt([sf.base.Event()],r.prototype,"rowDataBound",void 0),lt([sf.base.Event()],r.prototype,"queryCellInfo",void 0),lt([sf.base.Event()],r.prototype,"headerCellInfo",void 0),lt([sf.base.Event()],r.prototype,"actionBegin",void 0),lt([sf.base.Event()],r.prototype,"actionComplete",void 0),lt([sf.base.Event()],r.prototype,"actionFailure",void 0),lt([sf.base.Event()],r.prototype,"dataBound",void 0),lt([sf.base.Event()],r.prototype,"recordDoubleClick",void 0),lt([sf.base.Event()],r.prototype,"recordClick",void 0),lt([sf.base.Event()],r.prototype,"rowSelecting",void 0),lt([sf.base.Event()],r.prototype,"rowSelected",void 0),lt([sf.base.Event()],r.prototype,"rowDeselecting",void 0),lt([sf.base.Event()],r.prototype,"rowDeselected",void 0),lt([sf.base.Event()],r.prototype,"cellSelecting",void 0),lt([sf.base.Event()],r.prototype,"cellSelected",void 0),lt([sf.base.Event()],r.prototype,"cellDeselecting",void 0),lt([sf.base.Event()],r.prototype,"cellDeselected",void 0),lt([sf.base.Event()],r.prototype,"columnDragStart",void 0),lt([sf.base.Event()],r.prototype,"columnDrag",void 0),lt([sf.base.Event()],r.prototype,"columnDrop",void 0),lt([sf.base.Event()],r.prototype,"printComplete",void 0),lt([sf.base.Event()],r.prototype,"beforePrint",void 0),lt([sf.base.Event()],r.prototype,"pdfQueryCellInfo",void 0),lt([sf.base.Event()],r.prototype,"pdfHeaderQueryCellInfo",void 0),lt([sf.base.Event()],r.prototype,"exportDetailDataBound",void 0),lt([sf.base.Event()],r.prototype,"excelQueryCellInfo",void 0),lt([sf.base.Event()],r.prototype,"excelHeaderQueryCellInfo",void 0),lt([sf.base.Event()],r.prototype,"beforeExcelExport",void 0),lt([sf.base.Event()],r.prototype,"excelExportComplete",void 0),lt([sf.base.Event()],r.prototype,"beforePdfExport",void 0),lt([sf.base.Event()],r.prototype,"pdfExportComplete",void 0),lt([sf.base.Event()],r.prototype,"rowDragStartHelper",void 0),lt([sf.base.Event()],r.prototype,"detailDataBound",void 0),lt([sf.base.Event()],r.prototype,"rowDragStart",void 0),lt([sf.base.Event()],r.prototype,"rowDrag",void 0),lt([sf.base.Event()],r.prototype,"rowDrop",void 0),lt([sf.base.Event()],r.prototype,"toolbarClick",void 0),lt([sf.base.Event()],r.prototype,"beforeOpenColumnChooser",void 0),lt([sf.base.Event()],r.prototype,"batchAdd",void 0),lt([sf.base.Event()],r.prototype,"batchDelete",void 0),lt([sf.base.Event()],r.prototype,"batchCancel",void 0),lt([sf.base.Event()],r.prototype,"beforeBatchAdd",void 0),lt([sf.base.Event()],r.prototype,"beforeBatchDelete",void 0),lt([sf.base.Event()],r.prototype,"beforeBatchSave",void 0),lt([sf.base.Event()],r.prototype,"beginEdit",void 0),lt([sf.base.Event()],r.prototype,"commandClick",void 0),lt([sf.base.Event()],r.prototype,"cellEdit",void 0),lt([sf.base.Event()],r.prototype,"cellSave",void 0),lt([sf.base.Event()],r.prototype,"cellSaved",void 0),lt([sf.base.Event()],r.prototype,"resizeStart",void 0),lt([sf.base.Event()],r.prototype,"resizing",void 0),lt([sf.base.Event()],r.prototype,"resizeStop",void 0),lt([sf.base.Event()],r.prototype,"keyPressed",void 0),lt([sf.base.Event()],r.prototype,"beforeDataBound",void 0),lt([sf.base.Event()],r.prototype,"contextMenuOpen",void 0),lt([sf.base.Event()],r.prototype,"contextMenuClick",void 0),lt([sf.base.Event()],r.prototype,"columnMenuOpen",void 0),lt([sf.base.Event()],r.prototype,"columnMenuClick",void 0),lt([sf.base.Event()],r.prototype,"checkBoxChange",void 0),lt([sf.base.Event()],r.prototype,"beforeCopy",void 0),lt([sf.base.Event()],r.prototype,"beforePaste",void 0),lt([sf.base.Event()],r.prototype,"beforeAutoFill",void 0),lt([sf.base.Event()],r.prototype,"columnDataStateChange",void 0),lt([sf.base.Event()],r.prototype,"dataStateChange",void 0),lt([sf.base.Event()],r.prototype,"dataSourceChanged",void 0),lt([sf.base.Event()],r.prototype,"exportGroupCaption",void 0),r=i=lt([sf.base.NotifyPropertyChanges],r)}(sf.base.Component);function wt(){return["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound"]}var St=function(){function e(e,t){this.isAsyncPrint=!1,this.defered=new sf.data.Deferred,this.parent=e,this.parent.isDestroyed||(this.parent.on(g,this.isContentReady(),this),this.parent.addEventListener(d,this.actionBegin.bind(this)),this.parent.on(y,this.onEmpty.bind(this)),this.parent.on("hierarchyprint",this.hierarchyPrint,this),this.scrollModule=t)}return e.prototype.isContentReady=function(){var e=this;return!this.isPrintGrid()||"None"!==this.parent.hierarchyPrintMode&&this.parent.childGrid?function(){e.defered.promise.then((function(){e.contentReady()})),e.isPrintGrid()&&e.hierarchyPrint()}:this.contentReady},e.prototype.hierarchyPrint=function(){this.removeColGroup(this.parent);var e=window.printGridObj;e&&!e.element.querySelector("[aria-busy=true")&&e.printModule.defered.resolve()},e.prototype.print=function(){this.renderPrintGrid(),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight)},e.prototype.onEmpty=function(){this.isPrintGrid()&&this.contentReady()},e.prototype.actionBegin=function(){this.isPrintGrid()&&(this.isAsyncPrint=!0)},e.prototype.renderPrintGrid=function(){var e=this.parent,t=sf.base.createElement("div",{id:this.parent.element.id+"_print",className:e.element.className+" e-print-grid"});document.body.appendChild(t);var r=new Ct(Ir(e,e.hierarchyPrintMode));this.parent.isAngular&&(r.viewContainerRef=this.parent.viewContainerRef),r.load=function(){},r.query=e.getQuery().clone(),window.printGridObj=r,r.isPrinting=!0;var i=r.getInjectedModules(),n=e.getInjectedModules();i&&i.length===n.length||r.setInjectedModules(n),e.notify("printGrid-Init",{element:t,printgrid:r}),this.parent.log("exporting_begin",this.getModuleName()),r.registeredTemplate=this.parent.registeredTemplate,r.appendTo(t),r.trigger=e.trigger},e.prototype.contentReady=function(){if(this.isPrintGrid()){var e=this.parent;if(this.isAsyncPrint)return void this.printGrid();var t={requestType:"print",element:e.element,selectedRows:e.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:e.hierarchyPrintMode};if(this.isAsyncPrint||e.trigger("beforePrint",t),t.cancel)return void sf.base.detach(e.element);this.isAsyncPrint||this.printGrid()}},e.prototype.printGrid=function(){var e=this.parent;if("auto"!==e.height){var t=this.scrollModule.getCssProperties(),r=e.element.querySelector(".e-content"),i=e.element.querySelector(".e-gridheader");r.style.height="auto",r.style.overflowY="auto",i.style[t.padding]="",i.firstElementChild.style[t.border]=""}e.allowGrouping&&(e.groupSettings.columns.length?this.removeColGroup(e):e.element.querySelector(".e-groupdroparea").style.display="none");for(var n=0,s=[].slice.call(e.element.querySelectorAll(".e-content"));n<s.length;n++){(d=s[n]).style.overflowX="hidden"}for(var o=e.element.querySelectorAll(".e-spin-show"),a=0,l=[].slice.call(o);a<l.length;a++){var d=l[a];sf.base.classList(d,["e-spin-hide"],["e-spin-show"])}this.printGridElement(e),e.isPrinting=!1,delete window.printGridObj;var c={element:e.element};e.trigger("printComplete",c),this.parent.log("exporting_complete",this.getModuleName())},e.prototype.printGridElement=function(e){sf.base.classList(e.element,["e-print-grid-layout"],["e-print-grid"]),e.isPrinting&&sf.base.detach(e.element),this.printWind=sf.base.print(e.element,this.printWind)},e.prototype.removeColGroup=function(e){var t=e.groupSettings.columns.length,r=e.element,i="#"+e.element.id;if(t){for(var n=r.querySelectorAll(i+"captioncell.e-groupcaption"),s=n[t-1].getAttribute("colspan"),o=0;o<n.length;o++)n[o].setAttribute("colspan",s);var a=r.querySelectorAll("colgroup"+i+"colGroup"),l=r.querySelector(".e-content").querySelectorAll("colgroup");this.hideColGroup(a,t),this.hideColGroup(l,t)}},e.prototype.hideColGroup=function(e,t){for(var r=0;r<e.length;r++)for(var i=0;i<t;i++)e[r].childNodes[i].style.display="none"},e.prototype.isPrintGrid=function(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting},e.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(g,this.contentReady.bind(this)),this.parent.removeEventListener(d,this.actionBegin.bind(this)),this.parent.off(y,this.onEmpty.bind(this)),this.parent.off("hierarchyprint",this.hierarchyPrint))},e.prototype.getModuleName=function(){return"print"},e.printGridProp=["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound"].concat(["beforePrint","printComplete","load"]),e}();function xt(e,t){return e.prototype&&t in e.prototype}function Rt(e,t,r){return sf.base.isNullOrUndefined(e)||""===e?"":sf.data.DataUtil.getObject(e,t)}function It(e,t){requestAnimationFrame((function(){try{t(null,e())}catch(e){t(e)}}))}function Tt(e){return!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(e.columns)&&e.columns.length>0}function Et(e,t){for(var r=e.columns,i=t.columns,n=0;n<r.length;n++)if(i.length-1>=n)if(i[n].columns)for(var s=0;s<i[n].columns.length;s++)r[n].columns[s].type=i[n].columns[s].type;else r[n].type=i[n].type}function Dt(e){for(var t=[],r=e.vRows,i=0;i<r.length;i++)r[i].isDataRow?t.push(r[i]):r[i].isDataRow||(t.push(r[i]),!r[i].isExpand&&r[i].isCaptionRow&&(i+=Ot(r[i],e)));e.vcRows=t}var Ft=0;function Ot(e,t){Ft=0;var r=t.groupSettings.columns.length,i="items",n=e.gSummary,s=0,o="aggregatesCount";if(n===e.data.count)return t.groupSettings.columns.length&&!sf.base.isNullOrUndefined(e[o])&&e[o]?1!==t.groupSettings.columns.length?Ft+=0!==e.indent&&n<2?e.gSummary*(r-e.indent+(r-e.indent)*e[o]):e.gSummary*(r-e.indent+(r-e.indent-1)*e[o])+e[o]:1===t.groupSettings.columns.length&&(Ft+=e.gSummary*(r-e.indent)+e[o]):t.groupSettings.columns.length&&(1!==t.groupSettings.columns.length?Ft+=e.gSummary*(t.groupSettings.columns.length-e.indent):Ft+=e.gSummary),Ft;for(var a=0,l=e.data[i].length;a<l;a++){var d=e.data[i][a];Ft+=d[i].length+(r===t.columns.length||sf.base.isNullOrUndefined(d[i].records)?0:d[i].records.length),s+=sf.base.isNullOrUndefined(d[i].records)||sf.base.isNullOrUndefined(e[o])?d[i].length:d[i].records.length,d[i].GroupGuid&&0!==d[i].childLevels&&Mt(d)}return Ft+=e.data[i].length,sf.base.isNullOrUndefined(e[o])||e[o]&&Ft&&0!==s&&(Ft+=(Ft-s)*e[o]+e[o]),Ft}function Mt(e){for(var t=0,r=e.items.length;t<r;t++){var i=e.items[t];Ft+=i.count,0!==i.items.childLevels&&Mt(i)}}function kt(e,t){for(var r=[],i=0,n=e.length;i<n;i++){var s=t(e[i],i);sf.base.isNullOrUndefined(s)||r.push(s)}return r}function At(e){for(var t=[],r=0;r<e.length;r++)t.push(sf.base.extend({},Ht(e[r]),{},!0));return t}function Bt(e){if(e)try{if(document.querySelectorAll(e).length)return sf.base.compile(document.querySelector(e).innerHTML.trim())}catch(t){return sf.base.compile(e)}}function Pt(e,t){var r={},i=["style","class"];sf.base.extend(r,t,{}),"style"in r&&(sf.base.setStyleAttribute(e,r[i[0]]),delete r[i[0]]),"class"in r&&(sf.base.addClass([e],r[i[1]]),delete r[i[1]]),sf.base.attributes(e,r)}function zt(e,t,r,i){for(var n=sf.base.extend(e,t,r),s=Object.keys(n),o=0;o<s.length;o++)i&&-1!==i.indexOf(s[o])&&delete n[s[o]];return n}function Nt(e,t){void 0===t&&(t=0);for(var r=0,i=e.length;r<i;r++)e[r].columns?(e[r].index=sf.base.isNullOrUndefined(e[r].index)?t:e[r].index,t++,t=Nt(e[r].columns,t)):(e[r].index=sf.base.isNullOrUndefined(e[r].index)?t:e[r].index,t++);return t}function Lt(e,t){for(var r=0,i=e.length;r<i;r++){var n=void 0;"string"==typeof e[r]?n=new a({field:e[r]}):e[r]instanceof a?n=e[r]:e[r].columns?(e[r].columns=Lt(e[r].columns),n=new a(e[r])):n=new a(e[r]),n.type&&"checkbox"===n.type.toLowerCase()&&(n.allowReordering=!1),n.headerText=sf.base.isNullOrUndefined(n.headerText)?n.foreignKeyValue||n.field||"":n.headerText,n.foreignKeyField=n.foreignKeyField||n.field,n.valueAccessor=("string"==typeof n.valueAccessor?sf.base.getValue(n.valueAccessor,window):n.valueAccessor)||Rt,n.width=t&&sf.base.isNullOrUndefined(n.width)?200:n.width,sf.base.isNullOrUndefined(n.visible)&&(n.visible=!0),e[r]=n}return e}function qt(e,t,r){var i,n=e.querySelector("span"),s=e.parentElement.getBoundingClientRect(),o=t.target.getBoundingClientRect();n.className=r,e.style.display="",i=(sf.base.isNullOrUndefined(t.clientY)?t.changedTouches[0].clientY:t.clientY)>e.offsetHeight+10,e.style.top=o.top-s.top+(i?-(e.offsetHeight+10):e.offsetHeight+10)+"px",e.style.left=function(e,t,r,i){var n=e.offsetWidth/2,s=Kt(t).x;return s-r.left<n?r.left-i:r.right-s<n?r.right-i-2*n:s-i-n}(e,t,o,s.left)+"px",i?(e.querySelector(".e-downtail").style.display="",e.querySelector(".e-uptail").style.display="none"):(e.querySelector(".e-downtail").style.display="none",e.querySelector(".e-uptail").style.display="")}function Ht(e){return e instanceof sf.base.ChildProperty?sf.base.getValue("properties",e):e}function Ut(e,t,r){for(var i=e;i&&!(r?i.id===t:i.classList.contains(t));)i=i.parentElement;return i}function jt(e,t){for(var r=-1,i=0,n=t.length;i<n;i++)if(t[i].isEqualNode(e)){r=i;break}return r}function Vt(e,t){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}function Gt(e){for(var t=[],r=0,i=e.length;r<i;r++)e[r].hasOwnProperty("properties")?t.push(e[r].properties):t.push(e[r]);return t}function _t(e,t){for(var r=[].slice.call(e.querySelectorAll(t)),i=0;i<r.length;i++)sf.base.remove(r[i])}function Kt(e){var t={};return t.x=sf.base.isNullOrUndefined(e.clientX)?e.changedTouches[0].clientX:e.clientX,t.y=sf.base.isNullOrUndefined(e.clientY)?e.changedTouches[0].clientY:e.clientY,t}var Wt=0;function Qt(e){return e+Wt++}function Jt(e,t){for(var r=0,i=t.length;r<i;r++)i===t.length?e.appendChild(t[r]):e.appendChild(t[0]);return e}function Xt(e,t,r){for(var i=e,n=[];i;)(r?i.id===t:i.classList.contains(t))&&n.push(i),i=i.parentElement;return n}function Yt(e,t,r,i){if("Custom"===e){var n=r.customAggregate;return"string"==typeof n&&(n=sf.base.getValue(n,window)),n?n.call(i,t,r):""}return r.field in t||t instanceof Array?sf.data.DataUtil.aggregates[e.toLowerCase()](t,r.field):null}var $t,Zt=null;function er(){if(null!==Zt)return Zt;var e,t=document.createElement("div");return t.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(t),e=t.offsetWidth-t.clientWidth|0,document.body.removeChild(t),Zt=e}function tr(e){if(void 0!==$t)return $t;var t=sf.base.createElement("table",{className:"e-table",styles:"visibility: hidden"});t.innerHTML='<tr><td class="e-rowcell">A<td></tr>',e.appendChild(t);var r=t.querySelector("td").getBoundingClientRect();return e.removeChild(t),$t=Math.ceil(r.height)}function rr(e){return e.split(".").length>1}function ir(e){return void 0===e&&(e=""),e.replace(/\./g,"___")}function nr(e){return void 0===e&&(e=""),e.replace(/___/g,".")}function sr(e,t,r){var i=Ut(r,"e-row"),n=!i||i&&!i.classList.contains("e-insertedrow");return"beginEdit"===t&&n?!(e.isIdentity||e.isPrimaryKey||!e.allowEditing):("add"!==t||!e.isIdentity)&&!(n&&!e.allowEditing&&!e.isIdentity&&!e.isPrimaryKey)}function or(e){var t=e.element.querySelector("#"+e.element.id+"EditConfirm");return"Batch"===e.editSettings.mode&&e.element.querySelectorAll(".e-updatedtd").length&&e.editSettings.showConfirmDialog&&(!t||t.classList.contains("e-popup-close"))}function ar(e,t){e=e instanceof Array?e:[e];for(var r=0;r<e.length;r++)t?e[r].classList.add("e-wrap"):e[r].classList.remove("e-wrap")}function lr(e,t,r){var i,n=e.getService("valueFormatter");if("date"===t.type||"datetime"===t.type){if(i={type:t.type,skeleton:t.format},sf.base.isBlazor()&&r){i.isServerRendered=r}"string"==typeof t.format&&"yMd"!==t.format&&(i.format=t.format)}switch(t.type){case"date":case"datetime":t.setFormatter(n.getFormatFunction(i)),t.setParser(n.getParserFunction(i));break;case"number":t.setFormatter(n.getFormatFunction({format:t.format})),t.setParser(n.getParserFunction({format:t.format}))}}function dr(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];for(var n=0,s=e.length;n<s;n++)t?(sf.base.classList(e[n],r.slice(),[]),e[n].setAttribute("aria-selected","true")):(sf.base.classList(e[n],[],r.slice()),e[n].removeAttribute("aria-selected"))}function cr(e){for(var t={},r=[],i=0;i<e.length;i++)e[i]in t||(r.push(e[i].toString()),t[e[i]]=1);return r}function hr(e,t,r){var i=t.element.style.display;t.element.style.display="block";var n,s=t.width;if(r.enableRtl){n=sf.popups.calculatePosition(e,"left","bottom"),t.element.style.top=n.top+e.getBoundingClientRect().height-35+"px",t.element.style.display=i;o=n.left-s+e.clientWidth;t.element.style.left=o<1?s+o+-16+"px":o-16+"px"}else{n=sf.popups.calculateRelativeBasedPosition(e,t.element),t.element.style.display=i,t.element.style.top=n.top+e.getBoundingClientRect().height-5+"px";var o=n.left-s+e.clientWidth;t.element.style.left=o<1?s+o-16+"px":o+-4+"px"}}function pr(e,t){e.popup.element.style.zIndex=(t.zIndex+1).toString()}function ur(e){var t=e.querySelector(".e-frame");t.classList.contains("e-check")?sf.base.classList(t,["e-uncheck"],["e-check"]):sf.base.classList(t,["e-check"],["e-uncheck"])}function fr(e,t,r){var i=sf.base.createElement("div",{className:r});return i.appendChild(t),i.setAttribute("uid",e),i}function gr(e,t){sf.base.removeClass([e],["e-check","e-stop","e-uncheck"]),t?e.classList.add("e-check"):e.classList.add("e-uncheck")}function mr(e,t,r){for(var i=0;i<t.length;i++)sf.base.setValue(t[i].field,yr(t[i],r),e.foreignKeyData);var n=e.cells;for(i=0;i<n.length;i++)n[i].isForeignKey&&sf.base.setValue("foreignKeyData",sf.base.getValue(n[i].column.field,e.foreignKeyData),n[i])}function yr(e,t,r,i){var n=e.foreignKeyField,s=sf.base.isNullOrUndefined(r)?Rt(e.field,t):r;s=sf.base.isNullOrUndefined(s)?"":s;var o=new sf.data.Query,a=i||(e.dataSource instanceof sf.data.DataManager&&e.dataSource.dataSource.json.length?e.dataSource.dataSource.json:e.columnData);return s.getDay?o.where(br({field:n,operator:"equal",value:s,matchCase:!1})):o.where(n,"==",s,!1),new sf.data.DataManager(a).executeLocal(o)}function vr(e,t){var r;return t.some((function(t){return r=t,t.foreignKeyValue===e}))&&r}function br(e,t){var r,i,n,s=sf.base.extend({},Ht(e)),o=sf.base.extend({},Ht(e));if(null===e.value)return r=new sf.data.Predicate(s.field,s.operator,s.value,!1);var a=new Date(e.value);if("equal"===e.operator||"notequal"===e.operator){"datetime"===t?(i=new Date(a.setSeconds(a.getSeconds()-1)),n=new Date(a.setSeconds(a.getSeconds()+2)),e.value=new Date(a.setSeconds(n.getSeconds()-1))):(i=new Date(a.setHours(0)-1),n=new Date(a.setHours(24))),s.value=i,o.value=n,"equal"===e.operator?(s.operator="greaterthan",o.operator="lessthan"):"notequal"===e.operator&&(s.operator="lessthanorequal",o.operator="greaterthanorequal");var l=new sf.data.Predicate(s.field,s.operator,s.value,!1),d=new sf.data.Predicate(o.field,o.operator,o.value,!1);r="equal"===e.operator?l.and(d):l.or(d)}else{"string"==typeof s.value&&(s.value=new Date(s.value)),r=new sf.data.Predicate(s.field,s.operator,s.value,!1)}return e.setProperties?e.setProperties({ejpredicate:r},!0):e.ejpredicate=r,r}function Cr(e,t){for(var r=e.cloneNode(!0),i=0;i<t;i++)r.removeChild(r.children[0]);i=t;for(var n=e.childElementCount;i<n;i++)e.removeChild(e.children[e.childElementCount-1]);return r}function wr(e){return e.enableVirtualization&&e.groupSettings.columns.length>0&&e.isVirtualAdaptive}function Sr(e,t){if(void 0===e&&(e=""),e){for(var r=t,i=e.split("."),n=0;n<i.length&&!sf.base.isNullOrUndefined(r);n++)r=r[i[n]];return r}}function xr(e,t){var r=new sf.base.Internationalization;return"date"===t?"object"===n()(e)?r.getDatePattern({type:e.type?e.type:"date",format:e.format},!1):sf.base.isBlazor()?r.getDatePattern({type:"dateTime",format:e},!1):r.getDatePattern({type:"dateTime",skeleton:e},!1):"object"===n()(e)?r.getDatePattern({type:e.type?e.type:"dateTime",format:e.format},!1):sf.base.isBlazor()?r.getDatePattern({type:"dateTime",format:e},!1):r.getDatePattern({type:"dateTime",skeleton:e},!1)}function Rr(e,t){for(var r={},i=0,n=e.getRowsObject();i<n.length;i++){var s=n[i];if(s.isExpand&&!s.isDetailRow){var o=e.allowPaging&&"AllPages"===e.printMode?s.index+e.pageSettings.currentPage*e.pageSettings.pageSize-e.pageSettings.pageSize:s.index;r[o]={},r[o].isExpand=!0,r[o].gridModel=Ir(s.childGrid,t),r[o].gridModel.query=e.childGrid.query}}return r}function Ir(e,t){void 0===t&&(t="Expanded");var r={};if(!e)return r;for(var i=0,n=St.printGridProp;i<n.length;i++){var s=n[i];r[s]="columns"===s?Gt(e[s]):"allowPaging"===s?"CurrentPage"===e.printMode:Ht(e[s])}return e.childGrid&&"None"!==t&&(r.expandedRows=Rr(e,t)),r}function Tr(e,t,r,i){var n=e||{},s=arguments.length;i&&(s-=1);for(var o=1;o<s;o++)if(arguments[o])for(var a=arguments[o],l=Object.keys(Object.getPrototypeOf(a)).length?Object.keys(a).concat(Er(a)):Object.keys(a),d=0;d<l.length;d++){var c=n[l[d]],h=a[l[d]],p=void 0;i&&(sf.base.isObject(h)||Array.isArray(h))?sf.base.isObject(h)?(p=c||{},n[l[d]]=sf.base.extend({},p,h,i)):(p=c||[],n[l[d]]=sf.base.extend([],p,h,i)):n[l[d]]=h}return n}function Er(e){for(var t=[];Object.getPrototypeOf(e)&&Object.keys(Object.getPrototypeOf(e)).length;)t=t.concat(Object.keys(Object.getPrototypeOf(e))),e=Object.getPrototypeOf(e);return t}function Dr(e){for(var t=0,r=0;r<e.length;r++){var i=Fr(e[r],0);t<i&&(t=i)}return t+1}function Fr(e,t){var r=t,i=[];if(e.columns){t++;for(var n=0;n<e.columns.length;n++)i[n]=Fr(e.columns[n],t);for(var s=0;s<i.length;s++)r<i[s]&&(r=i[s]);t=r}return t}function Or(e,t){for(var r=0;r<t.length;r++)t[r].uid=t[r].isForeignKey?vr(t[r].field,e.getForeignKeyColumns()).uid:e.getColumnByField(t[r].field).uid}function Mr(e){var t=document.defaultView.getComputedStyle(e,null).getPropertyValue("transform").replace(/,/g,"");return{width:parseFloat(t.split(" ")[4]),height:parseFloat(t.split(" ")[5])}}function kr(e,t){e.classList.contains("e-bigger")&&t.classList.add("e-bigger")}function Ar(e,t){if(e&&t){var r=e.closest(".e-row").getBoundingClientRect().height,i=t.closest(".e-row").getBoundingClientRect().height;r>i?t.style.height=r+"px":e.style.height=i+"px"}}function Br(e,t){var r=t.getContent().firstElementChild.offsetHeight;return e&&e.getBoundingClientRect().top>r}function Pr(e,t){return e&&e.getBoundingClientRect().top<t}(e.Global||(e.Global={})).timer=null;var zr,Nr,Lr,qr,Hr,Ur,jr=function(){function e(e){this.existingPredicate={},this.foreignKeyQuery=new sf.data.Query,this.filterState=!0,this.values={},this.renderEmpty=!1,this.parent=e,this.id=this.parent.element.id,this.valueFormatter=new s(this.parent.locale),this.cBoxTrue=sf.buttons.createCheckBox(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=sf.buttons.createCheckBox(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&sf.base.addClass([this.cBoxTrue,this.cBoxFalse],["e-rtl"])}return e.prototype.destroy=function(){this.closeDialog()},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.dlg,"click",this.clickHandler,this),this.searchHandler=sf.base.debounce(this.searchBoxKeyUp,200),sf.base.EventHandler.add(this.dlg.querySelector(".e-searchinput"),"keyup",this.searchHandler,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.dlg,"click",this.clickHandler);var e=this.dlg.querySelector(".e-searchinput");e&&sf.base.EventHandler.remove(e,"keyup",this.searchHandler)},e.prototype.foreignKeyFilter=function(e,t,r){var i=this,n={},s=[],o=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(o.where(r)).then((function(r){i.options.column.columnData=r.result,i.parent.notify("generateQuery",{predicate:n,column:i.options.column}),e.ejpredicate=n.predicate.predicates;for(var o=n.predicate.predicates,a=0;a<o.length;a++)s.push({field:o[a].field,predicate:"or",matchCase:o[a].ignoreCase,ignoreAccent:o[a].ignoreAccent,operator:o[a].operator,value:o[a].value,type:i.options.type});e.filterCollection=s.length?s:t.filter((function(e){return e.field=i.options.field})),i.options.handler(e)}))},e.prototype.foreignFilter=function(e,t){var r=this.options.isRemote?"string"===this.options.column.type?"contains":"equal":this.options.column.type?"contains":"equal",i=new sf.data.Predicate(this.options.column.foreignKeyValue,r,t,!0,this.options.ignoreAccent);this.foreignKeyFilter(e,[e.filterCollection],i)},e.prototype.searchBoxClick=function(e){e.target.classList.contains("e-searchclear")&&(this.sInput.value="",this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},e.prototype.searchBoxKeyUp=function(e){this.refreshCheckboxes(),this.updateSearchIcon()},e.prototype.updateSearchIcon=function(){this.sInput.value.length?sf.base.classList(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]):sf.base.classList(this.sIcon,["e-search-icon"],["e-chkcancel-icon"])},e.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},e.prototype.updateDataSource=function(){var e=this.options.dataSource;if(!(e instanceof sf.data.DataManager))for(var t=0;t<e.length;t++)if("object"!==n()(e)){var r={};r[this.options.field]=e[t],e[t]=r}},e.prototype.updateModel=function(e){this.options=e,this.existingPredicate=e.actualPredicate||{},this.options.dataSource=e.dataSource,this.options.dataManager=e.dataManager?e.dataManager:e.dataSource,this.updateDataSource(),this.options.type=e.type,this.options.format=e.format||"",this.options.ignoreAccent=e.ignoreAccent||!1,this.options.filteredColumns=e.filteredColumns||this.parent.filterSettings.columns,this.options.query=e.query||new sf.data.Query,this.options.allowCaseSensitive=e.allowCaseSensitive||!1,this.options.uid=e.column.uid,this.values={},this.localeObj=e.localeObj,this.isFiltered=e.filteredColumns.length},e.prototype.getAndSetChkElem=function(e){if(this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),!e.hideSearchbox){this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox);var t={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search")}};sf.inputs.Input.createInput(t,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)}return this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},e.prototype.showDialog=function(e){var t={requestType:"filterbeforeopen",columnName:this.options.field,columnType:this.options.type,cancel:!1};if(!sf.base.isBlazor()||this.parent.isJsComponent){t.filterModel=this}if(this.parent.notify("cbox-filter-begin",t),!t.cancel){this.dialogObj=new sf.popups.Dialog({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),width:!sf.base.isNullOrUndefined(Ut(e.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this)});this.dialogObj.isStringTemplate=!0,this.dlg.setAttribute("aria-label",this.getLocalizedLabel("ExcelFilterDialogARIA")),this.parent.element.appendChild(this.dlg),this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=this.options.height+"px",this.dialogObj.show(),this.wireEvents(),sf.popups.createSpinner({target:this.spinner},this.parent.createElement),sf.popups.showSpinner(this.spinner),this.getAllData()}},e.prototype.dialogCreated=function(e){sf.base.Browser.isDevice?this.dialogObj.position={X:"center",Y:"center"}:hr(this.options.target,this.dialogObj,this.parent),this.parent.notify("filterDialogCreated",e)},e.prototype.openDialog=function(e){this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e)},e.prototype.closeDialog=function(){if(this.dialogObj&&!this.dialogObj.isDestroyed){var e=this.options.columns.filter((function(e){return e.getFilterItemTemplate()})),t=this.parent.registeredTemplate;e.length&&!sf.base.isNullOrUndefined(t)&&t.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),this.parent.notify("filter-menu-close",{field:this.options.field}),this.dialogObj.destroy(),this.unWireEvents(),sf.base.remove(this.dlg),this.dlg=null}},e.prototype.clearFilter=function(){var e={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(E,e),e.cancel||this.options.handler({action:"clear-filter",field:this.options.field})},e.prototype.btnClick=function(e){if(this.filterState){if("input"===e.target.tagName.toLowerCase()&&e.target.classList.contains("e-searchinput")){var t=e.target.value;"boolean"===this.options.column.type&&(""!==t&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(t.toLowerCase())?t=!0:""!==t&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(t.toLowerCase())&&(t=!1));var r={action:"filtering",filterCollection:{field:this.options.field,operator:this.options.isRemote?"string"===this.options.column.type?"contains":"equal":"date"===this.options.column.type||"datetime"===this.options.column.type||"boolean"===this.options.column.type?"equal":"contains",value:t,matchCase:!1,type:this.options.column.type},field:this.options.field};null!=t&&""!==t?this.isForeignColumn(this.options.column)?this.foreignFilter(r,t):this.options.handler(r):this.closeDialog()}else if(13===e.keyCode)this.fltrBtnHandler();else{var i=e.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===i?this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===i&&this.clearFilter()}this.closeDialog()}else"input"!==e.target.tagName.toLowerCase()&&(this.clearFilter(),this.closeDialog())},e.prototype.fltrBtnHandler=function(){var e,t,r=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall)")),i="equal",n=this.searchBox.querySelector(".e-searchinput"),s=this.options.allowCaseSensitive,o={field:this.options.field,predicate:"or",uid:this.options.uid,operator:i,type:this.options.type,matchCase:s,ignoreAccent:this.options.ignoreAccent},a=this.itemsCnt!==r.length&&this.itemsCnt-r.length<r.length;a&&""===n.value&&(i="notequal",r=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),o.predicate="and",o.operator="notequal");var l=[];if(r.length!==this.itemsCnt||n.value&&""!==n.value){for(var d=0;d<r.length;d++){e=this.values[Ut(r[d],"e-ftrchk").getAttribute("uid")],t=sf.base.extend({},{value:e},o),e&&!e.toString().length&&(t.operator=a?"notequal":"equal"),""===e||sf.base.isNullOrUndefined(e)?("string"===this.options.type&&l.push({field:o.field,ignoreAccent:o.ignoreAccent,matchCase:o.matchCase,operator:o.operator,predicate:o.predicate,value:""}),l.push({field:o.field,matchCase:o.matchCase,operator:o.operator,predicate:o.predicate,value:null}),l.push({field:o.field,matchCase:o.matchCase,operator:o.operator,predicate:o.predicate,value:void 0})):l.push(t);var c={instance:this,handler:this.fltrBtnHandler,arg1:t.field,arg2:t.predicate,arg3:t.operator,arg4:t.matchCase,arg5:t.ignoreAccent,arg6:t.value,cancel:!1};if(this.parent.notify(E,c),c.cancel)return}this.initiateFilter(l)}else this.clearFilter()},e.prototype.initiateFilter=function(e){var t,r=e[0];if(!sf.base.isNullOrUndefined(r)){t=r.ejpredicate?r.ejpredicate:new sf.data.Predicate(r.field,r.operator,r.value,!r.matchCase,r.ignoreAccent);for(var i=1;i<e.length;i++)t=void 0!==e[i].ejpredicate?t[e[i].predicate](e[i].ejpredicate):t[e[i].predicate](e[i].field,e[i].operator,e[i].value,!e[i].matchCase,e[i].ignoreAccent);var n={action:"filtering",filterCollection:e,field:this.options.field,ejpredicate:sf.data.Predicate.or(t)};this.options.handler(n)}},e.prototype.isForeignColumn=function(e){return!!e.isForeignColumn&&e.isForeignColumn()},e.prototype.refreshCheckboxes=function(){var e=this,t=this.sInput.value,r=this.options.column,i=this.isForeignColumn(r)?this.foreignKeyQuery.clone():this.options.query.clone(),n=this.options.query.clone(),s=i.queries.filter((function(e){return e&&"onWhere"===e.fn}))[0];i.queries=[],n.queries=[];var o,a="string"!==this.options.type&&parseFloat(t)?parseFloat(t):t,l=this.options.isRemote?"string"===this.options.type?"contains":"equal":this.options.type?"contains":"equal",c=this.options.ignoreAccent,h=this.isForeignColumn(r)?r.foreignKeyValue:r.field;a=""===a||void 0===a?void 0:a;var p=this.options.dataManager.adaptor.getModuleName;"boolean"===this.options.type&&(void 0!==a&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())&&p?(p(),a=!0):void 0!==a&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())&&p&&(p(),a=!1),l="equal"),"date"!==this.options.type&&"datetime"!==this.options.type||(a=this.valueFormatter.fromView(t,this.options.parserFn,this.options.type)),this.addDistinct(i);var u={requestType:"filtersearchbegin",filterModel:this,columnName:h,column:r,operator:l,matchCase:!0,ignoreAccent:c,filterChoiceCount:null,query:i,value:a};if(sf.base.isBlazor()&&!this.parent.isJsComponent){u.filterModel={}}this.parent.trigger(d,u,(function(d){if(d.operator=sf.base.isBlazor()&&"none"!==d.excelSearchOperator?d.excelSearchOperator:d.operator,o=new sf.data.Predicate(h,d.operator,a,d.matchCase,d.ignoreAccent),"date"===e.options.type||"datetime"===e.options.type){if(l="equal",sf.base.isNullOrUndefined(a)&&t.length)return;o=br({field:h,operator:l,value:a,matchCase:!0,ignoreAccent:c},e.options.type)}t.length?(o=sf.base.isNullOrUndefined(s)?o:o.and(s.e),i.where(o)):sf.base.isNullOrUndefined(s)||i.where(s.e),d.filterChoiceCount=sf.base.isNullOrUndefined(d.filterChoiceCount)?1e3:d.filterChoiceCount;var p={};(sf.popups.showSpinner(e.spinner),e.renderEmpty=!1,e.isForeignColumn(r)&&t.length)?("result"in r.dataSource?new sf.data.DataManager(r.dataSource.result):r.dataSource).executeQuery(i).then((function(t){var i=e.options.column.columnData;e.options.column.columnData=t.result,e.parent.notify("generateQuery",{predicate:p,column:r}),p.predicate.predicates.length?n.where(p.predicate):e.renderEmpty=!0,e.options.column.columnData=i,n.take(d.filterChoiceCount),e.search(d,n)})):(i.take(d.filterChoiceCount),e.search(d,i))}))},e.prototype.search=function(e,t){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(e,t):this.processSearch(t)},e.prototype.getPredicateFromCols=function(t){for(var r=e.getPredicate(t),i=[],n={},s=void 0!==this.parent.getForeignKeyColumns,o=s?this.parent.getForeignKeyColumns():[],a=0,l=Object.keys(r);a<l.length;a++){var d=l[a],c=void 0;s&&this.parent.getColumnByField(d).isForeignColumn()&&(c=vr(d,o)),c?(this.parent.notify("generateQuery",{predicate:n,column:c}),n.predicate.predicates.length&&i.push(sf.data.Predicate.or(n.predicate.predicates))):i.push(r[d])}return i.length&&sf.data.Predicate.and(i)},e.prototype.getQuery=function(){return this.parent.getQuery?this.parent.getQuery().clone():new sf.data.Query},e.prototype.getAllData=function(){var e=this,t=this.getQuery();t.requiresCount(),this.addDistinct(t);var r={requestType:"filterchoicerequest",query:t,filterChoiceCount:null};if(!sf.base.isBlazor()||this.parent.isJsComponent){r.filterModel=this}this.parent.trigger(d,r,(function(r){r.filterChoiceCount=sf.base.isNullOrUndefined(r.filterChoiceCount)?1e3:r.filterChoiceCount,t.take(r.filterChoiceCount),e.parent.dataSource&&"result"in e.parent.dataSource?e.filterEvent(r,t):e.processDataOperation(t,!0)}))},e.prototype.addDistinct=function(e){var t=sf.data.DataUtil.distinct(this.options.filteredColumns,"field");return t.indexOf(this.options.column.field)<=-1&&(t=t.concat(this.options.column.field)),e.distinct(t),e},e.prototype.filterEvent=function(e,t){var r=this;this.eventPromise(e,t).promise.then((function(e){r.dataSuccess(e)}))},e.prototype.eventPromise=function(e,t){var r;r=this.getStateEventArgument(t);var i=new sf.data.Deferred;return r.dataSource=i.resolve,r.action=e,this.parent.trigger("dataStateChange",r),i},e.prototype.getStateEventArgument=function(e){var t=new sf.data.UrlAdaptor,r=new sf.data.DataManager({url:"",adaptor:new sf.data.UrlAdaptor}),i=t.processQuery(r,e);return JSON.parse(i.data)},e.prototype.processDataOperation=function(e,t){var r=this;this.options.dataSource=this.options.dataSource instanceof sf.data.DataManager?this.options.dataSource:new sf.data.DataManager(this.options.dataSource);var i=[],n=[];if(this.isForeignColumn(this.options.column)&&t){var s="result"in this.options.column.dataSource?new sf.data.DataManager(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=e.params,i.push(s.executeQuery(this.foreignKeyQuery)),n.push((function(e){return r.foreignKeyData=e}))}i.push(this.options.dataSource.executeQuery(e)),n.push(this.dataSuccess.bind(this));var o=0;Promise.all(i).then((function(e){for(var t=0;t<e.length;t++)n[o++](e[t].result)}))},e.prototype.dataSuccess=function(t){this.fullData=t;var r=new sf.data.Query;if(this.parent.searchSettings&&this.parent.searchSettings.key.length){var i=this.parent.searchSettings,n=i.fields.length?i.fields:this.options.columns.map((function(e){return e.field}));r.search(i.key,n,i.operator,i.ignoreCase,i.ignoreAccent)}if(this.options.filteredColumns.length){for(var s=[],o=0;o<this.options.filteredColumns.length;o++){var a=this.options.filteredColumns[o];this.options.uid?(a.uid=a.uid||this.parent.getColumnByField(a.field).uid,a.uid!==this.options.uid&&s.push(this.options.filteredColumns[o])):a.field!==this.options.field&&s.push(this.options.filteredColumns[o])}var l=this.getPredicateFromCols(s);l&&r.where(l)}var d=new sf.data.DataManager(this.fullData).executeLocal(r),c=this.options.column;this.filteredData=e.getDistinct(d,this.options.field,c,this.foreignKeyData).records||[],this.processDataSource(null,!0,this.filteredData),this.sInput.focus();var h={requestType:"filterafteropen",columnName:this.options.field,columnType:this.options.type};if(!sf.base.isBlazor()||this.parent.isJsComponent){h.filterModel=this}this.parent.notify("cbox-filter-complete",h)},e.prototype.processDataSource=function(e,t,r){sf.popups.showSpinner(this.spinner),this.updateResult(),this.createFilterItems(r,t)},e.prototype.processSearch=function(e){this.processDataOperation(e)},e.prototype.updateResult=function(){this.result={};var e=this.getPredicateFromCols(this.options.filteredColumns),t=new sf.data.Query;e&&t.where(e);for(var r=0,i=new sf.data.DataManager(this.fullData).executeLocal(t);r<i.length;r++){var n=i[r];this.result[Sr(this.options.field,n)]=!0}},e.prototype.clickHandler=function(e){var t=e.target,r=Ut(t,"e-checkbox-wrapper");if(Ut(t,"e-searchbox")&&this.searchBoxClick(e),r){var i=r.querySelector(".e-selectall");i?this.updateAllCBoxes(!i.classList.contains("e-check")):ur(r.parentElement),this.updateIndeterminatenBtn(),r.querySelector(".e-chk-hidden").focus()}},e.prototype.updateAllCBoxes=function(e){for(var t=0,r=[].slice.call(this.cBox.querySelectorAll(".e-frame"));t<r.length;t++){gr(r[t],e)}},e.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.dialogObj.element.querySelector(".e-btn").focus())},e.prototype.createCheckbox=function(e,t,r){var i=t?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0),n=i.querySelector(".e-label"),s=Tr({},r,{column:this.options.column,parent:this.parent});return n.innerHTML=!sf.base.isNullOrUndefined(e)&&e.toString().length?e:this.getLocalizedLabel("Blanks"),sf.base.addClass([n],["e-checkboxfiltertext"]),this.options.template&&r[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&(n.innerHTML="",Jt(n,this.options.template(s,this.parent,"filterItemTemplate"))),i},e.prototype.updateIndeterminatenBtn=function(){var e=this.cBox.children.length-1,t=[],r=this.cBox.querySelector(".e-selectall"),i=this.cBox.querySelectorAll(".e-check:not(.e-selectall)").length,n=this.dialogObj.btnObj[0];n.disabled=!1,e===i?t=["e-check"]:i?t=["e-stop"]:(t=["e-uncheck"],n.disabled=!0),this.filterState=!n.disabled,n.dataBind(),sf.base.removeClass([r],["e-check","e-stop","e-uncheck"]),sf.base.addClass([r],t)},e.prototype.createFilterItems=function(e,t){for(var r,i=this.parent.createElement("div"),n=this.dialogObj.btnObj[0],s=-1,o=0;o<e.length;o++){var a=sf.base.getValue("ejValue",e[o]);(""===a||sf.base.isNullOrUndefined(a))&&(s+=1)}if(this.itemsCnt=-1!==s?e.length-s:e.length,e.length&&!this.renderEmpty){var l=this.getLocalizedLabel("SelectAll"),d=this.createCheckbox(l,!1,((r={})[this.options.field]=l,r)),c=fr(Qt("cbox"),d,"e-ftrchk");c.querySelector(".e-frame").classList.add("e-selectall"),i.appendChild(c);var h=new sf.data.Predicate("field","equal",this.options.field);this.options.foreignKeyValue&&(h=h.or("field","equal",this.options.foreignKeyValue));var p=new sf.data.DataManager(this.options.filteredColumns).executeLocal((new sf.data.Query).where(h)).length,u=void 0;for(o=0;o<e.length;o++){var f=Qt("cbox");this.values[f]=sf.base.getValue("ejValue",e[o]);var g=sf.base.getValue(this.options.field,e[o]);this.options.formatFn&&(g=this.valueFormatter.toView(g,this.options.formatFn));var m={value:g,column:this.options.column,data:e[o]};if(this.parent.notify("filter-cbox-value",m),""===(g=m.value)||sf.base.isNullOrUndefined(g)){if(u)continue;u=!0}var y=this.createCheckbox(g,this.getCheckedState(p,this.values[f]),sf.base.getValue("dataObj",e[o]));i.appendChild(fr(f,y,"e-ftrchk"))}this.cBox.innerHTML="",Jt(this.cBox,[].slice.call(i.children)),this.updateIndeterminatenBtn(),n.disabled=!1}else i.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",Jt(this.cBox,[].slice.call(i.children)),n.disabled=!0;this.filterState=!n.disabled,n.dataBind();var v={requestType:"filterchoicerequest",dataSource:this.renderEmpty||sf.base.isBlazor()&&this.parent.isServerRendered?[]:e};if(!sf.base.isBlazor()||this.parent.isJsComponent){v.filterModel=this}this.parent.notify("cbox-filter-complete",v),sf.popups.hideSpinner(this.spinner)},e.prototype.getCheckedState=function(e,t){return!this.isFiltered||!e||this.result[t]},e.getDistinct=function(e,t,r,i){for(var n,s=e.length,o=[],a={},l=!(!r||!r.isForeignColumn)&&r.isForeignColumn();s--;)if(!((n=Sr(t,n=e[s]))in a)){var d={};if(d.ejValue=n,a[n]=!0,l){var c=yr(r,{},n,i)[0];sf.base.setValue("foreignKeyData",c,e[s]),n=sf.base.getValue(r.foreignKeyValue,c)}sf.base.setValue(t,sf.base.isNullOrUndefined(n)?null:n,d),sf.base.setValue("dataObj",e[s],d),o.push(d)}return sf.data.DataUtil.group(sf.data.DataUtil.sort(o,t,sf.data.DataUtil.fnAscending),"ejValue")},e.getPredicate=function(t){for(var r=sf.data.DataUtil.distinct(t,"field",!0)||[],i=[],n={},s=0;s<r.length;s++)0!==(i=new sf.data.DataManager(t).executeLocal((new sf.data.Query).where("field","equal",r[s].field))).length&&(n[r[s].field]=e.generatePredicate(i));return n},e.generatePredicate=function(t){var r,i,n=t?t.length:0;(i=e.updateDateFilter(t[0])).ignoreAccent=!sf.base.isNullOrUndefined(i.ignoreAccent)&&i.ignoreAccent,r="date"===i.type||"datetime"===i.type?br(i,i.type):i.ejpredicate?i.ejpredicate:new sf.data.Predicate(i.field,i.operator,i.value,!e.getCaseValue(i),i.ignoreAccent);for(var s=1;s<n;s++)t[s]=e.updateDateFilter(t[s]),n>2&&s>1&&"or"===t[s].predicate?"date"===t[s].type||"datetime"===t[s].type?r.predicates.push(br(t[s],t[s].type)):r.predicates.push(new sf.data.Predicate(t[s].field,t[s].operator,t[s].value,!e.getCaseValue(t[s]),t[s].ignoreAccent)):r="date"===t[s].type||"datetime"===t[s].type?r[t[s].predicate](br(t[s],t[s].type),t[s].type,t[s].ignoreAccent):t[s].ejpredicate?r[t[s].predicate](t[s].ejpredicate):r[t[s].predicate](t[s].field,t[s].operator,t[s].value,!e.getCaseValue(t[s]),t[s].ignoreAccent);return r||null},e.getCaseValue=function(e){return sf.base.isNullOrUndefined(e.matchCase)?!("string"===e.type||sf.base.isNullOrUndefined(e.type)&&"string"==typeof e.value):e.matchCase},e.updateDateFilter=function(e){return("date"===e.type||"datetime"===e.type||e.value instanceof Date)&&(e.type=e.type||"date"),e},e}(),Vr=(zr=function(e,t){return(zr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}zr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Gr=function(e){function t(t,r){var i=e.call(this,t)||this;return i.customFilterOperators=r,i.isExcel=!0,i}return Vr(t,e),t.prototype.getCMenuDS=function(e,t){var r={number:["Equal","NotEqual","","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","Between","","CustomFilter"],string:["Equal","NotEqual","","StartsWith","EndsWith","","Contains","","CustomFilter"]};r.date=r.number,r.datetime=r.number;for(var i=[],n=0;n<r[e].length;n++)r[e][n].length?t?i.push({text:this.getLocalizedLabel(r[e][n])+"...",iconCss:"e-icons e-icon-check "+(t===r[e][n].toLowerCase()?"":"e-emptyicon")}):i.push({text:this.getLocalizedLabel(r[e][n])+"..."}):i.push({separator:!0});return i},t.prototype.destroy=function(){this.dlg&&(this.unwireExEvents(),e.prototype.destroy.call(this)),this.cmenu&&this.cmenu.parentElement&&sf.base.remove(this.cmenu)},t.prototype.createMenu=function(e,t,r){this.menu=this.parent.createElement("div",{className:"e-contextmenu-wrapper"}),this.parent.enableRtl?this.menu.classList.add("e-rtl"):this.menu.classList.remove("e-rtl");var i=this.parent.createElement("ul"),n=t?"e-excl-filter-icon e-filtered":"e-excl-filter-icon";i.appendChild(this.createMenuElem(this.getLocalizedLabel("ClearFilter"),t?"":"e-disabled",n)),"boolean"!==e&&i.appendChild(this.createMenuElem(this.getLocalizedLabel({string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"}[e]),"e-submenu",r&&this.ensureTextFilter()?"e-icon-check":n+" e-emptyicon",!0)),this.menu.appendChild(i),this.parent.notify("before-filter-cmenu-open",{element:this.menu})},t.prototype.createMenuElem=function(e,t,r,i){var n=this.parent.createElement("li",{className:t+" e-menu-item"});return n.innerHTML=e,n.insertBefore(this.parent.createElement("span",{className:"e-menu-icon e-icons "+r}),n.firstChild),i&&n.appendChild(this.parent.createElement("span",{className:"e-icons e-caret"})),n},t.prototype.wireExEvents=function(){sf.base.EventHandler.add(this.dlg,"mouseover",this.hoverHandler,this),sf.base.EventHandler.add(this.dlg,"click",this.clickExHandler,this)},t.prototype.unwireExEvents=function(){sf.base.EventHandler.remove(this.dlg,"mouseover",this.hoverHandler),sf.base.EventHandler.remove(this.dlg,"click",this.clickExHandler)},t.prototype.clickExHandler=function(e){var t=Ut(e.target,"e-menu-item");t&&this.getLocalizedLabel("ClearFilter")===t.innerText.trim()&&(this.clearFilter(),this.closeDialog())},t.prototype.destroyCMenu=function(){this.menuObj&&!this.menuObj.isDestroyed&&(this.menuObj.destroy(),sf.base.remove(this.cmenu))},t.prototype.hoverHandler=function(e){var t,r=e.target.querySelector(".e-contextmenu"),i=Ut(e.target,"e-menu-item"),n=this.menu.querySelector(".e-focused");if(n&&n.classList.remove("e-focused"),i&&(i.classList.add("e-focused"),t=i.classList.contains("e-submenu")),!r){if(!t){var s=this.menu.querySelector(".e-submenu");sf.base.isNullOrUndefined(s)||s.classList.remove("e-selected"),this.isCMenuOpen=!1,this.destroyCMenu()}var o=this.ensureTextFilter();if(!this.isCMenuOpen&&t){i.classList.add("e-selected"),this.isCMenuOpen=!0;var a={items:this.getCMenuDS(this.options.type,o?o.replace(/\s/g,""):void 0),select:this.selectHandler.bind(this),onClose:this.destroyCMenu.bind(this),enableRtl:this.parent.enableRtl,beforeClose:this.preventClose};this.parent.element.appendChild(this.cmenu),this.menuObj=new sf.navigations.ContextMenu(a,this.cmenu);var l=this.menu.querySelector(".e-submenu").getBoundingClientRect(),d={top:0,left:0};if(sf.base.Browser.isDevice){var c=this.getContextBounds(this.menuObj);d.top=(window.innerHeight-c.height)/2,d.left=(window.innerWidth-c.width)/2,this.closeDialog()}else d.top=sf.base.Browser.isIE?window.pageYOffset+l.top:window.scrollY+l.top,d.left=this.getCMenuYPosition(this.dlg,this.menuObj);this.menuObj.open(d.top,d.left,e.target),kr(this.parent.element,this.menuObj.element.parentElement)}}},t.prototype.ensureTextFilter=function(){var e,t=this.existingPredicate[this.options.field];return t&&2===t.length?e="greaterthanorequal"===t[0].operator&&"lessthanorequal"===t[1].operator?"between":"customfilter":t&&1===t.length&&(this.optrData=this.customFilterOperators[this.options.type+"Operator"],e=t[0].operator),e},t.prototype.preventClose=function(e){e.event instanceof MouseEvent&&e.event.target.classList.contains("e-submenu")&&(e.cancel=!0)},t.prototype.getContextBounds=function(e){this.menuObj.element.style.display;return this.menuObj.element.style.display="block",this.menuObj.element.getBoundingClientRect()},t.prototype.getCMenuYPosition=function(e,t){var r=this.getContextBounds(t).width,i=e.getBoundingClientRect(),n=i.right+r-this.parent.element.clientWidth,s=e.offsetWidth-e.clientWidth;return s=s?s+1:0,n<1?i.right+1-s:i.left-r-1+s},t.prototype.openDialog=function(e){var t=this;this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e),this.dialogObj.dataBind();var r=this.existingPredicate[e.field]&&this.existingPredicate[e.field].length||this.options.filteredColumns.filter((function(e){return t.options.field===e.field})).length;this.createMenu(e.type,r>0,1===r||2===r),this.dlg.insertBefore(this.menu,this.dlg.firstChild),this.dlg.classList.add("e-excelfilter"),this.parent.enableRtl&&this.dlg.classList.add("e-rtl"),this.dlg.classList.remove("e-checkboxfilter"),this.cmenu=this.parent.createElement("ul",{className:"e-excel-menu"}),this.wireExEvents()},t.prototype.closeDialog=function(){e.prototype.closeDialog.call(this)},t.prototype.selectHandler=function(e){e.item&&(this.menuItem=e.item,this.renderDialogue(e))},t.prototype.renderDialogue=function(e){var t=this,r=e.element,i=this.options.field,n=!sf.base.isNullOrUndefined(i)&&rr(i),s=!sf.base.isNullOrUndefined(i)&&ir(i),o=this.parent.createElement("div",{className:"e-xlfl-maindiv",id:n?s+"-xlflmenu":i+"-xlflmenu"});this.dlgDiv=this.parent.createElement("div",{className:"e-xlflmenu",id:n?s+"-xlfldlg":i+"-xlfldlg"}),this.parent.element.appendChild(this.dlgDiv),this.dlgObj=new sf.popups.Dialog({header:this.getLocalizedLabel("CustomFilter"),isModal:!0,overlayClick:this.removeDialog.bind(this),showCloseIcon:!0,closeOnEscape:!1,target:document.body,visible:!1,enableRtl:this.parent.enableRtl,open:function(){var e=t.dlgObj.element.querySelector("table.e-xlfl-table>tr");t.options.column.filterTemplate?sf.base.isBlazor()?e.querySelector(".e-xlfl-valuediv").children[0].focus():e.querySelector("#"+t.options.column.field+"-xlfl-frstvalue").focus():e.cells[1].querySelector("input:not([type=hidden])").focus()},close:this.removeDialog.bind(this),created:this.createdDialog.bind(this,r,i),buttons:[{click:this.filterBtnClick.bind(this,i),buttonModel:{content:this.getLocalizedLabel("OKButton"),isPrimary:!0,cssClass:"e-xlfl-okbtn"}},{click:this.removeDialog.bind(this),buttonModel:{content:this.getLocalizedLabel("CancelButton"),cssClass:"e-xlfl-cancelbtn"}}],content:o,width:430,animationSettings:{effect:"None"}});this.dlgObj.isStringTemplate=!0,this.dlgDiv.setAttribute("aria-label",this.getLocalizedLabel("CustomFilterDialogARIA")),this.dlgObj.appendTo(this.dlgDiv)},t.prototype.removeDialog=function(){if(sf.base.isBlazor())for(var e=this.options.columns||[],t=0;t<e.length;t++)if(e[t].filterTemplate){var r=this.parent.element.id+e[t].uid+"filterTemplate";sf.base.updateBlazorTemplate(r,"FilterTemplate",e[t])}this.removeObjects([this.dropOptr,this.datePicker,this.dateTimePicker,this.actObj,this.numericTxtObj,this.dlgObj]),sf.base.remove(this.dlgDiv)},t.prototype.createdDialog=function(e,t){this.renderCustomFilter(e,t),this.dlgObj.element.style.left="0px",this.dlgObj.element.style.top="0px",sf.base.Browser.isDevice&&window.innerWidth<440&&(this.dlgObj.element.style.width="90%"),this.parent.notify("beforeCustomFilterOpen",{column:t,dialog:this.dialogObj}),this.dlgObj.show(),kr(this.parent.element,this.dlgObj.element.parentElement)},t.prototype.renderCustomFilter=function(e,t){var r=this.dlgObj.element.querySelector(".e-xlfl-maindiv"),i=this.parent.createElement("div",{innerHTML:this.getLocalizedLabel("ShowRowsWhere"),className:"e-xlfl-dlgfields"});r.appendChild(i);var n=this.parent.createElement("div",{innerHTML:this.options.displayName,className:"e-xlfl-fieldset"});r.appendChild(n),this.renderFilterUI(t,r)},t.prototype.filterBtnClick=function(e){var t,r=!sf.base.isNullOrUndefined(e)&&rr(e),i=!sf.base.isNullOrUndefined(e)&&ir(e),n=r?i:e,s=this.options.column.filterTemplate&&sf.base.isBlazor()?this.dlgDiv.querySelector(".-xlfl-frstvalue").children[0].querySelector(".e-control").ej2_instances[0]:this.dlgDiv.querySelector("#"+n+"-xlfl-frstvalue").ej2_instances[0],o=this.dlgDiv.querySelector("#"+n+"-xlfl-frstoptr").ej2_instances[0],a=this.options.column.filterTemplate&&sf.base.isBlazor()?this.dlgDiv.querySelector(".-xlfl-secndvalue").children[0].querySelector(".e-control").ej2_instances[0]:this.dlgDiv.querySelector("#"+n+"-xlfl-secndvalue").ej2_instances[0],l=this.dlgDiv.querySelector("#"+n+"-xlfl-secndoptr").ej2_instances[0];"string"===this.options.type&&(t=this.dlgDiv.querySelector("#"+n+"-xlflmtcase").ej2_instances[0].checked);var d=this.dlgDiv.querySelector("#"+n+"e-xlfl-frstpredicate").ej2_instances[0],c=(this.dlgDiv.querySelector("#"+n+"e-xlfl-secndpredicate").ej2_instances[0],d.checked?"and":"or");null===a.value&&(c="or"),this.filterByColumn(this.options.field,o.value,s.value,c,t,this.options.ignoreAccent,l.value,a.value),this.removeDialog()},t.prototype.filterByColumn=function(e,t,r,i,n,s,o,a){var l,d=this.parent.getColumnByField?this.parent.getColumnByField(e):this.options.column,c=this.isForeignColumn(d)?d.foreignKeyValue:e,h=[];h.push({field:c,predicate:i,matchCase:n,ignoreAccent:s,operator:t,value:r,type:this.options.type});var p={instance:this,handler:this.filterByColumn,arg1:e,arg2:t,arg3:r,arg4:i,arg5:n,arg6:s,arg7:o,arg8:a,cancel:!1};if(this.parent.notify(E,p),!p.cancel){l=new sf.data.Predicate(c,t.toLowerCase(),r,!n,s),sf.base.isNullOrUndefined(a)||sf.base.isNullOrUndefined(o)||(h.push({field:c,predicate:i,matchCase:n,ignoreAccent:s,operator:o,value:a,type:this.options.type}),l=l[i](c,o.toLowerCase(),a,!n,s));var u={action:"filtering",filterCollection:h,field:this.options.field,ejpredicate:l,actualPredicate:h};this.isForeignColumn(d)?this.foreignKeyFilter(u,h,l):this.options.handler(u)}},t.prototype.renderOperatorUI=function(e,t,r,i,n){var s=this.parent.createElement("tr",{className:"e-xlfl-fields"});t.appendChild(s);var o=this.parent.createElement("td",{className:"e-xlfl-optr"});s.appendChild(o);var a=this.parent.createElement("div",{className:"e-xlfl-optrdiv"}),l=!sf.base.isNullOrUndefined(e)&&rr(e),d=!sf.base.isNullOrUndefined(e)&&ir(e),c=this.parent.createElement("input",{id:l?d+r:e+r});a.appendChild(c),o.appendChild(a);var h=this.options.type+"Operator",p=this.customFilterOperators[h];this.optrData=p;var u=this.dropSelectedVal(this.options.column,i,n),f="";this.menuItem&&((f=this.menuItem.text.slice(0,-3))!==this.getLocalizedLabel("CustomFilter")&&(u=n?f:void 0),f===this.getLocalizedLabel("Between")&&(u=this.getLocalizedLabel(n?"GreaterThanOrEqual":"LessThanOrEqual")));var g=this.options.column;return this.dropOptr=new sf.dropdowns.DropDownList(zt({dataSource:p,fields:{text:"text",value:"value"},text:u,open:this.dropDownOpen.bind(this),enableRtl:this.parent.enableRtl,change:this.dropDownValueChange.bind(this)},g.filter.params)),this.dropOptr.appendTo(c),{fieldElement:s,operator:this.getSelectedValue(u)}},t.prototype.dropDownOpen=function(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},t.prototype.dropDownValueChange=function(e){e.element.id.includes("-xlfl-frstoptr")?this.firstOperator=e.value.toString():this.secondOperator=e.value.toString()},t.prototype.getFilterUIInfo=function(){return{firstOperator:this.firstOperator,secondOperator:this.secondOperator,field:this.options.field}},t.prototype.getSelectedValue=function(e){var t=new sf.data.DataManager(this.optrData).executeLocal((new sf.data.Query).where("text","equal",e));return sf.base.isNullOrUndefined(t[0])?"":t[0].value},t.prototype.dropSelectedVal=function(e,t,r){var i;return i=t&&t.length>0?2===t.length?r?t[0].operator:t[1].operator:r?t[0].operator:void 0:r&&"string"===e.type&&!e.filter.operator?"startswith":r?e.filter.operator||"equal":void 0,this.getSelectedText(i)},t.prototype.getSelectedText=function(e){var t=new sf.data.DataManager(this.optrData).executeLocal((new sf.data.Query).where("value","equal",e));return sf.base.isNullOrUndefined(t[0])?"":t[0].text},t.prototype.renderFilterUI=function(e,t){var r=this.existingPredicate[e],i=this.parent.createElement("table",{className:"e-xlfl-table"});t.appendChild(i);var n=this.parent.createElement("colGroup");n.innerHTML='<col style="width: 50%"></col><col style="width: 50%"></col>',i.appendChild(n);var s=this.renderOperatorUI(e,i,"-xlfl-frstoptr",r,!0);this.firstOperator=s.operator,this.renderFlValueUI(e,s,"-xlfl-frstvalue",r,!0);var o=this.parent.createElement("tr",{className:"e-xlfl-predicate"});i.appendChild(o),this.renderRadioButton(e,o,r),s=this.renderOperatorUI(e,i,"-xlfl-secndoptr",r,!1),this.secondOperator=s.operator,this.renderFlValueUI(e,s,"-xlfl-secndvalue",r,!1)},t.prototype.renderRadioButton=function(e,t,r){var i=this.parent.createElement("td",{className:"e-xlfl-radio",attrs:{colSpan:"2"}});t.appendChild(i);var n=this.parent.createElement("div",{className:"e-xlfl-radiodiv",attrs:{style:"display: inline-block"}}),s=!sf.base.isNullOrUndefined(e)&&rr(e),o=!sf.base.isNullOrUndefined(e)&&ir(e),a=this.parent.createElement("input",{id:s?o+"e-xlfl-frstpredicate":e+"e-xlfl-frstpredicate",attrs:{type:"radio"}}),l=this.parent.createElement("input",{id:s?o+"e-xlfl-secndpredicate":e+"e-xlfl-secndpredicate",attrs:{type:"radio"}});n.appendChild(a),n.appendChild(l),i.appendChild(n),"string"===this.options.type&&this.renderMatchCase(e,t,i,"-xlflmtcase",r);var d=new sf.buttons.RadioButton({label:this.getLocalizedLabel("AND"),name:"default",cssClass:"e-xlfl-radio-and",checked:!0,enableRtl:this.parent.enableRtl}),c=new sf.buttons.RadioButton({label:this.getLocalizedLabel("OR"),name:"default",cssClass:"e-xlfl-radio-or",enableRtl:this.parent.enableRtl});"and"===(r&&2===r.length?r[1].predicate:"and")?(d.checked=!0,c.checked=!1):(c.checked=!0,d.checked=!1),d.appendTo(a),c.appendTo(l)},t.prototype.removeObjects=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];i&&!i.isDestroyed&&i.destroy()}},t.prototype.renderFlValueUI=function(e,t,r,i,n){var s=this.parent.createElement("td",{className:"e-xlfl-value"});t.fieldElement.appendChild(s);var o=!sf.base.isNullOrUndefined(e)&&rr(e),a=!sf.base.isNullOrUndefined(e)&&ir(e),l=this.parent.createElement("div",{className:"e-xlfl-valuediv"}),d=this.options.filteredColumns.some((function(t){return e===t.field})),c=this.options.filteredColumns.filter((function(t){return t.field===e}));if(this.options.column.filterTemplate){var h={},p=this.options.column;d&&r&&(h=this.getExcelFilterData(r,h,p,i,c));var u=this.parent.element.id+p.uid+"filterTemplate";Jt(l,this.options.column.getFilterTemplate()(h,this.parent,"filterTemplate",u)),sf.base.isBlazor()?(l.children[0].classList.add(r),this.dlgDiv.querySelectorAll(".e-xlfl-value").length>1&&sf.base.updateBlazorTemplate(u,"FilterTemplate",p)):l.children[0].id=o?a+r:e+r,s.appendChild(l)}else{var f=this.parent.createElement("input",{id:o?a+r:e+r});l.appendChild(f),s.appendChild(l);var g=void 0,m=void 0;i&&i.length>0&&(g=(m=2===i.length?n?i[0]:i[1]:n?i[0]:void 0)&&m.operator===t.operator?m.value:void 0),{string:this.renderAutoComplete.bind(this),number:this.renderNumericTextBox.bind(this),date:this.renderDate.bind(this),datetime:this.renderDateTime.bind(this)}[this.options.type](this.options,e,f,g,this.parent.enableRtl)}},t.prototype.getExcelFilterData=function(e,t,r,i,n){var s="-xlfl-frstvalue"===e?0:1;if("-xlfl-frstvalue"===e||n.length>1){t={column:i instanceof Array?i[s]:i};var o=this.options.column.columnData&&n.length>1?1===this.options.column.columnData.length?0:1:s;t[this.options.field]=r.foreignKeyValue?this.options.column.columnData[o][r.foreignKeyValue]:n[o].value,this.options.foreignKeyValue&&(t[this.options.foreignKeyValue]=this.options.column.columnData[o][r.foreignKeyValue])}return t},t.prototype.renderMatchCase=function(e,t,r,i,n){var s=this.parent.createElement("div",{className:"e-xlfl-matchcasediv",attrs:{style:"display: inline-block"}}),o=!sf.base.isNullOrUndefined(e)&&rr(e),a=!sf.base.isNullOrUndefined(e)&&ir(e),l=this.parent.createElement("input",{id:o?a+i:e+i,attrs:{type:"checkbox"}});s.appendChild(l),r.appendChild(s);var d=!!(n&&n.length>0)&&(n&&2===n.length?n[1].matchCase:n[0].matchCase);new sf.buttons.CheckBox({label:this.getLocalizedLabel("MatchCase"),enableRtl:this.parent.enableRtl,checked:d}).appendTo(l)},t.prototype.renderDate=function(e,t,r,i,n){var s=xr(e.format,e.type);this.datePicker=new sf.calendars.DatePicker(zt({format:s,cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:n,value:new Date(i),locale:this.parent.locale},e.column.filter.params)),this.datePicker.appendTo(r)},t.prototype.renderDateTime=function(e,t,r,i,n){var s=xr(e.format,e.type);this.dateTimePicker=new sf.calendars.DateTimePicker(zt({format:s,cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:n,value:new Date(i),locale:this.parent.locale},e.column.filter.params)),this.dateTimePicker.appendTo(r)},t.prototype.completeAction=function(e){e.result=cr(e.result)},t.prototype.renderNumericTextBox=function(e,t,r,i,n){this.numericTxtObj=new sf.inputs.NumericTextBox(zt({format:e.format,placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:n,value:i,locale:this.parent.locale},e.column.filter.params)),this.numericTxtObj.appendTo(r)},t.prototype.renderAutoComplete=function(e,t,r,i,n){var s=this,o=this.options.column,a=this.isForeignColumn(o),l=a?o.dataSource:e.dataSource,d={value:a?o.foreignKeyValue:t},c=new sf.dropdowns.AutoComplete(zt({dataSource:l instanceof sf.data.DataManager?l:new sf.data.DataManager(l),fields:d,query:this.getQuery(),sortOrder:"Ascending",locale:this.parent.locale,cssClass:"e-popup-flmenu",autofill:!0,focus:function(){var i=!sf.base.isNullOrUndefined(t)&&rr(t),n=!sf.base.isNullOrUndefined(t)&&ir(t),o=i?n:t;c.filterType=s.dlgDiv.querySelector("#"+o+(r.id===o+"-xlfl-frstvalue"?"-xlfl-frstoptr":"-xlfl-secndoptr")).ej2_instances[0].value,c.ignoreCase="string"!==e.type||!s.dlgDiv.querySelector("#"+o+"-xlflmtcase").ej2_instances[0].checked,c.filterType=sf.base.isNullOrUndefined(c.filterType)?"equal":c.filterType},placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:n,actionComplete:function(e){var r=!sf.base.isNullOrUndefined(t)&&rr(t);e.result=e.result.filter((function(e,t,i){return i.map((function(e){return r?s.performComplexDataOperation(c.fields.value,e):e[c.fields.value]})).indexOf(r?s.performComplexDataOperation(c.fields.value,e):e[s.actObj.fields.value])===t}))},value:i},o.filter.params));c.appendTo(r),this.actObj=c},t.prototype.performComplexDataOperation=function(e,t){for(var r,i=e.split(".").length,n=e.split("."),s=t,o=0;o<i;o++)s=r=s[n[o]];return r},t}(jr),_r=function(){function e(e,t,r,i){this.contentRefresh=!0,this.isModelChanged=!0,this.aria=new _,this.currentTarget=null,this.parent=e,this.sortSettings=t,this.sortedColumns=r,this.focus=i.getService("focus"),this.addEventListener()}return e.prototype.updateModel=function(){var e,t={field:this.columnName,direction:this.direction},r=this.parent.groupSettings.columns,i=!1;if(this.isMultiSort)(e=this.getSortedColsIndexByField(this.columnName))>-1&&this.sortSettings.columns.splice(e,1),this.sortSettings.columns.push(t),this.sortSettings.columns=this.sortSettings.columns;else if(r.length){for(var n=[],s=0,o=r.length;s<o;s++)if(e=this.getSortedColsIndexByField(r[s],n),this.columnName===r[s])i=!0,n.push(t);else{var a=this.getSortColumnFromField(r[s]);n.push({field:a.field,direction:a.direction,isFromGroup:a.isFromGroup})}i||n.push(t),this.sortSettings.columns=n}else this.sortSettings.columns=[t];this.parent.dataBind(),this.lastSortedCol=this.columnName},e.prototype.onActionComplete=function(e){sf.base.isBlazor()&&!this.parent.isJsComponent&&(e.rows=null);var t=this.isRemove?{requestType:"sorting",type:c}:{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:c};this.isRemove=!1,this.parent.trigger(c,sf.base.extend(e,t))},e.prototype.sortColumn=function(e,t,r){var i=this.parent;if(!1===this.parent.getColumnByField(e).allowSorting||this.parent.isContextMenuOpen())this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:e});else if(i.allowMultiSorting||(r=i.allowMultiSorting),this.isActionPrevent())i.notify(T,{instance:this,handler:this.sortColumn,arg1:e,arg2:t,arg3:r});else{this.backupSettings(),this.columnName=e,this.direction=t,this.isMultiSort=r,this.removeSortIcons();i.getColumnHeaderByField(e);this.updateSortedCols(e,r),this.updateModel()}},e.prototype.backupSettings=function(){this.lastSortedCols=At(this.sortSettings.columns),this.lastCols=this.sortedColumns},e.prototype.restoreSettings=function(){this.isModelChanged=!1,this.isMultiSort=!0,this.parent.setProperties({sortSettings:{columns:this.lastSortedCols}},!0),this.sortedColumns=this.lastCols,this.isModelChanged=!0},e.prototype.updateSortedCols=function(e,t){if(!t)if(this.parent.allowGrouping)for(var r=0,i=this.sortedColumns.length;r<i;r++)this.parent.groupSettings.columns.indexOf(this.sortedColumns[r])<0&&(this.sortedColumns.splice(r,1),i--,r--);else this.sortedColumns.splice(0,this.sortedColumns.length);this.sortedColumns.indexOf(e)<0&&this.sortedColumns.push(e)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){if(this.contentRefresh){var t=this.sortSettings.columns.length?{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:d,target:this.currentTarget,cancel:!1}:{requestType:"sorting",type:d,cancel:!1,target:this.currentTarget};this.parent.notify(b,t)}this.refreshSortSettings(),this.removeSortIcons(),this.addSortIcons()}},e.prototype.refreshSortSettings=function(){this.sortedColumns.length=0;for(var e=this.sortSettings.columns,t=0;t<e.length;t++)e[t].isFromGroup||this.sortedColumns.push(e[t].field)},e.prototype.clearSorting=function(){var e=Gt(this.sortSettings.columns);if(this.isActionPrevent())this.parent.notify(T,{instance:this,handler:this.clearSorting});else{for(var t=0,r=e.length;t<r;t++)this.removeSortColumn(e[t].field);sf.base.isBlazor()&&!this.parent.isJsComponent&&(this.sortSettings.columns=this.sortSettings.columns)}},e.prototype.isActionPrevent=function(){return or(this.parent)},e.prototype.removeSortColumn=function(e){var t=this.parent,r=this.sortSettings.columns;if(!(0===r.length&&this.sortedColumns.indexOf(e)<0))if(this.isActionPrevent())this.parent.notify(T,{instance:this,handler:this.removeSortColumn,arg1:e});else{this.backupSettings(),this.removeSortIcons();for(var i=0,n=r.length;i<n;i++)if(r[i].field===e){if(t.allowGrouping&&t.groupSettings.columns.indexOf(r[i].field)>-1)continue;this.sortedColumns.splice(this.sortedColumns.indexOf(r[i].field),1),r.splice(i,1),this.isRemove=!0,this.isModelChanged&&this.parent.notify(b,{requestType:"sorting",type:d,target:this.currentTarget});break}this.addSortIcons()}},e.prototype.getSortedColsIndexByField=function(e,t){for(var r=t||this.sortSettings.columns,i=0,n=r.length;i<n;i++)if(r[i].field===e)return i;return-1},e.prototype.getModuleName=function(){return"sort"},e.prototype.initialEnd=function(){this.parent.off(g,this.initialEnd);if((!sf.base.isBlazor()||!this.parent.isServerRendered)&&this.parent.getColumns().length&&this.sortSettings.columns.length){var e=this.parent;this.contentRefresh=!1,this.isMultiSort=this.sortSettings.columns.length>1;for(var t=0,r=e.sortSettings.columns.slice();t<r.length;t++){var i=r[t];this.sortedColumns.indexOf(i.field)>-1&&this.sortColumn(i.field,i.direction,!0)}this.isMultiSort=!1,this.contentRefresh=!0}},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(g,this.initialEnd,this),this.parent.on("sorting-complete",this.onActionComplete,this),this.parent.on(v,this.onPropertyChanged,this),this.parent.on(S,this.clickHandler,this),this.parent.on(C,this.refreshSortIcons,this),this.parent.on(w,this.keyPressed,this),this.parent.on("cancel-Begin",this.cancelBeginEvent,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("sorting-complete",this.onActionComplete),this.parent.off(v,this.onPropertyChanged),this.parent.off(S,this.clickHandler),this.parent.off(C,this.refreshSortIcons),this.parent.off(w,this.keyPressed),this.parent.off("cancel-Begin",this.cancelBeginEvent))},e.prototype.destroy=function(){this.isModelChanged=!1;var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.parent.element.querySelector(".e-gridpopup").querySelectorAll(".e-sortdirect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none"),this.parent.refreshing||this.clearSorting(),this.isModelChanged=!0,this.removeEventListener())},e.prototype.cancelBeginEvent=function(e){"sorting"===e.requestType&&(this.restoreSettings(),this.refreshSortIcons(),this.isMultiSort=!0)},e.prototype.clickHandler=function(e){this.currentTarget=null,this.popUpClickHandler(e);var t=sf.base.closest(e.target,".e-headercell");if(t&&!e.target.classList.contains("e-grptogglebtn")&&!t.classList.contains("e-resized")&&!e.target.classList.contains("e-rhandler")&&!e.target.classList.contains("e-columnmenu")&&!e.target.classList.contains("e-filtermenudiv")&&!Ut(e.target,"e-stackedheadercell")){var r=this.parent.getColumnByUid(t.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));t.querySelectorAll(".e-ascending").length;"checkbox"!==r.type&&(this.initiateSort(t,e,r),sf.base.Browser.isDevice&&this.showPopUp(e))}t&&t.classList.remove("e-resized")},e.prototype.keyPressed=function(e){var t=e.target;if(!this.parent.isEdit&&("enter"===e.action||"ctrlEnter"===e.action||"shiftEnter"===e.action)&&sf.base.closest(t,".e-headercell")){var r=this.focus.getFocusedElement();if(sf.base.isNullOrUndefined(r)||!r.classList.contains("e-headercell")||!r.querySelector(".e-headercelldiv"))return;var i=this.parent.getColumnByUid(r.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));this.initiateSort(r,e,i)}},e.prototype.initiateSort=function(e,t,r){var i=this.parent,n=r.field;this.currentTarget=t.target;var s=e.querySelectorAll(".e-ascending").length?"Descending":"Ascending";t.shiftKey||this.sortSettings.allowUnsort&&e.querySelectorAll(".e-descending").length&&!(i.groupSettings.columns.indexOf(n)>-1)?(this.removeSortColumn(n),sf.base.isBlazor()&&!this.parent.isJsComponent&&(this.sortSettings.columns=this.sortSettings.columns)):this.sortColumn(n,s,t.ctrlKey||this.enableSortMultiTouch||-1!==navigator.userAgent.indexOf("Mac OS")&&t.metaKey)},e.prototype.showPopUp=function(e){var t=sf.base.closest(e.target,".e-headercell");sf.base.isNullOrUndefined(t)&&!this.parent.isContextMenuOpen()||qt(this.parent.element.querySelector(".e-gridpopup"),e,"e-sortdirect e-icons e-icon-sortdirect"+(this.sortedColumns.length>1?" e-spanclicked":""))},e.prototype.popUpClickHandler=function(e){var t=e.target;sf.base.closest(t,".e-headercell")||e.target.classList.contains("e-rowcell")||sf.base.closest(t,".e-gridpopup")?t.classList.contains("e-sortdirect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSortMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSortMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},e.prototype.addSortIcons=function(){for(var e,t,r=this.parent,i=this.sortSettings.columns,n=this.parent.getColumns().map((function(e){return e.field})),s=0,o=i.length;s<o;s++)e=r.getColumnHeaderByField(i[s].field),-1===n.indexOf(i[s].field)||sf.base.isNullOrUndefined(e)||(this.aria.setSort(e,i[s].direction),this.isMultiSort&&i.length>1&&e.querySelector(".e-headercelldiv").insertBefore(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(s+1).toString()}),e.querySelector(".e-headertext")),t=e.querySelector(".e-sortfilterdiv"),"Ascending"===i[s].direction?sf.base.classList(t,["e-ascending","e-icon-ascending"],[]):sf.base.classList(t,["e-descending","e-icon-descending"],[]))},e.prototype.removeSortIcons=function(e){for(var t,r=this.parent,i=this.sortSettings.columns,n=this.parent.getColumns().map((function(e){return e.field})),s=e||0,o=sf.base.isNullOrUndefined(e)?i.length:e+1;s<o;s++)t=r.getColumnHeaderByField(i[s].field),sf.base.isNullOrUndefined(t)||r.allowGrouping&&r.groupSettings.columns.indexOf(i[s].field)>-1&&!t.querySelector(".e-sortfilterdiv")||-1!==n.indexOf(i[s].field)&&(this.aria.setSort(t,"none"),sf.base.classList(t.querySelector(".e-sortfilterdiv"),[],["e-descending","e-icon-descending","e-ascending","e-icon-ascending"]),t.querySelector(".e-sortnumber")&&t.querySelector(".e-headercelldiv").removeChild(t.querySelector(".e-sortnumber")))},e.prototype.getSortColumnFromField=function(e){for(var t=0,r=this.sortSettings.columns.length;t<r;t++)if(this.sortSettings.columns[t].field===e)return this.sortSettings.columns[t];return!1},e.prototype.updateAriaAttr=function(){for(var e=this.parent.getColumns().map((function(e){return e.field})),t=0,r=this.sortedColumns;t<r.length;t++){var i=r[t];if(-1!==e.indexOf(i)){var n=this.parent.getColumnHeaderByField(i);this.aria.setSort(n,this.getSortColumnFromField(i).direction)}}},e.prototype.refreshSortIcons=function(e){void 0===e&&(e={args:{isFrozen:!1}}),e.args.isFrozen||(this.removeSortIcons(),this.isMultiSort=!0,this.removeSortIcons(),this.addSortIcons(),this.isMultiSort=!1,this.updateAriaAttr())},e}(),Kr=function(){function e(e){this.pagerModule=e}return e.prototype.render=function(){this.pagerElement=this.pagerModule.element,this.renderNumericContainer(),this.refreshNumericLinks(),this.wireEvents()},e.prototype.refresh=function(){this.pagerModule.updateTotalPages(),this.links.length&&this.updateLinksHtml(),this.updateStyles()},e.prototype.refreshNumericLinks=function(){var e,t=this.pagerModule,r=t.element.querySelector(".e-numericcontainer"),i=document.createDocumentFragment();r.innerHTML="";for(var n=1;n<=t.pageCount;n++)e=sf.base.createElement("a",{className:"e-link e-numericitem e-spacing e-pager-default",attrs:{role:"link",tabindex:"-1","aria-label":"Goto Page "+n,href:"javascript:void(0);",name:"Goto page"+n}}),t.currentPage===n&&sf.base.classList(e,["e-currentitem","e-active"],["e-pager-default"]),i.appendChild(e);r.appendChild(i),this.links=[].slice.call(r.childNodes)},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.pagerElement,"click",this.clickHandler,this)},e.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.pagerModule.element,"click",this.clickHandler)},e.prototype.destroy=function(){this.unwireEvents()},e.prototype.renderNumericContainer=function(){this.element=sf.base.createElement("div",{className:"e-pagercontainer",attrs:{role:"navigation"}}),this.renderFirstNPrev(this.element),this.renderPrevPagerSet(this.element),this.element.appendChild(sf.base.createElement("div",{className:"e-numericcontainer"})),this.renderNextPagerSet(this.element),this.renderNextNLast(this.element),this.pagerModule.element.appendChild(this.element)},e.prototype.renderFirstNPrev=function(e){this.first=sf.base.createElement("div",{className:"e-first e-icons e-icon-first",attrs:{title:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("FirstPageTooltip"):this.pagerModule.getLocalizedLabel("firstPageTooltip"),"aria-label":sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("FirstPageTooltip"):this.pagerModule.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}}),this.prev=sf.base.createElement("div",{className:"e-prev e-icons e-icon-prev",attrs:{title:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PreviousPageTooltip"):this.pagerModule.getLocalizedLabel("previousPageTooltip"),"aria-label":sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PreviousPageTooltip"):this.pagerModule.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}),sf.base.append([this.first,this.prev],e)},e.prototype.renderPrevPagerSet=function(e){var t=sf.base.createElement("div");this.PP=sf.base.createElement("a",{className:"e-link e-pp e-spacing",innerHTML:"...",attrs:{title:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PreviousPagerTooltip"):this.pagerModule.getLocalizedLabel("previousPagerTooltip"),role:"link","aria-label":sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PreviousPagerTooltip"):this.pagerModule.getLocalizedLabel("previousPagerTooltip"),tabindex:"-1",name:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PreviousPagerTooltip"):this.pagerModule.getLocalizedLabel("previousPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.PP),e.appendChild(t)},e.prototype.renderNextPagerSet=function(e){var t=sf.base.createElement("div");this.NP=sf.base.createElement("a",{className:"e-link e-np e-spacing",innerHTML:"...",attrs:{title:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("NextPagerTooltip"):this.pagerModule.getLocalizedLabel("nextPagerTooltip"),role:"link","aria-label":sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("NextPagerTooltip"):this.pagerModule.getLocalizedLabel("nextPagerTooltip"),tabindex:"-1",name:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("NextPagerTooltip"):this.pagerModule.getLocalizedLabel("nextPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.NP),e.appendChild(t)},e.prototype.renderNextNLast=function(e){this.next=sf.base.createElement("div",{className:"e-next e-icons e-icon-next",attrs:{title:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("NextPageTooltip"):this.pagerModule.getLocalizedLabel("nextPageTooltip"),"aria-label":sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("NextPageTooltip"):this.pagerModule.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}}),this.last=sf.base.createElement("div",{className:"e-last e-icons e-icon-last",attrs:{title:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("LastPageTooltip"):this.pagerModule.getLocalizedLabel("lastPageTooltip"),"aria-label":sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("LastPageTooltip"):this.pagerModule.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}),sf.base.append([this.next,this.last],e)},e.prototype.clickHandler=function(e){var t=this.pagerModule,r=e.target;return t.previousPageNo=t.currentPage,r.classList.contains("e-disable")||sf.base.isNullOrUndefined(r.getAttribute("index"))||(t.currentPage=parseInt(r.getAttribute("index"),10),t.dataBind()),!1},e.prototype.updateLinksHtml=function(){var e,t,r=this.pagerModule;r.currentPage=1===r.totalPages?1:r.currentPage,r.currentPage>r.totalPages&&r.totalPages&&(r.currentPage=r.totalPages),e=parseInt((r.currentPage/r.pageCount).toString(),10),r.currentPage%r.pageCount==0&&e>0&&(e-=1);for(var i=0;i<r.pageCount;i++)(t=e*r.pageCount+1+i)<=r.totalPages?(this.links[i].style.display="",this.links[i].setAttribute("index",t.toString()),this.links[i].innerHTML=r.customText?r.customText+t:t.toString(),r.currentPage!==t?this.links[i].classList.add("e-pager-default"):this.links[i].classList.remove("e-pager-default")):(this.links[i].innerHTML=r.customText?r.customText+t:t.toString(),this.links[i].style.display="none"),sf.base.classList(this.links[i],[],["e-currentitem","e-active"]);this.first.setAttribute("index","1"),this.last.setAttribute("index",r.totalPages.toString()),this.prev.setAttribute("index",(r.currentPage-1).toString()),this.next.setAttribute("index",(r.currentPage+1).toString()),this.pagerElement.querySelector(".e-mfirst").setAttribute("index","1"),this.pagerElement.querySelector(".e-mlast").setAttribute("index",r.totalPages.toString()),this.pagerElement.querySelector(".e-mprev").setAttribute("index",(r.currentPage-1).toString()),this.pagerElement.querySelector(".e-mnext").setAttribute("index",(r.currentPage+1).toString()),this.PP.setAttribute("index",(parseInt(this.links[0].getAttribute("index"),10)-r.pageCount).toString()),this.NP.setAttribute("index",(parseInt(this.links[this.links.length-1].getAttribute("index"),10)+1).toString())},e.prototype.updateStyles=function(){this.updateFirstNPrevStyles(),this.updatePrevPagerSetStyles(),this.updateNextPagerSetStyles(),this.updateNextNLastStyles(),this.links.length&&sf.base.classList(this.links[(this.pagerModule.currentPage-1)%this.pagerModule.pageCount],["e-currentitem","e-active"],[])},e.prototype.updateFirstNPrevStyles=function(){var e=["e-firstpage","e-pager-default"],t=["e-firstpagedisabled","e-disable"],r=["e-prevpage","e-pager-default"],i=["e-prevpagedisabled","e-disable"];this.pagerModule.totalPages>0&&this.pagerModule.currentPage>1?(sf.base.classList(this.prev,r,i),sf.base.classList(this.first,e,t),sf.base.classList(this.pagerElement.querySelector(".e-mfirst"),e,t),sf.base.classList(this.pagerElement.querySelector(".e-mprev"),r,i)):(sf.base.classList(this.prev,i,r),sf.base.classList(this.first,t,e),sf.base.classList(this.pagerElement.querySelector(".e-mprev"),i,r),sf.base.classList(this.pagerElement.querySelector(".e-mfirst"),t,e))},e.prototype.updatePrevPagerSetStyles=function(){this.pagerModule.currentPage>this.pagerModule.pageCount?sf.base.classList(this.PP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]):sf.base.classList(this.PP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"])},e.prototype.updateNextPagerSetStyles=function(){var e=this.pagerModule,t=this.links[0].innerHTML.replace(e.customText,"");!t.length||!this.links.length||parseInt(t,10)+e.pageCount>e.totalPages?sf.base.classList(this.NP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]):sf.base.classList(this.NP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])},e.prototype.updateNextNLastStyles=function(){var e=["e-lastpage","e-pager-default"],t=["e-lastpagedisabled","e-disable"],r=["e-nextpage","e-pager-default"],i=["e-nextpagedisabled","e-disable"],n=this.pagerModule;n.currentPage===n.totalPages||0===n.totalRecordsCount?(sf.base.classList(this.last,t,e),sf.base.classList(this.next,i,r),sf.base.classList(this.pagerElement.querySelector(".e-mlast"),t,e),sf.base.classList(this.pagerElement.querySelector(".e-mnext"),i,r)):(sf.base.classList(this.last,e,t),sf.base.classList(this.next,r,i),sf.base.classList(this.pagerElement.querySelector(".e-mlast"),e,t),sf.base.classList(this.pagerElement.querySelector(".e-mnext"),r,i))},e}(),Wr=function(){function e(e){this.pagerModule=e}return e.prototype.render=function(){var e=sf.base.createElement("div",{className:"e-parentmsgbar",attrs:{"aria-label":"Pager Information"}});this.pageNoMsgElem=sf.base.createElement("span",{className:"e-pagenomsg",styles:"textalign:right"}),this.pageCountMsgElem=sf.base.createElement("span",{className:"e-pagecountmsg",styles:"textalign:right"}),sf.base.append([this.pageNoMsgElem,this.pageCountMsgElem],e),this.pagerModule.element.appendChild(e),this.refresh()},e.prototype.refresh=function(){var e=this.pagerModule;sf.base.isBlazor()?(this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("CurrentPageInfo"),[0===e.totalRecordsCount?0:e.currentPage,e.totalPages||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel("TotalItemsInfo"),[e.totalRecordsCount||0])):(this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("currentPageInfo"),[0===e.totalRecordsCount?0:e.currentPage,e.totalPages||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel("totalItemsInfo"),[e.totalRecordsCount||0])),this.pageNoMsgElem.parentElement.setAttribute("aria-label",this.pageNoMsgElem.textContent+this.pageCountMsgElem.textContent)},e.prototype.hideMessage=function(){this.pageNoMsgElem&&(this.pageNoMsgElem.style.display="none"),this.pageCountMsgElem&&(this.pageCountMsgElem.style.display="none")},e.prototype.showMessage=function(){this.pageNoMsgElem||this.render(),this.pageNoMsgElem.style.display="",this.pageCountMsgElem.style.display=""},e.prototype.destroy=function(){},e.prototype.format=function(e,t){for(var r,i=0;i<t.length;i++)r=new RegExp("\\{"+i+"\\}","gm"),e=e.replace(r,t[i].toString());return e},e}(),Qr=(Nr=function(e,t){return(Nr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Nr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Jr=function(e,t,r,i){var s,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},Xr=function(e){function t(t,r){return e.call(this,t,r)||this}return Qr(t,e),t.prototype.requiredModules=function(){var e=[];return this.enableExternalMessage&&e.push({member:"externalMessage",args:[this]}),this.checkpagesizes()&&e.push({member:"pagerdropdown",args:[this]}),e},t.prototype.preRender=function(){this.defaultConstants={currentPageInfo:"{0} of {1} pages",totalItemsInfo:"({0} items)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager",previousPagerTooltip:"Go to previous pager",pagerDropDown:"Items per page",pagerAllDropDown:"Items",CurrentPageInfo:"{0} of {1} pages",TotalItemsInfo:"({0} items)",FirstPageTooltip:"Go to first page",LastPageTooltip:"Go to last page",NextPageTooltip:"Go to next page",PreviousPageTooltip:"Go to previous page",NextPagerTooltip:"Go to next pager",PreviousPagerTooltip:"Go to previous pager",PagerDropDown:"Items per page",PagerAllDropDown:"Items",All:"All"},this.containerModule=new Kr(this),this.pagerMessageModule=new Wr(this)},t.prototype.render=function(){this.template?this.pagerTemplate():(this.initLocalization(),this.updateRTL(),this.totalRecordsCount=this.totalRecordsCount||0,this.renderFirstPrevDivForDevice(),this.containerModule.render(),this.enablePagerMessage&&this.pagerMessageModule.render(),this.renderNextLastDivForDevice(),this.checkpagesizes()&&this.pagerdropdownModule&&this.pagerdropdownModule.render(),this.addAriaLabel(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render(),this.refresh(),this.trigger("created",{currentPage:this.currentPage,totalRecordsCount:this.totalRecordsCount}))},t.prototype.getPersistData=function(){return this.addOnPersist(["currentPage","pageSize"])},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.containerModule.destroy(),this.pagerMessageModule.destroy(),this.element.innerHTML=""},t.prototype.getModuleName=function(){return"pager"},t.prototype.onPropertyChanged=function(e,t){if(!this.isDestroyed){e.pageCount!==t.pageCount&&(this.containerModule.refreshNumericLinks(),this.containerModule.refresh());for(var r=0,i=Object.keys(e);r<i.length;r++){switch(i[r]){case"currentPage":this.checkGoToPage(e.currentPage,t.currentPage)&&this.currentPageChanged(e,t);break;case"pageSize":case"totalRecordsCount":case"customText":this.checkpagesizes()&&this.pagerdropdownModule&&(t.pageSize!==e.pageSize&&(this.currentPage=1),this.pagerdropdownModule.setDropDownValue("value",this.pageSize)),e.pageSize!==t.pageSize?(this.pageSize=e.pageSize,this.currentPageChanged(e,t)):this.refresh();break;case"pageSizes":this.checkpagesizes()&&this.pagerdropdownModule&&(this.pagerdropdownModule.destroy(),this.pagerdropdownModule.render()),this.refresh();break;case"template":this.templateFn=this.compile(this.template),this.refresh();break;case"locale":this.initLocalization(),this.refresh();break;case"enableExternalMessage":this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render();break;case"externalMessage":this.externalMessageModule&&this.externalMessageModule.refresh();break;case"enableRtl":this.updateRTL();break;case"enablePagerMessage":this.enablePagerMessage?this.pagerMessageModule.showMessage():this.pagerMessageModule.hideMessage()}}}},t.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},t.prototype.goToPage=function(e){this.checkGoToPage(e)&&(this.currentPage=e,this.dataBind())},t.prototype.setPageSize=function(e){this.pageSize=e,this.dataBind()},t.prototype.checkpagesizes=function(){return!(!0!==this.pageSizes&&!this.pageSizes.length)},t.prototype.checkGoToPage=function(e,t){return e!==this.currentPage&&(this.previousPageNo=this.currentPage),sf.base.isNullOrUndefined(t)||(this.previousPageNo=t),this.previousPageNo!==e&&e>=1&&e<=this.totalPages},t.prototype.currentPageChanged=function(e,t){if(this.enableQueryString&&this.updateQueryString(this.currentPage),e.currentPage!==t.currentPage||e.pageSize!==t.pageSize){var r={currentPage:this.currentPage,newProp:e,oldProp:t,cancel:!1};this.trigger("click",r),r.cancel||this.refresh()}},t.prototype.pagerTemplate=function(){var e;this.element.classList.add("e-pagertemplate"),this.compile(this.template);var t={currentPage:this.currentPage,pageSize:this.pageSize,pageCount:this.pageCount,totalRecordsCount:this.totalRecordsCount,totalPages:this.totalPages},r=this.element.parentElement.id+"_template";e=sf.base.isBlazor()?this.getPagerTemplate()(t,this,"template",r,this.isStringTemplate):this.getPagerTemplate()(t),Jt(this.element,e)},t.prototype.updateTotalPages=function(){this.totalPages=this.totalRecordsCount%this.pageSize==0?this.totalRecordsCount/this.pageSize:parseInt((this.totalRecordsCount/this.pageSize).toString(),10)+1},t.prototype.getPagerTemplate=function(){return this.templateFn},t.prototype.compile=function(e){if(e)try{document.querySelectorAll(e).length&&(this.templateFn=sf.base.compile(document.querySelector(e).innerHTML.trim()))}catch(t){this.templateFn=sf.base.compile(e)}},t.prototype.refresh=function(){this.template?(this.element.innerHTML="",this.updateTotalPages(),this.pagerTemplate()):(this.updateRTL(),this.containerModule.refresh(),this.enablePagerMessage&&this.pagerMessageModule.refresh(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.refresh())},t.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.initLocalization=function(){this.localeObj=new sf.base.L10n(this.getModuleName(),this.defaultConstants,this.locale)},t.prototype.updateQueryString=function(e){var t=this.getUpdatedURL(window.location.href,"page",e.toString());window.history.pushState({path:t},"",t)},t.prototype.getUpdatedURL=function(e,t,r){var i=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");if(e.match(i))return e.replace(i,"$1"+t+"="+r+"$2");var n="";return-1!==e.indexOf("#")&&(n=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+(-1!==e.indexOf("?")?"&":"?")+t+"="+r+n},t.prototype.renderFirstPrevDivForDevice=function(){this.element.appendChild(sf.base.createElement("div",{className:"e-mfirst e-icons e-icon-first",attrs:{title:sf.base.isBlazor()?this.getLocalizedLabel("FirstPageTooltip"):this.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}})),this.element.appendChild(sf.base.createElement("div",{className:"e-mprev e-icons e-icon-prev",attrs:{title:sf.base.isBlazor()?this.getLocalizedLabel("PreviousPageTooltip"):this.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}))},t.prototype.renderNextLastDivForDevice=function(){this.element.appendChild(sf.base.createElement("div",{className:"e-mnext e-icons e-icon-next",attrs:{title:sf.base.isBlazor()?this.getLocalizedLabel("NextPageTooltip"):this.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}})),this.element.appendChild(sf.base.createElement("div",{className:"e-mlast e-icons e-icon-last",attrs:{title:sf.base.isBlazor()?this.getLocalizedLabel("LastPageTooltip"):this.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}))},t.prototype.addAriaLabel=function(){var e=[".e-mfirst",".e-mprev",".e-mnext",".e-mlast"];if(!sf.base.Browser.isDevice)for(var t=0;t<e.length;t++){var r=this.element.querySelector(e[t]);r.setAttribute("aria-label",r.getAttribute("title"))}},Jr([sf.base.Property(!1)],t.prototype,"enableQueryString",void 0),Jr([sf.base.Property(!1)],t.prototype,"enableExternalMessage",void 0),Jr([sf.base.Property(!0)],t.prototype,"enablePagerMessage",void 0),Jr([sf.base.Property(12)],t.prototype,"pageSize",void 0),Jr([sf.base.Property(10)],t.prototype,"pageCount",void 0),Jr([sf.base.Property(1)],t.prototype,"currentPage",void 0),Jr([sf.base.Property()],t.prototype,"totalRecordsCount",void 0),Jr([sf.base.Property()],t.prototype,"externalMessage",void 0),Jr([sf.base.Property(!1)],t.prototype,"pageSizes",void 0),Jr([sf.base.Property()],t.prototype,"template",void 0),Jr([sf.base.Property("")],t.prototype,"customText",void 0),Jr([sf.base.Event()],t.prototype,"click",void 0),Jr([sf.base.Event()],t.prototype,"dropDownChanged",void 0),Jr([sf.base.Event()],t.prototype,"created",void 0),t=Jr([sf.base.NotifyPropertyChanges],t)}(sf.base.Component),Yr=function(){function e(e){this.pagerModule=e}return e.prototype.getModuleName=function(){return"pagerdropdown"},e.prototype.render=function(){var e=this.pagerModule;this.pagerDropDownDiv=sf.base.createElement("div",{className:"e-pagesizes"});var t=sf.base.createElement("div",{className:"e-pagerdropdown"}),r=sf.base.createElement("div",{className:"e-pagerconstant"}),i=sf.base.createElement("input",{attrs:{type:"text",tabindex:"1"}});this.pagerCons=sf.base.createElement("span",{className:"e-constant",innerHTML:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PagerDropDown"):this.pagerModule.getLocalizedLabel("pagerDropDown")}),t.appendChild(i),r.appendChild(this.pagerCons),this.pagerDropDownDiv.appendChild(t),this.pagerDropDownDiv.appendChild(r),this.pagerModule.element.appendChild(this.pagerDropDownDiv);var n=this.pagerModule.pageSizes,s=n.length?this.convertValue(n):[this.pagerModule.getLocalizedLabel("All"),"5","10","12","20"],o=this.pagerModule.pageSize;this.dropDownListObject=new sf.dropdowns.DropDownList({dataSource:s,value:o.toString(),change:this.onChange.bind(this),cssClass:"e-alldrop"}),this.dropDownListObject.appendTo(i),n.length&&(this.dropDownListObject.element.value=this.pagerModule.pageSize.toString()),e.pageSize=o,e.dataBind(),e.trigger("dropDownChanged",{pageSize:o}),this.addEventListener()},e.prototype.onChange=function(e){this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?(this.pagerModule.pageSize=this.pagerModule.totalRecordsCount,this.pagerCons.innerHTML=sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PagerAllDropDown"):this.pagerModule.getLocalizedLabel("pagerAllDropDown"),e.value=this.pagerModule.pageSize,document.getElementsByClassName("e-popup-open e-alldrop").length&&(document.getElementsByClassName("e-popup-open e-alldrop")[0].style.display="none")):(this.pagerModule.pageSize=parseInt(this.dropDownListObject.value,10),this.pagerCons.innerHTML!==this.pagerModule.getLocalizedLabel("pagerDropDown")&&(this.pagerCons.innerHTML=sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PagerDropDown"):this.pagerModule.getLocalizedLabel("pagerDropDown"))),this.pagerModule.dataBind(),this.pagerModule.trigger("dropDownChanged",{pageSize:parseInt(this.dropDownListObject.value,10)})},e.prototype.beforeValueChange=function(e){if("number"==typeof e.newProp.value){var t=e.newProp.value.toString();e.newProp.value=t}},e.prototype.convertValue=function(e){for(var t=e,r=0;r<t.length;r++)t[r]="number"==typeof t[r]?t[r].toString():t[r];return t},e.prototype.setDropDownValue=function(e,t){this.dropDownListObject&&(this.dropDownListObject[e]=t)},e.prototype.addEventListener=function(){this.dropDownListObject.on("beforeValueChange",this.beforeValueChange,this)},e.prototype.removeEventListener=function(){this.dropDownListObject.off("beforeValueChange",this.beforeValueChange)},e.prototype.destroy=function(e){this.dropDownListObject&&!this.dropDownListObject.isDestroyed&&(this.removeEventListener(),this.dropDownListObject.destroy(),sf.base.remove(this.pagerDropDownDiv))},e}(),$r=function(){function e(e){this.pagerModule=e}return e.prototype.getModuleName=function(){return"externalMessage"},e.prototype.render=function(){this.element=sf.base.createElement("div",{className:"e-pagerexternalmsg",attrs:{"aria-label":"Pager external message"}}),this.pagerModule.element.appendChild(this.element),this.refresh()},e.prototype.refresh=function(){this.pagerModule.externalMessage&&this.pagerModule.externalMessage.toString().length?(this.showMessage(),this.element.innerHTML=this.pagerModule.externalMessage):this.hideMessage()},e.prototype.hideMessage=function(){sf.base.isNullOrUndefined(this.element)||(this.element.style.display="none")},e.prototype.showMessage=function(){this.element.style.display=""},e.prototype.destroy=function(){sf.base.remove(this.element)},e}(),Zr=function(){function e(e,t){Xr.Inject($r,Yr),this.parent=e,this.pageSettings=t,this.addEventListener()}return e.prototype.getModuleName=function(){return"pager"},e.prototype.render=function(){var e,t=this.parent;this.pagerDestroy(),sf.base.isNullOrUndefined(this.parent.pagerTemplate)||(this.pageSettings.template=this.parent.pagerTemplate,this.parent.pageTemplateChange=!0),this.element=this.parent.createElement("div",{className:"e-gridpager"}),e=zt({},sf.base.extend({},Ht(this.pageSettings)),{click:this.clickHandler.bind(this),dropDownChanged:this.onSelect.bind(this),enableRtl:t.enableRtl,locale:t.locale,created:this.addAriaAttr.bind(this)},["parentObj","propName"]),this.pagerObj=new Xr(e),this.pagerObj.allowServerDataBinding=!1},e.prototype.onSelect=function(e){this.pageSettings.pageSize=e.pageSize,this.isInitialLoad||(this.pageSettings.currentPage=1)},e.prototype.addAriaAttr=function(){if(!this.pageSettings.template){for(var e=this.parent.createElement("div",{className:"e-numericcontainer"}),t=this.element.querySelector(".e-pagercontainer"),r=document.createDocumentFragment(),i=this.element.querySelector(".e-numericcontainer"),n=i.querySelectorAll("a"),s=0;s<n.length;s++){this.parent.getContentTable()?n[s].setAttribute("aria-owns",this.parent.getContentTable().id):n[s].setAttribute("aria-owns",this.parent.element.getAttribute("id")+"_content_table");var o=this.parent.createElement("div");o.appendChild(n[s]),r.appendChild(o)}e.appendChild(r),t.replaceChild(e,i);for(var a=[".e-mfirst",".e-mprev",".e-first",".e-prev",".e-next",".e-last",".e-mnext",".e-mlast"],l=0;l<a.length;l++){var d=this.element.querySelector(a[l]);this.parent.getContentTable()&&d.setAttribute("aria-owns",this.parent.getContentTable().id)}}},e.prototype.dataReady=function(e){this.updateModel(e)},e.prototype.refresh=function(){this.pagerObj.refresh()},e.prototype.goToPage=function(e){this.pagerObj.goToPage(e)},e.prototype.setPageSize=function(e){this.pagerObj.setPageSize(e)},e.prototype.updateModel=function(e){this.parent.pageSettings.totalRecordsCount=e.count,this.parent.dataBind()},e.prototype.onActionComplete=function(e){sf.base.isBlazor()&&!this.parent.isJsComponent&&(e.rows=null),this.parent.trigger(c,sf.base.extend(e,{currentPage:this.parent.pageSettings.currentPage,requestType:"paging",type:c}))},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){for(var t=e.properties,r=0,i=Object.keys(t);r<i.length;r++){var n=i[r];this.pagerObj[n]=t[n]}this.pagerObj.dataBind()}},e.prototype.clickHandler=function(e){var t=this.parent;if(this.isForceCancel||or(t)&&!t.prevPageMoving)return this.isForceCancel?this.isForceCancel=!1:(sf.base.isNullOrUndefined(e.newProp)||sf.base.isNullOrUndefined(e.newProp.pageSize)?e.currentPage&&(t.notify(T,{instance:this,handler:this.goToPage,arg1:e.currentPage}),this.pagerObj.currentPage=t.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:t.pageSettings.currentPage):(t.notify(T,{instance:this,handler:this.setPageSize,arg1:e.newProp.pageSize}),this.pagerObj.pageSize=e.oldProp.pageSize,t.pageSettings.pageSize=e.newProp.pageSize),this.isForceCancel=!0,this.pagerObj.dataBind()),void(e.cancel=!0);t.pageSettings.pageSize=this.pagerObj.pageSize,t.prevPageMoving=!1;var r=this.pageSettings.currentPage;this.pageSettings.currentPage=e.currentPage,this.parent.notify(b,{requestType:"paging",previousPage:r,currentPage:e.currentPage,type:d}),this.parent.requestTypeAction="paging"},e.prototype.keyPressHandler=function(e){e.action in ei&&(e.preventDefault(),this.element.querySelector(ei[e.action]).click())},e.prototype.updateExternalMessage=function(e){this.pagerObj.enableExternalMessage||(this.pagerObj.enableExternalMessage=!0,this.pagerObj.dataBind()),this.pagerObj.externalMessage=e,this.pagerObj.dataBind()},e.prototype.appendToElement=function(e){this.isInitialLoad=!0,this.parent.element.appendChild(this.element),this.parent.setGridPager(this.element),this.pagerObj.appendTo(this.element),this.isInitialLoad=!1},e.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.appendToElement())},e.prototype.addEventListener=function(){this.handlers={load:this.render,end:this.appendToElement,ready:this.dataReady,complete:this.onActionComplete,updateLayout:this.enableAfterRender,inboundChange:this.onPropertyChanged,keyPress:this.keyPressHandler},this.parent.isDestroyed||(this.parent.on(p,this.handlers.load,this),this.parent.on(u,this.handlers.end,this),this.parent.on(f,this.handlers.ready,this),this.parent.on("paging-complete",this.handlers.complete,this),this.parent.on(m,this.handlers.updateLayout,this),this.parent.on(v,this.handlers.inboundChange,this),this.parent.on(w,this.handlers.keyPress,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(p,this.handlers.load),this.parent.off(u,this.handlers.end),this.parent.off(f,this.handlers.ready),this.parent.off("paging-complete",this.handlers.complete),this.parent.off(m,this.handlers.updateLayout),this.parent.off(v,this.handlers.inboundChange),this.parent.off(w,this.handlers.keyPress))},e.prototype.destroy=function(){this.removeEventListener(),this.pagerDestroy()},e.prototype.pagerDestroy=function(){this.pagerObj&&!this.pagerObj.isDestroyed&&(this.pagerObj.destroy(),sf.base.remove(this.element))},e}(),ei={pageUp:".e-prev",pageDown:".e-next",ctrlAltPageDown:".e-last",ctrlAltPageUp:".e-first",altPageUp:".e-pp",altPageDown:".e-np"},ti=(Lr=function(e,t){return(Lr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Lr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ri=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-filterbarcell"}),t}return ti(t,e),t.prototype.getGui=function(){return this.parent.createElement("div")},t.prototype.render=function(e,t){var r,i=this.parent.element.querySelector(".e-filterbar"),n=this.element.cloneNode(),s=this.getGui(),o=e.column;if(i.appendChild(n),n.setAttribute("e-mappinguid",o.uid),o.filterTemplate){var a={};t&&(a[o.field]=t[o.field]);if(a.column=o,o.visible){var l=this.parent.element.id+o.uid+"filterTemplate";Jt(n,o.getFilterTemplate()(a,this.parent,"filterTemplate",l))}else n.classList.add("e-hide")}else if("checkbox"!==o.type){if(!sf.base.isNullOrUndefined(o.allowFiltering)&&!o.allowFiltering||sf.base.isNullOrUndefined(o.filterBarTemplate)){sf.base.attributes(s,{class:"e-filterdiv e-fltrinputdiv"}),r=this.parent.createElement("input",{id:o.field+"_filterBarcell",className:"e-filtertext",attrs:{type:"search",title:o.headerText+e.attributes.title,value:t[e.column.field]?t[e.column.field]:"",role:"search"}}),s.appendChild(r);d={element:r,floatLabelType:"Never",properties:{enableRtl:this.parent.enableRtl,showClearButton:!0}};sf.inputs.Input.createInput(d,this.parent.createElement)}else if(n.classList.add("e-fltrtemp"),sf.base.attributes(s,{class:"e-fltrtempdiv"}),sf.base.isNullOrUndefined(o.filterBarTemplate.create))r=this.parent.createElement("input",{id:o.field+"_filterBarcell",className:"e-filterUi_input e-filtertext e-fltrTemp",attrs:{type:"search",title:o.headerText}}),s.appendChild(r);else{var d={column:o,node:Element},c=o.filterBarTemplate.create;if("string"==typeof c&&(c=sf.base.getValue(c,window)),"string"==typeof(r=c(d))){var h=this.parent.createElement("div");h.innerHTML=r,r=h.firstChild}sf.base.attributes(s,{class:"e-filterUi_input e-filtertext e-fltrTemp",title:o.headerText,id:o.field+"_filterBarcell"}),s.appendChild(r)}if((!1===o.allowFiltering||""===o.field||sf.base.isNullOrUndefined(o.field))&&(r.setAttribute("disabled","true"),r.classList.add("e-disable")),o.visible||n.classList.add("e-hide"),this.appendHtml(n,s),(sf.base.isNullOrUndefined(o.allowFiltering)||o.allowFiltering)&&!sf.base.isNullOrUndefined(o.filterBarTemplate)){var p=o.filterBarTemplate.write;d={element:r,column:o};"string"==typeof p&&(p=sf.base.getValue(p,window)),p.call(this,d)}}return n},t.prototype.appendHtml=function(e,t){return e.appendChild(t),e},t}(G),ii=function(){function e(e,t,r,i){this.parent=e,this.serviceLocator=r,this.filterSettings=i,this.customFilterOperators=t}return e.prototype.renderOperatorUI=function(e,t,r,i){this.dialogObj=i;var n=r.type+"Operator";this.optrData=this.customOptr=sf.base.isNullOrUndefined(this.parent.filterSettings.operators)||sf.base.isNullOrUndefined(this.parent.filterSettings.operators[n])?this.customFilterOperators[n]:this.parent.filterSettings.operators[n];var s=this.customOptr,o=this.dropSelectedVal(r,n),a=this.parent.createElement("div",{className:"e-flm_optrdiv"});e.appendChild(a);var l=this.parent.createElement("input",{id:r.uid+"-floptr"});a.appendChild(l),this.dropOptr=new sf.dropdowns.DropDownList({dataSource:s,fields:{text:"text",value:"value"},open:this.dropDownOpen.bind(this),cssClass:"e-popup-flmenu",text:o}),this.dropOptr.appendTo("#"+r.uid+"-floptr")},e.prototype.dropDownOpen=function(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},e.prototype.dropSelectedVal=function(e,t){for(var r="",i=0,n=this.parent.filterSettings.columns;i<n.length;i++){var s=n[i];if(e.field===s.field||e.isForeignColumn()&&e.foreignKeyValue===s.field){var o=new sf.data.DataManager(this.optrData).executeLocal((new sf.data.Query).where("value","equal",s.operator));r=sf.base.isNullOrUndefined(o[0])?"":o[0].text}}if(""===r)if(e.filter.operator)for(var a=Object.keys(this.optrData).length,l=0;l<a;l++)this.optrData[l].value===e.filter.operator&&(r=this.optrData[l].text);else r=this.optrData[0].text;return r},e.prototype.getFlOperator=function(){return this.dropOptr.value},e}(),ni=function(){function e(e,t,r){this.parent=e,this.serLocator=t,this.filterSettings=r}return e.prototype.create=function(e){this.instance=this.parent.createElement("input",{className:"e-flmenu-input",id:"strui-"+e.column.uid}),e.target.appendChild(this.instance),this.dialogObj=e.dialogObj,this.actObj=this.getAutoCompleteOptions(e),this.actObj.appendTo(this.instance)},e.prototype.getAutoCompleteOptions=function(e){var t=this,r=e.column.isForeignColumn(),i=r?e.column.dataSource:this.parent.dataSource,n={value:r?e.column.foreignKeyValue:e.column.field};return new sf.dropdowns.AutoComplete(sf.base.extend({dataSource:i instanceof sf.data.DataManager?i:new sf.data.DataManager(i),fields:n,locale:this.parent.locale,enableRtl:this.parent.enableRtl,query:this.parent.query.clone(),sortOrder:"Ascending",open:this.openPopup.bind(this),cssClass:"e-popup-flmenu",focus:function(){t.actObj.filterType=e.getOptrInstance.getFlOperator()},autofill:!0,placeholder:e.localizeText.getConstant("EnterValue"),actionComplete:function(e){e.result=e.result.filter((function(e,r,i){return i.map((function(e){return sf.base.getValue(t.actObj.fields.value,e)})).indexOf(sf.base.getValue(t.actObj.fields.value,e))===r}))}},e.column.filter.params))},e.prototype.write=function(e){this.filterSettings.columns;""===e.filteredValue||sf.base.isNullOrUndefined(e.filteredValue)||(document.querySelector("#strui-"+e.column.uid).ej2_instances[0].value=e.filteredValue)},e.prototype.read=function(e,t,r,i){var n=document.querySelector("#strui-"+t.uid).ej2_instances[0];sf.base.Browser.isDevice&&(n.hidePopup(),n.focusOut());var s=n.value;(sf.base.isNullOrUndefined(s)||""===s)&&(s=null),i.filterByColumn(t.field,r,s,"and",this.parent.filterSettings.enableCaseSensitivity)},e.prototype.openPopup=function(e){pr(e,this.dialogObj)},e}(),si=function(){function e(e,t,r){this.filterSettings=r,this.parent=e,this.serviceLocator=t}return e.prototype.create=function(e){this.instance=this.parent.createElement("input",{className:"e-flmenu-input",id:"numberui-"+e.column.uid}),e.target.appendChild(this.instance),this.numericTxtObj=new sf.inputs.NumericTextBox(sf.base.extend({format:"string"==typeof e.column.format||sf.base.isUndefined(e.column.format)?e.column.format:e.column.format.format,locale:this.parent.locale,cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("EnterValue"),enableRtl:this.parent.enableRtl},e.column.filter.params)),this.numericTxtObj.appendTo(this.instance)},e.prototype.write=function(e){document.querySelector("#numberui-"+e.column.uid).ej2_instances[0].value=e.filteredValue},e.prototype.read=function(e,t,r,i){var n=document.querySelector("#numberui-"+t.uid).ej2_instances[0].value;i.filterByColumn(t.field,r,n,"and",!0)},e}(),oi=function(){function e(e,t,r){this.parent=e,this.serviceLocator=t,this.filterSettings=r}return e.prototype.create=function(e){var t=e.column.isForeignColumn(),r=t?e.column.dataSource:this.parent.dataSource,i=t?e.column.foreignKeyValue:e.column.field;this.elem=this.parent.createElement("input",{className:"e-flmenu-input",id:"bool-ui-"+e.column.uid}),e.target.appendChild(this.elem),this.dialogObj=e.dialogObj,this.dropInstance=new sf.dropdowns.DropDownList(sf.base.extend({dataSource:r instanceof sf.data.DataManager?r:new sf.data.DataManager(r),query:(new sf.data.Query).select(i),fields:{text:i,value:i},placeholder:e.localizeText.getConstant("SelectValue"),cssClass:"e-popup-flmenu",locale:this.parent.locale,enableRtl:this.parent.enableRtl,open:this.openPopup.bind(this),actionComplete:function(e){e.result=sf.data.DataUtil.distinct(e.result,i,!0)}},e.column.filter.params)),this.dropInstance.appendTo(this.elem)},e.prototype.write=function(e){var t=document.querySelector("#bool-ui-"+e.column.uid).ej2_instances[0];sf.base.isNullOrUndefined(e.filteredValue)||(t.text=e.filteredValue)},e.prototype.read=function(e,t,r,i){var n=document.querySelector("#bool-ui-"+t.uid).ej2_instances[0].value;i.filterByColumn(t.field,r,n,"and",!1)},e.prototype.openPopup=function(e){pr(e,this.dialogObj)},e}(),ai=function(){function e(e,t,r){this.parent=e,this.locator=t,this.fltrSettings=r}return e.prototype.create=function(e){var t=xr(e.column.format,e.column.type);this.dialogObj=e.dialogObj,this.inputElem=this.parent.createElement("input",{className:"e-flmenu-input",id:"dateui-"+e.column.uid}),e.target.appendChild(this.inputElem),"date"===e.column.type?this.datePickerObj=new sf.calendars.DatePicker(sf.base.extend({format:t,cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("ChooseDate"),width:"100%",locale:this.parent.locale,enableRtl:this.parent.enableRtl,open:this.openPopup.bind(this)},e.column.filter.params)):"datetime"===e.column.type&&(this.datePickerObj=new sf.calendars.DateTimePicker(sf.base.extend({format:t,cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("ChooseDate"),width:"100%",locale:this.parent.locale,enableRtl:this.parent.enableRtl,open:this.openPopup.bind(this)},e.column.filter.params))),this.datePickerObj.appendTo(this.inputElem)},e.prototype.write=function(e){this.fltrSettings.columns;document.querySelector("#dateui-"+e.column.uid).ej2_instances[0].value=sf.base.isNullOrUndefined(e.filteredValue)?null:new Date(e.filteredValue)},e.prototype.read=function(e,t,r,i){var n=document.querySelector("#dateui-"+t.uid).ej2_instances[0].value;n=sf.base.isNullOrUndefined(n)?null:n,i.filterByColumn(t.field,r,n,"and",!0)},e.prototype.openPopup=function(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},e}(),li=function(){function e(e,t,r,i,n){this.isDialogOpen=!1,this.colTypes={string:ni,number:si,date:ai,boolean:oi,datetime:ai},this.parent=e,this.filterSettings=t,this.serviceLocator=r,this.customFilterOperators=i,this.filterObj=n,this.flMuiObj=new ii(this.parent,this.customFilterOperators,this.serviceLocator),this.l10n=this.serviceLocator.getService("localization")}return e.prototype.openDialog=function(e){this.col=this.parent.getColumnByField(e.field),(sf.base.isNullOrUndefined(this.col.filter)||sf.base.isNullOrUndefined(this.col.filter.type)||"Menu"===this.col.filter.type)&&this.renderDlgContent(e.target,this.col)},e.prototype.closeDialog=function(){if(this.dlgObj){if(sf.base.isBlazor())for(var e=this.parent.getColumns(),t=0;t<e.length;t++)if(e[t].filterTemplate){var r=this.parent.element.id+e[t].uid+"filterTemplate";sf.base.updateBlazorTemplate(r,"FilterTemplate",e[t])}var i=document.getElementById(this.dlgObj.element.id);this.dlgObj&&!this.dlgObj.isDestroyed&&i&&(this.parent.notify("filter-menu-close",{field:this.col.field}),this.isDialogOpen=!1,this.dlgObj.destroy(),sf.base.remove(i))}},e.prototype.renderDlgContent=function(e,t){var r={requestType:"filterbeforeopen",columnName:t.field,columnType:t.type};if(!sf.base.isBlazor()||this.parent.isJsComponent){r.filterModel=this}this.parent.trigger(d,r);var i=this.parent.createElement("div",{className:"e-flmenu-maindiv",id:t.uid+"-flmenu"});this.dlgDiv=this.parent.createElement("div",{className:"e-flmenu",id:t.uid+"-flmdlg"}),this.dlgDiv.setAttribute("aria-label",this.l10n.getConstant("FilterMenuDialogARIA")),this.parent.element.appendChild(this.dlgDiv),this.dlgObj=new sf.popups.Dialog({showCloseIcon:!1,closeOnEscape:!1,locale:this.parent.locale,visible:!1,enableRtl:this.parent.enableRtl,created:this.dialogCreated.bind(this,e,t),position:this.parent.element.classList.contains("e-device")?{X:"center",Y:"center"}:{X:"",Y:""},target:this.parent.element.classList.contains("e-device")?document.body:this.parent.element,buttons:[{click:this.filterBtnClick.bind(this,t),buttonModel:{content:this.l10n.getConstant("FilterButton"),isPrimary:!0,cssClass:"e-flmenu-okbtn"}},{click:this.clearBtnClick.bind(this,t),buttonModel:{content:this.l10n.getConstant("ClearButton"),cssClass:"e-flmenu-cancelbtn"}}],content:i,width:!sf.base.isNullOrUndefined(Ut(e,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:250,animationSettings:{effect:"None"},cssClass:"e-filter-popup"});this.dlgObj.isStringTemplate=!0,this.dlgObj.appendTo(this.dlgDiv)},e.prototype.dialogCreated=function(e,t){sf.base.Browser.isDevice||hr(e,this.dlgObj,this.parent),this.renderFilterUI(e,t),this.parent.notify("filterDialogCreated",{}),this.dlgObj.element.style.maxHeight="350px",this.dlgObj.show(),t.filterTemplate||this.writeMethod(t,this.dlgObj.element.querySelector("#"+t.uid+"-flmenu"));var r={requestType:"filterafteropen",columnName:t.field,columnType:t.type};if(!sf.base.isBlazor()||this.parent.isJsComponent){r.filterModel=this}this.isDialogOpen=!0,this.parent.trigger(c,r)},e.prototype.renderFilterUI=function(e,t){var r=this.dlgObj.element.querySelector(".e-flmenu-maindiv");this.parent.log("column_type_missing",{column:t}),this.renderOperatorUI(r,e,t),this.renderFlValueUI(r,e,t)},e.prototype.renderOperatorUI=function(e,t,r){this.flMuiObj.renderOperatorUI(e,t,r,this.dlgObj)},e.prototype.renderFlValueUI=function(e,t,r){var i=this.parent.createElement("div",{className:"e-flmenu-valuediv"}),n=this.filterObj;e.appendChild(i);this.flMuiObj,this.dlgObj;var s=new this.colTypes[r.type](this.parent,this.serviceLocator,this.parent.filterSettings);if(r.filterTemplate){var o={};o[r.field]=o.value=n.values[r.field],r.foreignKeyValue&&(o[r.foreignKeyValue]=n.values[r.field],o[r.field]=void 0);o.column=r;var a=this.parent.element.id+r.uid+"filterTemplate",l=r.getFilterTemplate()(o,this.parent,"filterTemplate",a);sf.base.updateBlazorTemplate(a,"FilterTemplate",r),Jt(i,l)}else if(sf.base.isNullOrUndefined(r.filter)||sf.base.isNullOrUndefined(r.filter.ui)||sf.base.isNullOrUndefined(r.filter.ui.create))s.create({column:r,target:i,getOptrInstance:this.flMuiObj,localizeText:this.l10n,dialogObj:this.dlgObj});else{var d=r.filter.ui.create;"string"==typeof d&&(d=sf.base.getValue(d,window)),d({column:r,target:i,getOptrInstance:this.flMuiObj,dialogObj:this.dlgObj})}},e.prototype.writeMethod=function(e,t){for(var r,i=t.querySelector(".e-flmenu-valinput"),n=new this.colTypes[e.type](this.parent,this.serviceLocator,this.parent.filterSettings),s=0,o=this.filterSettings.columns;s<o.length;s++){var a=o[s];e.uid===a.uid&&(r=a.value)}if(sf.base.isNullOrUndefined(e.filter)||sf.base.isNullOrUndefined(e.filter.ui)||sf.base.isNullOrUndefined(e.filter.ui.write))n.write({column:e,target:i,parent:this.parent,filteredValue:r});else{var l=e.filter.ui.write;"string"==typeof l&&(l=sf.base.getValue(l,window)),l({column:e,target:i,parent:this.parent,filteredValue:r})}},e.prototype.filterBtnClick=function(e){var t,r=this.dlgObj.element.querySelector(".e-flmenu-valuediv input");t=this.flMuiObj.getFlOperator();var i=new this.colTypes[e.type](this.parent,this.serviceLocator,this.parent.filterSettings);if(e.filterTemplate){var n=this.dlgDiv.querySelector(".e-flmenu-valuediv"),s=void 0;if(n.children[0].value)s=n.children[0].value;else if(sf.base.isBlazor()||sf.base.isNullOrUndefined(n.children[0].ej2_instances)){var o=n.querySelector(".e-control");s="boolean"===e.type?o.checked:sf.base.isNullOrUndefined(o.ej2_instances)?o.value:o.ej2_instances[0].value}else s=n.children[0].ej2_instances[0].value;this.filterObj.filterByColumn(e.field,t,s)}else if(sf.base.isNullOrUndefined(e.filter)||sf.base.isNullOrUndefined(e.filter.ui)||sf.base.isNullOrUndefined(e.filter.ui.read))i.read(r,e,t,this.filterObj);else{var a=e.filter.ui.read;"string"==typeof a&&(a=sf.base.getValue(a,window)),a({element:r,column:e,operator:t,fltrObj:this.filterObj})}var l=this.parent.showColumnMenu?".e-columnmenu":".e-icon-filter",d=this.parent.element.querySelector('[e-mappinguid="'+e.uid+'"]').parentElement.querySelector(l);d&&d.classList.add("e-filtered"),this.closeDialog()},e.prototype.clearBtnClick=function(e){this.filterObj.removeFilteredColsByField(e.field),sf.base.isBlazor()&&!this.parent.isJsComponent&&this.parent.setProperties({filterSettings:{columns:this.filterSettings.columns}},!0),this.closeDialog();var t=this.parent.showColumnMenu?".e-columnmenu":".e-icon-filter",r=this.parent.element.querySelector('[e-mappinguid="'+e.uid+'"]').parentElement.querySelector(t);r&&r.classList.remove("e-filtered")},e.prototype.destroy=function(){this.closeDialog()},e.prototype.getFilterUIInfo=function(){return{field:this.col.field,operator:this.flMuiObj.getFlOperator()}},e}(),di=function(){function e(e,t,r){this.parent=e,this.isresetFocus=!0,this.checkBoxBase=new jr(e),this.addEventListener()}return e.prototype.destroy=function(){this.removeEventListener(),this.checkBoxBase.closeDialog()},e.prototype.openDialog=function(e){this.checkBoxBase.openDialog(e),this.parent.log("column_type_missing",{column:e.column})},e.prototype.closeDialog=function(){this.removeEventListener(),this.checkBoxBase.closeDialog(),this.isresetFocus&&this.parent.notify("restore-Focus",{})},e.prototype.getModuleName=function(){return"checkboxFilter"},e.prototype.actionBegin=function(e){this.parent.trigger(d,e)},e.prototype.actionComplete=function(e){this.parent.trigger(c,e)},e.prototype.actionPrevent=function(e){or(this.parent)&&(this.parent.notify(T,e),e.cancel=!0)},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("cbox-filter-begin",this.actionBegin,this),this.parent.on("cbox-filter-complete",this.actionComplete,this),this.parent.on(E,this.actionPrevent,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("cbox-filter-begin",this.actionBegin),this.parent.off("cbox-filter-complete",this.actionComplete),this.parent.off(E,this.actionPrevent))},e}(),ci=(qr=function(e,t){return(qr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}qr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),hi=function(e){function t(t,r,i,n){var s=e.call(this,t,r,i)||this;return s.parent=t,s.isresetFocus=!0,s.excelFilterBase=new Gr(t,n),s}return ci(t,e),t.prototype.destroy=function(){this.excelFilterBase.closeDialog()},t.prototype.openDialog=function(e){this.excelFilterBase.openDialog(e)},t.prototype.closeDialog=function(){this.excelFilterBase.closeDialog(),this.isresetFocus&&this.parent.notify("restore-Focus",{})},t.prototype.filterByColumn=function(e,t,r,i,n,s,o,a){this.excelFilterBase.filterByColumn(e,t,r,i,n,s,o,a)},t.prototype.getFilterUIInfo=function(){return this.excelFilterBase.getFilterUIInfo()},t.prototype.getModuleName=function(){return"excelFilter"},t}(di),pi=function(){function t(e,t,r){this.predicate="and",this.contentRefresh=!0,this.refresh=!0,this.values={},this.cellText={},this.nextFlMenuOpen="",this.type={Menu:li,CheckBox:di,Excel:hi},this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},this.fltrDlgDetails={field:"",isOpen:!1},this.skipNumberInput=["="," ","!"],this.skipStringInput=[">","<","="],this.actualPredicate={},this.parent=e,this.filterSettings=t,this.serviceLocator=r,this.addEventListener()}return t.prototype.render=function(t){if(!sf.data.DataUtil.getObject("args.isFrozen",t)){var r=this.parent;if(this.l10n=this.serviceLocator.getService("localization"),this.getLocalizedCustomOperators(),"FilterBar"===this.parent.filterSettings.type&&r.columns.length){var i=this.parent.element.querySelector(".e-filterbar");i&&sf.base.remove(i);var n=new B(this.serviceLocator,e.CellType.Filter,r),s=void 0;this.serviceLocator.getService("cellRendererFactory").addCellRenderer(e.CellType.Filter,new ri(this.parent,this.serviceLocator)),this.valueFormatter=this.serviceLocator.getService("valueFormatter"),n.element=this.parent.createElement("tr",{className:"e-filterbar"}),(s=this.generateRow()).data=this.values,this.parent.getHeaderContent().querySelector("thead").appendChild(n.element);var o=this.parent.element.querySelector(".e-rowdragheader");this.element=n.render(s,r.getColumns(),null,null,n.element);var a=this.element.querySelector(".e-detailheadercell");a&&(a.className="e-filterbarcell e-mastercell"),o&&(o.className="e-dragheadercell e-mastercell");var l=[].slice.call(this.element.querySelectorAll(".e-grouptopleftcell"));l.length&&l[l.length-1].classList.add("e-lastgrouptopleftcell"),this.wireEvents(),this.parent.notify("freezerender",{case:"filter"})}}},t.prototype.destroy=function(){var e=this.parent.element;if(e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.filterModule&&this.filterModule.destroy(),this.parent.refreshing||(this.filterSettings.columns=[]),this.updateFilterMsg(),this.removeEventListener(),this.unWireEvents(),this.element)){sf.base.remove(this.element);var t=this.parent.getHeaderContent().querySelector(".e-filterbar");this.parent.getFrozenColumns()&&t&&sf.base.remove(t)}},t.prototype.generateRow=function(e){var t=new M({});return t.cells=this.generateCells(),t},t.prototype.generateCells=function(){var t=[];if(this.parent.allowGrouping)for(var r=0,i=this.parent.groupSettings.columns.length;r<i;r++)t.push(this.generateCell({},e.CellType.HeaderIndent));(this.parent.detailTemplate||this.parent.childGrid)&&t.push(this.generateCell({},e.CellType.DetailHeader)),this.parent.isRowDragable()&&t.push(this.generateCell({},e.CellType.RowDragHIcon));for(var n=0,s=this.parent.getColumns();n<s.length;n++){var o=s[n];t.push(this.generateCell(o))}return t},t.prototype.generateCell=function(t,r){var i={visible:t.visible,isDataCell:!1,rowId:"",column:t,cellType:r||e.CellType.Filter,attributes:{title:this.l10n.getConstant("FilterbarTitle")}};return new k(i)},t.prototype.updateModel=function(){for(var e=this.parent.getColumnByField(this.fieldName),t=Array.isArray(this.value)?this.value:[this.value],r=0,i=t.length;r<i;r++){var n=e.isForeignColumn()?e.foreignKeyValue:this.fieldName;this.currentFilterObject={field:n,uid:e.uid,isForeignKey:e.isForeignColumn(),operator:this.operator,value:t[r],predicate:this.predicate,matchCase:this.matchCase,ignoreAccent:this.ignoreAccent,actualFilterValue:{},actualOperator:{}};var s=this.getFilteredColsIndexByField(e);s>-1&&!Array.isArray(this.value)?this.filterSettings.columns[s]=this.currentFilterObject:this.filterSettings.columns.push(this.currentFilterObject)}this.filterSettings.columns=this.filterSettings.columns,this.parent.dataBind()},t.prototype.getFilteredColsIndexByField=function(e){for(var t=this.filterSettings.columns,r=0,i=t.length;r<i;r++)if(t[r].uid===e.uid||e.isForeignColumn()&&this.parent.getColumnByUid(e.uid).field===e.foreignKeyValue)return r;return-1},t.prototype.onActionComplete=function(e){sf.base.isBlazor()&&!this.parent.isJsComponent&&(e.rows=null);var t=this.isRemove?{requestType:"filtering",type:c}:{currentFilterObject:this.currentFilterObject,currentFilteringColumn:sf.base.isNullOrUndefined(this.column)?void 0:this.column.field,columns:this.filterSettings.columns,requestType:"filtering",type:c};this.parent.trigger(c,sf.base.extend(e,t)),this.isRemove=!1},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.parent.getHeaderContent(),"keyup",this.keyUpHandlerImmediate,this)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.parent.getHeaderContent(),"keyup",this.keyUpHandlerImmediate)},t.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.parent.getHeaderTable().classList.add("e-sortfilter"),this.render())},t.prototype.initialEnd=function(){if(this.parent.off(g,this.initialEnd),this.parent.getColumns().length&&this.filterSettings.columns.length){var e=this.parent;this.contentRefresh=!1,this.initialLoad=!0;for(var t=0,r=e.filterSettings.columns;t<r.length;t++){var i=r[t];this.filterByColumn(i.field,i.operator,i.value,i.predicate,i.matchCase,i.ignoreAccent,i.actualFilterValue,i.actualOperator)}this.initialLoad=!1,this.updateFilterMsg(),this.contentRefresh=!0}},t.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(m,this.enableAfterRender,this),this.parent.on("filtering-complete",this.onActionComplete,this),this.parent.on(v,this.onPropertyChanged,this),this.parent.on(w,this.keyUpHandler,this),this.parent.on("column-position-changed",this.columnPositionChanged,this),this.parent.on(C,this.render,this),this.parent.on(g,this.initialEnd,this),this.parent.on("filter-menu-close",this.filterMenuClose,this),sf.base.EventHandler.add(document,"click",this.clickHandler,this),this.parent.on("filterOpen",this.columnMenuFilter,this),this.parent.on(S,this.filterIconClickHandler,this),this.parent.on("persist-data-changed",this.initialEnd,this),this.parent.on("close-filter-dialog",this.clickHandler,this))},t.prototype.removeEventListener=function(){sf.base.EventHandler.remove(document,"click",this.clickHandler),this.parent.isDestroyed||(this.parent.off(m,this.enableAfterRender),this.parent.off("filtering-complete",this.onActionComplete),this.parent.off(v,this.onPropertyChanged),this.parent.off(w,this.keyUpHandler),this.parent.off("column-position-changed",this.columnPositionChanged),this.parent.off(C,this.render),this.parent.off("filterOpen",this.columnMenuFilter),this.parent.off("filter-menu-close",this.filterMenuClose),this.parent.off(S,this.filterIconClickHandler),this.parent.off("close-filter-dialog",this.clickHandler))},t.prototype.filterMenuClose=function(e){this.fltrDlgDetails.isOpen=!1},t.prototype.filterByColumn=function(e,t,r,i,n,s,o,a){var l,d=this.parent;if(this.column=d.grabColumnByFieldFromAllCols(e),this.column)if("FilterBar"===this.filterSettings.type&&(l=d.getHeaderContent().querySelector("[id='"+this.column.field+"_filterBarcell']")),sf.base.isNullOrUndefined(this.column.allowFiltering)||this.column.allowFiltering)if(or(d))d.notify(T,{instance:this,handler:this.filterByColumn,arg1:e,arg2:t,arg3:r,arg4:i,arg5:n,arg6:s,arg7:o,arg8:a});else{if(this.predicate=i||(Array.isArray(r)?"or":"and"),this.value=r,this.matchCase=n||!1,this.ignoreAccent=this.ignoreAccent=sf.base.isNullOrUndefined(s)?this.parent.filterSettings.ignoreAccent:s,this.fieldName=e,this.operator=t,r=!sf.base.isNullOrUndefined(r)&&r.toString(),"number"!==this.column.type&&"date"!==this.column.type||(this.matchCase=!0),d.getColumnHeaderByField(e).setAttribute("aria-filtered","true"),r.length<1||this.checkForSkipInput(this.column,r))return this.filterStatusMsg=r.length<1?"":this.l10n.getConstant("InvalidFilterMessage"),void this.updateFilterMsg();l&&"FilterBar"===this.filterSettings.type&&l.value!==r&&(l.value=r),sf.base.isNullOrUndefined(this.column.format)?this.values[this.column.field]=r:(this.applyColumnFormat(r),this.initialLoad&&"FilterBar"===this.filterSettings.type&&(l.value=this.values[this.column.field])),this.actualPredicate[this.fieldName]=[{field:this.fieldName,predicate:i,matchCase:n,ignoreAccent:s,operator:this.operator,value:this.value,type:this.column.type}],this.addFilteredClass(this.fieldName),this.checkAlreadyColFiltered(this.column.field)||this.updateModel()}else this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:this.column.headerText})},t.prototype.applyColumnFormat=function(e){var t="date"===this.column.type||"datetime"===this.column.type?new Date(e):parseFloat(e);this.values[this.column.field]=this.setFormatForFlColumn(t,this.column)},t.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName())for(var t=0,r=Object.keys(e.properties);t<r.length;t++){var i=r[t];switch(i){case"columns":this.contentRefresh&&(this.parent.notify(b,{currentFilterObject:this.currentFilterObject,currentFilteringColumn:this.column?this.column.field:void 0,action:"filter",columns:this.filterSettings.columns,requestType:"filtering",type:d,cancel:!1}),this.refreshFilterSettings(),this.updateFilterMsg(),this.updateFilter());break;case"showFilterBarStatus":e.properties[i]?this.updateFilterMsg():this.parent.allowPaging&&this.parent.updateExternalMessage("");break;case"type":this.parent.refreshHeader(),this.refreshFilterSettings()}}},t.prototype.refreshFilterSettings=function(){if("FilterBar"===this.filterSettings.type){for(var e=0;e<this.filterSettings.columns.length;e++){this.column=this.parent.grabColumnByUidFromAllCols(this.filterSettings.columns[e].uid);var t=this.filterSettings.columns[e].value;if(t=!sf.base.isNullOrUndefined(t)&&t.toString(),sf.base.isNullOrUndefined(this.column.format)){var r=this.filterSettings.columns[e].field;this.values[r]=this.filterSettings.columns[e].value}else this.applyColumnFormat(t);(n=this.getFilterBarElement(this.column.field))&&(""===this.cellText[this.filterSettings.columns[e].field]||sf.base.isNullOrUndefined(this.cellText[this.filterSettings.columns[e].field])?n.value=this.filterSettings.columns[e].value:n.value=this.cellText[this.column.field])}if(0===this.filterSettings.columns.length){var i=this.parent.getColumns();for(e=0;e<i.length;e++){var n;(n=this.getFilterBarElement(i[e].field))&&""!==n.value&&(n.value="",delete this.values[i[e].field])}}}},t.prototype.getFilterBarElement=function(e){var t,r="[id='"+e+"_filterBarcell']";return r&&!sf.base.isNullOrUndefined(this.element)&&(t=this.element.querySelector(r)),t},t.prototype.refreshFilter=function(){this.refreshFilterSettings(),this.updateFilterMsg()},t.prototype.clearFiltering=function(e){var t=this,r=Gt(this.filterSettings.columns);if(!sf.base.isNullOrUndefined(e))return this.refresh=!1,e.forEach((function(e){t.removeFilteredColsByField(e,!1)})),this.parent.setProperties({filterSettings:{columns:this.filterSettings.columns}},!0),this.parent.renderModule.refresh(),void(this.refresh=!0);if(or(this.parent))this.parent.notify(T,{instance:this,handler:this.clearFiltering});else{for(var i=0;i<r.length;i++)r[i].uid=r[i].uid||this.parent.getColumnByField(r[i].field).uid;var n=r.map((function(e){return e.uid})),s=n.filter((function(e,t){return n.indexOf(e)===t}));this.refresh=!1;i=0;for(var o=s.length;i<o;i++)this.removeFilteredColsByField(this.parent.getColumnByUid(s[i]).field,!1);if(sf.base.isBlazor()&&!this.parent.isJsComponent&&this.parent.setProperties({filterSettings:{columns:this.filterSettings.columns}},!0),this.refresh=!0,s.length&&this.parent.renderModule.refresh(),0===this.parent.filterSettings.columns.length&&this.parent.element.querySelector(".e-filtered")){var a=[].slice.call(this.parent.element.querySelectorAll(".e-filtered"));for(i=0,o=a.length;i<o;i++)a[0].removeAttribute("aria-filtered"),a[0].classList.remove("e-filtered")}this.isRemove=!0,this.filterStatusMsg="",this.updateFilterMsg()}},t.prototype.checkAlreadyColFiltered=function(e){for(var t=0,r=this.filterSettings.columns;t<r.length;t++){var i=r[t];if(i.field===e&&i.value===this.value&&i.operator===this.operator&&i.predicate===this.predicate)return!0}return!1},t.prototype.columnMenuFilter=function(e){this.column=e.col;var t=sf.base.closest(e.target,"#"+e.id);e.isClose&&!t?this.filterModule.closeDialog():t&&this.filterDialogOpen(this.column,e.target)},t.prototype.filterDialogOpen=function(e,t,r,i){var n=this.parent;this.filterModule&&this.filterModule.closeDialog(),this.filterModule=new this.type[e.filter.type||this.parent.filterSettings.type](this.parent,n.filterSettings,this.serviceLocator,this.customOperators,this);var s=e.filter.dataSource||n.getDataModule().dataManager;this.filterModule.openDialog({type:e.type,field:e.field,displayName:e.headerText,dataSource:s,format:e.format,height:800,columns:n.getColumns(),filteredColumns:n.filterSettings.columns,target:t,dataManager:n.getDataModule().dataManager,formatFn:e.getFormatter(),ignoreAccent:n.filterSettings.ignoreAccent,parserFn:e.getParser(),query:n.query,template:e.getFilterItemTemplate(),hideSearchbox:!sf.base.isNullOrUndefined(e.filter.hideSearchbox)&&e.filter.hideSearchbox,handler:this.filterHandler.bind(this),localizedStrings:n.getLocaleConstants(),position:{X:r,Y:i},column:e,foreignKeyValue:e.foreignKeyValue,actualPredicate:this.actualPredicate,localeObj:n.localeObj,isRemote:n.getDataModule().isRemote(),allowCaseSensitive:this.filterSettings.enableCaseSensitivity})},t.prototype.removeFilteredColsByField=function(e,t){var r,i=this.filterSettings.columns;if(or(this.parent)){var n={instance:this,handler:this.removeFilteredColsByField,arg1:e,arg2:t};this.parent.notify(T,n)}else{for(var s=i.map((function(e){return e.uid})),o=s.filter((function(e,t){return s.indexOf(e)===t})),a=function(n,s){i[n].uid=i[n].uid||l.parent.getColumnByField(i[n].field).uid;var a=i.length,c=l.parent.grabColumnByUidFromAllCols(o[n]);if(c.field===e||c.field===c.foreignKeyValue&&c.isForeignColumn()){var h=l.filterSettings.columns.filter((function(e){return e.uid===c.uid}))[0];if("FilterBar"===l.filterSettings.type&&!t){var p="[id='"+c.field+"_filterBarcell']";(r=l.parent.getHeaderContent().querySelector(p))&&(r.value="",delete l.values[e])}for(;a--;)i[a].uid===c.uid&&i.splice(a,1);var u=l.parent.getColumnHeaderByField(c.field);if(u.removeAttribute("aria-filtered"),"FilterBar"!==l.filterSettings.type){var f=l.parent.showColumnMenu?".e-columnmenu":".e-icon-filter";u.querySelector(f).classList.remove("e-filtered")}return l.isRemove=!0,l.actualPredicate[e]&&delete l.actualPredicate[e],l.values[e]&&delete l.values[e],l.refresh&&(sf.base.isBlazor()&&!l.parent.isJsComponent?(l.parent.setProperties({filterSettings:{columns:l.filterSettings.columns}},!0),l.parent.notify(b,{requestType:"filtering",type:d,currentFilterObject:{field:c.field,operator:l.operator,value:l.value,predicate:l.predicate,matchCase:l.matchCase,ignoreAccent:l.ignoreAccent,actualFilterValue:{},actualOperator:{}},currentFilterColumn:c})):l.parent.notify(b,{requestType:"filtering",type:d,currentFilterObject:h,currentFilterColumn:c,action:"clearFilter"})),"break"}},l=this,c=0,h=o.length;c<h;c++){if("break"===a(c))break}this.updateFilterMsg()}},t.prototype.getModuleName=function(){return"filter"},t.prototype.keyUpHandlerImmediate=function(e){13!==e.keyCode&&this.keyUpHandler(e)},t.prototype.keyUpHandler=function(e){var t=this.parent,r=e.target;if(r&&sf.base.matches(r,".e-filterbar input")){var i=sf.base.closest(r,"th.e-filterbarcell");if(this.column=t.getColumnByUid(i.getAttribute("e-mappinguid")),!this.column)return;"Immediate"!==this.filterSettings.mode&&13!==e.keyCode||9===e.keyCode||(this.value=r.value.trim(),this.processFilter(e))}if("altDownArrow"===e.action&&"FilterBar"!==this.filterSettings.type){var n=t.focusModule.currentInfo.element;if(n&&n.classList.contains("e-headercell")){var s=t.getColumnByUid(n.firstElementChild.getAttribute("e-mappinguid"));this.openMenuByField(s.field),this.parent.focusModule.clearIndicator()}}"escape"===e.action&&"Menu"===this.filterSettings.type&&this.filterModule&&(this.filterModule.closeDialog(),t.notify("restore-Focus",{}))},t.prototype.updateCrossIcon=function(e){e.value.length&&e.nextElementSibling.classList.remove("e-hide")},t.prototype.updateFilterMsg=function(){if("FilterBar"===this.filterSettings.type){var e=this.parent,t=void 0,r=this.filterSettings.columns,i=(this.serviceLocator.getService("valueFormatter"),void 0);if(!this.filterSettings.showFilterBarStatus)return;if(r.length>0&&this.filterStatusMsg!==this.l10n.getConstant("InvalidFilterMessage")){this.filterStatusMsg="";for(var n=0;n<r.length;n++)if(i=e.grabColumnByUidFromAllCols(r[n].uid)||e.grabColumnByFieldFromAllCols(r[n].field),n&&(this.filterStatusMsg+=" && "),sf.base.isNullOrUndefined(i.format))this.filterStatusMsg+=i.headerText+": "+this.values[i.field];else{var s="date"===i.type||"datetime"===i.type?this.valueFormatter.fromView(this.values[i.field],i.getParser(),i.type):this.values[i.field];if("date"!==i.type&&"datetime"!==i.type)t=this.serviceLocator.getService("valueFormatter").toView(s,i.getParser()).toString();else t=this.setFormatForFlColumn(s,i);this.filterStatusMsg+=i.headerText+": "+t}}e.allowPaging&&e.updateExternalMessage(this.filterStatusMsg),this.filterStatusMsg=""}},t.prototype.setFormatForFlColumn=function(e,t){return this.serviceLocator.getService("valueFormatter").toView(e,t.getFormatter()).toString()},t.prototype.checkForSkipInput=function(e,t){var r;if("number"===e.type)(sf.data.DataUtil.operatorSymbols[t]||this.skipNumberInput.indexOf(t)>-1)&&(r=!0);else if("string"===e.type)for(var i=0,n=t;i<n.length;i++){var s=n[i];this.skipStringInput.indexOf(s)>-1&&(r=!0)}return r},t.prototype.processFilter=function(e){this.stopTimer(),this.startTimer(e)},t.prototype.startTimer=function(e){var t=this;this.timer=window.setInterval((function(){t.onTimerTick()}),13===e.keyCode?0:this.filterSettings.immediateModeDelay)},t.prototype.stopTimer=function(){window.clearInterval(this.timer)},t.prototype.onTimerTick=function(){var e,t="[id='"+this.column.field+"_filterBarcell']",r=this.element.querySelector(t);if(!r&&this.parent.getFrozenColumns()&&(r=this.parent.getHeaderContent().querySelector(t)),this.cellText[this.column.field]=r.value,this.stopTimer(),sf.base.isNullOrUndefined(this.column.filterBarTemplate))e=JSON.parse(JSON.stringify(r.value));else{var i=this.column.filterBarTemplate.read;"string"==typeof i&&(i=sf.base.getValue(i,window)),sf.base.isNullOrUndefined(i)||(this.value=i.call(this,r))}sf.base.isNullOrUndefined(this.value)||""===this.value?this.removeFilteredColsByField(this.column.field):(this.validateFilterValue(this.value),this.filterByColumn(this.column.field,this.operator,this.value,this.predicate,this.filterSettings.enableCaseSensitivity,this.ignoreAccent),r.value=e,this.updateFilterMsg())},t.prototype.validateFilterValue=function(e){var t,r;this.parent;switch(this.matchCase=this.filterSettings.enableCaseSensitivity,this.column.type){case"number":this.column.filter.operator?this.operator=this.column.filter.operator:this.operator=this.filterOperators.equal,t=[">","<","=","!"];for(var i=0;i<e.length;i++)if(t.indexOf(e[i])>-1){r=i;break}this.getOperator(e.substring(r)),0!==r&&(this.value=e.substring(0,r)),""!==this.value&&e.length>=1&&(this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type)),isNaN(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage"));break;case"date":case"datetime":this.operator=this.filterOperators.equal,""===this.value||this.value instanceof Date||(this.getOperator(e),this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type),sf.base.isNullOrUndefined(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage")));break;case"string":this.matchCase=!1,"*"===e.charAt(0)?(this.value=this.value.slice(1),this.operator=this.filterOperators.startsWith):"%"===e.charAt(e.length-1)?(this.value=this.value.slice(0,-1),this.operator=this.filterOperators.startsWith):"%"===e.charAt(0)?(this.value=this.value.slice(1),this.operator=this.filterOperators.endsWith):this.column.filter.operator?this.operator=this.column.filter.operator:this.operator=this.filterOperators.startsWith;break;case"boolean":"true"===e.toLowerCase()||"1"===e?this.value=!0:"false"===e.toLowerCase()||"0"===e?this.value=!1:e.length&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage")),this.operator=this.filterOperators.equal;break;default:this.column.filter.operator?this.operator=this.column.filter.operator:this.operator=this.filterOperators.equal}},t.prototype.getOperator=function(e){var t=e.charAt(0),r=e.slice(0,2),i=sf.base.extend({"=":this.filterOperators.equal,"!":this.filterOperators.notEqual},sf.data.DataUtil.operatorSymbols);(i.hasOwnProperty(t)||i.hasOwnProperty(r))&&(this.operator=i[t],this.value=e.substring(1),this.operator||(this.operator=i[r],this.value=e.substring(2))),this.operator!==this.filterOperators.lessThan&&this.operator!==this.filterOperators.greaterThan||"="===this.value.charAt(0)&&(this.operator=this.operator+"orequal",this.value=this.value.substring(1))},t.prototype.columnPositionChanged=function(e){this.parent.filterSettings.type},t.prototype.getLocalizedCustomOperators=function(){var e=[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"greaterthan",text:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",text:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",text:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",text:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",text:this.l10n.getConstant("NotEqual")}];this.customOperators={stringOperator:[{value:"startswith",text:this.l10n.getConstant("StartsWith")},{value:"endswith",text:this.l10n.getConstant("EndsWith")},{value:"contains",text:this.l10n.getConstant("Contains")},{value:"equal",text:this.l10n.getConstant("Equal")},{value:"notequal",text:this.l10n.getConstant("NotEqual")}],numberOperator:e,dateOperator:e,datetimeOperator:e,booleanOperator:[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"notequal",text:this.l10n.getConstant("NotEqual")}]}},t.prototype.openMenuByField=function(e){var t=this.parent,r=t.getColumnByField(e),i=t.getColumnHeaderByField(e).querySelector(".e-filtermenudiv");if(i){var n=t.element.getBoundingClientRect(),s=i.getBoundingClientRect();this.filterDialogOpen(r,i,s.right-n.left,s.bottom-n.top)}},t.prototype.filterIconClickHandler=function(e){var t=e.target;if(t.classList.contains("e-filtermenudiv")&&("Menu"===this.parent.filterSettings.type||"CheckBox"===this.parent.filterSettings.type||"Excel"===this.parent.filterSettings.type)){var r=this.parent.getColumnByUid(Ut(t,"e-headercell").firstElementChild.getAttribute("e-mappinguid"));if(this.column=r,this.fltrDlgDetails.field===r.field&&this.fltrDlgDetails.isOpen)return;this.filterModule&&this.filterModule.closeDialog(),this.fltrDlgDetails={field:r.field,isOpen:!0},this.openMenuByField(r.field)}},t.prototype.clickHandler=function(e){if("Immediate"===this.filterSettings.mode||"Menu"===this.parent.filterSettings.type||"CheckBox"===this.parent.filterSettings.type||"Excel"===this.parent.filterSettings.type){this.parent;var t=e.target,r=t.classList.contains("e-day"),i=Ut(this.parent.element,"e-dialog"),n=!1,s=Ut(t,"e-popup");if(i&&s&&(n=i.id===s.id),Ut(t,"e-filter-popup")||t.classList.contains("e-filtermenudiv"))return;if(!this.filterModule||Ut(t,"e-popup-wrapper")||sf.base.closest(t,".e-filter-item.e-menu-item")||r||(!n||Ut(t,"e-filter-popup")||Ut(t,"e-popup-flmenu"))&&s||(this.filterModule.isresetFocus=Ut(t,"e-grid")&&Ut(t,"e-grid").id===this.parent.element.id,this.filterModule.closeDialog(t)),"Immediate"===this.filterSettings.mode&&t.classList.contains("e-clear-icon")){var o=t.previousElementSibling;this.removeFilteredColsByField(o.id.slice(0,-14))}}},t.prototype.filterHandler=function(e){var t;this.actualPredicate[e.field]=e.actualPredicate;for(var r=new sf.data.DataManager(this.filterSettings.columns),i=(new sf.data.Query).where("field",this.filterOperators.equal,e.field),n=r.executeLocal(i),s=0;s<n.length;s++){for(var o=-1,a=0;a<this.filterSettings.columns.length;a++)if(n[s].field===this.filterSettings.columns[a].field){o=a;break}-1!==o&&this.filterSettings.columns.splice(o,1)}"clear-filter"===e.action&&sf.base.isBlazor()&&!this.parent.isJsComponent&&this.parent.setProperties({filterSettings:{columns:this.filterSettings.columns}},!0),this.values[e.field]&&delete this.values[e.field];var l=this.parent.showColumnMenu?".e-columnmenu":".e-icon-filter";t=this.parent.getColumnHeaderByField(e.field).querySelector(l),"filtering"===e.action?(this.filterSettings.columns=this.filterSettings.columns.concat(e.filterCollection),this.filterSettings.columns.length&&t&&t.classList.add("e-filtered")):(t&&t.classList.remove("e-filtered"),e.requestType="filtering",this.parent.renderModule.refresh(e)),this.parent.dataBind()},t.prototype.updateFilter=function(){var e=this.filterSettings.columns;this.actualPredicate={};for(var t=0;t<e.length;t++){this.column=this.parent.getColumnByField(e[t].field)||vr(e[t].field,this.parent.getForeignKeyColumns());var r=e[t].field;this.parent.getColumnByField(e[t].field)||(r=vr(e[t].field,this.parent.getForeignKeyColumns()).field),this.refreshFilterIcon(r,e[t].operator,e[t].value,e[t].type,e[t].predicate,e[t].matchCase,e[t].ignoreAccent,e[t].uid)}},t.prototype.refreshFilterIcon=function(e,t,r,i,n,s,o,a){var l;l={field:e,predicate:n,matchCase:s,ignoreAccent:o,operator:t,value:r,type:i},this.actualPredicate[e]?this.actualPredicate[e].push(l):this.actualPredicate[e]=[l];var d=a?this.parent.grabColumnByUidFromAllCols(a).field:e;this.addFilteredClass(d)},t.prototype.addFilteredClass=function(e){var t;this.parent.showColumnMenu?t=this.parent.getColumnHeaderByField(e).querySelector(".e-columnmenu"):this.parent.getColumnByField(e)&&(t=this.parent.getColumnHeaderByField(e).querySelector(".e-icon-filter")),t&&t.classList.add("e-filtered")},t.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},t}(),ui={root:"e-rhandler",suppress:"e-rsuppress",icon:"e-ricon",helper:"e-rhelper",header:"th.e-headercell",cursor:"e-rcursor"},fi=function(){function e(e){this.tapped=!1,this.isDblClk=!0,this.parent=e,this.parent.isDestroyed||(this.widthService=new Be(e),this.addEventListener())}return e.prototype.autoFitColumns=function(e){var t=null==e||e.length<=0?this.parent.getColumns().map((function(e){return e.field})):"string"==typeof e?[e]:e;this.findColumn(t)},e.prototype.autoFit=function(){var e=this.parent.getColumns().filter((function(e){return!0===e.autoFit})).map((function(e){return e.field||e.headerText}));e.length>0&&this.autoFitColumns(e)},e.prototype.resizeColumn=function(e,t,r){var i,n,s,o,l,d,c=this.parent,h=0,p=0,u=r||this.parent.getUidByColumnField(e),f=this.parent.getNormalizedColumnIndex(u),g=this.parent.getColumnIndexByField(e),m=c.getFrozenColumns();sf.base.isNullOrUndefined(c.getFooterContent())||(s=c.getFooterContentTable()),m?t<m?(i=c.getHeaderTable(),n=c.getContentTable(),o=i.querySelector('[e-mappinguid="'+u+'"]').parentElement.cloneNode(!0),l=n.querySelectorAll("td:nth-child("+(f+1)+")"),s&&(d=s.querySelectorAll("td:nth-child("+(f+1)+")"))):(i=c.getHeaderContent().querySelector(".e-movableheader").children[0],n=c.getContent().querySelector(".e-movablecontent").children[0],o=i.querySelector('[e-mappinguid="'+u+'"]').parentElement.cloneNode(!0),l=n.querySelectorAll("td:nth-child("+(f-m+1)+")"),s&&(d=(s=c.getFooterContent().querySelector(".e-movablefootercontent").children[0]).querySelectorAll("td:nth-child("+(f-m+1)+")"))):(i=c.getHeaderTable(),n=c.getContentTable(),o=i.querySelector('[e-mappinguid="'+u+'"]').parentElement.cloneNode(!0),l=n.querySelectorAll("td:nth-child("+(f+1)+"):not(.e-groupcaption)"),s&&(d=s.querySelectorAll("td:nth-child("+(f+1)+"):not(.e-groupcaption)")));var y=i.querySelector("tr").querySelectorAll(".e-grouptopleftcell");if(y.length>0)for(var v=0;v<y.length;v++)p+=y[v].offsetWidth;var b=n.querySelector(".e-detailrowcollapse")||n.querySelector(".e-detailrowexpand");(this.parent.detailTemplate||this.parent.childGrid)&&b&&(p+=b.offsetWidth);var C=[o],w=[],S=[];if(s)for(v=0;v<d.length;v++)S[v]=d[v].cloneNode(!0);for(v=0;v<l.length;v++)w[v]=l[v].cloneNode(!0);var x=this.createTable(i,C,"e-gridheader"),R=this.createTable(n,w,"e-gridcontent"),I=null;S.length&&(I=this.createTable(s,S,"e-gridfooter"));var T=c.getColumns()[g],E=T.width=sf.base.formatUnit(Math.max(x,R,I)),D=T.maxWidth&&parseFloat(T.maxWidth.toString());if(parseInt(E,10)>D&&(T.width=D),this.widthService.setColumnWidth(c.getColumns()[g]),!1===c.getColumns().some((function(e){return null===e.width||void 0===e.width||e.width.length<=0}))){var F=c.getColumns();for(v=0;v<F.length;v++)F[v].visible&&(h+=parseFloat(F[v].width))}var O=h+p;h>0&&!c.getFrozenColumns()&&((this.parent.detailTemplate||this.parent.childGrid)&&this.widthService.setColumnWidth(new a({width:"30px"})),i.style.width=sf.base.formatUnit(O),n.style.width=sf.base.formatUnit(O),sf.base.isNullOrUndefined(s)||(s.style.width=sf.base.formatUnit(O)));var M=i.offsetWidth;c.getContent().scrollWidth>M?(i.classList.add("e-tableborder"),n.classList.add("e-tableborder")):(i.classList.remove("e-tableborder"),n.classList.remove("e-tableborder")),sf.base.isNullOrUndefined(s)||s.classList.add("e-tableborder")},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.widthService=null,this.unwireEvents(),this.removeEventListener())},e.prototype.getModuleName=function(){return"resize"},e.prototype.findColumn=function(e){for(var t=0;t<e.length;t++){var r=e[t],i=this.parent.getColumnIndexByField(r);!0===this.parent.getColumns()[i].visible&&this.resizeColumn(r,i)}},e.prototype.createTable=function(e,t,r){var i=this.parent.createElement("div");i.className=this.parent.element.className,i.style.cssText="display: inline-block;visibility:hidden;position:absolute";var n=this.parent.createElement("div");n.className=r;var s=this.parent.createElement("table");s.className=e.className,s.classList.add("e-resizetable"),s.style.cssText="table-layout: auto;width: auto";for(var o=this.parent.createElement("tr"),a=0;a<t.length;a++){var l=o.cloneNode();l.className=e.querySelector("tr").className,l.appendChild(t[a]),s.appendChild(l)}n.appendChild(s),i.appendChild(n),document.body.appendChild(i);var d=s.getBoundingClientRect().width;return document.body.removeChild(i),Math.ceil(d)},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(C,this.refreshHeight,this),this.parent.on(u,this.wireEvents,this),this.parent.on(g,this.autoFit,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(C,this.refreshHeight),this.parent.off(u,this.wireEvents))},e.prototype.render=function(){this.unwireEvents(),this.wireEvents(),this.setHandlerHeight()},e.prototype.refreshHeight=function(){for(var e=this.getResizeHandlers(),t=0;t<e.length;t++)e[t].parentElement.offsetHeight>0&&(e[t].style.height=e[t].parentElement.offsetHeight+"px");this.setHandlerHeight()},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.resizeStart,this),sf.base.EventHandler.add(this.parent.getHeaderContent(),"dblclick",this.callAutoFit,this)},e.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.EventHandler.remove(this.parent.getHeaderContent(),"dblclick",this.callAutoFit)},e.prototype.getResizeHandlers=function(){return this.parent.getFrozenColumns()?[].slice.call(this.parent.getHeaderContent().querySelectorAll("."+ui.root)):[].slice.call(this.parent.getHeaderTable().querySelectorAll("."+ui.root))},e.prototype.setHandlerHeight=function(){for(var e=[].slice.call(this.parent.getHeaderTable().querySelectorAll("."+ui.suppress)),t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"},e.prototype.callAutoFit=function(e){if(e.target.classList.contains("e-rhandler")){var t=this.getTargetColumn(e);if(t.columns)return;this.resizeColumn(t.field,this.parent.getNormalizedColumnIndex(t.uid),t.uid),sf.base.closest(e.target,ui.header).classList.add("e-resized")}},e.prototype.resizeStart=function(e){var t=this;if(e.target.classList.contains("e-rhandler")){if(!this.helper){if(0===this.getScrollBarWidth()){for(var r=0,i=this.refreshColumnWidth();r<i.length;r++){var n=i[r];this.widthService.setColumnWidth(n)}this.widthService.setWidthToTable()}if(this.refreshStackedColumnWidth(),this.element=e.target,this.parent.getVisibleFrozenColumns())for(var s=this.parent.getContent().querySelector(".e-movablecontent").querySelector("tbody"),o=this.parent.getContent().querySelector(".e-frozencontent").querySelector("tbody"),a=s.querySelectorAll("tr"),l=o.querySelectorAll("tr"),d=0;d<a.length;d++)this.parent.rowHeight?(a[d].style.height=this.parent.rowHeight+"px",l[d].style.height=this.parent.rowHeight+"px"):(a[d].style.removeProperty("height"),l[d].style.removeProperty("height"));this.parentElementWidth=this.parent.element.getBoundingClientRect().width,this.appendHelper(),this.column=this.getTargetColumn(e),this.pageX=this.getPointX(e),this.parent.enableRtl?this.minMove=parseFloat(this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):this.minMove=(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat(sf.base.isNullOrUndefined(this.column.width)?"":this.column.width.toString()),this.minMove+=this.pageX}if(sf.base.Browser.isDevice&&!this.helper.classList.contains(ui.icon))this.helper.classList.add(ui.icon),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.removeHelper,this),sf.base.EventHandler.add(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart,this);else{var c=void 0;if(!sf.base.isBlazor()||this.parent.isJsComponent)c={e:e,column:this.column};else c={column:sf.base.extend({},this.column)};this.parent.trigger("resizeStart",c,(function(e){e.cancel||t.parent.isEdit?t.cancelResizeAction():(sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,t.resizeEnd,t),sf.base.EventHandler.add(t.parent.element,sf.base.Browser.touchMoveEvent,t.resizing,t),t.updateCursor("add"))}))}}},e.prototype.cancelResizeAction=function(e){e&&(sf.base.EventHandler.remove(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove")),sf.base.Browser.isDevice&&(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart)),sf.base.detach(this.helper),this.refresh()},e.prototype.getWidth=function(e,t,r){return t&&e<t?t:r&&e>r?r:e},e.prototype.updateResizeEleHeight=function(){for(var e=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-rhandler")),t=0;t<e.length;t++)e[t].style.height=this.element.parentElement.offsetHeight+"px"},e.prototype.getColData=function(e,t){return{width:parseFloat(sf.base.isNullOrUndefined(this.widthService.getWidth(e))||"auto"===this.widthService.getWidth(e)?"0":this.widthService.getWidth(e).toString())+t,minWidth:e.minWidth?parseFloat(e.minWidth.toString()):null,maxWidth:e.maxWidth?parseFloat(e.maxWidth.toString()):null}},e.prototype.resizing=function(e){if(!sf.base.isNullOrUndefined(this.column)){var t=0;sf.base.isNullOrUndefined(this.column)&&(t=Ut(this.element,"th").offsetWidth),this.parent.allowTextWrap&&(this.updateResizeEleHeight(),this.setHelperHeight());var r=this.getPointX(e),i=this.parent.enableRtl?-(r-this.pageX):r-this.pageX,n=this.getColData(this.column,i);n.width||(n.width=sf.base.closest(this.element,"th").offsetWidth);var s=this.getWidth(n.width,n.minWidth,n.maxWidth);if(this.parent.log("resize_min_max",{column:this.column,width:s}),(!this.parent.enableRtl&&this.minMove>=r||this.parent.enableRtl&&this.minMove<=r)&&(s=this.column.minWidth?parseFloat(this.column.minWidth.toString()):0,this.pageX=r=this.minMove),s!==parseFloat(sf.base.isNullOrUndefined(this.column.width)||"auto"===this.column.width?t.toString():this.column.width.toString())){this.pageX=r,this.column.width=sf.base.formatUnit(s);var o={e:e,column:this.column};if(this.parent.trigger("resizing",o),o.cancel)return void this.cancelResizeAction(!0);var a=[this.column],l=[this.column];this.column.columns&&(a=this.getSubColumns(this.column,[]),a=this.calulateColumnsWidth(a,!1,i),l=this.calulateColumnsWidth(a,!0,i));for(var d=0,c=l;d<c.length;d++){var h=c[d];this.widthService.setColumnWidth(h,null,"resize")}this.updateHelper()}this.isDblClk=!1}},e.prototype.calulateColumnsWidth=function(e,t,r){for(var i=[],n=0,s=e;n<s.length;n++){for(var o=s[n],a=0,l=0;l<e.length;l++)a+=parseFloat(e[l].width.toString());var d=this.getColData(o,parseFloat(o.width)*r/a),c=this.getWidth(d.width,d.minWidth,d.maxWidth);c!==parseFloat(o.width.toString())&&(t&&(o.width=sf.base.formatUnit(c<1?1:c)),i.push(o))}return i},e.prototype.getSubColumns=function(e,t){for(var r=0,i=e.columns;r<i.length;r++){var n=i[r];!1!==n.visible&&n.allowResizing&&(n.columns?this.getSubColumns(n,t):t.push(n))}return t},e.prototype.resizeEnd=function(e){if(this.helper&&!this.parent.isDestroyed){var t;if(sf.base.EventHandler.remove(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove"),sf.base.detach(this.helper),!sf.base.isBlazor()||this.parent.isJsComponent)t={e:e,column:this.column};else t={column:sf.base.extend({},this.column)};var r=this.parent.getContent().querySelector(".e-content"),i=r.querySelector(".e-movablecontent")?r.querySelector(".e-movablecontent"):r;i.scrollHeight>=i.clientHeight&&(this.parent.scrollModule.setPadding(),i.style.overflowY="scroll"),this.parent.trigger("resizeStop",t),sf.base.closest(this.element,".e-headercell").classList.add("e-resized"),Ut(this.element,"e-frozenheader")?this.isFrozenColResized=!0:this.isFrozenColResized=!1,this.parent.getFrozenColumns()&&this.parent.notify("freezerender",{case:"textwrap"}),this.parent.allowTextWrap&&(this.updateResizeEleHeight(),this.parent.notify("textWrapRefresh",{case:"textwrap"})),this.refresh(),this.doubleTapEvent(e),this.isDblClk=!0}},e.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},e.prototype.refreshColumnWidth=function(){for(var e=this.parent.getColumns(),t=0,r=[].slice.apply(this.parent.getHeaderTable().querySelectorAll("th.e-headercell"));t<r.length;t++)for(var i=r[t],n=0,s=e;n<s.length;n++){var o=s[n];if(i.querySelector("[e-mappinguid]")&&i.querySelector("[e-mappinguid]").getAttribute("e-mappinguid")===o.uid&&o.visible){o.width=i.getBoundingClientRect().width;break}}return e},e.prototype.refreshStackedColumnWidth=function(){for(var e=0,t=this.parent.getStackedColumns(this.parent.columns);e<t.length;e++){var r=t[e];r.width=this.getStackedWidth(r,0)}},e.prototype.getStackedWidth=function(e,t){for(var r=0,i=e.columns;r<i.length;r++){var n=i[r];!1!==n.visible&&(n.columns?this.getStackedWidth(n,t):t+=n.width)}return t},e.prototype.getTargetColumn=function(e){var t=sf.base.closest(e.target,ui.header),r=(t=t.querySelector(".e-headercelldiv")||t.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid");return this.parent.getColumnByUid(r)},e.prototype.updateCursor=function(e){var t=[].slice.call(this.parent.getHeaderContent().querySelectorAll("th"));t.push(this.parent.element);for(var r=0,i=t;r<i.length;r++){i[r].classList[e](ui.cursor)}},e.prototype.refresh=function(){this.column=null,this.pageX=null,this.element=null,this.helper=null},e.prototype.appendHelper=function(){this.helper=this.parent.createElement("div",{className:ui.helper}),this.parent.element.appendChild(this.helper),this.setHelperHeight()},e.prototype.setHelperHeight=function(){var e=this.parent.getContent().offsetHeight-this.getScrollBarWidth(),t=sf.base.closest(this.element,ui.header),r=[].slice.call(this.parent.getHeaderContent().querySelectorAll("tr")),i=this.parent.getFrozenColumns();i&&(t.parentElement.children.length!==i?r.splice(0,r.length/2):r.splice(r.length/2,r.length/2));for(var n=r.indexOf(t.parentElement);n<r.length;n++)e+=r[n].offsetHeight;var s=this.calcPos(t);s.left+=this.parent.enableRtl?-1:t.offsetWidth-2,this.helper.style.cssText="height: "+e+"px; top: "+s.top+"px; left:"+Math.floor(s.left)+"px;"},e.prototype.getScrollBarWidth=function(e){var t=this.parent.getFrozenColumns()?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent().firstChild;return t.scrollHeight>t.clientHeight&&e||t.scrollWidth>t.clientWidth?er():0},e.prototype.removeHelper=function(e){var t=e.target.classList;t.contains(ui.root)||t.contains(ui.icon)||!this.helper||(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.detach(this.helper),this.refresh())},e.prototype.updateHelper=function(){var e=sf.base.closest(this.element,ui.header),t=Math.floor(this.calcPos(e).left+(this.parent.enableRtl?-1:e.offsetWidth-2));if(t>this.parentElementWidth&&(t=this.parentElementWidth-2),this.parent.getFrozenColumns()){var r=sf.base.closest(e,".e-table").offsetLeft;t<r&&(t=r)}this.helper.style.left=t+"px"},e.prototype.calcPos=function(e){for(var t={top:0,left:0},r=e.getBoundingClientRect(),i=e.ownerDocument,n=e.offsetParent||i.documentElement;n&&(n===i.body||n===i.documentElement)&&"static"===n.style.position;)n=n.parentNode;return n&&n!==e&&1===n.nodeType&&(t=n.getBoundingClientRect()),{top:r.top-t.top,left:r.left-t.left}},e.prototype.doubleTapEvent=function(e){this.getUserAgent()&&this.isDblClk&&(this.tapped?(clearTimeout(this.tapped),this.callAutoFit(e),this.tapped=null):this.tapped=setTimeout(this.timeoutHandler(),300))},e.prototype.getUserAgent=function(){var e=sf.base.Browser.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)},e.prototype.timeoutHandler=function(){this.tapped=null},e}(),gi=function(){function e(e){this.parent=e,this.parent.isDestroyed||(this.parent.on("header-drop",this.headerDrop,this),this.parent.on(m,this.enableAfterRender,this),this.parent.on("reorder-complete",this.onActionComplete,this),this.parent.on("columnDrag",this.drag,this),this.parent.on("columnDragStart",this.dragStart,this),this.parent.on("column-drag-stop",this.dragStop,this),this.parent.on("header-drop",this.headerDrop,this),this.parent.on(C,this.createReorderElement,this),this.parent.on(w,this.keyPressHandler,this))}return e.prototype.chkDropPosition=function(e,t){var r=this.parent.getColumnByUid(t.firstElementChild.getAttribute("e-mappinguid")),i=!r||!r.lockColumn;return(e.parentElement.isEqualNode(t.parentElement)||this.parent.enableColumnVirtualization||this.parent.getFrozenColumns()&&Array.prototype.indexOf.call(sf.base.closest(e,"thead").children,e.parentElement)===Array.prototype.indexOf.call(sf.base.closest(t,"thead").children,t.parentElement))&&this.targetParentContainerIndex(e,t)>-1&&i},e.prototype.chkDropAllCols=function(e,t){for(var r,i=this.getHeaderCells();!r&&i.length>0;)r=e!==i.pop()&&this.targetParentContainerIndex(e,t)>-1;return r},e.prototype.findColParent=function(e,t,r){r=r;for(var i=0,n=t.length;i<n;i++){if(e===t[i])return!0;if(t[i].columns){var s=r.length;if(r.push(t[i]),this.findColParent(e,t[i].columns,r))return!0;r.splice(s,r.length-s)}}return!1},e.prototype.getColumnsModel=function(e){for(var t=[],r=[],i=0,n=e.length;i<n;i++)t.push(e[i]),e[i].columns&&(r=r.concat(e[i].columns));return r.length&&(t=t.concat(this.getColumnsModel(r))),t},e.prototype.headerDrop=function(e){var t=this.parent,r=(this.element.querySelector(".e-headercelldiv")||this.element.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid"),i=t.getColumnByUid(r);if(sf.base.closest(e.target,"th")&&(sf.base.isNullOrUndefined(i)||i.allowReordering&&!i.lockColumn)){var n=sf.base.closest(e.target,".e-headercell"),s=(n.querySelector(".e-headercelldiv")||n.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid");if(!sf.base.isNullOrUndefined(s)){var o=t.getColumnByUid(s);if(sf.base.isNullOrUndefined(o)||!o.allowReordering||o.lockColumn)return void this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),column:i,destColumn:o})}if(n&&this.chkDropPosition(this.element,n)&&this.chkDropAllCols(this.element,n))if(this.parent.enableColumnVirtualization){var a=this.parent.columns,l=this.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"),d=this.parent.columns.filter((function(e){return e.uid===l})),c=null,h=d[0],p=n.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");a.some((function(e,t){return e.uid===p&&(c=t,e.uid===p)}));sf.base.isNullOrUndefined(c)||this.moveColumns(c,h)}else{var u=this.targetParentContainerIndex(this.element,n),f=this.element.firstElementChild.getAttribute("e-mappinguid");if(this.destElement=n,f)this.moveColumns(u,this.parent.getColumnByUid(f));else{var g=this.getHeaderCells(),m=jt(this.element,g),y=(a=this.getColumnsModel(this.parent.columns))[m];this.moveColumns(u,y)}}}else this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),column:i})},e.prototype.isActionPrevent=function(e){return or(e)},e.prototype.moveColumns=function(e,t,r,i){var n=this.parent;if(this.isActionPrevent(n))n.notify(T,{instance:this,handler:this.moveColumns,arg1:e,arg2:t});else{var s=this.getColParent(t,this.parent.columns),o=s?s.columns:this.parent.columns,a=Vt(t,o);if((this.parent.getFrozenColumns()&&s||this.parent.lockcolPositionCount)&&!r){for(var l=0;l<o.length;l++)if(o[l].field===t.field){a=l;break}var c=this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute("e-mappinguid"));if(c){for(l=0;l<o.length;l++)if(o[l].field===c.field){e=l;break}}else for(l=0;l<o.length;l++)o[l].headerText===this.destElement.innerText.trim()&&(e=l)}n.allowReordering&&a!==e&&-1!==a&&-1!==e&&(o.splice(e,0,o.splice(a,1)[0]),n.getColumns(!0),n.notify("column-position-changed",{fromIndex:e,toIndex:a}),!1!==i&&n.notify(b,{type:d,requestType:"reorder",fromIndex:e,toIndex:a,toColumnUid:t.uid}))}},e.prototype.targetParentContainerIndex=function(e,t){var r=this.getHeaderCells(),i=this.parent.columns,n=this.getColumnsModel(i),s=this.getColParent(n[jt(e,r)],i);return i=s?s.columns:i,Vt(n[jt(t,r)],i)},e.prototype.getHeaderCells=function(){var e=this.parent.getFrozenColumns();if(e||this.parent.lockcolPositionCount){var t=void 0,r=void 0,i=[],n=[].slice.call(this.parent.getHeaderTable().querySelectorAll(".e-columnheader"));if(e)for(var s=[].slice.call(this.parent.getHeaderContent().querySelector(".e-movableheader").querySelectorAll(".e-columnheader")),o=0;o<n.length;o++){t=[].slice.call(n[o].getElementsByClassName("e-headercell")),r=[].slice.call(s[o].getElementsByClassName("e-headercell"));for(var a=void 0,l=0;l<t.length;l++){for(var d=0;d<r.length;d++)if(r[d].innerText===t[l].innerText){a=!0;break}a||(i=i.concat([t[l]]))}for(d=0;d<r.length;d++)i.push(r[d])}else for(o=0;o<n.length;o++){r=[].slice.call(n[o].getElementsByClassName("e-headercell"));for(l=0;l<r.length;l++){for(a=void 0,d=l+1;d<r.length;d++)if(r[d].innerText===r[l].innerText){a=!0;break}a||(i=i.concat([r[l]]))}}return i}return[].slice.call(this.parent.element.getElementsByClassName("e-headercell"))},e.prototype.getColParent=function(e,t){var r=[];return this.findColParent(e,t,r),r[r.length-1]},e.prototype.reorderSingleColumn=function(e,t){var r=this.parent.enableColumnVirtualization?this.parent.columns.filter((function(t){return t.field===e}))[0]:this.parent.getColumnByField(e),i=this.parent.enableColumnVirtualization?this.parent.columns.filter((function(e){return e.field===t}))[0]:this.parent.getColumnByField(t);if((sf.base.isNullOrUndefined(r)||r.allowReordering&&!r.lockColumn)&&(sf.base.isNullOrUndefined(i)||i.allowReordering&&!r.lockColumn)){var n=i,s=this.getColParent(n,this.parent.columns),o=Vt(n,s?s.columns:this.parent.columns);o>-1&&this.moveColumns(o,r,!0)}else this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),column:r,destColumn:i})},e.prototype.reorderMultipleColumns=function(e,t){var r=this.parent.getColumnIndexByField(t),i=this.parent.getColumnByField(t);if(!(r<0)&&(sf.base.isNullOrUndefined(i)||i.allowReordering&&!i.lockColumn)){for(var n=0;n<e.length;n++){var s=this.parent.getColumnByField(e[n]);if(!sf.base.isNullOrUndefined(s)&&(!s.allowReordering||s.lockColumn))return}for(n=0;n<e.length;n++){s=this.parent.getColumnByIndex(r);var o=this.getColParent(s,this.parent.columns),a=Vt(s,o?o.columns:this.parent.columns);a>-1&&this.moveColumns(a,this.parent.getColumnByField(e[n]),!0,!(sf.base.isBlazor()&&!this.parent.isJsComponent)),this.parent.getColumnIndexByField(e[n+1])>=a&&r++}if(sf.base.isBlazor()&&!this.parent.isJsComponent){var l=this.parent.getColumns();this.parent.notify(b,{fromColumnUid:e.map((function(e){return l.filter((function(t){return t.field===e}))[0].uid})),toColumnUid:i.uid,isMultipleReorder:!0,requestType:"reorder",type:"actionBegin"})}}},e.prototype.moveTargetColumn=function(e,t){t>-1&&this.moveColumns(t,e,!0)},e.prototype.reorderSingleColumnByTarget=function(e,t){var r=this.parent.getColumnByField(e);this.moveTargetColumn(r,t)},e.prototype.reorderMultipleColumnByTarget=function(e,t){for(var r=0;r<e.length;r++)this.reorderSingleColumnByTarget(e[r],t)},e.prototype.reorderColumns=function(e,t){"string"==typeof e?(this.reorderSingleColumn(e,t),this.fromCol=e):(this.reorderMultipleColumns(e,t),this.fromCol=e[0])},e.prototype.reorderColumnByIndex=function(e,t){var r=this.parent.getColumnByIndex(e);this.moveTargetColumn(r,t)},e.prototype.reorderColumnByTargetIndex=function(e,t){"string"==typeof e?this.reorderSingleColumnByTarget(e,t):this.reorderMultipleColumnByTarget(e,t)},e.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.createReorderElement()},e.prototype.createReorderElement=function(e){e&&e.args.isXaxis&&this.setDisplay("none");var t=this.parent.element.querySelector(".e-headercontent");this.upArrow=t.appendChild(this.parent.createElement("div",{className:"e-icons e-icon-reorderuparrow e-reorderuparrow",attrs:{style:"display:none"}})),this.downArrow=t.appendChild(this.parent.createElement("div",{className:"e-icons e-icon-reorderdownarrow e-reorderdownarrow",attrs:{style:"display:none"}}))},e.prototype.onActionComplete=function(e){sf.base.isBlazor()&&!this.parent.isJsComponent&&(e.rows=null),this.parent.trigger(c,sf.base.extend(e,{type:c}));var t=this.fromCol&&this.parent.getColumnHeaderByField(this.fromCol);t&&this.parent.focusModule.onClick({target:t},!0)},e.prototype.destroy=function(){var e=this.parent.element;!this.parent.isDestroyed&&e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(sf.base.remove(this.upArrow),sf.base.remove(this.downArrow),this.parent.off("header-drop",this.headerDrop),this.parent.off(m,this.enableAfterRender),this.parent.off("reorder-complete",this.onActionComplete),this.parent.off("columnDrag",this.drag),this.parent.off("columnDragStart",this.dragStart),this.parent.off("column-drag-stop",this.dragStop),this.parent.off(C,this.createReorderElement),this.parent.off(w,this.keyPressHandler))},e.prototype.keyPressHandler=function(e){var t=this.parent;switch(e.action){case"ctrlLeftArrow":case"ctrlRightArrow":var r=t.focusModule.currentInfo.element;if(r&&r.classList.contains("e-headercell")){var i=t.getColumnByUid(r.firstElementChild.getAttribute("e-mappinguid")),n=t.getVisibleColumns(),s=n.indexOf(i),o="ctrlLeftArrow"===e.action?n[s-1]:n[s+1];o&&o.field&&i.field&&this.reorderColumns(i.field,o.field)}}},e.prototype.drag=function(e){var t=this.parent,r=e.target;if(e.column.allowReordering&&!e.column.lockColumn){var i=sf.base.closest(r,".e-headercell:not(.e-stackedHeaderCell)"),n=t.element.querySelector(".e-cloneproperties"),s=t.getFrozenColumns()?t.getMovableVirtualContent():t.getContent().firstElementChild,o=this.x>Kt(e.event).x+s.scrollLeft;sf.base.removeClass(t.getHeaderTable().querySelectorAll(".e-reorderindicate"),["e-reorderindicate"]),this.setDisplay("none"),this.stopTimer(),sf.base.classList(n,["e-defaultcur"],["e-notallowedcur"]),this.updateScrollPostion(e.event),i&&!i.isEqualNode(this.element)&&(r=i,this.chkDropPosition(this.element,r)&&this.chkDropAllCols(this.element,r)?(this.updateArrowPosition(r,o),sf.base.classList(r,["e-allowDrop","e-reorderindicate"],[])):t.allowGrouping&&Ut(e.target,"e-groupdroparea")||sf.base.classList(n,["e-notallowedcur"],["e-defaultcur"])),t.trigger("columnDrag",{target:r,draggableType:"headercell",column:e.column})}},e.prototype.updateScrollPostion=function(e){var t=this,r=this.parent.getFrozenColumns(),i=Kt(e).x,n=this.parent.element.getBoundingClientRect(),s=r?this.parent.element.querySelector(".e-movableheader").getBoundingClientRect().left:n.left,o=n.right,a=r?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent().firstElementChild;i>s&&i<s+35?this.timer=window.setInterval((function(){t.setScrollLeft(a,!0)}),50):i<o&&i>o-35&&(this.timer=window.setInterval((function(){t.setScrollLeft(a,!1)}),50))},e.prototype.setScrollLeft=function(e,t){var r=e.scrollLeft;e.scrollLeft=e.scrollLeft+(t?-5:5),r!==e.scrollLeft&&this.setDisplay("none")},e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.updateArrowPosition=function(e,t){var r=e.getBoundingClientRect(),i=this.parent.element.getBoundingClientRect();if(!(t&&r.left<i.left||!t&&r.right>i.right)){if(this.parent.getFrozenColumns()&&e.classList.contains("e-headercell")){var n=this.parent.getColumnByUid(e.firstElementChild.getAttribute("e-mappinguid")),s=Math.round(this.parent.getFrozenVirtualHeader().getBoundingClientRect().right),o=Math.round(this.parent.getMovableVirtualHeader().getBoundingClientRect().right);if(n&&this.parent.getNormalizedColumnIndex(n.uid)>=this.parent.getFrozenColumns()&&(t&&Math.round(r.left)<s||!t&&o<r.right))return}this.upArrow.style.top=r.top+r.height-i.top+"px",this.downArrow.style.top=r.top-i.top-4+"px",this.upArrow.style.left=this.downArrow.style.left=(t?r.left:r.right)-i.left-4+"px",this.setDisplay("")}},e.prototype.dragStart=function(e){var t=this.parent,r=e.target;if(this.element=r.classList.contains("e-headercell")?r:Ut(r,"e-headercell"),e.column.allowReordering&&!e.column.lockColumn){var i=t.getFrozenColumns()?t.getMovableVirtualContent():t.getContent().firstElementChild;this.x=Kt(e.event).x+i.scrollLeft,t.trigger("columnDragStart",{target:r,draggableType:"headercell",column:e.column})}},e.prototype.dragStop=function(e){var t=this.parent;this.setDisplay("none"),this.stopTimer(),e.cancel||t.trigger("columnDrop",{target:e.target,draggableType:"headercell",column:e.column}),sf.base.removeClass(t.getHeaderTable().querySelectorAll(".e-reorderindicate"),["e-reorderindicate"])},e.prototype.setDisplay=function(e){this.upArrow.style.display=e,this.downArrow.style.display=e},e.prototype.getModuleName=function(){return"reorder"},e}(),mi=function(){function e(e){var t=this;this.selectedRows=[],this.isOverflowBorder=!0,this.selectedRowColls=[],this.isRefresh=!0,this.helper=function(e){var r=t.parent,i=t.draggable.currentStateTarget,n=t.parent.createElement("div",{className:"e-cloneproperties e-draganddrop e-grid e-dragclone",styles:'height:"auto", z-index:2, width:'+r.element.offsetWidth}),s=t.parent.createElement("table",{styles:"width:"+r.element.offsetWidth}),o=t.parent.createElement("tbody");if(document.getElementsByClassName("e-griddragarea").length||r.rowDropSettings.targetID&&!e.sender.target.classList.contains("e-selectionbackground")&&"Single"!==r.selectionSettings.type||!r.rowDropSettings.targetID&&!Ut(e.sender.target,"e-rowdragdrop"))return!1;r.rowDropSettings.targetID&&"Row"===r.selectionSettings.mode&&"Single"===r.selectionSettings.type&&r.selectRow(parseInt(t.draggable.currentStateTarget.parentElement.getAttribute("aria-rowindex"),10)),t.startedRow=sf.base.closest(i,"tr").cloneNode(!0),t.processArgs(i);var a={selectedRow:t.rows,dragelement:i,cloneElement:n,cancel:!1,data:t.rowData},l=r.getSelectedRows();r.trigger("rowDragStartHelper",a);if(a.cancel)return!1;_t(t.startedRow,".e-indentcell"),_t(t.startedRow,".e-detailrowcollapse"),_t(t.startedRow,".e-detailrowexpand"),t.removeCell(t.startedRow,"e-gridchkbox");var d=new RegExp("e-active","g");if(t.startedRow.innerHTML=t.startedRow.innerHTML.replace(d,""),o.appendChild(t.startedRow),r.getSelectedRows().length>1&&t.startedRow.hasAttribute("aria-selected")){var c=t.parent.createElement("span",{className:"e-dropitemscount",innerHTML:""+l.length});n.appendChild(c)}var h=sf.base.closest(i,"tr").querySelector(".e-icon-rowdragicon");return h&&h.classList.add("e-dragstartrow"),s.appendChild(o),n.appendChild(s),r.element.appendChild(n),n},this.dragStart=function(e){var r=t.parent;if(!document.getElementsByClassName("e-griddragarea").length){var i=e.target,n=t.parent.element.querySelector(".e-dropitemscount");t.parent.getSelectedRecords().length>1&&n&&(n.style.left=t.parent.element.querySelector(".e-cloneproperties table").offsetWidth-5+"px"),t.processArgs(i),r.trigger("rowDragStart",{rows:sf.base.isBlazor()?null:t.rows,target:sf.base.isBlazor()?null:e.target,draggableType:"rows",fromIndex:parseInt(t.rows[0].getAttribute("aria-rowindex"),10),data:Object.keys(t.rowData[0]).length>0?t.rowData:t.currentViewData()}),sf.base.isBlazor()&&e.bindEvents(e.dragElement),t.dragStartData=t.rowData;var s=document.getElementById(r.rowDropSettings.targetID);r.rowDropSettings.targetID&&s&&s.ej2_instances&&"grid"===s.ej2_instances[0].getModuleName()&&s.ej2_instances[0].getContent().classList.add("e-allowRowDrop")}},this.drag=function(e){var r=t.parent,i=t.parent.element.querySelector(".e-cloneproperties"),n=t.getElementFromPosition(i,e.event);sf.base.classList(i,["e-defaultcur"],["e-notallowedcur","e-movecur"]),t.isOverflowBorder=!0,t.hoverState=r.enableHover;var s=Ut(n,"e-grid")?sf.base.closest(e.target,"tr"):null;if(r.enableHover=!1,e.target){t.processArgs(n);var o={rows:t.rows,target:n,draggableType:"rows",data:t.rowData,originalEvent:e,cancel:!1};if(r.trigger("rowDrag",o),t.stopTimer(),!o.cancel){if(r.element.classList.add("e-rowdrag"),t.dragTarget=s&&Ut(n,"e-grid").id===i.parentElement.id?s.rowIndex:parseInt(t.startedRow.getAttribute("aria-rowindex"),10),r.rowDropSettings.targetID)Ut(n,"e-gridcontent")&&Ut(i.parentElement,"e-grid").id!==Ut(n,"e-grid").id?sf.base.classList(i,["e-defaultcur"],["e-notallowedcur"]):sf.base.classList(i,["e-notallowedcur"],["e-defaultcur"]);else{var a=Ut(n,"e-grid");a&&a.id===i.parentElement.id?sf.base.classList(i,["e-movecur"],["e-defaultcur"]):sf.base.classList(i,["e-notallowedcur"],["e-movecur"])}if(!r.rowDropSettings.targetID&&(!r.groupSettings.columns.length||e.target.classList.contains("e-selectionbackground")))if(Ut(n,"e-grid")&&t.updateScrollPostion(e.event,n),t.isOverflowBorder&&parseInt(t.startedRow.getAttribute("aria-rowindex"),10)!==t.dragTarget)t.moveDragRows(e,t.startedRow,s);else{if(s&&t.parent.getRowByIndex(t.parent.getCurrentViewRecords().length-1).getAttribute("data-uid")===s.getAttribute("data-uid")){var l=t.parent.createElement("div",{className:"e-lastrow-dragborder"}),d=t.parent.getContent();l.style.width=t.parent.element.offsetWidth-t.getScrollWidth()+"px",d.querySelectorAll(".e-lastrow-dragborder").length||(d.classList.add("e-grid-relative"),d.appendChild(l),l.style.bottom=t.getScrollWidth()+"px")}t.removeBorder(s)}}}},this.dragStop=function(e){or(t.parent)?t.parent.notify(T,{instance:t,handler:t.processDragStop,arg1:e}):t.processDragStop(e)},this.processDragStop=function(e){var r=t.parent;if(!t.parent.isDestroyed){var i=t.getElementFromPosition(e.helper,e.event),n=i&&!i.classList.contains("e-dlg-overlay")?i:e.target;t.parent.element.querySelector(".e-cloneproperties");r.element.classList.remove("e-rowdrag");var s=document.getElementById(r.rowDropSettings.targetID);if(r.rowDropSettings.targetID&&s&&s.ej2_instances&&"grid"===s.ej2_instances[0].getModuleName()&&s.ej2_instances[0].getContent().classList.remove("e-allowRowDrop"),r.isRowDragable()){t.stopTimer(),r.enableHover=t.hoverState,t.parent.getContent().classList.remove("e-grid-relative"),t.removeBorder(i);var o=r.element.querySelector(".e-dragstartrow");o&&o.classList.remove("e-dragstartrow")}t.processArgs(n);var a={target:sf.base.isBlazor()?null:n,draggableType:"rows",cancel:!1,fromIndex:parseInt(t.rows[0].getAttribute("aria-rowindex"),10),dropIndex:t.dragTarget,rows:sf.base.isBlazor()?null:t.rows,data:Object.keys(t.dragStartData[0]).length>0?t.dragStartData:t.currentViewData()};r.trigger("rowDrop",a,(function(){if(!Ut(n,"e-gridcontent")||a.cancel)return t.dragTarget=null,void sf.base.remove(e.helper);t.isRefresh=!1;var i=t.parent.getSelectedRowIndexes();if(r.isRowDragable()){if(sf.base.isBlazor()){var s=t.parent.getSelectedRecords().length?t.parent.getSelectedRecords():t.currentViewData(),o={addedRecords:[],deletedRecords:s,changedRecords:[]},l=t.dragTarget?t.dragTarget:a.dropIndex,d=new sf.data.Query;d.dragDropDestinationIndex=l,t.saveChange(o,d),o.deletedRecords=[],o.addedRecords=s,t.saveChange(o,d)}else!t.parent.rowDropSettings.targetID&&t.startedRow.querySelector("td.e-selectionbackground")&&i.length>1&&i.length!==t.parent.getCurrentViewRecords().length?t.reorderRows(i,a.dropIndex):t.reorderRows([parseInt(t.startedRow.getAttribute("aria-rowindex"),10)],t.dragTarget);t.dragTarget=null,r.rowDropSettings.targetID||(sf.base.remove(e.helper),r.refresh())}t.isRefresh=!0}))}},this.removeCell=function(e,t){return[].slice.call(e.querySelectorAll("td")).filter((function(r){r.classList.contains(t)&&e.deleteCell(r.cellIndex)}))},this.parent=e,this.parent.isDestroyed||(this.parent.on(u,this.initializeDrag,this),this.parent.on("columnDrop",this.columnDrop,this),this.onDataBoundFn=this.onDataBound.bind(this),this.parent.addEventListener(h,this.onDataBoundFn),this.parent.on(m,this.enableAfterRender,this))}return e.prototype.currentViewData=function(){for(var e=this.parent.getSelectedRowIndexes(),t=[],r=parseInt(this.startedRow.getAttribute("aria-rowindex"),10),i=0,n=e.length;i<n;i++){t[i]=this.parent.currentViewData[e[i]]}return this.parent.rowDropSettings.targetID||0!==e.length||(t[0]=this.parent.currentViewData[r]),t},e.prototype.saveChange=function(e,t){var r=this;this.parent.getDataModule().saveChanges(e,this.parent.getPrimaryKeyFieldNames()[0],{},t).then((function(){r.parent.notify(b,{type:d,requestType:"rowdraganddrop"})})).catch((function(e){sf.base.isNullOrUndefined(e.error)||sf.base.isNullOrUndefined(e.error.message)||(e.error=e.error.message),r.parent.trigger("actionFailure",e)}))},e.prototype.reorderRows=function(e,t){for(var r=this.parent.getSelectedRowIndexes(),i=[],n=[],s=this.parent.renderModule.data.dataManager.dataSource.json,o=t,a=e[0],l=0,c=e.length;l<c;l++)n[l]=s[e[l]];for(l=0,c=r.length;l<c;l++)i[l]=s[r[l]];for(l=0,c=n.length;l<c;l++){if(0!==l){for(var h=0,p=s.length;h<p;h++)if(JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[h])===JSON.stringify(n[l])){a=h;break}for(h=0,p=s.length;h<p;h++)if(JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[h])===JSON.stringify(n[l-1])){a>h&&(o=h+1);break}}this.reorderRow(a,o)}this.isRefresh&&this.parent.notify(b,{type:d,requestType:"rowdraganddrop"});for(l=0,c=i.length;l<c;l++)for(h=0,p=s.length;h<p;h++)if(JSON.stringify(this.parent.renderModule.data.dataManager.dataSource.json[h])===JSON.stringify(i[l])){r[l]=h;break}this.selectedRowColls=r},e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.initializeDrag=function(){var e=this.parent;this.draggable=new sf.base.Draggable(e.getContent(),{dragTarget:".e-rowcelldrag, .e-rowdragdrop, .e-rowcell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop})},e.prototype.updateScrollPostion=function(e,t){var r=this,i=this.parent.getFrozenColumns(),n=Kt(e).y,s=this.parent.getContent().getBoundingClientRect(),o=this.parent.getRowHeight()-15,a=i?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent().firstElementChild;if(s.top+o>=n){var l=-this.parent.getRowHeight();this.isOverflowBorder=!1,this.timer=window.setInterval((function(){r.setScrollDown(a,l,!0)}),200)}else if(s.top+this.parent.getContent().clientHeight-o-33<=n){var d=this.parent.getRowHeight();this.isOverflowBorder=!1,this.timer=window.setInterval((function(){r.setScrollDown(a,d,!0)}),200)}},e.prototype.setScrollDown=function(e,t,r){e.scrollTop=e.scrollTop+t},e.prototype.moveDragRows=function(e,t,r){var i=this.parent.element.querySelector(".e-cloneproperties"),n=sf.base.closest(e.target,"tr");if(Ut(n,"e-gridcontent")&&Ut(i.parentElement,"e-grid").id===Ut(n,"e-grid").id){var s=n||this.startedRow;this.setBorder(s,e.event,t,r)}},e.prototype.setBorder=function(e,t,r,i){var n=this.parent.element,s=this.parent.element.querySelector(".e-cloneproperties");if(this.removeFirstRowBorder(e),this.removeLastRowBorder(e),Ut(e,"e-gridcontent")&&Ut(s.parentElement,"e-grid").id===Ut(e,"e-grid").id){sf.base.removeClass(n.querySelectorAll(".e-rowcell,.e-rowdragdrop"),["e-dragborder"]);var o=[];if(i&&0===i.rowIndex){var a=this.parent.createElement("div",{className:"e-firstrow-dragborder"}),l=this.parent.getHeaderContent();l.classList.add("e-grid-relative"),a.style.width=n.offsetWidth-this.getScrollWidth()+"px",l.querySelectorAll(".e-firstrow-dragborder").length||l.appendChild(a)}else i&&parseInt(r.getAttribute("aria-rowindex"),10)>i.rowIndex?(e=this.parent.getRowByIndex(i.rowIndex-1),o=[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))):o=[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"));o.length>0&&dr(o,!0,"e-dragborder")}},e.prototype.getScrollWidth=function(){var e=this.parent.getContent().firstElementChild;return e.scrollWidth>e.offsetWidth?Ze.getScrollBarWidth():0},e.prototype.removeFirstRowBorder=function(e){this.parent.element.getElementsByClassName("e-firstrow-dragborder").length>0&&e&&0!==e.rowIndex&&this.parent.element.getElementsByClassName("e-firstrow-dragborder")[0].remove()},e.prototype.removeLastRowBorder=function(e){var t=e&&this.parent.getRowByIndex(this.parent.getCurrentViewRecords().length-1).getAttribute("data-uid")!==e.getAttribute("data-uid");this.parent.element.getElementsByClassName("e-lastrow-dragborder").length>0&&e&&t&&this.parent.element.getElementsByClassName("e-lastrow-dragborder")[0].remove()},e.prototype.removeBorder=function(e){(this.removeFirstRowBorder(e),this.removeLastRowBorder(e),e=this.parent.getRows().filter((function(e){return e.querySelector("td.e-dragborder")}))[0])&&dr([].slice.call(e.querySelectorAll(".e-dragborder")),!1,"e-dragborder")},e.prototype.getElementFromPosition=function(e,t){var r,i=Kt(t);return e.style.display="none",r=document.elementFromPoint(i.x,i.y),e.style.display="",r},e.prototype.onDataBound=function(e){this.selectedRowColls.length>0&&(this.parent.selectRows(this.selectedRowColls),this.selectedRowColls=[])},e.prototype.getTargetIdx=function(e){return e?parseInt(e.getAttribute("aria-rowindex"),10):0},e.prototype.singleRowDrop=function(e){var t,r,i=sf.base.closest(e.target,"tr");r=e.droppedElement.parentElement.ej2_instances[0],t=i?i.rowIndex:r.currentViewData.length-1,this.reorderRow(this.startedRowIndex,t)},e.prototype.columnDrop=function(e){var t=this.parent;e.droppedElement.parentElement.ej2_instances[0];if("grouping"!==e.droppedElement.getAttribute("action")){var r,i=sf.base.closest(e.target,"tr");if("true"!==e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.id===t.element.id||"true"===e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.id!==t.element.id)return;if(e.droppedElement.parentElement.id!==t.element.id)r=e.droppedElement.parentElement.ej2_instances[0];else if(this.isSingleRowDragDrop||"true"===e.droppedElement.querySelector("tr").getAttribute("single-dragrow"))return void this.singleRowDrop(e);if(r.element.id!==t.element.id&&r.rowDropSettings.targetID!==t.element.id)return;var n=r.getSelectedRecords(),s=this.getTargetIdx(i);if(isNaN(s)&&(s=0),t.allowPaging&&(s=s+t.pageSettings.currentPage*t.pageSettings.pageSize-t.pageSettings.pageSize),sf.base.isBlazor()){var o=[],a=r.getSelectedRowIndexes();for(u=0;u<a.length;u++)o[u]=r.currentViewData[a[u]];var l={addedRecords:n=o,deletedRecords:[],changedRecords:[]},c=new sf.data.Query;c.dragDropDestinationIndex=s,t.getDataModule().saveChanges(l,t.getPrimaryKeyFieldNames()[0],{},c).then((function(){t.notify(b,{type:d,requestType:"rowdraganddrop"})})).catch((function(e){sf.base.isNullOrUndefined(e.error)||sf.base.isNullOrUndefined(e.error.message)||(e.error=e.error.message),t.trigger("actionFailure",e)})),l.deletedRecords=n,l.addedRecords=[],r.getDataModule().saveChanges(l,r.getPrimaryKeyFieldNames()[0],{},c).then((function(){r.notify(b,{type:d,requestType:"rowdraganddrop"})})).catch((function(e){sf.base.isNullOrUndefined(e.error)||sf.base.isNullOrUndefined(e.error.message)||(e.error=e.error.message),r.trigger("actionFailure",e)}))}else{t.notify("rows-added",{toIndex:s,records:n}),t.notify(b,{type:d,requestType:"rowdraganddrop"});var h=r.getSelectedRowIndexes(),p=r.allowPaging?r.pageSettings.currentPage*r.pageSettings.pageSize-r.pageSettings.pageSize:0;this.selectedRows=[];for(var u=0,f=n.length;u<f;u++)this.selectedRows.push(p+h[u]);r.notify("rows-removed",{indexes:this.selectedRows,records:n}),r.notify(b,{type:d,requestType:"rowdraganddrop"})}}},e.prototype.reorderRow=function(e,t){var r=this.parent;if(!r.sortSettings.columns.length&&!r.groupSettings.columns.length&&!r.filterSettings.columns.length){var i=r.allowPaging?r.pageSettings.currentPage*r.pageSettings.pageSize-r.pageSettings.pageSize:0;t+=i,this.selectedRows=r.getSelectedRowIndexes(),r.notify("row-position-changed",{fromIndex:e+i,toIndex:t})}},e.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.initializeDrag()},e.prototype.destroy=function(){var e=this.parent.element;!this.parent.isDestroyed&&e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.draggable.destroy(),this.parent.off(u,this.initializeDrag),this.parent.off("columnDrop",this.columnDrop),this.parent.removeEventListener(h,this.onDataBoundFn),this.parent.off(m,this.enableAfterRender))},e.prototype.getModuleName=function(){return"rowDragAndDrop"},e.prototype.processArgs=function(e){var t=this.parent;t.getSelectedRecords().length>0&&!1===this.startedRow.cells[0].classList.contains("e-selectionbackground")||0===t.getSelectedRecords().length?(this.rows=[this.startedRow],this.rowData=[this.parent.getRowInfo(this.startedRow.querySelector(".e-rowcell")).rowData]):(this.rows=t.getSelectedRows(),this.rowData=t.getSelectedRecords())},e}(),yi=function(){function e(e,t,r,i){var n=this;this.sortRequired=!0,this.isAppliedGroup=!1,this.isAppliedUnGroup=!1,this.reorderingColumns=[],this.visualElement=sf.base.createElement("div",{className:"e-cloneproperties e-dragclone e-gdclone",styles:"line-height:23px",attrs:{action:"grouping"}}),this.helper=function(e){var t=n.parent,r=e.sender.target,i=r.classList.contains("e-groupheadercell")?r:Ut(r,"e-groupheadercell");return!(!i||!r.classList.contains("e-drag")&&n.groupSettings.allowReordering)&&(n.column=t.getColumnByField(i.firstElementChild.getAttribute("ej-mappingname")),n.visualElement.textContent=i.textContent,n.visualElement.style.width=i.offsetWidth+2+"px",n.visualElement.style.height=i.offsetHeight+2+"px",n.visualElement.setAttribute("e-mappinguid",n.column.uid),t.element.appendChild(n.visualElement),n.visualElement)},this.dragStart=function(e){n.parent.element.classList.add("e-ungroupdrag"),sf.base.isBlazor()&&e.bindEvents(e.dragElement)},this.drag=function(e){n.groupSettings.allowReordering&&n.animateDropper(e);var t=e.target,r=n.parent.element.querySelector(".e-cloneproperties");n.parent.trigger("columnDrag",{target:t,draggableType:"headercell",column:n.column}),n.groupSettings.allowReordering||(sf.base.classList(r,["e-defaultcur"],["e-notallowedcur"]),Ut(t,"e-gridcontent")||Ut(t,"e-headercell")||sf.base.classList(r,["e-notallowedcur"],["e-defaultcur"]))},this.dragStop=function(e){n.parent.element.classList.remove("e-ungroupdrag");var t=!(Ut(e.target,"e-gridcontent")||Ut(e.target,"e-gridheader"));if(n.groupSettings.allowReordering&&t){if(sf.base.remove(e.helper),Ut(e.target,"e-groupdroparea"))n.rearrangeGroup(e);else if(!Ut(e.target,"e-grid")){var r=n.parent.getColumnByUid(e.helper.getAttribute("e-mappinguid")).field;-1!==n.groupSettings.columns.indexOf(r)&&n.ungroupColumn(r)}}else t&&sf.base.remove(e.helper)},this.animateDropper=function(e){var t=n.parent.element.querySelector(".e-cloneproperties").getAttribute("e-mappinguid"),r=n.parent.getColumnByUid(t).field,i=Ut(e.target,"e-groupdroparea"),s=Ut(e.target,"e-group-animator"),o=[].slice.call(n.element.querySelectorAll(".e-groupheadercell")).map((function(e){return e.querySelector("div").getAttribute("ej-mappingname")})),a=JSON.parse(JSON.stringify(o));if(s||i){if(s){var l=s.querySelector("div[ej-mappingname]").getAttribute("ej-mappingname"),d=+s.getAttribute("index");if(l!==r){var c=a.indexOf(r);-1!==c&&a.splice(c,1);var h=-1!==d&&c===d;a.splice(d+(h?1:0),0,r)}}else i&&-1===a.indexOf(r)&&a.push(r);n.element.innerHTML="",a.length&&!n.element.classList.contains("e-grouped")&&n.element.classList.add("e-grouped"),n.reorderingColumns=a;for(var p=0;p<a.length;p++)n.addColToGroupDrop(a[p])}else n.addLabel(),n.removeColFromGroupDrop(r)},this.drop=function(e){var t=n.parent,r=t.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));n.element.classList.remove("e-hover"),sf.base.remove(e.droppedElement),n.aria.setDropTarget(n.parent.element.querySelector(".e-groupdroparea"),!1),n.aria.setGrabbed(n.parent.getHeaderTable().querySelector("[aria-grabbed=true]"),!1),sf.base.isNullOrUndefined(r)||!1===r.allowGrouping||Ut(t.getColumnHeaderByUid(r.uid),"e-grid").getAttribute("id")!==t.element.getAttribute("id")?n.parent.log("action_disabled_column",{moduleName:n.getModuleName(),columnName:r.headerText}):n.groupColumn(r.field)},this.contentRefresh=!0,this.aria=new _,this.parent=e,this.groupSettings=t,this.serviceLocator=i,this.sortedColumns=r,this.focus=i.getService("focus"),this.addEventListener(),this.groupGenerator=new U(this.parent)}return e.prototype.addLabel=function(){if(!this.element.querySelectorAll(".e-group-animator").length){var e=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=e,this.element.classList.remove("e-grouped")}},e.prototype.rearrangeGroup=function(e){this.sortRequired=!1,this.updateModel()},e.prototype.columnDrag=function(e){this.groupSettings.allowReordering&&this.animateDropper(e);this.parent;var t=this.parent.element.querySelector(".e-cloneproperties");sf.base.classList(t,["e-defaultcur"],["e-notallowedcur"]),Ut(e.target,"e-groupdroparea")||this.parent.allowReordering&&Ut(e.target,"e-headercell")||sf.base.classList(t,["e-notallowedcur"],["e-defaultcur"]),e.target.classList.contains("e-groupdroparea")?this.element.classList.add("e-hover"):this.element.classList.remove("e-hover")},e.prototype.columnDragStart=function(e){if(!e.target.classList.contains("e-stackedheadercell")){this.parent;var t=this.parent.element.querySelector(".e-groupdroparea");this.aria.setDropTarget(t,e.column.allowGrouping);var r=e.target.classList.contains("e-headercell")?e.target:Ut(e.target,"e-headercell");this.aria.setGrabbed(r,!0,!e.column.allowGrouping)}},e.prototype.columnDrop=function(e){var t=this.parent;if("grouping"===e.droppedElement.getAttribute("action")){var r=t.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));if(sf.base.isNullOrUndefined(r)||!1===r.allowGrouping||Ut(t.getColumnHeaderByUid(r.uid),"e-grid").getAttribute("id")!==t.element.getAttribute("id"))return;this.ungroupColumn(r.field)}},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(m,this.enableAfterRender,this),this.parent.on("grouping-complete",this.onActionComplete,this),this.parent.on("ungrouping-complete",this.onActionComplete,this),this.parent.on(v,this.onPropertyChanged,this),this.parent.on(S,this.clickHandler,this),this.parent.on("columnDrag",this.columnDrag,this),this.parent.on("columnDragStart",this.columnDragStart,this),this.parent.on("header-drop",this.columnDrop,this),this.parent.on("columnDrop",this.columnDrop,this),this.parent.on(C,this.refreshSortIcons,this),this.parent.on("sorting-complete",this.refreshSortIcons,this),this.parent.on(w,this.keyPressHandler,this),this.parent.on(g,this.initialEnd,this),this.parent.on(y,this.initialEnd,this),this.parent.on(u,this.render,this),this.parent.on("group-aggregates",this.onGroupAggregates,this),this.parent.on("blazor-action-begin",this.blazorActionBegin,this),this.parent.on("group-expand-collapse",this.updateExpand,this),this.parent.on("persist-data-changed",this.initialEnd,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(u,this.render),this.parent.off(m,this.enableAfterRender),this.parent.off("grouping-complete",this.onActionComplete),this.parent.off("ungrouping-complete",this.onActionComplete),this.parent.off(v,this.onPropertyChanged),this.parent.off(S,this.clickHandler),this.parent.off("columnDrag",this.columnDrag),this.parent.off("columnDragStart",this.columnDragStart),this.parent.off("columnDrop",this.columnDrop),this.parent.off("header-drop",this.columnDrop),this.parent.off(C,this.refreshSortIcons),this.parent.off("sorting-complete",this.refreshSortIcons),this.parent.off(w,this.keyPressHandler),this.parent.off("group-aggregates",this.onGroupAggregates),this.parent.off("blazor-action-begin",this.blazorActionBegin),this.parent.off("group-expand-collapse",this.updateExpand))},e.prototype.blazorActionBegin=function(){this.parent.allowGrouping&&!this.parent.isCollapseStateEnabled()&&this.expandAll()},e.prototype.initialEnd=function(){var e=this.parent;if(this.parent.off(g,this.initialEnd),this.parent.off(y,this.initialEnd),sf.base.isBlazor()&&e.isServerRendered){for(var t=0;t<e.columns.length;t++)this.removeColFromGroupDrop(e.columns[t].field);this.updateGroupDropArea()}if(this.parent.getColumns().length&&this.groupSettings.columns.length){this.contentRefresh=!1;for(var r=0,i=e.groupSettings.columns;r<i.length;r++){var n=i[r];this.groupColumn(n)}this.contentRefresh=!0}},e.prototype.keyPressHandler=function(e){var t=this.parent;if("ctrlSpace"===e.action||this.groupSettings.columns.length&&-1!==["altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","enter"].indexOf(e.action))switch(e.preventDefault(),e.action){case"altDownArrow":case"altUpArrow":var r=t.allowSelection?t.getSelectedRowIndexes():[];if(r.length){for(var i=t.getContentTable().querySelector("tbody").children,n=void 0,s=t.getDataRows()[r[r.length-1]].rowIndex;s>=0;s--)if(!i[s].classList.contains("e-row")&&!i[s].classList.contains("e-detailrow")){n=i[s];break}this.expandCollapseRows(n.querySelector("altUpArrow"===e.action?".e-recordplusexpand":".e-recordpluscollapse"))}break;case"ctrlDownArrow":this.expandAll();break;case"ctrlUpArrow":this.collapseAll();break;case"enter":if(this.parent.isEdit||null!==sf.base.closest(e.target,"#"+this.parent.element.id+"_searchbar"))return;var o=this.focus.getFocusedElement(),a=o?o.parentElement.querySelector('[class^="e-record"]'):null;if(!a)break;this.expandCollapseRows(a);break;case"ctrlSpace":var l=t.focusModule.currentInfo.element;if(l&&l.classList.contains("e-headercell")){var d=t.getColumnByUid(l.firstElementChild.getAttribute("e-mappinguid"));d.field&&t.groupSettings.columns.indexOf(d.field)<0?this.groupColumn(d.field):this.ungroupColumn(d.field)}}},e.prototype.clickHandler=function(e){this.expandCollapseRows(e.target),this.applySortFromTarget(e.target),this.unGroupFromTarget(e.target),this.toogleGroupFromHeader(e.target)},e.prototype.unGroupFromTarget=function(e){e.classList.contains("e-ungroupbutton")&&this.ungroupColumn(e.parentElement.getAttribute("ej-mappingname"))},e.prototype.toogleGroupFromHeader=function(e){this.groupSettings.showToggleButton&&(e.classList.contains("e-grptogglebtn")?e.classList.contains("e-toggleungroup")?this.ungroupColumn(this.parent.getColumnByUid(e.parentElement.getAttribute("e-mappinguid")).field):this.groupColumn(this.parent.getColumnByUid(e.parentElement.getAttribute("e-mappinguid")).field):e.classList.contains("e-toggleungroup")&&this.ungroupColumn(e.parentElement.getAttribute("ej-mappingname")))},e.prototype.applySortFromTarget=function(e){var t=this.parent,r=sf.base.closest(e,".e-groupheadercell");if(t.allowSorting&&r&&!e.classList.contains("e-ungroupbutton")&&!e.classList.contains("e-toggleungroup")){var i=r.firstElementChild.getAttribute("ej-mappingname");t.getColumnHeaderByField(i).querySelectorAll(".e-ascending").length?t.sortColumn(i,"Descending",!0):t.sortColumn(i,"Ascending",!0)}},e.prototype.expandCollapseRows=function(e){var t=Ut(e,"e-recordplusexpand")||Ut(e,"e-recordpluscollapse");if(t){var r=t.cellIndex,i=t.parentElement.rowIndex,n=this.parent.getContentTable().querySelector("tbody").children,s=[].slice.call(n).slice(i+1,n.length),o=void 0,a=void 0,l=[],d=this.parent,c=t.parentElement.querySelectorAll(".e-indentcell").length,h=!1;if(sf.base.isBlazor()&&this.parent.isCollapseStateEnabled())return void this.parent.notify("group-expand-collapse",{uid:t.parentElement.getAttribute("data-uid"),isExpand:t.classList.contains("e-recordpluscollapse")});if(t.classList.contains("e-recordpluscollapse")?(sf.base.addClass([t],"e-recordplusexpand"),sf.base.removeClass([t],"e-recordpluscollapse"),t.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",h=!0,wr(d)&&this.updateVirtualRows(d,e,h,void 0,void 0)):(o=!0,sf.base.removeClass([t],"e-recordplusexpand"),sf.base.addClass([t],"e-recordpluscollapse"),t.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",wr(d)&&this.updateVirtualRows(d,e,!o,void 0,void 0)),this.aria.setExpand(t,h),!wr(d))for(var p=0,u=s.length;p<u&&(s[p].querySelectorAll("td")[r]&&s[p].querySelectorAll("td")[r].classList.contains("e-indentcell")&&s);p++)o?s[p].style.display="none":s[p].querySelectorAll(".e-indentcell").length===c+1&&(s[p].style.display="",(a=s[p].querySelector(".e-recordplusexpand"))&&l.push(a),s[p].classList.contains("e-detailrow")&&s[p-1].querySelectorAll(".e-detailrowcollapse").length&&(s[p].style.display="none"));for(p=0,u=l.length;p<u;p++)sf.base.removeClass([l[p]],"e-recordplusexpand"),sf.base.addClass([l[p]],"e-recordpluscollapse"),l[p].firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",this.expandCollapseRows(l[p])}},e.prototype.updateVirtualRows=function(e,t,r,i,n){var s=e.getRowObjectFromUID(t.closest("tr").getAttribute("data-uid"));s.isExpand=r,Dt(e),(i=e.getDataModule().generateQuery(!1)).queries=e.getDataModule().aggregateQuery(e.getQuery().clone()).queries;var o={requestType:"virtualscroll",rowObject:s};e.getDataModule().getData(o,i.requiresCount()).then((function(t){return e.renderModule.dataManagerSuccess(t,o)}))},e.prototype.expandCollapse=function(e){if(sf.base.isBlazor()&&this.parent.isCollapseStateEnabled())this.parent.notify("group-expand-collapse",{isExpand:e});else{e||this.parent.notify("initial-collapse",e);for(var t,r=this.parent.getContentTable().querySelector("tbody").children,i=0,n=r.length;i<n;i++)r[i].querySelectorAll(".e-recordplusexpand, .e-recordpluscollapse").length?((t=r[i].querySelector(e?".e-recordpluscollapse":".e-recordplusexpand"))&&(t.className=e?"e-recordplusexpand":"e-recordpluscollapse",t.firstElementChild.className=e?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow"),r[i].firstElementChild.classList.contains("e-recordplusexpand")||r[i].firstElementChild.classList.contains("e-recordpluscollapse")||(r[i].style.display=e?"":"none")):r[i].style.display=e?"":"none"}},e.prototype.expandAll=function(){this.expandCollapse(!0)},e.prototype.collapseAll=function(){this.expandCollapse(!1)},e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.renderGroupDropArea(),this.initDragAndDrop(),this.refreshToggleBtn()},e.prototype.renderGroupDropArea=function(){var e=this.parent.element.querySelector(".e-groupdroparea");e&&sf.base.remove(e),this.element=this.parent.createElement("div",{className:"e-groupdroparea",attrs:{tabindex:"-1"}}),this.groupSettings.allowReordering&&this.element.classList.add("e-group-animate"),this.updateGroupDropArea(),this.parent.element.insertBefore(this.element,this.parent.element.firstChild),this.groupSettings.showDropArea||(this.element.style.display="none")},e.prototype.updateGroupDropArea=function(e){if(this.groupSettings.showDropArea&&!this.groupSettings.columns.length){var t=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=t,this.element.classList.remove("e-grouped")}else(this.element.innerHTML===this.l10n.getConstant("GroupDropArea")&&(1===this.groupSettings.columns.length||!this.isAppliedGroup&&!this.isAppliedUnGroup)||e)&&(this.element.innerHTML=""),this.element.classList.add("e-grouped")},e.prototype.initDragAndDrop=function(){this.initializeGHeaderDrop(),this.initializeGHeaderDrag()},e.prototype.initializeGHeaderDrag=function(){new sf.base.Draggable(this.element,{dragTarget:this.groupSettings.allowReordering?".e-drag":".e-groupheadercell",distance:this.groupSettings.allowReordering?-10:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop})},e.prototype.initializeGHeaderDrop=function(){this.parent,new sf.base.Droppable(this.element,{accept:".e-dragclone",drop:this.drop})},e.prototype.groupColumn=function(e){var t=this.parent,r=t.getColumnByField(e);sf.base.isNullOrUndefined(r)||!1===r.allowGrouping||this.contentRefresh&&this.groupSettings.columns.indexOf(e)>-1?this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:r.headerText}):or(t)?t.notify(T,{instance:this,handler:this.groupColumn,arg1:e}):(r.visible=t.groupSettings.showGroupedColumn,this.colName=e,this.isAppliedGroup=!0,this.contentRefresh?this.updateModel():this.addColToGroupDrop(e),this.updateGroupDropArea(),this.isAppliedGroup=!1)},e.prototype.ungroupColumn=function(e){var t=this.parent,r=this.parent.enableColumnVirtualization?this.parent.columns.filter((function(t){return t.field===e}))[0]:t.getColumnByField(e);if(!(sf.base.isNullOrUndefined(r)||!1===r.allowGrouping||this.groupSettings.columns.indexOf(e)<0))if(or(t))t.notify(T,{instance:this,handler:this.ungroupColumn,arg1:e});else{if(r.visible=!0,sf.base.isBlazor()&&t.isServerRendered){var i=[];i[0]=r,this.parent.notify("setvisibility",i)}this.colName=r.field;var n=JSON.parse(JSON.stringify(this.groupSettings.columns));if(n.splice(n.indexOf(this.colName),1),this.sortedColumns.indexOf(e)<0)for(var s=0,o=t.sortSettings.columns.length;s<o;s++)if(e===t.sortSettings.columns[s].field){t.sortSettings.columns.splice(s,1);break}sf.base.isBlazor()&&this.parent.isServerRendered&&(t.sortSettings.columns=t.sortSettings.columns),this.groupSettings.allowReordering&&(this.reorderingColumns=n),this.groupSettings.columns=n,t.allowGrouping&&(this.isAppliedUnGroup=!0,this.parent.dataBind())}},e.prototype.updateModel=function(){this.parent;var e=JSON.parse(JSON.stringify(this.groupSettings.columns));e=this.reorderingColumns.length?JSON.parse(JSON.stringify(this.reorderingColumns)):e,this.sortRequired&&(-1===e.indexOf(this.colName)&&e.push(this.colName),this.groupAddSortingQuery(this.colName)),this.sortRequired=!0,this.parent.groupSettings.columns=e,this.parent.dataBind()},e.prototype.onActionComplete=function(e){sf.base.isBlazor()&&!this.parent.isJsComponent&&(e.rows=null);this.parent;"grouping"===e.requestType?this.addColToGroupDrop(this.colName):this.removeColFromGroupDrop(this.colName);var t=this.groupSettings.columns.indexOf(this.colName)>-1?{columnName:this.colName,requestType:"grouping",type:c}:{requestType:"ungrouping",type:c};this.parent.trigger(c,sf.base.extend(e,t)),this.colName=null},e.prototype.groupAddSortingQuery=function(e){for(var t=0;t<this.parent.sortSettings.columns.length&&this.parent.sortSettings.columns[t].field!==e;)t++;if(this.parent.sortSettings.columns.length===t){this.parent.sortSettings.columns.push({field:e,direction:"Ascending",isFromGroup:!0});sf.base.isBlazor()&&this.parent.isServerRendered&&(this.parent.sortSettings.columns=this.parent.sortSettings.columns)}else this.parent.allowSorting||(this.parent.sortSettings.columns[t].direction="Ascending")},e.prototype.createElement=function(e){var t=this.parent,r="Ascending",i=this.parent.createElement("div",{className:"e-grid-icon e-group-animator"}),n=this.parent.createElement("div",{className:"e-grid-icon e-groupheadercell"}),s=this.parent.createElement("div",{attrs:{"ej-mappingname":e}}),o=this.parent.getColumnByField(e),a=t.getColumnHeaderByUid(o.uid);this.groupSettings.allowReordering&&s.appendChild(this.parent.createElement("span",{className:"e-drag e-icons e-icon-drag",innerHTML:"&nbsp;",attrs:{title:"Drag",tabindex:"-1","aria-label":"Drag the grouped column"}})),s.appendChild(this.parent.createElement("span",{className:"e-grouptext",innerHTML:o.headerText,attrs:{tabindex:"-1","aria-label":"sort the grouped column"}})),this.groupSettings.showToggleButton&&s.appendChild(this.parent.createElement("span",{className:"e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":"ungroup button"}})),a.querySelectorAll(".e-ascending,.e-descending").length&&(r=a.querySelector(".e-ascending")?"Ascending":"Descending"),s.appendChild(this.parent.createElement("span",{className:"e-groupsort e-icons e-"+r.toLowerCase()+" e-icon-"+r.toLowerCase(),innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":"sort the grouped column"}})),s.appendChild(this.parent.createElement("span",{className:"e-ungroupbutton e-icons e-icon-hide",innerHTML:"&nbsp;",attrs:{title:sf.base.isBlazor()?this.l10n.getConstant("UnGroupButton"):this.l10n.getConstant("UnGroup"),tabindex:"-1","aria-label":"ungroup the grouped column"},styles:this.groupSettings.showUngroupButton?"":"display:none"})),n.appendChild(s);this.groupSettings.columns.indexOf(e);return this.groupSettings.allowReordering&&(i.appendChild(n),i.appendChild(this.createSeparator()),n=i),n},e.prototype.addColToGroupDrop=function(e){if(!this.groupSettings.allowReordering||!this.parent.element.querySelector(".e-groupdroparea div[ej-mappingname="+e+"]")){var t=this.parent.getColumnByField(e);if(!sf.base.isNullOrUndefined(t)){var r=this.createElement(e);if(this.groupSettings.allowReordering){var i=this.element.querySelectorAll(".e-group-animator").length;r.setAttribute("index",i.toString())}this.element.appendChild(r)}}},e.prototype.createSeparator=function(){return this.parent.createElement("span",{className:"e-nextgroup e-icons e-icon-next",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":"Separator for the grouped columns"},styles:this.groupSettings.showUngroupButton?"":"display:none"})},e.prototype.refreshToggleBtn=function(e){if(this.groupSettings.showToggleButton)for(var t=[].slice.call(this.parent.getHeaderTable().getElementsByClassName("e-headercelldiv")),r=0,i=t.length;r<i;r++)if(!t[r].classList.contains("e-emptycell")&&!t[r].classList.contains("e-headerchkcelldiv")){var n=this.parent.getColumnByUid(t[r].getAttribute("e-mappinguid"));(!this.parent.showColumnMenu||this.parent.showColumnMenu&&!n.showColumnMenu)&&(t[r].querySelectorAll(".e-grptogglebtn").length&&sf.base.remove(t[r].querySelectorAll(".e-grptogglebtn")[0]),e||t[r].appendChild(this.parent.createElement("span",{className:"e-grptogglebtn e-icons "+(this.groupSettings.columns.indexOf(n.field)>-1?"e-toggleungroup e-icon-ungroup":"e-togglegroup e-icon-group"),attrs:{tabindex:"-1","aria-label":"Group button"}})))}},e.prototype.removeColFromGroupDrop=function(e){if(!sf.base.isNullOrUndefined(this.getGHeaderCell(e))){var t=this.getGHeaderCell(e);if(this.groupSettings.allowReordering){var r=Ut(t,"e-group-animator");sf.base.remove(r)}else sf.base.remove(t);this.updateGroupDropArea()}this.isAppliedUnGroup=!1},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName())for(var t=0,r=Object.keys(e.properties);t<r.length;t++){var i=r[t];switch(i){case"columns":var n=void 0;if(this.contentRefresh){if(this.isAppliedUnGroup)n={requestType:"ungrouping",type:d};else{if(!this.isAppliedGroup){this.updateGroupDropArea(!0);for(var s=0;s<this.groupSettings.columns.length;s++){this.colName=this.groupSettings.columns[s],this.parent.getColumnByField(this.colName).visible=this.parent.groupSettings.showGroupedColumn,this.groupAddSortingQuery(this.colName),s<this.groupSettings.columns.length-1&&this.addColToGroupDrop(this.groupSettings.columns[s])}}n={columnName:this.colName,requestType:e.properties[i].length?"grouping":"ungrouping",type:d}}if(!this.groupSettings.showGroupedColumn){var o=e.oldProperties[i];for(s=0;s<o.length;s++)-1===e.properties[i].indexOf(o[s])&&(this.parent.getColumnByField(o[s]).visible=!0)}sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.isCollapseStateEnabled()&&"grouping"===n.requestType&&this.parent.refreshHeader(),this.parent.notify(b,n)}break;case"showDropArea":this.updateGroupDropArea(),this.groupSettings.showDropArea?this.element.style.display="":this.element.style.display="none";break;case"showGroupedColumn":this.updateGroupedColumn(this.groupSettings.showGroupedColumn),this.parent.notify(b,{requestType:"refresh"});break;case"showUngroupButton":this.updateButtonVisibility(this.groupSettings.showUngroupButton,"e-ungroupbutton");break;case"showToggleButton":this.updateButtonVisibility(this.groupSettings.showToggleButton,"e-togglegroupbutton "),this.parent.refreshHeader()}}},e.prototype.updateGroupedColumn=function(e){for(var t=0;t<this.groupSettings.columns.length;t++)this.parent.getColumnByField(this.groupSettings.columns[t]).visible=e},e.prototype.updateButtonVisibility=function(e,t){for(var r=[].slice.call(this.element.querySelectorAll("."+t)),i=0;i<r.length;i++)r[i].style.display=e?"":"none"},e.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.render()},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.parent.isDestroyed||this.parent.refreshing||this.clearGrouping(),this.removeEventListener(),this.refreshToggleBtn(!0),sf.base.remove(this.element))},e.prototype.clearGrouping=function(){var e=JSON.parse(JSON.stringify(this.groupSettings.columns));this.contentRefresh=!1;for(var t=0,r=e.length;t<r;t++)t===r-1&&(this.contentRefresh=!0),this.ungroupColumn(e[t]);this.contentRefresh=!0},e.prototype.getModuleName=function(){return"group"},e.prototype.refreshSortIcons=function(e){var t,r=this.parent,i=r.sortSettings.columns,n=r.groupSettings.columns,s=this.parent.getColumns().map((function(e){return e.field}));this.refreshToggleBtn();for(var o=0,a=i.length;o<a;o++)-1!==s.indexOf(i[o].field)&&(t=r.getColumnHeaderByField(i[o].field),!r.allowSorting&&(this.sortedColumns.indexOf(i[o].field)>-1||this.groupSettings.columns.indexOf(i[o].field)>-1)?(sf.base.classList(t.querySelector(".e-sortfilterdiv"),["e-ascending","e-icon-ascending"],[]),i.length>1&&t.querySelector(".e-headercelldiv").appendChild(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(o+1).toString()}))):this.getGHeaderCell(i[o].field)&&this.getGHeaderCell(i[o].field).querySelectorAll(".e-groupsort").length&&("Ascending"===i[o].direction?sf.base.classList(this.getGHeaderCell(i[o].field).querySelector(".e-groupsort"),["e-ascending","e-icon-ascending"],["e-descending","e-icon-descending"]):sf.base.classList(this.getGHeaderCell(i[o].field).querySelector(".e-groupsort"),["e-descending","e-icon-descending"],["e-ascending","e-icon-ascending"])));for(o=0,a=n.length;o<a;o++)-1!==s.indexOf(n[o])&&r.getColumnHeaderByField(n[o]).setAttribute("aria-grouped","true")},e.prototype.getGHeaderCell=function(e){return this.element&&this.element.querySelector('[ej-mappingname="'+e+'"]')?this.element.querySelector('[ej-mappingname="'+e+'"]').parentElement:null},e.prototype.onGroupAggregates=function(e){for(var t=this.iterateGroupAggregates(e),r=this.groupGenerator.generateRows(t,{}),i=this.parent.getRowsObject().filter((function(e){return!e.isDataRow})),n=r.filter((function(e){return!e.isDataRow})),s=0;s<n.length;s++){var o=n[s],a={cells:o.cells.filter((function(e){return e.isDataCell})),data:o.data,dataUid:i[s]?i[s].uid:""};this.parent.notify("refresh-aggregate-cell",a)}},e.prototype.iterateGroupAggregates=function(e){var t=e instanceof Array?e:[],r=this.parent.getRowsObject(),i=this.parent.getCurrentViewRecords(),n=[],s=r.map((function(e){return"delete"===e.edit&&n.push(e.data),e.changes instanceof Object?e.changes:e.data})),o=this.parent.getPrimaryKeyFieldNames()[0];s=0===t.length?s:t;var a=i.map((function(e){var t,r=sf.data.DataUtil.getObject(o,e);return s.some((function(e){return t=e,r===sf.data.DataUtil.getObject(o,e)}))?t:e})),l=e;if((!l.type||"cancel"!==l.type)&&n.length>0)for(var d=0;d<n.length;d++){var c=a.indexOf(n[d]);a.splice(c,1)}for(var h,p,u=[],f=this.parent.aggregates,g=0;g<f.length;g++)for(var m=f[g],y=0;y<m.columns.length;y++){var v;v={type:m.columns[y].type.toString().toLowerCase(),field:m.columns[y].field},u.push(v)}for(var b=this.parent.groupSettings.columns,C=0;C<b.length;C++)p=h||a,h=sf.data.DataUtil.group(p,b[C],u,null,null);return h},e.prototype.updateExpand=function(e){for(var t=e.uid,r=e.isExpand,i=this.parent.getRowsObject(),n=0;n<i.length;n++){var s=i[n];if(s.uid===t||sf.base.isNullOrUndefined(t)){s.isExpand=r;for(var o=function(e){var r=i[e],n=void 0;if(r.parentUid!==s.uid&&(n=i.filter((function(e){return e.uid===r.parentUid}))[0]),r.parentUid===s.uid?r.visible=s.isExpand:sf.base.isNullOrUndefined(n)||r.parentUid!==n.uid||(n.isExpand&&!0===n.visible?r.visible=!0:n.isExpand&&!1===n.visible&&(r.visible=!1)),sf.base.isNullOrUndefined(t))return"break"},a=n+1;a<i.length;a++){if("break"===o(a))break}}}this.parent.notify(g,{rows:i,args:{isFrozen:!1,rows:i}})},e}(),vi=function(){function t(e,t){this.aria=new _,this.parent=e,this.parent.isDestroyed||(this.focus=t.getService("focus"),this.parent.on(S,this.clickHandler,this),this.parent.on(x,this.destroy,this),this.parent.on(w,this.keyPressHandler,this),this.parent.on("expandchildgrid",this.expand,this),this.parent.on("column-visible-changed",this.refreshColSpan,this))}return t.prototype.clickHandler=function(e){this.toogleExpandcollapse(sf.base.closest(e.target,"td"))},t.prototype.toogleExpandcollapse=function(t){var r,i=this.parent,n=t&&t.classList.contains("e-detailrowcollapse");if(t&&(t.classList.contains("e-detailrowcollapse")||t.classList.contains("e-detailrowexpand")))if(sf.base.isBlazor()&&this.parent.isServerRendered)this.parent.notify("detailclick",t);else{var s=t.parentElement,o=s.getAttribute("data-uid"),a=i.getRowObjectFromUID(o),l=this.parent.getContentTable().querySelector("tbody").children[s.rowIndex+1];if(t.classList.contains("e-detailrowcollapse")){var d=a.data;if(this.isDetailRow(l))l.style.display="",i.notify("detail-state-change",{data:d,childGrid:i.childGrid,detailElement:t,isExpanded:n});else if(i.getDetailTemplate()||i.childGrid){var c=Qt("grid-row"),h=this.parent.createElement("tr",{className:"e-detailrow",attrs:{"data-uid":c}}),p=this.parent.createElement("td",{className:"e-detailcell"}),u=this.parent.getVisibleColumns().length;this.parent.allowRowDragAndDrop&&u++,p.setAttribute("colspan",u.toString());for(var f=new M({isDataRow:!0,isExpand:!0,uid:c,isDetailRow:!0,cells:[new k({cellType:e.CellType.Indent}),new k({isDataCell:!0,visible:!0})]}),m=0,v=i.groupSettings.columns.length;m<v;m++)h.appendChild(this.parent.createElement("td",{className:"e-indentcell"})),f.cells.unshift(new k({cellType:e.CellType.Indent}));if(h.appendChild(this.parent.createElement("td",{className:"e-detailindentcell"})),h.appendChild(p),s.parentNode.insertBefore(h,s.nextSibling),i.detailTemplate){var b=i.element.id+"detailTemplate";Jt(p,i.getDetailTemplate()(d,i,"detailTemplate",b)),sf.base.isBlazor()&&sf.base.updateBlazorTemplate(b,"DetailTemplate",i,!1)}else{(r=new Ct(this.getGridModel(i,a,i.printMode))).query&&(r.query=r.query.clone()),r.parentDetails={parentID:i.element.id,parentPrimaryKeys:i.getPrimaryKeyFieldNames(),parentKeyField:i.childGrid.queryString,parentKeyFieldValue:d[i.childGrid.queryString],parentRowData:d},i.isPrinting&&(r.isPrinting=!0,r.on(g,this.promiseResolve(r),this),r.on(y,this.promiseResolve(r),this)),a.childGrid=r;var C=r.getInjectedModules(),w=i.getInjectedModules();C&&C.length===w.length||r.setInjectedModules(w);var S=this.parent.createElement("div",{id:"child"+Xt(s,"e-grid").length+"_grid"+s.rowIndex+Qt("")});p.appendChild(S),r.appendTo(S)}h.appendChild(p),s.nextSibling?s.parentNode.insertBefore(h,s.nextSibling):s.parentNode.appendChild(h),i.getRows().splice(s.rowIndex+1,0,h),i.getRowsObject().splice(a.index+1,0,f),i.trigger("detailDataBound",{detailElement:p,data:d,childGrid:r}),i.notify("detailDataBound",{rows:i.getRowsObject()})}sf.base.classList(t,["e-detailrowexpand"],["e-detailrowcollapse"]),sf.base.classList(t.firstElementChild,["e-dtdiagonaldown","e-icon-gdownarrow"],["e-dtdiagonalright","e-icon-grightarrow"]),a.isExpand=!0,this.aria.setExpand(t,!0)}else this.isDetailRow(l)&&(l.style.display="none",i.notify("detail-state-change",{data:a.data,childGrid:i.childGrid,detailElement:t,isExpanded:n})),sf.base.classList(t,["e-detailrowcollapse"],["e-detailrowexpand"]),sf.base.classList(t.firstElementChild,["e-dtdiagonalright","e-icon-grightarrow"],["e-dtdiagonaldown","e-icon-gdownarrow"]),a.isExpand=!1,this.aria.setExpand(t,!1)}},t.prototype.getGridModel=function(e,t,r){var i;return e.isPrinting&&t.isExpand&&e.expandedRows&&e.expandedRows[t.index]&&e.expandedRows[t.index].gridModel?(e.expandedRows[t.index].gridModel.hierarchyPrintMode=e.childGrid.hierarchyPrintMode,i=e.expandedRows[t.index].gridModel):e.isPrinting&&e.childGrid.allowPaging?(e.childGrid.allowPaging="CurrentPage"===r,i=e.childGrid):i=e.childGrid,i},t.prototype.promiseResolve=function(e){var t=this;return function(){e.off(g,t.promiseResolve),e.off(y,t.promiseResolve),e.notify("hierarchyprint",{})}},t.prototype.isDetailRow=function(e){return e&&e.classList.contains("e-detailrow")},t.prototype.destroy=function(){var e=this.parent.element;!this.parent.isDestroyed&&e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.parent.off(S,this.clickHandler),this.parent.off(x,this.destroy),this.parent.off(w,this.keyPressHandler),this.parent.off("expandchildgrid",this.expand),this.parent.off("column-visible-changed",this.refreshColSpan))},t.prototype.getTDfromIndex=function(e,t){var r=this.parent.getDataRows()[e];return r&&r.querySelector(t)?r.querySelector(t):null},t.prototype.expand=function(e){isNaN(e)||(e=this.getTDfromIndex(e,".e-detailrowcollapse")),e&&e.classList.contains("e-detailrowcollapse")&&this.toogleExpandcollapse(e)},t.prototype.collapse=function(e){isNaN(e)||(e=this.getTDfromIndex(e,".e-detailrowexpand")),e&&e.classList.contains("e-detailrowexpand")&&this.toogleExpandcollapse(e)},t.prototype.expandAll=function(){this.expandCollapse(!0),this.parent.trigger(c,{requestType:"expandAllComplete",type:c,moduleObj:this})},t.prototype.collapseAll=function(){this.expandCollapse(!1),this.parent.trigger(c,{requestType:"collapseAllComplete",type:c,moduleObj:this})},t.prototype.expandCollapse=function(e){for(var t,r=this.parent.getDataRows(),i=0,n=r.length;i<n;i++)t=r[i].querySelector(".e-detailrowcollapse, .e-detailrowexpand"),e?this.expand(t):this.collapse(t)},t.prototype.keyPressHandler=function(e){var t=this.parent;switch(e.action){case"ctrlDownArrow":this.expandAll();break;case"ctrlUpArrow":this.collapseAll();break;case"altUpArrow":case"altDownArrow":var r=t.allowSelection?t.getSelectedRowIndexes():[];if(r.length){var i=t.getDataRows()[r[r.length-1]].querySelector(".e-detailrowcollapse, .e-detailrowexpand");"altDownArrow"===e.action?this.expand(i):this.collapse(i)}break;case"enter":if(this.parent.isEdit)return;var n=this.focus.getFocusedElement();if(!e.target.classList.contains("e-detailrowcollapse")&&!e.target.classList.contains("e-detailrowexpand"))break;this.toogleExpandcollapse(n)}},t.prototype.refreshColSpan=function(){for(var e=this.parent.contentModule.getTable().querySelectorAll("tr.e-detailrow"),t=this.parent.getVisibleColumns().length,r=0;r<e.length;r++)e[r].querySelector(".e-detailcell").setAttribute("colspan",t+"")},t.prototype.getModuleName=function(){return"detailRow"},t}(),bi=function(){function e(e,t){this.predefinedItems={},this.items=["Add","Edit","Update","Delete","Cancel","Print","Search","ColumnChooser","PdfExport","ExcelExport","CsvExport","WordExport"],this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}return e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization");for(var e=0,t=["Add","Edit","Update","Delete","Cancel","Print","PdfExport","ExcelExport","WordExport","CsvExport"];e<t.length;e++){var r=t[e],i=r.toLowerCase(),n=i[0].toUpperCase()+i.slice(1);this.predefinedItems[r]={id:this.gridID+"_"+i,prefixIcon:"e-"+i,text:this.l10n.getConstant(n),tooltipText:this.l10n.getConstant(n)}}this.predefinedItems.Search={id:this.gridID+"_search",tooltipText:this.l10n.getConstant("Search"),align:"Right",cssClass:"e-search-wrapper"},this.predefinedItems.ColumnChooser={id:this.gridID+"_columnchooser",cssClass:"e-cc e-ccdiv e-cc-toolbar",suffixIcon:"e-columnchooser-btn",text:this.l10n.getConstant("Columnchooser"),tooltipText:this.l10n.getConstant("Columnchooser"),align:"Right"},this.createToolbar()},e.prototype.getToolbar=function(){return this.toolbar.element},e.prototype.destroy=function(){this.toolbar&&!this.toolbar.isDestroyed&&(this.toolbar.element?this.toolbar.destroy():this.parent.destroyTemplate(["toolbarTemplate"]),this.unWireEvent(),this.removeEventListener(),sf.base.remove(this.element))},e.prototype.bindSearchEvents=function(){this.searchElement=this.element.querySelector("#"+this.gridID+"_searchbar"),this.wireEvent(),this.refreshToolbarItems(),this.parent.searchSettings&&this.updateSearchBox()},e.prototype.toolbarCreated=function(){this.element.querySelector(".e-search-wrapper")&&(this.element.querySelector(".e-search-wrapper").innerHTML='<div class="e-input-group e-search" role="search">        <input id="'+this.gridID+'_searchbar" class="e-input" name="input" type="search"         placeholder= "'+this.l10n.getConstant("Search")+'"/>        <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"         tabindex="-1" title="'+this.l10n.getConstant("Search")+'" aria-label= "search"></span>         </div>'),this.bindSearchEvents()},e.prototype.createToolbar=function(){var e=this.getItems();this.toolbar=new sf.navigations.Toolbar({items:e,clicked:this.toolbarClickHandler.bind(this),enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,created:this.toolbarCreated.bind(this)});this.toolbar.isStringTemplate=!0;var t="viewContainerRef";if(this.parent[t]&&(this.toolbar.registeredTemplate={},this.toolbar[t]=this.parent[t]),this.element=this.parent.createElement("div",{id:this.gridID+"_toolbarItems"}),this.parent.toolbarTemplate)if(sf.base.isBlazor()||"string"!=typeof this.parent.toolbarTemplate)if(sf.base.isBlazor()){var r=this.parent.element.id+"toolbarTemplate",i=Jt(this.element,Bt(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate",r)),n=this.getItem(i);this.toolbar.items.push(n),this.toolbar.appendTo(this.element),sf.base.updateBlazorTemplate(this.parent.element.id+"toolbarTemplate","ToolbarTemplate",this.parent)}else Jt(this.element,Bt(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate"));else this.toolbar.appendTo(this.parent.toolbarTemplate),this.element=this.toolbar.element;else this.toolbar.appendTo(this.element);this.parent.element.insertBefore(this.element,this.parent.getHeaderContent())},e.prototype.refreshToolbarItems=function(e){var t=this.parent,r=[],i=[],n=t.editSettings,s=t.currentViewData&&t.currentViewData.length;n.allowAdding?r.push(this.gridID+"_add"):i.push(this.gridID+"_add"),n.allowEditing&&s?r.push(this.gridID+"_edit"):i.push(this.gridID+"_edit"),n.allowDeleting&&s?r.push(this.gridID+"_delete"):i.push(this.gridID+"_delete"),"Batch"===t.editSettings.mode?t.element.querySelectorAll(".e-updatedtd").length&&(n.allowAdding||n.allowEditing)?(r.push(this.gridID+"_update"),r.push(this.gridID+"_cancel")):(i.push(this.gridID+"_update"),i.push(this.gridID+"_cancel")):t.isEdit&&(n.allowAdding||n.allowEditing)?(r=[this.gridID+"_update",this.gridID+"_cancel"],i=[this.gridID+"_add",this.gridID+"_edit",this.gridID+"_delete"]):(i.push(this.gridID+"_update"),i.push(this.gridID+"_cancel")),this.enableItems(r,!0),this.enableItems(i,!1)},e.prototype.getItems=function(){var e=[],t=this.parent.toolbar||[];if("string"==typeof this.parent.toolbar)return[];for(var r=0,i=t;r<i.length;r++){var s=i[r];switch(n()(s)){case"number":e.push(this.getItemObject(this.items[s]));break;case"string":e.push(this.getItemObject(s));break;default:e.push(this.getItem(s))}}return e},e.prototype.getItem=function(e){var t=this.predefinedItems[e.text];return t?sf.base.extend(t,t,e):e},e.prototype.getItemObject=function(e){return this.predefinedItems[e]||{text:e,id:this.gridID+"_"+e}},e.prototype.enableItems=function(e,t){for(var r=0,i=e;r<i.length;r++){var n=i[r],s=this.element.querySelector("#"+n);s&&this.toolbar.enableItems(s.parentElement,t)}},e.prototype.toolbarClickHandler=function(e){var t=this,r=this.parent,i=this.gridID;sf.base.extend(e,{cancel:!1});var n=!sf.base.isBlazor()||this.parent.isJsComponent?e:{item:e.item,cancel:e.cancel,name:e.name},s=e.originalEvent;r.trigger("toolbarClick",n,(function(e){if(e.originalEvent=e.originalEvent?e.originalEvent:s,!e.cancel)switch(!sf.base.isNullOrUndefined(e.item)&&e.item.id){case i+"_print":r.print();break;case i+"_edit":r.startEdit();break;case i+"_update":r.endEdit();break;case i+"_cancel":r.closeEdit();break;case i+"_add":r.addRecord();break;case i+"_delete":r.deleteRecord();break;case i+"_search":e.originalEvent.target.id===i+"_searchbutton"&&t.search();break;case i+"_columnchooser":var n=t.parent.element.querySelector(".e-ccdiv"),o=n.getBoundingClientRect().top,a=n.getBoundingClientRect().left,l=e.originalEvent.target;o=n.getBoundingClientRect().top+n.offsetTop,r.createColumnchooser(a,o,l);break;case"copy":sf.base.isBlazor()&&r.copy();break;case"copyheader":case"copyHeader":sf.base.isBlazor()&&r.copy(!0)}}))},e.prototype.modelChanged=function(e){"edit"===e.module&&this.refreshToolbarItems()},e.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&this.parent.toolbar&&(this.element&&sf.base.remove(this.element),this.render())},e.prototype.keyUpHandler=function(e){13===e.keyCode&&this.search()},e.prototype.search=function(){this.parent.search(this.searchElement.value)},e.prototype.updateSearchBox=function(){this.searchElement&&(this.searchElement.value=this.parent.searchSettings.key)},e.prototype.wireEvent=function(){this.searchElement&&(this.searchBoxObj=new je(this.searchElement),sf.base.EventHandler.add(this.searchElement,"keyup",this.keyUpHandler,this),this.searchBoxObj.wireEvent())},e.prototype.unWireEvent=function(){this.searchElement&&(sf.base.EventHandler.remove(this.searchElement,"keyup",this.keyUpHandler),this.searchBoxObj.unWireEvent())},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(u,this.render,this),this.parent.on(m,this.onPropertyChanged,this),this.parent.on(v,this.updateSearchBox.bind(this)),this.parent.on(b,this.refreshToolbarItems,this),this.parent.on(R,this.refreshToolbarItems,this),this.parent.on(v,this.modelChanged,this),this.parent.on(h,this.refreshToolbarItems,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(u,this.render),this.parent.off(m,this.onPropertyChanged),this.parent.off(v,this.updateSearchBox),this.parent.off(b,this.refreshToolbarItems),this.parent.off(R,this.refreshToolbarItems),this.parent.off(v,this.modelChanged),this.parent.off(h,this.refreshToolbarItems))},e.prototype.getModuleName=function(){return"toolbar"},e}(),Ci=(Hr=function(e,t){return(Hr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Hr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),wi=function(e){function t(t,r){var i=e.call(this,t,r)||this;return i.aggregates={},i.parent=t,i.locator=r,i.modelGenerator=new N(i.parent),i.addEventListener(),i}return Ci(t,e),t.prototype.renderPanel=function(){var e=this.parent.createElement("div",{className:"e-gridfooter"}),t=this.parent.createElement("div",{className:"e-summarycontent"}),r=t;if(this.parent.getFrozenColumns()){var i=this.parent.createElement("div",{className:"e-frozenfootercontent"}),n=this.parent.createElement("div",{className:"e-movablefootercontent"});t.appendChild(i),t.appendChild(n),this.frozenContent=i,this.movableContent=n,r=n}sf.base.Browser.isDevice&&(r.style.overflowX="scroll"),e.appendChild(t),this.setPanel(e),null!=this.parent.getPager()?this.parent.element.insertBefore(e,this.parent.getPager()):this.parent.element.appendChild(e)},t.prototype.renderTable=function(){this.getPanel();var e=this.createContentTable("_footer_table").querySelector(".e-table"),t=this.parent.createElement("tfoot");if(e.appendChild(t),this.parent.getFrozenColumns()){var r=e.cloneNode(!0);this.frozenContent.appendChild(r),this.freezeTable=r,this.movableContent.appendChild(e),sf.base.remove(e.querySelector("colgroup"));var i=this.parent.getHeaderContent().querySelector(".e-movableheader").querySelector("colgroup").cloneNode(!0);e.insertBefore(i,e.querySelector("tbody")),this.setColGroup(i)}this.setTable(e)},t.prototype.renderSummaryContent=function(e,t,r,i){var n=this.parent.dataSource instanceof Array?this.parent.dataSource:this.parent.currentViewData,s=this.modelGenerator.getData(),o=sf.base.isNullOrUndefined(r)?this.modelGenerator.getColumns():this.modelGenerator.getColumns(r,i),a=sf.base.isNullOrUndefined(r)?this.modelGenerator.generateRows(n,e||this.aggregates):this.modelGenerator.generateRows(n,e||this.aggregates,r,i),l=document.createDocumentFragment(),d=new B(this.locator,null,this.parent);d.element=this.parent.createElement("TR",{className:"e-summaryrow"});for(var c=0,h=s.length;c<h;c++){var p=a[c];if(p){var u=d.render(p,o);l.appendChild(u)}}t.tFoot.appendChild(l),this.aggregates=sf.base.isNullOrUndefined(e)?this.aggregates:e},t.prototype.refresh=function(e){if(this.parent.getFrozenColumns()&&(sf.base.remove(this.getPanel()),this.renderPanel(),this.renderTable(),this.freezeTable.tFoot.innerHTML="",this.renderSummaryContent(e,this.freezeTable,0,this.parent.getFrozenColumns())),this.getTable().tFoot.innerHTML="",this.renderSummaryContent(e,this.getTable(),this.parent.getFrozenColumns()),this.parent.getFrozenColumns()){for(var t=[].slice.call(this.parent.element.querySelector(".e-frozenfootercontent").querySelectorAll(".e-summaryrow")),r=[].slice.call(this.parent.element.querySelector(".e-movablefootercontent").querySelectorAll(".e-summaryrow")),i=0;i<t.length;i++){var n=t[i].getBoundingClientRect().height,s=r[i].getBoundingClientRect().height;n<s?(t[i].classList.remove("e-hide"),t[i].style.height=s+"px"):n>s&&(r[i].classList.remove("e-hide"),r[i].style.height=n+"px")}var o=this.frozenContent;o.offsetHeight||(o.style.height=this.getTable().offsetHeight+"px")}this.onScroll()},t.prototype.refreshCol=function(){var e,t=e=this.parent.element.querySelector(".e-gridheader").querySelector("colgroup").cloneNode(!0);this.parent.getFrozenColumns()&&(e=Cr(t,this.parent.getFrozenColumns()),this.freezeTable.replaceChild(t,this.freezeTable.querySelector("colGroup"))),this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e)},t.prototype.onWidthChange=function(e){this.getColFromIndex(e.index).style.width=sf.base.formatUnit(e.width),this.parent.allowResizing&&"resize"===e.module&&this.updateFooterTableWidth(this.getTable())},t.prototype.onScroll=function(e){void 0===e&&(e={left:this.parent.getFrozenColumns()?this.parent.getContent().querySelector(".e-movablecontent").scrollLeft:this.parent.getContent().firstChild.scrollLeft}),this.getTable().parentElement.scrollLeft=e.left},t.prototype.getColFromIndex=function(e){var t=this.parent.getFrozenColumns();return t&&t>e?this.freezeTable.querySelector("colGroup").children[e]:this.getColGroup().children[e-t]},t.prototype.columnVisibilityChanged=function(){this.refresh()},t.prototype.addEventListener=function(){this.parent.on("colgroup-refresh",this.refreshCol,this),this.parent.on("column-width-changed",this.onWidthChange,this),this.parent.on("scroll",this.onScroll,this),this.parent.on("column-visible-changed",this.columnVisibilityChanged,this),this.parent.on("refresh-footer-rendered",this.refreshFooterRenderer,this)},t.prototype.removeEventListener=function(){this.parent.off("colgroup-refresh",this.refreshCol),this.parent.off("column-width-changed",this.onWidthChange),this.parent.off("scroll",this.onScroll),this.parent.off("column-visible-changed",this.columnVisibilityChanged),this.parent.off("refresh-footer-rendered",this.refreshFooterRenderer)},t.prototype.updateFooterTableWidth=function(e){var t=this.parent.getHeaderTable();t&&e&&(e.style.width=t.style.width)},t.prototype.refreshFooterRenderer=function(e){var t=this.onAggregates(e);this.refresh(t)},t.prototype.getIndexByKey=function(e,t){for(var r=this.parent.getPrimaryKeyFieldNames()[0],i=0;i<t.length;i++)if(t[i][r]===e[r])return i;return-1},t.prototype.onAggregates=function(e){e=e instanceof Array?e:[];var t=this.parent.getPrimaryKeyFieldNames()[0],r=[],i=!1,n={},s=this.parent.dataSource instanceof Array?this.parent.dataSource:this.parent.dataSource.dataSource.json.length?this.parent.dataSource.dataSource.json:this.parent.getCurrentViewRecords();if(this.parent.editModule&&(n=this.parent.editModule.getBatchChanges()),Object.keys(n).length){for(var o=0;o<s.length;o++)i=!1,n.changedRecords.length&&this.getIndexByKey(s[o],n.changedRecords)>-1&&(i=!0,r.push(n.changedRecords[this.getIndexByKey(s[o],n.changedRecords)])),n.deletedRecords.length&&this.getIndexByKey(s[o],n.deletedRecords)>-1?i=!0:i||r.push(s[o]);if(n.addedRecords.length)for(o=0;o<n.addedRecords.length;o++)r.push(n.addedRecords[o])}else{if(e.length)r=At(s).map((function(r){var i,n=sf.data.DataUtil.getObject(t,r);return e.some((function(e){return i=e,n===sf.data.DataUtil.getObject(t,e)}))?i:r}));else r=s}var a=e;a.type&&"cancel"===a.type&&(r=s);var l,d={},c=this.parent.aggregates;for(o=0;o<c.length;o++)for(var h=0;h<c[o].columns.length;h++){var p=c[o].columns[h].type.toString();l=Yt(p,r,c[o].columns[h],this.parent),d[c[o].columns[h].field+" - "+p.toLowerCase()]=l}return{result:r,count:r.length,aggregates:d}},t}(j),Si=(Ur=function(e,t){return(Ur=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Ur(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),xi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-summarycell",attrs:{role:"gridcell",tabindex:"-1"}}),t}return Si(t,e),t.prototype.getValue=function(e,t,r){var i;return i=sf.base.isNullOrUndefined(r.type)?r.columnName:r.field+" - "+("string"==typeof r.type?r.type.toLowerCase():""),t[r.columnName]?t[r.columnName][i]:""},t.prototype.evaluate=function(e,t,r,i){var n=t.column;if(this.parent.on("refresh-aggregate-cell",this.refreshWithAggregate(e,t),this),!(n.footerTemplate||n.groupFooterTemplate||n.groupCaptionTemplate))return!0;var s=n.getTemplate(t.cellType),o="",a=this.parent.getColumnByField(r[n.columnName].field);if(!sf.base.isNullOrUndefined(a)&&(r[n.columnName].headerText=a.headerText,a.isForeignColumn())){var l=a.columnData.filter((function(e){return e[r[n.columnName].field]===r[n.columnName].key}))[0];r[n.columnName].foreignKey=l[a.foreignKeyValue]}if(sf.base.isBlazor()){o=this.parent.element.id+n.guid+s.property}return Jt(e,s.fn(r[n.columnName],this.parent,s.property,o)),!1},t.prototype.refreshWithAggregate=function(e,t){var r=this,i=t;return function(t){var n=i,s=n.column.columnName?n.column.columnName:null,o=sf.base.isNullOrUndefined(s)?null:t.cells.filter((function(e){return e.column.columnName===s}))[0];e.parentElement&&e.parentElement.getAttribute("data-uid")===t.dataUid&&s&&s===o.column.columnName&&r.refreshTD(e,o,t.data)}},t}(G),Ri=function(){function t(e,t){this.parent=e,this.locator=t,this.addEventListener()}return t.prototype.getModuleName=function(){return"aggregate"},t.prototype.initiateRender=function(){for(var t=this,r=this.locator.getService("cellRendererFactory"),i=new xi(this.parent,this.locator),n=[e.CellType.Summary,e.CellType.CaptionSummary,e.CellType.GroupSummary],s=0;s<n.length;s++)r.addCellRenderer(n[s],i);this.footerRenderer=new wi(this.parent,this.locator),this.footerRenderer.renderPanel(),this.footerRenderer.renderTable();var o=this.footerRenderer.getPanel();this.parent.element.scrollHeight>this.parent.height&&o&&sf.base.addClass([o],["e-footerpadding"]),this.locator.register("footerRenderer",this.footerRenderer);this.parent.on(f,(function e(){t.prepareSummaryInfo(),t.parent.off(f,e)}),this),this.parent.on(f,this.footerRenderer.refresh,this.footerRenderer)},t.prototype.prepareSummaryInfo=function(){var e=this;if(Ii(this.parent.aggregates,(function(t){var r=(e.parent.getColumnByField(t.field)||{}).type;sf.base.isNullOrUndefined(t.customFormat)||t.setPropertiesSilent({format:t.customFormat}),t.setPropertiesSilent({format:e.getFormatFromType(t.format,r)}),t.setFormatter(e.parent.locale),t.setPropertiesSilent({columnName:t.columnName||t.field})})),sf.base.isBlazor()&&this.parent.isServerRendered)for(var t=Object.keys(this.parent.bulkChanges),r=0;r<t.length;r++)t[r].startsWith("aggregates")&&delete this.parent.bulkChanges[t[r]]},t.prototype.getFormatFromType=function(e,t){if(sf.base.isNullOrUndefined(t)||"string"!=typeof e)return e;var r;switch(t){case"number":r={format:e};break;case"date":r={type:t,skeleton:e};break;case"datetime":r={type:"dateTime",skeleton:e}}return r},t.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){sf.base.isNullOrUndefined(this.footerRenderer)&&this.initiateRender(),this.prepareSummaryInfo(),this.footerRenderer.refresh();var t=new q(this.parent);0===new L(this.parent).getData().length&&t.isEmpty()||this.parent.notify(b,{})}},t.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(u,this.initiateRender,this),this.parent.on(m,this.onPropertyChanged,this),this.parent.on("refresh-aggregates",this.refresh,this))},t.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.footerRenderer.removeEventListener(),this.parent.off(u,this.initiateRender),this.parent.off(f,this.footerRenderer.refresh),this.parent.off(m,this.onPropertyChanged),this.parent.off("refresh-aggregates",this.refresh))},t.prototype.destroy=function(){this.removeEventListener(),sf.base.remove(this.parent.element.querySelector(".e-gridfooter"))},t.prototype.refresh=function(e){var t=e instanceof Array?e:[e];this.parent.notify("refresh-footer-rendered",t),this.parent.groupSettings.columns.length>0&&this.parent.notify("group-aggregates",t)},t}();function Ii(e,t){for(var r=0;r<e.length;r++)for(var i=0;i<e[r].columns.length;i++)t(e[r].columns[i],e[r])}var Ti,Ei,Di,Fi=function(){function e(e,t,r){var i=this;this.fromWheel=!1,this.touchMove=!1,this.options={},this.sentinelInfo={up:{check:function(e,t){var r=e.top-i.containerRect.top;return t.entered=r>=0,r+i.options.pageHeight/2>=0},axis:"Y"},down:{check:function(e,t){i.options.container.clientHeight;var r=e.bottom;return t.entered=e.bottom<=i.containerRect.bottom,r-i.options.pageHeight/2<=i.options.pageHeight/2},axis:"Y"},right:{check:function(e,t){var r=e.right;return t.entered=r<i.containerRect.right,r-i.containerRect.width<=i.containerRect.right},axis:"X"},left:{check:function(e,t){var r=e.left;return t.entered=r>0,r+i.containerRect.width>=i.containerRect.left},axis:"X"}},this.parent=e,this.element=t,this.options=r}return e.prototype.observe=function(e,t){var r=this;this.containerRect=this.options.container.getBoundingClientRect(),sf.base.EventHandler.add(this.options.container,"wheel",(function(){return r.fromWheel=!0}),this),sf.base.EventHandler.add(this.options.container,"scroll",this.virtualScrollHandler(e,t),this)},e.prototype.check=function(e){var t=this.sentinelInfo[e];return t.check(this.element.getBoundingClientRect(),t)},e.prototype.virtualScrollHandler=function(e,t){var r=this,i="chrome"===sf.base.Browser.info.name?200:100,n=0,s=0,o=sf.base.debounce(e,i),a=sf.base.debounce(e,50);return function(e){var i=e.target.scrollTop,l=e.target.scrollLeft,d=n<i?"down":"up";d=s===l?d:s<l?"right":"left",n=i,s=l;var c=r.sentinelInfo[d];if(-1!==r.options.axes.indexOf(c.axis)){var h=r.check(d);if(c.entered&&t(r.element,c,d,{top:i,left:l},r.fromWheel,h),h){var p=o;"X"===c.axis&&(p=a),p({direction:d,sentinel:c,offset:{top:i,left:l},focusElement:document.activeElement})}r.fromWheel=!1}}},e.prototype.setPageHeight=function(e){this.options.pageHeight=e},e}(),Oi=function(){function e(e){this.cOffsets={},this.cache={},this.rowCache={},this.data={},this.groups={},this.parent=e,this.model=this.parent.pageSettings,this.rowModelGenerator=this.parent.allowGrouping?new U(this.parent):new P(this.parent)}return e.prototype.generateRows=function(e,t){var r=t.virtualInfo=t.virtualInfo||this.getData(),i=r.sentinelInfo&&"X"===r.sentinelInfo.axis,n=i||!r.loadNext||r.loadSelf?r.page:r.nextInfo.page,s=[],o=(this.model.pageSize,this.getBlockIndexes(n)),a=[];if(this.checkAndResetCache(t.requestType),wr(this.parent)&&this.parent.vcRows.length)return this.parent.vcRows;if(this.parent.enableColumnVirtualization)for(var l=0;l<r.blockIndexes.length;l++)this.isBlockAvailable(r.blockIndexes[l])&&(this.cache[r.blockIndexes[l]]=this.rowModelGenerator.refreshRows(this.cache[r.blockIndexes[l]]));if(sf.base.isBlazor()&&this.parent.isServerRendered){if(t.virtualStartIndex||0!==Object.keys(this.rowCache).length){if(t.virtualStartIndex){var d=t.startIndex,c=[];for(l=0;l<Object.keys(this.rowCache).length;l++)c.push(Number(Object.keys(this.rowCache)[l]));for(l=0;l<e.length;l++){p=[];var h=c.indexOf(d);p.push(e[l]),-1===h&&(this.rowCache[d]=this.rowModelGenerator.generateRows(p,{startIndex:d})[0]),d++}}}else{for(var l=0;l<e.length;l++){var p;(p=[]).push(e[l]),this.rowCache[l]=this.rowModelGenerator.generateRows(p,{startIndex:l})[0]}for(var u=0,l=0;l<this.parent.pageSettings.pageSize;l++)s[u]=this.rowCache[l],u++}if(!sf.base.isNullOrUndefined(t.virtualStartIndex))for(u=0,l=t.startIndex;l<t.endIndex;l++)s[u]=this.rowCache[l],u++}else{var f=r.blockIndexes;for(l=0;l<f.length;l++){if(!this.isBlockAvailable(f[l])){var g=this.rowModelGenerator.generateRows(e,{virtualInfo:r,startIndex:this.getStartIndex(f[l],e)});wr(this.parent)&&!this.parent.vcRows.length&&(this.parent.vRows=g,this.parent.vcRows=g);var m=void 0;wr(this.parent)?(m=this.model.pageSize/2,this.isBlockAvailable(o[0])||(this.cache[o[0]]=g.slice(0,m)),this.isBlockAvailable(o[1])||(this.cache[o[1]]=g.slice(m,this.model.pageSize))):(m=~~Math.max(g.length,this.model.pageSize)/2,this.isBlockAvailable(o[0])||(this.cache[o[0]]=g.slice(0,m)),this.isBlockAvailable(o[1])||(this.cache[o[1]]=g.slice(m)))}this.parent.groupSettings.columns.length&&!i&&this.cache[f[l]]&&(this.cache[f[l]]=this.updateGroupRow(this.cache[f[l]],f[l])),s.push.apply(s,this.cache[f[l]]),this.isBlockAvailable(f[l])&&a.push(f[l])}r.blockIndexes=a}if(!sf.base.isBlazor()||sf.base.isBlazor()&&!this.parent.isServerRendered){this.parent.allowGrouping?this.parent.currentViewData.records=s.map((function(e){return e.data})):this.parent.currentViewData=s.map((function(e){return e.data}))}return s},e.prototype.getBlockIndexes=function(e){return[e+(e-1),2*e]},e.prototype.getPage=function(e){return e%2==0?e/2:(e+1)/2},e.prototype.isBlockAvailable=function(e){return e in this.cache},e.prototype.getData=function(){return{page:this.model.currentPage,blockIndexes:this.getBlockIndexes(this.model.currentPage),direction:"down",columnIndexes:this.parent.getColumnIndexesInView()}},e.prototype.getStartIndex=function(e,t,r){void 0===r&&(r=!0);var i=e%2==0,n=(this.getPage(e)-1)*this.model.pageSize;return r||!i?n:n+~~(this.model.pageSize/2)},e.prototype.getColumnIndexes=function(e){var t=this;void 0===e&&(e=this.parent.getHeaderContent().querySelector(".e-headercontent")),this.parent.getFrozenColumns()&&(e=e.querySelector(".e-movableheader"));var r=[],i=0|e.scrollLeft,n=Object.keys(this.cOffsets),s=e.getBoundingClientRect().width;i=Math.min(this.cOffsets[n.length-1]-s,i);var o=sf.base.Browser.isDevice?2*s:s/2,a=i+s+(0===i?o:0);return n.some((function(e,n,s){var l=Number(e),d=t.cOffsets[e];return i-o<=d&&a+o>=d&&r.push(l),a+o<d})),sf.base.isBlazor()&&this.parent.isServerRendered&&(this.parent.contentModule.startColIndex=r[0],this.parent.contentModule.endColIndex=r[r.length-1]),this.addFrozenIndex(r),r},e.prototype.addFrozenIndex=function(e){if(this.parent.getFrozenColumns()&&this.parent.enableColumnVirtualization&&0===e[0])for(var t=0;t<this.parent.getFrozenColumns();t++)e.push(e[e.length-1]+1)},e.prototype.checkAndResetCache=function(e){var t=["paging","refresh","sorting","filtering","searching","grouping","ungrouping","reorder","save","delete"];this.parent.getFrozenColumns()&&this.parent.frozenRows&&this.parent.enableColumnVirtualization&&"reorder"===e&&(t=["paging","refresh","sorting","filtering","searching","grouping","ungrouping","save","delete"]);var r=t.some((function(t){return e===t}));return r&&(this.cache={},this.data={},this.groups={}),r},e.prototype.refreshColOffsets=function(){var e=this,t=0;this.cOffsets={};for(var r=this.parent.groupSettings.columns.length,i=this.parent.columns,n=i.length,s=this.parent.groupSettings.columns,o=0;o<s.length;o++)this.cOffsets[o]=30+(0|this.cOffsets[o-1]);for(var a,l=Array.apply(null,Array(n)).map((function(){return t++})),d=0;d<l.length;d++)l[d]=l[d]+r,this.cOffsets[l[d]]=(0|this.cOffsets[l[d]-1])+((a=i[d]).visible&&(e.parent.groupSettings.showGroupedColumn?a.visible:e.parent.groupSettings.columns.indexOf(a.field)<0)?parseInt(i[d].width,10):0)},e.prototype.updateGroupRow=function(e,t){for(var r=e[0],i=[],n=Object.keys(this.cache),s=0;s<n.length;s++)Number(n[s])<t&&(i=i.concat(this.cache[n[s]]));return r&&r.isDataRow||t%2==0?e:this.iterateGroup(e,i)},e.prototype.iterateGroup=function(e,t){var r=e[0],i=0;return r&&r.isDataRow||e.some((function(e){return t.some((function(t,r){var n=t&&void 0!==t.data.field&&t.data.field===e.data.field&&t.data.key===e.data.key;return n&&(i=r),n}))}))&&(e.shift(),e=this.iterateGroup(e,t.slice(i))),e},e.prototype.getRows=function(){for(var e=[],t=!(!sf.base.isBlazor()||!this.parent.isServerRendered),r=t?Object.keys(this.rowCache):Object.keys(this.cache),i=0;i<r.length;i++)e=t?e.concat(this.rowCache[r[i]]):e.concat(this.cache[r[i]]);return e},e}(),Mi=(Ti=function(e,t){return(Ti=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Ti(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ki=function(t){function r(e,r){var i=t.call(this,e,r)||this;return i.prevHeight=0,i.startIndex=0,i.preStartIndex=0,i.preventEvent=!1,i.actions=["filtering","searching","grouping","ungrouping"],i.offsets={},i.tmpOffsets={},i.virtualEle=new Bi,i.offsetKeys=[],i.isFocused=!1,i.isSelection=!1,i.isBottom=!1,i.rndrCount=0,i.empty=void 0,i.isCancel=!1,i.requestTypes=["beginEdit","cancel","delete","add","save"],i.isNormaledit="Normal"===i.parent.editSettings.mode,i.virtualData={},i.emptyRowData={},i.vfColIndex=[],i.locator=r,i.eventListener("on"),i.parent.on("column-visible-changed",i.setVisible,i),i.vgenerator=i.generator,i}return Mi(r,t),r.prototype.renderTable=function(){this.header=this.locator.getService("rendererFactory").getRenderer(e.RenderType.Header),t.prototype.renderTable.call(this),this.virtualEle.table=this.getTable(),this.virtualEle.content=this.content=this.getPanel().querySelector(".e-content"),this.virtualEle.renderWrapper(this.parent.height),this.virtualEle.renderPlaceHolder(),this.parent.getFrozenColumns()||(this.virtualEle.wrapper.style.position="absolute");var r=this.parent.dataSource instanceof sf.data.DataManager&&!this.parent.dataSource.dataSource.offline,i={container:this.parent.getFrozenColumns()?this.parent.getMovableVirtualContent():this.content,pageHeight:2*this.getBlockHeight(),debounceEvent:r,axes:this.parent.enableColumnVirtualization?["X","Y"]:["Y"]};this.observer=new Fi(this.parent,this.virtualEle.wrapper,i)},r.prototype.renderEmpty=function(e){this.getTable().appendChild(e),this.virtualEle.adjustTable(0,0)},r.prototype.refreshMvTbalTransform=function(){var e=this.parent.getMovableVirtualContent(),t=this.parent.getFrozenVirtualContent(),r=Mr(e.firstElementChild),i=Mr(t.firstElementChild);e.scrollTop>0&&r.height!==i.height&&(e.firstElementChild.style.transform="translate("+r.width+"px, "+i.height+"px)")},r.prototype.scrollListener=function(e){if(this.scrollAfterEdit(),this.parent.enablePersistence&&(this.parent.scrollPosition=e.offset),this.preventEvent||this.parent.isDestroyed)this.preventEvent=!1;else{sf.base.isNullOrUndefined(document.activeElement)?this.isFocused=!1:this.isFocused=this.content===sf.base.closest(document.activeElement,".e-content")||this.content===document.activeElement,this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&"X"===e.sentinel.axis&&this.refreshMvTbalTransform();var t=e.sentinel,r=this.preStartIndex,i=this.parent.getColumnIndexesInView(),n=this.currentInfo=this.getInfoFromView(e.direction,t,e.offset);if(sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.enableColumnVirtualization&&JSON.stringify(i)!==JSON.stringify(n.columnIndexes)){this.parent.refreshHeader();var s=this.getColumnOffset(this.startColIndex-1),o=this.getColumnOffset(this.endColIndex-1)-s+"";this.parent.notify("refresh-virtual-indices",{requestType:"virtualscroll",startColumnIndex:n.columnIndexes[0],endColumnIndex:n.columnIndexes[n.columnIndexes.length-1],axis:"X",VTablewidth:o,translateX:this.getColumnOffset(n.columnIndexes[0]-1)}),this.parent.notify("setcolumnstyles",{})}if(wr(this.parent)&&!sf.base.isBlazor())return"Y"===t.axis&&n.blockIndexes&&this.prevInfo.blockIndexes.toString()===n.blockIndexes.toString()&&"up"===e.direction&&2!==n.blockIndexes[n.blockIndexes.length-1]?void 0:(n.event="refresh-virtual-block",sf.base.isNullOrUndefined(n.offsets)||(n.offsets.top=this.content.scrollTop),void this.parent.notify(n.event,{requestType:"virtualscroll",virtualInfo:n,focusElement:e.focusElement}));if((!sf.base.isBlazor()||sf.base.isBlazor()&&!this.parent.isServerRendered)&&this.prevInfo&&("Y"===t.axis&&this.prevInfo.blockIndexes.toString()===n.blockIndexes.toString()||"X"===t.axis&&this.prevInfo.columnIndexes.toString()===n.columnIndexes.toString()))return sf.base.Browser.isIE&&this.parent.hideSpinner(),this.requestType="virtualscroll"===this.requestType?this.empty:this.requestType,void this.restoreEdit();if(this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization?n.columnIndexes:[]),!sf.base.isBlazor()||sf.base.isBlazor()&&!this.parent.isServerRendered?this.parent.pageSettings.currentPage=n.loadNext&&!n.loadSelf?n.nextInfo.page:n.page:sf.base.isBlazor()&&this.parent.isServerRendered&&this.preStartIndex!==r&&this.parent.pageSettings.currentPage===n.currentPage&&this.parent.notify("refresh-virtual-indices",{requestType:"virtualscroll",virtualStartIndex:n.startIndex,virtualEndIndex:n.endIndex,axis:"Y",RHeight:this.parent.getRowHeight()}),this.parent.getFrozenColumns()&&this.parent.enableColumnVirtualization){var a=Math.ceil(this.getTotalBlocks()/2);if(this.parent.pageSettings.currentPage===a&&"Y"===e.sentinel.axis&&this.rndrCount++,"Y"===e.sentinel.axis){if(this.parent.pageSettings.currentPage===a&&this.rndrCount>1)return void(this.rndrCount=0);this.parent.pageSettings.currentPage!==a&&this.parent.pageSettings.currentPage!==a-1&&(this.rndrCount=0)}}!sf.base.isBlazor()||sf.base.isBlazor()&&!this.parent.isServerRendered?(this.requestType="virtualscroll",this.parent.notify(n.event,{requestType:"virtualscroll",virtualInfo:n,focusElement:e.focusElement})):this.preStartIndex!==r&&this.parent.pageSettings.currentPage!==n.currentPage&&(this.parent.pageSettings.currentPage=n.currentPage,this.parent.notify(n.event,{requestType:"virtualscroll",virtualStartIndex:n.startIndex,virtualEndIndex:n.endIndex,axis:"Y",RHeight:this.parent.getRowHeight()}))}},r.prototype.block=function(e){return this.vgenerator.isBlockAvailable(e)},r.prototype.getInfoFromView=function(e,t,r){var i=!1,n=[],s={direction:e,sentinelInfo:t,offsets:r,startIndex:this.preStartIndex,endIndex:this.preEndIndex},o=this.parent.height.toString().indexOf("%")<0?this.content.getBoundingClientRect().height:this.parent.element.getBoundingClientRect().height;s.page=this.getPageFromTop(r.top+o,s),s.blockIndexes=n=this.vgenerator.getBlockIndexes(s.page),s.loadSelf=!this.vgenerator.isBlockAvailable(n[s.block]);var a=this.ensureBlocks(s);if("upArrow"===this.activeKey&&s.blockIndexes.toString()!==a.toString()){var l=a[a.length-1];-1===s.blockIndexes.indexOf(l)&&(i=!0)}if(s.blockIndexes=a,s.loadNext=!a.filter((function(e){return-1===n.indexOf(e)})).every(this.block.bind(this)),s.event=s.loadNext||s.loadSelf?b:"refresh-virtual-block",s.nextInfo=s.loadNext?{page:Math.max(1,s.page+("down"===e?1:-1))}:{},i&&(s.blockIndexes=[s.blockIndexes[0]-1,s.blockIndexes[0],s.blockIndexes[0]+1]),"downArrow"===this.activeKey){var d=Math.ceil(this.rowIndex/this.getBlockSize());1!==d&&(s.blockIndexes[1]!==d||s.blockIndexes.length<3)&&(s.blockIndexes=[d-1,d,d+1])}if(s.columnIndexes="X"===t.axis?this.vgenerator.getColumnIndexes():this.parent.getColumnIndexesInView(),this.parent.enableColumnVirtualization&&"X"===t.axis&&(s.event="refresh-virtual-block"),sf.base.isBlazor()&&this.parent.isServerRendered){var c=this.parent.getRowHeight(),h=r.top/c,p=o/c,u=h+p,f=this.parent.pageSettings.pageSize/4;if("down"===s.direction){var g=Math.round(u)-Math.round(f);if(sf.base.isNullOrUndefined(s.startIndex)||u>s.startIndex+Math.round(this.parent.pageSettings.pageSize/2+f)&&s.endIndex!==this.count){s.startIndex=g>=0?Math.round(g):0,s.startIndex=s.startIndex>h?Math.floor(h):s.startIndex;var m=s.startIndex+this.parent.pageSettings.pageSize;s.startIndex=m<u?Math.ceil(u)-this.parent.pageSettings.pageSize:s.startIndex,s.endIndex=m<this.count?m:this.count,s.startIndex=m>=this.count?s.endIndex-this.parent.pageSettings.pageSize:s.startIndex,s.currentPage=Math.ceil(s.endIndex/this.parent.pageSettings.pageSize),this.setKeyboardNavIndex()}}else if("up"===s.direction){if(s.startIndex&&s.endIndex)if(h<Math.round((s.startIndex*c+f*c)/c)){var y=f>p?f:p+p/4;m=Math.round(h+y);s.endIndex=m<this.count?m:this.count;g=s.endIndex-this.parent.pageSettings.pageSize;s.startIndex=g>0?g:0,s.endIndex=g<0?this.parent.pageSettings.pageSize:s.endIndex,s.currentPage=Math.ceil(s.startIndex/this.parent.pageSettings.pageSize),this.setKeyboardNavIndex()}}this.preStartIndex=this.startIndex=s.startIndex,this.preEndIndex=s.endIndex,s.event=s.currentPage!==this.parent.pageSettings.currentPage?b:"refresh-virtual-block"}return s},r.prototype.setKeyboardNavIndex=function(){this.blazorDataLoad=!0,"downArrow"!==this.activeKey&&"upArrow"!==this.activeKey||(this.blzRowIndex="downArrow"===this.activeKey?this.rowIndex+1:this.rowIndex-1,document.activeElement.blur())},r.prototype.ensureBlocks=function(e){var t,r=this,i=e.blockIndexes[e.block],n=i,s=Math.max,o="down"===e.direction?[s(i,1),++i,++i]:[s(i-1,1),i,i+1];return this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&("X"===e.sentinelInfo.axis||"Y"===e.sentinelInfo.axis&&e.page===this.prevInfo.page)&&(o=this.prevInfo.blockIndexes),o=o.filter((function(e,t){return o.indexOf(e)===t})),this.prevInfo.blockIndexes.toString()===o.toString()||((e.loadSelf||"down"===e.direction&&this.isEndBlock(n))&&(o=this.vgenerator.getBlockIndexes(e.page)),o.some((function(e,i){var n=e===(wr(r.parent)?r.getGroupedTotalBlocks():r.getTotalBlocks());return n&&(t=i),n})),void 0!==t&&(o=o.slice(0,t+1),0===e.block&&1===o.length&&this.vgenerator.isBlockAvailable(o[0]-1)&&(o=[o[0]-1,o[0]]))),o},r.prototype.vfTblTransform=function(e,t,r,i,n,s){for(var o=Math.ceil(this.getTotalBlocks()/2),a=o===this.parent.pageSettings.currentPage&&this.parent.enableColumnVirtualization,l=[].slice.call(this.parent.getContent().querySelectorAll(".e-virtualtable")),d=0;d<l.length;d++)if(!(0===d&&"virtualscroll"===i.requestType&&"X"===e.sentinelInfo.axis||o!==this.parent.pageSettings.currentPage&&this.parent.enableColumnVirtualization&&(t>0||r>0&&0===t))){var c=a&&0===d?0:n;this.virtualEle.wrapper=l[d],this.virtualEle.adjustTable(c,s)}},r.prototype.appendContent=function(e,t,r){var i=this,n=this.parent.enableColumnVirtualization&&0!==this.parent.getFrozenColumns();this.checkFirstBlockColIndexes(r);var s=r.virtualInfo.sentinelInfo&&"Y"===r.virtualInfo.sentinelInfo.axis&&this.currentInfo.page&&this.currentInfo.page!==r.virtualInfo.page?this.currentInfo:r.virtualInfo;this.prevInfo=this.prevInfo||r.virtualInfo;var o=s.columnIndexes[0]-1;n&&s.columnIndexes[0]===this.parent.getFrozenColumns()&&(o=s.columnIndexes[0]-this.parent.getFrozenColumns()-1);var a,l=this.getColumnOffset(o),d=s.blockIndexes;this.parent.groupSettings.columns.length&&this.refreshOffsets(),"100%"===this.parent.height&&(this.parent.element.style.height="100%");var c,h=this.parent.height.toString().indexOf("%")<0?this.content.getBoundingClientRect().height:this.parent.element.getBoundingClientRect().height,p=0;if(this.parent.getFrozenColumns()){var u=this.parent.getMovableVirtualContent(),f=u.scrollLeft,g=u.scrollTop;p=this.getTranslateY(u.scrollTop,h,s),this.vfTblTransform(s,f,g,r,l,p)}else this.requestTypes.some((function(e){return e===i.requestType}))||(p=this.getTranslateY(this.content.scrollTop,h,s),this.virtualEle.adjustTable(l,p));if(this.parent.enableColumnVirtualization&&!this.parent.getFrozenColumns()&&this.header.virtualEle.adjustTable(l,0),this.parent.enableColumnVirtualization){var m=s.columnIndexes;a=this.getColumnOffset(m[m.length-1])-this.getColumnOffset(m[0]-1)+"",this.header.virtualEle.setWrapperWidth(a)}if(this.virtualEle.setWrapperWidth(a,sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name),sf.base.isNullOrUndefined(e.parentNode)||sf.base.remove(e),(c=this.parent.getFrozenColumns()&&!r.renderMovableContent?this.parent.getFrozenVirtualContent().querySelector("tbody"):this.parent.getFrozenColumns()&&r.renderMovableContent?this.parent.getMovableVirtualContent().querySelector("tbody"):this.parent.element.querySelector(".e-content").querySelector("tbody"))&&(sf.base.remove(c),e=null),(e=this.parent.createElement("tbody")).appendChild(t),this.parent.frozenRows&&"virtualscroll"===r.requestType&&1===this.parent.pageSettings.currentPage)for(var y=0;y<this.parent.frozenRows;y++)e.children[0].remove();if(this.parent.getFrozenColumns()?(r.renderMovableContent?(this.parent.getMovableVirtualContent().querySelector(".e-table").appendChild(e),this.requestType="virtualscroll"===this.requestType?this.empty:this.requestType):this.parent.getFrozenVirtualContent().querySelector(".e-table").appendChild(e),this.vfColIndex.length&&(r.virtualInfo.columnIndexes=s.columnIndexes=sf.base.extend([],this.vfColIndex),this.vfColIndex=r.renderMovableContent?[]:this.vfColIndex)):(this.getTable().appendChild(e),this.requestType="virtualscroll"===this.requestType?this.empty:this.requestType),this.parent.groupSettings.columns.length){if(!wr(this.parent)&&"up"===s.direction){var v=this.offsets[this.getTotalBlocks()]-this.prevHeight;this.preventEvent=!0;var b=this.content.scrollTop;this.content.scrollTop=b+v}this.setVirtualHeight(),this.observer.setPageHeight(this.getOffset(d[d.length-1])-this.getOffset(d[0]-1))}this.prevInfo=s,this.isFocused&&"downArrow"!==this.activeKey&&"upArrow"!==this.activeKey&&this.content.focus();var C=Math.ceil(this.getTotalBlocks()/2);this.isBottom&&(this.isBottom=!1,this.parent.getContent().firstElementChild.scrollTop=this.offsets[this.offsetKeys.length-1]),this.parent.pageSettings.currentPage===C&&1===d.length&&(this.isBottom=!0,this.parent.getContent().firstElementChild.scrollTop=this.offsets[this.offsetKeys.length-2]),this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&"virtualscroll"===r.requestType&&"X"===r.virtualInfo.sentinelInfo.axis&&this.refreshMvTbalTransform(),"virtualscroll"===r.requestType&&"X"===r.virtualInfo.sentinelInfo.axis&&this.parent.notify(I,{}),this.focusCell(r),this.restoreEdit(),this.restoreAdd()},r.prototype.checkFirstBlockColIndexes=function(e){if(this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&0===e.virtualInfo.columnIndexes[0]){var t=[];if(!e.renderMovableContent&&e.virtualInfo.columnIndexes.length>this.parent.getFrozenColumns()){this.vfColIndex=e.virtualInfo.columnIndexes;for(var r=0;r<this.parent.getFrozenColumns();r++)t.push(r);e.virtualInfo.columnIndexes=t}else e.renderMovableContent&&(this.vfColIndex.length||(this.vfColIndex=sf.base.extend([],e.virtualInfo.columnIndexes)),e.virtualInfo.columnIndexes=sf.base.extend([],this.vfColIndex),e.virtualInfo.columnIndexes.splice(0,this.parent.getFrozenColumns()))}},r.prototype.focusCell=function(e){if("upArrow"===this.activeKey||"downArrow"===this.activeKey){var t=this.parent.getRowByIndex(this.rowIndex);t.cells[this.cellIndex].focus({preventScroll:!0}),this.parent.selectRow(parseInt(t.getAttribute("aria-rowindex"),10)),this.activeKey=this.empty}},r.prototype.restoreEdit=function(){if(this.isNormaledit){if(this.parent.editSettings.allowEditing&&this.parent.editModule&&!sf.base.isNullOrUndefined(this.editedRowIndex)){var e=this.getRowByIndex(this.editedRowIndex);if(Object.keys(this.virtualData).length&&e&&!this.content.querySelector(".e-editedrow")){var t=e.getBoundingClientRect().top;t<this.content.offsetHeight&&t>this.parent.getRowHeight()&&(this.parent.isEdit=!1,this.parent.editModule.startEdit(e))}if(e&&this.content.querySelector(".e-editedrow")&&!Object.keys(this.virtualData).length){var r=sf.base.extend({},this.getRowObjectByIndex(this.editedRowIndex));this.virtualData=this.getVirtualEditedData(r)}}this.restoreAdd()}},r.prototype.getVirtualEditedData=function(e){var t=this.content.querySelector(".e-gridform");return this.parent.editModule.getCurrentEditedData(t,e)},r.prototype.restoreAdd=function(){if(this.isNormaledit&&this.isAdd&&!this.content.querySelector(".e-addedrow")){var e="Top"===this.parent.editSettings.newRowPosition&&this.content.scrollTop<this.parent.getRowHeight(),t="Bottom"===this.parent.editSettings.newRowPosition&&this.parent.pageSettings.currentPage===this.maxPage;(e||t)&&(this.parent.isEdit=!1,this.parent.addRecord())}},r.prototype.onDataReady=function(e){if(sf.base.isNullOrUndefined(e.count)||(this.count=e.count,this.maxPage=Math.ceil(e.count/this.parent.pageSettings.pageSize)),this.vgenerator.checkAndResetCache(e.requestType),["refresh","filtering","searching","grouping","ungrouping","reorder",void 0].some((function(t){return e.requestType===t}))&&this.refreshOffsets(),this.parent.getFrozenColumns()&&this.parent.enableColumnVirtualization){var t=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-table"));this.header.virtualEle.table=t[1]}this.setVirtualHeight(),this.resetScrollPosition(e.requestType)},r.prototype.setVirtualHeight=function(e){var t=this.parent.enableColumnVirtualization?this.getColumnOffset(this.parent.columns.length+this.parent.groupSettings.columns.length-1)+"px":"100%";if(this.parent.getFrozenColumns()){var r=this.parent.enableColumnVirtualization?"auto":t;this.virtualEle.placeholder=this.parent.getFrozenVirtualContent().querySelector(".e-virtualtrack"),this.virtualEle.setVirtualHeight(this.offsets[this.getTotalBlocks()-2],r),this.virtualEle.placeholder=this.parent.getMovableVirtualContent().querySelector(".e-virtualtrack"),this.virtualEle.setVirtualHeight(this.offsets[this.getTotalBlocks()-2],t)}else{var i=sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.groupSettings.columns.length&&e?e:this.offsets[wr(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks()];this.virtualEle.setVirtualHeight(i,t)}this.parent.enableColumnVirtualization&&this.header.virtualEle.setVirtualHeight(1,t)},r.prototype.getPageFromTop=function(e,t){var r=this,i=wr(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks(),n=0;this.offsets[i],this.prevHeight;return this.offsetKeys.some((function(s){var o=Number(s),a=e<=r.offsets[s]||o===i&&e>r.offsets[s];return a&&(t.block=o%2==0?1:0,n=Math.max(1,Math.min(r.vgenerator.getPage(o),r.maxPage))),a})),n},r.prototype.getTranslateY=function(e,t,r,i){void 0===r&&((r={page:this.getPageFromTop(e+t,{})}).blockIndexes=this.vgenerator.getBlockIndexes(r.page));var n=(r.blockIndexes[0]||1)-1,s=this.getOffset(n),o=this.getOffset(r.blockIndexes[r.blockIndexes.length-1]);i&&(r=this.prevInfo);var a=s>e?this.getOffset(n-1):o<e+t?this.getOffset(n+1):s,l=this.offsets[r.blockIndexes[r.blockIndexes.length-1]]-this.tmpOffsets[r.blockIndexes[0]];return a+l>this.offsets[wr(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks()]&&(a-=a+l-this.offsets[this.getTotalBlocks()]),a},r.prototype.getOffset=function(e){return Math.min(0|this.offsets[e],0|this.offsets[this.maxBlock])},r.prototype.onEntered=function(){var e=this;return function(t,r,i,n,s,o){sf.base.Browser.isIE&&!s&&o&&!e.preventEvent&&e.parent.showSpinner();var a="X"===r.axis,l=e.prevInfo.offsets?e.prevInfo.offsets.top:null,d=e.content.getBoundingClientRect().height,c=e.getColumnOffset(a?e.vgenerator.getColumnIndexes()[0]-1:e.prevInfo.columnIndexes[0]-1),h=e.getTranslateY(n.top,d,a&&l===n.top?e.prevInfo:void 0,!0);if(sf.base.isBlazor()&&e.parent.isServerRendered&&e.currentInfo&&e.currentInfo.startIndex&&a&&(h=e.currentInfo.startIndex*e.parent.getRowHeight()),e.virtualEle.adjustTable(c,Math.min(h,e.offsets[e.maxBlock])),sf.base.isBlazor()&&e.parent.isServerRendered&&a&&e.parent.notify("setcolumnstyles",{refresh:!0}),e.parent.getFrozenColumns()&&!a){var p=e.parent.getMovableVirtualContent().scrollLeft;if(e.parent.enableColumnVirtualization&&p>0)e.parent.getFrozenVirtualContent().querySelector(".e-virtualtable").style.transform="translate(0px, "+Math.min(h,e.offsets[e.maxBlock])+"px)";else e.parent.getFrozenVirtualContent().querySelector(".e-virtualtable").style.transform="translate("+c+"px, "+Math.min(h,e.offsets[e.maxBlock])+"px)"}e.parent.enableColumnVirtualization&&(!sf.base.isBlazor()||sf.base.isBlazor()&&!e.parent.isServerRendered)&&e.header.virtualEle.adjustTable(c,0)}},r.prototype.dataBound=function(){this.isSelection&&"upArrow"!==this.activeKey&&"downArrow"!==this.activeKey?this.parent.selectRow(this.selectedRowIndex):sf.base.isBlazor()||(this.activeKey=this.empty)},r.prototype.rowSelected=function(){this.isSelection=!1},r.prototype.eventListener=function(e){var t=this;this.parent[e](f,this.onDataReady,this),this.parent.addEventListener(h,this.dataBound.bind(this)),this.parent.addEventListener(d,this.actionBegin.bind(this)),this.parent.addEventListener(c,this.actionComplete.bind(this)),this.parent.addEventListener("rowSelected",this.rowSelected.bind(this)),this.parent[e]("refresh-virtual-block",this.refreshContentRows,this),this.parent[e]("select-virtual-Row",this.selectVirtualRow,this),this.parent[e]("virtaul-cell-focus",this.virtualCellFocus,this),this.parent[e]("virtual-scroll-edit-action-begin",this.editActionBegin,this),this.parent[e]("virtual-scroll-add-action-begin",this.addActionBegin,this),this.parent[e]("virtual-scroll-edit",this.restoreEdit,this),this.parent[e]("virtual-scroll-edit-success",this.editSuccess,this),this.parent[e]("refresh-virtual-cache",this.refreshCache,this),this.parent[e]("edit-reset",this.resetIsedit,this),this.parent[e]("get-virtual-data",this.getVirtualData,this),this.parent[e]("virtual-scroll-edit-cancel",this.editCancel,this);for(var r=this.actions,i=0;i<r.length;i++)this.parent[e](r[i]+"-begin",this.onActionBegin,this);this.parent.on(g,(function e(){t.observer.observe((function(e){return t.scrollListener(e)}),t.onEntered());var r=t.parent;if(r.enablePersistence&&r.scrollPosition){t.content.scrollTop=r.scrollPosition.top;var i={direction:"down",sentinel:t.observer.sentinelInfo.down,offset:r.scrollPosition,focusElement:r.element};t.scrollListener(i),r.enableColumnVirtualization&&(t.content.scrollLeft=r.scrollPosition.left)}t.parent.off(g,e)}),this)},r.prototype.getVirtualData=function(e){e.virtualData=this.virtualData,e.isAdd=this.isAdd,e.isCancel=this.isCancel},r.prototype.editCancel=function(e){var t=this.getEditedDataIndex(e.data);sf.base.isNullOrUndefined(t)||(e.data=this.parent.getCurrentViewRecords()[t])},r.prototype.editSuccess=function(e){this.isNormaledit&&(!this.isAdd&&e.data&&this.updateCurrentViewData(e.data),this.isAdd=!1)},r.prototype.updateCurrentViewData=function(e){var t=this.getEditedDataIndex(e);sf.base.isNullOrUndefined(t)||(this.parent.getCurrentViewRecords()[t]=e)},r.prototype.getEditedDataIndex=function(e){var t,r=this.parent.getPrimaryKeyFieldNames()[0];return this.parent.getCurrentViewRecords().filter((function(i,n){i[r]===e[r]&&(t=n)})),t},r.prototype.actionBegin=function(e){"virtualscroll"!==e.requestType&&(this.requestType=e.requestType)},r.prototype.virtualCellFocus=function(e){var t=document.activeElement;if(t.classList.contains("e-rowcell")&&e&&("upArrow"===e.action||"downArrow"===e.action)){var r=parseInt(t.parentElement.getAttribute("aria-rowindex"),10);if(e&&("downArrow"===e.action||"upArrow"===e.action)){var i=this.parent.getContent().firstElementChild;"downArrow"===e.action?r+=1:r-=1,this.rowIndex=r,this.cellIndex=parseInt(t.getAttribute("aria-colindex"),10);var n=this.parent.getRowByIndex(r),s=this.parent.pageSettings.currentPage,o=Math.floor(i.offsetHeight/this.parent.getRowHeight())-1,a=!1;sf.base.isNullOrUndefined(n)&&(a=!0,("downArrow"===e.action&&s===this.maxPage-1||"upArrow"===e.action&&1===s)&&(a=!1)),a||Br(n,this.parent)&&"downArrow"===e.action||Pr(n,2*this.parent.getRowHeight())&&"upArrow"===e.action?(this.activeKey=e.action,i.scrollTop="downArrow"===e.action?(r-o)*this.parent.getRowHeight():r*this.parent.getRowHeight()):this.activeKey=this.empty,(!sf.base.isBlazor()||sf.base.isBlazor()&&!this.blazorDataLoad)&&this.parent.selectRow(r)}}},r.prototype.editActionBegin=function(e){this.editedRowIndex=e.index;var t=sf.base.extend({},this.getRowObjectByIndex(e.index));e.data=Object.keys(this.virtualData).length?this.virtualData:t},r.prototype.refreshCache=function(e){var t=Math.ceil((this.editedRowIndex+1)/this.getBlockSize()),r=this.editedRowIndex-(t-1)*this.getBlockSize();this.vgenerator.cache[t][r].data=e},r.prototype.actionComplete=function(e){"delete"!==e.requestType&&"save"!==e.requestType&&"cancel"!==e.requestType||(this.refreshOffsets(),this.refreshVirtualElement(),this.isNormaledit&&("cancel"===e.requestType&&(this.isCancel=!0),this.isAdd=!1,this.editedRowIndex=this.empty,this.virtualData={},this.parent.editModule.previousVirtualData={})),this.parent.enableColumnVirtualization&&"filterafteropen"===e.requestType&&this.currentInfo.columnIndexes&&this.currentInfo.columnIndexes[0]>0&&this.parent.resetFilterDlgPosition(e.columnName)},r.prototype.resetIsedit=function(){this.parent.enableVirtualization&&this.isNormaledit&&(this.parent.editSettings.allowEditing&&Object.keys(this.virtualData).length||this.parent.editSettings.allowAdding&&this.isAdd)&&(this.parent.isEdit=!0)},r.prototype.scrollAfterEdit=function(){if(this.parent.editModule&&this.parent.editSettings.allowEditing&&this.isNormaledit&&this.content.querySelector(".e-gridform")){var e=this.content.querySelector(".e-editedrow"),t=this.content.querySelector(".e-addedrow");if(e||t){var r=e?sf.base.extend({},this.getRowObjectByIndex(this.editedRowIndex)):sf.base.extend({},this.emptyRowData);this.virtualData=this.getVirtualEditedData(r)}}},r.prototype.createEmptyRowdata=function(){var e=this;this.parent.getColumns().filter((function(t){e.emptyRowData[t.field]=e.empty}))},r.prototype.addActionBegin=function(e){if(this.isNormaledit){Object.keys(this.emptyRowData).length||this.createEmptyRowdata(),this.isAdd=!0;var t=this.parent.pageSettings.currentPage;t>1&&"Top"===this.parent.editSettings.newRowPosition&&(this.isAdd=!0,this.onActionBegin(),e.startEdit=!1,this.content.scrollTop=0),t<this.maxPage-1&&"Bottom"===this.parent.editSettings.newRowPosition&&(this.isAdd=!0,this.parent.setProperties({pageSettings:{currentPage:this.maxPage-1}},!0),e.startEdit=!1,this.content.scrollTop=this.offsets[this.offsetKeys.length])}},r.prototype.getRowObjectByIndex=function(e){return this.getRowCollection(e,!1,!0)},r.prototype.getBlockSize=function(){return this.parent.pageSettings.pageSize>>1},r.prototype.getBlockHeight=function(){return this.getBlockSize()*this.parent.getRowHeight()},r.prototype.isEndBlock=function(e){var t=this.getTotalBlocks();return e>=t||e===t-1},r.prototype.getGroupedTotalBlocks=function(){var e=this.parent.vcRows;return Math.floor(e.length/this.getBlockSize()<1?1:e.length/this.getBlockSize())},r.prototype.getTotalBlocks=function(){return Math.ceil(this.count/this.getBlockSize())},r.prototype.getColumnOffset=function(e){return 0|this.vgenerator.cOffsets[e]},r.prototype.getModelGenerator=function(){return new Oi(this.parent)},r.prototype.resetScrollPosition=function(e){if(this.actions.some((function(t){return t===e}))){var t=this.parent.getFrozenColumns()?this.parent.getMovableVirtualContent():this.content;this.preventEvent=0!==t.scrollTop,t.scrollTop=0}"virtualscroll"!==e&&(this.isAdd=!1)},r.prototype.onActionBegin=function(e){this.parent.setProperties({pageSettings:{currentPage:1}},!0)},r.prototype.getRows=function(){return this.vgenerator.getRows()},r.prototype.getRowByIndex=function(e){return wr(this.parent)?this.parent.getDataRows()[e]:this.getRowCollection(e,!1)},r.prototype.getMovableVirtualRowByIndex=function(e){return this.getRowCollection(e,!0)},r.prototype.getRowCollection=function(e,t,r){var i=this.prevInfo.blockIndexes,n=!sf.base.isBlazor()||sf.base.isBlazor()&&!this.parent.isServerRendered?(i[0]-1)*this.getBlockSize():this.startIndex,s=t?this.parent.getMovableDataRows():this.parent.getDataRows(),o=(r?this.parent.getCurrentViewRecords():s)[e-n];return!r&&this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(o=e<=this.parent.frozenRows?s[e]:s[e-n+this.parent.frozenRows]),o},r.prototype.getVirtualRowIndex=function(e){return(this.prevInfo.blockIndexes[0]-1)*this.getBlockSize()+e},r.prototype.refreshOffsets=function(){var e=this.parent,t=0,r=this.getBlockSize(),i=wr(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks();this.prevHeight=this.offsets[i],this.maxBlock=i%2==0?i-2:i-1,this.offsets={};for(var n=Array.apply(null,Array(i)).map((function(){return++t})),s=0;s<n.length;s++){var o=(this.vgenerator.cache[n[s]]||[]).length,a=wr(this.parent)?e.vcRows.length%r:this.count%r,l=!wr(this.parent)&&n[s]in this.vgenerator.cache?o*this.parent.getRowHeight():a&&n[s]===i?a*this.parent.getRowHeight():this.getBlockHeight();this.offsets[n[s]]=(0|this.offsets[n[s]-1])+l,this.tmpOffsets[n[s]]=0|this.offsets[n[s]-1]}this.offsetKeys=Object.keys(this.offsets),wr(this.parent)&&(this.parent.vGroupOffsets=this.offsets),this.parent.enableColumnVirtualization&&this.vgenerator.refreshColOffsets()},r.prototype.refreshVirtualElement=function(){this.vgenerator.refreshColOffsets(),this.setVirtualHeight()},r.prototype.setVisible=function(e){var t,r,i=this.parent,n=this.parent.getFrozenColumns();n&&(t=[].slice.call(this.parent.getFrozenVirtualContent().querySelectorAll("col")),r=[].slice.call(this.parent.getMovableVirtualContent().querySelectorAll("col"))),sf.base.isBlazor()&&i.isServerRendered&&this.parent.notify("setvisibility",e);var s,o=[];(o=this.getRows()).some((function(e){return e.isDataRow&&(s=e),e.isDataRow}));var a=!0;!i.groupSettings.columns.length&&s&&(a=!1);for(var l=i.getDataRows(),d=0,c=e.length;d<c;d++){var h=e[d],p=i.getNormalizedColumnIndex(h.uid),u=!0===h.visible?"":"none",f=void 0;if(t&&r?p>=n?(f=r,l=this.parent.getMovableRows(),p-=n):f=t:f=this.getColGroup().children,-1!==p&&s&&p<s.cells.length&&sf.base.setStyleAttribute(f[p],{display:u}),!a){var g=void 0;(g=h.visible?this.virtualEle.wrapper.offsetWidth+parseInt(h.width.toString(),10):this.virtualEle.wrapper.offsetWidth-parseInt(h.width.toString(),10))>i.width?(this.setDisplayNone(l,p,u,o),this.parent.enableColumnVirtualization&&this.virtualEle.setWrapperWidth(g+""),this.refreshVirtualElement()):a=!0}!this.parent.invokedFromMedia&&h.hideAtMedia&&this.parent.updateMediaColumns(h),this.parent.invokedFromMedia=!1}if(sf.base.isBlazor()&&this.parent.isServerRendered&&a){var m=this.parent.inViewIndexes,y=this.getColumnOffset(m[0]-1);g=this.getColumnOffset(m[m.length-1])-y+"";this.parent.notify("refresh-virtual-indices",{requestType:"virtualScrollRefresh",startColumnIndex:m[0],endColumnIndex:m[m.length-1],axis:"X",VTablewidth:g,translateX:y}),this.parent.notify("setcolumnstyles",{})}a||n?this.refreshContentRows({requestType:"refresh"}):this.parent.notify("partial-refresh",{rows:o,args:{isFrozen:!1,rows:o}})},r.prototype.selectVirtualRow=function(e){var t=this;if("upArrow"!==this.activeKey&&"downArrow"!==this.activeKey&&!this.requestTypes.some((function(e){return e===t.requestType}))){var r=this.parent.getFrozenColumns()?this.parent.getMovableVirtualContent():this.parent.getContent().firstElementChild,i=this.parent.getRowByIndex(e.selectedIndex),n=this.parent.getRowHeight(),s=r.offsetHeight;if(!i||this.isRowInView(e.selectedIndex,i,r,s,n)){this.isSelection=!0,this.selectedRowIndex=e.selectedIndex;var o=Math.floor(s/n),a=(e.selectedIndex-o)*n;sf.base.isNullOrUndefined(a)||(r.scrollTop=a)}}this.requestType=this.empty},r.prototype.isRowInView=function(e,t,r,i,n){if(sf.base.isBlazor()){var s=r.scrollTop/n;return e<s||e>s+i/n}var o=t?t.getBoundingClientRect().top:0;return o<n||o>i},r}(j),Ai=function(e){function t(t,r){var i=e.call(this,t,r)||this;return i.virtualEle=new Bi,i.gen=new Oi(i.parent),i.parent.on("column-visible-changed",i.setVisible,i),i.parent.on("refresh-virtual-block",(function(e){return"X"===e.virtualInfo.sentinelInfo.axis?i.refreshUI():null}),i),i}return Mi(t,e),t.prototype.renderTable=function(){this.gen.refreshColOffsets(),this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector(".e-headercontent"))),sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.notify("refresh-virtual-indices",{startColumnIndex:this.parent.contentModule.startColIndex,endColumnIndex:this.parent.contentModule.endColIndex,axis:"X"}),e.prototype.renderTable.call(this),this.virtualEle.table=this.getTable(),this.virtualEle.content=this.getPanel().querySelector(".e-headercontent"),this.parent.getFrozenColumns()||(this.virtualEle.content.style.position="relative"),this.virtualEle.renderWrapper(),this.virtualEle.renderPlaceHolder("absolute")},t.prototype.appendContent=function(e){this.virtualEle.wrapper.appendChild(e)},t.prototype.refreshUI=function(){this.setFrozenTable(this.parent.getMovableVirtualContent()),this.gen.refreshColOffsets(),this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector(".e-headercontent"))),e.prototype.refreshUI.call(this),this.setFrozenTable(this.parent.getFrozenVirtualContent())},t.prototype.setVisible=function(e){var t,r,i,n,s,o=this.parent,a=this.parent.getFrozenColumns();a&&(n=[].slice.call(this.parent.getFrozenVirtualHeader().querySelectorAll("col")),s=[].slice.call(this.parent.getMovableVirtualHeader().querySelectorAll("col")));for(var l=0,d=e.length;l<d;l++){var c=e[l];r=o.getNormalizedColumnIndex(c.uid),t=c.visible?"":"none";var h=void 0;if(n&&s?r>=a?(h=s,r-=a):h=n:h=this.getColGroup().children,sf.base.setStyleAttribute(h[r],{display:t}),o.enableColumnVirtualization&&!o.groupSettings.columns.length){var p=void 0;(p=c.visible?this.virtualEle.wrapper.offsetWidth+parseInt(c.width.toString(),10):this.virtualEle.wrapper.offsetWidth-parseInt(c.width.toString(),10))>o.width?(this.setDisplayNone(c,t),this.virtualEle.setWrapperWidth(p+""),this.gen.refreshColOffsets()):i=!0}else i=!0;i&&!a&&this.refreshUI()}a&&this.parent.notify("column-position-changed",{})},t.prototype.setFrozenTable=function(e){this.parent.getFrozenColumns()&&this.parent.enableColumnVirtualization&&this.parent.contentModule.isXaxis()&&this.parent.contentModule.setTable(e.querySelector(".e-table"))},t.prototype.setDisplayNone=function(e,t){var r=this.parent.getFrozenColumns(),i=this.getTable();r&&e.index>=r&&(i=this.parent.getMovableVirtualHeader().querySelector(".e-table"));for(var n=0,s=[].slice.apply(i.querySelectorAll("th.e-headercell"));n<s.length;n++){var o=s[n];if(o.querySelector("[e-mappinguid]")&&o.querySelector("[e-mappinguid]").getAttribute("e-mappinguid")===e.uid){sf.base.setStyleAttribute(o,{display:t}),""===t&&sf.base.removeClass([o],"e-hide");break}}},t}(V),Bi=function(){function e(){}return e.prototype.renderWrapper=function(e){sf.base.isBlazor()?(this.wrapper=this.content.querySelector(".e-virtualtable")?this.content.querySelector(".e-virtualtable"):sf.base.createElement("div",{className:"e-virtualtable"}),this.wrapper.setAttribute("styles","min-height:"+sf.base.formatUnit(e))):this.wrapper=sf.base.createElement("div",{className:"e-virtualtable",styles:"min-height:"+sf.base.formatUnit(e)}),this.wrapper.appendChild(this.table),this.content.appendChild(this.wrapper)},e.prototype.renderPlaceHolder=function(e){void 0===e&&(e="relative"),sf.base.isBlazor()?(this.placeholder=this.content.querySelector(".e-virtualtrack")?this.content.querySelector(".e-virtualtrack"):sf.base.createElement("div",{className:"e-virtualtrack"}),this.placeholder.setAttribute("styles","position:"+e)):this.placeholder=sf.base.createElement("div",{className:"e-virtualtrack",styles:"position:"+e}),this.content.appendChild(this.placeholder)},e.prototype.adjustTable=function(e,t){this.wrapper.style.transform="translate("+e+"px, "+t+"px)"},e.prototype.setWrapperWidth=function(e,t){this.wrapper.style.width=e?e+"px":t?"100%":""},e.prototype.setVirtualHeight=function(e,t){this.placeholder.style.height=e+"px",this.placeholder.style.width=t},e.prototype.setFreezeWrapperWidth=function(e,t,r){e.style.width=t?t+"px":r?"100%":""},e}(),Pi=function(){function t(e,t){this.parent=e,this.locator=t,this.addEventListener()}return t.prototype.getModuleName=function(){return"virtualscroll"},t.prototype.instantiateRenderer=function(){this.parent.log(["limitation","virtual_height"],"virtualization");var t=this.locator.getService("rendererFactory");this.parent.getFrozenColumns()||(this.parent.enableColumnVirtualization&&t.addRenderer(e.RenderType.Header,new Ai(this.parent,this.locator)),t.addRenderer(e.RenderType.Content,new ki(this.parent,this.locator))),this.ensurePageSize()},t.prototype.ensurePageSize=function(){var e=this.parent.getRowHeight(),t=this.parent.height.toString().indexOf("%")<0?this.parent.height:this.parent.element.getBoundingClientRect().height;this.blockSize=~~(t/e);var r=2*this.blockSize,i=this.parent.pageSettings.pageSize;this.parent.setProperties({pageSettings:{pageSize:i<r?r:i}},!0),sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.notify("refresh-virtual-indices",{})},t.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(p,this.instantiateRenderer,this),this.parent.on("column-width-changed",this.refreshVirtualElement,this))},t.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(p,this.instantiateRenderer),this.parent.off("column-width-changed",this.refreshVirtualElement))},t.prototype.refreshVirtualElement=function(t){this.parent.enableColumnVirtualization&&"resize"===t.module&&this.locator.getService("rendererFactory").getRenderer(e.RenderType.Content).refreshVirtualElement()},t.prototype.destroy=function(){this.removeEventListener()},t}(),zi=function(){function e(e){this.parent=e}return e.prototype.addNew=function(e,t){var r,i;(this.isEdit=!1,i=this.parent.frozenRows&&"Top"===this.parent.editSettings.newRowPosition?this.parent.getHeaderContent().querySelector("tbody"):this.parent.getContentTable().querySelector("tbody"),t.row=this.parent.createElement("tr",{className:"e-row e-addedrow"}),i.querySelector(".e-emptyrow"))&&(i.querySelector(".e-emptyrow").remove(),this.parent.getFrozenColumns()&&this.parent.getContent().querySelector(".e-movablecontent").querySelector("tbody").firstElementChild.remove());if("Top"===this.parent.editSettings.newRowPosition?i.insertBefore(t.row,i.firstChild):i.appendChild(t.row),t.row.appendChild(this.getEditElement(e,!1,void 0,t,!0)),this.parent.editModule.checkLastRow(t.row,t),this.parent.getFrozenColumns()){var n=this.renderMovableform(t.row,t);r=this.parent.frozenRows&&"Top"===this.parent.editSettings.newRowPosition?this.parent.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody"):this.parent.getContent().querySelector(".e-movablecontent").querySelector("tbody"),"Top"===this.parent.editSettings.newRowPosition?r.insertBefore(n,r.firstChild):r.appendChild(n),t.row.querySelector(".e-normaledit").setAttribute("colspan",this.parent.getVisibleFrozenColumns()+""),n.setAttribute("colspan",""+(this.parent.getVisibleColumns().length-this.parent.getVisibleFrozenColumns())),"auto"===this.parent.height&&this.parent.notify("frozenHeight",{})}},e.prototype.renderMovableform=function(e,t){var r=e.cloneNode(!0),i=t.movableForm=r.querySelector("form");return this.parent.editSettings.template?(i.innerHTML="",this.appendChildren(i,t.rowData,!1),r):(this.renderMovable(e,r),r.querySelector("colgroup").innerHTML=this.parent.getHeaderContent().querySelector(".e-movableheader").querySelector("colgroup").innerHTML,r)},e.prototype.updateFreezeEdit=function(e,t){return t=t.concat([].slice.call(this.getFreezeRow(e).querySelectorAll("td.e-rowcell")))},e.prototype.getFreezeRow=function(e){if(this.parent.getFrozenColumns()){var t=parseInt(e.getAttribute("aria-rowindex"),10),r=this.parent.getContent().querySelector(".e-frozencontent").querySelector("tbody"),i=this.parent.getContent().querySelector(".e-movablecontent").querySelector("tbody"),n=this.parent.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody"),s=this.parent.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody");if(this.parent.frozenRows&&t>=this.parent.frozenRows&&(t-=this.parent.frozenRows),r.contains(e))return i.children[t];if(i.contains(e))return r.children[t];if(n.contains(e))return s.children[t];if(s.contains(e))return n.children[t]}return e},e.prototype.update=function(e,t){this.isEdit=!0;if(sf.base.closest(t.row,".e-movablecontent")&&(t.row=this.getFreezeRow(t.row),sf.base.isBlazor()&&this.parent.isServerRendered&&(t.cloneRow=t.row.cloneNode(!0))),sf.base.isBlazor()&&this.parent.isServerRendered){t.row.parentNode.insertBefore(t.cloneRow,t.row),t.row.classList.add("e-hiddenrow");var r=[].slice.call(t.cloneRow.querySelectorAll("td.e-rowcell"));t.cloneRow.innerHTML="",r=this.updateFreezeEdit(t.cloneRow,r),t.cloneRow.appendChild(this.getEditElement(e,!0,r,t,!0)),t.cloneRow.classList.add("e-editedrow"),this.refreshFreezeEdit(t.cloneRow,t)}else{r=[].slice.call(t.row.querySelectorAll("td.e-rowcell"));t.row.innerHTML="",r=this.updateFreezeEdit(t.row,r),t.row.appendChild(this.getEditElement(e,!0,r,t,!0)),t.row.classList.add("e-editedrow"),this.parent.editModule.checkLastRow(t.row,t),this.refreshFreezeEdit(t.row,t)}},e.prototype.refreshFreezeEdit=function(e,t){var r,i,n=e.firstChild,s=parseInt(e.getAttribute("aria-rowindex"),10);if(this.parent.getFrozenColumns()){s<this.parent.frozenRows?(i=this.parent.getHeaderContent(),r=".e-frozenheader"):(i=this.parent.getContent(),r=".e-frozencontent");var o=n.cloneNode(!0),a=t.movableForm=o.querySelector("form");this.parent.editSettings.template&&(a.innerHTML="",this.appendChildren(a,t.rowData,!1));var l=void 0;i.querySelector(r).contains(e)?(l=this.parent.getMovableRowByIndex(s),sf.base.isBlazor()&&this.parent.isServerRendered?(t.frozen=l,t.cloneFrozen=l.cloneNode(!0),l.classList.add("e-hiddenrow"),l.parentNode.insertBefore(t.cloneFrozen,l),this.updateFrozenCont(t.cloneFrozen,n,o)):this.updateFrozenCont(l,n,o)):(l=this.parent.getRowByIndex(s),sf.base.isBlazor()&&this.parent.isServerRendered?(t.frozen=l,t.cloneFrozen=l.cloneNode(!0),l.parentNode.insertBefore(t.cloneFrozen,l),l.classList.add("e-hiddenrow"),this.updateFrozenCont(t.cloneFrozen,o,n)):this.updateFrozenCont(l,o,n)),sf.base.isBlazor()&&this.parent.isServerRendered?(t.cloneFrozen.appendChild(o),t.cloneFrozen.classList.add("e-editedrow")):(l.appendChild(o),l.classList.add("e-editedrow")),Ar(t.movableForm.querySelector("td:not(.e-hide)"),t.form.querySelector("td:not(.e-hide)"))}},e.prototype.updateFrozenCont=function(e,t,r){e.innerHTML="",this.parent.editSettings.template||(this.renderMovable(t,r),r.querySelector("colgroup").innerHTML=this.parent.getHeaderContent().querySelector(".e-movableheader").querySelector("colgroup").innerHTML),t.setAttribute("colspan",this.parent.getVisibleFrozenColumns()+""),r.setAttribute("colspan",this.parent.getVisibleColumns().length-this.parent.getVisibleFrozenColumns()+"")},e.prototype.renderMovable=function(e,t){var r=this.parent.getFrozenColumns();t.querySelector("tr").innerHTML="";for(var i=r;i<this.parent.getColumns().length;i++)t.querySelector("tr").appendChild(e.querySelector("tr").removeChild(e.querySelector("tr").children[r]))},e.prototype.getEditElement=function(e,t,r,i,n){var s=this.parent,o=0,a=sf.base.isNullOrUndefined(s.detailTemplate)&&sf.base.isNullOrUndefined(s.childGrid)?0:1;s.allowGrouping&&(o=s.groupSettings.columns.length);var l=this.parent.createElement("td",{className:"e-editcell e-normaledit",attrs:{colspan:(s.getVisibleColumns().length-s.getVisibleFrozenColumns()+this.parent.getIndentCount()).toString()}}),d=i.form=this.parent.createElement("form",{id:s.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template)return this.appendChildren(d,i.rowData,n),l.appendChild(d),l;var c=this.parent.createElement("table",{className:"e-table e-inline-edit",attrs:{cellspacing:"0.25"}});c.appendChild(s.getContentTable().querySelector("colgroup").cloneNode(!0));var h=this.parent.createElement("tbody"),p=this.parent.createElement("tr"),u=0;for(a&&p.insertBefore(this.parent.createElement("td",{className:"e-detailrowcollapse"}),p.firstChild),s.isRowDragable()&&p.appendChild(this.parent.createElement("td",{className:"e-dragindentcell"}));u<o;)p.appendChild(this.parent.createElement("td",{className:"e-indentcell"})),u++;var f=0;for(u=0;t&&f<r.length&&u<s.getColumns().length||u<s.getColumns().length;){var g=t?r[f].getAttribute("colspan"):null,m=s.getColumns()[u],y=this.parent.createElement("td",{className:"e-rowcell",attrs:{style:"text-align:"+(m.textAlign?m.textAlign:""),colspan:g||""}});m.visible?(y.appendChild(e[m.uid]),"booleanedit"===m.editType?y.classList.add("e-boolcell"):(m.commands||m.commandsTemplate)&&sf.base.addClass([y],"e-unboundcell")):y.classList.add("e-hide"),p.appendChild(y),u=g?u+parseInt(g,10):u+1,f++}return h.appendChild(p),c.appendChild(h),d.appendChild(c),l.appendChild(d),l},e.prototype.removeEventListener=function(){},e.prototype.appendChildren=function(e,t,r){var i=this,n=sf.base.extend({},t,{isAdd:!this.isEdit,isFrozen:r},!0),s=this.parent.element.id+"editSettingsTemplate";Jt(e,this.parent.getEditTemplate()(n,this.parent,"editSettingsTemplate",s));sf.base.updateBlazorTemplate(s,"Template",this.parent.editSettings,!0,(function(){for(var e=i.parent.getColumns(),t=0;t<e.length;t++)e[t].validationRules&&(i.parent.editModule.formObj.rules[e[t].field]=e[t].validationRules)}))},e}(),Ni=function(){function e(e){this.parent=e}return e.prototype.update=function(e,t){if(sf.base.isBlazor()&&this.parent.isServerRendered){t.cloneCell.innerHTML="",t.cloneCell.appendChild(this.getEditElement(e,t)),t.cloneCell.classList.remove("e-ellipsistooltip"),t.cloneCell.classList.add("e-editedbatchcell"),sf.base.classList(t.row,["e-editedrow","e-batchrow"],[])}else t.cell.innerHTML="",t.cell.appendChild(this.getEditElement(e,t)),t.cell.classList.remove("e-ellipsistooltip"),t.cell.classList.add("e-editedbatchcell"),sf.base.classList(t.row,["e-editedrow","e-batchrow"],[])},e.prototype.getEditElement=function(e,t){var r=this.parent,i=this.parent.createElement("form",{id:r.element.id+"EditForm",className:"e-gridform"});return i.appendChild(e[t.columnObject.uid]),"booleanedit"===t.columnObject.editType&&t.cell.classList.add("e-boolcell"),t.columnObject.editType||t.cell.classList.add("e-inputbox"),i},e.prototype.removeEventListener=function(){},e}(),Li=function(){function e(e,t){this.parent=e,this.serviceLocator=t,this.parent.isDestroyed||(this.parent.on("dialog-destroy",this.destroy,this),this.parent.on(x,this.destroy,this))}return e.prototype.setLocaleObj=function(){this.l10n=this.serviceLocator.getService("localization")},e.prototype.addNew=function(e,t){this.isEdit=!1,this.createDialog(e,t)},e.prototype.update=function(e,t){this.isEdit=!0,this.createDialog(e,t)},e.prototype.createDialog=function(e,t){var r=this.parent;this.dialog=this.parent.createElement("div",{id:r.element.id+"_dialogEdit_wrapper",styles:"width: auto"}),this.dialog.setAttribute("aria-label","Dialog edit"),r.element.appendChild(this.dialog),this.setLocaleObj(),this.dialogObj=new sf.popups.Dialog(sf.base.extend({header:r.editSettings.headerTemplate?this.getDialogEditTemplateElement("HeaderTemplate",t):this.isEdit?this.l10n.getConstant("EditFormTitle")+t.primaryKeyValue[0]:this.l10n.getConstant("AddFormTitle"),isModal:!0,visible:!0,cssClass:"e-edit-dialog",content:this.getEditElement(e,t),showCloseIcon:!0,allowDragging:!0,close:this.dialogClose.bind(this),closeOnEscape:!0,width:r.editSettings.template?"auto":"330px",target:t.target?t.target:document.body,animationSettings:{effect:"None"},footerTemplate:r.editSettings.footerTemplate?this.getDialogEditTemplateElement("FooterTemplate",t):null,buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.l10n.getConstant("SaveButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}]},r.editSettings.dialog&&r.editSettings.dialog.params||{})),sf.base.isBlazor()?this.dialogObj.locale=this.parent.locale:t.dialog=this.dialogObj;this.dialogObj.isStringTemplate=!0,this.dialogObj.appendTo(this.dialog),kr(this.parent.element,this.dialogObj.element.parentElement)},e.prototype.btnClick=function(e){this.l10n.getConstant("CancelButton").toLowerCase()===e.target.innerText.trim().toLowerCase()?this.dialogClose():this.parent.endEdit()},e.prototype.dialogClose=function(){this.parent.closeEdit(),this.destroy()},e.prototype.destroy=function(e){for(var t=["template","headerTemplate","footerTemplate"],r=0;r<t.length;r++)if(this.parent.editSettings[t[r]]){var i=t[r].charAt(0).toUpperCase()+t[r].slice(1),n=this.parent.element.id+"editSettings"+i;sf.base.updateBlazorTemplate(n,i,this.parent.editSettings)}this.parent.notify("destroy-form",{}),this.parent.isEdit=!1,this.parent.notify(R,{}),this.dialog&&!this.dialogObj.isDestroyed&&(this.dialogObj.destroy(),sf.base.remove(this.dialog))},e.prototype.getDialogEditTemplateElement=function(e,t){var r=this.parent.createElement("div",{className:"e-dialog"+e}),i=sf.base.extend({},t.rowData,{isAdd:!this.isEdit},!0),n=this.parent.element.id+"editSettings"+e;return Jt(r,this.parent.getEditHeaderTemplate()(i,this.parent,"editSettings"+e,n)),sf.base.updateBlazorTemplate(n,e,this.parent.editSettings),r},e.prototype.getEditElement=function(e,t){var r=this,i=this.parent,n=this.parent.createElement("div",{className:this.isEdit?"e-editedrow":"e-insertedrow"}),s=t.form=this.parent.createElement("form",{id:i.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template){var o=this.parent.element.id+"editSettingsTemplate",a=sf.base.extend({},t.rowData,{isAdd:!this.isEdit},!0);Jt(s,this.parent.getEditTemplate()(a,this.parent,"editSettingsTemplate",o));return sf.base.updateBlazorTemplate(o,"Template",this.parent.editSettings,!0,(function(){for(var e=r.parent.getColumns(),t=0;t<e.length;t++)e[t].validationRules&&(r.parent.editModule.formObj.rules[e[t].field]=e[t].validationRules)})),n.appendChild(s),n}for(var l=this.parent.createElement("table",{className:"e-table",attrs:{cellspacing:"6px"}}),d=this.parent.createElement("tbody"),c=i.getColumns(),h=0;h<c.length;h++)if(!(this.parent.editModule.checkColumnIsGrouped(c[h])||c[h].commands||c[h].commandsTemplate)){var p=this.parent.createElement("tr"),u=this.parent.createElement("td",{className:"e-rowcell",attrs:{style:"text-align:"+(this.parent.enableRtl?"right":"left")+";width:190px"}});this.parent.createElement("label",{innerHTML:c[h].field});e[c[h].uid].classList.remove("e-input"),u.appendChild(e[c[h].uid]),p.appendChild(u),d.appendChild(p)}return l.appendChild(d),s.appendChild(l),n.appendChild(s),n},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("dialog-destroy",this.destroy),this.parent.off(x,this.destroy))},e}(),qi=function(){function t(e,t){this.editType={Inline:zi,Normal:zi,Batch:Ni,Dialog:Li},this.parent=e,this.serviceLocator=t,this.renderer=new this.editType[this.parent.editSettings.mode](e,t),this.focus=t.getService("focus")}return t.prototype.addNew=function(e){this.renderer.addNew(this.getEditElements(e),e),this.convertWidget(e)},t.prototype.update=function(e){this.renderer.update(this.getEditElements(e),e),this.parent.notify("edit-form",e),this.convertWidget(e)},t.prototype.convertWidget=function(e){var t,r,i,n=this.parent,s=n.getFrozenColumns(),o="Dialog"===n.editSettings.mode?document.querySelector("#"+n.element.id+"_dialogEdit_wrapper").querySelector(".e-gridform"):n.element.querySelector(".e-gridform");if(s&&"Normal"===n.editSettings.mode){var a=parseInt(e.row.getAttribute("aria-rowindex"),10);i=n.frozenRows&&("add"===e.requestType&&"Top"===n.editSettings.newRowPosition||a<n.frozenRows)?n.element.querySelector(".e-movableheader").querySelector(".e-gridform"):n.element.querySelector(".e-movablecontent").querySelector(".e-gridform")}for(var l="Batch"!==n.editSettings.mode?n.getColumns():[n.getColumnByField(e.columnName)],d=0,c=l;d<c.length;d++){var h=c[d];if(!this.parent.editSettings.template||sf.base.isNullOrUndefined(h.field)){if(!this.parent.editModule.checkColumnIsGrouped(h)&&!h.commands){h.valueAccessor(h.field,e.rowData,h),r=s&&l.indexOf(h)>=s&&"Normal"===n.editSettings.mode?i.querySelector("[e-mappinguid="+h.uid+"]"):o.querySelector("[e-mappinguid="+h.uid+"]");var p=h.edit.write;sf.base.isNullOrUndefined(r)||("string"==typeof p?(p=Sr(p,window))({rowData:e.rowData,element:r,column:h,requestType:e.requestType,row:e.row,foreignKeyData:h.isForeignColumn()&&Sr(h.field,e.foreignKeyData)}):h.edit.write({rowData:e.rowData,element:r,column:h,requestType:e.requestType,row:e.row,foreignKeyData:h.isForeignColumn()&&Sr(h.field,e.foreignKeyData)}),t||r.getAttribute("disabled")||(this.focusElement(r,e.type),t=!0))}}else{var u=sf.base.extend({},e);u.element=o.querySelector("[name="+ir(h.field)+"]"),sf.base.isNullOrUndefined(u.element)&&s&&(u.element=i.querySelector("[name="+ir(h.field)+"]")),"string"==typeof h.edit.write?Sr(h.edit.write,window)(u):h.edit.write(u)}}if(!(0===s||this.parent.allowTextWrap||"add"!==e.requestType&&"beginEdit"!==e.requestType||"Dialog"===this.parent.editSettings.mode||sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(i))){var f=i.querySelector("tr").children[0],g=o.querySelector("tr").children[0];g.offsetHeight>f.offsetHeight?f.style.height=g.offsetHeight+"px":g.style.height=f.offsetHeight+"px"}},t.prototype.focusElement=function(e,t){var r=this.parent.element.querySelector(".e-edit-checkselect");(sf.base.isNullOrUndefined(r)||r.nextElementSibling.classList.add("e-focus"),"Batch"===this.parent.editSettings.mode)?this.focus.onClick({target:sf.base.closest(e,"td")},!0):!this.parent.enableVirtualization||"Normal"!==this.parent.editSettings.mode||this.parent.enableVirtualization&&"Bottom"===this.parent.editSettings.newRowPosition&&Ut(e,"e-addedrow")?e.focus():e.focus({preventScroll:!0});e.classList.contains("e-defaultcell")&&e.setSelectionRange(e.value.length,e.value.length)},t.prototype.getEditElements=function(t){var r=this,i=this.parent,n={},s="Batch"!==i.editSettings.mode?i.getColumns():[i.getColumnByField(t.columnName)];if(this.parent.editSettings.template)return{};for(var o=function(o,l){var d=s[o];if(a.parent.editModule.checkColumnIsGrouped(d))return"continue";if(d.commands||d.commandsTemplate){var c=a.serviceLocator.getService("cellRendererFactory"),h=new P(a.parent),p=c.getCellRenderer(e.CellType.CommandColumn),u=h.generateRows(t.rowData)[0].cells.filter((function(e){return e.rowID})),f=p.render(u[o],t.rowData,{index:t.row?t.row.getAttribute("aria-rowindex"):0});return(x=f.firstElementChild).setAttribute("textAlign",f.getAttribute("textAlign")),n[d.uid]=x,"continue"}var g,m,y=d.valueAccessor(d.field,t.rowData,d),v={column:d,value:y,type:t.requestType,data:t.rowData},b=d.edit.create;if(d.editTemplate){g=a.parent.createElement("span",{attrs:{"e-mappinguid":d.uid}});var C=a.parent.element.id+d.uid+"editTemplate",w=sf.base.extend({},{},t.rowData,!0),S=d.getEditTemplate()(w,a.parent,"editTemplate",C);if(a.parent.isReact&&"Batch"===a.parent.editSettings.mode?setTimeout((function(){Jt(g,S)})):Jt(g,S),sf.base.isBlazor()){sf.base.updateBlazorTemplate(C,"EditTemplate",d,!0,(m=d,function(){r.parent.editModule.formObj.rules[m.field]=m.validationRules}))}}else{var x;if("string"==typeof b?(b=Sr(b,window),g=b(v)):g=d.edit.create(v),"string"==typeof g)(x=a.parent.createElement("div")).innerHTML=g,g=x.firstChild;var R="input"!==g.tagName&&g.querySelectorAll("input").length,I=ir(d.field);sf.base.attributes(R?g.querySelector("input"):g,{name:I,"e-mappinguid":d.uid,id:i.element.id+I}),sf.base.classList(g,["e-input","e-field"],[]),"Right"===d.textAlign&&g.classList.add("e-ralign"),((d.isPrimaryKey||d.isIdentity)&&"beginEdit"===t.requestType||d.isIdentity&&"add"===t.requestType)&&g.setAttribute("disabled","")}n[d.uid]=g},a=this,l=0,d=s.length;l<d;l++)o(l);return n},t.prototype.destroy=function(){this.renderer.removeEventListener()},t}(),Hi=function(){function e(e){this.activeClasses=["e-selectionbackground","e-active"],this.parent=e}return e.prototype.create=function(e){var t=e.column,r="e-field e-boolcell";"checkbox"===t.type&&(r="e-field e-boolcell e-edit-checkselect");var i=ir(e.column.field);return this.parent.createElement("input",{className:r,attrs:{type:"checkbox",value:e.value,"e-mappinguid":t.uid,id:this.parent.element.id+i,name:i}})},e.prototype.read=function(e){return e.checked},e.prototype.write=function(e){var t,r;"add"===e.requestType||e.row.classList.contains("e-addedrow");if(sf.base.isNullOrUndefined(e.row)||(t=e.row.querySelector(".e-edit-checkselect")),Sr(e.column.field,e.rowData)&&(r=JSON.parse(Sr(e.column.field,e.rowData).toString().toLowerCase())),!sf.base.isNullOrUndefined(t)&&"checkbox"===e.column.type){if(this.editType=this.parent.editSettings.mode,this.editRow=e.row,"add"!==e.requestType){var i=this.parent.getRowObjectFromUID(e.row.getAttribute("data-uid"));r=!!i&&i.isSelected}dr.apply(void 0,[[].slice.call(e.row.querySelectorAll(".e-rowcell")),r].concat(this.activeClasses))}this.obj=new sf.buttons.CheckBox(sf.base.extend({label:"Dialog"!==this.parent.editSettings.mode?" ":e.column.headerText,checked:r,disabled:!sr(e.column,e.requestType,e.element),enableRtl:this.parent.enableRtl,change:this.checkBoxChange.bind(this)},e.column.edit.params)),sf.base.isBlazor()&&(this.obj.locale=this.parent.locale),this.obj.appendTo(e.element)},e.prototype.checkBoxChange=function(e){if(this.editRow&&"Dialog"!==this.editType){var t=!1;e.checked?(t=!0,this.editRow.setAttribute("aria-selected",t.toString())):this.editRow.removeAttribute("aria-selected"),dr.apply(void 0,[[].slice.call(this.editRow.querySelectorAll(".e-rowcell")),t].concat(this.activeClasses))}},e.prototype.destroy=function(){this.obj&&this.obj.destroy()},e}(),Ui=function(){function e(e){this.parent=e,this.flag=!1}return e.prototype.create=function(e){var t=ir(e.column.field);return this.parent.createElement("input",{className:"e-field",attrs:{id:this.parent.element.id+t,name:t,type:"text","e-mappinguid":e.column.uid}})},e.prototype.write=function(e){this.column=e.column;var t="Dialog"!==this.parent.editSettings.mode,r=new sf.data.Predicate(e.column.field,"notequal",null,!0,!1);this.obj=new sf.dropdowns.DropDownList(sf.base.extend({dataSource:this.parent.dataSource instanceof sf.data.DataManager?this.parent.dataSource:new sf.data.DataManager(this.parent.dataSource),query:(new sf.data.Query).where(r).select(e.column.field),enabled:sr(e.column,e.requestType,e.element),fields:{value:e.column.field},value:Sr(e.column.field,e.rowData),enableRtl:this.parent.enableRtl,actionComplete:this.ddActionComplete.bind(this),created:this.dropdownCreated.bind(this),placeholder:t?"":e.column.headerText,popupHeight:"200px",floatLabelType:t?"Never":"Always",open:this.dropDownOpen.bind(this),sortOrder:"Ascending"},e.column.edit.params)),this.obj.query.params=this.parent.query.params,sf.base.isBlazor()&&(this.obj.locale=this.parent.locale),this.obj.appendTo(e.element),e.element.setAttribute("name",ir(e.column.field))},e.prototype.read=function(e){return e.ej2_instances[0].value},e.prototype.dropdownCreated=function(e){this.flag=!0},e.prototype.ddActionComplete=function(e){e.result=sf.data.DataUtil.distinct(e.result,this.obj.fields.value,!0),this.flag&&this.column.dataSource&&("result"in this.column.dataSource?this.column.dataSource.result=e.result:this.column.dataSource instanceof sf.data.DataManager&&(this.column.dataSource.dataSource.json=e.result)),this.flag=!1},e.prototype.dropDownOpen=function(e){var t=Ut(this.obj.element,"e-dialog");if("Dialog"===this.parent.editSettings.mode&&!sf.base.isNullOrUndefined(t)){var r=document.querySelector("#"+t.id).ej2_instances[0];e.popup.element.style.zIndex=(r.zIndex+1).toString()}},e.prototype.destroy=function(){this.obj&&this.obj.destroy()},e}(),ji=function(){function e(e){this.parent=e}return e.prototype.keyEventHandler=function(e){if(13===e.keyCode||9===e.keyCode){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),this.dispatchEvent(t)}},e.prototype.create=function(e){var t=ir(e.column.field);return this.instances=new sf.base.Internationalization(this.parent.locale),this.parent.createElement("input",{className:"e-field",attrs:{id:this.parent.element.id+t,name:t,"e-mappinguid":e.column.uid}})},e.prototype.read=function(e){return this.obj.value},e.prototype.write=function(e){var t=e.column,r="Dialog"!==this.parent.editSettings.mode;this.obj=new sf.inputs.NumericTextBox(sf.base.extend({value:parseFloat(Sr(e.column.field,e.rowData)),enableRtl:this.parent.enableRtl,placeholder:r?"":e.column.headerText,enabled:sr(e.column,e.requestType,e.element),floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",locale:this.parent.locale},t.edit.params)),e.element.setAttribute("name",ir(e.column.field)),this.obj.appendTo(e.element),this.obj.element.addEventListener("keydown",this.keyEventHandler)},e.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.obj.element.removeEventListener("keydown",this.keyEventHandler),this.obj.destroy())},e}(),Vi=function(){function e(e){this.parent=e}return e.prototype.create=function(e){var t=e.column;return this.parent.createElement("input",{className:"e-field e-input e-defaultcell",attrs:{type:"text",value:sf.base.isNullOrUndefined(e.value)?"":e.value,"e-mappinguid":t.uid,id:this.parent.element.id+ir(t.field),name:ir(t.field),style:"text-align:"+t.textAlign}})},e.prototype.read=function(e){return e.value},e.prototype.write=function(e){e.column;var t="Dialog"!==this.parent.editSettings.mode,r={element:e.element,floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",properties:{enableRtl:this.parent.enableRtl,enabled:sr(e.column,e.requestType,e.element),placeholder:t?"":e.column.headerText}};sf.inputs.Input.createInput(r,this.parent.createElement)},e}(),Gi=function(){function e(e,t,r){this.args={},this.currentVirtualData={},this.parent=e,this.renderer=r,this.serviceLocator=t,this.addEventListener()}return e.prototype.clickHandler=function(e){var t=e.target,r=this.parent;(Ut(t,"e-gridcontent")&&Ut(Ut(t,"e-gridcontent"),"e-grid").id===r.element.id||r.frozenRows&&Ut(t,"e-headercontent"))&&!Ut(t,"e-unboundcelldiv")&&(this.rowIndex=Ut(t,"e-rowcell")?parseInt(t.parentElement.getAttribute("aria-rowindex"),10):-1,r.isEdit&&r.editModule.endEdit())},e.prototype.dblClickHandler=function(e){Ut(e.target,"e-rowcell")&&this.parent.editSettings.allowEditOnDblClick&&this.parent.editModule.startEdit(Ut(e.target,"e-row"))},e.prototype.editComplete=function(e){this.parent.isEdit=!1;switch(sf.base.isBlazor()&&!this.parent.isJsComponent&&(e.rows=null),e.requestType){case"save":(this.parent.isCheckBoxSelection||"Multiple"===this.parent.selectionSettings.type)&&this.parent.isPersistSelection||"edit"!==e.action&&this.parent.selectRow(0),this.parent.trigger(c,sf.base.extend(e,{requestType:"save",type:c}));break;case"delete":if(sf.base.isBlazor()&&!this.parent.isJsComponent){var t="data";e[t]=e[t][0]}this.parent.trigger(c,sf.base.extend(e,{requestType:"delete",type:c})),this.parent.selectRow(this.editRowIndex)}},e.prototype.startEdit=function(e){var t=this,r=this.parent,i=r.getPrimaryKeyFieldNames(),n=[];if(this.rowIndex=this.editRowIndex=parseInt(e.getAttribute("aria-rowindex"),10),r.enableVirtualization){var s='.e-row[aria-rowindex="'+this.rowIndex+'"]';if(!this.parent.getContent().querySelector(s))return}if(sf.base.isBlazor())for(var o=this.parent.getColumns(),a=0;a<o.length;a++){var l=o[a];l.template&&sf.base.resetBlazorTemplate(r.element.id+l.uid,"Template",this.rowIndex)}if(wr(r)){var h=r.getRowObjectFromUID(e.getAttribute("data-uid"));this.previousData=h.data}else if(this.parent.enableVirtualization){var p={data:this.previousData,index:this.rowIndex};this.parent.notify("virtual-scroll-edit-action-begin",p),this.previousData=p.data}else this.previousData=r.getCurrentViewRecords()[this.rowIndex];for(a=0;a<i.length;a++)n.push(Sr(i[a],this.previousData));this.uid=e.getAttribute("data-uid");var u=r.getRowObjectFromUID(this.uid),f={primaryKey:i,primaryKeyValue:n,requestType:"beginEdit",rowData:this.previousData,rowIndex:this.rowIndex,type:"edit",cancel:!1,foreignKeyData:u&&u.foreignKeyData,target:void 0};sf.base.isBlazor()&&!this.parent.isJsComponent||(f.row=e),r.trigger("beginEdit",f,(function(i){i.type="actionBegin",r.trigger(d,i,(function(i){if(!i.cancel){r.isEdit=!0,i.row=i.row?i.row:e,sf.base.isBlazor()&&r.isServerRendered&&(t.originalRow=i.row,t.cloneRow=i.row.cloneNode(!0),i.cloneRow=t.cloneRow),"Dialog"!==r.editSettings.mode&&r.clearSelection(),"Dialog"===r.editSettings.mode&&r.selectionModule&&(r.selectionModule.preventFocus=!0,i.row.classList.add("e-dlgeditrow")),t.renderer.update(i),sf.base.isBlazor()&&(i.form=null,t.cloneFrozen=i.cloneFrozen,t.frozen=i.frozen,t.cloneRow=i.cloneRow,t.originalRow=i.row),t.uid=e.getAttribute("data-uid"),r.editModule.applyFormValidation(),i.type="actionComplete",r.trigger(c,i),t.args=i,t.parent.allowTextWrap&&t.parent.notify("freezerender",{case:"textwrap"}),sf.base.isBlazor()&&(t.parent.notify(R,{}),r.element.querySelector(".e-gridpopup").style.display="none",t.parent.notify("start-edit",{}))}}))}))},e.prototype.updateRow=function(e,t){var r=this,i=this.parent;this.editRowIndex=e;var n={requestType:"save",action:"edit",type:d,data:t,cancel:!1,previousData:i.getCurrentViewRecords()[e],row:i.getRowByIndex(e)};i.showSpinner(),i.notify("update-data",n),n.promise?n.promise.then((function(){return i.refresh()})).catch((function(e){return r.edFail(e)})):i.refresh()},e.prototype.editFormValidate=function(){var e=this.parent,t=e.editModule.formObj.validate(),r=!e.editModule.mFormObj||e.editModule.mFormObj.validate();return t&&r},e.prototype.endEdit=function(){var e=this.parent;if(this.parent.isEdit&&this.editFormValidate()){var t=sf.base.extend({},{},this.previousData,!0),r=sf.base.extend(this.args,{requestType:"save",type:d,data:t,cancel:!1,previousData:this.previousData,selectedRow:e.selectedRowIndex,foreignKeyData:{}}),i="Dialog"===e.editSettings.mode,n=document.querySelector("#"+e.element.id+"_dialogEdit_wrapper"),s=i?n.querySelector(".e-gridform"):e.element.querySelector(".e-gridform"),o={virtualData:{},isAdd:!1};if(this.parent.notify("get-virtual-data",o),this.parent.enableVirtualization&&"Normal"===this.parent.editSettings.mode&&!s?this.parent.isEdit&&(this.currentVirtualData=t=r.data=o.virtualData):t=e.editModule.getCurrentEditedData(s,t),e.getFrozenColumns()&&"Normal"===e.editSettings.mode){var a=e.element.querySelector(".e-movableheader").querySelector(".e-gridform");t=e.frozenRows&&a?e.editModule.getCurrentEditedData(a,t):e.editModule.getCurrentEditedData(e.element.querySelector(".e-movablecontent").querySelector(".e-gridform"),t)}if(sf.base.isBlazor()){r.form=null,r.movableForm=null,r.row={}}var l=[].slice.call(e.element.querySelectorAll(".e-editedrow")).length;if(o.isAdd||!Object.keys(this.currentVirtualData).length||l||(l=1),i?n.querySelectorAll(".e-editedrow").length:l)r.action="edit",e.trigger(d,r,(function(t){t.cancel||(e.showSpinner(),e.notify("update-data",t))}));else if(r.action="add",r.selectedRow=0,r.index=this.addedRowIndex,e.notify("virtual-scroll-edit-success",{}),e.notify(b,r),this.addedRowIndex=null,r.cancel)return}},e.prototype.destroyElements=function(){var e=this.parent;e.editModule.destroyWidgets(),e.editModule.destroyForm(),this.parent.notify("dialog-destroy",{})},e.prototype.editHandler=function(e){var t=this;e.promise?e.promise.then((function(r){return t.edSucc(r,e)})).catch((function(e){return t.edFail(e)})):this.editSuccess(e.data,e)},e.prototype.edSucc=function(e,t){this.editSuccess(e,t)},e.prototype.edFail=function(e){if(sf.base.isBlazor()&&this.parent.isServerRendered){sf.base.isNullOrUndefined(e.error)||sf.base.isNullOrUndefined(e.error.message)||(e.error=e.error.message)}this.editFailure(e)},e.prototype.updateCurrentViewData=function(e){this.parent.enableVirtualization||(this.parent.getCurrentViewRecords()[this.editRowIndex]=e)},e.prototype.requestSuccess=function(e){this.parent.editModule.formObj&&!this.parent.editModule.formObj.isDestroyed&&(this.destroyElements(),this.stopEditStatus(),"Dialog"===this.parent.editSettings.mode&&"add"!==e.action&&this.parent.element.querySelector(".e-dlgeditrow").classList.remove("e-dlgeditrow"))},e.prototype.editSuccess=function(e,t){if(!(sf.base.isNullOrUndefined(e)||e instanceof Array)){t.data=sf.base.extend({},sf.base.extend({},t.rowData,t.data),e)}var r;if(this.requestSuccess(t),this.parent.trigger("beforeDataBound",t),t.type=c,this.parent.isEdit=!1,sf.base.isBlazor()&&this.parent.isServerRendered){this.closeForm();var i="rowIndex";r={requestType:t.requestType,rowIndex:t[i],action:t.action,data:t.data},this.parent.notify("editsuccess",r)}else this.refreshRow(t.data);(this.parent.notify("virtual-scroll-edit-success",t),this.parent.editModule.checkLastRow(t.row),this.parent.editModule.isLastRow=!1,this.updateCurrentViewData(t.data),this.blazorTemplate(),sf.base.isBlazor()&&this.parent.isServerRendered||(this.editRowIndex=null,this.parent.trigger(c,t)),sf.base.isBlazor()&&this.parent.notify(R,{}),!this.parent.isCheckBoxSelection&&"Multiple"!==this.parent.selectionSettings.type||!this.parent.isPersistSelection)&&("Dialog"!==this.parent.editSettings.mode&&(sf.base.isBlazor()&&this.parent.isServerRendered?r[i="editRowIndex"]=this.rowIndex>-1?this.rowIndex:this.editRowIndex:this.parent.selectRow(this.rowIndex>-1?this.rowIndex:this.editRowIndex)));this.parent.hideSpinner()},e.prototype.closeForm=function(){!this.cloneRow&&this.parent.isEdit&&this.stopEditStatus(),this.cloneRow&&(this.cloneRow.remove(),this.cloneRow=null,this.originalRow.classList.remove("e-hiddenrow")),this.parent.getFrozenColumns()&&this.cloneFrozen&&(this.cloneFrozen.remove(),this.frozen.classList.remove("e-hiddenrow"))},e.prototype.blazorTemplate=function(){var e=this.parent.getColumns();this.parent.editSettings.template&&"Normal"===this.parent.editSettings.mode&&sf.base.updateBlazorTemplate(this.parent.element.id+"editSettingsTemplate","Template",this.parent.editSettings);for(var t=0;t<e.length;t++){var r=e[t];r.template&&sf.base.updateBlazorTemplate(this.parent.element.id+r.uid,"Template",r,!1),r.editTemplate&&sf.base.updateBlazorTemplate(this.parent.element.id+r.uid+"editTemplate","EditTemplate",r)}},e.prototype.editFailure=function(e){this.parent.trigger("actionFailure",sf.base.isBlazor()&&e instanceof Array?e[0]:e),this.parent.hideSpinner(),this.parent.log("actionfailure",{error:e})},e.prototype.needRefresh=function(){var e=!0,t=this.parent.element.querySelector(".e-gridform");return this.parent.enableVirtualization&&"Normal"===this.parent.editSettings.mode&&!t&&(e=!1),e},e.prototype.refreshRow=function(e){var t=this.parent.getFrozenColumns(),r=new B(this.serviceLocator,null,this.parent),i=this.parent.getRowObjectFromUID(this.uid);if(i&&(i.changes=e,this.parent.notify("refresh-virtual-cache",e),mr(i,this.parent.getForeignKeyColumns(),i.changes),this.needRefresh()&&r.refresh(i,this.parent.getColumns(),!0),t)){var n=void 0,s=this.parent.element.querySelector("[data-uid="+i.uid+"]");n=Ut(s,"e-frozencontent")||Ut(s,"e-frozenheader")?this.parent.getMovableRows()[i.index].getAttribute("data-uid"):this.parent.getRows()[i.index].getAttribute("data-uid"),(i=this.parent.getRowObjectFromUID(n)).changes=e,r.refresh(i,this.parent.columns,!0),this.parent.editModule.checkLastRow(s)}},e.prototype.closeEdit=function(){var e=this;if(this.parent.isEdit){var t=this.parent,r=sf.base.extend(this.args,{requestType:"cancel",type:d,data:this.previousData,selectedRow:t.selectedRowIndex});if(t.notify("virtual-scroll-edit-cancel",r),this.blazorTemplate(),sf.base.isBlazor()){r.form=null}t.trigger(d,r,(function(r){"Dialog"===e.parent.editSettings.mode&&e.parent.notify("dialog-destroy",{}),t.isEdit=!1,e.stopEditStatus(),r.type=c,"Dialog"!==t.editSettings.mode&&(sf.base.isBlazor()&&t.isServerRendered?e.closeForm():e.refreshRow(r.data)),t.getContentTable().querySelector("tr.e-emptyrow")||t.getContentTable().querySelector("tr.e-row")||t.renderModule.emptyRow(),"Dialog"!==t.editSettings.mode&&t.selectRow(e.rowIndex),t.trigger(c,r),sf.base.isBlazor()&&(e.parent.notify(R,{}),e.parent.notify("close-edit",{}))}))}},e.prototype.addRecord=function(e,t){var r=this,i=this.parent;if(this.addedRowIndex=t=sf.base.isNullOrUndefined(t)?0:t,e)i.notify(b,{requestType:"save",type:d,data:e,selectedRow:0,action:"add",index:t});else if(!i.isEdit){this.previousData={},this.uid="";for(var n=i.columnModel,s=0;s<n.length;s++)n[s].field&&sf.data.DataUtil.setValue(n[s].field,n[s].defaultValue,this.previousData);var o={cancel:!1,foreignKeyData:{},requestType:"add",data:this.previousData,type:d,index:t,rowData:this.previousData,target:void 0},a={virtualData:{}};if(this.parent.notify("get-virtual-data",a),this.parent.enableVirtualization&&Object.keys(a.virtualData).length&&(o.data=o.rowData=a.virtualData),sf.base.isBlazor()){o.form=null}i.trigger(d,o,(function(e){e.cancel||(i.isEdit=!0,"Dialog"!==i.editSettings.mode&&i.clearSelection(),r.renderer.addNew(e),i.editModule.applyFormValidation(),e.type=c,e.row=i.element.querySelector(".e-addedrow"),i.trigger(c,e),sf.base.isBlazor()&&(r.parent.notify(R,{}),r.parent.notify("start-add",{})),r.args=e)}))}},e.prototype.deleteRecord=function(e,t){if(this.editRowIndex=this.parent.selectedRowIndex,t){t=t instanceof Array?t:[t];var r=this.parent,i=Object.keys(t).length;e=e||this.parent.getPrimaryKeyFieldNames()[0];for(var n=function(i){var n,s,o=r.currentViewData.some((function(r){return s=r,t[i]===Sr(e,r)||t[i]===r}));t[i]=o?s:((n={})[e]=t[i],n)},s=0;s<i;s++)n(s)}var o={requestType:"delete",type:d,foreignKeyData:{},data:t||this.parent.getSelectedRecords(),tr:this.parent.getSelectedRows(),cancel:!1};if(sf.base.isNullOrUndefined(this.parent.commandDelIndex)||(o.data[0]=this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute("data-uid")).data),this.parent.enableVirtualization&&o.data.length>1){var a=this.parent.getSelectedRows()[0].getAttribute("data-uid");o.data=[this.parent.getRowObjectFromUID(a).data]}sf.base.isBlazor()&&!this.parent.isJsComponent&&(o.data=o.data[0]),this.parent.notify(b,o)},e.prototype.stopEditStatus=function(){var e,t,r=this.parent,i=r.element.querySelector(".e-addedrow");r.getFrozenColumns()&&(e=r.element.querySelectorAll(".e-addedrow")[1],t=r.element.querySelectorAll(".e-editedrow")[1],e&&sf.base.remove(e),t&&t.classList.remove("e-editedrow")),i&&sf.base.remove(i),(i=r.element.querySelector(".e-editedrow"))&&i.classList.remove("e-editedrow")},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("crud-Action",this.editHandler,this),this.parent.on("double-tap",this.dblClickHandler,this),this.parent.on(S,this.clickHandler,this),this.parent.on("recordAdded",this.requestSuccess,this),this.parent.on("dblclick",this.dblClickHandler,this),this.parent.on("delete-complete",this.editComplete,this),this.parent.on("save-complete",this.editComplete,this),this.parent.on("closeinline",this.closeForm,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("crud-Action",this.editHandler),this.parent.off("double-tap",this.dblClickHandler),this.parent.off(S,this.clickHandler),this.parent.off("recordAdded",this.requestSuccess),this.parent.off("dblclick",this.dblClickHandler),this.parent.off("delete-complete",this.editComplete),this.parent.off("save-complete",this.editComplete),this.parent.off("closeinline",this.closeForm))},e.prototype.destroy=function(){this.removeEventListener(),this.renderer.destroy()},e}(),_i=(Ei=function(e,t){return(Ei=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Ei(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Ki=function(e){function t(t,r,i){var n=e.call(this,t,r)||this;return n.parent=t,n.serviceLocator=r,n.renderer=i,n}return _i(t,e),t.prototype.closeEdit=function(){e.prototype.closeEdit.call(this)},t.prototype.addRecord=function(t,r){e.prototype.addRecord.call(this,t,r)},t.prototype.endEdit=function(){e.prototype.endEdit.call(this)},t.prototype.updateRow=function(t,r){e.prototype.updateRow.call(this,t,r)},t.prototype.deleteRecord=function(t,r){e.prototype.deleteRecord.call(this,t,r)},t.prototype.startEdit=function(t){e.prototype.startEdit.call(this,t)},t}(Gi),Wi=function(){function t(e,t,r){this.cellDetails={},this.originalCell={},this.cloneCell={},this.editNext=!1,this.preventSaveCell=!1,this.parent=e,this.serviceLocator=t,this.renderer=r,this.focus=t.getService("focus"),this.addEventListener()}return t.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(S,this.clickHandler,this),this.parent.on("dblclick",this.dblClickHandler,this),this.parent.on("beforecellfocused",this.onBeforeCellFocused,this),this.parent.on("cellfocused",this.onCellFocused,this),this.dataBoundFunction=this.dataBound.bind(this),this.batchCancelFunction=this.batchCancel.bind(this),this.parent.addEventListener(h,this.dataBoundFunction),this.parent.addEventListener("batchCancel",this.batchCancelFunction),this.parent.on("double-tap",this.dblClickHandler,this),this.parent.on(w,this.keyDownHandler,this),this.parent.on("editNextValCell",this.editNextValCell,this),this.parent.on("closebatch",this.closeForm,this))},t.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(S,this.clickHandler),this.parent.off("dblclick",this.dblClickHandler),this.parent.off("beforecellfocused",this.onBeforeCellFocused),this.parent.off("cellfocused",this.onCellFocused),this.parent.removeEventListener(h,this.dataBoundFunction),this.parent.removeEventListener("batchCancel",this.batchCancelFunction),this.parent.off("double-tap",this.dblClickHandler),this.parent.off(w,this.keyDownHandler),this.parent.off("editNextValCell",this.editNextValCell),this.parent.off("closebatch",this.closeForm))},t.prototype.batchCancel=function(e){this.parent.focusModule.restoreFocus()},t.prototype.dataBound=function(){this.parent.notify(R,{})},t.prototype.destroy=function(){this.removeEventListener()},t.prototype.clickHandler=function(e){Ut(e.target,this.parent.element.id+"_add",!0)||(this.parent.isEdit&&(this.saveCell(),this.editNextValCell()),Ut(e.target,"e-rowcell")&&!this.parent.isEdit&&this.setCellIdx(e.target))},t.prototype.dblClickHandler=function(e){var t=Ut(e.target,"e-rowcell"),r=Ut(e.target,"e-row");t&&r&&!isNaN(parseInt(t.getAttribute("aria-colindex"),10))&&!t.parentElement.classList.contains("e-editedrow")&&this.editCell(parseInt(r.getAttribute("aria-rowindex"),10),this.parent.getColumns()[parseInt(t.getAttribute("aria-colindex"),10)].field,this.isAddRow(parseInt(r.getAttribute("aria-rowindex"),10)))},t.prototype.onBeforeCellFocused=function(e){this.parent.isEdit&&this.validateFormObj()&&(e.byClick||["tab","shiftTab","enter","shiftEnter"].indexOf(e.keyArgs.action)>-1)&&(e.cancel=!0,e.byClick?e.clickArgs.preventDefault():e.keyArgs.preventDefault())},t.prototype.onCellFocused=function(e){var t=this.parent.getFrozenColumns(),r=this.parent.getContent().querySelector(".e-movablecontent"),i=this.parent.getHeaderContent().querySelector(".e-movableheader"),n=!(e.container.isContent&&e.container.isDataCell||this.parent.frozenRows&&e.container.isHeader);if(e.byKey&&!n){var s=e.container.indexes,o=s[0],a=s[1];t&&(r.contains(e.element)||this.parent.frozenRows&&i.contains(e.element))&&(a+=t),this.parent.frozenRows&&e.container.isContent&&(o+=this.parent.frozenRows);var l=this.parent.isEdit;if(!this.parent.element.querySelectorAll(".e-popup-open").length)switch(l=l&&!this.validateFormObj(),e.keyArgs.action){case"tab":case"shiftTab":var d=this.parent.getColumns()[e.indexes[1]];d&&!this.parent.isEdit&&this.editCell(e.indexes[0],d.field),(l||this.parent.isLastCellPrimaryKey)&&this.editCellFromIndex(o,a);break;case"enter":case"shiftEnter":e.keyArgs.preventDefault(),l&&this.editCell(o,this.cellDetails.column.field);break;case"f2":this.editCellFromIndex(o,a),this.focus.focus()}}else this.parent.isEdit&&n&&this.saveCell()},t.prototype.isAddRow=function(e){return this.parent.getDataRows()[e].classList.contains("e-insertedrow")},t.prototype.editCellFromIndex=function(e,t){this.cellDetails.rowIndex=e,this.cellDetails.cellIndex=t,this.editCell(e,this.parent.getColumns()[t].field,this.isAddRow(e))},t.prototype.closeEdit=function(){var e=this.parent,t=this.parent.getRowsObject(),r={cancel:!1,batchChanges:this.getBatchChanges()};if(e.notify("before-batch-cancel",r),!r.cancel){!(e.frozenColumns&&t.length<2*this.parent.currentViewData.length)||sf.base.isBlazor()&&e.isServerRendered||t.push.apply(t,this.parent.getMovableRowsObject());var i=this.parent.getColumns();if(sf.base.isBlazor())for(var n=0;n<i.length;n++){var s=i[n];s.template&&sf.base.updateBlazorTemplate(this.parent.element.id+s.uid,"Template",s,!1)}var o,a,l=new B(this.serviceLocator,null,this.parent);e.isEdit&&this.saveCell(!0),this.isAdded=!1,e.clearSelection();for(n=0;n<t.length;n++)if(t[n].isDirty&&(e.frozenColumns&&(e.getMovableRowsObject()[t[n].index].isDirty=!0),o=e.getContentTable().querySelector("[data-uid="+t[n].uid+"]"),e.frozenRows&&!o&&(o=e.getHeaderContent().querySelector("[data-uid="+t[n].uid+"]")),e.frozenColumns&&(e.frozenRows&&(a=e.getHeaderContent().querySelector(".e-movableheader").querySelector("[data-uid="+t[n].uid+"]"))||(a=e.getContent().querySelector(".e-movablecontent").querySelector("[data-uid="+t[n].uid+"]"))),o||a)){if(o&&o.classList.contains("e-insertedrow")||a&&a.classList.contains("e-insertedrow"))o&&sf.base.remove(o),a&&(e.frozenColumns||e.frozenRows)&&sf.base.remove(a),this.removeRowObjectFromUID(t[n].uid),n--;else{mr(t[n],this.parent.getForeignKeyColumns(),t[n].data),delete t[n].changes,delete t[n].edit,t[n].isDirty=!1;var d=a||o;sf.base.isBlazor()&&e.isServerRendered?(e.getFrozenColumns()&&this.removeHideAndSelection(a),this.removeHideAndSelection(o),this.closeForm()):(sf.base.classList(d,[],["e-hiddenrow","e-updatedtd"]),l.refresh(t[n],e.getColumns(),!1))}if(this.parent.aggregates.length>0){var c=[];c.type="cancel",this.parent.notify("refresh-footer-rendered",c),this.parent.groupSettings.columns.length>0&&this.parent.notify("group-aggregates",c)}}sf.base.isBlazor()&&e.isServerRendered&&e.selectRow(e.selectionModule.prevRowIndex),e.getContentTable().querySelector("tr.e-row")||e.renderModule.renderEmptyRow();var h=this.parent.getRowsObject();e.notify("batchCancel",{rows:this.parent.getRowsObject().length?this.parent.getRowsObject():[new M({isDataRow:!0,cells:[new k({isDataCell:!0,visible:!0})]})]}),e.selectRow(this.cellDetails.rowIndex),this.refreshRowIdx(),e.notify(R,{}),this.parent.notify("tooltip-destroy",{}),h={requestType:"batchCancel",rows:this.parent.getRowsObject()},e.trigger("batchCancel",h),e.frozenColumns&&t.splice(this.parent.getMovableRowsObject().length,t.length)}},t.prototype.removeHideAndSelection=function(e){if(e.classList.contains("e-hiddenrow")){e.removeAttribute("aria-selected");for(var t=[].slice.call(e.querySelectorAll(".e-selectionbackground")),r=0;r<t.length;r++)sf.base.removeClass([t[r]],["e-selectionbackground","e-active"])}sf.base.classList(e,[],["e-hiddenrow","e-updatedtd"])},t.prototype.deleteRecord=function(e,t){this.saveCell(),this.validateFormObj()&&this.saveCell(!0),this.isAdded=!1,this.bulkDelete(e,t),this.parent.aggregates.length>0&&(this.parent.notify("refresh-footer-rendered",{}),this.parent.groupSettings.columns.length>0&&this.parent.notify("group-aggregates",{}))},t.prototype.addRecord=function(e){this.bulkAddRow(e)},t.prototype.endEdit=function(e){this.parent.isEdit&&this.validateFormObj()||this.batchSave()},t.prototype.closeForm=function(){for(var e=0;e<Object.keys(this.originalCell).length;e++)for(var t=0;t<Object.keys(this.cloneCell).length;t++)Object.keys(this.originalCell)[e]===Object.keys(this.cloneCell)[t]&&(this.cloneCell[Object.keys(this.cloneCell)[t]].replaceWith(this.originalCell[Object.keys(this.originalCell)[e]]),this.originalCell[Object.keys(this.originalCell)[e]].classList.contains("e-selectionbackground")&&this.originalCell[Object.keys(this.originalCell)[e]].classList.remove("e-selectionbackground","e-cellselectionbackground","e-active"));this.cloneCell={},this.originalCell={}},t.prototype.validateFormObj=function(){return this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate()},t.prototype.batchSave=function(){var e=this,t=this.parent;if(t.isCheckBoxSelection){var r=t.element.querySelector(".e-checkselectall").parentElement;r.classList.contains("e-checkbox-disabled")&&t.pageSettings.totalRecordsCount>t.currentViewData.length&&sf.base.removeClass([r],["e-checkbox-disabled"])}var i=this.parent.getColumns();if(sf.base.isBlazor())for(var n=0;n<i.length;n++){var s=i[n];s.template&&(sf.base.blazorTemplates[this.parent.element.id+s.uid]=[],sf.base.resetBlazorTemplate(this.parent.element.id+s.uid,"Template"))}if(this.saveCell(),!(t.isEdit||this.editNextValCell()||t.isEdit)){var o=this.getBatchChanges();"Multiple"===this.parent.selectionSettings.type&&o.deletedRecords.length&&this.parent.selectionSettings.persistSelection&&(o.deletedRecords=this.removeSelectedData,this.removeSelectedData=[]);var a={changedRecords:this.parent.getRowsObject().filter((function(e){return e.isDirty&&-1===["add","delete"].indexOf(e.edit)})).map((function(e){return e.data}))},l={batchChanges:o,cancel:!1};t.trigger("beforeBatchSave",l,(function(r){if(!r.cancel){if(sf.base.isBlazor()&&e.parent.isServerRendered){var i=e.parent.getContent();if(e.closeForm(),sf.base.removeClass(i.querySelectorAll(".e-updatedtd"),["e-updatedtd"]),i.querySelector(".e-insertedrow, .e-hiddenrow")){sf.base.removeClass(i.querySelectorAll(".e-hiddenrow"),["e-hiddenrow"]);for(var n=[].slice.call(i.querySelectorAll(".e-insertedrow")),s=0;s<n.length;s++)n[s].remove()}e.refreshRowIdx()}t.showSpinner(),t.notify("bulk-save",{changes:o,original:a})}}))}},t.prototype.getBatchChanges=function(){for(var e={addedRecords:[],deletedRecords:[],changedRecords:[]},t=0,r=this.parent.getRowsObject();t<r.length;t++){var i=r[t];if(i.isDirty)switch(i.edit){case"add":e.addedRecords.push(i.changes);break;case"delete":e.deletedRecords.push(i.data);break;default:e.changedRecords.push(i.changes)}}return e},t.prototype.removeRowObjectFromUID=function(e){for(var t=this.parent.getRowsObject(),r=0,i=t.length;r<i&&t[r].uid!==e;r++);t.splice(r,1)},t.prototype.addRowObject=function(e){var t="Top"===this.parent.editSettings.newRowPosition,r=this.parent.getFrozenColumns();if(r){var i=this.parent.getMovableRowsObject(),n=e.clone();n.cells=n.cells.slice(r),e.cells=e.cells.slice(0,r),t?i.unshift(n):i.push(n)}t?this.parent.getRowsObject().unshift(e):this.parent.getRowsObject().push(e)},t.prototype.bulkDelete=function(e,t){var r=this;this.removeSelectedData=[];var i=this.parent,n=i.selectedRowIndex,s=i.getSelectedRows(),o={primaryKey:this.parent.getPrimaryKeyFieldNames(),rowIndex:n,rowData:t||i.getSelectedRecords()[0],cancel:!1};(sf.base.isBlazor()&&!this.parent.isJsComponent||(o.row=t?i.editModule.deleteRowUid?i.getRowElementByUID(i.editModule.deleteRowUid):i.getRows()[i.getCurrentViewRecords().indexOf(t)]:t?i.getRows()[n]:s[0],o.row))&&i.trigger("beforeBatchDelete",o,(function(e){if(!e.cancel){if(r.removeSelectedData=i.getSelectedRecords(),i.clearSelection(),e.row=e.row?e.row:t?i.getRows()[n]:s[0],r.parent.getFrozenColumns()){t&&(n=parseInt(e.row.getAttribute("aria-rowindex"),10),s=[e.row],Ut(e.row,"e-frozencontent")||Ut(e.row,"e-frozenheader")?s=s.concat(i.getMovableRowByIndex(n)):(Ut(e.row,"e-movablecontent")||Ut(e.row,"e-movableheader"))&&(s=s.concat(i.getFrozenRowByIndex(n))));for(var o=0;o<s.length;o++){var a=s[o].getAttribute("data-uid");if(s[o].classList.contains("e-insertedrow"))r.removeRowObjectFromUID(a),sf.base.remove(s[o]);else(c=i.getRowObjectFromUID(a)).isDirty=!0,c.edit="delete",sf.base.classList(s[o],["e-hiddenrow","e-updatedtd"],[]),i.frozenRows&&n<i.frozenRows&&i.getMovableDataRows().length>=i.frozenRows&&(i.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody").appendChild(i.getMovableRowByIndex(i.frozenRows-1)),i.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody").appendChild(i.getRowByIndex(i.frozenRows-1))),i.frozenRows&&n<i.frozenRows&&i.getDataRows().length>=i.frozenRows&&i.getHeaderContent().querySelector("tbody").appendChild(i.getRowByIndex(i.frozenRows-1));delete s[o]}}else if(r.parent.getFrozenColumns()||1!==s.length&&!t)for(o=0;o<s.length;o++){var l=s[o].getAttribute("data-uid");if(s[o].classList.contains("e-insertedrow"))r.removeRowObjectFromUID(l),sf.base.remove(s[o]);else{sf.base.classList(s[o],["e-hiddenrow","e-updatedtd"],[]);var d=i.getRowObjectFromUID(l);d.isDirty=!0,d.edit="delete",delete s[o]}}else{var c;a=e.row.getAttribute("data-uid");if(a=t&&r.parent.editModule.deleteRowUid?a=r.parent.editModule.deleteRowUid:a,e.row.classList.contains("e-insertedrow"))r.removeRowObjectFromUID(a),sf.base.remove(e.row);else(c=i.getRowObjectFromUID(a)).isDirty=!0,c.edit="delete",sf.base.classList(e.row,["e-hiddenrow","e-updatedtd"],[]);delete e.row}r.refreshRowIdx(),t&&(i.editModule.deleteRowUid=void 0,i.getSelectedRows().length&&(n=parseInt(i.getSelectedRows()[0].getAttribute("aria-rowindex"),10))),i.selectRow(n),i.trigger("batchDelete",e),i.notify("batchDelete",{rows:r.parent.getRowsObject()}),i.notify(R,{})}}))},t.prototype.refreshRowIdx=function(){var e=[],t=[],r=[],i=this.parent.getFrozenColumns();if(this.parent.frozenRows&&(e=[].slice.call(this.parent.getHeaderTable().querySelector("tbody").children),i)){t=[].slice.call(this.parent.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody").children);for(var n=0;n<t.length;n++)r[n]=this.parent.createElement("tr",{className:"emptynonmv"})}i&&(t=t.concat([].slice.call(this.parent.getContentTable().querySelector("tbody").children)),r=r.concat([].slice.call(this.parent.element.querySelector(".e-movablecontent").querySelector("tbody").children)));n=0;for(var s=0,o=(e=e.concat([].slice.call(this.parent.getContentTable().querySelector("tbody").children))).length;n<o;n++)e[n].classList.contains("e-row")&&!e[n].classList.contains("e-hiddenrow")?(e[n].setAttribute("aria-rowindex",s.toString()),i&&(t[n].setAttribute("aria-rowindex",s.toString()),r[n].classList.contains("e-row")&&r[n].setAttribute("aria-rowindex",s.toString())),s++):(e[n].removeAttribute("aria-rowindex"),i&&t[n].removeAttribute("aria-rowindex"))},t.prototype.getIndexFromData=function(e){return Vt(e,this.parent.getCurrentViewRecords())},t.prototype.bulkAddRow=function(t){var r=this,i=this.parent;if(i.editSettings.allowAdding&&(i.isEdit&&(this.saveCell(),this.parent.notify("editNextValCell",{})),!i.isEdit)){this.parent.element.classList.add("e-editing");var n={defaultData:t||this.getDefaultData(),primaryKey:i.getPrimaryKeyFieldNames(),cancel:!1};i.trigger("beforeBatchAdd",n,(function(n){if(!n.cancel){var s,o;r.isAdded=!0,i.clearSelection();for(var a,l,d=new B(r.serviceLocator,null,r.parent),c=new P(r.parent).generateRows([n.defaultData]),h=d.render(c[0],i.getColumns()),p=0;p<r.parent.groupSettings.columns.length;p++)h.insertBefore(r.parent.createElement("td",{className:"e-indentcell"}),h.firstChild),c[0].cells.unshift(new k({cellType:e.CellType.Indent}));var u=i.getContentTable().querySelector("tbody");if(h.classList.add("e-insertedrow"),u.querySelector(".e-emptyrow"))if(u.querySelector(".e-emptyrow").remove(),r.parent.getFrozenColumns())r.parent.getContent().querySelector(".e-movablecontent").querySelector("tbody").firstElementChild.remove();i.getFrozenColumns()&&(s=r.renderMovable(h),o=i.frozenRows&&"Top"===i.editSettings.newRowPosition?i.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody"):i.getContent().querySelector(".e-movablecontent").querySelector("tbody"),"Top"===r.parent.editSettings.newRowPosition?o.insertBefore(s,o.firstChild):o.appendChild(s),sf.base.addClass(s.querySelectorAll(".e-rowcell"),["e-updatedtd"]),"auto"===r.parent.height&&r.parent.notify("frozenHeight",{})),u=i.frozenRows&&"Top"===i.editSettings.newRowPosition?i.getHeaderContent().querySelector("tbody"):i.getContent().querySelector("tbody"),"Top"===r.parent.editSettings.newRowPosition?u.insertBefore(h,u.firstChild):u.appendChild(h),sf.base.addClass(h.querySelectorAll(".e-rowcell"),["e-updatedtd"]),c[0].isDirty=!0,c[0].changes=sf.base.extend({},{},c[0].data,!0),c[0].edit="add",r.addRowObject(c[0]),r.refreshRowIdx(),r.focus.forgetPrevious(),i.notify("batchAdd",{rows:r.parent.getRowsObject(),args:{isFrozen:r.parent.getFrozenColumns()}});var f=r.getBatchChanges(),g=r.parent.getCurrentViewRecords().length+f.addedRecords.length-f.deletedRecords.length-1;"Top"===r.parent.editSettings.newRowPosition?i.selectRow(0):i.selectRow(g),t||(l=r.findNextEditableCell(0,!0),a=i.getColumns()[l],"Top"===r.parent.editSettings.newRowPosition?r.editCell(0,a.field,!0):r.editCell(g,a.field,!0)),r.parent.aggregates.length>0&&(t||f.addedRecords.length)&&r.parent.notify("refresh-footer-rendered",{});var m={defaultData:n.defaultData,row:h,columnObject:a,columnIndex:l,primaryKey:n.primaryKey,cell:h.cells[l]};i.trigger("batchAdd",m),i.getFrozenColumns()&&Ar(s.querySelector("td:not(.e-hide)"),h.querySelector("td:not(.e-hide)")),sf.base.isBlazor()&&(r.parent.notify(R,{}),r.parent.notify("start-add",{}))}}))}},t.prototype.renderMovable=function(e){for(var t=e.cloneNode(!0),r=0;r<this.parent.getFrozenColumns();r++)t.removeChild(t.children[0]);r=this.parent.getFrozenColumns();for(var i=e.childElementCount;r<i;r++)e.removeChild(e.children[e.childElementCount-1]);return t},t.prototype.findNextEditableCell=function(e,t,r){for(var i,n=this.parent.getColumns(),s=n.length,o=e;o<s;o++){if(i=!!r&&sf.base.isNullOrUndefined(n[o].validationRules),!t&&this.checkNPCell(n[o]))return o;if(t&&!n[o].template&&n[o].visible&&n[o].allowEditing&&(!n[o].isIdentity||!n[o].isPrimaryKey)&&!i)return o}return-1},t.prototype.checkNPCell=function(e){return!e.template&&e.visible&&!e.isPrimaryKey&&!e.isIdentity&&e.allowEditing},t.prototype.getDefaultData=function(){for(var e={},t={number:0,string:null,boolean:!1,date:null,datetime:null},r=0,i=this.parent.columnModel;r<i.length;r++){var n=i[r];n.field&&sf.base.setValue(n.field,n.defaultValue?n.defaultValue:t[n.type],e)}return e},t.prototype.setCellIdx=function(e){var t=0;this.parent.allowGrouping&&(t=this.parent.groupSettings.columns.length),this.cellDetails.cellIndex=e.cellIndex-t,this.cellDetails.rowIndex=parseInt(e.getAttribute("index"),10)},t.prototype.editCell=function(e,t,r){var i=this.parent,n=i.getColumnByField(t);this.index=e,this.field=t,this.isAdd=r;var s=i.isEdit&&!(this.cellDetails.column.field===t&&this.cellDetails.rowIndex===e&&this.parent.getDataRows().length-1!==e);this.parent.element.classList.add("e-editing"),sf.base.isBlazor()&&n.template&&!r&&sf.base.resetBlazorTemplate(this.parent.element.id+n.uid,"Template",e),i.editSettings.allowEditing&&(!s&&n.allowEditing?this.editCellExtend(e,t,r):s&&(this.editNext=!0,this.saveCell()))},t.prototype.editCellExtend=function(e,t,r){var i=this,n=this.parent,s=n.getColumnByField(t),o=n.getPrimaryKeyFieldNames();if(!n.isEdit){var a,l,d,c=n.getColumnIndexByField(t),h=n.getFrozenColumns();if(h&&c>=h?(a=n.getMovableDataRows()[e],d=this.parent.getRowObjectFromUID(this.parent.getMovableDataRows()[e].getAttribute("data-uid")),l=d.changes?sf.base.extend({},{},d.changes,!0):sf.base.extend({},{},this.getDataByIndex(e),!0)):(a=n.getDataRows()[e],l=sf.base.extend({},{},this.getDataByIndex(e),!0)),o[0]===s.field&&!a.classList.contains("e-insertedrow")||s.columns||s.isPrimaryKey&&s.isIdentity)this.parent.isLastCellPrimaryKey=!0;else{this.parent.isLastCellPrimaryKey=!1;var p=n.getRowObjectFromUID(a.getAttribute("data-uid")),u=[].slice.apply(a.cells),f={columnName:s.field,isForeignKey:!sf.base.isNullOrUndefined(s.foreignKeyValue),primaryKey:o,rowData:l,validationRules:sf.base.extend({},s.validationRules?s.validationRules:{}),value:Sr(s.field,l),type:r?"add":"edit",cancel:!1,foreignKeyData:p&&p.foreignKeyData};(sf.base.isBlazor()&&!this.parent.isJsComponent||(f.cell=u[this.getColIndex(u,this.getCellIdx(s.uid))],f.row=a,f.columnObject=s,f.cell))&&n.trigger("cellEdit",f,(function(t){if(!t.cancel){if(t.cell=t.cell?t.cell:u[i.getColIndex(u,i.getCellIdx(s.uid))],t.row=t.row?t.row:a,t.columnObject=t.columnObject?t.columnObject:s,t.columnObject.index=sf.base.isNullOrUndefined(t.columnObject.index)?0:t.columnObject.index,i.cellDetails={rowData:l,column:s,value:t.value,isForeignKey:t.isForeignKey,rowIndex:e,cellIndex:parseInt(t.cell.getAttribute("aria-colindex"),10),foreignKeyData:t.foreignKeyData},t.cell.classList.contains("e-updatedtd")&&(i.isColored=!0,t.cell.classList.remove("e-updatedtd")),sf.base.isBlazor()&&n.isServerRendered){var r=t.row.querySelectorAll(".e-indentcell, .e-detailrowcollapse, .e-detailrowexpand, .e-rowdragdrop").length;i.cloneCell[""+i.cellDetails.rowIndex+t.columnObject.index]=t.cloneCell=t.cell.cloneNode(!0),Ut(t.cell,"e-movableheader")||Ut(t.cell,"e-movablecontent")?(t.row.insertCell(t.columnObject.index-n.getFrozenColumns()),t.row.replaceChild(t.cloneCell,t.row.cells[t.columnObject.index-n.getFrozenColumns()])):(t.row.insertCell(t.columnObject.index+r),t.row.replaceChild(t.cloneCell,t.row.cells[t.columnObject.index+r])),i.originalCell[""+i.cellDetails.rowIndex+t.columnObject.index]=t.cell.parentElement.removeChild(t.cell),sf.base.removeClass([i.cloneCell[""+i.cellDetails.rowIndex+t.columnObject.index]],["e-focus","e-focused"])}n.isEdit=!0,n.clearSelection(),n.isCheckBoxSelection&&n.isPersistSelection||n.selectRow(i.cellDetails.rowIndex,!0),i.renderer.update(t),i.parent.notify("batcheditform-rendered",t),i.form=n.element.querySelector("#"+n.element.id+"EditForm"),n.editModule.applyFormValidation([s]),i.parent.element.querySelector(".e-gridpopup").style.display="none"}}))}}},t.prototype.updateCell=function(e,t,r){var i=this.parent.getColumnByField(t),n=this.parent.getColumnIndexByField(t);if(i&&!i.isPrimaryKey){var s=this.parent.getDataRows()[e].querySelectorAll(".e-rowcell")[n];if(this.parent.getFrozenColumns())s=[].slice.call(this.parent.getDataRows()[e].querySelectorAll(".e-rowcell")).concat([].slice.call(this.parent.getMovableDataRows()[e].querySelectorAll(".e-rowcell")))[n];var o=this.parent.getRowObjectFromUID(s.parentElement.getAttribute("data-uid"));this.refreshTD(s,i,o,r),this.parent.trigger("queryCellInfo",{cell:s,column:i,data:o.changes})}},t.prototype.setChanges=function(e,t,r,i){var n;if(this.parent.getFrozenColumns()){var s=this.parent.getRowElementByUID(e.uid),o=parseInt(s.getAttribute("aria-rowindex"),10);(n=this.parent.getRowsObject()[o]).changes||(n.changes=sf.base.extend({},{},e.data,!0)),sf.base.isNullOrUndefined(t)||sf.base.setValue(t,r,n.changes);var a=void 0;if(sf.base.isBlazor()&&this.parent.isServerRendered&&(Ut(i,"e-movableheader")||Ut(i,"e-movablecontent"))){var l=this.parent.getMovableRowByIndex(this.cellDetails.rowIndex),d=parseInt(l.getAttribute("aria-rowindex"),10);a=this.parent.getMovableRowsObject()[d]}else a=this.parent.getRowObjectFromUID(e.uid);a.changes=sf.base.extend({},{},n.changes,!0),e.data[t]!==r&&(a.isDirty=!0,n.isDirty=!0)}else e.changes||(e.changes=sf.base.extend({},{},e.data,!0)),sf.base.isNullOrUndefined(t)||sf.data.DataUtil.setValue(t,r,e.changes),e.data[t]!==r&&(e.isDirty=!0)},t.prototype.updateRow=function(e,t){for(var r=0,i=Object.keys(t);r<i.length;r++){var n=i[r];this.updateCell(e,n,t[n])}},t.prototype.getCellIdx=function(e){var t=this.parent.getColumnIndexByUid(e)+this.parent.groupSettings.columns.length;return sf.base.isNullOrUndefined(this.parent.detailTemplate)&&sf.base.isNullOrUndefined(this.parent.childGrid)||t++,this.parent.isRowDragable()&&t++,t},t.prototype.refreshTD=function(e,t,r,i){var n,s=new G(this.parent,this.serviceLocator);i="number"!==t.type||sf.base.isNullOrUndefined(i)?i:parseFloat(i),this.setChanges(r,t.field,i,e);var o=this.parent.getFrozenColumns();mr(r,this.parent.getForeignKeyColumns(),r.changes),n=o&&this.getCellIdx(t.uid)>=o&&this.parent.getColumns().length===r.cells.length?r.cells.slice(o,r.cells.length):r.cells,s.refreshTD(e,n[this.getCellIdx(t.uid)-(this.getCellIdx(t.uid)>=o?o:0)],r.changes,{index:this.getCellIdx(t.uid)}),e.classList.add("e-updatedtd"),this.parent.notify(R,{})},t.prototype.getColIndex=function(e,t){var r=0;this.parent.allowGrouping&&this.parent.groupSettings.columns&&(r=this.parent.groupSettings.columns.length),sf.base.isNullOrUndefined(this.parent.detailTemplate)&&sf.base.isNullOrUndefined(this.parent.childGrid)||r++,this.parent.isRowDragable()&&r++;for(var i=0;i<e.length;i++){if(parseInt(e[i].getAttribute("aria-colindex"),10)===t-r)return i}return-1},t.prototype.editNextValCell=function(){var e=this.parent,t=this.getBatchChanges(),r=this.parent.getCurrentViewRecords().length+t.addedRecords.length-t.deletedRecords.length-1;if(this.isAdded&&!e.isEdit){for(var i=this.cellDetails.cellIndex;i<e.getColumns().length;i++){if(e.isEdit)return;var n=this.findNextEditableCell(this.cellDetails.cellIndex+1,!0,!0),s=e.getColumns()[n];s&&("Bottom"===this.parent.editSettings.newRowPosition?this.editCell(r,s.field,!0):this.editCell(0,s.field,!0),this.saveCell())}e.isEdit||(this.isAdded=!1)}},t.prototype.escapeCellEdit=function(){var e=this.generateCellArgs();e.value=e.previousValue,this.successCallBack(e,e.cell.parentElement,e.column,!0)(e)},t.prototype.generateCellArgs=function(){var e=this.parent;this.parent.element.classList.remove("e-editing");var t=this.cellDetails.column,r={};r[t.field]=this.cellDetails.rowData[t.field];var i=e.editModule.getCurrentEditedData(this.form,r),n=sf.base.extend({},i);i=sf.base.extend({},i,this.cellDetails.rowData);var s=Sr(t.field,n);sf.base.isNullOrUndefined(t.field)||sf.base.isUndefined(s)||sf.base.setValue(t.field,s,i);var o={columnName:t.field,value:Sr(t.field,i),rowData:this.cellDetails.rowData,column:t,previousValue:this.cellDetails.value,isForeignKey:this.cellDetails.isForeignKey,cancel:!1};return sf.base.isBlazor()&&!this.parent.isJsComponent||(o.cell=this.form.parentElement,o.columnObject=t),o},t.prototype.saveCell=function(e){if(!this.preventSaveCell){var t=this.parent;if(e||t.isEdit&&!this.validateFormObj()){this.preventSaveCell=!0;var r=this.generateCellArgs(),i=sf.base.isBlazor()?Ut(this.form,"e-row"):r.cell.parentElement,n=sf.base.isBlazor()?this.cellDetails.column:r.column;sf.base.isBlazor()&&delete r.column,e?this.successCallBack(r,i,n)(r):(t.trigger("cellSave",r,this.successCallBack(r,i,n)),t.notify("batchedit-form",{formObj:this.form}))}}},t.prototype.successCallBack=function(e,t,r,i){var n=this;return function(e){var s=n.parent;if(e.cell=e.cell?e.cell:n.form.parentElement,e.columnObject=e.columnObject?e.columnObject:r,e.columnObject.index=sf.base.isNullOrUndefined(e.columnObject.index)?0:e.columnObject.index,e.cancel){if(n.preventSaveCell=!1,n.editNext){if(n.editNext=!1,n.cellDetails.rowIndex===n.index&&n.cellDetails.column.field===n.field)return;n.editCellExtend(n.index,n.field,n.isAdd)}}else{if(s.editModule.destroyWidgets([r]),s.isEdit=!1,s.editModule.destroyForm(),sf.base.isBlazor()&&r.template&&!e.cell.parentElement.classList.contains("e-insertedrow")&&sf.base.updateBlazorTemplate(s.element.id+r.uid,"Template",r,!1),n.parent.notify("tooltip-destroy",{}),sf.base.isBlazor()&&s.isServerRendered&&(Ut(e.cell,"e-movableheader")||Ut(e.cell,"e-movablecontent")))n.refreshTD(e.cell,r,s.getMovableRowsObject()[n.cellDetails.rowIndex],e.value);else{var o=Ut(e.cell,"e-movablecontent")?s.getMovableRowsObject()[n.cellDetails.rowIndex]:s.getRowObjectFromUID(t.getAttribute("data-uid"));n.refreshTD(e.cell,r,o,e.value)}if(sf.base.removeClass([t],["e-editedrow","e-batchrow"]),sf.base.removeClass([e.cell],["e-editedbatchcell","e-boolcell"]),(!sf.base.isNullOrUndefined(e.value)&&e.value.toString()===(sf.base.isNullOrUndefined(n.cellDetails.value)?"":n.cellDetails.value).toString()&&!n.isColored||sf.base.isNullOrUndefined(e.value)&&sf.base.isNullOrUndefined(n.cellDetails.value)&&!e.cell.parentElement.classList.contains("e-insertedrow"))&&(e.cell.classList.remove("e-updatedtd"),sf.base.isBlazor()&&s.isServerRendered&&(sf.base.isNullOrUndefined(e.value)?"":e.value).toString()===(sf.base.isNullOrUndefined(n.cellDetails.value)?"":n.cellDetails.value).toString()&&(n.cloneCell[""+n.cellDetails.rowIndex+e.columnObject.index].classList.contains("e-selectionbackground")?n.originalCell[""+n.cellDetails.rowIndex+e.columnObject.index].classList.add("e-selectionbackground","e-active"):n.originalCell[""+n.cellDetails.rowIndex+e.columnObject.index].classList.remove("e-selectionbackground","e-active"),n.cloneCell[""+n.cellDetails.rowIndex+e.columnObject.index].replaceWith(n.originalCell[""+n.cellDetails.rowIndex+e.columnObject.index]))),sf.base.isNullOrUndefined(i)&&s.trigger("cellSaved",e),s.notify(R,{}),n.isColored=!1,n.parent.aggregates.length>0&&(n.parent.notify("refresh-footer-rendered",{}),n.parent.groupSettings.columns.length>0&&!n.isAddRow(n.cellDetails.rowIndex)&&n.parent.notify("group-aggregates",{})),n.preventSaveCell=!1,n.editNext){if(n.editNext=!1,n.cellDetails.rowIndex===n.index&&n.cellDetails.column.field===n.field)return;var a=s.getColumnByField(n.field);a&&a.allowEditing&&n.editCellExtend(n.index,n.field,n.isAdd)}}}},t.prototype.getDataByIndex=function(e){var t=this.parent.getRowObjectFromUID(this.parent.getDataRows()[e].getAttribute("data-uid"));return t.changes?t.changes:t.data},t.prototype.keyDownHandler=function(e){if(("tab"===e.action||"shiftTab"===e.action)&&this.parent.isEdit){var t=this.parent,r=this.getBatchChanges(),i=this.parent.getCurrentViewRecords().length+r.addedRecords.length-r.deletedRecords.length-1,n=Ut(e.target,"e-rowcell");if(n){var s=n.querySelector(".e-field");if(s){var o=this.parent.getVisibleColumns();o["tab"===e.action?o.length-1:0].field===s.getAttribute("id").slice(this.parent.element.id.length)&&(this.cellDetails.rowIndex===i&&"tab"===e.action?"Top"===t.editSettings.newRowPosition?(t.editSettings.newRowPosition="Bottom",this.addRecord(),t.editSettings.newRowPosition="Top"):this.addRecord():this.saveCell())}}}},t.prototype.addCancelWhilePaging=function(){this.validateFormObj()&&(this.parent.notify("destroy-form",{}),this.parent.isEdit=!1,this.isColored=!1)},t}(),Qi=(Di=function(e,t){return(Di=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Di(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Ji=function(e){function t(t,r,i){var n=e.call(this,t,r)||this;return n.parent=t,n.serviceLocator=r,n.renderer=i,n}return Qi(t,e),t.prototype.closeEdit=function(){e.prototype.closeEdit.call(this)},t.prototype.addRecord=function(t,r){e.prototype.addRecord.call(this,t,r)},t.prototype.endEdit=function(){e.prototype.endEdit.call(this)},t.prototype.updateRow=function(t,r){e.prototype.updateRow.call(this,t,r)},t.prototype.deleteRecord=function(t,r){e.prototype.deleteRecord.call(this,t,r)},t.prototype.startEdit=function(t){e.prototype.startEdit.call(this,t)},t}(Gi),Xi=function(){function e(e){this.parent=e}return e.prototype.create=function(e){var t=ir(e.column.field);return this.parent.createElement("input",{className:"e-field",attrs:{id:this.parent.element.id+t,name:t,type:"text","e-mappinguid":e.column.uid}})},e.prototype.read=function(e){return e.ej2_instances[0].value},e.prototype.write=function(e){"datepickeredit"===e.column.editType?this.obj=new sf.calendars.DatePicker(sf.base.extend(Yi(e,this.parent.editSettings.mode,this.parent.enableRtl),e.column.edit.params)):"datetimepickeredit"===e.column.editType&&(this.obj=new sf.calendars.DateTimePicker(sf.base.extend(Yi(e,this.parent.editSettings.mode,this.parent.enableRtl),e.column.edit.params))),sf.base.isBlazor()&&(this.obj.locale=this.parent.locale),this.obj.appendTo(e.element)},e.prototype.destroy=function(){this.obj&&this.obj.destroy()},e}();function Yi(e,t,r){var i="Dialog"!==t,n=xr(e.column.format,e.column.type),s=Sr(e.column.field,e.rowData);return{floatLabelType:i?"Never":"Always",value:s=s?new Date(s):null,format:n,placeholder:i?"":e.column.headerText,enableRtl:r,enabled:sr(e.column,e.requestType,e.element)}}var $i,Zi,en,tn,rn=function(){function e(e){this.parent=e}return e.prototype.read=function(e,t){return t},e.prototype.write=function(){},e.prototype.destroy=function(){},e}(),nn=function(){function e(e,t){this.editType={Inline:Ki,Normal:Ki,Batch:Wi,Dialog:Ji},this.parent=e,this.serviceLocator=t,this.l10n=this.serviceLocator.getService("localization"),this.addEventListener(),this.updateEditObj(),this.createAlertDlg(),this.createConfirmDlg()}return e.prototype.updateColTypeObj=function(){for(var t=this.parent.columnModel,r=0;r<t.length;r++)if(this.parent.editSettings.template||t[r].editTemplate){t[r].edit=sf.base.extend(new e.editCellType.templateedit(this.parent),t[r].edit||{})}else t[r].edit=sf.base.extend(new e.editCellType[t[r].editType&&e.editCellType[t[r].editType]?t[r].editType:"defaultedit"](this.parent,this.serviceLocator),t[r].edit||{});this.parent.log("primary_column_missing")},e.prototype.getModuleName=function(){return"edit"},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName())for(var t=this.parent,r=(e.properties,0),i=Object.keys(e.properties);r<i.length;r++){switch(i[r]){case"allowAdding":case"allowDeleting":case"allowEditing":(t.editSettings.allowAdding||t.editSettings.allowEditing||t.editSettings.allowDeleting)&&this.initialEnd();break;case"mode":this.updateEditObj(),t.isEdit=!1,t.refresh()}}},e.prototype.updateEditObj=function(){this.editModule&&this.editModule.destroy(),this.renderer=new qi(this.parent,this.serviceLocator),this.editModule=new this.editType[this.parent.editSettings.mode](this.parent,this.serviceLocator,this.renderer)},e.prototype.initialEnd=function(){this.updateColTypeObj()},e.prototype.startEdit=function(e){var t=this.parent;if(t.editSettings.allowEditing&&!t.isEdit&&"Batch"!==t.editSettings.mode){if(this.parent.element.classList.add("e-editing"),t.getSelectedRows().length)e||(e=t.getSelectedRows()[0]);else if(!e)return void this.showDialog("EditOperationAlert",this.alertDObj);this.isLastRow=e.rowIndex===this.parent.getContent().querySelector("tr:last-child").rowIndex,"none"!==e.style.display&&(this.editModule.startEdit(e),sf.base.isBlazor()||(this.refreshToolbar(),t.element.querySelector(".e-gridpopup").style.display="none",this.parent.notify("start-edit",{})))}},e.prototype.checkLastRow=function(e,t){var r=this.isLastRow;"auto"!==this.parent.height&&"Bottom"===this.parent.editSettings.newRowPosition&&t&&"add"===t.requestType&&this.parent.height>this.parent.getContentTable().scrollHeight?sf.base.addClass(e.querySelectorAll(".e-rowcell"),"e-lastrowadded"):r&&sf.base.addClass(e.querySelectorAll(".e-rowcell"),"e-lastrowcell")},e.prototype.closeEdit=function(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&this.parent.element.querySelectorAll(".e-updatedtd").length?this.showDialog("CancelEdit",this.dialogObj):(this.parent.element.classList.remove("e-editing"),this.editModule.closeEdit(),sf.base.isBlazor()||(this.refreshToolbar(),this.parent.notify("close-edit",{})))},e.prototype.refreshToolbar=function(){this.parent.notify(R,{})},e.prototype.addRecord=function(e,t){if(this.parent.editSettings.allowAdding){var r={startEdit:!0};e||this.parent.notify("virtual-scroll-add-action-begin",r),r.startEdit&&(this.parent.element.classList.add("e-editing"),this.editModule.addRecord(e,t),sf.base.isBlazor()||(this.refreshToolbar(),this.parent.notify("start-add",{})))}},e.prototype.deleteRecord=function(e,t){var r=this.parent;r.editSettings.allowDeleting&&(t||r.getSelectedRecords().length||!sf.base.isNullOrUndefined(r.commandDelIndex)?r.editSettings.showDeleteConfirmDialog?this.showDialog("ConfirmDelete",this.dialogObj):this.editModule.deleteRecord(e,t):this.showDialog("DeleteOperationAlert",this.alertDObj))},e.prototype.deleteRow=function(e){this.deleteRowUid=e.getAttribute("data-uid");var t=this.parent.getRowObjectFromUID(this.deleteRowUid);sf.base.isNullOrUndefined(t)||this.deleteRecord(null,t.data)},e.prototype.endEdit=function(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&(sf.base.isNullOrUndefined(this.formObj)||this.formObj.validate())&&(this.parent.editModule.saveCell(),this.parent.notify("editNextValCell",{}),sf.base.isNullOrUndefined(this.formObj)||this.formObj.validate())?this.showDialog("BatchSaveConfirm",this.dialogObj):this.endEditing()},e.prototype.updateCell=function(e,t,r){this.editModule.updateCell(e,t,r)},e.prototype.updateRow=function(e,t){this.editModule.updateRow(e,t)},e.prototype.batchCancel=function(){this.closeEdit()},e.prototype.batchSave=function(){this.endEdit()},e.prototype.editCell=function(e,t){this.editModule.editCell(e,t)},e.prototype.editFormValidate=function(){return!!this.formObj&&this.formObj.validate()},e.prototype.getBatchChanges=function(){return this.editModule.getBatchChanges?this.editModule.getBatchChanges():{}},e.prototype.getCurrentEditCellData=function(){var e=this.getCurrentEditedData(this.formObj.element,{});return e[Object.keys(e)[0]]},e.prototype.saveCell=function(){this.editModule.saveCell()},e.prototype.endEditing=function(){this.parent.element.classList.remove("e-editing"),this.editModule.endEdit(),this.refreshToolbar()},e.prototype.showDialog=function(e,t){t.content="<div>"+this.l10n.getConstant(e)+"</div>",t.dataBind(),t.show()},e.prototype.getValueFromType=function(e,t){var r=t;switch(e.type){case"number":r=isNaN(parseFloat(t))?null:parseFloat(t);break;case"boolean":"booleanedit"!==e.editType&&(r=t===this.l10n.getConstant("True")||!0===t);break;case"date":case"datetime":"datepickeredit"!==e.editType&&"datetimepickeredit"!==e.editType&&t&&t.length?r=new Date(t):""===t&&(r=null)}return r},e.prototype.destroyToolTip=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-griderror"));e<t.length;e++){var r=t[e];sf.base.remove(r)}this.parent.getContent().firstElementChild.style.position="relative"},e.prototype.createConfirmDlg=function(){this.dialogObj=this.dlgWidget([{click:this.dlgOk.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.dlgCancel.bind(this),buttonModel:{cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}],"EditConfirm")},e.prototype.createAlertDlg=function(){this.alertDObj=this.dlgWidget([{click:this.alertClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:"e-flat",isPrimary:!0}}],"EditAlert")},e.prototype.alertClick=function(){this.alertDObj.hide()},e.prototype.dlgWidget=function(e,t){var r=this.parent.createElement("div",{id:this.parent.element.id+t});this.parent.element.appendChild(r);var i={showCloseIcon:!1,isModal:!0,visible:!1,closeOnEscape:!0,target:this.parent.element,width:"320px",animationSettings:{effect:"None"}};i.buttons=e;var n=new sf.popups.Dialog(i);return n.isStringTemplate=!0,n.appendTo(r),n},e.prototype.dlgCancel=function(){this.parent.focusModule.clearIndicator(),this.parent.focusModule.restoreFocus(),this.dialogObj.hide()},e.prototype.dlgOk=function(e){switch(this.dialogObj.element.querySelector(".e-dlg-content").firstElementChild.innerText){case this.l10n.getConstant("ConfirmDelete"):this.editModule.deleteRecord();break;case this.l10n.getConstant("CancelEdit"):this.editModule.closeEdit();break;case this.l10n.getConstant("BatchSaveConfirm"):this.endEditing();break;case this.l10n.getConstant("BatchSaveLostChanges"):"Batch"===this.parent.editSettings.mode&&(this.editModule.addCancelWhilePaging(),sf.base.isBlazor()&&this.parent.isServerRendered&&this.editModule.closeEdit()),this.executeAction()}this.dlgCancel()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(v,this.onPropertyChanged,this),this.parent.on(u,this.initialEnd,this),this.parent.on(w,this.keyPressHandler,this),this.parent.on(I,this.updateColTypeObj,this),this.parent.on("tooltip-destroy",this.destroyToolTip,this),this.parent.on(T,this.preventBatch,this),this.parent.on("destroy-form",this.destroyForm,this),this.actionBeginFunction=this.onActionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(d,this.actionBeginFunction),this.parent.addEventListener(c,this.actionCompleteFunction))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(v,this.onPropertyChanged),this.parent.off(u,this.initialEnd),this.parent.off(w,this.keyPressHandler),this.parent.off(I,this.updateColTypeObj),this.parent.off("tooltip-destroy",this.destroyToolTip),this.parent.off(T,this.preventBatch),this.parent.off("destroy-form",this.destroyForm),this.parent.removeEventListener(c,this.actionCompleteFunction),this.parent.removeEventListener(d,this.actionBeginFunction))},e.prototype.actionComplete=function(e){["add","beginEdit","save","delete","cancel"].indexOf(e.requestType)<0&&(this.parent.isEdit=!1),"batchsave"===e.requestType&&this.parent.focusModule.restoreFocus(),this.refreshToolbar()},e.prototype.getCurrentEditedData=function(e,t){var r=this.parent;if(r.editSettings.template){for(var i=[].slice.call(e.elements),n=0;n<i.length;n++)if(i[n].hasAttribute("name")&&"e-multi-hidden"!==i[n].className||i[n].classList.contains("e-multiselect")){var s=i[n].hasAttribute("name")?nr(i[n].getAttribute("name")):nr(i[n].getAttribute("id")),o=r.getColumnByField(s)||{field:s,type:i[n].getAttribute("type")},a=void 0;"checkbox"===o.type||"boolean"===o.type?a=i[n].checked:i[n].value?(a=i[n].value,i[n].ej2_instances&&i[n].ej2_instances.length&&!sf.base.isNullOrUndefined(i[n].ej2_instances[0].value)&&(i[n].blur(),a=i[n].ej2_instances[0].value,"date"!==o.type&&"dateTime"!==o.type&&"datetime"!==o.type||!i[n].ej2_instances[0].isServerRendered||(a=i[n].value))):i[n].ej2_instances&&(a=i[n].ej2_instances[0].value),o.edit&&"string"==typeof o.edit.read?a=sf.base.getValue(o.edit.read,window)(i[n],a):o.edit&&o.edit.read&&(a=o.edit.read(i[n],a)),a=r.editModule.getValueFromType(o,a),sf.data.DataUtil.setValue(o.field,a,t)}return t}for(var l=r.columnModel.filter((function(e){return e.editTemplate})),d=0;d<l.length;d++)if(e[ir(l[d].field)]){var c=[].slice.call(e[ir(l[d].field)]),h=(c=c.length?c:[e[ir(l[d].field)]]).filter((function(e){return!sf.base.isNullOrUndefined(e.ej2_instances)}));0===h.length&&(h=c.filter((function(e){return e.hasAttribute("name")})));for(n=0;n<h.length;n++){a=this.getValue(l[d],h[n],t);sf.data.DataUtil.setValue(l[d].field,a,t)}}for(var p=[].slice.call(e.querySelectorAll(".e-field")),u=0,f=p.length;u<f;u++){var g=r.getColumnByUid(p[u].getAttribute("e-mappinguid"));if(g&&g.field){a=this.getValue(g,p[u],t);sf.data.DataUtil.setValue(g.field,a,t)}}return t},e.prototype.getValue=function(e,t,r){var i=!t.ej2_instances||sf.base.isBlazor()&&t.ej2_instances[0].isServerRendered&&("date"===e.type||"datetime"===e.type)?t.value:t.ej2_instances[0].value,n=this.parent,s=e.edit.read;return"checkbox"!==e.type&&"boolean"!==e.type||(i=t.checked),"string"==typeof s?(s=sf.base.getValue(s,window),i=n.editModule.getValueFromType(e,s(t,i))):i=n.editModule.getValueFromType(e,e.edit.read(t,i)),sf.base.isNullOrUndefined(r[e.field])&&""===i&&(i=r[e.field]),i},e.prototype.onActionBegin=function(e){if("columnstate"===e.requestType&&this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode)this.closeEdit();else{"Batch"!==this.parent.editSettings.mode&&this.formObj&&!this.formObj.isDestroyed&&-1===["filterafteropen","filterbeforeopen","filterchoicerequest","save"].indexOf(e.requestType)&&(this.destroyWidgets(),this.destroyForm())}},e.prototype.destroyWidgets=function(e){this.parent.editSettings.template&&this.parent.destroyTemplate(["editSettingsTemplate"]),(e=e||this.parent.getColumns()).some((function(e){return!sf.base.isNullOrUndefined(e.editTemplate)}))&&this.parent.destroyTemplate(["editTemplate"]);for(var t=0,r=e;t<r.length;t++){var i=r[t],n=i.edit.destroy;sf.base.isBlazor()&&i.editTemplate&&(sf.base.resetBlazorTemplate(this.parent.element.id+i.uid+"editTemplate","EditTemplate"),sf.base.updateBlazorTemplate(this.parent.element.id+i.uid+"editTemplate","EditTemplate",i,!1)),i.edit.destroy&&("string"==typeof n?(n=sf.base.getValue(n,window))():i.edit.destroy())}for(var s=[].slice.call(this.formObj.element.elements),o=0;o<s.length;o++)s[o].hasAttribute("name")&&s[o].ej2_instances&&s[o].ej2_instances.length&&!s[o].ej2_instances[0].isDestroyed&&s[o].ej2_instances[0].destroy()},e.prototype.destroyForm=function(){this.destroyToolTip(),this.formObj&&!this.formObj.isDestroyed&&this.formObj.destroy(),this.destroyToolTip()},e.prototype.destroy=function(){var e=this.parent.element;if(e){var t=!(!e.querySelector(".e-gridheader")||!e.querySelector(".e-gridcontent"));t&&this.destroyForm(),this.removeEventListener();var r=this.dialogObj.element;r.childElementCount>0&&(this.dialogObj.destroy(),sf.base.remove(r)),(r=this.alertDObj.element).childElementCount>0&&(this.alertDObj.destroy(),sf.base.remove(r)),t&&this.editModule&&this.editModule.destroy()}},e.prototype.keyPressHandler=function(e){switch(e.action){case"insert":this.addRecord();break;case"delete":"INPUT"===e.target.tagName&&!e.target.classList.contains("e-checkselect")||document.querySelector(".e-popup-open")||this.deleteRecord();break;case"f2":this.startEdit();break;case"enter":Ut(e.target,"e-unboundcelldiv")||"Batch"===this.parent.editSettings.mode||!(Ut(e.target,"e-gridcontent")||this.parent.frozenRows&&Ut(e.target,"e-headercontent"))||document.querySelectorAll(".e-popup-open").length||(e.preventDefault(),this.endEdit());break;case"escape":this.parent.isEdit&&("Batch"===this.parent.editSettings.mode?this.editModule.escapeCellEdit():this.closeEdit())}},e.prototype.preventBatch=function(e){this.preventObj=e,this.showDialog("BatchSaveLostChanges",this.dialogObj)},e.prototype.executeAction=function(){this.preventObj.handler.call(this.preventObj.instance,this.preventObj.arg1,this.preventObj.arg2,this.preventObj.arg3,this.preventObj.arg4,this.preventObj.arg5,this.preventObj.arg6,this.preventObj.arg7,this.preventObj.arg8)},e.prototype.applyFormValidation=function(e){var t=this.parent,r=t.getFrozenColumns(),i="Dialog"!==this.parent.editSettings.mode?t.element.querySelector(".e-gridform"):document.querySelector("#"+t.element.id+"_dialogEdit_wrapper").querySelector(".e-gridform"),n=t.element.querySelectorAll(".e-gridform")[1],s={},o={};e=e||t.getColumns();for(var a=0;a<e.length;a++)e[a].visible&&(sf.base.isBlazor()&&e[a].editTemplate||(a<r&&e[a].validationRules?s[ir(e[a].field)]=e[a].validationRules:a>=r&&e[a].validationRules&&(o[ir(e[a].field)]=e[a].validationRules)));r&&"Dialog"!==this.parent.editSettings.mode?this.parent.editModule.mFormObj=this.createFormObj(n,o):s=sf.base.extend(s,o),sf.base.isBlazor()&&this.parent.editSettings.template?this.parent.editModule.formObj=this.createFormObj(i,{}):this.parent.editModule.formObj=this.createFormObj(i,s)},e.prototype.createFormObj=function(e,t){var r=this;return new sf.inputs.FormValidator(e,{rules:t,locale:this.parent.locale,validationComplete:function(e){r.validationComplete(e)},customPlacement:function(e,t){var i=e.getAttribute("e-mappinguid"),n={column:r.parent.getColumnByUid(i),error:t,inputElement:e,value:e.value};r.valErrorPlacement(e,t),r.parent.notify("validation-custom-placement",n)}})},e.prototype.valErrorPlacement=function(e,t){if(this.parent.isEdit){var r=t.getAttribute("for"),i=this.getElemTable(e).querySelector("#"+r+"_Error");i?i.querySelector(".e-tip-content").innerHTML=t.outerHTML:this.createTooltip(e,t,r,"")}},e.prototype.getElemTable=function(e){var t;return"Dialog"!==this.parent.editSettings.mode&&(t=this.parent.frozenRows&&this.parent.frozenRows>(parseInt(sf.base.closest(e,".e-row").getAttribute("aria-rowindex"),10)||0)),"Dialog"!==this.parent.editSettings.mode?t?this.parent.getHeaderTable():this.parent.getContentTable():document.querySelector("#"+this.parent.element.id+"_dialogEdit_wrapper")},e.prototype.validationComplete=function(e){if(this.parent.isEdit){var t=this.getElemTable(e.element).querySelector("#"+e.inputName+"_Error");t&&("failure"===e.status?t.style.display="":t.style.display="none")}},e.prototype.createTooltip=function(e,t,r,i){var n=this.parent.getContent().firstElementChild;this.parent.getFrozenColumns()&&(n=this.parent.getMovableVirtualContent());var s,o,a=n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth,l="Dialog"!==this.parent.editSettings.mode,d=sf.base.closest(e,".e-rowcell"),c=sf.base.closest(e,".e-row"),h=this.parent.getContent().querySelector(".e-frozencontent"),p=!1,u=!1,f=Math.round(this.parent.getContent().clientHeight/this.parent.getRowHeight())-1,g=h?[].slice.call(this.parent.getFrozenVirtualContent().querySelectorAll(".e-row")):[].slice.call(this.parent.getContent().querySelectorAll(".e-row"));if("Batch"===this.parent.editSettings.mode&&f>1&&g.length>=f&&g[g.length-1].getAttribute("aria-rowindex")===c.getAttribute("aria-rowindex")&&(u=!0),l){if(this.parent.frozenRows){var m=this.parent.getFrozenColumns()?this.parent.getFrozenVirtualHeader().querySelector("tbody").children:this.parent.getHeaderTable().querySelector("tbody").children;p=(s=m.length>(parseInt(c.getAttribute("aria-rowindex"),10)||0))&&parseInt(c.getAttribute("aria-rowindex"),10)===m.length-1}(p||f>1&&g.length>=f&&("Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType||d.classList.contains("e-lastrowcell")&&!c.classList.contains("e-addedrow"))||u)&&(o=!0)}var y=l?s?this.parent.getHeaderTable():this.parent.getContentTable():document.querySelector("#"+this.parent.element.id+"_dialogEdit_wrapper").querySelector(".e-dlg-content"),v=y.getBoundingClientRect(),b=l?this.parent.element.getBoundingClientRect().left:v.left,C=sf.base.closest(e,"td"),w=C?C.getBoundingClientRect():e.parentElement.getBoundingClientRect(),S=this.parent.createElement("div",{className:"e-tooltip-wrap e-lib e-control e-popup e-griderror",id:r+"_Error",styles:"display:"+i+";top:"+((s?w.top+w.height:w.bottom-v.top-(this.parent.getFrozenColumns()?h.scrollTop:0))+y.scrollTop+9)+"px;left:"+(w.left-b+y.scrollLeft+w.width/2)+"px;max-width:"+w.width+"px;text-align:center;"});l&&v.left<b&&(S.style.left=parseInt(S.style.left,10)-v.left+b+"px");var x,R=this.parent.createElement("div",{className:"e-tip-content"});(R.appendChild(t),o?((x=this.parent.createElement("div",{className:"e-arrow-tip e-tip-bottom"})).appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"})),x.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom"}))):((x=this.parent.createElement("div",{className:"e-arrow-tip e-tip-top"})).appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),x.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-top"}))),S.appendChild(R),S.appendChild(x),(this.parent.getFrozenColumns()||this.parent.frozenRows)&&"Dialog"!==this.parent.editSettings.mode)?(("Normal"===this.parent.editSettings.mode?sf.base.closest(e,".e-editcell"):sf.base.closest(e,".e-table")).style.position="relative",S.style.position="absolute","Batch"===this.parent.editSettings.mode||sf.base.closest(e,".e-frozencontent")||sf.base.closest(e,".e-frozenheader")||this.parent.frozenRows&&!this.parent.getFrozenColumns()?this.formObj.element.appendChild(S):this.mFormObj.element.appendChild(S)):this.formObj.element.appendChild(S);!o&&l&&n.getBoundingClientRect().bottom<w.bottom+w.height&&(n.scrollTop=n.scrollTop+S.offsetHeight+x.scrollHeight);var I=parseInt(document.defaultView.getComputedStyle(S,null).getPropertyValue("font-size"),10);if(S.getBoundingClientRect().width<w.width&&S.querySelector("label").getBoundingClientRect().height/(1.2*I)>=2&&(S.style.width=S.style.maxWidth),!this.parent.getFrozenColumns()&&!this.parent.frozenRows||"Normal"!==this.parent.editSettings.mode&&"Batch"!==this.parent.editSettings.mode?S.style.left=parseInt(S.style.left,10)-S.offsetWidth/2+"px":S.style.left=C.offsetLeft+(C.offsetWidth/2-S.offsetWidth/2)+"px",l&&!a&&!this.parent.allowPaging||this.parent.getFrozenColumns()||this.parent.frozenRows){n.style.position="static";var T=sf.popups.calculateRelativeBasedPosition(C,S);S.style.top=T.top+w.height+9+"px"}if(o){if(!a||this.parent.getFrozenColumns()||"auto"===this.parent.height||this.parent.frozenRows||this.parent.enableVirtualization)S.style.bottom=w.height+9+"px";else{var E=n.scrollWidth>n.offsetWidth?er():0;S.style.bottom=this.parent.height-n.querySelector("table").offsetHeight-E+w.height+9+"px"}if(g.length<f&&"Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType){var D=(this.parent.frozenRows?this.parent.frozenRows+(g.length-1):g.length-1)*this.parent.getRowHeight(),F=this.parent.getContent().clientHeight-D;S.style.bottom=F+9+"px"}S.style.top=null}},e.prototype.checkColumnIsGrouped=function(e){return!(e.visible||this.parent.groupSettings.columns.indexOf(e.field)>-1)},e.AddEditors=function(t){e.editCellType=sf.base.extend(e.editCellType,t)},e.editCellType={dropdownedit:Ui,numericedit:ji,datepickeredit:Xi,datetimepickeredit:Xi,booleanedit:Hi,defaultedit:Vi,templateedit:rn},e}(),sn=function(){function e(e,t){this.showColumn=[],this.hideColumn=[],this.changedColumns=[],this.unchangedColumns=[],this.isDlgOpen=!1,this.dlghide=!1,this.initialOpenDlg=!0,this.stateChangeColumns=[],this.changedStateColumns=[],this.isInitialOpen=!1,this.isCustomizeOpenCC=!1,this.searchOperator="startswith",this.prevShowedCols=[],this.parent=e,this.serviceLocator=t,this.addEventListener(),this.cBoxTrue=sf.buttons.createCheckBox(this.parent.createElement,!0,{checked:!0,label:" "}),this.cBoxFalse=sf.buttons.createCheckBox(this.parent.createElement,!0,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden e-cc e-cc-chbox",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden e-cc e-cc-chbox",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&sf.base.addClass([this.cBoxTrue,this.cBoxFalse],["e-rtl"])}return e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.removeEventListener(),this.unWireEvents(),sf.base.isNullOrUndefined(this.dlgObj)||!this.dlgObj.element||this.dlgObj.isDestroyed||this.dlgObj.destroy())},e.prototype.rtlUpdate=function(){this.parent.enableRtl?sf.base.addClass(this.innerDiv.querySelectorAll(".e-checkbox-wrapper"),["e-rtl"]):sf.base.removeClass(this.innerDiv.querySelectorAll(".e-checkbox-wrapper"),["e-rtl"])},e.prototype.addEventListener=function(){this.parent.isDestroyed||(sf.base.EventHandler.add(document,"click",this.clickHandler,this),this.parent.on(m,this.enableAfterRenderEle,this),this.parent.on(u,this.render,this),this.parent.addEventListener(h,this.hideDialog.bind(this)),this.parent.on(x,this.destroy,this),this.parent.on("rtl-updated",this.rtlUpdate,this),this.parent.on(w,this.keyUpHandler,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(sf.base.EventHandler.remove(document,"click",this.clickHandler),this.parent.off(u,this.render),this.parent.off(x,this.destroy),this.parent.off(m,this.enableAfterRenderEle),this.parent.off("rtl-updated",this.rtlUpdate),this.parent.on(w,this.keyUpHandler,this))},e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.renderDlgContent(),this.getShowHideService=this.serviceLocator.getService("showHideService")},e.prototype.clickHandler=function(e){var t=e.target;if(!this.isCustomizeOpenCC){if(sf.base.isNullOrUndefined(sf.base.closest(t,".e-cc"))&&sf.base.isNullOrUndefined(sf.base.closest(t,".e-cc-toolbar")))sf.base.isNullOrUndefined(this.dlgObj)||!this.dlgObj.visible||t.classList.contains("e-toolbar-items")||(this.dlgObj.hide(),this.clearActions(),this.refreshCheckboxState(),this.isDlgOpen=!1);else if(t.classList.contains("e-columnchooser-btn")||t.classList.contains("e-cc-toolbar")){if(this.initialOpenDlg&&this.dlgObj.visible||!this.isDlgOpen)return void(this.isDlgOpen=!0)}else t.classList.contains("e-cc-cancel")&&(t.parentElement.querySelector(".e-ccsearch").value="",this.columnChooserSearch(""),this.removeCancelIcon(),this.refreshCheckboxButton());(this.parent.detailTemplate||this.parent.childGrid)&&(this.targetdlg=e.target)}this.isCustomizeOpenCC&&e.target.classList.contains("e-cc-cancel")&&this.refreshCheckboxState(),this.rtlUpdate()},e.prototype.hideDialog=function(){!sf.base.isNullOrUndefined(this.dlgObj)&&this.dlgObj.visible&&(this.dlgObj.hide(),this.isDlgOpen=!1)},e.prototype.renderColumnChooser=function(e,t,r){if(this.dlgObj.visible||!this.parent.detailTemplate&&!this.parent.childGrid||this.hideOpenedDialog(),this.dlgObj.visible)this.hideDialog(),this.addcancelIcon(),this.clearActions(),this.refreshCheckboxState();else{if(this.beforeOpenColumnChooserEvent().cancel)return;r&&(this.targetdlg=r),this.refreshCheckboxState(),this.dlgObj.dataBind(),this.dlgObj.element.style.maxHeight="430px";var i=this.dlgObj.element.style.display;this.dlgObj.element.style.display="block";var n=sf.popups.calculateRelativeBasedPosition(sf.base.closest(r,".e-toolbar-item"),this.dlgObj.element);this.dlgObj.element.style.display=i,this.dlgObj.element.style.top=n.top+sf.base.closest(r,".e-cc-toolbar").getBoundingClientRect().height+"px";sf.base.isNullOrUndefined(sf.base.closest(r,".e-bigger"))||(this.dlgObj.width=258),sf.base.Browser.isDevice?(this.dlgObj.target=document.body,this.dlgObj.position={X:"center",Y:"center"},this.dlgObj.refreshPosition(),this.dlgObj.open=this.mOpenDlg.bind(this)):this.parent.enableRtl?this.dlgObj.element.style.left=r.offsetLeft+"px":this.dlgObj.element.style.left=n.left-250+sf.base.closest(r,".e-cc-toolbar").clientWidth+2+"px",this.removeCancelIcon(),this.dlgObj.show(),this.parent.notify("columnChooserOpened",{dialog:this.dlgObj})}this.rtlUpdate()},e.prototype.openColumnChooser=function(e,t){(this.isCustomizeOpenCC=!0,this.dlgObj.visible)?this.hideDialog():this.beforeOpenColumnChooserEvent().cancel||(this.isInitialOpen?this.refreshCheckboxState():(this.dlgObj.content=this.renderChooserList(),this.updateIntermediateBtn()),this.dlgObj.dataBind(),this.dlgObj.position={X:"center",Y:"center"},sf.base.isNullOrUndefined(e)?(this.dlgObj.position={X:"center",Y:"center"},this.dlgObj.refreshPosition()):(this.dlgObj.element.style.top="",this.dlgObj.element.style.left="",this.dlgObj.element.style.top=t+"px",this.dlgObj.element.style.left=e+"px"),this.dlgObj.beforeOpen=this.customDialogOpen.bind(this),this.dlgObj.show(),this.isInitialOpen=!0,this.dlgObj.beforeClose=this.customDialogClose.bind(this))},e.prototype.enableAfterRenderEle=function(e){e.module===this.getModuleName()&&e.enable&&this.render()},e.prototype.keyUpHandler=function(e){"escape"===e.action&&this.hideDialog()},e.prototype.customDialogOpen=function(){var e=this.dlgObj.content.querySelector("input.e-ccsearch");sf.base.EventHandler.add(e,"keyup",this.columnChooserManualSearch,this)},e.prototype.customDialogClose=function(){var e=this.dlgObj.content.querySelector("input.e-ccsearch");sf.base.EventHandler.remove(e,"keyup",this.columnChooserManualSearch)},e.prototype.getColumns=function(){return this.parent.getColumns().filter((function(e){return"checkbox"!==e.type&&!0===e.showInColumnChooser||"checkbox"===e.type&&void 0!==e.field}))},e.prototype.renderDlgContent=function(){this.dlgDiv=this.parent.createElement("div",{className:"e-ccdlg e-cc",id:this.parent.element.id+"_ccdlg"}),this.dlgDiv.setAttribute("aria-label",this.l10n.getConstant("ColumnChooserDialogARIA")),this.parent.element.appendChild(this.dlgDiv);this.parent.element.getBoundingClientRect().width,this.parent.enableRtl;var e=this.parent.element.querySelector(".e-ccdiv");sf.base.isNullOrUndefined(e)||e.getBoundingClientRect().top,this.dlgObj=new sf.popups.Dialog({header:this.l10n.getConstant("ChooseColumns"),showCloseIcon:!1,closeOnEscape:!1,locale:this.parent.locale,visible:!1,enableRtl:this.parent.enableRtl,target:document.getElementById(this.parent.element.id),buttons:[{click:this.confirmDlgBtnClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),isPrimary:!0,cssClass:"e-cc e-cc_okbtn"}},{click:this.clearBtnClick.bind(this),buttonModel:{cssClass:"e-flat e-cc e-cc-cnbtn",content:this.l10n.getConstant("CancelButton")}}],content:this.renderChooserList(),width:250,cssClass:"e-cc",animationSettings:{effect:"None"}});this.dlgObj.isStringTemplate=!0,this.dlgObj.appendTo(this.dlgDiv),this.wireEvents()},e.prototype.renderChooserList=function(){this.mainDiv=this.parent.createElement("div",{className:"e-main-div e-cc"});var e=this.parent.createElement("div",{className:"e-cc-searchdiv e-cc e-input-group"}),t=this.parent.createElement("input",{className:"e-ccsearch e-cc e-input",attrs:{placeholder:this.l10n.getConstant("Search")}}),r=this.parent.createElement("span",{className:"e-ccsearch-icon e-icons e-cc e-input-group-icon",attrs:{title:this.l10n.getConstant("Search")}}),i=this.parent.createElement("div",{className:"e-cc-contentdiv"});this.innerDiv=this.parent.createElement("div",{className:"e-innerdiv e-cc"}),e.appendChild(t),e.appendChild(r),this.searchBoxObj=new je(t);var n=this.refreshCheckboxList(this.parent.getColumns());return this.innerDiv.appendChild(n),i.appendChild(this.innerDiv),this.mainDiv.appendChild(e),this.mainDiv.appendChild(i),this.mainDiv},e.prototype.confirmDlgBtnClick=function(e){var t=this;this.stateChangeColumns=[],this.changedStateColumns=[],this.changedColumns=this.changedColumns.length>0?this.changedColumns:this.unchangedColumns,this.changedColumnState(this.changedColumns);var r=this.ulElement.querySelector(".e-uncheck")&&this.ulElement.querySelectorAll(".e-uncheck:not(.e-selectall)").length;if(!sf.base.isNullOrUndefined(e)&&r<this.parent.getColumns().length){var i={requestType:"columnstate",columns:this.changedStateColumns,cancel:!1};this.parent.trigger(d,i,(function(e){if(e.cancel)return t.showColumn=[],t.hideColumn=[],void t.hideDialog();t.hideColumn.length&&t.columnStateChange(t.hideColumn,!1),t.showColumn.length&&t.columnStateChange(t.showColumn,!0);var r={requestType:"columnstate",columns:t.changedStateColumns};t.parent.trigger(c,r),t.getShowHideService.setVisible(t.stateChangeColumns,t.changedStateColumns),t.clearActions(),t.parent.notify("tooltip-destroy",{module:"edit"})}))}},e.prototype.changedColumnState=function(e){for(var t=0;t<e.length;t++){var r=e[t],i=this.parent.getColumnByUid(r);sf.base.isBlazor()?this.changedStateColumns.push(JSON.parse(JSON.stringify(i))):this.changedStateColumns.push(i)}},e.prototype.columnStateChange=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],n=this.parent.getColumnByUid(i);"checkbox"!==n.type&&(n.visible=t),sf.base.isBlazor()?this.stateChangeColumns.push(JSON.parse(JSON.stringify(n))):this.stateChangeColumns.push(n)}},e.prototype.clearActions=function(){this.hideColumn=[],this.showColumn=[],this.hideDialog(),this.addcancelIcon()},e.prototype.clearBtnClick=function(){this.clearActions(),this.parent.notify("columnChooserCancelBtnClick",{dialog:this.dlgObj})},e.prototype.checkstatecolumn=function(e,t,r){void 0===r&&(r=!1),e?(-1!==this.hideColumn.indexOf(t)&&this.hideColumn.splice(this.hideColumn.indexOf(t),1),-1===this.showColumn.indexOf(t)&&this.showColumn.push(t)):(-1!==this.showColumn.indexOf(t)&&this.showColumn.splice(this.showColumn.indexOf(t),1),-1===this.hideColumn.indexOf(t)&&this.hideColumn.push(t)),r?e?this.unchangedColumns.push(t):this.changedColumns.push(t):-1!==this.changedColumns.indexOf(t)?this.changedColumns.splice(this.changedColumns.indexOf(t),1):this.changedColumns.push(t)},e.prototype.columnChooserSearch=function(e){var t,r,i=!1,n=this.dlgDiv.querySelector(".e-footer-content"),s=this.ulElement.querySelector(".e-check")&&this.ulElement.querySelectorAll(".e-check:not(.e-selectall)").length;if(this.isInitialOpen=!0,n&&(r=n.querySelector(".e-btn").ej2_instances[0]),""===e?(this.removeCancelIcon(),t=this.getColumns(),i=!0):t=new sf.data.DataManager(this.getColumns()).executeLocal((new sf.data.Query).where("headerText",this.searchOperator,e,!0)),t.length)this.innerDiv.innerHTML=" ",this.innerDiv.classList.remove("e-ccnmdiv"),this.innerDiv.appendChild(this.refreshCheckboxList(t,e)),i?r&&s&&(r.disabled=!1):(this.addcancelIcon(),this.refreshCheckboxButton());else{var o=this.parent.createElement("span",{className:"e-cc e-nmatch"});o.innerHTML=this.l10n.getConstant("Matchs"),this.innerDiv.innerHTML=" ",this.innerDiv.appendChild(o),this.innerDiv.classList.add("e-ccnmdiv"),r&&(r.disabled=!0)}this.flag=!0,this.stopTimer()},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.dlgObj.element,"click",this.checkBoxClickHandler,this),sf.base.EventHandler.add(this.searchBoxObj.searchBox,"keyup",this.columnChooserManualSearch,this),this.searchBoxObj.wireEvent()},e.prototype.unWireEvents=function(){this.parent.isDestroyed||(this.dlgObj.element&&sf.base.EventHandler.remove(this.dlgObj.element,"click",this.checkBoxClickHandler),sf.base.EventHandler.remove(this.searchBoxObj.searchBox,"keyup",this.columnChooserManualSearch),this.searchBoxObj.unWireEvent())},e.prototype.checkBoxClickHandler=function(e){var t,r=Ut(e.target,"e-checkbox-wrapper");if(r){if(r.querySelector(".e-selectall")?this.updateSelectAll(!r.querySelector(".e-check")):ur(r.parentElement),r.querySelector(".e-chk-hidden").focus(),r.querySelector(".e-check"))t=!0;else{if(!r.querySelector(".e-uncheck"))return;t=!1}this.updateIntermediateBtn();var i=Ut(r,"e-ccheck").getAttribute("uid"),n=this.parent.getColumns();if("grid-selectAll"===i){this.changedColumns=[],this.unchangedColumns=[];for(var s=0;s<n.length;s++)n[s].showInColumnChooser&&this.checkstatecolumn(t,n[s].uid,!0)}else this.checkstatecolumn(t,i);this.refreshCheckboxButton()}},e.prototype.updateIntermediateBtn=function(){var e=this.ulElement.children.length-1,t=[],r=this.ulElement.children[0].querySelector(".e-frame"),i=this.ulElement.querySelectorAll(".e-check:not(.e-selectall)").length,n=this.dlgObj.btnObj[0];n.disabled=!1,e===i?t=["e-check"]:i?t=["e-stop"]:(t=["e-uncheck"],n.disabled=!0),n.dataBind(),sf.base.removeClass([r],["e-check","e-stop","e-uncheck"]),sf.base.addClass([r],t)},e.prototype.updateSelectAll=function(e){for(var t=0,r=[].slice.call(this.ulElement.querySelectorAll(".e-frame"));t<r.length;t++){gr(r[t],e)}},e.prototype.refreshCheckboxButton=function(){this.dlgObj.element.querySelector(".e-cc.e-input").value;for(var e,t=this.parent.getVisibleColumns(),r=0;r<t.length;r++){var i=t[r].uid;-1===this.prevShowedCols.indexOf(i)&&this.prevShowedCols.push(i)}for(r=0;r<this.hideColumn.length;r++){var n=this.prevShowedCols.indexOf(this.hideColumn[r]);-1!==n&&this.prevShowedCols.splice(n,1)}e=0!==this.showColumn.length?1:this.prevShowedCols.length;var s=this.dlgDiv.querySelector(".e-footer-content").querySelector(".e-btn").ej2_instances[0];s.disabled=!1;for(var o=[],a=this.parent.element.querySelectorAll(".e-cc-chbox"),l=(r=0,a.length);r<l;r++){i=Ut(a[r],"e-ccheck").getAttribute("uid");o.push(i)}var d=this.showColumn.filter((function(e){return-1!==o.indexOf(e)}));0===e&&0===d.length&&(s.disabled=!0),s.dataBind()},e.prototype.refreshCheckboxList=function(e,t){this.ulElement=this.parent.createElement("ul",{className:"e-ccul-ele e-cc"});var r=this.l10n.getConstant("SelectAll"),i=this.parent.createElement("li",{className:"e-cclist e-cc e-cc-selectall"}),n=this.createCheckBox(r,!1,"grid-selectAll");e.length&&(n.querySelector(".e-checkbox-wrapper").firstElementChild.classList.add("e-selectall"),n.querySelector(".e-frame").classList.add("e-selectall"),this.checkState(n.querySelector(".e-icons"),!0),i.appendChild(n),this.ulElement.appendChild(i));for(var s=0;s<e.length;s++){var o=e[s];this.renderCheckbox(o)}return this.ulElement},e.prototype.refreshCheckboxState=function(){this.dlgObj.element.querySelector(".e-cc.e-input").value="",this.columnChooserSearch("");for(var e=this.parent,t=this.dlgObj.element.querySelectorAll(".e-cc-chbox:not(.e-selectall)"),r=0,i=t.length;r<i;r++){var n=t[r],s=void 0;s=this.parent.childGrid||this.parent.detailTemplate?Ut(this.dlgObj.element.querySelectorAll(".e-cc-chbox:not(.e-selectall)")[r],"e-ccheck").getAttribute("uid"):Ut(n,"e-ccheck").getAttribute("uid"),e.getColumnByUid(s).visible?(n.checked=!0,this.checkState(n.parentElement.querySelector(".e-icons"),!0)):(n.checked=!1,this.checkState(n.parentElement.querySelector(".e-icons"),!1))}},e.prototype.checkState=function(e,t){t?sf.base.classList(e,["e-check"],["e-uncheck"]):sf.base.classList(e,["e-uncheck"],["e-check"])},e.prototype.createCheckBox=function(e,t,r){var i=t?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);return i.querySelector(".e-label").innerHTML=e,fr(r,i,"e-ccheck")},e.prototype.renderCheckbox=function(e){var t,r,i;if(e.showInColumnChooser){t=this.parent.createElement("li",{className:"e-cclist e-cc",styles:"list-style:None",id:"e-ccli_"+e.uid}),r=-1!==this.hideColumn.indexOf(e.uid),i=-1!==this.showColumn.indexOf(e.uid);var n=this.createCheckBox(e.headerText,e.visible&&!r||i,e.uid);t.appendChild(n),this.ulElement.appendChild(t)}this.isInitialOpen&&this.updateIntermediateBtn()},e.prototype.columnChooserManualSearch=function(e){this.addcancelIcon(),this.searchValue=e.target.value,this.stopTimer(),this.startTimer(e)},e.prototype.startTimer=function(e){var t=this,r=t.flag||13===e.keyCode?0:500;this.timer=window.setInterval((function(){t.columnChooserSearch(t.searchValue)}),r)},e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.addcancelIcon=function(){this.dlgDiv.querySelector(".e-cc.e-ccsearch-icon").classList.add("e-cc-cancel")},e.prototype.removeCancelIcon=function(){this.dlgDiv.querySelector(".e-cc.e-ccsearch-icon").classList.remove("e-cc-cancel")},e.prototype.mOpenDlg=function(){sf.base.Browser.isDevice&&(this.dlgObj.element.querySelector(".e-cc-searchdiv").classList.remove("e-input-focus"),this.dlgObj.element.querySelectorAll(".e-cc-chbox")[0].focus())},e.prototype.getModuleName=function(){return"columnChooser"},e.prototype.hideOpenedDialog=function(){for(var e=[].slice.call(document.getElementsByClassName("e-ccdlg")).filter((function(e){return e.classList.contains("e-popup-open")})),t=0,r=e.length;t<r;t++)(e[t].classList.contains("e-dialog")||this.parent.element.id+"_ccdlg"!==e[t].id)&&e[t].ej2_instances[0].hide()},e.prototype.beforeOpenColumnChooserEvent=function(){sf.base.isBlazor()&&this.parent.isServerRendered&&"none"===this.parent.columnChooserSettings.operator&&(this.parent.columnChooserSettings.operator="startsWith");var e={requestType:"beforeOpenColumnChooser",element:this.parent.element,columns:this.getColumns(),cancel:!1,searchOperator:this.parent.columnChooserSettings.operator};return sf.base.isBlazor()&&!this.parent.isJsComponent&&(e={requestType:"beforeOpenColumnChooser",cancel:!1,searchOperator:this.parent.columnChooserSettings.operator}),this.parent.trigger("beforeOpenColumnChooser",e),this.searchOperator=e.searchOperator,e},e}(),on=function(){function t(e){this.hideColumnInclude=!1,this.foreignKeyData={},this.parent=e}return t.getQuery=function(e,t){return t.isRemote()?t.generateQuery(!0).requiresCount().take(e.pageSettings.totalRecordsCount):t.generateQuery(!0).requiresCount()},t.prototype.getFData=function(e,t){return yr(t,{},e,this.foreignKeyData[t.field])[0]},t.prototype.getGridRowModel=function(e,t,r,i){void 0===i&&(i=0);var n=[],s=t.length;if(s){for(var o=0;o<s;o++,i++){var a={isExpand:!1};a.data=t[o],a.index=i,r.childGrid&&("All"===r.hierarchyPrintMode?a.isExpand=!0:"Expanded"===r.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[i]&&(a.isExpand=r.expandedRows[i].isExpand));var l=new M(a);l.cells=this.generateCells(e,r),n.push(l)}this.processColumns(n)}return n},t.prototype.generateCells=function(t,r){var i=[];if(r.childGridLevel)for(var n=r.childGridLevel,s=0;n>s;s++)i.push(this.generateCell({},e.CellType.Indent));for(var o=0,a=t;o<a.length;o++){var l=a[o];i.push(this.generateCell(l,e.CellType.Data))}return i},t.prototype.getColumnData=function(e){var t,r=this,i=[],n=e.getForeignKeyColumns();if(n.length){for(var s=0;s<n.length;s++){var o="result"in n[s].dataSource?new sf.data.DataManager(n[s].dataSource.result):n[s].dataSource;i.push(o.executeQuery(new sf.data.Query))}t=Promise.all(i).then((function(e){for(var t=0;t<n.length;t++)r.foreignKeyData[n[t].field]=e[t].result}))}return t},t.prototype.getHeaders=function(e,t){this.hideColumnInclude=!!t,this.colDepth=Dr(e);for(var r=[],i=0;i<this.colDepth;i++)r[i]=new M({}),r[i].cells=[];return r=this.processColumns(r),{rows:r=this.processHeaderCells(r,e),columns:this.generateActualColumns(e)}},t.prototype.getConvertedWidth=function(e){var t=parseFloat(e);return-1!==e.indexOf("%")?this.parent.element.getBoundingClientRect().width*t/100:t},t.prototype.generateActualColumns=function(e,t){void 0===t&&(t=[]);for(var r=0,i=e;r<i.length;r++){var n=i[r];if(!n.commands)if(n.columns){if(n.visible||this.hideColumnInclude)0!==this.getCellCount(n,0)&&this.generateActualColumns(n.columns,t)}else(n.visible||this.hideColumnInclude)&&t.push(n)}return t},t.prototype.processHeaderCells=function(e,t){for(var r=t,i=0;i<r.length;i++)r[i].commands||(e=this.appendGridCells(r[i],e,0));return e},t.prototype.appendGridCells=function(t,r,i){if(t.columns||!1===t.visible&&!this.hideColumnInclude||t.commands){if(t.columns){var n=this.getCellCount(t,0);n&&r[i].cells.push(new k({cellType:e.CellType.StackedHeader,column:t,colSpan:n}));for(var s=void 0,o=0,a=t.columns.length;o<a;o++)t.columns[o].visible&&!s&&(s=!0),r=this.appendGridCells(t.columns[o],r,i+1)}}else r[i].cells.push(this.generateCell(t,e.CellType.Header,this.colDepth-i,i));return r},t.prototype.generateCell=function(t,r,i,n){var s={visible:t.visible,isDataCell:r===e.CellType.Data,column:t,cellType:r,rowSpan:i,index:n};return(!s.rowSpan||s.rowSpan<2)&&delete s.rowSpan,new k(s)},t.prototype.processColumns=function(t){var r=this.parent,i=[];r.enableColumnVirtualization&&(i=r.getColumnIndexesInView());for(var n=0,s=t.length;n<s;n++)if(r.allowGrouping)for(var o=0,a=r.groupSettings.columns.length;o<a;o++)r.enableColumnVirtualization&&-1===i.indexOf(o)||t[n].cells.splice(0,0,this.generateCell({},e.CellType.HeaderIndent));return t},t.prototype.getCellCount=function(e,t){if(e.columns)for(var r=0;r<e.columns.length;r++)t=this.getCellCount(e.columns[r],t);else(e.visible||this.hideColumnInclude)&&t++;return t},t.prototype.checkAndExport=function(e,t){Object.keys(e).some((function(t){return!e[t]}))||t()},t.prototype.failureHandler=function(e,t,r){var i=this;return function(){e[t.id]=!0,i.checkAndExport(e,r)}},t.prototype.createChildGrid=function(e,t,r,i){var n=new Ct(this.parent.detailRowModule.getGridModel(e,t,r));e.isPrinting=!1;n.parentDetails={parentID:e.element.id,parentPrimaryKeys:e.getPrimaryKeyFieldNames(),parentKeyField:e.childGrid.queryString,parentKeyFieldValue:sf.base.getValue(n.queryString,t.data),parentRowData:t.data};var s=Qt("child-grid"),o=sf.base.createElement("div",{id:s,styles:"display: none"});return document.body.appendChild(o),n.id=s,i[s]=!1,{childGrid:n,element:o}},t.prototype.getGridExportColumns=function(e){for(var t=[],r=0,i=e;r<i.length;r++)"checkbox"!==i[r].type&&t.push(i[r]);return t},t}(),an=function(){function e(e){this.valueFormatter=new s(e),this.internationalization=new sf.base.Internationalization(e)}return e.prototype.returnFormattedValue=function(e,t){return!sf.base.isNullOrUndefined(e.value)&&e.value?this.valueFormatter.getFormatFunction(t)(e.value):""},e.prototype.formatCellValue=function(e,t){if(e.isForeignKey&&(e.value=sf.base.getValue(e.column.foreignKeyValue,yr(e.column,{},e.value)[0])),"number"===e.column.type&&void 0!==e.column.format&&""!==e.column.format)return e.value?this.internationalization.getNumberFormat({format:e.column.format})(e.value):"";if("boolean"===e.column.type)return e.value?"true":"false";if("date"!==e.column.type&&"datetime"!==e.column.type&&"time"!==e.column.type||void 0===e.column.format)return(sf.base.isNullOrUndefined(e.column.type)||sf.base.isNullOrUndefined(e.value))&&sf.base.isNullOrUndefined(e.value)?"":e.value.toString();if("string"==typeof e.value&&(e.value=new Date(e.value)),"string"==typeof e.column.format){var r=void 0,i=e.column.format;return r="date"===e.column.type?t?{type:"date",format:i}:{type:"date",skeleton:i}:"time"===e.column.type?t?{type:"time",format:i}:{type:"time",skeleton:i}:t?{type:"dateTime",format:i}:{type:"dateTime",skeleton:i},this.returnFormattedValue(e,r)}if(e.column.format instanceof Object&&void 0===e.column.format.type)return e.value.toString();var n=void 0;return n="date"===e.column.type?{type:e.column.format.type,format:e.column.format.format,skeleton:e.column.format.skeleton}:"time"===e.column.type?{type:"time",format:e.column.format.format,skeleton:e.column.format.skeleton}:{type:"dateTime",format:e.column.format.format,skeleton:e.column.format.skeleton},this.returnFormattedValue(e,n)},e}(),ln=function(){function t(e,t){this.book={},this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.rowLength=1,this.expType="AppendToSheet",this.includeHiddenColumn=!1,this.isCsvExport=!1,this.isElementIdChanged=!1,this.foreignKeyData={},this.gridPool={},this.parent=e,this.helper=new on(e),this.locator=t,this.l10n=this.locator.getService("localization")}return t.prototype.getModuleName=function(){return"ExcelExport"},t.prototype.init=function(e){null!==e.element&&""===e.element.id&&(e.element.id=(new Date).toISOString(),this.isElementIdChanged=!0),this.parent=e,this.parent.isDestroyed||(this.isExporting=void 0,this.book={},this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.rowLength=1,this.footer=void 0,this.expType="AppendToSheet",this.includeHiddenColumn=!1,this.exportValueFormatter=new an(e.locale),e.id=Qt("main-grid"),this.gridPool[e.id]=!1)},t.prototype.Map=function(e,t,r,i,n,s){var o=e;this.gridPool={},e.childGrid&&(sf.base.isNullOrUndefined(t)||"None"!==t.hierarchyExportMode)&&(e.expandedRows=Ir(e).expandedRows);var a={requestType:"beforeExcelExport",gridObject:o,cancel:!1,isMultipleExport:r,workbook:i,isCsv:n,isBlob:s};return o.trigger("beforeExcelExport",a),a.cancel?new Promise((function(e,t){return e()})):(this.parent.log("exporting_begin",this.getModuleName()),this.data=new O(o),this.isExporting=!0,this.isBlob=a.isBlob,this.isCsvExport=!!a.isCsv&&a.isCsv,Tt(t)&&Et(t,o),this.processRecords(o,t,a.isMultipleExport,a.workbook))},t.prototype.exportingSuccess=function(e){this.isExporting=!1,this.parent.trigger("excelExportComplete",this.isBlob?{promise:this.blobPromise}:{}),this.parent.log("exporting_complete",this.getModuleName()),e(this.book)},t.prototype.processRecords=function(e,t,r,i){var n=this;if(!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(t.dataSource)&&t.dataSource instanceof sf.data.DataManager)return new Promise((function(s,o){t.dataSource.executeQuery(new sf.data.Query).then((function(o){n.init(e),n.processInnerRecords(e,t,r,i,o).then((function(){n.exportingSuccess(s)}))}))}));if(sf.base.isNullOrUndefined(t)||"CurrentPage"!==t.exportType){var s=[];return s.push(this.data.getData({},on.getQuery(e,this.data))),s.push(this.helper.getColumnData(e)),new Promise((function(o,a){Promise.all(s).then((function(s){n.init(e),n.processInnerRecords(e,t,r,i,s[0]).then((function(){n.exportingSuccess(o)}))})).catch((function(e){a(n.book),n.parent.trigger("actionFailure",e)}))}))}return new Promise((function(s,o){n.init(e),n.processInnerRecords(e,t,r,i,n.parent.getCurrentViewRecords()),n.exportingSuccess(s)}))},t.prototype.processInnerRecords=function(e,t,r,i,n){var s=this;this.groupedColLength=e.groupSettings.columns.length;var o=5,a=[];return sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.multipleExport)||(this.expType=sf.base.isNullOrUndefined(t.multipleExport.type)?"AppendToSheet":t.multipleExport.type,sf.base.isNullOrUndefined(t.multipleExport.blankRows)||(o=t.multipleExport.blankRows)),sf.base.isNullOrUndefined(i)?(this.workSheet=[],this.rows=[],this.columns=[],this.styles=[]):"NewSheet"===this.expType?(this.workSheet=i.worksheets,this.rows=[],this.columns=[],this.styles=i.styles):(this.workSheet=[],this.rows=i.worksheets[0].rows,this.columns=i.worksheets[0].columns,this.styles=i.styles,this.rowLength=this.rows[this.rows.length-1].index+o,this.rowLength++),sf.base.isNullOrUndefined(t)||(sf.base.isNullOrUndefined(r)?(sf.base.isNullOrUndefined(t.header)||this.processExcelHeader(JSON.parse(JSON.stringify(t.header))),sf.base.isNullOrUndefined(t.footer)||(this.footer=JSON.parse(JSON.stringify(t.footer)))):(sf.base.isNullOrUndefined(t.header)||!r&&"NewSheet"!==this.expType||this.processExcelHeader(JSON.parse(JSON.stringify(t.header))),sf.base.isNullOrUndefined(t.footer)||"AppendToSheet"===this.expType&&r||(this.footer=JSON.parse(JSON.stringify(t.footer))))),this.includeHiddenColumn=!sf.base.isNullOrUndefined(t)&&t.includeHiddenColumn,new Promise((function(r,i){e.childGridLevel=0,a=s.processGridExport(e,t,n),s.globalResolve=r,s.gridPool[e.id]=!0,s.helper.checkAndExport(s.gridPool,s.globalResolve)})).then((function(){var n=[];s.organiseRows(a,a[0].index,n),s.rows=s.rows.concat(n),sf.base.isNullOrUndefined(s.footer)||("AppendToSheet"===s.expType&&!r||"NewSheet"===s.expType)&&s.processExcelFooter(s.footer);var o={};if(s.columns.length>0&&(o.columns=s.columns),o.rows=s.rows,s.workSheet.push(o),s.book.worksheets=s.workSheet,s.book.styles=s.styles,!r){if(s.isCsvExport){sf.base.isBlazor()&&e.isServerRendered&&(s.book.isServerRendered=e.isServerRendered);var l=new sf.excelexport.Workbook(s.book,"csv",e.locale,e.currencyCode);s.isBlob?s.blobPromise=l.saveAsBlob("text/csv"):!sf.base.isNullOrUndefined(t)&&t.fileName?l.save(t.fileName):l.save("Export.csv")}else{l=new sf.excelexport.Workbook(s.book,"xlsx",e.locale,e.currencyCode);s.isBlob?s.blobPromise=l.saveAsBlob("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"):!sf.base.isNullOrUndefined(t)&&t.fileName?l.save(t.fileName):l.save("Export.xlsx")}s.isElementIdChanged&&(e.element.id=""),delete e.expandedRows}return i}))},t.prototype.organiseRows=function(e,t,r){if(!e.length)return t;for(var i=0;i<e.length;i++){var n=e[i],s=n.childRows;s?(n.index=t++,delete n.childRows,r.push(n),t=this.organiseRows(s,t,r)):(n.index=t++,r.push(n))}return t},t.prototype.processGridExport=function(e,t,r){var i=[];sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.theme)||(this.theme=t.theme),e.childGrid&&!sf.base.isNullOrUndefined(t)&&(e.hierarchyPrintMode=t.hierarchyExportMode||"Expanded");var n=new on(e),s=Tt(t)?Lt(t.columns,e.enableColumnVirtualization):n.getGridExportColumns(e.columns),o=n.getHeaders(s,this.includeHiddenColumn),a=e.groupSettings.columns.length;return i=this.processHeaderContent(e,o,a,i),i=sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.dataSource)||t.dataSource instanceof sf.data.DataManager?sf.base.isNullOrUndefined(t)||"CurrentPage"!==t.exportType?this.processRecordContent(e,r,o,t,void 0,i,n):this.processRecordContent(e,r,o,t,e.currentViewData,i,n):this.processRecordContent(e,r,o,t,t.dataSource,i,n)},t.prototype.processRecordContent=function(e,t,r,i,n,s,o){var a;if(a=!sf.base.isNullOrUndefined(n)&&n.length?n:t.result,sf.base.isNullOrUndefined(a.level)?this.processRecordRows(e,a,r,0,0,i,s,o):this.processGroupedRows(e,a,r,a.level,0,i,s,o),!sf.base.isNullOrUndefined(t.aggregates))if(sf.base.isNullOrUndefined(n)){var l=t.result.GroupGuid?t.result.records:t.result;this.processAggregates(e,l,s)}else this.processAggregates(e,t.result,s,n);return s},t.prototype.processGroupedRows=function(e,t,r,i,n,s,o,a){for(var l=0,d=t;l<d.length;l++){var c=d[l],h=[],p={};p.index=1+i;var u=e.getColumnByField(c.field),f={value:c.key,column:u,style:void 0,isForeignKey:u.isForeignColumn()},g=e.getColumnByField(c.field).headerText+": "+(u.enableGroupByFormat?c.key:this.exportValueFormatter.formatCellValue(f))+" - ";c.count>1?g+=c.count+" items":g+=c.count+" item";var m={captionText:g,type:this.isCsvExport?"CSV":"Excel"};this.parent.trigger("exportGroupCaption",m),p.value=m.captionText,p.style=this.getCaptionThemeStyle(this.theme);var y=new q(e).generateRows(c);if(this.fillAggregates(e,y,t.level+t.childLevels,o,this.rowLength),h.push(p),o[o.length-1].cells.length>0){for(var v=t.level+t.childLevels+y[0].cells.length,b=0,C=0,w=o[o.length-1].cells;C<w.length;C++){var S=w[C];S.index<v&&(v=S.index),S.index>b&&(b=S.index),h[h.length-1].index!==S.index&&h.push(S)}for(v-p.index>1&&(p.colSpan=v-p.index);b<r.columns.length+i+t.childLevels;){var x={};x.index=b+1,x.style=this.getCaptionThemeStyle(this.theme),h.push(x),b++}}else{for(var R=0,I=0,T=r.columns;I<T.length;I++){T[I].visible&&R++}p.colSpan=t.childLevels+R}if(o[o.length-1].cells=h,this.rowLength++,this.groupedColLength<8&&i>1){var E={outlineLevel:i-1,isCollapsed:!0};o[o.length-1].grouping=E}!sf.base.isNullOrUndefined(t.childLevels)&&t.childLevels>0?this.processGroupedRows(e,c.items,r,c.items.level,n,s,o,a):(n=this.processRecordRows(e,c.items,r,i,n,s,o,a),this.processAggregates(e,c,o,void 0,i,!0))}},t.prototype.processRecordRows=function(t,r,i,n,s,o,a,l){for(var d=1,c=[],h=i.columns,p=0,u=l.getGridRowModel(h,r,t,s);p<u.length;p++){var f=u[p];c=[],s++,d=1;for(var g=0,m=f.cells.length;g<m;g++){var y=f.cells[g];if(y.cellType===e.CellType.Data){var v=y.column,b=v.field,C=sf.base.isNullOrUndefined(b)?"":v.valueAccessor(b,f.data,v),w=sf.base.isNullOrUndefined(C)?"":C,S=void 0;if(v.isForeignColumn&&v.isForeignColumn()&&(S=l.getFData(w,v),w=sf.base.getValue(v.foreignKeyValue,S)),!sf.base.isNullOrUndefined(w)){var x={},R={data:f.data,column:v,foreignKeyData:S,value:w,style:void 0,colSpan:1,cell:x};if(t.trigger("excelQueryCellInfo",R),(x=R.cell).index=d+n+t.childGridLevel,x.value=R.value,""===R.data&&t.childGridLevel&&1===d){var I={hAlign:"left"};R={style:I},x.colSpan=t.getVisibleColumns().length,x.value=this.l10n.getConstant("EmptyRecord")}if(R.colSpan>1&&(x.colSpan=R.colSpan),sf.base.isNullOrUndefined(R.style))x.style={name:t.element.id+"column"+(d+n)};else{var T=this.getColumnStyle(t,d+n);x.style=this.mergeOptions(this.styles[T],R.style)}c.push(x)}d++}}var E={index:this.rowLength++,cells:c};if(this.groupedColLength<8&&n>0?(E.grouping={outlineLevel:n,isCollapsed:!0},a.push(E)):a.push(E),!sf.base.isNullOrUndefined(t.childGrid)){t.isPrinting=!0;var D=!sf.base.isNullOrUndefined(o)&&o.exportType?o.exportType:"AllPages",F=this.helper.createChildGrid(t,f,D,this.gridPool),O=F.childGrid,M=F.element;O.actionFailure=l.failureHandler(this.gridPool,O,this.globalResolve),O.childGridLevel=t.childGridLevel+1;var k={childGrid:O,row:f,exportProperties:o};this.parent.trigger("exportdetaildatabound",k),O.beforeDataBound=this.childGridCell(E,O,o,f),O.appendTo(M)}t.notify("export-RowDataBound",{rowObj:f,type:"excel"})}return s},t.prototype.childGridCell=function(e,t,r,i){var n=this;return function(s){t.beforeDataBound=null,s.cancel=!0,0===s.result.length&&(s.result=[""]),e.childRows=n.processGridExport(t,r,s);for(var o=n.parent.groupSettings.columns.length,a=e.childRows,l=0;l<a.length;l++)a[l].grouping={outlineLevel:o+t.childGridLevel,isCollapsed:!i.isExpand,isHidden:!i.isExpand};return t.destroy(),sf.base.detach(t.element),n.gridPool[t.id]=!0,n.helper.checkAndExport(n.gridPool,n.globalResolve),e}},t.prototype.processAggregates=function(e,t,r,i,n,s){var o=new N(e);e.aggregates.length&&this.parent!==e&&e.aggregateModule.prepareSummaryInfo();var a=void 0;if(a=sf.base.isNullOrUndefined(i)?t:i,void 0===n&&(n=0),e.groupSettings.columns.length>0&&s){var l=new L(e).generateRows(a,{level:a.level});l.length>0&&(r=this.fillAggregates(e,l,n,r))}else{n=e.groupSettings.columns.length>0&&!s?e.groupSettings.columns.length:n;var d=o.generateRows(a,t.aggregates);d.length>0&&!s&&(r=this.fillAggregates(e,d,n,r))}return r},t.prototype.fillAggregates=function(t,r,i,n,s){for(var o=0,a=r;o<a.length;o++){for(var l=a[o],d=[],c=0,h=0,p=l.cells;h<p.length;h++){var u=p[h],f={};if(u.cellType!==e.CellType.DetailFooterIntent&&(u.visible||this.includeHiddenColumn))if(c++,u.isDataCell){if(f.index=c+i+t.childGridLevel,sf.base.isNullOrUndefined(u.column.footerTemplate))if(sf.base.isNullOrUndefined(u.column.groupFooterTemplate))if(sf.base.isNullOrUndefined(u.column.groupCaptionTemplate))for(var g=0,m=Object.keys(l.data[u.column.field]);g<m.length;g++){m[g]===u.column.type&&(sf.base.isNullOrUndefined(l.data[u.column.field].Sum)?sf.base.isNullOrUndefined(l.data[u.column.field].Average)?sf.base.isNullOrUndefined(l.data[u.column.field].Max)?sf.base.isNullOrUndefined(l.data[u.column.field].Min)?sf.base.isNullOrUndefined(l.data[u.column.field].Count)?sf.base.isNullOrUndefined(l.data[u.column.field].TrueCount)?sf.base.isNullOrUndefined(l.data[u.column.field].FalseCount)?sf.base.isNullOrUndefined(l.data[u.column.field].Custom)||(f.value=l.data[u.column.field].Custom):f.value=l.data[u.column.field][u.column.field+" - falsecount"]:f.value=l.data[u.column.field][u.column.field+" - truecount"]:f.value=l.data[u.column.field][u.column.field+" - count"]:f.value=l.data[u.column.field][u.column.field+" - min"]:f.value=l.data[u.column.field][u.column.field+" - max"]:f.value=l.data[u.column.field][u.column.field+" - average"]:f.value=l.data[u.column.field][u.column.field+" - sum"])}else f.value=this.getAggreateValue(e.CellType.CaptionSummary,u.column.groupCaptionTemplate,u,l);else f.value=this.getAggreateValue(e.CellType.GroupSummary,u.column.groupFooterTemplate,u,l);else f.value=this.getAggreateValue(e.CellType.Summary,u.column.footerTemplate,u,l);f.style=this.getCaptionThemeStyle(this.theme),this.aggregateStyle(u.column,f.style,u.column.field);var y=u.attributes.style;y.textAlign&&(f.style.hAlign=y.textAlign.toLowerCase()),d.push(f)}else void 0===s&&(f.index=c+i+t.childGridLevel,f.style=this.getCaptionThemeStyle(this.theme),d.push(f))}if(sf.base.isNullOrUndefined(s)){var v={};if(this.groupedColLength<8&&this.groupedColLength>0){var b={outlineLevel:n[n.length-1].grouping.outlineLevel,isCollapsed:!0};v={index:this.rowLength++,cells:d,grouping:b}}else v={index:this.rowLength++,cells:d};n.push(v)}else n.push({index:s,cells:d})}return n},t.prototype.aggregateStyle=function(e,t,r){var i=this.parent.getColumnByField(r);if("object"===n()(e.format)){var s=e.format;t.numberFormat=sf.base.isNullOrUndefined(s.format)?s.skeleton:s.format,sf.base.isNullOrUndefined(s.type)||(t.type=s.type.toLowerCase())}else t.numberFormat=e.format;!sf.base.isNullOrUndefined(i)&&sf.base.isNullOrUndefined(t.type)&&(t.type=i.type.toLowerCase())},t.prototype.getAggreateValue=function(t,r,i,n){var s={};return s[sf.base.getEnumValue(e.CellType,i.cellType)]=sf.base.compile(r),s[sf.base.getEnumValue(e.CellType,i.cellType)](n.data[i.column.field?i.column.field:i.column.columnName])[0].textContent},t.prototype.mergeOptions=function(e,t){for(var r={},i=Object.keys(e),n=0;n<i.length;n++)"name"!==i[n]&&(r[i[n]]=e[i[n]]);i=Object.keys(t);for(n=0;n<i.length;n++)"name"!==i[n]&&(r[i[n]]=t[i[n]]);return r},t.prototype.getColumnStyle=function(e,t){for(var r=0,i=0,n=this.styles;i<n.length;i++){if(n[i].name===e.element.id+"column"+t)return r;r++}},t.prototype.processHeaderContent=function(t,r,i,n){var s=r.rows,o=r.columns,a=[];if(i>0)for(var l=0;l!==i;)this.columns.push({index:l+1,width:30}),l++;for(var d=0;d<s.length;d++){for(var c=1+i,h=[],p=0;p<s[d].cells.length;p++){var u={},f={},g=s[d].cells[p];if(g.cellType!==e.CellType.HeaderIndent&&g.cellType!==e.CellType.DetailHeader){for(var m={contains:!0,index:1};m.contains;)if(c=(m=this.getIndex(a,1,c)).index,!m.contains){f.index=m.index+t.childGridLevel;break}if(!sf.base.isNullOrUndefined(g.rowSpan)&&1!==g.rowSpan){f.rowSpan=g.rowSpan;for(var y=1;y<g.rowSpan+1;y++){var v={rowIndex:0,columnIndex:0};v.rowIndex=y,v.columnIndex=c,a.push(v)}}sf.base.isNullOrUndefined(g.colSpan)||1===g.colSpan||(f.colSpan=g.colSpan,c=c+f.colSpan-1),f.value=g.column.headerText,u=this.getHeaderThemeStyle(this.theme),sf.base.isNullOrUndefined(g.column.textAlign)||(u.hAlign=g.column.textAlign.toLowerCase()),sf.base.isNullOrUndefined(g.column.headerTextAlign)||(u.hAlign=g.column.headerTextAlign.toLowerCase());var b={cell:f,gridCell:g,style:u};t.trigger("excelHeaderQueryCellInfo",b),f.style=b.style,h.push(f),c++}}n.push({index:this.rowLength++,cells:h})}for(var C=0;C<o.length;C++)this.parseStyles(t,o[C],this.getRecordThemeStyle(this.theme),i+C+1);return n},t.prototype.getHeaderThemeStyle=function(e){var t={fontSize:12,borders:{color:"#E0E0E0"},bold:!0};return sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.header)||(t=this.updateThemeStyle(e.header,t)),t},t.prototype.updateThemeStyle=function(e,t){return sf.base.extend(t,e)},t.prototype.getCaptionThemeStyle=function(e){var t={fontSize:13,backColor:"#F6F6F6"};return sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.caption)||(t=this.updateThemeStyle(e.caption,t)),t},t.prototype.getRecordThemeStyle=function(e){var t={fontSize:13,borders:{color:"#E0E0E0"}};return sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.record)||(t=this.updateThemeStyle(e.record,t)),t},t.prototype.processExcelHeader=function(e){if(!sf.base.isNullOrUndefined(e.rows)&&("NewSheet"===this.expType||1===this.rowLength)){var t=void 0;void 0===e.headerRows?this.rowLength=e.rows.length:this.rowLength=e.headerRows,t=this.rowLength<e.rows.length?this.rowLength:e.rows.length,this.rowLength++;for(var r=0;r<t;r++){var i=e.rows[r];(null===i.index||sf.base.isNullOrUndefined(i.index))&&(i.index=r+1),this.updatedCellIndex(i)}}},t.prototype.updatedCellIndex=function(e){for(var t=e.cells.length,r=0;r<t;r++){var i=e.cells[r];(null===i.index||sf.base.isNullOrUndefined(i.index))&&(i.index=r+1)}this.rows.push(e)},t.prototype.processExcelFooter=function(e){if(!sf.base.isNullOrUndefined(e.rows)){var t=void 0;void 0===e.footerRows?this.rowLength+=e.rows.length:e.footerRows>e.rows.length?(this.rowLength+=e.footerRows-e.rows.length,t=e.rows.length):t=e.footerRows;for(var r=0;r<t;r++){var i=e.rows[r];null===i.index||void 0===i.index?i.index=this.rowLength++:i.index+=this.rowLength,this.updatedCellIndex(i)}}},t.prototype.getIndex=function(e,t,r){for(var i=0,n=e;i<n.length;i++){var s=n[i];if(s.rowIndex===t&&s.columnIndex===r)return{contains:!0,index:r+=1}}return{contains:!1,index:r}},t.prototype.parseStyles=function(e,t,r,i){if(!sf.base.isNullOrUndefined(t.format))if("object"===n()(t.format)){var s=t.format;r.numberFormat=sf.base.isNullOrUndefined(s.format)?s.skeleton:s.format,sf.base.isNullOrUndefined(s.type)||(r.type=s.type.toLowerCase())}else r.numberFormat=t.format,r.type=t.type;sf.base.isNullOrUndefined(t.textAlign)||(r.hAlign=t.textAlign.toLowerCase()),Object.keys(r).length>0&&(r.name=e.element.id+"column"+i,this.styles.push(r)),sf.base.isNullOrUndefined(t.width)||this.columns.push({index:i+e.childGridLevel,width:"number"==typeof t.width?t.width:this.helper.getConvertedWidth(t.width)})},t.prototype.destroy=function(){},t}(),dn=function(){function t(e){this.hideColumnInclude=!1,this.currentViewData=!1,this.customDataSource=!1,this.isGrouping=!1,this.headerOnPages=[],this.drawPosition={xPosition:0,yPosition:0},this.parent=e,this.helper=new on(e),this.gridPool={}}return t.prototype.getModuleName=function(){return"PdfExport"},t.prototype.init=function(e){this.exportValueFormatter=new an(e.locale),this.pdfDocument=void 0,this.hideColumnInclude=!1,this.currentViewData=!1,this.parent=e,this.isGrouping=!1,this.isExporting=!0,e.id=Qt("main-grid"),this.gridPool[e.id]=!1},t.prototype.exportWithData=function(e,t,r,i,n,s){var o=this;this.init(e),sf.base.isNullOrUndefined(t)?this.pdfDocument=new sf.pdfexport.PdfDocument:this.pdfDocument=t,this.processExport(e,i,n,s).then((function(){o.isExporting=!1,e.trigger("pdfExportComplete",o.isBlob?{promise:o.blobPromise}:{}),o.parent.log("exporting_complete",o.getModuleName()),r(o.pdfDocument)}))},t.prototype.Map=function(e,t,r,i,n){var s=this;this.data=new O(this.parent),this.isBlob=n,this.gridPool={},e.childGrid&&(sf.base.isNullOrUndefined(t)||"None"!==t.hierarchyExportMode)&&(e.expandedRows=Ir(e).expandedRows);var o={requestType:"beforePdfExport",cancel:!1,headerPageNumbers:[],gridDrawPosition:{xPosition:0,yPosition:0}};if(!sf.base.isBlazor()){o.gridObject=e}if(e.trigger("beforePdfExport",o),!0===o.cancel)return new Promise((function(e,t){return e()}));if(Tt(t)&&Et(t,e),this.headerOnPages=o.headerPageNumbers,this.drawPosition=o.gridDrawPosition,this.parent.log("exporting_begin",this.getModuleName()),!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(t.dataSource)&&t.dataSource instanceof sf.data.DataManager)return new Promise((function(n,o){t.dataSource.executeQuery(new sf.data.Query).then((function(o){s.exportWithData(e,i,n,o,t,r)}))}));if(sf.base.isNullOrUndefined(t)||"CurrentPage"!==t.exportType){var a=[];return a.push(this.data.getData({},on.getQuery(e,this.data))),a.push(this.helper.getColumnData(e)),new Promise((function(n,o){Promise.all(a).then((function(o){s.init(e),sf.base.isNullOrUndefined(i)?s.pdfDocument=new sf.pdfexport.PdfDocument:s.pdfDocument=i,s.processExport(e,o[0],t,r).then((function(){s.isExporting=!1,e.trigger("pdfExportComplete",s.isBlob?{promise:s.blobPromise}:{}),s.parent.log("exporting_complete",s.getModuleName()),n(s.pdfDocument)}))}))}))}return new Promise((function(n,o){s.exportWithData(e,i,n,s.parent.getCurrentViewRecords(),t,r)}))},t.prototype.processExport=function(e,t,r,i){var n,s=this,o=this.pdfDocument.sections.add();this.processSectionExportProperties(o,r);var a=o.pages.add();return new Promise((function(i,o){n=s.processGridExport(e,t,r),s.globalResolve=i,s.gridPool[e.id]=!0,s.helper.checkAndExport(s.gridPool,s.globalResolve)})).then((function(){return n.draw(a,s.drawPosition.xPosition,s.drawPosition.yPosition),s.drawHeader(r),i||(s.isBlob?s.blobPromise=s.pdfDocument.save():!sf.base.isNullOrUndefined(r)&&r.fileName?s.pdfDocument.save(r.fileName):s.pdfDocument.save("Export.pdf"),s.pdfDocument.destroy(),delete e.expandedRows),s.pdfDocument}))},t.prototype.processSectionExportProperties=function(e,t){if(!(sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.pageOrientation)&&sf.base.isNullOrUndefined(t.pageSize))){var r=new sf.pdfexport.PdfPageSettings;r.orientation="Landscape"===t.pageOrientation?sf.pdfexport.PdfPageOrientation.Landscape:sf.pdfexport.PdfPageOrientation.Portrait,r.size=this.getPageSize(t.pageSize),e.setPageSettings(r)}return e},t.prototype.processGridExport=function(e,t,r){var i=!0;sf.base.isNullOrUndefined(r)||(this.gridTheme=r.theme,sf.base.isBlazor()&&!sf.base.isNullOrUndefined(this.gridTheme)&&this.getGridPdfFont(this.gridTheme),i=!!sf.base.isNullOrUndefined(r.allowHorizontalOverflow)||r.allowHorizontalOverflow);var n=new on(e),s=this.processExportProperties(r,t.result),o=Tt(r)?Lt(r.columns,e.enableColumnVirtualization):n.getGridExportColumns(e.columns);o=o.filter((function(e){return sf.base.isNullOrUndefined(e.commands)}));var a=!1;e.groupSettings.columns.length&&(a=!0),e.childGrid&&!sf.base.isNullOrUndefined(r)&&(e.hierarchyPrintMode=r.hierarchyExportMode||"Expanded");var l=new sf.pdfexport.PdfGrid,d=this.getHeaderThemeStyle(),c=d.border,h=d.font,p=d.brush,u=n.getHeaders(o,this.hideColumnInclude),f=u.columns;l=this.processGridHeaders(e.groupSettings.columns.length,l,u.rows,f,c,h,p,e,i,o),this.setColumnProperties(f,l,n,e,i);var g=this.getSummaryCaptionThemeStyle();if(!sf.base.isNullOrUndefined(s)&&s.length){if(a?(sf.base.isNullOrUndefined(g.border)||(c=g.border),this.processGroupedRecords(l,s,f,e,c,0,g.font,g.brush,g.backgroundBrush,t,r,n,0)):this.processRecord(c,f,e,s,l,0,r,n,0),!sf.base.isNullOrUndefined(t.aggregates)){var m=new N(e),y=void 0;e.aggregates.length&&this.parent!==e&&e.aggregateModule.prepareSummaryInfo(),y=this.customDataSource?m.generateRows(s,t.aggregates):this.currentViewData?m.generateRows(this.parent.getCurrentViewRecords(),t.aggregates):a?m.generateRows(s.records,t.aggregates):m.generateRows(t.result,t.aggregates),this.processAggregates(y,l,c,g.font,g.brush,g.backgroundBrush,!1)}}else l.rows.addRow().style.setBorder(c);return l},t.prototype.getSummaryCaptionThemeStyle=function(){if(sf.base.isNullOrUndefined(this.gridTheme)||sf.base.isNullOrUndefined(this.gridTheme.caption))return{font:new sf.pdfexport.PdfStandardFont(sf.pdfexport.PdfFontFamily.Helvetica,9.75),brush:new sf.pdfexport.PdfSolidBrush(new sf.pdfexport.PdfColor(0,0,0)),backgroundBrush:new sf.pdfexport.PdfSolidBrush(new sf.pdfexport.PdfColor(246,246,246))};var e=sf.base.isNullOrUndefined(this.gridTheme.caption.fontSize)?9.75:this.gridTheme.caption.fontSize,t=sf.base.isNullOrUndefined(this.gridTheme.caption.fontName)?sf.pdfexport.PdfFontFamily.Helvetica:this.getFontFamily(this.gridTheme.caption.fontName),r=this.getFontStyle(this.gridTheme.caption),i=new sf.pdfexport.PdfColor(0,0,0);if(!sf.base.isNullOrUndefined(this.gridTheme.caption.fontColor)){var n=this.hexToRgb(this.gridTheme.caption.fontColor);i=new sf.pdfexport.PdfColor(n.r,n.g,n.b)}var s=this.gridTheme.caption.border?this.getBorderStyle(this.gridTheme.caption.border):null,o=new sf.pdfexport.PdfStandardFont(t,e,r);return sf.base.isNullOrUndefined(this.gridTheme.caption.font)||(o=this.gridTheme.caption.font),{font:o,brush:new sf.pdfexport.PdfSolidBrush(i),backgroundBrush:new sf.pdfexport.PdfSolidBrush(new sf.pdfexport.PdfColor(246,246,246)),border:s}},t.prototype.getGridPdfFont=function(e){var t=0;if(e.header&&e.header.font){var r=e.header.font.fontFamily,i=e.header.font.fontSize,n=e.header.font.fontStyle;if(t=sf.base.isNullOrUndefined(sf.pdfexport.PdfFontStyle[n])?0:sf.pdfexport.PdfFontStyle[n],e.header.font.isTrueType)e.header.font=new sf.pdfexport.PdfTrueTypeFont(r,i,t);else{var s=sf.base.isNullOrUndefined(r)?sf.pdfexport.PdfFontFamily.Helvetica:this.getFontFamily(r);e.header.font=new sf.pdfexport.PdfStandardFont(s,i,t)}}if(e.caption&&e.caption.font){var o=e.caption.font.fontFamily,a=e.caption.font.fontSize,l=e.caption.font.fontStyle;if(t=sf.base.isNullOrUndefined(sf.pdfexport.PdfFontStyle[l])?0:sf.pdfexport.PdfFontStyle[l],e.caption.font.isTrueType)e.caption.font=new sf.pdfexport.PdfTrueTypeFont(o,a,t);else{var d=sf.base.isNullOrUndefined(o)?sf.pdfexport.PdfFontFamily.Helvetica:this.getFontFamily(o);e.caption.font=new sf.pdfexport.PdfStandardFont(d,a,t)}}if(e.record&&e.record.font){var c=e.record.font.fontFamily,h=e.record.font.fontSize,p=e.record.font.fontStyle;if(t=sf.base.isNullOrUndefined(sf.pdfexport.PdfFontStyle[p])?0:sf.pdfexport.PdfFontStyle[p],e.record.font.isTrueType)e.record.font=new sf.pdfexport.PdfTrueTypeFont(c,h,t);else{var u=sf.base.isNullOrUndefined(c)?sf.pdfexport.PdfFontFamily.Helvetica:this.getFontFamily(c);e.record.font=new sf.pdfexport.PdfStandardFont(u,h,t)}}},t.prototype.getHeaderThemeStyle=function(){var e=new sf.pdfexport.PdfBorders;if(sf.base.isNullOrUndefined(this.gridTheme)||sf.base.isNullOrUndefined(this.gridTheme.header))return e.all=new sf.pdfexport.PdfPen(new sf.pdfexport.PdfColor(234,234,234)),{border:e,font:new sf.pdfexport.PdfStandardFont(sf.pdfexport.PdfFontFamily.Helvetica,10.5),brush:new sf.pdfexport.PdfSolidBrush(new sf.pdfexport.PdfColor(102,102,102))};var t=sf.base.isNullOrUndefined(this.gridTheme.header.fontName)?sf.pdfexport.PdfFontFamily.Helvetica:this.getFontFamily(this.gridTheme.header.fontName),r=this.getFontStyle(this.gridTheme.header),i=sf.base.isNullOrUndefined(this.gridTheme.header.fontSize)?10.5:this.gridTheme.header.fontSize,n=new sf.pdfexport.PdfColor;if(!sf.base.isNullOrUndefined(this.gridTheme.header.fontColor)){var s=this.hexToRgb(this.gridTheme.header.fontColor);n=new sf.pdfexport.PdfColor(s.r,s.g,s.b)}var o=new sf.pdfexport.PdfStandardFont(t,i,r);return sf.base.isNullOrUndefined(this.gridTheme.header.font)||(o=this.gridTheme.header.font),{border:this.getBorderStyle(this.gridTheme.header.border),font:o,brush:new sf.pdfexport.PdfSolidBrush(n)}},t.prototype.processGroupedRecords=function(e,t,r,i,n,s,o,a,l,d,c,h,p){for(var u=this,f=s,g=function(s){var g=e.rows.addRow(),y=i.getColumnByField(s.field),v={value:s.key,column:y,style:void 0,isForeignKey:y.isForeignColumn()},b={captionText:m.parent.getColumnByField(s.field).headerText+": "+(y.enableGroupByFormat?s.key:m.exportValueFormatter.formatCellValue(v))+" - "+s.count+(t.count>1?" items":" item"),type:"PDF"};m.parent.trigger("exportGroupCaption",b,(function(m){var y;g.cells.getCell(f).value=m.captionText,g.cells.getCell(f+1).style.stringFormat=new sf.pdfexport.PdfStringFormat(sf.pdfexport.PdfTextAlignment.Left),g.style.setBorder(n),g.style.setFont(o),g.style.setTextBrush(a),g.style.setBackgroundBrush(l);var v=new q(i);(y=sf.base.isNullOrUndefined(s.items.records)?v.generateRows(s.items,s):v.generateRows(s.items.records,s),sf.base.isNullOrUndefined(y)||0!==y.length||(g.cells.getCell(f+1).columnSpan=e.columns.count-(f+1)),!sf.base.isNullOrUndefined(t.childLevels)&&t.childLevels>0)?(u.processAggregates(y,e,n,o,a,l,!0,g,f),u.processGroupedRecords(e,s.items,r,i,n,f+1,o,a,l,d,c,h,p),y=new L(i).generateRows(s.items.records,s),u.processAggregates(y,e,n,o,a,l,!1)):(u.processAggregates(y,e,n,o,a,l,!0,g,f),p=u.processRecord(n,r,i,s.items,e,f+1,c,h,p),y=new L(i).generateRows(s.items,s),u.processAggregates(y,e,n,o,a,l,!1))}))},m=this,y=0,v=t;y<v.length;y++){g(v[y])}},t.prototype.processGridHeaders=function(t,r,i,n,s,o,a,l,d,c){var h=this,p=n.length+t,u=Dr(c),f=c,g=0;this.parent.allowGrouping&&(g=this.parent.groupSettings.columns.length),r.columns.add(p),r.headers.add(i.length);var m=function(t,n,l,d,c){var p=r.headers.getHeader(t),u=p.cells.getCell(n),f=i[t].cells[n];sf.base.isNullOrUndefined(l.headerTextAlign)||(u.style.stringFormat=h.getHorizontalAlignment(l.headerTextAlign)),d>0&&(u.rowSpan=d,u.style.stringFormat=h.getVerticalAlignment("Bottom",u.style.stringFormat,l.textAlign)),c>0&&(u.columnSpan=c),p.style.setBorder(s),p.style.setFont(o),p.style.setTextBrush(a),u.value=l.headerText,sf.base.isNullOrUndefined(f)||f.cellType!==e.CellType.HeaderIndent&&f.cellType!==e.CellType.DetailHeader||(u.value="",u.width=20);var g={cell:u,gridCell:f,style:u.style};h.parent.trigger("pdfHeaderQueryCellInfo",g)};return function e(t,r,i,n,s,o){for(var a=0,l=0;l<t.length;l++)if(o&&(n=a=a+i+(0===l?0:-1),i=0),t[l].columns&&t[l].columns.length){var d=e(t[l].columns,r-1,0,l+n,s+1,!1);m(s,l+n,t[l],0,d),i+=d,n=n+d-1}else(t[l].visible||h.hideColumnInclude)&&(i++,m(s,l+n+g,t[l],r,0));return i}(f,u,0,0,0,!0),r.columns.count>=6&&d&&(r.style.allowHorizontalOverflow=!0),r},t.prototype.processExportProperties=function(e,t){if(sf.base.isNullOrUndefined(e))this.currentViewData=!1,this.customDataSource=!1;else{sf.base.isNullOrUndefined(e.theme)||(this.gridTheme=e.theme);var r=this.pdfDocument.pageSettings.size;if(this.drawHeader(e),!sf.base.isNullOrUndefined(e.footer)){var i=e.footer,n=new sf.pdfexport.PointF(0,r.width-80-.75*i.fromBottom),s=new sf.pdfexport.SizeF(r.width-80,.75*i.height),o=new sf.pdfexport.RectangleF(n,s);this.pdfDocument.template.bottom=this.drawPageTemplate(new sf.pdfexport.PdfPageTemplateElement(o),i)}sf.base.isNullOrUndefined(e.includeHiddenColumn)||this.isGrouping||(this.hideColumnInclude=e.includeHiddenColumn),sf.base.isNullOrUndefined(e.dataSource)?sf.base.isNullOrUndefined(e.exportType)?(this.currentViewData=!1,this.customDataSource=!1):"CurrentPage"===e.exportType?(t=this.parent.currentViewData,this.currentViewData=!0,this.customDataSource=!1):(this.currentViewData=!1,this.customDataSource=!1):(e.dataSource instanceof sf.data.DataManager||(t=e.dataSource),this.customDataSource=!0,this.currentViewData=!1)}return t},t.prototype.drawHeader=function(e){var t=this,r=this.pdfDocument.pageSettings.size;if(!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(e.header)){var i=e.header,n=new sf.pdfexport.PointF(0,i.fromTop),s=new sf.pdfexport.SizeF(r.width-80,.75*i.height),o=new sf.pdfexport.RectangleF(n,s);if(this.headerOnPages.length){var a=this.drawPageTemplate(new sf.pdfexport.PdfPageTemplateElement(o),i);this.headerOnPages.filter((function(e){e-1>=0&&e-1<t.pdfDocument.pages.count-1&&t.pdfDocument.pages.getPageByIndex(e-1).graphics.drawPdfTemplate(a.template,new sf.pdfexport.PointF(0,0))}))}else this.pdfDocument.template.top=this.drawPageTemplate(new sf.pdfexport.PdfPageTemplateElement(o),i)}},t.prototype.drawPageTemplate=function(e,t){for(var r=0,i=t.contents;r<i.length;r++){var n=i[r];switch(this.processContentValidation(n),n.type){case"Text":if(""===n.value||void 0===n.value||null===n.value||"string"!=typeof n.value)throw new Error("please enter the valid input value in text content...");this.drawText(e,n);break;case"PageNumber":this.drawPageNumber(e,n);break;case"Image":if(void 0===n.src||null===n.src||""===n.src)throw new Error("please enter the valid base64 string in image content...");this.drawImage(e,n);break;case"Line":this.drawLine(e,n);break;default:throw new Error("Please set valid content type...")}}return e},t.prototype.processContentValidation=function(e){if(void 0===e.type||null===e.type)throw new Error("please set valid content type...");if("Line"===e.type){if(void 0===e.points||null===e.points)throw new Error("please enter valid points in "+e.type+" content...");if(void 0===e.points.x1||null===e.points.x1||"number"!=typeof e.points.x1)throw new Error("please enter valid x1 co-ordinate in "+e.type+" points...");if(void 0===e.points.y1||null===e.points.y1||"number"!=typeof e.points.y1)throw new Error("please enter valid y1 co-ordinate in "+e.type+" points...");if(void 0===e.points.x2||null===e.points.x2||"number"!=typeof e.points.x2)throw new Error("please enter valid x2 co-ordinate in "+e.type+" points...");if(void 0===e.points.y2||null===e.points.y2||"number"!=typeof e.points.y2)throw new Error("please enter valid y2 co-ordinate in "+e.type+" points...")}else{if(void 0===e.position||null===e.position)throw new Error("please enter valid position in "+e.type+" content...");if(void 0===e.position.x||null===e.position.x||"number"!=typeof e.position.x)throw new Error("please enter valid x co-ordinate in "+e.type+" position...");if(void 0===e.position.y||null===e.position.y||"number"!=typeof e.position.y)throw new Error("please enter valid y co-ordinate in "+e.type+" position...")}},t.prototype.drawText=function(e,t){var r=this.getFont(t),i=this.getBrushFromContent(t),n=null;if(!sf.base.isNullOrUndefined(t.style.textPenColor)){var s=this.hexToRgb(t.style.textPenColor);n=new sf.pdfexport.PdfPen(new sf.pdfexport.PdfColor(s.r,s.g,s.b))}null==i&&null==n&&(i=new sf.pdfexport.PdfSolidBrush(new sf.pdfexport.PdfColor(0,0,0)));var o=t.value.toString(),a=.75*t.position.x,l=.75*t.position.y,d=new sf.pdfexport.PdfStringFormat,c=this.setContentFormat(t,d);null===c||sf.base.isNullOrUndefined(c.format)||sf.base.isNullOrUndefined(c.size)?e.graphics.drawString(o,r,n,i,a,l,d):e.graphics.drawString(o,r,n,i,a,l,c.size.width,c.size.height,c.format)},t.prototype.drawPageNumber=function(e,t){var r=this.getFont(t),i=null;if(sf.base.isNullOrUndefined(t.style.textBrushColor))i=new sf.pdfexport.PdfSolidBrush(new sf.pdfexport.PdfColor(0,0,0));else{var n=this.hexToRgb(t.style.textBrushColor);i=new sf.pdfexport.PdfSolidBrush(new sf.pdfexport.PdfColor(n.r,n.g,n.b))}var s,o,a=new sf.pdfexport.PdfPageNumberField(r,i);if(a.numberStyle=this.getPageNumberStyle(t.pageNumberType),sf.base.isNullOrUndefined(t.format))o="{0}",s=new sf.pdfexport.PdfCompositeField(r,i,o,a);else if(-1!==t.format.indexOf("$total")&&-1!==t.format.indexOf("$current")){var l=new sf.pdfexport.PdfPageCountField(r);o=t.format.indexOf("$total")>t.format.indexOf("$current")?(o=t.format.replace("$current","0")).replace("$total","1"):(o=t.format.replace("$current","1")).replace("$total","0"),s=new sf.pdfexport.PdfCompositeField(r,i,o,a,l)}else if(-1!==t.format.indexOf("$current")&&-1===t.format.indexOf("$total"))o=t.format.replace("$current","0"),s=new sf.pdfexport.PdfCompositeField(r,i,o,a);else{l=new sf.pdfexport.PdfPageCountField(r);o=t.format.replace("$total","0"),s=new sf.pdfexport.PdfCompositeField(r,i,o,l)}var d=.75*t.position.x,c=.75*t.position.y,h=this.setContentFormat(t,s.stringFormat);null===h||sf.base.isNullOrUndefined(h.format)||sf.base.isNullOrUndefined(h.size)||(s.stringFormat=h.format,s.bounds=new sf.pdfexport.RectangleF(d,c,h.size.width,h.size.height)),s.draw(e.graphics,d,c)},t.prototype.drawImage=function(e,t){var r=.75*t.position.x,i=.75*t.position.y,n=sf.base.isNullOrUndefined(t.size)?void 0:.75*t.size.width,s=sf.base.isNullOrUndefined(t.size)?void 0:.75*t.size.height,o=new sf.pdfexport.PdfBitmap(t.src);sf.base.isNullOrUndefined(n)?e.graphics.drawImage(o,r,i):e.graphics.drawImage(o,r,i,n,s)},t.prototype.drawLine=function(e,t){var r=.75*t.points.x1,i=.75*t.points.y1,n=.75*t.points.x2,s=.75*t.points.y2,o=this.getPenFromContent(t);sf.base.isNullOrUndefined(t.style)||null===t.style||(sf.base.isNullOrUndefined(t.style.penSize)||null===t.style.penSize||"number"!=typeof t.style.penSize||(o.width=.75*t.style.penSize),o.dashStyle=this.getDashStyle(t.style.dashStyle)),e.graphics.drawLine(o,r,i,n,s)},t.prototype.processAggregates=function(t,r,i,n,s,o,a,l,d){for(var c=0,h=t;c<h.length;c++){for(var p=h[c],u=-1,f=0,g=!0,m=[],y=0;y<r.columns.count;y++){var v=p.cells[f];if(v.cellType!==e.CellType.DetailFooterIntent){if(!this.hideColumnInclude){for(;void 0===v.visible;)v.cellType!==e.CellType.DetailFooterIntent&&(sf.base.isNullOrUndefined(l)||sf.base.isNullOrUndefined(l.cells.getCell(y).value)?m.push(""):(m.push(""),m.push(l.cells.getCell(y).value),g=!1,y+=1),y+=1,f+=1,v=p.cells[f]);for(;!sf.base.isNullOrUndefined(v.visible)&&!v.visible;)f+=1,v=p.cells[f]}if(v.isDataCell){var b={};if(sf.base.isNullOrUndefined(v.column.footerTemplate)&&sf.base.isNullOrUndefined(v.column.groupCaptionTemplate)&&sf.base.isNullOrUndefined(v.column.groupFooterTemplate)){C=this.getSummaryWithoutTemplate(p.data[v.column.field]);sf.base.isNullOrUndefined(C)||m.push(C)}else{var C;b=(C=this.getTemplateFunction(b,y,u,v)).templateFunction,u=C.leastCaptionSummaryIndex;var w=b[sf.base.getEnumValue(e.CellType,v.cellType)](p.data[v.column.field?v.column.field:v.column.columnName]);m.push(w[0].textContent),g=!1}}else m.push("");g&&""!==m[y]&&!sf.base.isNullOrUndefined(m[y])&&null!==m[y]&&(g=!1),f+=1}else y--,f++}if(!g)if(a)for(y=0;y<r.columns.count;y++)l.cells.getCell(y).value=m[y].toString(),y===d+1&&-1!==u?l.cells.getCell(y).columnSpan=u-(d+1):y===d+1&&-1===u&&(l.cells.getCell(y).columnSpan=r.columns.count-(d+1));else{var S=r.rows.addRow();S.style.setBorder(i),S.style.setFont(n),S.style.setTextBrush(s),S.style.setBackgroundBrush(o);for(var y=0;y<r.columns.count;y++)S.cells.getCell(y).value=m[y].toString()}}},t.prototype.getTemplateFunction=function(t,r,i,n){return sf.base.isNullOrUndefined(n.column.footerTemplate)||n.cellType!==e.CellType.Summary?sf.base.isNullOrUndefined(n.column.groupCaptionTemplate)?t[sf.base.getEnumValue(e.CellType,e.CellType.GroupSummary)]=sf.base.compile(n.column.groupFooterTemplate):(-1===i&&(i=r),t[sf.base.getEnumValue(e.CellType,e.CellType.CaptionSummary)]=sf.base.compile(n.column.groupCaptionTemplate)):t[sf.base.getEnumValue(e.CellType,e.CellType.Summary)]=sf.base.compile(n.column.footerTemplate),{templateFunction:t,leastCaptionSummaryIndex:i}},t.prototype.getSummaryWithoutTemplate=function(e){return sf.base.isNullOrUndefined(e.Sum)?sf.base.isNullOrUndefined(e.Average)?sf.base.isNullOrUndefined(e.Max)?sf.base.isNullOrUndefined(e.Min)?sf.base.isNullOrUndefined(e.Count)?sf.base.isNullOrUndefined(e.TrueCount)?sf.base.isNullOrUndefined(e.FalseCount)?sf.base.isNullOrUndefined(e.Custom)?void 0:e.Custom:e.FalseCount:e.TrueCount:e.Count:e.Min:e.Max:e.Average:e.Sum},t.prototype.setColumnProperties=function(e,t,r,i,n){for(var s=i.groupSettings.columns.length,o=0;o<s;o++)t.columns.getColumn(o).width=20;for(o=0;o<e.length;o++)sf.base.isNullOrUndefined(e[o].textAlign)||(t.columns.getColumn(o+s).format=this.getHorizontalAlignment(e[o].textAlign)),t.style.allowHorizontalOverflow&&!sf.base.isNullOrUndefined(e[o].width)&&n&&(t.columns.getColumn(o+s).width="number"==typeof e[o].width?.75*e[o].width:.75*r.getConvertedWidth(e[o].width))},t.prototype.setRecordThemeStyle=function(e,t){if(sf.base.isNullOrUndefined(this.gridTheme)||sf.base.isNullOrUndefined(this.gridTheme.record))e.style.setTextBrush(new sf.pdfexport.PdfSolidBrush(new sf.pdfexport.PdfColor(0,0,0)));else{var r=sf.base.isNullOrUndefined(this.gridTheme.record.fontName)?sf.pdfexport.PdfFontFamily.Helvetica:this.getFontFamily(this.gridTheme.record.fontName),i=sf.base.isNullOrUndefined(this.gridTheme.record.fontSize)?9.75:this.gridTheme.record.fontSize,n=this.getFontStyle(this.gridTheme.record),s=new sf.pdfexport.PdfStandardFont(r,i,n);sf.base.isNullOrUndefined(this.gridTheme.record.font)||(s=this.gridTheme.record.font),e.style.setFont(s);var o=new sf.pdfexport.PdfColor;if(!sf.base.isNullOrUndefined(this.gridTheme.record.fontColor)){var a=this.hexToRgb(this.gridTheme.record.fontColor);o=new sf.pdfexport.PdfColor(a.r,a.g,a.b)}e.style.setTextBrush(new sf.pdfexport.PdfSolidBrush(o))}var l=this.gridTheme&&this.gridTheme.record&&this.gridTheme.record.border?this.getBorderStyle(this.gridTheme.record.border):t;return e.style.setBorder(l),e},t.prototype.processRecord=function(t,r,i,n,s,o,a,l,d){for(var c=0,h=l.getGridRowModel(r,n,i,d);c<h.length;c++){var p=h[c];d++;for(var u=this.setRecordThemeStyle(s.rows.addRow(),t),f=p.cells.length,g=0;g<f;g++){var m=p.cells[g];if(m.cellType===e.CellType.Data){var y=m.column,v=y.field,b=sf.base.isNullOrUndefined(v)?"":y.valueAccessor(v,p.data,y),C=sf.base.isNullOrUndefined(b)?"":b,w=void 0;if(y.isForeignColumn&&y.isForeignColumn()&&(w=l.getFData(C,y),C=sf.base.getValue(y.foreignKeyValue,w)),(F={data:p.data,value:C,column:y,style:void 0,colSpan:1,cell:x=u.cells.getCell(g)}).value=this.exportValueFormatter.formatCellValue(F,i.isServerRendered),this.parent.trigger("pdfQueryCellInfo",F),x.value=F.value,sf.base.isNullOrUndefined(F.style)||this.processCellStyle(x,F),F.colSpan>1){g+1+F.colSpan>u.cells.count&&(F.colSpan=u.cells.count-(g+1)),x.columnSpan=F.colSpan;for(var S=1;S<x.columnSpan;S++){u.cells.getCell(g+S).value=""}g+=F.colSpan-1}}}if(p.isExpand){var x,R=this.setRecordThemeStyle(s.rows.addRow(),t);(x=R.cells.getCell(o)).columnSpan=R.cells.count-o,x.style.cellPadding=new sf.pdfexport.PdfPaddings(10,10,10,10),i.isPrinting=!0;var I=!sf.base.isNullOrUndefined(a)&&a.exportType?a.exportType:"AllPages",T=this.helper.createChildGrid(i,p,I,this.gridPool),E=T.childGrid,D=T.element;E.actionFailure=l.failureHandler(this.gridPool,E,this.globalResolve);var F={childGrid:E,row:p,cell:x,exportProperties:a};this.parent.trigger("exportdetaildatabound",F),E.beforeDataBound=this.childGridCell(x,E,a),E.appendTo(D)}this.parent.notify("export-RowDataBound",{type:"pdf",rowObj:p})}return d},t.prototype.childGridCell=function(e,t,r){var i=this;return function(n){return t.beforeDataBound=null,n.cancel=!0,e.value=i.processGridExport(t,n,r),t.destroy(),sf.base.detach(t.element),i.gridPool[t.id]=!0,i.helper.checkAndExport(i.gridPool,i.globalResolve),e}},t.prototype.processCellStyle=function(e,t){if(!sf.base.isNullOrUndefined(t.style.backgroundColor)){var r=this.hexToRgb(t.style.backgroundColor);e.style.backgroundBrush=new sf.pdfexport.PdfSolidBrush(new sf.pdfexport.PdfColor(r.r,r.g,r.b))}if(sf.base.isNullOrUndefined(t.style.textAlignment)||(e.style.stringFormat=this.getHorizontalAlignment(t.style.textAlignment)),sf.base.isNullOrUndefined(t.style.cellPadding)||(e.style.cellPadding=t.style.cellPadding),sf.base.isNullOrUndefined(t.style.verticalAlignment)||(e.style.stringFormat=this.getVerticalAlignment(t.style.verticalAlignment,e.style.stringFormat)),!sf.base.isNullOrUndefined(t.style.textBrushColor)){var i=this.hexToRgb(t.style.textBrushColor);e.style.textBrush=new sf.pdfexport.PdfSolidBrush(new sf.pdfexport.PdfColor(i.r,i.g,i.b))}if(!sf.base.isNullOrUndefined(t.style.textPenColor)){var n=this.hexToRgb(t.style.textPenColor);e.style.textPen=new sf.pdfexport.PdfPen(new sf.pdfexport.PdfColor(n.r,n.g,n.b))}if(sf.base.isNullOrUndefined(t.style.fontFamily)&&sf.base.isNullOrUndefined(t.style.fontSize)&&sf.base.isNullOrUndefined(t.style.bold)&&sf.base.isNullOrUndefined(t.style.italic)&&sf.base.isNullOrUndefined(t.style.underline)&&sf.base.isNullOrUndefined(t.style.strikeout)||(e.style.font=this.getFont(t)),!sf.base.isNullOrUndefined(t.style.border)){var s=new sf.pdfexport.PdfBorders,o=t.style.border.width,a=sf.base.isNullOrUndefined(o)||"number"!=typeof o?void 0:.75*o,l=new sf.pdfexport.PdfColor(196,196,196);if(!sf.base.isNullOrUndefined(t.style.border.color)){var d=this.hexToRgb(t.style.border.color);l=new sf.pdfexport.PdfColor(d.r,d.g,d.b)}var c=new sf.pdfexport.PdfPen(l,a);sf.base.isNullOrUndefined(t.style.border.dashStyle)||(c.dashStyle=this.getDashStyle(t.style.border.dashStyle)),s.all=c,e.style.borders=s}sf.base.isNullOrUndefined(t.style.paragraphIndent)||(e.style.stringFormat=new sf.pdfexport.PdfStringFormat,e.style.stringFormat.paragraphIndent=t.style.paragraphIndent)},t.prototype.getHorizontalAlignment=function(e,t){switch(void 0===t&&(t=new sf.pdfexport.PdfStringFormat),e){case"Right":t.alignment=sf.pdfexport.PdfTextAlignment.Right;break;case"Center":t.alignment=sf.pdfexport.PdfTextAlignment.Center;break;case"Justify":t.alignment=sf.pdfexport.PdfTextAlignment.Justify;break;case"Left":t.alignment=sf.pdfexport.PdfTextAlignment.Left}return t},t.prototype.getVerticalAlignment=function(e,t,r){switch(void 0===t&&(t=new sf.pdfexport.PdfStringFormat,t=this.getHorizontalAlignment(r,t)),e){case"Bottom":t.lineAlignment=sf.pdfexport.PdfVerticalAlignment.Bottom;break;case"Middle":t.lineAlignment=sf.pdfexport.PdfVerticalAlignment.Middle;break;case"Top":t.lineAlignment=sf.pdfexport.PdfVerticalAlignment.Top}return t},t.prototype.getFontFamily=function(e){switch(e){case"TimesRoman":return 2;case"Courier":return 1;case"Symbol":return 3;case"ZapfDingbats":return 4;default:return 0}},t.prototype.getFont=function(e){if(e.font)return e.font;var t=sf.base.isNullOrUndefined(e.style.fontSize)?9.75:.75*e.style.fontSize,r=sf.base.isNullOrUndefined(e.style.fontFamily)?sf.pdfexport.PdfFontFamily.TimesRoman:this.getFontFamily(e.style.fontFamily),i=sf.pdfexport.PdfFontStyle.Regular;return!sf.base.isNullOrUndefined(e.style.bold)&&e.style.bold&&(i|=sf.pdfexport.PdfFontStyle.Bold),!sf.base.isNullOrUndefined(e.style.italic)&&e.style.italic&&(i|=sf.pdfexport.PdfFontStyle.Italic),!sf.base.isNullOrUndefined(e.style.underline)&&e.style.underline&&(i|=sf.pdfexport.PdfFontStyle.Underline),!sf.base.isNullOrUndefined(e.style.strikeout)&&e.style.strikeout&&(i|=sf.pdfexport.PdfFontStyle.Strikeout),new sf.pdfexport.PdfStandardFont(r,t,i)},t.prototype.getPageNumberStyle=function(e){switch(e){case"LowerLatin":return 2;case"LowerRoman":return 3;case"UpperLatin":return 4;case"UpperRoman":return 5;default:return 1}},t.prototype.setContentFormat=function(e,t){if(!sf.base.isNullOrUndefined(e.size)){var r=.75*e.size.width,i=.75*e.size.height;if(t=new sf.pdfexport.PdfStringFormat(sf.pdfexport.PdfTextAlignment.Left,sf.pdfexport.PdfVerticalAlignment.Middle),!sf.base.isNullOrUndefined(e.style.hAlign))switch(e.style.hAlign){case"Right":t.alignment=sf.pdfexport.PdfTextAlignment.Right;break;case"Center":t.alignment=sf.pdfexport.PdfTextAlignment.Center;break;case"Justify":t.alignment=sf.pdfexport.PdfTextAlignment.Justify;break;default:t.alignment=sf.pdfexport.PdfTextAlignment.Left}return sf.base.isNullOrUndefined(e.style.vAlign)||(t=this.getVerticalAlignment(e.style.vAlign,t)),{format:t,size:new sf.pdfexport.SizeF(r,i)}}return null},t.prototype.getPageSize=function(e){switch(e){case"Letter":return new sf.pdfexport.SizeF(612,792);case"Note":return new sf.pdfexport.SizeF(540,720);case"Legal":return new sf.pdfexport.SizeF(612,1008);case"A0":return new sf.pdfexport.SizeF(2380,3368);case"A1":return new sf.pdfexport.SizeF(1684,2380);case"A2":return new sf.pdfexport.SizeF(1190,1684);case"A3":return new sf.pdfexport.SizeF(842,1190);case"A5":return new sf.pdfexport.SizeF(421,595);case"A6":return new sf.pdfexport.SizeF(297,421);case"A7":return new sf.pdfexport.SizeF(210,297);case"A8":return new sf.pdfexport.SizeF(148,210);case"A9":return new sf.pdfexport.SizeF(105,148);case"B0":return new sf.pdfexport.SizeF(2836,4008);case"B1":return new sf.pdfexport.SizeF(2004,2836);case"B2":return new sf.pdfexport.SizeF(1418,2004);case"B3":return new sf.pdfexport.SizeF(1002,1418);case"B4":return new sf.pdfexport.SizeF(709,1002);case"B5":return new sf.pdfexport.SizeF(501,709);case"Archa":return new sf.pdfexport.SizeF(648,864);case"Archb":return new sf.pdfexport.SizeF(864,1296);case"Archc":return new sf.pdfexport.SizeF(1296,1728);case"Archd":return new sf.pdfexport.SizeF(1728,2592);case"Arche":return new sf.pdfexport.SizeF(2592,3456);case"Flsa":return new sf.pdfexport.SizeF(612,936);case"HalfLetter":return new sf.pdfexport.SizeF(396,612);case"Letter11x17":return new sf.pdfexport.SizeF(792,1224);case"Ledger":return new sf.pdfexport.SizeF(1224,792);default:return new sf.pdfexport.SizeF(595,842)}},t.prototype.getDashStyle=function(e){switch(e){case"Dash":return 1;case"Dot":return 2;case"DashDot":return 3;case"DashDotDot":return 4;default:return 0}},t.prototype.getPenFromContent=function(e){var t=new sf.pdfexport.PdfPen(new sf.pdfexport.PdfColor(0,0,0));if(!sf.base.isNullOrUndefined(e.style)&&null!==e.style&&!sf.base.isNullOrUndefined(e.style.penColor)){var r=this.hexToRgb(e.style.penColor);t=new sf.pdfexport.PdfPen(new sf.pdfexport.PdfColor(r.r,r.g,r.b))}return t},t.prototype.getBrushFromContent=function(e){var t=null;if(!sf.base.isNullOrUndefined(e.style.textBrushColor)){var r=this.hexToRgb(e.style.textBrushColor);t=new sf.pdfexport.PdfSolidBrush(new sf.pdfexport.PdfColor(r.r,r.g,r.b))}return t},t.prototype.hexToRgb=function(e){if(null===e||""===e||7!==e.length)throw new Error("please set valid hex value for color...");e=e.substring(1);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},t.prototype.getFontStyle=function(e){var t=sf.pdfexport.PdfFontStyle.Regular;return!sf.base.isNullOrUndefined(e)&&e.bold&&(t|=sf.pdfexport.PdfFontStyle.Bold),!sf.base.isNullOrUndefined(e)&&e.italic&&(t|=sf.pdfexport.PdfFontStyle.Italic),!sf.base.isNullOrUndefined(e)&&e.underline&&(t|=sf.pdfexport.PdfFontStyle.Underline),!sf.base.isNullOrUndefined(e)&&e.strikeout&&(t|=sf.pdfexport.PdfFontStyle.Strikeout),t},t.prototype.getBorderStyle=function(e){var t=new sf.pdfexport.PdfBorders;if(sf.base.isNullOrUndefined(e))t.all=new sf.pdfexport.PdfPen(new sf.pdfexport.PdfColor(234,234,234));else{var r=e.width,i=sf.base.isNullOrUndefined(r)||"number"!=typeof r?void 0:.75*r,n=new sf.pdfexport.PdfColor(196,196,196);if(!sf.base.isNullOrUndefined(e.color)){var s=this.hexToRgb(e.color);n=new sf.pdfexport.PdfColor(s.r,s.g,s.b)}var o=new sf.pdfexport.PdfPen(n,i);sf.base.isNullOrUndefined(e.dashStyle)||(o.dashStyle=this.getDashStyle(e.dashStyle)),t.all=o}return t},t.prototype.destroy=function(){},t}(),cn=($i=function(e,t){return($i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}$i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),hn=function(e){function t(t,r){var i=e.call(this,t,r)||this;return i.buttonElement=i.parent.createElement("button",{}),i.unbounDiv=i.parent.createElement("div",{className:"e-unboundcelldiv",styles:"display: inline-block"}),i.element=i.parent.createElement("TD",{className:"e-rowcell e-unboundcell",attrs:{role:"gridcell",tabindex:"-1"}}),i}return cn(t,e),t.prototype.render=function(e,t,r){var i=this.element.cloneNode();if(i.appendChild(this.unbounDiv.cloneNode()),i.setAttribute("aria-label","is Command column column header "+e.column.headerText),e.column.commandsTemplate)Jt(i.firstElementChild,e.column.getColumnTemplate()(t));else for(var n=0,s=e.commands;n<s.length;n++){var o=s[n];i=this.renderButton(i,o,r.index,o.uid)}return this.setAttributes(i,e,r),this.parent.isEdit?(sf.base.addClass(i.querySelectorAll(".e-edit-delete"),"e-hide"),sf.base.removeClass(i.querySelectorAll(".e-save-cancel"),"e-hide")):(sf.base.addClass(i.querySelectorAll(".e-save-cancel"),"e-hide"),sf.base.removeClass(i.querySelectorAll(".e-edit-delete"),"e-hide")),i},t.prototype.renderButton=function(e,t,r,i){var n=this.buttonElement.cloneNode();sf.base.attributes(n,{id:this.parent.element.id+(t.type||"")+"_"+r+"_"+i,type:"button",title:sf.base.isNullOrUndefined(t.title)?t.buttonOption.content||this.localizer.getConstant(t.type)||t.type:t.title,"data-uid":i}),n.onclick=t.buttonOption.click;var s=new sf.buttons.Button(t.buttonOption,n);switch(s.commandType=t.type,e.firstElementChild.appendChild(s.element),t.type){case"Edit":case"Delete":sf.base.addClass([n],["e-edit-delete","e-"+t.type.toLowerCase()+"button"]);break;case"Cancel":case"Save":sf.base.addClass([n],["e-save-cancel","e-"+t.type.toLowerCase()+"button"])}return e},t}(G),pn=function(){function t(e,t){this.parent=e,this.locator=t,this.initiateRender(),this.addEventListener()}return t.prototype.initiateRender=function(){this.locator.getService("cellRendererFactory").addCellRenderer(e.CellType.CommandColumn,new hn(this.parent,this.locator))},t.prototype.commandClickHandler=function(e){var t=this.parent,r=(t.element.id,sf.base.closest(e.target,"button"));if(r&&sf.base.closest(e.target,".e-unboundcell")){for(var i,n=r.ej2_instances[0],s=n.commandType,o=r.getAttribute("data-uid"),a=t.getRowObjectFromUID(sf.base.closest(r,".e-row").getAttribute("data-uid")),l=this.parent.columnModel,d=0;d<l.length;d++)if(l[d].commands)for(var c=l[d].commands,h=0;h<c.length;h++){sf.base.isBlazor()&&!t.isJsComponent&&c[h].uid===o?(i=c[h],s=c[h].type):c[h].uid===o&&c[h].type===s&&(i=c[h])}var p={cancel:!1,target:r,commandColumn:i,rowData:sf.base.isNullOrUndefined(a)?void 0:a.data};this.parent.trigger("commandClick",p,(function(e){if(!n.disabled&&t.editModule&&!e.cancel)switch(s){case"Edit":t.editModule.endEdit(),t.editModule.startEdit(sf.base.closest(r,"tr"));break;case"Cancel":t.editModule.closeEdit();break;case"Save":t.editModule.endEdit();break;case"Delete":"Batch"!==t.editSettings.mode&&t.editModule.endEdit(),t.commandDelIndex=parseInt(sf.base.closest(r,"tr").getAttribute("aria-rowindex"),10),t.clearSelection(),t.selectRow(t.commandDelIndex,!1),t.editModule.deleteRecord(),t.commandDelIndex=void 0}}))}},t.prototype.getModuleName=function(){return"commandColumn"},t.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},t.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(S,this.commandClickHandler),this.parent.off(w,this.keyPressHandler),this.parent.off(u,this.load))},t.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(S,this.commandClickHandler,this),this.parent.on(w,this.keyPressHandler,this),this.parent.on(u,this.load,this))},t.prototype.keyPressHandler=function(e){"enter"===e.action&&sf.base.closest(e.target,".e-unboundcelldiv")&&(this.commandClickHandler(e),e.preventDefault())},t.prototype.load=function(){if(!sf.base.isBlazor()||this.parent.isJsComponent)for(var e=this.parent.columnModel,t=0;t<e.length;t++)if(e[t].commands)for(var r=e[t].commands,i=0;i<r.length;i++)r[i].uid=Qt("gridcommand")},t}(),un={header:".e-gridheader",content:".e-gridcontent",edit:".e-inline-edit",batchEdit:".e-editedbatchcell",editIcon:"e-edit",pager:".e-gridpager",delete:"e-delete",save:"e-save",cancel:"e-cancel",copy:"e-copy",pdf:"e-pdfexport",group:"e-icon-group",ungroup:"e-icon-ungroup",csv:"e-csvexport",excel:"e-excelexport",fPage:"e-icon-first",nPage:"e-icon-next",lPage:"e-icon-last",pPage:"e-icon-prev",ascending:"e-icon-ascending",descending:"e-icon-descending",groupHeader:"e-groupdroparea",touchPop:"e-gridpopup"},fn=function(){function e(e,t){this.defaultItems={},this.disableItems=[],this.hiddenItems=[],this.localeText=this.setLocaleKey(),this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(m,this.enableAfterRenderMenu,this),this.parent.on(p,this.render,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(p,this.render),this.parent.off(m,this.enableAfterRenderMenu),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler.bind(this)))},e.prototype.keyDownHandler=function(e){"Tab"!==e.code&&9!==e.which||this.contextMenu.close(),"Escape"===e.code&&(this.contextMenu.close(),this.parent.notify("restore-Focus",{}))},e.prototype.render=function(){this.parent.element.classList.add("e-noselect"),this.l10n=this.serviceLocator.getService("localization"),this.element=this.parent.createElement("ul",{id:this.gridID+"_cmenu"}),sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler.bind(this)),this.parent.element.appendChild(this.element);var e="#"+this.gridID;this.contextMenu=new sf.navigations.ContextMenu({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:e,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:"e-grid-menu"}),this.contextMenu.appendTo(this.element)},e.prototype.enableAfterRenderMenu=function(e){e.module===this.getModuleName()&&e.enable&&(this.contextMenu&&(this.contextMenu.destroy(),sf.base.remove(this.element),this.parent.element.classList.remove("e-noselect")),this.render())},e.prototype.getMenuItems=function(){for(var e=[],t=[],r=0,i=this.parent.contextMenuItems;r<i.length;r++){var n=i[r];"string"==typeof n&&-1!==this.getDefaultItems().indexOf(n)?-1!==n.toLocaleLowerCase().indexOf("export")?t.push(this.buildDefaultItems(n)):e.push(this.buildDefaultItems(n)):"string"!=typeof n&&e.push(n)}if(t.length>0){var s=this.buildDefaultItems("export");s.items=t,e.push(s)}return e},e.prototype.getLastPage=function(){var e=Math.floor(this.parent.pageSettings.totalRecordsCount/this.parent.pageSettings.pageSize);return this.parent.pageSettings.totalRecordsCount%this.parent.pageSettings.pageSize&&(e+=1),e},e.prototype.contextMenuOpen=function(){this.isOpen=!0},e.prototype.contextMenuItemClick=function(e){switch(this.getKeyFromId(e.item.id)){case"AutoFitAll":this.parent.autoFitColumns([]);break;case"AutoFit":this.parent.autoFitColumns(this.targetColumn.field);break;case"Group":this.parent.groupColumn(this.targetColumn.field);break;case"Ungroup":this.parent.ungroupColumn(this.targetColumn.field);break;case"Edit":this.parent.editModule&&("Batch"===this.parent.editSettings.mode?this.row&&this.cell&&!isNaN(parseInt(this.cell.getAttribute("aria-colindex"),10))&&this.parent.editModule.editCell(parseInt(this.row.getAttribute("aria-rowindex"),10),this.parent.getColumns()[parseInt(this.cell.getAttribute("aria-colindex"),10)].field):(this.parent.editModule.endEdit(),this.parent.editModule.startEdit(this.row)));break;case"Delete":this.parent.editModule&&("Batch"!==this.parent.editSettings.mode&&this.parent.editModule.endEdit(),1===this.parent.getSelectedRecords().length?this.parent.editModule.deleteRow(this.row):this.parent.deleteRecord());break;case"Save":this.parent.editModule&&this.parent.editModule.endEdit();break;case"Cancel":this.parent.editModule&&this.parent.editModule.closeEdit();break;case"Copy":this.parent.copy();break;case"PdfExport":this.parent.pdfExport();break;case"ExcelExport":this.parent.excelExport();break;case"CsvExport":this.parent.csvExport();break;case"SortAscending":this.isOpen=!1,this.parent.sortColumn(this.targetColumn.field,"Ascending");break;case"SortDescending":this.isOpen=!1,this.parent.sortColumn(this.targetColumn.field,"Descending");break;case"FirstPage":this.parent.goToPage(1);break;case"PrevPage":this.parent.goToPage(this.parent.pageSettings.currentPage-1);break;case"LastPage":this.parent.goToPage(this.getLastPage());break;case"NextPage":this.parent.goToPage(this.parent.pageSettings.currentPage+1)}if(e.column=this.targetColumn,e.rowInfo=this.targetRowdata,sf.base.isBlazor()){var t=e.rowInfo.row?{element:e.element,item:e.item,event:e.event,column:this.targetColumn,rowInfo:{rowData:this.targetRowdata.rowData,rowIndex:this.targetRowdata.rowIndex,cellIndex:this.targetRowdata.cellIndex}}:this.targetColumn?{element:e.element,item:e.item,event:e.event,column:this.targetColumn}:{element:e.element,item:e.item,event:e.event};this.parent.trigger("contextMenuClick",t)}else this.parent.trigger("contextMenuClick",e)},e.prototype.contextMenuOnClose=function(e){e.items.length>0&&e.items[0].parentObj instanceof sf.navigations.ContextMenu&&this.updateItemStatus()},e.prototype.getLocaleText=function(e){return this.l10n.getConstant(this.localeText[e])},e.prototype.updateItemStatus=function(){this.contextMenu.showItems(this.hiddenItems),this.contextMenu.enableItems(this.disableItems),this.hiddenItems=[],this.disableItems=[],this.isOpen=!1},e.prototype.contextMenuBeforeOpen=function(e){var t=sf.base.closest(e.event.target,".e-grid");if(e.event&&t&&t!==this.parent.element)e.cancel=!0;else if(e.event&&(sf.base.closest(e.event.target,"."+un.groupHeader)||sf.base.closest(e.event.target,"."+un.touchPop)||sf.base.closest(e.event.target,".e-summarycell")||sf.base.closest(e.event.target,".e-groupcaption")||sf.base.closest(e.event.target,".e-filterbarcell")))e.cancel=!0;else{this.targetColumn=this.getColumn(e.event),this.targetRowdata=this.parent.getRowInfo(e.event.target),sf.base.isNullOrUndefined(e.parentItem)&&this.targetColumn&&this.targetRowdata.cell&&this.selectRow(e.event,!this.targetRowdata.cell.classList.contains("e-selectionbackground")||"Multiple"!==this.parent.selectionSettings.type);for(var r=[],i=[],n=0,s=e.items;n<s.length;n++){var o=s[n],a=this.getKeyFromId(o.id),l=this.defaultItems[a];if(-1!==this.getDefaultItems().indexOf(a))if(this.ensureDisabledStatus(a)&&this.disableItems.push(o.text),e.event&&(this.ensureTarget(e.event.target,un.edit)||this.ensureTarget(e.event.target,un.batchEdit)))"Save"!==a&&"Cancel"!==a&&this.hiddenItems.push(o.text);else{if(this.parent.editModule&&"Batch"===this.parent.editSettings.mode&&(sf.base.closest(e.event.target,".e-gridform")||this.parent.editModule.getBatchChanges().changedRecords.length||this.parent.editModule.getBatchChanges().addedRecords.length||this.parent.editModule.getBatchChanges().deletedRecords.length)&&("Save"===a||"Cancel"===a))continue;sf.base.isNullOrUndefined(e.parentItem)&&e.event&&!this.ensureTarget(e.event.target,l.target)&&this.hiddenItems.push(o.text)}else o.target&&e.event&&!this.ensureTarget(e.event.target,o.target)?o.separator?r.push(o.id):this.hiddenItems.push(o.text):this.ensureTarget(e.event.target,o.target)&&o.separator&&i.push(o.id)}i.length>0&&this.contextMenu.showItems(i,!0),this.contextMenu.enableItems(this.disableItems,!1),this.contextMenu.hideItems(this.hiddenItems),r.length>0&&this.contextMenu.hideItems(r,!0),this.eventArgs=e.event,e.column=this.targetColumn,e.rowInfo=this.targetRowdata,this.parent.trigger("contextMenuOpen",e),(e.cancel||this.hiddenItems.length===e.items.length&&!e.parentItem)&&(this.updateItemStatus(),e.cancel=!0)}kr(this.parent.element,this.contextMenu.element.parentElement)},e.prototype.ensureTarget=function(e,t){var r=e;return(r=!this.ensureFrozenHeader(e)||t!==un.header&&t!==un.content?t===un.content||t===un.header?Ut(sf.base.closest(e,".e-table"),t.substr(1,t.length)):sf.base.closest(e,t):sf.base.closest(e,t===un.header?"thead":"tbody"))&&Ut(r,"e-grid")===this.parent.element},e.prototype.ensureFrozenHeader=function(e){return!(!this.parent.getFrozenColumns()&&!this.parent.frozenRows||!sf.base.closest(e,un.header))},e.prototype.ensureDisabledStatus=function(e){var t=!1;switch(e){case"AutoFitAll":case"AutoFit":t=!(this.parent.ensureModuleInjected(fi)&&!this.parent.isEdit)||this.targetColumn&&!this.targetColumn.field&&"AutoFit"===e;break;case"Group":(!this.parent.allowGrouping||this.parent.ensureModuleInjected(yi)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)>=0||this.targetColumn&&!this.targetColumn.field)&&(t=!0);break;case"Ungroup":(!this.parent.allowGrouping||!this.parent.ensureModuleInjected(yi)||this.parent.ensureModuleInjected(yi)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)<0)&&(t=!0);break;case"Edit":case"Delete":case"Save":case"Cancel":this.parent.editModule&&0!==this.parent.getDataRows().length||(t=!0);break;case"Copy":0!==this.parent.getSelectedRowIndexes().length&&0!==this.parent.getCurrentViewRecords().length||(t=!0);break;case"export":this.parent.allowExcelExport&&this.parent.excelExport&&(this.parent.ensureModuleInjected(dn)||this.parent.ensureModuleInjected(ln))||(t=!0);break;case"PdfExport":this.parent.allowPdfExport&&this.parent.ensureModuleInjected(dn)||(t=!0);break;case"ExcelExport":case"CsvExport":this.parent.allowExcelExport&&this.parent.ensureModuleInjected(ln)||(t=!0);break;case"SortAscending":case"SortDescending":if(!this.parent.allowSorting||!this.parent.ensureModuleInjected(_r)||this.targetColumn&&!this.targetColumn.field)t=!0;else if(this.parent.ensureModuleInjected(_r)&&this.parent.sortSettings.columns.length>0&&this.targetColumn)for(var r=this.parent.sortSettings.columns,i=0;i<r.length;i++)r[i].field===this.targetColumn.field&&r[i].direction.toLowerCase()===e.toLowerCase().replace("sort","").toLocaleLowerCase()&&(t=!0);break;case"FirstPage":case"PrevPage":(!this.parent.allowPaging||!this.parent.ensureModuleInjected(Zr)||0===this.parent.getCurrentViewRecords().length||this.parent.ensureModuleInjected(Zr)&&1===this.parent.pageSettings.currentPage)&&(t=!0);break;case"LastPage":case"NextPage":(!this.parent.allowPaging||!this.parent.ensureModuleInjected(Zr)||0===this.parent.getCurrentViewRecords().length||this.parent.ensureModuleInjected(Zr)&&this.parent.pageSettings.currentPage===this.getLastPage())&&(t=!0)}return t},e.prototype.getContextMenu=function(){return this.element},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.contextMenu.destroy(),sf.base.remove(this.element),this.removeEventListener(),this.parent.element.classList.remove("e-noselect"))},e.prototype.getModuleName=function(){return"contextMenu"},e.prototype.generateID=function(e){return this.gridID+"_cmenu_"+e},e.prototype.getKeyFromId=function(e){return e.replace(this.gridID+"_cmenu_","")},e.prototype.buildDefaultItems=function(e){var t;switch(e){case"AutoFitAll":case"AutoFit":t={target:un.header};break;case"Group":t={target:un.header,iconCss:un.group};break;case"Ungroup":t={target:un.header,iconCss:un.ungroup};break;case"Edit":t={target:un.content,iconCss:un.editIcon};break;case"Delete":t={target:un.content,iconCss:un.delete};break;case"Save":t={target:un.edit,iconCss:un.save};break;case"Cancel":t={target:un.edit,iconCss:un.cancel};break;case"Copy":t={target:un.content,iconCss:un.copy};break;case"export":t={target:un.content};break;case"PdfExport":t={target:un.content,iconCss:un.pdf};break;case"ExcelExport":t={target:un.content,iconCss:un.excel};break;case"CsvExport":t={target:un.content,iconCss:un.csv};break;case"SortAscending":t={target:un.header,iconCss:un.ascending};break;case"SortDescending":t={target:un.header,iconCss:un.descending};break;case"FirstPage":t={target:un.pager,iconCss:un.fPage};break;case"PrevPage":t={target:un.pager,iconCss:un.pPage};break;case"LastPage":t={target:un.pager,iconCss:un.lPage};break;case"NextPage":t={target:un.pager,iconCss:un.nPage}}return this.defaultItems[e]={text:this.getLocaleText(e),id:this.generateID(e),target:t.target,iconCss:t.iconCss?"e-icons "+t.iconCss:""},this.defaultItems[e]},e.prototype.getDefaultItems=function(){return["AutoFitAll","AutoFit","Group","Ungroup","Edit","Delete","Save","Cancel","Copy","export","PdfExport","ExcelExport","CsvExport","SortAscending","SortDescending","FirstPage","PrevPage","LastPage","NextPage"]},e.prototype.setLocaleKey=function(){var e={AutoFitAll:"autoFitAll",AutoFit:"autoFit",Copy:"Copy",Group:"Group",Ungroup:"Ungroup",Edit:"EditRecord",Delete:"DeleteRecord",Save:"Save",Cancel:"CancelButton",PdfExport:"Pdfexport",ExcelExport:"Excelexport",CsvExport:"Csvexport",export:"Export",SortAscending:"SortAscending",SortDescending:"SortDescending",FirstPage:"FirstPage",LastPage:"LastPage",PrevPage:"PreviousPage",NextPage:"NextPage"};if(sf.base.isBlazor()){e.AutoFitAll="AutoFitAll";e.AutoFit="AutoFit"}return e},e.prototype.getColumn=function(e){var t=sf.base.closest(e.target,"th.e-headercell");if(t){var r=t.querySelector(".e-headercelldiv, .e-stackedheadercelldiv").getAttribute("e-mappinguid");return this.parent.getColumnByUid(r)}return this.parent.getRowInfo(e.target).column||null},e.prototype.selectRow=function(e,t){this.cell=e.target,this.row=sf.base.closest(e.target,"tr.e-row")||this.row,this.row&&t&&!Ut(e.target,"e-gridpager")&&this.parent.selectRow(parseInt(this.row.getAttribute("aria-rowindex"),10))},e}(),gn=function(){function e(e){this.isFrzLoad=1,this.parent=e,this.rowModelGenerator=new P(this.parent)}return e.prototype.generateRows=function(e,t,r){var i=this.parent.getFrozenColumns();if(this.isFrzLoad%2!=0&&"virtualscroll"===t.requestType&&"X"===t.virtualInfo.sentinelInfo.axis)return this.isFrzLoad++,null;var n=this.parent.enableVirtualization?r:this.rowModelGenerator.generateRows(e,t);if(sf.base.isBlazor()&&!this.parent.isJsComponent)return n;for(var s=0,o=n.length;s<o;s++)this.isFrzLoad%2==0?n[s].cells=n[s].cells.slice(i,n[s].cells.length):(n[s].isFreezeRow=!0,n[s].cells=n[s].cells.slice(0,i));return this.isFrzLoad++,n},e}(),mn=(Zi=function(e,t){return(Zi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Zi(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),yn=function(e){function t(t,r){return e.call(this,t,r)||this}return mn(t,e),t.prototype.renderPanel=function(){e.prototype.renderPanel.call(this);var t=this.parent.element.querySelector(".e-frozencontent"),r=this.parent.element.querySelector(".e-movablecontent");sf.base.isNullOrUndefined(t)&&(t=this.parent.createElement("div",{className:"e-frozencontent"}),r=this.parent.createElement("div",{className:"e-movablecontent"}),this.getPanel().querySelector(".e-content").appendChild(t),this.getPanel().querySelector(".e-content").appendChild(r)),this.setFrozenContent(t),this.setMovableContent(r)},t.prototype.renderEmpty=function(t){sf.base.isBlazor()&&!this.parent.isJsComponent||(e.prototype.renderEmpty.call(this,t),this.getMovableContent().querySelector("tbody").innerHTML="<tr><td></td></tr>",this.getFrozenContent().querySelector(".e-emptyrow").querySelector("td").colSpan=this.parent.getFrozenColumns(),this.getFrozenContent().style.borderRightWidth="0px",this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody").innerHTML="",this.parent.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody").innerHTML=""))},t.prototype.setFrozenContent=function(e){this.frozenContent=e},t.prototype.setMovableContent=function(e){this.movableContent=e},t.prototype.getFrozenContent=function(){return this.frozenContent},t.prototype.getMovableContent=function(){return this.movableContent},t.prototype.getModelGenerator=function(){return new gn(this.parent)},t.prototype.renderTable=function(){var t;null==this.getFrozenContent().querySelector(".e-table")?(e.prototype.renderTable.call(this),this.getFrozenContent().appendChild(this.getTable()),t=this.getTable().cloneNode(!0),this.getMovableContent().appendChild(t)):(this.setTable(this.getFrozenContent().querySelector(".e-table")),this.setColGroup(this.parent.element.querySelector(".e-gridheader").querySelector("colgroup").cloneNode(!0)),this.getFrozenContent().querySelector(".e-table").appendChild(this.getColGroup()),t=this.getMovableContent().querySelector(".e-table"),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdrcont")),this.getMovableContent().querySelector("colgroup")&&sf.base.remove(this.getMovableContent().querySelector("colgroup"));var r=this.parent.getHeaderContent().querySelector(".e-movableheader").querySelector("colgroup").cloneNode(!0);t.insertBefore(r,t.querySelector("tbody"))},t}(j),vn=function(e){function t(t,r){var i=e.call(this,t,r)||this;return i.addEventListener(),i}return mn(t,e),t.prototype.addEventListener=function(){this.parent.on("freezerender",this.refreshFreeze,this),this.parent.on("frozenHeight",this.setFrozenHeight,this),this.parent.on(m,this.enableAfterRender,this)},t.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("frozenHeight",this.setFrozenHeight),this.parent.off(m,this.enableAfterRender))},t.prototype.renderTable=function(){sf.base.isBlazor()?(this.setTable(this.createTable(this.getFrozenHeader().querySelector(".e-table"))),this.parent.notify(C,{rows:this.rows,args:{isFrozen:!0}}),this.createTable(this.getMovableHeader().querySelector(".e-table"))):e.prototype.renderTable.call(this),this.rfshMovable(),this.updateColgroup(),this.initializeHeaderDrag(),this.initializeHeaderDrop(),this.parent.notify(C,{rows:this.rows,args:{isFrozen:!1}})},t.prototype.renderPanel=function(){var t=this.parent.element.querySelector(".e-frozenheader"),r=this.parent.element.querySelector(".e-movableheader");e.prototype.renderPanel.call(this),sf.base.isNullOrUndefined(t)&&(t=this.parent.createElement("div",{className:"e-frozenheader"}),r=this.parent.createElement("div",{className:"e-movableheader"}),this.getPanel().querySelector(".e-headercontent").appendChild(t),this.getPanel().querySelector(".e-headercontent").appendChild(r)),this.setFrozenHeader(t),this.setMovableHeader(r)},t.prototype.refreshUI=function(){if(sf.base.isBlazor()&&this.parent.isServerRendered&&0!==this.parent.frozenRows)this.parent.getFrozenColumns()&&this.freezeReorder&&(e.prototype.refreshUI.call(this),this.freezeReorder=!1,e.prototype.refreshUI.call(this)),this.rfshMovable();else{var t=this.getMovableHeader().querySelector("tbody");sf.base.remove(this.getMovableHeader().querySelector("table")),e.prototype.refreshUI.call(this),this.rfshMovable(),this.getMovableHeader().querySelector("tbody").innerHTML=t.innerHTML}sf.base.isBlazor()&&0!==this.parent.frozenRows||this.updateColgroup(),this.parent.enableVirtualization||this.widthService.setWidthToTable(),this.parent.allowTextWrap&&"Header"===this.parent.textWrapSettings.wrapMode&&ar([].slice.call(this.movableHeader.querySelectorAll("tr.e-columnheader")),!0),this.parent.updateDefaultCursor(),sf.base.isBlazor()&&0!==this.parent.frozenRows||Cr(this.parent.getContentTable().querySelector("colgroup"),this.parent.getFrozenColumns()),this.initializeHeaderDrag(),this.parent.notify(C,{rows:this.rows,args:{isFrozen:!1}})},t.prototype.rfshMovable=function(){this.parent.enableColumnVirtualization?(this.parent.getFrozenVirtualHeader().querySelector(".e-virtualtable").appendChild(this.getTable()),this.parent.getMovableVirtualHeader().querySelector(".e-virtualtable").appendChild(this.createTable())):sf.base.isBlazor()&&0!==this.parent.frozenRows||(this.getFrozenHeader().appendChild(this.getTable()),this.getMovableHeader().appendChild(this.createTable())),this.refreshStackedHdrHgt(),this.addMovableFirstCls()},t.prototype.addMovableFirstCls=function(){if(this.parent.getVisibleFrozenColumns())for(var e=this.parent.element.querySelector(".e-movableheader").querySelector("thead").querySelectorAll(".e-columnheader"),t=this.parent.element.querySelector(".e-movableheader").querySelector("thead").querySelectorAll(".e-columnheader").length,r=0;r<t;r++){var i=e[r].cells[0];i&&(sf.base.addClass([i],["e-movablefirst"]),e[r].cells[0].rowSpan>1&&(r+=e[r].cells[0].rowSpan-1))}},t.prototype.refreshFreeze=function(e){if("filter"===e.case){var t=this.getTable().querySelector(".e-filterbar");if(this.parent.allowFiltering&&t&&this.getMovableHeader().querySelector("thead")){this.getMovableHeader().querySelector("thead").appendChild(this.filterRenderer(t,this.parent.getFrozenColumns()));for(var r=0,i=[].slice.call(this.getMovableHeader().querySelectorAll("thead .e-filterbarcell .e-input"));r<i.length;r++){var n={element:i[r],floatLabelType:"Never",properties:{enableRtl:this.parent.enableRtl,showClearButton:!0}};sf.inputs.Input.bindInitialEvent(n)}}}else if("textwrap"===e.case||"refreshHeight"===e.case){var s=void 0,o=void 0,a=this.getFrozenHeader(),l=this.getMovableHeader(),d=this.parent.getContent(),c=this.parent.textWrapSettings.wrapMode,h=this.parent.getHeaderContent().querySelector(".e-headercontent").classList;"textwrap"===e.case?(("Header"!==c||e.isModeChg)&&(s=d.querySelector(".e-frozencontent").querySelectorAll("tr"),o=d.querySelector(".e-movablecontent").querySelectorAll("tr"),this.setWrapHeight(s,o,e.isModeChg,!0)),"Content"===c&&this.parent.allowTextWrap?h.add("e-wrap"):h.remove("e-wrap"),"Both"===c||e.isModeChg?(s=a.querySelectorAll("tr"),o=l.querySelectorAll("tr")):(s=a.querySelector("Content"===c?"tbody":"thead").querySelectorAll("tr"),o=l.querySelector("Content"===c?"tbody":"thead").querySelectorAll("tr")),this.parent.getHeaderContent().querySelectorAll(".e-stackedheadercell").length||this.setWrapHeight(s,o,e.isModeChg,!1,this.colDepth>1),this.refreshStackedHdrHgt()):"refreshHeight"===e.case&&(this.setWrapHeight(d.querySelector(".e-frozencontent").querySelectorAll("tr"),d.querySelector(".e-movablecontent").querySelectorAll("tr"),e.isModeChg),this.parent.getHeaderContent().querySelectorAll(".e-stackedheadercell").length||this.setWrapHeight(a.querySelectorAll("tr"),l.querySelectorAll("tr"),e.isModeChg))}},t.prototype.enableAfterRender=function(e){"scroll"===e.module&&this.setFrozenHeight()},t.prototype.updateResizeHandler=function(){for(var e=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-rhandler")),t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"},t.prototype.setWrapHeight=function(e,t,r,i,n){for(var s,o,a=this.parent.allowTextWrap,l=this.parent.textWrapSettings.wrapMode,d=this.parent.getHeaderContent().querySelector("thead"),c=this.parent.getHeaderContent().querySelector("tbody"),h=[],p=[],u=0,f=e.length;u<f;u++)sf.base.isNullOrUndefined(e[u])||sf.base.isNullOrUndefined(t[u])||(h[u]=e[u].getBoundingClientRect().height,p[u]=t[u].getBoundingClientRect().height);for(u=0,f=e.length;u<f;u++)(r&&("Header"===l&&i||"Content"===l&&d.contains(e[u])||"Header"===l&&c.contains(e[u]))||n)&&(e[u].style.height=null,t[u].style.height=null),s=h[u],o=p[u],!sf.base.isNullOrUndefined(e[u])&&e[u].childElementCount&&(a&&s<o||!a&&s<o||this.parent.allowResizing&&this.parent.resizeModule&&!1===this.parent.resizeModule.isFrozenColResized)&&(e[u].style.height=o+"px"),t&&!sf.base.isNullOrUndefined(t[u])&&t[u].childElementCount&&(a&&s>o||!a&&s>o||this.parent.allowResizing&&this.parent.resizeModule&&!0===this.parent.resizeModule.isFrozenColResized)&&(t[u].style.height=s+"px");a&&this.setFrozenHeight()},t.prototype.setFrozenHeight=function(e){void 0===e&&(e=er());var t=this.parent.element.querySelector(".e-movablecontent").getBoundingClientRect().height,r=this.parent.element.querySelector(".e-movablecontent"),i=this.parent.element.querySelector(".e-frozencontent"),n=this.parent.getContent().scrollWidth,s=this.parent.element.querySelector(".e-movablecontent table").scrollWidth+this.parent.getContentTable().scrollWidth;r.scrollWidth-r.clientWidth?(i.style.height=t-e+"px",i.style.borderBottom=""):(i.style.height=t+"px",(i.scrollHeight<=i.clientHeight||r.scrollHeight<=r.clientHeight)&&n===s&&this.parent.scrollModule.removePadding(),i.style.borderBottom="0px")},t.prototype.refreshStackedHdrHgt=function(){for(var e,t,r=this.getFrozenHeader().querySelectorAll(".e-columnheader"),i=this.getMovableHeader().querySelectorAll(".e-columnheader"),n=0,s=r.length;n<s;n++)e=this.getRowSpan(r[n]),t=this.getRowSpan(i[n]),e.min>1?this.updateStackedHdrRowHgt(n,e.max,r[n],i):t.min>1&&this.updateStackedHdrRowHgt(n,t.max,i[n],r);this.parent.allowResizing&&this.updateResizeHandler()},t.prototype.getRowSpan=function(e){for(var t,r,i,n=0,s=e.childElementCount;n<s;n++)0===n&&(r=e.children[0].rowSpan),t=e.children[n].rowSpan,r=Math.min(t,r),i=Math.max(t,r);return{min:r,max:i}},t.prototype.updateStackedHdrRowHgt=function(e,t,r,i){for(var n=0,s=0;s<t;s++)n+=i[e+s].style.height?parseInt(i[e+s].style.height,10):i[e+s].offsetHeight;r.style.height=n+"px"},t.prototype.setFrozenHeader=function(e){this.frozenHeader=e},t.prototype.setMovableHeader=function(e){this.movableHeader=e},t.prototype.getFrozenHeader=function(){return this.frozenHeader},t.prototype.getMovableHeader=function(){return this.movableHeader},t.prototype.updateColgroup=function(){var e=this.getMovableHeader().querySelector("table");sf.base.remove(this.getMovableHeader().querySelector("colgroup")),e.insertBefore(Cr(this.getFrozenHeader().querySelector("colgroup"),this.parent.getFrozenColumns()),e.querySelector("thead"))},t.prototype.filterRenderer=function(e,t){var r=e.cloneNode(!0);r.innerHTML="";for(var i=t;i<this.parent.getColumns().length;i++)r.appendChild(e.removeChild(e.children[t]));return r},t}(V),bn=(en=function(e,t){return(en=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}en(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Cn=function(e){function t(t,r){var i=e.call(this,t,r)||this;return i.frzeeLoad=1,i.serviceLoc=r,i}return bn(t,e),t.prototype.renderTable=function(){this.freezeRowGenerator=new gn(this.parent),this.virtualRenderer=new ki(this.parent,this.serviceLoc),this.virtualRenderer.setPanel(this.parent.getContent()),this.virtualRenderer.renderTable();var e=this.parent.getContent().querySelector(".e-virtualtable"),t=this.parent.getContent().querySelector(".e-virtualtrack");t.style.position="",this.getFrozenContent().appendChild(e),this.getFrozenContent().appendChild(t);var r=e.cloneNode(!0),i=t.cloneNode(!0);this.getMovableContent().appendChild(r),this.getMovableContent().appendChild(i),sf.base.remove(this.getMovableContent().querySelector("colgroup"));var n=this.parent.getMovableVirtualHeader().querySelector("colgroup").cloneNode(!0);r.firstElementChild.insertBefore(n,r.firstElementChild.querySelector("tbody")),this.setTable(this.parent.element.querySelector(".e-frozencontent").querySelector(".e-table"))},t.prototype.appendContent=function(e,t,r){this.virtualRenderer.appendContent(e,t,r)},t.prototype.generateRows=function(e,t){var r;return r=this.virtualRenderer.vgenerator.generateRows(e,t).map((function(e){return sf.base.extend({},e)})),this.firstPageRecords||(this.firstPageRecords=e),this.freezeRowGenerator.generateRows(e,t,r)},t.prototype.getRowByIndex=function(e){return this.virtualRenderer.getRowByIndex(e)},t.prototype.getMovableRowByIndex=function(e){return this.virtualRenderer.getMovableVirtualRowByIndex(e)},t.prototype.getMovableRows=function(){return this.virtualRenderer.vgenerator.getRows()},t.prototype.getRows=function(){return this.getMovableRows()},t.prototype.getColGroup=function(){var e=this.parent.getMovableVirtualContent().querySelector("colgroup"),t=this.parent.getFrozenVirtualContent().querySelector("colgroup");return this.isXaxis()?e:t},t.prototype.getReorderedFrozenRows=function(e){var t,r=e.virtualInfo.blockIndexes,i=e.virtualInfo.columnIndexes,n=e.virtualInfo.page;e.virtualInfo.blockIndexes=[1,2],e.virtualInfo.page=1,e.renderMovableContent||(e.virtualInfo.columnIndexes=[]);var s=this.virtualRenderer.vgenerator.generateRows(this.firstPageRecords,e);return t=this.splitReorderedRows(s),e.virtualInfo.blockIndexes=r,e.virtualInfo.columnIndexes=i,e.virtualInfo.page=n,t.splice(0,this.parent.frozenRows)},t.prototype.splitReorderedRows=function(e){for(var t=this.parent.getFrozenColumns(),r=0,i=e.length;r<i;r++)this.frzeeLoad%2==0?e[r].cells=e[r].cells.slice(t,e[r].cells.length):(e[r].isFreezeRow=!0,e[r].cells=e[r].cells.slice(0,t));return this.frzeeLoad++,e},t.prototype.isXaxis=function(){var e=!1;return this.virtualRenderer&&(e="virtualscroll"===this.virtualRenderer.requestType&&"X"===this.virtualRenderer.currentInfo.sentinelInfo.axis),e},t.prototype.getHeaderCells=function(){var e=this.isXaxis()?this.parent.getMovableVirtualHeader():this.parent.getHeaderContent();return e?[].slice.call(e.querySelectorAll(".e-headercell:not(.e-stackedheadercell)")):[]},t.prototype.getVirtualFreezeHeader=function(){return this.isXaxis()?this.parent.getMovableVirtualHeader().querySelector(".e-table"):this.parent.getFrozenVirtualHeader().querySelector(".e-table")},t.prototype.ensureFrozenCols=function(e){return e=this.parent.columns.slice(0,this.parent.getFrozenColumns()).concat(e)},t.prototype.getRowObjectByIndex=function(e){return this.virtualRenderer.getRowObjectByIndex(e)},t}(yn),wn=function(e){function t(t,r){var i=e.call(this,t,r)||this;return i.serviceLoc=r,i}return bn(t,e),t.prototype.renderTable=function(){this.virtualHdrRenderer=new Ai(this.parent,this.serviceLoc),this.virtualEle=this.virtualHdrRenderer.virtualEle,this.virtualHdrRenderer.setPanel(this.parent.getHeaderContent()),this.virtualHdrRenderer.renderTable(),this.rfhMovable(),this.updateColgroup(),this.initializeHeaderDrag(),this.initializeHeaderDrop(),this.setTable(this.parent.element.querySelector(".e-frozenheader").querySelector(".e-table")),this.parent.notify(C,{rows:this.rows,args:{isFrozen:!1}})},t.prototype.rfhMovable=function(){var e=this.parent.getHeaderContent().querySelector(".e-virtualtable"),t=this.parent.getHeaderContent().querySelector(".e-virtualtrack");this.getFrozenHeader().appendChild(e),this.getFrozenHeader().appendChild(t),this.virtualHdrRenderer.virtualEle.table=this.createTable(),this.virtualHdrRenderer.virtualEle.renderWrapper(),this.virtualHdrRenderer.virtualEle.renderPlaceHolder();var r=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-virtualtable")),i=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-virtualtrack"));this.getMovableHeader().appendChild(r[1]),this.getMovableHeader().appendChild(i[1])},t.prototype.getTable=function(){return this.virtualHdrRenderer.getTable()},t}(vn),Sn=function(){function t(e,t){this.parent=e,this.locator=t,this.addEventListener()}return t.prototype.getModuleName=function(){return"freeze"},t.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on(p,this.instantiateRenderer,this)},t.prototype.instantiateRenderer=function(){this.parent.log("limitation",this.getModuleName());var t=this.locator.getService("rendererFactory");this.parent.getFrozenColumns()&&(this.parent.enableColumnVirtualization?t.addRenderer(e.RenderType.Header,new wn(this.parent,this.locator)):t.addRenderer(e.RenderType.Header,new vn(this.parent,this.locator)),this.parent.enableVirtualization?t.addRenderer(e.RenderType.Content,new Cn(this.parent,this.locator)):t.addRenderer(e.RenderType.Content,new yn(this.parent,this.locator)))},t.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off(p,this.instantiateRenderer)},t.prototype.destroy=function(){this.removeEventListener()},t}(),xn=function(){function e(e,t){this.defaultItems={},this.localeText=this.setLocaleKey(),this.disableItems=[],this.hiddenItems=[],this.isOpen=!1,this.GROUP="e-icon-group",this.UNGROUP="e-icon-ungroup",this.ASCENDING="e-icon-ascending",this.DESCENDING="e-icon-descending",this.ROOT="e-columnmenu",this.FILTER="e-icon-filter",this.POP="e-filter-popup",this.WRAP="e-col-menu",this.CHOOSER="_chooser_",this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}return e.prototype.wireEvents=function(){for(var e=this.getColumnMenuHandlers(),t=0;t<e.length;t++)sf.base.EventHandler.add(e[t],"mousedown",this.columnMenuHandlerDown,this)},e.prototype.unwireEvents=function(){for(var e=this.getColumnMenuHandlers(),t=0;t<e.length;t++)sf.base.EventHandler.remove(e[t],"mousedown",this.columnMenuHandlerDown)},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.columnMenu.destroy(),this.removeEventListener(),this.unwireFilterEvents(),this.unwireEvents(),sf.base.remove(this.element))},e.prototype.columnMenuHandlerClick=function(e){e.target.classList.contains("e-columnmenu")&&(this.columnMenu.items=this.getItems(),this.columnMenu.dataBind(),this.isOpen&&this.headerCell!==this.getHeaderCell(e)||document.querySelector(".e-grid-menu .e-menu-parent.e-ul")?(this.columnMenu.close(),this.openColumnMenu(e)):this.isOpen?this.columnMenu.close():this.openColumnMenu(e))},e.prototype.openColumnMenuByField=function(e){this.openColumnMenu({target:this.parent.getColumnHeaderByField(e).querySelector(".e-columnmenu")})},e.prototype.openColumnMenu=function(e){var t={top:0,left:0};this.element.style.cssText="display:block;visibility:hidden";var r=this.element.getBoundingClientRect();this.element.style.cssText="display:none;visibility:visible",this.headerCell=this.getHeaderCell(e),sf.base.Browser.isDevice?(t.top=window.innerHeight/2-r.height/2,t.left=window.innerWidth/2-r.width/2):this.parent.enableRtl?t=sf.popups.calculatePosition(this.headerCell,"left","bottom"):(t=sf.popups.calculatePosition(this.headerCell,"right","bottom")).left-=r.width,this.columnMenu.open(t.top,t.left),e.preventDefault&&e.preventDefault(),kr(this.parent.element,this.columnMenu.element.parentElement)},e.prototype.columnMenuHandlerDown=function(e){this.isOpen=!("none"===this.element.style.display||""===this.element.style.display)},e.prototype.getColumnMenuHandlers=function(){return[].slice.call(this.parent.getHeaderTable().querySelectorAll("."+this.ROOT))},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(C,this.wireEvents,this),this.parent.on(m,this.enableAfterRenderMenu,this),this.parent.on(u,this.render,this),this.isFilterItemAdded()&&this.parent.on("filterDialogCreated",this.filterPosition,this),this.parent.on(S,this.columnMenuHandlerClick,this),this.parent.on(w,this.keyPressHandler,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(C,this.unwireEvents),this.parent.off(m,this.enableAfterRenderMenu),this.parent.off(u,this.render),this.isFilterItemAdded()&&this.parent.off("filterDialogCreated",this.filterPosition),this.parent.off(S,this.columnMenuHandlerClick),this.parent.off(w,this.keyPressHandler))},e.prototype.keyPressHandler=function(e){var t=this.parent;if("altDownArrow"===e.action){var r=t.focusModule.currentInfo.element;if(r&&r.classList.contains("e-headercell")){var i=t.getColumnByUid(r.firstElementChild.getAttribute("e-mappinguid"));this.openColumnMenuByField(i.field)}}},e.prototype.enableAfterRenderMenu=function(e){e.module===this.getModuleName()&&e.enable&&(this.columnMenu&&(this.columnMenu.destroy(),sf.base.remove(this.element)),this.render())},e.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.element=this.parent.createElement("ul",{id:this.gridID+"_columnmenu",className:"e-colmenu"}),this.element.setAttribute("aria-label",this.l10n.getConstant("ColumnMenuDialogARIA")),this.parent.element.appendChild(this.element),this.columnMenu=new sf.navigations.ContextMenu({cssClass:"e-grid-menu",enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,items:this.getItems(),select:this.columnMenuItemClick.bind(this),beforeOpen:this.columnMenuBeforeOpen.bind(this),onOpen:this.columnMenuOnOpen.bind(this),onClose:this.columnMenuOnClose.bind(this),beforeItemRender:this.beforeMenuItemRender.bind(this),beforeClose:this.columnMenuBeforeClose.bind(this)}),this.columnMenu.appendTo(this.element),this.wireFilterEvents()},e.prototype.wireFilterEvents=function(){!sf.base.Browser.isDevice&&this.isFilterItemAdded()&&sf.base.EventHandler.add(this.element,"mouseover",this.appendFilter,this)},e.prototype.unwireFilterEvents=function(){!sf.base.Browser.isDevice&&this.isFilterItemAdded()&&sf.base.EventHandler.remove(this.element,"mouseover",this.appendFilter)},e.prototype.beforeMenuItemRender=function(e){if(this.isChooserItem(e.item)){var t=this.getKeyFromId(e.item.id,this.CHOOSER),r=this.parent.columnModel.filter((function(e){return e.field===t})),i=sf.buttons.createCheckBox(this.parent.createElement,!1,{label:e.item.text,checked:r[0].visible});this.parent.enableRtl&&i.classList.add("e-rtl"),e.element.innerHTML="",e.element.appendChild(i)}else e.item.id&&"Filter"===this.getKeyFromId(e.item.id)&&(e.element.appendChild(this.parent.createElement("span",{className:"e-icons e-caret"})),e.element.className+="e-filter-item e-menu-caret-icon")},e.prototype.columnMenuBeforeClose=function(e){var t=e.event?sf.base.closest(e.event.target,".e-menu-item"):null;(!sf.base.isNullOrUndefined(e.parentItem)&&"ColumnChooser"===this.getKeyFromId(e.parentItem.id)&&t&&this.isChooserItem(t)||e.event&&(sf.base.closest(e.event.target,"."+this.POP)||e.event.currentTarget&&e.event.currentTarget.activeElement&&Ut(e.event.currentTarget.activeElement,"e-filter-popup")||Ut(e.event.target,"e-popup")||Ut(e.event.target,"e-popup-wrapper"))&&!sf.base.Browser.isDevice)&&(e.cancel=!0)},e.prototype.isChooserItem=function(e){return e.id&&e.id.indexOf("_colmenu_")>=0&&-1===this.getKeyFromId(e.id,this.CHOOSER).indexOf("_colmenu_")},e.prototype.columnMenuBeforeOpen=function(e){e.column=this.targetColumn=this.getColumn(),this.parent.trigger("columnMenuOpen",e);for(var t=0,r=e.items;t<r.length;t++){var i=r[t],n=this.getKeyFromId(i.id),s=this.defaultItems[n];-1!==this.getDefaultItems().indexOf(n)&&this.ensureDisabledStatus(n)&&!s.hide&&this.disableItems.push(i.text),i.hide&&this.hiddenItems.push(i.text)}this.columnMenu.enableItems(this.disableItems,!1),this.columnMenu.hideItems(this.hiddenItems)},e.prototype.columnMenuOnOpen=function(e){"e-menu-parent e-ul "===e.element.className&&(e.element.offsetHeight>window.innerHeight||this.parent.element.offsetHeight>window.innerHeight)&&(e.element.style.maxHeight=.8*window.innerHeight+"px",e.element.style.overflowY="auto")},e.prototype.ensureDisabledStatus=function(e){var t=!1;switch(e){case"Group":(!this.parent.allowGrouping||this.parent.ensureModuleInjected(yi)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)>=0||this.targetColumn&&!this.targetColumn.allowGrouping)&&(t=!0);break;case"AutoFitAll":case"AutoFit":t=!this.parent.ensureModuleInjected(fi);break;case"Ungroup":(!this.parent.ensureModuleInjected(yi)||this.parent.ensureModuleInjected(yi)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)<0)&&(t=!0);break;case"SortDescending":case"SortAscending":if(this.parent.allowSorting&&this.parent.ensureModuleInjected(_r)&&this.parent.sortSettings.columns.length>0&&this.targetColumn&&this.targetColumn.allowSorting)for(var r=this.parent.sortSettings.columns,i=0;i<r.length;i++)r[i].field===this.targetColumn.field&&r[i].direction.toLocaleLowerCase()===e.toLocaleLowerCase().replace("sort","")&&(t=!0);else(!this.parent.allowSorting||!this.parent.ensureModuleInjected(_r)||this.parent.allowSorting&&this.targetColumn&&!this.targetColumn.allowSorting)&&(t=!0);break;case"Filter":this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&this.parent.ensureModuleInjected(pi)&&this.targetColumn&&this.targetColumn.allowFiltering?t=!1:this.parent.ensureModuleInjected(pi)&&this.parent.allowFiltering&&this.targetColumn&&(!this.targetColumn.allowFiltering||"FilterBar"===this.parent.filterSettings.type)&&(t=!0)}return t},e.prototype.columnMenuItemClick=function(e){switch(this.isChooserItem(e.item)?"ColumnChooser":this.getKeyFromId(e.item.id)){case"AutoFit":this.parent.autoFitColumns(this.targetColumn.field);break;case"AutoFitAll":this.parent.autoFitColumns([]);break;case"Ungroup":this.parent.ungroupColumn(this.targetColumn.field);break;case"Group":this.parent.groupColumn(this.targetColumn.field);break;case"SortAscending":this.parent.sortColumn(this.targetColumn.field,"Ascending");break;case"SortDescending":this.parent.sortColumn(this.targetColumn.field,"Descending");break;case"ColumnChooser":var t=this.getKeyFromId(e.item.id,this.CHOOSER),r=e.element.querySelector(".e-checkbox-wrapper .e-frame");r&&r.classList.contains("e-check")?(r.classList.remove("e-check"),this.parent.hideColumns(t,"field")):r&&(this.parent.showColumns(t,"field"),r.classList.add("e-check"));break;case"Filter":this.getFilter(e.element,e.item.id)}e.column=this.targetColumn,this.parent.trigger("columnMenuClick",e)},e.prototype.columnMenuOnClose=function(e){e.items.length>0&&e.items[0].parentObj instanceof sf.navigations.ContextMenu&&(this.columnMenu.enableItems(this.disableItems,!1),this.disableItems=[],this.columnMenu.showItems(this.hiddenItems),this.hiddenItems=[],this.isFilterPopupOpen()&&this.getFilter(e.element,e.element.id,!0)),this.parent.getFrozenColumns()||this.parent.notify("restore-Focus",{})},e.prototype.getDefaultItems=function(){return["AutoFitAll","AutoFit","SortAscending","SortDescending","Group","Ungroup","ColumnChooser","Filter"]},e.prototype.getItems=function(){for(var e=[],t=0,r=this.parent.columnMenuItems?this.parent.columnMenuItems:this.getDefault();t<r.length;t++){var i=r[t];if("string"==typeof i)if("ColumnChooser"===i){var n=this.getDefaultItem(i);n.items=this.createChooserItems(),e.push(n)}else e.push(this.getDefaultItem(i));else e.push(i)}return e},e.prototype.getDefaultItem=function(e){var t={};switch(e){case"SortAscending":t={iconCss:this.ASCENDING};break;case"SortDescending":t={iconCss:this.DESCENDING};break;case"Group":t={iconCss:this.GROUP};break;case"Ungroup":t={iconCss:this.UNGROUP};break;case"Filter":t={iconCss:this.FILTER}}return this.defaultItems[e]={text:this.getLocaleText(e),id:this.generateID(e),iconCss:t.iconCss?"e-icons "+t.iconCss:null},this.defaultItems[e]},e.prototype.getLocaleText=function(e){return this.l10n.getConstant(this.localeText[e])},e.prototype.generateID=function(e,t){return this.gridID+"_colmenu_"+(t?t+e:e)},e.prototype.getKeyFromId=function(e,t){return e.indexOf("_colmenu_")>0&&e.replace(this.gridID+"_colmenu_"+(t||""),"")},e.prototype.getColumnMenu=function(){return this.element},e.prototype.getModuleName=function(){return"columnMenu"},e.prototype.setLocaleKey=function(){var e={AutoFitAll:"autoFitAll",AutoFit:"autoFit",Group:"Group",Ungroup:"Ungroup",SortAscending:"SortAscending",SortDescending:"SortDescending",ColumnChooser:"Columnchooser",Filter:"FilterMenu"};if(sf.base.isBlazor()){e.AutoFitAll="AutoFitAll";e.AutoFit="AutoFit"}return e},e.prototype.getHeaderCell=function(e){return sf.base.closest(e.target,"th.e-headercell")},e.prototype.getColumn=function(){if(this.headerCell){var e=this.headerCell.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");return this.parent.getColumnByUid(e)}return null},e.prototype.createChooserItems=function(){for(var e=[],t=0,r=this.parent.columnModel;t<r.length;t++){var i=r[t];i.showInColumnChooser&&i.field&&e.push({id:this.generateID(i.field,this.CHOOSER),text:i.headerText?i.headerText:i.field})}return e},e.prototype.appendFilter=function(e){if(this.defaultItems.Filter){var t=this.defaultItems.Filter.id;sf.base.closest(e.target,"#"+t)&&!this.isFilterPopupOpen()?this.getFilter(e.target,t):!sf.base.closest(e.target,"#"+t)&&this.isFilterPopupOpen()&&this.getFilter(e.target,t,!0)}},e.prototype.getFilter=function(e,t,r){var i=this.getFilterPop();i?i.style.display=!sf.base.Browser.isDevice&&r?"none":"block":this.parent.notify("filterOpen",{col:this.targetColumn,target:e,isClose:r,id:t})},e.prototype.setPosition=function(e,t){var r=this.parent.element.getBoundingClientRect(),i=e.getBoundingClientRect(),n=i.left-r.left,s=i.top-r.top;r.height<s?s=s-t.offsetHeight+i.height:r.height<s+t.offsetHeight&&(s=r.height-t.offsetHeight),window.innerHeight<t.offsetHeight+s+r.top&&(s=window.innerHeight-t.offsetHeight-r.top),n+=this.parent.enableRtl?-t.offsetWidth:i.width,r.width<=n+t.offsetWidth?n-=i.width+t.offsetWidth:n<0&&(n+=t.offsetWidth+i.width),t.style.top=s+"px",t.style.left=n+"px"},e.prototype.filterPosition=function(e){var t=this.getFilterPop();if(t.classList.add(this.WRAP),!sf.base.Browser.isDevice){var r=t.style.display;t.style.cssText+="display:block;visibility:hidden";var i=this.element.querySelector("."+this.FILTER);i&&(this.setPosition(i.parentElement,t),t.style.cssText+="display:"+r+";visibility:visible")}},e.prototype.getDefault=function(){var e=[];return this.parent.ensureModuleInjected(fi)&&(e.push("AutoFitAll"),e.push("AutoFit")),this.parent.allowGrouping&&this.parent.ensureModuleInjected(yi)&&(e.push("Group"),e.push("Ungroup")),this.parent.allowSorting&&this.parent.ensureModuleInjected(_r)&&(e.push("SortAscending"),e.push("SortDescending")),e.push("ColumnChooser"),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&this.parent.ensureModuleInjected(pi)&&e.push("Filter"),e},e.prototype.isFilterPopupOpen=function(){var e=this.getFilterPop();return e&&"none"!==e.style.display},e.prototype.getFilterPop=function(){return sf.base.Browser.isDevice&&null!==this.targetColumn?document.getElementById(this.targetColumn.uid+"-flmdlg"):this.parent.element.querySelector("."+this.POP)},e.prototype.isFilterItemAdded=function(){return this.parent.columnMenuItems&&this.parent.columnMenuItems.indexOf("Filter")>=0||!this.parent.columnMenuItems},e}(),Rn=(tn=function(e,t){return(tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}tn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),In=function(e){function t(t,r){var i=e.call(this,t,r)||this;return i.parent=t,i.serviceLocator=r,i.initEvent(),i}return Rn(t,e),t.prototype.initEvent=function(){this.parent.isDestroyed||(this.parent.on("initForeignKeyColumn",this.initForeignKeyColumns,this),this.parent.on("getForeignKeyData",this.getForeignKeyData,this),this.parent.on("generateQuery",this.generateQueryFormData,this))},t.prototype.initForeignKeyColumns=function(e){for(var t=0;t<e.length;t++)e[t].dataSource=e[t].dataSource instanceof sf.data.DataManager?e[t].dataSource:sf.base.isNullOrUndefined(e[t].dataSource)?new sf.data.DataManager:"result"in e[t].dataSource?e[t].dataSource:new sf.data.DataManager(e[t].dataSource)},t.prototype.eventfPromise=function(e,t,r,i){var n=this.getStateEventArgument(t),s=new sf.data.Deferred,o=new sf.data.Deferred;n.action=e.action;var a=this.parent.getDataModule();return!sf.base.isNullOrUndefined(e.action)&&e.action.requestType&&!1!==a.foreignKeyDataState.isDataChanged?(a.setForeignKeyDataState({isPending:!0,resolver:o.resolve}),o.promise.then((function(){s.resolve(i.dataSource)})),n.setColumnData=this.parent.setForeignKeyData.bind(this.parent),this.parent.trigger("columnDataStateChange",n)):(a.setForeignKeyDataState({}),s.resolve(r)),s},t.prototype.getForeignKeyData=function(e){for(var t=this,r=e.column?[e.column]:this.parent.getForeignKeyColumns(),i=[],n=function(t){var n=void 0,o=e.isComplex?s.genarateColumnQuery(r[t]):s.genarateQuery(r[t],e.result.result,!1,!0);o.params=s.parent.query.params;var a=r[t].dataSource;a&&"result"in a?n=s.eventfPromise(e,o,a,r[t]).promise:n=!a.ready||a.dataSource.offline?a.executeQuery(o):a.ready.then((function(){return a.executeQuery(o)}));i.push(n)},s=this,o=0;o<r.length;o++)n(o);Promise.all(i).then((function(t){for(var i=0;i<t.length;i++)r[i].columnData=t[i].result,"dropdownedit"===r[i].editType&&"result"in r[i].dataSource&&(r[i].edit.params=sf.base.extend(r[i].edit.params,{dataSource:t[i].result,query:new sf.data.Query,fields:{value:r[i].foreignKeyField||r[i].field,text:r[i].foreignKeyValue}}));e.promise.resolve(e.result)})).catch((function(r){return t.parent.log(["actionfailure","foreign_key_failure"]),e.promise&&e.promise.reject&&e.promise.reject(r),r}))},t.prototype.generateQueryFormData=function(e){e.predicate.predicate=this.genarateQuery(e.column,e.column.columnData,!0)},t.prototype.genarateQuery=function(e,t,r,i){var n=this.parent,s=[],o=new sf.data.Query,a=r?e.foreignKeyField:e.field;if(n.allowPaging||n.enableVirtualization||r){t=new sf.data.DataManager(n.allowGrouping&&n.groupSettings.columns.length&&!r?t.records:t).executeLocal((new sf.data.Query).select(a));var l=sf.data.DataUtil.distinct(t,a,!1);a=r?e.field:e.foreignKeyField;for(var d=0;d<l.length;d++)l[d]&&l[d].getDay?s.push(br({field:a,operator:"equal",value:l[d],matchCase:!1})):s.push(new sf.data.Predicate(a,"equal",l[d],!1))}return i?s.length?o.where(sf.data.Predicate.or(s)):o:s.length?sf.data.Predicate.or(s):{predicates:[]}},t.prototype.genarateColumnQuery=function(e){var t=this.parent,r=new sf.data.Query,i=this.isFiltered(e);if(i.isTrue&&(r=this.filterQuery(r,i.column,!0)),t.searchSettings.key.length){var n=t.searchSettings;r.search(n.key,e.foreignKeyValue,n.operator,n.ignoreCase)}return r},t.prototype.isFiltered=function(e){var t=this.parent.filterSettings.columns.filter((function(t){return t.field===e.foreignKeyValue&&t.uid===e.uid}));return{column:t,isTrue:!!t.length}},t.prototype.getModuleName=function(){return"foreignKey"},t.prototype.destroy=function(){this.destroyEvent()},t.prototype.destroyEvent=function(){this.parent.isDestroyed||(this.parent.off("initForeignKeyColumn",this.initForeignKeyColumns),this.parent.off("getForeignKeyData",this.getForeignKeyData),this.parent.off("generateQuery",this.generateQueryFormData))},t}(O),Tn="https://ej2.syncfusion.com/documentation/grid",En="https://ej2.syncfusion.com/documentation/",Dn="[EJ2Grid.Warning]",Fn="[EJ2Grid.Error]",On="[EJ2Grid.Info]",Mn=function(){function e(e){this.parent=e,this.parent.on("initial-end",this.patchadaptor,this)}return e.prototype.getModuleName=function(){return"logger"},e.prototype.log=function(e,t){e instanceof Array||(e=[e]);for(var r=e,i=0;i<r.length;i++){var n=kn[r[i]],s=n.check(t,this.parent);s.success&&console[n.logType](n.generateMessage(t,this.parent,s.options))}},e.prototype.patchadaptor=function(){var e=this.parent.getDataModule().dataManager.adaptor,t=e.beforeSend;t&&(e.beforeSend=function(r,i,n){t.call(e,r,i,n)})},e.prototype.destroy=function(){this.parent.isDestroyed||this.parent.off("initial-end",this.patchadaptor)},e}(),kn={module_missing:{type:"module_missing",logType:"warn",check:function(e,t){var r=t.getInjectedModules().map((function(e){return e.prototype.getModuleName()})),i=t.requiredModules().map((function(e){return e.member})).filter((function(e){return-1===r.indexOf(e)}));return{success:i.filter((function(e){return"resize"!==e})).length>0,options:i}},generateMessage:function(e,t,r){return r=r.filter((function(e){return"resize"!==e})).reduce((function(e,t){return e+"* "+t+"\n"}),""),Dn+": MODULES MISSING\nThe following modules are not injected:.\n"+r+"Refer to "+Tn+"/module.html for documentation on importing feature modules."}},promise_enabled:{type:"promise_enabled",logType:"error",check:function(e,t){return{success:"undefined"==typeof Promise}},generateMessage:function(e,t){return Fn+": PROMISE UNDEFINED\nPromise object is not present in the global environment,please use polyfil to support Promise object in your environment.\nRefer to "+En+"/base/browser.html?#required-polyfills for more information."}},primary_column_missing:{type:"primary_column_missing",logType:"warn",check:function(e,t){return{success:0===t.getColumns().filter((function(e){return e.isPrimaryKey})).length}},generateMessage:function(e,t){return Dn+": PRIMARY KEY MISSING\nEditing is enabled but primary key column is not specified.\nRefer to "+Tn+"/api-column.html?#isprimarykey for documentation on providing primary key columns."}},selection_key_missing:{type:"selection_key_missing",logType:"warn",check:function(e,t){return{success:t.selectionSettings.persistSelection&&0===t.getColumns().filter((function(e){return e.isPrimaryKey})).length}},generateMessage:function(e,t){return Dn+": PRIMARY KEY MISSING\nselectionSettings.persistSelection property is enabled. It requires one primary key column to persist selection.\nRefer to "+Tn+"/api-column.html?#isprimarykey for documentation on providing primary key columns."}},actionfailure:{type:"actionfailure",logType:"error",check:function(e,t){return{success:!0}},generateMessage:function(e,t){var r="",i=An(e,t),n=Bn(e,t);return r=""!==n?n:""!==i?i:e.error,Dn+": "+r}},locale_missing:{type:"locale_missing",logType:"warn",check:function(e,t){var r=sf.data.DataUtil.getObject("locale."+t.locale+".grid",sf.base.L10n);return{success:"en-US"!==t.locale&&sf.base.isNullOrUndefined(r)}},generateMessage:function(e,t){return Dn+": LOCALE CONFIG MISSING\nLocale configuration for '"+t.locale+"' is not provided.\nRefer to "+Tn+"/globalization-and-localization.html?#localization \n             for documentation on setting locale configuration."}},limitation:{type:"limitation",logType:"warn",check:function(e,t){var r;switch(e){case"freeze":r={success:t.allowGrouping||!sf.base.isUndefined(t.detailTemplate)||!sf.base.isUndefined(t.childGrid)||!sf.base.isUndefined(t.rowTemplate)||t.enableVirtualization,options:{name:"freeze"}};break;case"virtualization":r={success:!sf.base.isUndefined(t.detailTemplate)||!sf.base.isUndefined(t.childGrid)||0!==t.frozenRows||0!==t.frozenColumns,options:{name:"virtualization"}};break;default:r={success:!1}}return r},generateMessage:function(e,t,r){var i,n=r.name;switch(n){case"freeze":i="Frozen rows and columns do not support the following features:\n* Virtualization\n* Row Template\n* Details Template\n* Hierarchy Grid\n* Grouping";break;case"virtualization":i="Virtualization does not support the following features.\n* Freeze rows and columns.\n* Details Template.\n* Hierarchy Grid.\n";break;default:i=""}return Dn+": "+n.toUpperCase()+" LIMITATIONS\n"+i}},check_datasource_columns:{type:"check_datasource_columns",logType:"warn",check:function(e,t){return{success:!(t.columns.length||t.dataSource instanceof sf.data.DataManager||t.dataSource.length)}},generateMessage:function(e,t){return Dn+": GRID CONFIG MISSING\ndataSource and columns are not provided in the grid. At least one of either must be provided for grid configuration.\nRefer to "+Tn+"/columns.html for documentation on configuring the grid data and columns."}},virtual_height:{type:"virtual_height",logType:"error",check:function(e,t){return{success:sf.base.isNullOrUndefined(t.height)||"auto"===t.height}},generateMessage:function(e,t){return Fn+": GRID HEIGHT MISSING \nheight property is required to use virtualization.\nRefer to "+Tn+"/virtual.html for documentation on configuring the virtual grid."}},grid_remote_edit:{type:"grid_remote_edit",logType:"error",check:function(e,t){return{success:Array.isArray(e)||Array.isArray(e.result)}},generateMessage:function(e,t){return Fn+": RETRUN VALUE MISSING  \nRemote service returns invalid data. \nRefer to "+Tn+"/edit.html for documentation on configuring editing with remote data."}},grid_sort_comparer:{type:"grid_sort_comparer",logType:"warn",check:function(e,t){return{success:t.getDataModule().isRemote()}},generateMessage:function(e,t){return Dn+": SORT COMPARER NOT WORKING  \nSort comparer will not work with remote data.Refer to "+Tn+"/sorting/#custom-sort-comparer for documentation on using the sort comparer."}},resize_min_max:{type:"resize_min_max",logType:"info",check:function(e,t){return{success:e.column.minWidth&&e.column.minWidth>=e.width||e.column.maxWidth&&e.column.maxWidth<=e.width}},generateMessage:function(e,t){return On+": RESIZING COLUMN REACHED MIN OR MAX  \nThe column resizing width is at its min or max."}},action_disabled_column:{type:"action_disabled_column",logType:"info",check:function(e,t){var r;switch(e.moduleName){case"reorder":r=sf.base.isNullOrUndefined(e.destColumn)?"reordering action is disabled for the "+e.column.headerText+" column":"reordering action is disabled for the "+(e.column.allowReordering?e.destColumn.headerText:e.column.headerText)+" column";break;case"group":r="grouping action is disabled for the "+e.columnName+" column.";break;case"filter":r="filtering action is disabled for the "+e.columnName+" column.";break;case"sort":r="sorting action is disabled for the "+e.columnName+" column."}return{success:!0,options:{fn:r}}},generateMessage:function(e,t,r){return On+": ACTION DISABLED \n "+r.fn}},exporting_begin:{type:"exporting_begin",logType:"info",check:function(e,t){return{success:!0,options:{args:e}}},generateMessage:function(e,t,r){return On+": EXPORTNIG INPROGRESS \n Grid "+r.args+"ing is in progress"}},exporting_complete:{type:"exporting_complete",logType:"info",check:function(e,t){return{success:!0,options:{args:e}}},generateMessage:function(e,t,r){return On+": EXPORTNIG COMPLETED \n Grid "+r.args+"ing is complete"}},foreign_key_failure:{type:"foreign_key_failure",logType:"error",check:function(e,t){return{success:!0}},generateMessage:function(e,t){return Fn+": FOREIGNKEY CONFIG \n  Grid foreign key column needs a valid data source/service.Refer to "+Tn+"/columns/#foreign-key-column for documentation on configuring foreign key columns."}},initial_action:{type:"initial_action",logType:"error",check:function(e,t){var r;switch(e.moduleName){case"group":r="The "+e.columnName+" column is not available in the grid's column model.Please provide a valid field name to group the column";break;case"filter":r="The "+e.columnName+" column is not available in the grid's column model.Please provide a valid field name to filter the column.";break;case"sort":r="The "+e.columnName+" column is not available in the grid's column model.Please provide a valid field name to sort the column."}return{success:!0,options:{fn:r}}},generateMessage:function(e,t,r){return Fn+": INITIAL ACTION FAILURE \n "+r.fn}},frozen_rows_columns:{type:"frozen_rows_columns",logType:"error",check:function(e,t){return{success:t.getColumns().length<=t.frozenColumns||t.frozenRows>=t.currentViewData.length}},generateMessage:function(e,t,r){return Fn+": OUT OF RANGE ERROR-\n "+(t.getColumns().length<=t.frozenColumns?"FROZEN COLUMNS,":"")+(t.frozenRows>=t.currentViewData.length?"FROZEN ROWS":"")+" invalid"}},column_type_missing:{type:"column_type_missing",logType:"error",check:function(e,t){return{success:sf.base.isNullOrUndefined(e.column.type),options:e.column.headerText}},generateMessage:function(e,t,r){return Fn+": COLUMN TYPE MISSING-\n  "+r+" column type was invalid or not defined.Please go through below help link: "+En+"/grid/columns/#column-type"}},datasource_syntax_mismatch:{type:"datasource_syntax_mismatch",logType:"warn",check:function(e,t){return{success:(e.dataState.dataSource instanceof sf.data.DataManager||e.dataState.dataSource instanceof Array)&&!sf.base.isNullOrUndefined(e.dataState.dataStateChange)}},generateMessage:function(e,t,r){return Dn+": DATASOURCE SYNTAX WARNING\nDataSource should be in the form of {result: Object[], count: number}when dataStateChangeEvent used"}}},An=function(e,t){var r=e.error;return r.indexOf&&0!==r.indexOf("Format options")?"":"INVALID FORMAT\nFor more information, refer to the following documentation links:\nNumber format: "+En+"/base/intl.html?#supported-format-string.\nDate format: "+En+"/base/intl.html?#manipulating-datetime.\nMessage: "+r},Bn=function(e,t){var r=sf.data.DataUtil.getObject("error.error",e);if(sf.base.isNullOrUndefined(r))return"";var i="";try{i=JSON.parse(r.responseText)}catch(e){i=""}return"XMLHTTPREQUEST FAILED\nUrl: "+r.responseURL+"\nStatus: "+r.status+" - "+r.statusText+"\n"+(""!==i?"Message: "+i:"")},Pn=function(){function e(e){this.infiniteCache={},this.isDownScroll=!1,this.isUpScroll=!1,this.isScroll=!0,this.enableContinuousScroll=!1,this.initialRender=!0,this.isRemove=!1,this.isInitialCollapse=!1,this.prevScrollTop=0,this.actions=["filtering","searching","grouping","ungrouping","reorder","sorting"],this.keys=["downArrow","upArrow","PageUp","PageDown"],this.rowTop=0,this.parent=e,this.addEventListener()}return e.prototype.getModuleName=function(){return"infiniteScroll"},e.prototype.addEventListener=function(){this.parent.on(f,this.onDataReady,this),this.parent.on("datasource-modified",this.dataSourceModified,this),this.parent.on("infinite-page-query",this.infinitePageQuery,this),this.parent.on("infinite-scroll-handler",this.infiniteScrollHandler,this),this.parent.on("beforecellfocused",this.infiniteCellFocus,this),this.parent.on("append-infinite-content",this.appendInfiniteRows,this),this.parent.on("remove-infinite-rows",this.removeInfiniteCacheRows,this),this.parent.on("reset-infinite-blocks",this.resetInfiniteBlocks,this),this.parent.on("set-infinite-cache",this.setCache,this),this.parent.on("initial-collapse",this.ensureIntialCollapse,this),this.parent.on(w,this.infiniteCellFocus,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(f,this.onDataReady),this.parent.off("datasource-modified",this.dataSourceModified),this.parent.off("infinite-page-query",this.infinitePageQuery),this.parent.off("infinite-scroll-handler",this.infiniteScrollHandler),this.parent.off("beforecellfocused",this.infiniteCellFocus),this.parent.off("append-infinite-content",this.appendInfiniteRows),this.parent.off("remove-infinite-rows",this.removeInfiniteCacheRows),this.parent.off("reset-infinite-blocks",this.resetInfiniteBlocks),this.parent.off("set-infinite-cache",this.setCache),this.parent.off("initial-collapse",this.ensureIntialCollapse),this.parent.off(w,this.infiniteCellFocus))},e.prototype.dataSourceModified=function(){this.resetInfiniteBlocks({requestType:this.empty},!0)},e.prototype.onDataReady=function(e){sf.base.isNullOrUndefined(e.count)||(this.maxPage=Math.ceil(e.count/this.parent.pageSettings.pageSize))},e.prototype.ensureIntialCollapse=function(e){this.isInitialCollapse=!e},e.prototype.infiniteScrollHandler=function(e){var t=this;if(e.target.classList.contains("e-content")&&this.parent.enableInfiniteScrolling){var r=this.parent.getContent().firstElementChild;this.prevScrollTop=r.scrollTop;var i=this.parent.getRows(),n=parseInt(i[i.length-1].getAttribute("aria-rowindex"),10)+1,s=this.parent.pageSettings.currentPage,o=void 0,a=Math.floor(e.target.scrollHeight-e.target.scrollTop),l=Math.round(e.target.scrollHeight-e.target.scrollTop),d=a===e.target.clientHeight||l===e.target.clientHeight;if(this.isScroll&&d&&(this.parent.pageSettings.currentPage<=this.maxPage-1||this.enableContinuousScroll)){this.parent.infiniteScrollSettings.enableCache&&(this.isUpScroll=!1,this.isDownScroll=!0,setTimeout((function(){t.isScroll=!0}),600));var c=[].slice.call(this.parent.getContent().querySelectorAll(".e-row")),h=c[c.length-1],p=parseInt(h.getAttribute("aria-rowindex"),10);this.parent.pageSettings.currentPage=Math.ceil(p/this.parent.pageSettings.pageSize)+1,o={requestType:"infiniteScroll",currentPage:this.parent.pageSettings.currentPage,prevPage:s,startIndex:n,direction:"down"},this.makeRequest(o)}if(this.isScroll&&this.parent.infiniteScrollSettings.enableCache&&0===e.target.scrollTop&&1!==this.parent.pageSettings.currentPage){this.parent.infiniteScrollSettings.enableCache&&(this.isDownScroll=!1,this.isUpScroll=!0,setTimeout((function(){t.isScroll=!0}),600));h=[].slice.call(this.parent.getContent().querySelectorAll(".e-row"))[this.parent.pageSettings.pageSize-1],p=parseInt(h.getAttribute("aria-rowindex"),10);this.parent.pageSettings.currentPage=Math.ceil(p/this.parent.pageSettings.pageSize)-1,this.parent.pageSettings.currentPage&&(o={requestType:"infiniteScroll",currentPage:this.parent.pageSettings.currentPage,prevPage:s,direction:"up"},this.makeRequest(o))}this.parent.infiniteScrollSettings.enableCache&&!this.isScroll&&sf.base.isNullOrUndefined(o)&&(this.isDownScroll||this.isUpScroll)&&(this.parent.getContent().firstElementChild.scrollTop=this.top)}},e.prototype.makeRequest=function(e){var t=this;this.parent.pageSettings.currentPage!==e.prevPage&&(sf.base.isNullOrUndefined(this.infiniteCache[e.currentPage])&&"up"!==e.direction?setTimeout((function(){t.parent.notify("model-changed",e)}),100):setTimeout((function(){t.parent.notify("refresh-infinite-mode-blocks",e)}),100))},e.prototype.infinitePageQuery=function(e){this.initialRender?(this.initialRender=!1,this.intialPageQuery(e)):e.page(this.parent.pageSettings.currentPage,this.parent.pageSettings.pageSize)},e.prototype.intialPageQuery=function(e){this.parent.infiniteScrollSettings.enableCache&&this.parent.infiniteScrollSettings.initialBlocks>this.parent.infiniteScrollSettings.maxBlocks&&(this.parent.infiniteScrollSettings.initialBlocks=this.parent.infiniteScrollSettings.maxBlocks);var t=this.parent.pageSettings.pageSize*this.parent.infiniteScrollSettings.initialBlocks;e.page(1,t)},e.prototype.infiniteCellFocus=function(e){if(!e.byKey||"upArrow"!==e.keyArgs.action&&"downArrow"!==e.keyArgs.action)"PageDown"!==e.key&&"PageUp"!==e.key||(this.pressedKey=e.key);else{this.pressedKey=e.keyArgs.action;var t=document.activeElement,r=parseInt(t.parentElement.getAttribute("aria-rowindex"),10),i=this.parent.getContent().firstElementChild;this.rowIndex="downArrow"===e.keyArgs.action?r+1:r-1,this.cellIndex=parseInt(t.getAttribute("aria-colindex"),10);var n=this.parent.getRowByIndex(r),s=Math.floor(i.offsetHeight/this.parent.getRowHeight());if(!n||Br(n,this.parent)||Pr(n,this.rowTop)){var o=n?n.getBoundingClientRect().height:this.parent.getRowHeight();if(!this.parent.infiniteScrollSettings.enableCache){if("downArrow"===e.keyArgs.action&&(Br(n,this.parent)||!n)){var a=(this.rowIndex-s)*o,l=i.scrollTop+this.parent.getRowHeight();i.scrollTop=a<l?l:a}"upArrow"===e.keyArgs.action&&Pr(n,this.rowTop)&&(i.scrollTop=this.rowIndex*o)}}else this.pressedKey=this.empty}},e.prototype.appendInfiniteRows=function(e){document.activeElement;var t=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.args.requestType;if(t&&"up"===e.args.direction?e.tbody.insertBefore(e.frag,e.tbody.firstElementChild):e.tbody.appendChild(e.frag),this.parent.contentModule.getTable().appendChild(e.tbody),this.rowTop=this.rowTop?this.rowTop:this.parent.getRows()[0].getBoundingClientRect().top,t){if(this.parent.infiniteScrollSettings.enableCache&&this.isRemove){if("down"===e.args.direction){var r=(this.parent.pageSettings.currentPage-this.parent.infiniteScrollSettings.maxBlocks)*this.parent.pageSettings.pageSize;this.parent.contentModule.visibleRows=e.rows.slice(r,e.rows.length)}if("up"===e.args.direction){r=(this.parent.pageSettings.currentPage-1)*this.parent.pageSettings.pageSize;var i=(this.parent.pageSettings.currentPage+this.parent.infiniteScrollSettings.maxBlocks-1)*this.parent.pageSettings.pageSize;this.parent.contentModule.visibleRows=e.rows.slice(r,i)}this.parent.contentModule.rowElements=[].slice.call(this.parent.getContent().querySelectorAll(".e-row")),this.parent.getContent().firstElementChild.scrollTop=this.top}this.selectNewRow(e.tbody,e.args.startIndex),this.pressedKey=void 0}},e.prototype.selectNewRow=function(e,t){var r=this,i=this.parent.getRowByIndex(this.rowIndex);if(this.keys.some((function(e){return e===r.pressedKey}))){if(("downArrow"===this.pressedKey||this.parent.infiniteScrollSettings.enableCache&&"upArrow"===this.pressedKey)&&setTimeout((function(){i.cells[0].focus({preventScroll:!0}),r.parent.selectRow(r.rowIndex),r.parent.getContent().firstElementChild.scrollTop+=r.parent.getRowHeight()}),0),"PageDown"===this.pressedKey){var n=this.parent.getRowByIndex(t);n&&n.cells[0].focus()}"PageUp"===this.pressedKey&&e.querySelector(".e-row").cells[0].focus()}},e.prototype.removeInfiniteCacheRows=function(e){if(this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.args.requestType&&this.parent.infiniteScrollSettings.enableCache&&this.isRemove){var t=[].slice.call(this.parent.getContentTable().querySelectorAll(".e-row"));if("down"===e.args.direction){if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length){var r=[].slice.call(this.parent.getContentTable().querySelectorAll("tr"));this.removeCaptionRows(r,e.args)}this.removeTopRows(t,this.parent.pageSettings.pageSize-1)}if("up"===e.args.direction)if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length){r=[].slice.call(this.parent.getContentTable().querySelectorAll("tr"));this.removeCaptionRows(r,e.args)}else this.removeBottomRows(t,t.length-1,e.args);this.isScroll=!1,this.top=this.calculateScrollTop(e.args)}},e.prototype.calculateScrollTop=function(e){var t=0,r=this.parent.getContent().firstElementChild;if("down"===e.direction){this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&!this.isInitialCollapse&&(t=this.captionRowHeight());var i=[].slice.call(this.parent.getContent().firstElementChild.querySelectorAll("tr:not(.e-row)")),n=0;this.isInitialCollapse&&!sf.base.isNullOrUndefined(i)&&(n=Math.round((i.length-1)/this.parent.groupSettings.columns.length));for(var s=n||this.parent.pageSettings.pageSize*(this.parent.infiniteScrollSettings.maxBlocks-1),o=0,a=0;o<r.clientHeight;)o=++a*this.parent.getRowHeight();t+=(s-(a-=1))*this.parent.getRowHeight()}if("up"===e.direction)if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&!this.isInitialCollapse)t=this.infiniteCache[this.parent.pageSettings.currentPage].length*this.parent.getRowHeight();else if(this.isInitialCollapse){var l=this.infiniteCache[this.parent.pageSettings.currentPage],d=0;for(a=0;a<l.length;a++)l[a].isCaptionRow&&d++;t+=Math.round(d/this.parent.groupSettings.columns.length)*this.parent.getRowHeight()}else t+=this.parent.pageSettings.pageSize*this.parent.getRowHeight()+er();return t},e.prototype.captionRowHeight=function(){return[].slice.call(this.parent.getContent().querySelectorAll("tr:not(.e-row)")).length*this.parent.getRowHeight()},e.prototype.removeTopRows=function(e,t){for(var r=0;r<=t;r++)sf.base.remove(e[r])},e.prototype.removeBottomRows=function(e,t,r){var i=0;this.infiniteCache[r.prevPage].length<this.parent.pageSettings.pageSize&&(i=this.parent.pageSettings.pageSize-this.infiniteCache[r.prevPage].length);for(var n=t;i<this.parent.pageSettings.pageSize;n--)i++,sf.base.remove(e[n])},e.prototype.removeCaptionRows=function(e,t){if("down"===t.direction)for(var r=this.parent.getRows()[this.parent.pageSettings.pageSize],i=parseInt(r.getAttribute("aria-rowindex"),10)-1,n=0,s=0;n<i;s++)e[s].classList.contains("e-row")?n=parseInt(e[s].getAttribute("aria-rowindex"),10):sf.base.remove(e[s]);if("up"===t.direction){var o=[].slice.call(this.parent.getContent().querySelectorAll(".e-row")),a=parseInt(o[o.length-1].getAttribute("aria-rowindex"),10),l=Math.ceil(a/this.parent.pageSettings.pageSize),d=0;for(s=this.parent.pageSettings.currentPage+1;s<l;s++)d+=this.infiniteCache[s].length;for(s=d;s<e.length;s++)sf.base.remove(e[s])}},e.prototype.resetInfiniteBlocks=function(e,t){var r=this.parent.enableInfiniteScrolling&&"infiniteScroll"!==e.requestType;this.initialRender||sf.base.isNullOrUndefined(this.parent.infiniteScrollModule)||!r||(this.actions.some((function(t){return t===e.requestType}))||t)&&(this.initialRender=!0,this.parent.getContent().firstElementChild.scrollTop=0,this.parent.pageSettings.currentPage=1,this.infiniteCache={},this.resetContentModuleCache({}),this.isRemove=!1,this.top=0,this.isInitialCollapse=!1,this.parent.contentModule.isRemove=this.isRemove)},e.prototype.setCache=function(e){this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(Object.keys(this.infiniteCache).length||this.setInitialCache(e.modelData),sf.base.isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage])&&(this.infiniteCache[this.parent.pageSettings.currentPage]=e.modelData,this.resetContentModuleCache(this.infiniteCache)),e.isInfiniteScroll&&!this.isRemove&&(this.isRemove=(this.parent.pageSettings.currentPage-1)%this.parent.infiniteScrollSettings.maxBlocks==0,this.parent.contentModule.isRemove=this.isRemove))},e.prototype.setInitialCache=function(e){for(var t=1;t<=this.parent.infiniteScrollSettings.initialBlocks;t++){var r=(t-1)*this.parent.pageSettings.pageSize,i=t*this.parent.pageSettings.pageSize;this.parent.allowGrouping&&this.parent.groupSettings.columns.length?this.setInitialGroupCache(e,t,r,i):(this.infiniteCache[t]=e.slice(r,i),this.resetContentModuleCache(this.infiniteCache))}},e.prototype.setInitialGroupCache=function(e,t,r,i){for(var n=[],s=0,o=1;o<=Object.keys(this.infiniteCache).length;o++)s+=this.infiniteCache[o].length;var a=r;for(o=s;o<e.length&&a<i&&((e[o].index<i||e[o].isCaptionRow)&&(a=e[o].isCaptionRow?a:e[o].index,n.push(e[o])),!(e[o].index>=i||e[o].index===i-1));o++);this.infiniteCache[t]=n,this.resetContentModuleCache(this.infiniteCache)},e.prototype.resetContentModuleCache=function(e){this.parent.contentModule.infiniteCache=e},e.prototype.destroy=function(){this.removeEventListener()},e}(),zn=function(){function e(e){this.parentObj=e}return e.prototype.create=function(e){var t=ir(e.column.field);return this.parentObj.createElement("input",{className:"e-field",attrs:{id:this.parentObj.element.id+t,name:t,type:"text","e-mappinguid":e.column.uid}})},e.prototype.write=function(e){this.column=e.column;var t="Dialog"!==this.parentObj.editSettings.mode;this.object=new sf.dropdowns.AutoComplete(sf.base.extend({dataSource:this.parentObj.dataSource instanceof sf.data.DataManager?this.parentObj.dataSource:new sf.data.DataManager(this.parentObj.dataSource),query:(new sf.data.Query).select(e.column.field),enabled:sr(e.column,e.requestType,e.element),fields:{value:e.column.field},value:Sr(e.column.field,e.rowData),actionComplete:this.selectedValues.bind(this),placeholder:t?"":e.column.headerText,floatLabelType:t?"Never":"Always"},e.column.edit.params)),sf.base.isBlazor()&&(this.object.locale=this.parentObj.locale),this.object.appendTo(e.element),e.element.setAttribute("name",ir(e.column.field))},e.prototype.read=function(e){return e.ej2_instances[0].value},e.prototype.selectedValues=function(e){e.result=sf.data.DataUtil.distinct(e.result,this.object.fields.value,!0),this.column.dataSource&&(this.column.dataSource.dataSource.json=e.result)},e.prototype.destroy=function(){this.object&&this.object.destroy()},e}(),Nn=function(){function e(e){this.parent=e}return e.prototype.create=function(e){var t=ir(e.column.field);return this.parent.createElement("input",{className:"e-field",attrs:{id:this.parent.element.id+t,name:t,type:"text","e-mappinguid":e.column.uid}})},e.prototype.write=function(e){this.column=e.column;var t="Dialog"!==this.parent.editSettings.mode;this.obj=new sf.dropdowns.ComboBox(sf.base.extend({dataSource:this.parent.dataSource instanceof sf.data.DataManager?this.parent.dataSource:new sf.data.DataManager(this.parent.dataSource),query:(new sf.data.Query).select(e.column.field),fields:{value:e.column.field},value:Sr(e.column.field,e.rowData),enableRtl:this.parent.enableRtl,actionComplete:this.finalValue.bind(this),placeholder:t?"":e.column.headerText,floatLabelType:t?"Never":"Always",enabled:sr(e.column,e.requestType,e.element)},e.column.edit.params)),this.obj.appendTo(e.element)},e.prototype.read=function(e){return e.ej2_instances[0].value},e.prototype.finalValue=function(e){e.result=sf.data.DataUtil.distinct(e.result,this.obj.fields.value,!0),this.column.dataSource&&(this.column.dataSource.dataSource.json=e.result)},e.prototype.destroy=function(){this.obj&&this.obj.destroy()},e}(),Ln=function(){function e(e){this.parent=e}return e.prototype.create=function(e){var t=ir(e.column.field);return this.parent.createElement("input",{className:"e-field",attrs:{id:this.parent.element.id+t,name:t,type:"text","e-mappinguid":e.column.uid}})},e.prototype.read=function(e){return e.ej2_instances[0].value},e.prototype.write=function(e){this.column=e.column;var t="Dialog"!==this.parent.editSettings.mode;this.obj=new sf.dropdowns.MultiSelect(sf.base.extend({fields:{text:e.column.field,value:e.column.field},value:sf.base.getValue(e.column.field,e.rowData),enableRtl:this.parent.enableRtl,placeholder:t?"":e.column.headerText,popupHeight:"200px",floatLabelType:t?"Never":"Always"},e.column.edit.params)),this.obj.appendTo(e.element),e.element.setAttribute("name",ir(e.column.field))},e.prototype.destroy=function(){this.obj&&this.obj.destroy()},e}(),qn=function(){function e(e){this.parent=e}return e.prototype.create=function(e){var t=ir(e.column.field);return this.parent.createElement("input",{className:"e-field",attrs:{id:this.parent.element.id+t,name:t,type:"text","e-mappinguid":e.column.uid}})},e.prototype.read=function(e){return e.ej2_instances[0].value},e.prototype.write=function(e){var t="Dialog"!==this.parent.editSettings.mode,r=Sr(e.column.field,e.rowData);r=r?new Date(r):null,this.obj=new sf.calendars.TimePicker(sf.base.extend({floatLabelType:t?"Never":"Always",value:r,placeholder:t?"":e.column.headerText,enableRtl:this.parent.enableRtl,enabled:sr(e.column,e.requestType,e.element)},e.column.edit.params)),this.obj.appendTo(e.element)},e.prototype.destroy=function(){this.obj&&this.obj.destroy()},e}(),Hn=function(){function e(e){this.activeClasses=["e-selectionbackground","e-active"],this.parent=e}return e.prototype.create=function(e){var t=e.column,r="e-field e-boolcell";"checkbox"===t.type&&(r="e-field e-boolcell e-edit-checkselect");var i=ir(e.column.field);return this.parent.createElement("input",{className:r,attrs:{type:"checkbox",value:e.value,"e-mappinguid":t.uid,id:this.parent.element.id+i,name:i}})},e.prototype.read=function(e){return e.checked},e.prototype.write=function(e){var t,r;if(sf.base.isNullOrUndefined(e.row)||(t=e.row.querySelector(".e-edit-checkselect")),Sr(e.column.field,e.rowData)&&(r=JSON.parse(Sr(e.column.field,e.rowData).toString().toLowerCase())),!sf.base.isNullOrUndefined(t)){if(this.editType=this.parent.editSettings.mode,this.editRow=e.row,"add"!==e.requestType){var i=this.parent.getRowObjectFromUID(e.row.getAttribute("data-uid"));r=!!i&&i.isSelected}dr.apply(void 0,[[].slice.call(e.row.querySelectorAll(".e-rowcell")),r].concat(this.activeClasses))}this.obj=new sf.buttons.Switch(sf.base.extend({label:"Dialog"!==this.parent.editSettings.mode?" ":e.column.headerText,checked:r,disabled:!sr(e.column,e.requestType,e.element),enableRtl:this.parent.enableRtl,change:this.switchModeChange.bind(this)},e.column.edit.params)),this.obj.appendTo(e.element)},e.prototype.switchModeChange=function(e){if(this.editRow&&"Dialog"!==this.editType){var t=!1;e.checked?(t=!0,this.editRow.setAttribute("aria-selected",t.toString())):this.editRow.removeAttribute("aria-selected"),dr.apply(void 0,[[].slice.call(this.editRow.querySelectorAll(".e-rowcell")),t].concat(this.activeClasses))}},e.prototype.destroy=function(){this.obj&&this.obj.destroy()},e}(),Un=function(){function e(e){this.parent=e}return e.prototype.create=function(e){var t=ir(e.column.field);return this.parent.createElement("input",{className:"e-field",attrs:{id:this.parent.element.id+t,name:t,type:"text","e-mappinguid":e.column.uid}})},e.prototype.write=function(e){this.column=e.column;var t="Dialog"!==this.parent.editSettings.mode;this.obj=new sf.inputs.MaskedTextBox(sf.base.extend({fields:{value:e.column.field},value:Sr(e.column.field,e.rowData),floatLabelType:t?"Never":"Always",mask:"000-000-0000",enabled:sr(e.column,e.requestType,e.element)},e.column.edit.params)),this.obj.appendTo(e.element)},e.prototype.read=function(e){return e.ej2_instances[0].value},e.prototype.destroy=function(){this.obj&&this.obj.destroy()},e}();return Ct.Inject(pi,Zr,Xe,_r,yi,gi,mi,vi,bi,Ri,Ye,Pi,nn,fi,ln,dn,pn,fn,Sn,xn,sn,In,ot,Pn),e.CheckBoxFilterBase=jr,e.ExcelFilterBase=Gr,e.SortDescriptor=dt,e.SortSettings=ct,e.Predicate=ht,e.InfiniteScrollSettings=pt,e.FilterSettings=ut,e.SelectionSettings=ft,e.SearchSettings=gt,e.RowDropSettings=mt,e.TextWrapSettings=yt,e.GroupSettings=vt,e.EditSettings=bt,e.Grid=Ct,e.doesImplementInterface=xt,e.valueAccessor=Rt,e.headerValueAccessor=function(e,t){return sf.base.isNullOrUndefined(e)||""===e?"":sf.data.DataUtil.getObject(e,t)},e.getUpdateUsingRaf=It,e.isExportColumns=Tt,e.updateColumnTypeForExportColumns=Et,e.updatecloneRow=Dt,e.getCollapsedRowsCount=Ot,e.recursive=Mt,e.iterateArrayOrObject=kt,e.iterateExtend=At,e.templateCompiler=Bt,e.setStyleAndAttributes=Pt,e.extend=zt,e.setColumnIndex=Nt,e.prepareColumns=Lt,e.setCssInGridPopUp=qt,e.getActualProperties=Ht,e.parentsUntil=Ut,e.getElementIndex=jt,e.inArray=Vt,e.getActualPropFromColl=Gt,e.removeElement=_t,e.getPosition=Kt,e.getUid=Qt,e.appendChildren=Jt,e.parents=Xt,e.calculateAggregate=Yt,e.getScrollBarWidth=er,e.getRowHeight=tr,e.isComplexField=rr,e.getComplexFieldID=ir,e.setComplexFieldID=nr,e.isEditable=sr,e.isActionPrevent=or,e.wrap=ar,e.setFormatter=lr,e.addRemoveActiveClasses=dr,e.distinctStringValues=cr,e.getFilterMenuPostion=hr,e.getZIndexCalcualtion=pr,e.toogleCheckbox=ur,e.createCboxWithWrap=fr,e.removeAddCboxClasses=gr,e.refreshForeignData=mr,e.getForeignData=yr,e.getColumnByForeignKeyValue=vr,e.getDatePredicate=br,e.renderMovable=Cr,e.isGroupAdaptive=wr,e.getObject=Sr,e.getCustomDateFormat=xr,e.getExpandedState=Rr,e.getPrintGridModel=Ir,e.extendObjWithFn=Tr,e.measureColumnDepth=Dr,e.checkDepth=Fr,e.refreshFilteredColsUid=Or,e.getTransformValues=Mr,e.applyBiggerTheme=kr,e.alignFrozenEditForm=Ar,e.ensureLastRow=Br,e.ensureFirstRow=Pr,e.created="create",e.destroyed="destroy",e.load="load",e.rowDataBound="rowDataBound",e.queryCellInfo="queryCellInfo",e.headerCellInfo="headerCellInfo",e.actionBegin=d,e.actionComplete=c,e.actionFailure="actionFailure",e.dataBound=h,e.rowSelecting="rowSelecting",e.rowSelected="rowSelected",e.rowDeselecting="rowDeselecting",e.rowDeselected="rowDeselected",e.cellSelecting="cellSelecting",e.cellSelected="cellSelected",e.cellDeselecting="cellDeselecting",e.cellDeselected="cellDeselected",e.columnDragStart="columnDragStart",e.columnDrag="columnDrag",e.columnDrop="columnDrop",e.rowDragStartHelper="rowDragStartHelper",e.rowDragStart="rowDragStart",e.rowDrag="rowDrag",e.rowDrop="rowDrop",e.beforePrint="beforePrint",e.printComplete="printComplete",e.detailDataBound="detailDataBound",e.toolbarClick="toolbarClick",e.batchAdd="batchAdd",e.batchCancel="batchCancel",e.batchDelete="batchDelete",e.beforeBatchAdd="beforeBatchAdd",e.beforeBatchDelete="beforeBatchDelete",e.beforeBatchSave="beforeBatchSave",e.beginEdit="beginEdit",e.cellEdit="cellEdit",e.cellSave="cellSave",e.cellSaved="cellSaved",e.endAdd="endAdd",e.endDelete="endDelete",e.endEdit="endEdit",e.recordDoubleClick="recordDoubleClick",e.recordClick="recordClick",e.beforeDataBound="beforeDataBound",e.beforeOpenColumnChooser="beforeOpenColumnChooser",e.resizeStart="resizeStart",e.onResize="resizing",e.resizeStop="resizeStop",e.checkBoxChange="checkBoxChange",e.beforeCopy="beforeCopy",e.beforePaste="beforePaste",e.beforeAutoFill="beforeAutoFill",e.filterChoiceRequest="filterchoicerequest",e.filterAfterOpen="filterafteropen",e.filterBeforeOpen="filterbeforeopen",e.filterSearchBegin="filtersearchbegin",e.commandClick="commandClick",e.exportGroupCaption="exportGroupCaption",e.initialLoad=p,e.initialEnd=u,e.dataReady=f,e.contentReady=g,e.uiUpdate=m,e.onEmpty=y,e.inBoundModelChanged=v,e.modelChanged=b,e.colGroupRefresh="colgroup-refresh",e.headerRefreshed=C,e.pageBegin="paging-begin",e.pageComplete="paging-complete",e.sortBegin="sorting-begin",e.sortComplete="sorting-complete",e.filterBegin="filtering-begin",e.filterComplete="filtering-complete",e.searchBegin="searching-begin",e.searchComplete="searching-complete",e.reorderBegin="reorder-begin",e.reorderComplete="reorder-complete",e.rowDragAndDropBegin="rowdraganddrop-begin",e.rowDragAndDropComplete="rowdraganddrop-complete",e.groupBegin="grouping-begin",e.groupComplete="grouping-complete",e.ungroupBegin="ungrouping-begin",e.ungroupComplete="ungrouping-complete",e.groupAggregates="group-aggregates",e.refreshFooterRenderer="refresh-footer-rendered",e.refreshAggregateCell="refresh-aggregate-cell",e.refreshAggregates="refresh-aggregates",e.rowSelectionBegin="rowselecting",e.rowSelectionComplete="rowselected",e.columnSelectionBegin="columnselecting",e.columnSelectionComplete="columnselected",e.cellSelectionBegin="cellselecting",e.cellSelectionComplete="cellselected",e.beforeCellFocused="beforecellfocused",e.cellFocused="cellfocused",e.keyPressed=w,e.click=S,e.destroy=x,e.columnVisibilityChanged="column-visible-changed",e.scroll="scroll",e.columnWidthChanged="column-width-changed",e.columnPositionChanged="column-position-changed",e.rowDragAndDrop="row-drag-and-drop",e.rowsAdded="rows-added",e.rowsRemoved="rows-removed",e.columnDragStop="column-drag-stop",e.headerDrop="header-drop",e.dataSourceModified="datasource-modified",e.refreshComplete="refresh-complete",e.refreshVirtualBlock="refresh-virtual-block",e.dblclick="dblclick",e.toolbarRefresh=R,e.bulkSave="bulk-save",e.autoCol=I,e.tooltipDestroy="tooltip-destroy",e.updateData="update-data",e.editBegin="edit-begin",e.editComplete="edit-complete",e.addBegin="add-begin",e.addComplete="add-complete",e.saveComplete="save-complete",e.deleteBegin="delete-begin",e.deleteComplete="delete-complete",e.preventBatch=T,e.dialogDestroy="dialog-destroy",e.crudAction="crud-Action",e.addDeleteAction="add-delete-Action",e.destroyForm="destroy-form",e.doubleTap="double-tap",e.beforeExcelExport="beforeExcelExport",e.excelExportComplete="excelExportComplete",e.excelQueryCellInfo="excelQueryCellInfo",e.excelHeaderQueryCellInfo="excelHeaderQueryCellInfo",e.exportDetailDataBound="exportdetaildatabound",e.beforePdfExport="beforePdfExport",e.pdfExportComplete="pdfExportComplete",e.pdfQueryCellInfo="pdfQueryCellInfo",e.pdfHeaderQueryCellInfo="pdfHeaderQueryCellInfo",e.accessPredicate="access-predicate",e.contextMenuClick="contextMenuClick",e.freezeRender="freezerender",e.freezeRefresh="freezerefresh",e.contextMenuOpen="contextMenuOpen",e.columnMenuClick="columnMenuClick",e.columnMenuOpen="columnMenuOpen",e.filterOpen="filterOpen",e.filterDialogCreated="filterDialogCreated",e.filterMenuClose="filter-menu-close",e.initForeignKeyColumn="initForeignKeyColumn",e.getForeignKeyData="getForeignKeyData",e.generateQuery="generateQuery",e.showEmptyGrid="showEmptyGrid",e.foreignKeyData="foreignKeyData",e.columnDataStateChange="columnDataStateChange",e.dataStateChange="dataStateChange",e.dataSourceChanged="dataSourceChanged",e.rtlUpdated="rtl-updated",e.beforeFragAppend="beforeFragAppend",e.frozenHeight="frozenHeight",e.textWrapRefresh="textWrapRefresh",e.recordAdded="recordAdded",e.cancelBegin="cancel-Begin",e.editNextValCell="editNextValCell",e.hierarchyPrint="hierarchyprint",e.expandChildGrid="expandchildgrid",e.printGridInit="printGrid-Init",e.exportRowDataBound="export-RowDataBound",e.rowPositionChanged="row-position-changed",e.columnChooserOpened="columnChooserOpened",e.batchForm="batchedit-form",e.beforeStartEdit="edit-form",e.beforeBatchCancel="before-batch-cancel",e.batchEditFormRendered="batcheditform-rendered",e.partialRefresh="partial-refresh",e.beforeCustomFilterOpen="beforeCustomFilterOpen",e.selectVirtualRow="select-virtual-Row",e.columnsPrepared="columns-prepared",e.cBoxFltrBegin="cbox-filter-begin",e.cBoxFltrComplete="cbox-filter-complete",e.fltrPrevent=E,e.beforeFltrcMenuOpen="before-filter-cmenu-open",e.valCustomPlacement="validation-custom-placement",e.filterCboxValue="filter-cbox-value",e.componentRendered="component-rendered",e.restoreFocus="restore-Focus",e.detailStateChange="detail-state-change",e.detailIndentCellInfo="detail-indentcell-info",e.virtaulKeyHandler="virtaul-key-handler",e.virtaulCellFocus="virtaul-cell-focus",e.virtualScrollEditActionBegin="virtual-scroll-edit-action-begin",e.virtualScrollEditSuccess="virtual-scroll-edit-success",e.virtualScrollEditCancel="virtual-scroll-edit-cancel",e.virtualScrollEdit="virtual-scroll-edit",e.refreshVirtualCache="refresh-virtual-cache",e.editReset="edit-reset",e.virtualScrollAddActionBegin="virtual-scroll-add-action-begin",e.getVirtualData="get-virtual-data",e.refreshInfiniteModeBlocks="refresh-infinite-mode-blocks",e.resetInfiniteBlocks="reset-infinite-blocks",e.infiniteScrollHandler="infinite-scroll-handler",e.infinitePageQuery="infinite-page-query",e.appendInfiniteContent="append-infinite-content",e.removeInfiniteRows="remove-infinite-rows",e.setInfiniteCache="set-infinite-cache",e.initialCollapse="initial-collapse",e.getAggregateQuery="get-aggregate-query",e.closeFilterDialog="close-filter-dialog",e.columnChooserCancelBtnClick="columnChooserCancelBtnClick",e.Data=O,e.Sort=_r,e.Page=Zr,e.Selection=Xe,e.Filter=pi,e.Search=Ye,e.Scroll=Ze,e.resizeClassList=ui,e.Resize=fi,e.Reorder=gi,e.RowDD=mi,e.Group=yi,e.getCloneProperties=wt,e.Print=St,e.DetailRow=vi,e.Toolbar=bi,e.Aggregate=Ri,e.summaryIterator=Ii,e.VirtualScroll=Pi,e.Edit=nn,e.BatchEdit=Wi,e.InlineEdit=Ki,e.NormalEdit=Gi,e.DialogEdit=Ji,e.ColumnChooser=sn,e.ExcelExport=ln,e.PdfExport=dn,e.ExportHelper=on,e.ExportValueFormatter=an,e.Clipboard=nt,e.CommandColumn=pn,e.CheckBoxFilter=di,e.menuClass=un,e.ContextMenu=fn,e.Freeze=Sn,e.ColumnMenu=xn,e.ExcelFilter=hi,e.ForeignKey=In,e.Logger=Mn,e.detailLists=kn,e.gridObserver=st,e.BlazorAction=ot,e.InfiniteScroll=Pn,e.Column=a,e.CommandColumnModel=l,e.Row=M,e.Cell=k,e.HeaderRender=V,e.ContentRender=j,e.RowRenderer=B,e.CellRenderer=G,e.HeaderCellRenderer=ce,e.FilterCellRenderer=ri,e.StackedHeaderCellRenderer=pe,e.Render=Oe,e.IndentCellRenderer=fe,e.GroupCaptionCellRenderer=me,e.GroupCaptionEmptyCellRenderer=ye,e.BatchEditRender=Ni,e.DialogEditRender=Li,e.InlineEditRender=zi,e.EditRender=qi,e.BooleanEditCell=Hi,e.DefaultEditCell=Vi,e.DropDownEditCell=Ui,e.NumericEditCell=ji,e.DatePickerEditCell=Xi,e.CommandColumnRenderer=hn,e.FreezeContentRender=yn,e.FreezeRender=vn,e.StringFilterUI=ni,e.NumberFilterUI=si,e.DateFilterUI=ai,e.BooleanFilterUI=oi,e.FlMenuOptrUI=ii,e.AutoCompleteEditCell=zn,e.ComboboxEditCell=Nn,e.MultiSelectEditCell=Ln,e.TimePickerEditCell=qn,e.ToggleEditCell=Hn,e.MaskedTextBoxCellEdit=Un,e.VirtualContentRenderer=ki,e.VirtualHeaderRenderer=Ai,e.VirtualElementHandler=Bi,e.CellRendererFactory=Me,e.ServiceLocator=ke,e.RowModelGenerator=P,e.GroupModelGenerator=U,e.FreezeRowModelGenerator=gn,e.ValueFormatter=s,e.VirtualRowModelGenerator=Oi,e.InterSectionObserver=Fi,e.Pager=Xr,e.ExternalMessage=$r,e.NumericContainer=Kr,e.PagerMessage=Wr,e.PagerDropDown=Yr,e},sfBlazor.loadDependencies(sfBlazor.dependencyJson.grids,(function(){sf.grids=sf.grids({})}))}}]);