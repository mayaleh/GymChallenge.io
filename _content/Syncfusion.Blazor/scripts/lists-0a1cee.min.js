(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"./bundles/lists.js":function(e,t,i){"use strict";i.r(t);var s=i("../node_modules/@babel/runtime/helpers/typeof.js"),n=i.n(s);window.sf=window.sf||{},window.sf.lists=function(e){function t(e,t){var i={};if(sf.base.isNullOrUndefined(e)||"string"==typeof e||"number"==typeof e||!sf.base.isNullOrUndefined(e.isHeader))return e;for(var s=0,n=Object.keys(t);s<n.length;s++){var a=t[n[s]],l=sf.base.isNullOrUndefined(a)||"string"!=typeof a?void 0:sf.base.getValue(a,e);sf.base.isNullOrUndefined(l)||(i[a]=l)}return i}e.cssClass={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"},function(i){i.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null};var s={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},a={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:i.defaultMappedFields,ariaAttributes:s,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function l(e,t,i,s){return w(e,r(e,t,i,s),null,s)}function r(t,i,s,n){var l=[],r=sf.base.extend({},a,n);e.cssClass=g(r.moduleName);for(var o=b(),c=0;c<i.length;c++)if(!sf.base.isNullOrUndefined(i[c])){var h=void 0;if(r.itemCreating&&"function"==typeof r.itemCreating){var d={dataSource:i,curData:i[c],text:i[c],options:r};r.itemCreating(d)}if(h=s?I(t,i[c],void 0,null,null,[],null,o,c,n):x(t,i[c],void 0,null,null,n),r.itemCreated&&"function"==typeof r.itemCreated){d={dataSource:i,curData:i[c],text:i[c],item:h,options:r};r.itemCreated(d)}l.push(h)}return l}function o(n,l,r,o,c){var h=sf.base.extend({},a,r);e.cssClass=g(h.moduleName);var d,u=sf.base.extend({},i.defaultMappedFields,h.fields),f=sf.base.extend({},s,h.ariaAttributes),y=[];o&&(f.level=o);var w,S,L=[];l&&l.length&&!sf.base.isNullOrUndefined(p(l).item)&&!p(l).item.hasOwnProperty(u.id)&&(d=b());for(var C=0;C<l.length;C++){var E=t(l[C],u);if(!sf.base.isNullOrUndefined(l[C])){if(h.itemCreating&&"function"==typeof h.itemCreating){var V={dataSource:l,curData:l[C],text:E[u.text],options:h,fields:u};h.itemCreating(V)}var O=l[C];h.itemCreating&&"function"==typeof h.itemCreating&&(E=t(l[C],u)),E.hasOwnProperty(u.id)&&!sf.base.isNullOrUndefined(E[u.id])&&(d=E[u.id]);var k=[];if(h.showCheckBox&&(h.itemNavigable&&(E[u.url]||E[u.urlAttributes])?y.push(n("input",{className:e.cssClass.check,attrs:{type:"checkbox"}})):k.push(n("input",{className:e.cssClass.check,attrs:{type:"checkbox"}}))),!0===c)h.showIcon&&E.hasOwnProperty(u.iconCss)&&!sf.base.isNullOrUndefined(E[u.iconCss])&&k.push(n("span",{className:e.cssClass.icon+" "+E[u.iconCss]})),S=(w=I(n,O,E,u,h.itemClass,k,!(!O.hasOwnProperty("isHeader")||!O.isHeader),d,C,r)).querySelector("."+e.cssClass.anchorWrap),h.itemNavigable&&y.length&&sf.base.prepend(y,w.firstElementChild);else{if((w=x(n,O,E,u,h.itemClass,r)).classList.add(e.cssClass.level+"-"+f.level),w.setAttribute("aria-level",f.level.toString()),S=w.querySelector("."+e.cssClass.anchorWrap),E.hasOwnProperty(u.tooltip)&&w.setAttribute("title",E[u.tooltip]),E.hasOwnProperty(u.htmlAttributes)&&E[u.htmlAttributes]&&m(w,E[u.htmlAttributes]),E.hasOwnProperty(u.enabled)&&!1===E[u.enabled]&&w.classList.add(e.cssClass.disabled),E.hasOwnProperty(u.isVisible)&&!1===E[u.isVisible]&&(w.style.display="none"),E.hasOwnProperty(u.imageUrl)&&!sf.base.isNullOrUndefined(E[u.imageUrl])&&!h.template){var D={src:E[u.imageUrl]};sf.base.merge(D,E[u.imageAttributes]);var B=n("img",{className:e.cssClass.image,attrs:D});S?S.insertAdjacentElement("afterbegin",B):sf.base.prepend([B],w.firstElementChild)}if(h.showIcon&&E.hasOwnProperty(u.iconCss)&&!sf.base.isNullOrUndefined(E[u.iconCss])&&!h.template){var T;T=n("div",{className:e.cssClass.icon+" "+E[u.iconCss]}),S?S.insertAdjacentElement("afterbegin",T):sf.base.prepend([T],w.firstElementChild)}k.length&&sf.base.prepend(k,w.firstElementChild),h.itemNavigable&&y.length&&sf.base.prepend(y,w.firstElementChild),v(n,E,u,l,h,w,f.level)}if(S&&sf.base.addClass([w],[e.cssClass.navigable]),h.itemCreated&&"function"==typeof h.itemCreated){V={dataSource:l,curData:l[C],text:E[u.text],item:w,options:h,fields:u};h.itemCreated(V)}y=[],L.push(w)}}return L}function c(e,t,i,s,n){var l=sf.base.extend({},a,i);return w(e,o(e,t,i,s,n),l.listClass,i)}function h(e,t){if(t&&e){return Array.prototype.slice.call(t).indexOf(e)}}function d(e,t,i){if(void 0===i&&(i=new sf.data.Query),"Ascending"===e)i.sortBy(t,"ascending",!0);else if("Descending"===e)i.sortBy(t,"descending",!0);else for(var s=0;s<i.queries.length;s++)"onSortBy"===i.queries[s].fn&&i.queries.splice(s,1);return i}function u(e,t){return new sf.data.DataManager(e).executeLocal(t)}function p(e){for(var t={typeof:null,item:null},i=0;i<e.length;i++)if(!sf.base.isNullOrUndefined(e[i]))return{typeof:n()(e[i]),item:e[i]};return t}function m(e,t){var i={};sf.base.merge(i,t),i.class&&(sf.base.addClass([e],i.class.split(" ")),delete i.class),sf.base.attributes(e,i)}function f(e){for(var t={},i=e.attributes,s=0;s<i.length;s++)t[i[s].nodeName]=i[s].nodeValue;return t}function b(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function v(t,i,s,n,a,l,r){var o=i[s.child]||[],h=i[s.hasChildren];if(o.length&&(h=!0,l.classList.add(e.cssClass.hasChild),a.processSubChild)){var d=c(t,o,a,++r);l.appendChild(d)}a.expandCollapse&&h&&!a.template&&(l.firstElementChild.classList.add(e.cssClass.iconWrapper),("Left"===a.expandIconPosition?sf.base.prepend:sf.base.append)([t("div",{className:"e-icons "+a.expandIconClass})],l.querySelector("."+e.cssClass.textContent)))}function I(t,i,n,l,r,o,c,h,d,u){var p,f,b=sf.base.extend({},a,u),v=sf.base.extend({},s,b.ariaAttributes),I=i,g=i;"string"!=typeof i&&"number"!=typeof i&&"boolean"!=typeof i&&(p=i,I="boolean"==typeof n[l.text]||"number"==typeof n[l.text]?n[l.text]:n[l.text]||"",g=n[l.value]),f=sf.base.isNullOrUndefined(p)||sf.base.isNullOrUndefined(n[l.id])||""===n[l.id]?h+"-"+d:h;var x=t("li",{className:(!0===c?e.cssClass.group:e.cssClass.li)+" "+(sf.base.isNullOrUndefined(r)?"":r),id:f,attrs:""!==v.groupItemRole&&""!==v.itemRole?{role:!0===c?v.groupItemRole:v.itemRole}:{}});return p&&n.hasOwnProperty(l.enabled)&&"false"===n[l.enabled].toString()&&x.classList.add(e.cssClass.disabled),c?x.innerText=I:(x.setAttribute("data-value",sf.base.isNullOrUndefined(g)?"null":g),x.setAttribute("role","option"),p&&n.hasOwnProperty(l.htmlAttributes)&&n[l.htmlAttributes]&&m(x,n[l.htmlAttributes]),o.length&&!b.itemNavigable&&sf.base.append(o,x),p&&(n[l.url]||n[l.urlAttributes]&&n[l.urlAttributes].href)?x.appendChild(y(t,p,l,I,o,b.itemNavigable)):(o.length&&b.itemNavigable&&sf.base.append(o,x),x.appendChild(document.createTextNode(I)))),x}function g(e){return{li:"e-"+e+"-item",ul:"e-"+e+"-parent e-ul",group:"e-"+e+"-group-item",icon:"e-"+e+"-icon",text:"e-"+e+"-text",check:"e-"+e+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+e+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+e+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function y(i,s,n,a,l,r){var o,c=t(s,n),h={href:c[n.url]};if(c.hasOwnProperty(n.urlAttributes)&&c[n.urlAttributes]&&(sf.base.merge(h,c[n.urlAttributes]),h.href=c[n.url]?c[n.url]:c[n.urlAttributes].href),r){o=i("a",{className:e.cssClass.text+" "+e.cssClass.url});var d=i("div",{className:e.cssClass.anchorWrap});l&&l.length&&sf.base.append(l,d),d.appendChild(document.createTextNode(a)),sf.base.append([d],o)}else o=i("a",{className:e.cssClass.text+" "+e.cssClass.url,innerHTML:a});return m(o,h),o}function x(t,i,l,r,o,c){var h,d,u,p=sf.base.extend({},a,c),m=sf.base.extend({},s,p.ariaAttributes),f=i;"string"!=typeof i&&"number"!=typeof i&&(u=i,f=l[r.text]||"",h=l[r.id],d=!(!i.hasOwnProperty("isHeader")||!i.isHeader)),c&&c.enableHtmlSanitizer&&(f=sf.base.SanitizeHtmlHelper.sanitize(f));var v=t("li",{className:(!0===d?e.cssClass.group:e.cssClass.li)+" "+(sf.base.isNullOrUndefined(o)?"":o),attrs:""!==m.groupItemRole&&""!==m.itemRole?{role:!0===d?m.groupItemRole:m.itemRole}:{}});sf.base.isNullOrUndefined(h)?v.setAttribute("data-uid",b()):v.setAttribute("data-uid",h);if(c&&c.removeBlazorID&&"object"===n()(i)&&i.hasOwnProperty("BlazId")&&delete i.BlazId,d&&c&&c.groupTemplate){var I=sf.base.compile(c.groupTemplate);sf.base.append(I(i,null,null,p.groupTemplateID,!!p.isStringTemplate),v)}else if(!d&&c&&c.template){I=sf.base.compile(c.template);sf.base.append(I(i,null,null,p.templateID,!!p.isStringTemplate),v)}else{var g=t("div",{className:e.cssClass.textContent,attrs:""!==m.wrapperRole?{role:m.wrapperRole}:{}});if(u&&(l[r.url]||l[r.urlAttributes]&&l[r.urlAttributes].href))g.appendChild(y(t,u,r,f,null,p.itemNavigable));else if(g.appendChild(t("span",{className:e.cssClass.text,innerHTML:f,attrs:""!==m.itemText?{role:m.itemText}:{}})),c&&c.enableHtmlSanitizer)g.querySelector("."+e.cssClass.text).innerText=sf.base.SanitizeHtmlHelper.sanitize(f);v.appendChild(g)}return v}function w(t,i,n,l){var r=sf.base.extend({},a,l),o=sf.base.extend({},s,r.ariaAttributes);e.cssClass=g(r.moduleName);var c=t("ul",{className:e.cssClass.ul+" "+(sf.base.isNullOrUndefined(n)?"":n),attrs:""!==o.listRole?{role:o.listRole}:{}});return sf.base.append(i,c),c}i.createList=function(e,t,i,n){var r=sf.base.extend({},a,i),o=sf.base.extend({},s,r.ariaAttributes),h=p(t).typeof;return"string"===h||"number"===h?l(e,t,n,i):c(e,t,i,o.level,n)},i.createListFromArray=l,i.createListItemFromArray=r,i.createListItemFromJson=o,i.createListFromJson=c,i.getSiblingLI=function(t,i,s){if(e.cssClass=g(a.moduleName),t&&t.length){var n,l,r=Array.prototype.slice.call(t);for(n=r[(l=i?h(i,r):!0===s?r.length:-1)+(!0===s?-1:1)];n&&(!sf.base.isVisible(n)||n.classList.contains(e.cssClass.disabled));)n=r[l+=!0===s?-1:1];return n}},i.indexOf=h,i.groupDataSource=function(e,t,s){void 0===s&&(s="None");var n=sf.base.extend({},i.defaultMappedFields,t),a=(new sf.data.Query).group(n.groupBy),l=u(e,a=d(s,"key",a));e=[];for(var r=0;r<l.length;r++){var o=l[r].items,c={};c[n.text]=l[r].key,c.isHeader=!0,c.id="group-list-item-"+(l[r].key?l[r].key.toString().trim():"undefined"),c.items=o,e.push(c);for(var h=0;h<o.length;h++)e.push(o[h])}return e},i.addSorting=d,i.getDataSource=u,i.createJsonFromElement=function e(t,s){var n=sf.base.extend({},a,s),l=sf.base.extend({},i.defaultMappedFields,n.fields),r=t.cloneNode(!0),o=[];r.classList.add("json-parent");var c=r.querySelectorAll(".json-parent>li");r.classList.remove("json-parent");for(var h=0;h<c.length;h++){for(var d=c[h],u=d.querySelector("a"),p=d.querySelector("ul"),m={},v=u?u.childNodes:d.childNodes,I=Object.keys(v),g=0;g<v.length;g++)v[Number(I[g])].hasChildNodes()||(m[l.text]=v[Number(I[g])].textContent);var y=f(d);y.id?(m[l.id]=y.id,delete y.id):m[l.id]=b(),Object.keys(y).length&&(m[l.htmlAttributes]=y),u&&(y=f(u),Object.keys(y).length&&(m[l.urlAttributes]=y)),p&&(m[l.child]=e(p,s)),o.push(m)}return o},i.renderContentTemplate=function(s,n,l,r,o){e.cssClass=g(a.moduleName);for(var c=s("ul",{className:e.cssClass.ul,attrs:{role:"presentation"}}),h=sf.base.extend({},a,o),d=sf.base.extend({},i.defaultMappedFields,r),u=sf.base.compile(n),p=[],m=b(),f=0;f<l.length;f++){var v=t(l[f],d),I=l[f],y=I.isHeader,x=v[d.value];if(h.itemCreating&&"function"==typeof h.itemCreating){var w={dataSource:l,curData:I,text:x,options:h,fields:d};h.itemCreating(w)}h.itemCreating&&"function"==typeof h.itemCreating&&(x=(v=t(l[f],d))[d.value]);var S=s("li",{id:m+"-"+f,className:y?e.cssClass.group:e.cssClass.li,attrs:{role:"presentation"}});if(y)S.innerText=v[d.text];else{var L=y?h.groupTemplateID:h.templateID;sf.base.append(u(I,null,null,L,!!h.isStringTemplate),S),S.setAttribute("data-value",sf.base.isNullOrUndefined(x)?"null":x),S.setAttribute("role","option")}if(h.itemCreated&&"function"==typeof h.itemCreated){w={dataSource:l,curData:I,text:x,item:S,options:h,fields:d};h.itemCreated(w)}p.push(S)}return sf.base.append(p,c),c},i.renderGroupTemplate=function(e,t,s,n,l){for(var r=sf.base.compile(e),o=sf.base.extend({},i.defaultMappedFields,s),c=sf.base.extend({},a,l),h=o.groupBy,d=0,u=n;d<u.length;d++){var p=u[d],m={};m[h]=p.textContent,p.innerHTML="",sf.base.append(r(m,null,null,c.groupTemplateID,!!c.isStringTemplate),p)}return n},i.generateId=b,i.generateUL=w,i.generateIcon=function(t,i,s,n){var l=sf.base.extend({},a,n);return e.cssClass=g(l.moduleName),("Left"===l.expandIconPosition?sf.base.prepend:sf.base.append)([t("div",{className:"e-icons "+l.expandIconClass+" "+(sf.base.isNullOrUndefined(s)?"":s)})],i.querySelector("."+e.cssClass.textContent)),i}}(e.ListBase||(e.ListBase={}));var i,s,a=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function s(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}),l=function(e,t,i,s){var a,l=arguments.length,r=l<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(r=(l<3?a(r):l>3?a(t,i,r):a(t,i))||r);return l>3&&r&&Object.defineProperty(t,i,r),r},r={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},o={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},c={root:"e-listview",hover:"e-hover",selected:"e-active",focused:"e-focused",parentItem:"e-list-parent",listItem:"e-list-item",listIcon:"e-list-icon",textContent:"e-text-content",listItemText:"e-list-text",groupListItem:"e-list-group-item",hasChild:"e-has-child",view:"e-view",header:"e-list-header",headerText:"e-headertext",headerTemplateText:"e-headertemplate-text",text:"e-text",disable:"e-disabled",content:"e-content",icon:"e-icons",backIcon:"e-icon-back",checkboxWrapper:"e-checkbox-wrapper",checkbox:"e-checkbox",checked:"e-check",checklist:"e-checklist",checkboxIcon:"e-frame",checkboxRight:"e-checkbox-right",checkboxLeft:"e-checkbox-left",listviewCheckbox:"e-listview-checkbox",itemCheckList:"e-checklist"},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),l([sf.base.Property("id")],t.prototype,"id",void 0),l([sf.base.Property("text")],t.prototype,"text",void 0),l([sf.base.Property("isChecked")],t.prototype,"isChecked",void 0),l([sf.base.Property("isVisible")],t.prototype,"isVisible",void 0),l([sf.base.Property("enabled")],t.prototype,"enabled",void 0),l([sf.base.Property("iconCss")],t.prototype,"iconCss",void 0),l([sf.base.Property("child")],t.prototype,"child",void 0),l([sf.base.Property("tooltip")],t.prototype,"tooltip",void 0),l([sf.base.Property("groupBy")],t.prototype,"groupBy",void 0),l([sf.base.Property("text")],t.prototype,"sortBy",void 0),l([sf.base.Property("htmlAttributes")],t.prototype,"htmlAttributes",void 0),l([sf.base.Property("tableName")],t.prototype,"tableName",void 0),t}(sf.base.ChildProperty),d=function(i){function s(e,t){var s=i.call(this,e,t)||this;return s.itemReRender=!1,s}return a(s,i),s.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"htmlAttributes":this.setHTMLAttribute();break;case"cssClass":this.setCSSClass(t.cssClass);break;case"enable":this.setEnable();break;case"width":case"height":this.setSize();break;case"enableRtl":this.setEnableRTL();break;case"fields":this.listBaseOption.fields=this.fields.properties,this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():(sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization&&(this.itemReRender=!0),this.reRender());break;case"headerTitle":this.curDSLevel.length||this.header(this.headerTitle,!1);break;case"showHeader":this.header(this.headerTitle,!1);break;case"enableVirtualization":sf.base.isNullOrUndefined(this.contentContainer)||sf.base.detach(this.contentContainer),this.refresh();break;case"showCheckBox":case"checkBoxPosition":sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization||(this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.setCheckbox());break;case"dataSource":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():(sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization&&(this.itemReRender=!0),this.reRender());break;case"sortOrder":case"showIcon":sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization?this.interopAdaptor.invokeMethodAsync("ItemSorting"):this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():(this.listBaseOption.showIcon=this.showIcon,this.curViewDS=this.getSubDS(),this.resetCurrentList())}}},s.prototype.setHTMLAttribute=function(){Object.keys(this.htmlAttributes).length&&sf.base.attributes(this.element,this.htmlAttributes)},s.prototype.setCSSClass=function(e){this.cssClass&&sf.base.addClass([this.element],this.cssClass.split(" ").filter((function(e){return e}))),e&&sf.base.removeClass([this.element],e.split(" ").filter((function(e){return e})))},s.prototype.setSize=function(){this.element.style.height=sf.base.formatUnit(this.height),this.element.style.width=sf.base.formatUnit(this.width),this.isWindow=!this.element.clientHeight},s.prototype.setEnable=function(){this.enableElement(this.element,this.enable)},s.prototype.setEnableRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},s.prototype.enableElement=function(e,t){t?e.classList.remove(c.disable):e.classList.add(c.disable)},s.prototype.header=function(e,t){if(sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization){var i={HeaderText:e,BackButton:t};this.interopAdaptor.invokeMethodAsync("HeaderTitle",i)}else if(void 0===this.headerEle&&this.showHeader){this.enableHtmlSanitizer&&this.setProperties({headerTitle:sf.base.SanitizeHtmlHelper.sanitize(this.headerTitle)},!0),this.headerEle=this.createElement("div",{className:c.header});var s=this.createElement("span",{className:c.headerText,innerHTML:this.headerTitle}),n=this.createElement("div",{className:c.text,innerHTML:s.outerHTML}),a=this.createElement("div",{className:c.icon+" "+c.backIcon+" e-but-back",attrs:{style:"display:none;"}});if(this.headerEle.appendChild(a),this.headerEle.appendChild(n),this.headerTemplate){var l=sf.base.compile(this.headerTemplate),r=this.createElement("div",{className:c.headerTemplateText});sf.base.append(l({},null,null,this.LISTVIEW_HEADERTEMPLATE_ID),r),sf.base.append([r],this.headerEle),this.updateBlazorTemplates(!1,!0,!0)}this.headerTemplate&&this.headerTitle&&n.classList.add("header"),this.element.classList.add("e-has-header"),sf.base.prepend([this.headerEle],this.element)}else if(this.headerEle)if(this.showHeader){this.headerEle.style.display="";n=this.headerEle.querySelector("."+c.headerText),a=this.headerEle.querySelector("."+c.backIcon);this.enableHtmlSanitizer&&(e=sf.base.SanitizeHtmlHelper.sanitize(e)),n.innerHTML=e,this.headerTemplate&&t&&(n.parentElement.classList.remove("header"),this.headerEle.querySelector("."+c.headerTemplateText).classList.add("nested-header")),this.headerTemplate&&!t&&(n.parentElement.classList.add("header"),this.headerEle.querySelector("."+c.headerTemplateText).classList.remove("nested-header"),this.headerEle.querySelector("."+c.headerTemplateText).classList.add("header")),a.style.display=!0===t?"":"none"}else this.headerEle.style.display="none"},s.prototype.switchView=function(e,t,i){var s=this;if(e&&t){var n=e.style.position,a="hidden"!==this.element.style.overflow?this.element.style.overflow:"";e.style.position="absolute",e.classList.add("e-view");var l=void 0,c=this.animation.duration;if(this.animation.effect)l=this.enableRtl?o[this.animation.effect]:r[this.animation.effect];else{l=r.SlideLeft,i=this.enableRtl,c=0}this.element.style.overflow="hidden",this.aniObj.animate(e,{name:!0===i?l[0]:l[1],duration:c,timingFunction:this.animation.easing,end:function(t){e.style.display="none",s.element.style.overflow=a,e.style.position=n,e.classList.remove("e-view")}}),t.style.display="",this.aniObj.animate(t,{name:!0===i?l[2]:l[3],duration:c,timingFunction:this.animation.easing,end:function(){s.trigger("actionComplete")}}),this.curUL=t}},s.prototype.preRender=function(){this.listBaseOption={template:this.template,headerTemplate:this.headerTemplate,groupTemplate:this.groupTemplate,expandCollapse:!0,listClass:"",ariaAttributes:{itemRole:"option",listRole:"presentation",itemText:"",groupItemRole:"group",wrapperRole:"presentation"},fields:this.fields.properties,sortOrder:this.sortOrder,showIcon:this.showIcon,itemCreated:this.renderCheckbox.bind(this),templateID:this.element.id+"Template",groupTemplateID:this.element.id+"GroupTemplate",enableHtmlSanitizer:this.enableHtmlSanitizer,removeBlazorID:!0},this.initialization()},s.prototype.initialization=function(){this.curDSLevel=[],this.animateOptions={},this.curViewDS=[],this.currentLiElements=[],this.isNestedList=!1,this.selectedData=[],this.selectedId=[],this.LISTVIEW_TEMPLATE_ID=this.element.id+"Template",this.LISTVIEW_GROUPTEMPLATE_ID=this.element.id+"GroupTemplate",this.LISTVIEW_HEADERTEMPLATE_ID=this.element.id+"HeaderTemplate",this.aniObj=new sf.base.Animation(this.animateOptions),this.removeElement(this.curUL),this.removeElement(this.ulElement),this.removeElement(this.headerEle),this.removeElement(this.contentContainer),this.curUL=this.ulElement=this.liCollection=this.headerEle=this.contentContainer=void 0},s.prototype.renderCheckbox=function(e){if(e.item.classList.contains(c.hasChild)&&(this.isNestedList=!0),this.showCheckBox&&this.isValidLI(e.item)){var i=void 0;(i=sf.buttons.createCheckBox(this.createElement,!1,{checked:!1,enableRtl:this.enableRtl,cssClass:c.listviewCheckbox})).setAttribute("role","checkbox");var s=i.querySelector("."+c.checkboxIcon);e.item.classList.add(c.itemCheckList),e.item.firstElementChild.classList.add(c.checkbox),"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?t(e.curData,this.listBaseOption.fields)[this.listBaseOption.fields.isChecked]&&this.checkInternally(e,i):"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]||-1===this.selectedData.indexOf(e.text)||this.checkInternally(e,i),i.setAttribute("aria-checked",s.classList.contains(c.checked)?"true":"false"),"Left"===this.checkBoxPosition?(i.classList.add(c.checkboxLeft),e.item.firstElementChild.classList.add(c.checkboxLeft),e.item.firstElementChild.insertBefore(i,e.item.firstElementChild.childNodes[0])):(i.classList.add(c.checkboxRight),e.item.firstElementChild.classList.add(c.checkboxRight),e.item.firstElementChild.appendChild(i)),this.currentLiElements.push(e.item),"Left"==this.checkBoxPosition?this.virtualCheckBox=e.item.firstElementChild.children[0]:this.virtualCheckBox=e.item.firstElementChild.lastElementChild}},s.prototype.checkInternally=function(e,t){e.item.classList.add(c.selected),e.item.setAttribute("aria-selected","true"),t.querySelector("."+c.checkboxIcon).classList.add(c.checked),t.setAttribute("aria-checked","true")},s.prototype.checkItem=function(e){this.toggleCheckBase(e,!0)},s.prototype.toggleCheckBase=function(e,t){if(this.showCheckBox){var i=e;if(e instanceof Object&&e.constructor!==HTMLLIElement&&(i=this.getLiFromObjOrElement(e)),!sf.base.isNullOrUndefined(i)){var s=i.querySelector("."+c.checkboxIcon);t?i.classList.add(c.selected):i.classList.remove(c.selected),i.setAttribute("aria-selected",t?"true":"false"),t?s.classList.add(c.checked):s.classList.remove(c.checked),s.parentElement.setAttribute("aria-checked",t?"true":"false")}this.setSelectedItemData(i)}},s.prototype.uncheckItem=function(e){this.toggleCheckBase(e,!1)},s.prototype.checkAllItems=function(){this.toggleAllCheckBase(!0)},s.prototype.uncheckAllItems=function(){this.toggleAllCheckBase(!1)},s.prototype.toggleAllCheckBase=function(e){if(this.showCheckBox){for(var t=0;t<this.liCollection.length;t++){var i=this.liCollection[t].querySelector("."+c.checkboxIcon);i&&(e?i.classList.contains(c.checked)||this.checkItem(this.liCollection[t]):i.classList.contains(c.checked)&&this.uncheckItem(this.liCollection[t]))}this.enableVirtualization&&this.virtualizationModule.checkedItem(e)}},s.prototype.setCheckbox=function(){if(this.showCheckBox)for(var e=Array.prototype.slice.call(this.element.querySelectorAll("."+c.listItem)),t={item:void 0,curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:""},i=0;i<e.length;i++){var s=e[i];t.item=s,t.curData=this.getItemData(s),s.querySelector("."+c.checkboxWrapper)&&this.removeElement(s.querySelector("."+c.checkboxWrapper)),this.renderCheckbox(t),t.item.classList.contains(c.selected)&&this.checkInternally(t,t.item.querySelector("."+c.checkboxWrapper))}else{for(e=Array.prototype.slice.call(this.element.querySelectorAll("."+c.itemCheckList)),i=0;i<e.length;i++){(s=e[i]).classList.remove(c.selected),s.firstElementChild.classList.remove(c.checkbox),this.removeElement(s.querySelector("."+c.checkboxWrapper))}this.selectedItems&&this.selectedItems.item.classList.add(c.selected)}},s.prototype.refreshItemHeight=function(){this.virtualizationModule.refreshItemHeight()},s.prototype.clickHandler=function(e){var t=e.target,i=t.classList;if(i.contains(c.backIcon)||i.contains(c.headerText))this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();else{var s=sf.base.closest(t.parentNode,"."+c.listItem);if(null===s&&(s=t),this.removeFocus(),this.enable&&this.showCheckBox&&this.isValidLI(s))if(e.target.classList.contains(c.checkboxIcon)){if(s.classList.add(c.focused),sf.base.isNullOrUndefined(s.querySelector("."+c.checked))){var n={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:s};this.checkInternally(n,n.item.querySelector("."+c.checkboxWrapper))}else this.uncheckItem(s),s.classList.add(c.focused);if(this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(s,e),e){var a=this.selectEventData(s,e),l=s.querySelector("."+c.checkboxIcon);sf.base.merge(a,{isChecked:l.classList.contains(c.checked)}),this.trigger("select",a)}}else s.classList.contains(c.hasChild)?(this.removeHover(),this.removeSelect(),this.removeSelect(s),this.setSelectLI(s,e),s.classList.remove(c.selected)):this.setCheckboxLI(s,e);else this.setSelectLI(s,e);e.target.closest("li")&&e.target.closest("li").classList.contains("e-has-child")&&!e.target.parentElement.classList.contains("e-listview-checkbox")&&e.target.closest("li").classList.add(c.disable)}},s.prototype.removeElement=function(e){return e&&e.parentNode&&e.parentNode.removeChild(e)},s.prototype.hoverHandler=function(e){var t=sf.base.closest(e.target.parentNode,"."+c.listItem);this.setHoverLI(t)},s.prototype.leaveHandler=function(e){this.removeHover()},s.prototype.homeKeyHandler=function(e,t){if(Object.keys(this.dataSource).length&&this.curUL){this.selectedItems&&this.selectedItems.item.setAttribute("aria-selected","false");var i=this.curUL.querySelectorAll("."+c.listItem),s=this.curUL.querySelector("."+c.focused)||this.curUL.querySelector("."+c.selected);s&&(s.classList.remove(c.focused),this.showCheckBox||s.classList.remove(c.selected));var n=t?i.length-1:0;i[n].classList.contains(c.hasChild)||this.showCheckBox?i[n].classList.add(c.focused):this.setSelectLI(i[n],e),i[n]?this.element.setAttribute("aria-activedescendant",i[n].id.toString()):this.element.removeAttribute("aria-activedescendant")}},s.prototype.onArrowKeyDown=function(t,i){var s,n;return!sf.base.isNullOrUndefined(this.curUL.querySelector("."+c.hasChild))||this.showCheckBox?(n=this.curUL.querySelector("."+c.focused)||this.curUL.querySelector("."+c.selected),s=e.ListBase.getSiblingLI(this.curUL.querySelectorAll("."+c.listItem),n,i),sf.base.isNullOrUndefined(s)||(n&&(n.classList.remove(c.focused),this.showCheckBox||n.classList.remove(c.selected)),s.classList.contains(c.hasChild)||this.showCheckBox?s.classList.add(c.focused):this.setSelectLI(s,t))):(n=this.curUL.querySelector("."+c.selected),s=e.ListBase.getSiblingLI(this.curUL.querySelectorAll("."+c.listItem),n,i),this.setSelectLI(s,t)),s?this.element.setAttribute("aria-activedescendant",s.id.toString()):this.element.removeAttribute("aria-activedescendant"),s},s.prototype.arrowKeyHandler=function(e,t){var i=this;if(e.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var s=this.onArrowKeyDown(e,t),n=this.element.getBoundingClientRect().top,a=this.element.getBoundingClientRect().height,l=this.curUL.querySelector("."+c.listItem).getBoundingClientRect(),r=void 0,o=void 0;if(this.fields.groupBy&&(o=this.curUL.querySelector("."+c.groupListItem).getBoundingClientRect()),s){var h=s.getBoundingClientRect().top,d=s.getBoundingClientRect().height;if(t)(r=this.isWindow?h:h-n)<0&&(this.isWindow?window.scroll(0,pageYOffset+r):this.element.scrollTop=this.element.scrollTop+r);else{var u=this.isWindow?window.innerHeight:a;(r=this.isWindow?h+d:h-n+d)>u&&(this.isWindow?window.scroll(0,pageYOffset+(r-u)):this.element.scrollTop=this.element.scrollTop+(r-u))}}else if(this.enableVirtualization&&t&&this.virtualizationModule.uiFirstIndex)this.onUIScrolled=function(){i.onArrowKeyDown(e,t),i.onUIScrolled=void 0},r=this.virtualizationModule.listItemHeight,this.isWindow?window.scroll(0,pageYOffset-r):this.element.scrollTop=this.element.scrollTop-r;else if(t)if(this.showHeader&&this.headerEle){var p=o?o.top:l.top,m=this.headerEle.getBoundingClientRect();r=m.top<0?m.height-p:0,this.isWindow?window.scroll(0,pageYOffset-r):this.element.scrollTop=0}else this.fields.groupBy&&(r=this.isWindow?o.top<0?o.top:0:n-l.top+o.height,this.isWindow?window.scroll(0,pageYOffset+r):this.element.scrollTop=this.element.scrollTop-r)}},s.prototype.enterKeyHandler=function(e){if(Object.keys(this.dataSource).length&&this.curUL){var t=!sf.base.isNullOrUndefined(this.curUL.querySelector("."+c.hasChild)),i=this.curUL.querySelector("."+c.focused);t&&i&&(i.classList.remove(c.focused),this.showCheckBox&&(this.removeSelect(),this.removeSelect(i),this.removeHover()),this.setSelectLI(i,e))}},s.prototype.spaceKeyHandler=function(e){if(this.enable&&this.showCheckBox&&Object.keys(this.dataSource).length&&this.curUL){var t=this.curUL.querySelector("."+c.focused);if(!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.querySelector("."+c.checked))){var i={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:t};this.checkInternally(i,i.item.querySelector("."+c.checkboxWrapper))}else this.uncheckItem(t)}},s.prototype.keyActionHandler=function(e){switch(e.keyCode){case 36:this.homeKeyHandler(e);break;case 35:this.homeKeyHandler(e,!0);break;case 40:this.arrowKeyHandler(e);break;case 38:this.arrowKeyHandler(e,!0);break;case 13:this.enterKeyHandler(e);break;case 8:this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();break;case 32:this.spaceKeyHandler(e)}},s.prototype.swipeActionHandler=function(e){"Right"===e.swipeDirection&&e.velocity>.5&&"touchend"==e.originalEvent.type&&(this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back())},s.prototype.focusout=function(){if(Object.keys(this.dataSource).length&&this.curUL){var e=this.curUL.querySelector("."+c.focused),t=this.curUL.querySelector("[aria-selected = true]");e&&(e.classList.remove(c.focused),t&&!this.showCheckBox&&t.classList.add(c.selected))}},s.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"keydown",this.keyActionHandler,this),sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),this.enableVirtualization||(sf.base.EventHandler.add(this.element,"mouseover",this.hoverHandler,this),sf.base.EventHandler.add(this.element,"mouseout",this.leaveHandler,this)),sf.base.EventHandler.add(this.element,"focusout",this.focusout,this),this.touchModule=new sf.base.Touch(this.element,{swipe:this.swipeActionHandler.bind(this)})},s.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"click",this.clickHandler),this.enableVirtualization||(sf.base.EventHandler.remove(this.element,"mouseover",this.hoverHandler),sf.base.EventHandler.remove(this.element,"mouseout",this.leaveHandler)),sf.base.EventHandler.remove(this.element,"mouseover",this.hoverHandler),sf.base.EventHandler.remove(this.element,"mouseout",this.leaveHandler),this.touchModule.destroy()},s.prototype.removeFocus=function(){for(var e=0,t=this.element.querySelectorAll("."+c.focused);e<t.length;e++){t[e].classList.remove(c.focused)}},s.prototype.removeHover=function(){var e=this.element.querySelector("."+c.hover);e&&e.classList.remove(c.hover)},s.prototype.removeSelect=function(e){if(sf.base.isNullOrUndefined(e))for(var t=0,i=this.element.querySelectorAll("."+c.selected);t<i.length;t++){var s=i[t];this.showCheckBox&&s.querySelector("."+c.checked)||(s.setAttribute("aria-selected","false"),s.classList.remove(c.selected))}else e.classList.remove(c.selected),e.setAttribute("aria-selected","false")},s.prototype.isValidLI=function(e){return e&&e.classList.contains(c.listItem)&&!e.classList.contains(c.groupListItem)&&!e.classList.contains(c.disable)},s.prototype.setCheckboxLI=function(e,t){if(this.isValidLI(e)&&this.enable&&this.showCheckBox){this.curUL.querySelector("."+c.focused)&&this.curUL.querySelector("."+c.focused).classList.remove(c.focused),e.classList.add(c.focused);var i=e.querySelector("."+c.checkboxWrapper),s=i.querySelector("."+c.checkboxIcon+"."+c.icon);this.removeHover(),s.classList.contains(c.checked)?(s.classList.remove(c.checked),e.classList.remove(c.selected),e.setAttribute("aria-selected","false")):(s.classList.add(c.checked),e.classList.add(c.selected),e.setAttribute("aria-selected","true")),i.setAttribute("aria-checked",s.classList.contains(c.checked)?"true":"false");var n=this.selectEventData(e,t);sf.base.merge(n,{isChecked:s.classList.contains(c.checked)}),this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(e,t),this.trigger("select",n),this.setSelectedItemData(e),this.renderSubList(e)}},s.prototype.selectEventData=function(e,i){var s,n=this.getItemData(e),a=t(n,this.listBaseOption.fields);s=!sf.base.isNullOrUndefined(n)&&"string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0]?{item:e,text:e&&e.innerText.trim(),data:this.dataSource}:{item:e,text:a&&a[this.listBaseOption.fields.text],data:n};var l={};return sf.base.merge(l,s),i&&sf.base.merge(l,{isInteracted:!0,event:i,index:Array.prototype.indexOf.call(this.curUL.children,e)}),l},s.prototype.setSelectedItemData=function(e){var i=this.getItemData(e),s=t(i,this.listBaseOption.fields);sf.base.isNullOrUndefined(i)||"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?this.selectedItems={item:e,text:s&&s[this.listBaseOption.fields.text],data:i}:this.selectedItems={item:e,text:e&&e.innerText.trim(),data:this.dataSource}},s.prototype.setSelectLI=function(e,t){if(this.isValidLI(e)&&!e.classList.contains(c.selected)&&this.enable){this.showCheckBox||this.removeSelect(),e.classList.add(c.selected),e.setAttribute("aria-selected","true"),this.removeHover(),this.setSelectedItemData(e),this.enableVirtualization&&this.virtualizationModule.setSelectLI(e,t);var i=this.selectEventData(e,t);this.trigger("select",i),this.selectedLI=e,this.renderSubList(e)}},s.prototype.setHoverLI=function(e){if(this.isValidLI(e)&&!e.classList.contains(c.hover)&&this.enable){var t=this.element.querySelectorAll("."+c.hover);t&&t.length&&sf.base.removeClass(t,c.hover),e.classList.contains(c.selected)&&!this.showCheckBox||e.classList.add(c.hover)}},s.prototype.getSubDS=function(){var e=this.curDSLevel;if(e.length){for(var i=this.localData,s=0,n=e;s<n.length;s++){var a=n[s],l={};l[this.fields.id]=a,this.curDSJSON=this.findItemFromDS(i,l);var r=t(this.curDSJSON,this.listBaseOption.fields);i=this.curDSJSON?r[this.fields.child]:i}return i}return this.localData},s.prototype.getItemData=function(e){var t,i=this.dataSource instanceof sf.data.DataManager?this.localData:this.dataSource,s=this.getElementUID(e);return t=sf.base.isNullOrUndefined(this.element.querySelector("."+c.hasChild))&&this.fields.groupBy?this.curViewDS:i,this.findItemFromDS(t,s)},s.prototype.findItemFromDS=function(e,i,s){var a,l=this;return e&&e.length&&i?e.some((function(r){var o=t(r,l.listBaseOption.fields);if(!i[l.fields.id]&&!i[l.fields.text]||i[l.fields.id]&&(!sf.base.isNullOrUndefined(o[l.fields.id])&&o[l.fields.id].toString())!==i[l.fields.id].toString()||i[l.fields.text]&&o[l.fields.text]!==i[l.fields.text])if("object"!==n()(r)&&-1!==e.indexOf(r))a=s?e:r;else if(!sf.base.isNullOrUndefined(i[l.fields.id])&&sf.base.isNullOrUndefined(o[l.fields.id])){var c=l.element.querySelector('[data-uid="'+i[l.fields.id]+'"]');c&&c.innerText.trim()===o[l.fields.text]&&(a=r)}else o.hasOwnProperty(l.fields.child)&&o[l.fields.child].length&&(a=l.findItemFromDS(o[l.fields.child],i,s));else a=s?e:r;return!!a})):a=e,a},s.prototype.getQuery=function(){var t=[],i=this.query?this.query:new sf.data.Query;if(!this.query){for(var s=0,n=Object.keys(this.fields.properties);s<n.length;s++){var a=n[s];"tableName"!==a&&this.fields[a]&&this.fields[a]!==e.ListBase.defaultMappedFields[a]&&-1===t.indexOf(this.fields[a])&&t.push(this.fields[a])}i.select(t),this.fields.properties.hasOwnProperty("tableName")&&i.from(this.fields.tableName)}return i},s.prototype.setViewDataSource=function(t){void 0===t&&(t=this.localData),t&&this.fields.groupBy?"None"!==this.sortOrder?this.curViewDS=e.ListBase.groupDataSource(e.ListBase.getDataSource(t,e.ListBase.addSorting(this.sortOrder,this.fields.sortBy)),this.listBaseOption.fields,this.sortOrder):this.curViewDS=e.ListBase.groupDataSource(t,this.listBaseOption.fields,this.sortOrder):t&&"None"!==this.sortOrder?this.curViewDS=e.ListBase.getDataSource(t,e.ListBase.addSorting(this.sortOrder,this.fields.sortBy)):this.curViewDS=t},s.prototype.isInAnimation=function(){return this.curUL.classList.contains(".e-animate")},s.prototype.setLocalData=function(){var t=this;this.trigger("actionBegin");var i=this;if(this.dataSource instanceof sf.data.DataManager)this.dataSource.executeQuery(this.getQuery()).then((function(e){t.isDestroyed||(t.localData=e.result,!i.enableVirtualization&&t.isServerRendered&&sf.base.isBlazor()||i.removeElement(i.contentContainer),t.renderList(),t.trigger("actionComplete",e))})).catch((function(e){t.isDestroyed||t.trigger("actionFailure",e)}));else if(this.dataSource&&this.dataSource.length)this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData});else{var s=this.element.querySelector("ul");s&&(sf.base.remove(s),this.setProperties({dataSource:e.ListBase.createJsonFromElement(s)},!0),this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData}))}},s.prototype.reRender=function(){sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization||(this.resetBlazorTemplates(),this.removeElement(this.headerEle),this.removeElement(this.ulElement),this.removeElement(this.contentContainer),-1===Object.keys(window).indexOf("ejsInterop")&&(this.element.innerHTML=""),this.headerEle=this.ulElement=this.liCollection=void 0,this.header()),this.setLocalData()},s.prototype.resetCurrentList=function(){this.resetBlazorTemplates(),this.setViewDataSource(this.curViewDS),this.contentContainer.innerHTML="",this.createList(),this.renderIntoDom(this.curUL)},s.prototype.setAttributes=function(e){for(var t=0;t<e.length;t++){var i=e[t];i.classList.contains("e-list-item")&&(i.setAttribute("id",this.element.id+"_"+i.getAttribute("data-uid")),i.setAttribute("aria-selected","false"),i.setAttribute("tabindex","-1"))}},s.prototype.createList=function(){this.currentLiElements=[],this.isNestedList=!1,this.ulElement=this.curUL=e.ListBase.createList(this.createElement,this.curViewDS,this.listBaseOption),this.liCollection=this.curUL.querySelectorAll("."+c.listItem),this.setAttributes(this.liCollection),this.updateBlazorTemplates(!0)},s.prototype.resetBlazorTemplates=function(){var e=sf.base.blazorTemplates;this.template&&(e[this.LISTVIEW_TEMPLATE_ID]=[],sf.base.resetBlazorTemplate(this.LISTVIEW_TEMPLATE_ID,"Template")),this.groupTemplate&&(e[this.LISTVIEW_GROUPTEMPLATE_ID]=[],sf.base.resetBlazorTemplate(this.LISTVIEW_GROUPTEMPLATE_ID,"GroupTemplate")),this.headerTemplate&&sf.base.resetBlazorTemplate(this.LISTVIEW_HEADERTEMPLATE_ID,"HeaderTemplate")},s.prototype.updateBlazorTemplates=function(e,t,i){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=!1),this.template&&e&&!this.enableVirtualization&&sf.base.updateBlazorTemplate(this.LISTVIEW_TEMPLATE_ID,"Template",this,i),this.groupTemplate&&e&&!this.enableVirtualization&&sf.base.updateBlazorTemplate(this.LISTVIEW_GROUPTEMPLATE_ID,"GroupTemplate",this,i),this.headerTemplate&&t&&sf.base.updateBlazorTemplate(this.LISTVIEW_HEADERTEMPLATE_ID,"HeaderTemplate",this,i)},s.prototype.exceptionEvent=function(e){this.trigger("actionFailure",e)},s.prototype.UpdateCurrentUL=function(){this.ulElement=this.curUL=this.element.querySelector("."+c.parentItem),this.curUL&&(this.liCollection=this.curUL.querySelectorAll("."+c.listItem))},s.prototype.renderingNestedList=function(){var e=sf.base.closest(this.liElement.parentNode,"."+c.parentItem),t=this.element.id,i=document.getElementById(t),s=i.getElementsByTagName("UL")[i.getElementsByTagName("UL").length-1];this.switchView(e,s),this.liElement=null},s.prototype.renderSubList=function(i){this.liElement=i;var s=i.getAttribute("data-uid");if(i.classList.contains(c.hasChild)&&s){var n=sf.base.closest(i.parentNode,"."+c.parentItem),a=this.element.querySelector("[pid='"+s+"']");if(this.curDSLevel.push(s),this.setViewDataSource(this.getSubDS()),!a){var l=this.curViewDS;if(sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization)this.interopAdaptor.invokeMethodAsync("ListChildDataSource",l);else{var r=(a=e.ListBase.createListFromJson(this.createElement,l,this.listBaseOption,this.curDSLevel.length)).querySelectorAll("."+c.listItem);this.setAttributes(r),a.setAttribute("pID",s),a.style.display="none",this.renderIntoDom(a),this.updateBlazorTemplates(!0)}}if(sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization||this.switchView(n,a),this.liCollection=this.curUL.querySelectorAll("."+c.listItem),this.selectedItems){var o=t(this.selectedItems.data,this.listBaseOption.fields);this.header(o[this.listBaseOption.fields.text],!0)}this.selectedLI=void 0}},s.prototype.renderIntoDom=function(e){this.contentContainer.appendChild(e)},s.prototype.renderList=function(e){this.setViewDataSource(e),sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization||(this.enableVirtualization?Object.keys(this.dataSource).length&&(!this.template&&!this.groupTemplate||this.virtualizationModule.isNgTemplate()||(this.listBaseOption.template=null,this.listBaseOption.groupTemplate=null,this.listBaseOption.itemCreated=this.virtualizationModule.createUIItem.bind(this.virtualizationModule)),this.virtualizationModule.uiVirtualization()):(this.createList(),this.contentContainer=this.createElement("div",{className:c.content}),this.element.appendChild(this.contentContainer),this.renderIntoDom(this.ulElement)))},s.prototype.getElementUID=function(e){var t={};return e instanceof Element?t[this.fields.id]=e.getAttribute("data-uid"):t=e,t},s.prototype.render=function(){sf.base.isBlazor()&&this.isServerRendered&&!this.enableVirtualization?this.initBlazor(!0):(this.element.classList.add(c.root),sf.base.attributes(this.element,{role:"list",tabindex:"0"}),this.setCSSClass(),this.setEnableRTL(),this.setEnable(),this.setSize(),this.wireEvents(),this.header(),this.setLocalData(),this.setHTMLAttribute()),this.rippleFn=sf.base.rippleEffect(this.element,{selector:"."+c.listItem}),this.renderComplete()},s.prototype.initBlazor=function(e){null===e&&(e=!1),this.setLocalData(),this.setViewDataSource(this.localData),this.contentContainer=this.element.querySelector("."+c.content),e&&this.wireEvents()},s.prototype.destroy=function(){this.resetBlazorTemplates(),this.unWireEvents();var e=[c.root,c.disable,"e-rtl","e-has-header","e-lib"].concat(this.cssClass.split(" ").filter((function(e){return e})));sf.base.removeClass([this.element],e),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex"),this.curUL=this.ulElement=this.liCollection=this.headerEle=void 0,sf.base.isBlazor()&&this.isServerRendered?this.element.style.display="none":(this.element.innerHTML="",i.prototype.destroy.call(this))},s.prototype.back=function(){var e=this.curDSLevel[this.curDSLevel.length-1];if(void 0!==e&&!this.isInAnimation()){this.curDSLevel.pop(),this.setViewDataSource(this.getSubDS());var i=this.element.querySelector("[data-uid='"+e+"']"),s=this.curUL;i?i=i.parentElement:(this.createList(),this.renderIntoDom(this.ulElement),i=this.curUL);var n=t(this.curDSJSON,this.listBaseOption.fields)[this.fields.text];this.switchView(s,i,!0),this.removeFocus();var a=this.element.querySelector("[data-uid='"+e+"']");a.classList.remove(c.disable),a.classList.add(c.focused),this.showCheckBox&&a.querySelector("."+c.checkboxIcon).classList.contains(c.checked)?a.setAttribute("aria-selected","true"):(a.classList.remove(c.selected),a.setAttribute("aria-selected","false")),this.liCollection=this.curUL.querySelectorAll("."+c.listItem),this.enableHtmlSanitizer&&this.setProperties({headerTitle:sf.base.SanitizeHtmlHelper.sanitize(this.headerTitle)},!0),this.header(this.curDSLevel.length?n:this.headerTitle,!!this.curDSLevel.length)}},s.prototype.selectItem=function(e){this.enableVirtualization?this.virtualizationModule.selectItem(e):this.showCheckBox?this.setCheckboxLI(this.getLiFromObjOrElement(e)):sf.base.isNullOrUndefined(e)?this.removeSelect():this.setSelectLI(this.getLiFromObjOrElement(e))},s.prototype.getLiFromObjOrElement=function(e){var i,s=this.dataSource instanceof sf.data.DataManager?this.localData:this.dataSource;if(!sf.base.isNullOrUndefined(e))if("string"==typeof s[0]||"number"==typeof s[0])if(e instanceof Element){for(var n=e.getAttribute("data-uid").toString(),a=0;a<this.liCollection.length;a++)if(this.liCollection[a].getAttribute("data-uid").toString()===n){i=this.liCollection[a];break}}else Array.prototype.some.call(this.curUL.querySelectorAll("."+c.listItem),(function(t){return t.innerText.trim()===e.toString()&&(i=t,!0)}));else{var l=this.getItemData(e),r=t(l,this.listBaseOption.fields);if(l&&(i=this.element.querySelector('[data-uid="'+r[this.fields.id]+'"]'),!this.enableVirtualization&&sf.base.isNullOrUndefined(i))){var o=this.element.querySelectorAll("."+c.listItem);for(a=0;a<o.length;a++)o[a].innerText.trim()===r[this.fields.text]&&(i=o[a])}}return i},s.prototype.selectMultipleItems=function(e){if(!sf.base.isNullOrUndefined(e))for(var t=0;t<e.length;t++)sf.base.isNullOrUndefined(e[t])||this.selectItem(e[t])},s.prototype.getParentId=function(){var e=[];if(this.isNestedList)for(var t=this.curDSLevel.length-1;t>=0;t--)e.push(this.curDSLevel[t]);return e},s.prototype.getSelectedItems=function(){var e,i=!1;this.selectedId=[];var s=this.dataSource instanceof sf.data.DataManager?this.localData:this.dataSource;if(this.enableVirtualization&&!i)e=this.virtualizationModule.getSelectedItems(),i=!0;else if(this.showCheckBox&&!i){var n=this.curUL.getElementsByClassName(c.selected),a=[],l=[];this.selectedId=[];for(var r=[],o=0;o<n.length;o++)if("string"==typeof s[0]||"number"==typeof s[0])a.push(n[o].innerText.trim());else{var h=this.getItemData(n[o]),d=t(h,this.listBaseOption.fields);this.isNestedList?r.push({data:h,parentId:this.getParentId()}):l.push(h),d?(a.push(d[this.listBaseOption.fields.text]),this.selectedId.push(d[this.listBaseOption.fields.id])):(a.push(void 0),this.selectedId.push(void 0))}"string"!=typeof s[0]&&"number"!=typeof s[0]||i||(e={item:n,data:s,text:a},i=!0),this.isNestedList&&!i?(e={item:n,data:r,text:a},i=!0):i||(e={item:n,data:l,text:a},i=!0)}else if(!i){var u=this.element.getElementsByClassName(c.selected)[0];d=t(this.getItemData(u),this.listBaseOption.fields);"string"!=typeof s[0]&&"number"!=typeof s[0]||i?i||(sf.base.isNullOrUndefined(d)||sf.base.isNullOrUndefined(u)?(e=void 0,i=!0):(this.selectedId.push(d[this.listBaseOption.fields.id]),e={text:d[this.listBaseOption.fields.text],item:u,data:this.getItemData(u)},i=!0)):(e=sf.base.isNullOrUndefined(u)?void 0:{item:u,data:s,text:u.innerText.trim()},i=!0)}return sf.base.isBlazor()?this.blazorGetSelectedItems(e):e},s.prototype.blazorGetSelectedItems=function(e){var t={data:[],index:[],parentId:[],text:[]};if(!sf.base.isNullOrUndefined(e)){if(!sf.base.isNullOrUndefined(e.data))if(this.showCheckBox&&this.isNestedList){for(var i=0;i<e.data.length;i++)t.data.push(e.data[i].data);sf.base.isNullOrUndefined(e.data[0])||sf.base.isNullOrUndefined(e.data[0].parentId)||(t.parentId=e.data[0].parentId)}else t.data=this.convertItemsToArray(e.data);sf.base.isNullOrUndefined(e.text)||(t.text=this.convertItemsToArray(e.text)),sf.base.isNullOrUndefined(e.index)||(t.index=this.convertItemsToArray(e.index))}return t},s.prototype.convertItemsToArray=function(e){return Array.isArray(e)?e.slice():[e]},s.prototype.findItem=function(e){return this.getItemData(e)},s.prototype.enableItem=function(e){this.setItemState(e,!0),this.enableVirtualization&&this.virtualizationModule.enableItem(e)},s.prototype.disableItem=function(e){this.setItemState(e,!1),this.enableVirtualization&&this.virtualizationModule.disableItem(e)},s.prototype.setItemState=function(e,i){var s=this.getItemData(e),n=t(s,this.listBaseOption.fields);if(s){var a=this.element.querySelector('[data-uid="'+n[this.fields.id]+'"]');i?(a&&a.classList.remove(c.disable),delete s[this.fields.enabled]):i||(a&&a.classList.add(c.disable),s[this.fields.enabled]=!1)}},s.prototype.showItem=function(e){this.showHideItem(e,!1,""),this.enableVirtualization&&this.virtualizationModule.showItem(e)},s.prototype.hideItem=function(e){this.showHideItem(e,!0,"none"),this.enableVirtualization&&this.virtualizationModule.hideItem(e)},s.prototype.showHideItem=function(e,i,s){var n=this.getItemData(e),a=t(n,this.listBaseOption.fields);if(n){var l=this.element.querySelector('[data-uid="'+a[this.fields.id]+'"]');l&&(l.style.display=s),i?n[this.fields.isVisible]=!1:delete n[this.fields.isVisible]}},s.prototype.addItem=function(e,t){void 0===t&&(t=void 0);var i=this.dataSource instanceof sf.data.DataManager?this.localData:this.dataSource;this.addItemInternally(e,t,i)},s.prototype.addItemInternally=function(e,i,s){if(e instanceof Array)if(this.enableVirtualization)this.virtualizationModule.addItem(e,i,s);else{var n=this.findItemFromDS(s,i),a=void 0;if(n)(a=t(n,this.listBaseOption.fields)[this.fields.child])||(a=[]),a=a.concat(e);if(n instanceof Array){for(var l=0;l<e.length;l++){s.push(e[l]),this.setViewDataSource(s);var r=this.contentContainer?this.contentContainer.children[0]:null;this.contentContainer&&r?this.addItemIntoDom(e[l],r,this.curViewDS):this.reRender()}this.curUL&&this.updateBlazorTemplates(!0),this.liCollection=this.curUL.querySelectorAll("."+c.listItem)}else n&&(n[this.fields.child]=a,this.addItemInNestedList(n,e))}},s.prototype.addItemInNestedList=function(t,i){var s=t[this.fields.id],n=t[this.fields.child],a=this.element.querySelector("[pid='"+s+"']"),l=this.element.querySelector("[data-uid='"+s+"']"),r=a||(l?sf.base.closest(l,"ul"):null),o=a?n:[t],h=!1;if(!!l&&!l.classList.contains(c.hasChild)){var d=e.ListBase.createListItemFromJson(this.createElement,o,this.listBaseOption);this.setAttributes(d),r.insertBefore(d[0],l),sf.base.detach(l),h=!0}if(a&&i){for(var u=0;u<i.length;u++)o.push(i[u]),this.addItemIntoDom(i[u],r,o);h=!0}h&&this.updateBlazorTemplates(!0)},s.prototype.addItemIntoDom=function(e,t,i){var s=i.indexOf(e);this.addListItem(e,s,t,i);var n=i[s-1];n&&n.isHeader&&1===n.items.length&&this.addListItem(n,s-1,t,i)},s.prototype.addListItem=function(t,i,s,n){var a=this.getLiFromObjOrElement(n[i+1])||this.getLiFromObjOrElement(n[i+2])||null,l=e.ListBase.createListItemFromJson(this.createElement,[t],this.listBaseOption);this.setAttributes(l),s.insertBefore(l[0],a)},s.prototype.removeItem=function(e){var t=this.dataSource instanceof sf.data.DataManager?this.localData:this.dataSource;this.enableVirtualization?this.virtualizationModule.removeItem(e):(this.removeItemFromList(e,t),this.updateBlazorTemplates(!0))},s.prototype.removeItemFromList=function(t,i){var s,n=this,a=this.curViewDS,l=t instanceof Element?this.getElementUID(t):t;if(s=this.findItemFromDS(i,l,!0)){var r;r=this.findItemFromDS(s,l);var o=a.indexOf(r),h=this.getLiFromObjOrElement(t),d=void 0;this.validateNestedView(h),this.fields.groupBy&&this.curViewDS[o-1]&&a[o-1].isHeader&&1===a[o-1].items.length&&h&&h.previousElementSibling.classList.contains(c.groupListItem)&&(sf.base.isNullOrUndefined(h.nextElementSibling)||h.nextElementSibling&&h.nextElementSibling.classList.contains(c.groupListItem))&&(d=h.previousElementSibling),h&&sf.base.detach(h),d&&sf.base.detach(d);var u=s.length-1<=0?this.findParent(this.localData,this.fields.id,(function(e){return e===r[n.fields.id]}),null):null,p=s.indexOf(r);if(s.splice(p,1),this.setViewDataSource(i),u&&u.parent&&Array.isArray(u.parent[this.fields.child])&&u.parent[this.fields.child].length<=0){var m=this.getLiFromObjOrElement(u.parent);if(m){var f=e.ListBase.createListItemFromJson(this.createElement,[u.parent],this.listBaseOption);this.setAttributes(f),m.parentElement.insertBefore(f[0],m),m.parentElement.removeChild(m)}}s.length<=0&&this.back(),this.liCollection=Array.prototype.slice.call(this.element.querySelectorAll("."+c.listItem))}},s.prototype.validateNestedView=function(e){var t=e?e.getAttribute("data-uid").toString().toLowerCase():null;if(t&&this.curDSLevel&&this.curDSLevel.length>0)for(;this.curDSLevel.some((function(e){return e.toString().toLowerCase()===t}));)this.back()},s.prototype.removeMultipleItems=function(e){if(e.length){for(var t=0;t<e.length;t++)this.removeItem(e[t]);this.updateBlazorTemplates(!0)}},s.prototype.findParent=function(e,t,i,s){if(e.hasOwnProperty(t)&&!0===i(e[t]))return sf.base.extend({},e);for(var a=0;a<Object.keys(e).length;a++)if(e[Object.keys(e)[a]]&&"object"===n()(e[Object.keys(e)[a]])){var l=this.findParent(e[Object.keys(e)[a]],t,i,e);if(null!=l)return l.parent||(l.parent=s),l}return null},s.prototype.getModuleName=function(){return"listview"},s.prototype.requiredModules=function(){var e=[];return this.enableVirtualization&&e.push({args:[this],member:"virtualization"}),e},s.prototype.getPersistData=function(){return this.addOnPersist(["cssClass","enableRtl","htmlAttributes","enable","fields","animation","headerTitle","sortOrder","showIcon","height","width","showCheckBox","checkBoxPosition"])},l([sf.base.Property("")],s.prototype,"cssClass",void 0),l([sf.base.Property(!1)],s.prototype,"enableVirtualization",void 0),l([sf.base.Property({})],s.prototype,"htmlAttributes",void 0),l([sf.base.Property(!0)],s.prototype,"enable",void 0),l([sf.base.Property([])],s.prototype,"dataSource",void 0),l([sf.base.Property()],s.prototype,"query",void 0),l([sf.base.Complex(e.ListBase.defaultMappedFields,h)],s.prototype,"fields",void 0),l([sf.base.Property({effect:"SlideLeft",duration:400,easing:"ease"})],s.prototype,"animation",void 0),l([sf.base.Property("None")],s.prototype,"sortOrder",void 0),l([sf.base.Property(!1)],s.prototype,"showIcon",void 0),l([sf.base.Property(!1)],s.prototype,"showCheckBox",void 0),l([sf.base.Property("Left")],s.prototype,"checkBoxPosition",void 0),l([sf.base.Property("")],s.prototype,"headerTitle",void 0),l([sf.base.Property(!1)],s.prototype,"showHeader",void 0),l([sf.base.Property(!1)],s.prototype,"enableHtmlSanitizer",void 0),l([sf.base.Property("")],s.prototype,"height",void 0),l([sf.base.Property("")],s.prototype,"width",void 0),l([sf.base.Property("")],s.prototype,"virtualCheckBox",void 0),l([sf.base.Property(null)],s.prototype,"template",void 0),l([sf.base.Property(null)],s.prototype,"headerTemplate",void 0),l([sf.base.Property(null)],s.prototype,"groupTemplate",void 0),l([sf.base.Event()],s.prototype,"select",void 0),l([sf.base.Event()],s.prototype,"actionBegin",void 0),l([sf.base.Event()],s.prototype,"actionComplete",void 0),l([sf.base.Event()],s.prototype,"actionFailure",void 0),s=l([sf.base.NotifyPropertyChanges],s)}(sf.base.Component),u=function(){function t(e){this.listViewInstance=e}return t.prototype.isNgTemplate=function(){return!sf.base.isNullOrUndefined(this.listViewInstance.templateRef)&&"string"!=typeof this.listViewInstance.templateRef},t.prototype.uiVirtualization=function(){var t=this.listViewInstance.curViewDS,i=t.slice(0,1);this.listViewInstance.ulElement=this.listViewInstance.curUL=e.ListBase.createList(this.listViewInstance.createElement,i,this.listViewInstance.listBaseOption),this.listViewInstance.contentContainer=this.listViewInstance.createElement("div",{className:c.content}),this.listViewInstance.element.appendChild(this.listViewInstance.contentContainer),this.listViewInstance.contentContainer.appendChild(this.listViewInstance.ulElement),this.listItemHeight=this.listViewInstance.ulElement.firstElementChild.getBoundingClientRect().height,this.expectedDomItemCount=this.ValidateItemCount(1e4),this.domItemCount=this.ValidateItemCount(Object.keys(this.listViewInstance.curViewDS).length),this.uiFirstIndex=0,this.uiLastIndex=this.domItemCount-1,this.wireScrollEvent(!1);var s=t.slice(1,this.domItemCount),n=e.ListBase.createListItemFromJson(this.listViewInstance.createElement,s,this.listViewInstance.listBaseOption);sf.base.append(n,this.listViewInstance.ulElement),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li"),this.topElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.topElement,this.listViewInstance.ulElement.firstElementChild),this.bottomElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.bottomElement,null),this.totalHeight=Object.keys(t).length*this.listItemHeight-this.domItemCount*this.listItemHeight,this.topElement.style.height="0px",this.bottomElement.style.height=this.totalHeight+"px",this.topElementHeight=0,this.bottomElementHeight=this.totalHeight,this.listDiff=0,this.uiIndicesInitialization()},t.prototype.wireScrollEvent=function(e){e?this.listViewInstance.isWindow?window.removeEventListener("scroll",this.onVirtualScroll):sf.base.EventHandler.remove(this.listViewInstance.element,"scroll",this.onVirtualUiScroll):this.listViewInstance.isWindow?(this.onVirtualScroll=this.onVirtualUiScroll.bind(this),window.addEventListener("scroll",this.onVirtualScroll)):sf.base.EventHandler.add(this.listViewInstance.element,"scroll",this.onVirtualUiScroll,this)},t.prototype.ValidateItemCount=function(e){var t=parseFloat(sf.base.formatUnit(this.listViewInstance.height)),i=this.listViewInstance.isWindow?Math.round(window.innerHeight/this.listItemHeight*3):Math.round(t/this.listItemHeight*1.5);return i>e&&(i=e),i},t.prototype.uiIndicesInitialization=function(){this.uiIndices={activeIndices:[],disabledItemIndices:[],hiddenItemIndices:[]};for(var e=this.listViewInstance.curViewDS,t=0;t<e.length;t++)this.listViewInstance.showCheckBox&&e[t][this.listViewInstance.fields.isChecked]&&this.uiIndices.activeIndices.push(t),sf.base.isNullOrUndefined(e[t][this.listViewInstance.fields.enabled])||e[t][this.listViewInstance.fields.enabled]||this.uiIndices.disabledItemIndices.push(t);if(this.isNgTemplate())for(var i=this.listViewInstance.element.querySelectorAll("."+c.listItem),s=0;s<i.length;s++)i[s].context=this.listViewInstance.viewContainerRef._embeddedViews[s].context},t.prototype.refreshItemHeight=function(){if(this.listViewInstance.curViewDS.length){var e=this.listViewInstance.curViewDS;this.listItemHeight=this.topElement.nextSibling.getBoundingClientRect().height,this.totalHeight=Object.keys(e).length*this.listItemHeight-this.domItemCount*this.listItemHeight,this.bottomElementHeight=this.totalHeight,this.bottomElement.style.height=this.totalHeight+"px"}},t.prototype.getscrollerHeight=function(e){return this.listViewInstance.isWindow?pageYOffset-e<=0?0:pageYOffset-e:this.listViewInstance.element.scrollTop-e<=0?0:this.listViewInstance.element.scrollTop-e},t.prototype.onVirtualUiScroll=function(){var e,t;t=this.listViewInstance.isWindow?this.listViewInstance.ulElement.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top:this.listViewInstance.headerEle?this.listViewInstance.headerEle.getBoundingClientRect().height:0,this.scrollPosition=sf.base.isNullOrUndefined(this.scrollPosition)?0:this.scrollPosition;var i=this.getscrollerHeight(t);if(this.topElementHeight=this.listItemHeight*Math.floor(i/this.listItemHeight),this.bottomElementHeight=this.totalHeight-this.topElementHeight,e=i<=this.totalHeight?[this.topElementHeight,this.bottomElementHeight]:[this.totalHeight,0],this.topElementHeight=e[0],this.bottomElementHeight=e[1],this.topElementHeight!==parseFloat(this.topElement.style.height)){var s;if(this.topElement.style.height=this.topElementHeight+"px",this.bottomElement.style.height=this.bottomElementHeight+"px",i>this.scrollPosition)(s=Math.round(this.topElementHeight/this.listItemHeight-this.listDiff))>this.expectedDomItemCount+5?this.onLongScroll(s,!0):this.onNormalScroll(s,!0);else(s=Math.round(this.listDiff-this.topElementHeight/this.listItemHeight))>this.expectedDomItemCount+5?this.onLongScroll(s,!1):this.onNormalScroll(s,!1);this.listDiff=Math.round(this.topElementHeight/this.listItemHeight),"function"==typeof this.listViewInstance.onUIScrolled&&this.listViewInstance.onUIScrolled()}this.scrollPosition=i},t.prototype.onLongScroll=function(e,t){for(var i=t?this.uiFirstIndex+e:this.uiFirstIndex-e,s=this.listViewInstance.ulElement.querySelectorAll("li"),n=0;n<s.length;n++)this.updateUI(s[n],i),i++;this.uiLastIndex=t?this.uiLastIndex+e:this.uiLastIndex-e,this.uiFirstIndex=t?this.uiFirstIndex+e:this.uiFirstIndex-e},t.prototype.onNormalScroll=function(e,t){if(t)for(var i=0;i<e;i++){var s=++this.uiLastIndex;this.updateUI(this.topElement.nextElementSibling,s,this.bottomElement),this.uiFirstIndex++}else for(i=0;i<e;i++){s=--this.uiFirstIndex;var n=this.topElement.nextSibling;this.updateUI(this.bottomElement.previousElementSibling,s,n),this.uiLastIndex--}},t.prototype.updateUiContent=function(t,i){var s=this.listViewInstance.curViewDS;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]?(t.dataset.uid=e.ListBase.generateId(),t.getElementsByClassName(c.listItemText)[0].innerHTML=this.listViewInstance.curViewDS[i].toString()):(t.dataset.uid=s[i][this.listViewInstance.fields.id]?s[i][this.listViewInstance.fields.id].toString():e.ListBase.generateId(),t.getElementsByClassName(c.listItemText)[0].innerHTML=s[i][this.listViewInstance.fields.text].toString()),this.listViewInstance.showIcon&&(t.querySelector("."+c.listIcon)&&sf.base.detach(t.querySelector("."+c.listIcon)),this.listViewInstance.curViewDS[i][this.listViewInstance.fields.iconCss])){var n=t.querySelector("."+c.textContent),a=this.listViewInstance.createElement("div",{className:c.listIcon+" "+this.listViewInstance.curViewDS[i][this.listViewInstance.fields.iconCss]});n.insertBefore(a,t.querySelector("."+c.listItemText))}if(this.listViewInstance.showCheckBox&&this.listViewInstance.fields.groupBy){this.checkListWrapper||(this.checkListWrapper=this.listViewInstance.curUL.querySelector("."+c.checkboxWrapper).cloneNode(!0));n=t.querySelector("."+c.textContent);this.listViewInstance.curViewDS[i].isHeader?t.querySelector("."+c.checkboxWrapper)&&(t.classList.remove(c.checklist),n.classList.remove(c.checkbox),sf.base.detach(t.querySelector("."+c.checkboxWrapper))):t.querySelector("."+c.checkboxWrapper)||(t.classList.add(c.checklist),n.classList.add(c.checkbox),n.insertBefore(this.checkListWrapper.cloneNode(!0),t.querySelector("."+c.listItemText)))}},t.prototype.changeElementAttributes=function(e,t){if(e.classList.remove(c.disable),this.uiIndices.disabledItemIndices.length&&-1!==this.uiIndices.disabledItemIndices.indexOf(t)&&e.classList.add(c.disable),e.style.display="",this.uiIndices.hiddenItemIndices.length&&-1!==this.uiIndices.hiddenItemIndices.indexOf(t)&&(e.style.display="none"),this.listViewInstance.showCheckBox){var i=e.querySelector("."+c.checkboxWrapper);e.classList.remove(c.selected),e.classList.remove(c.focused),i&&(i.removeAttribute("aria-checked"),i.firstElementChild.classList.remove(c.checked)),this.uiIndices.activeIndices.length&&-1!==this.uiIndices.activeIndices.indexOf(t)&&!this.listViewInstance.curUL.querySelector(c.selected)&&(e.classList.add(c.selected),i.firstElementChild.classList.add(c.checked),i.setAttribute("aria-checked","true"),this.activeIndex===t&&e.classList.add(c.focused))}else e.classList.remove(c.selected),e.removeAttribute("aria-selected"),sf.base.isNullOrUndefined(this.activeIndex)||this.activeIndex!==t||this.listViewInstance.curUL.querySelector(c.selected)||(e.classList.add(c.selected),e.setAttribute("aria-selected","true"));this.listViewInstance.fields.groupBy&&(this.listViewInstance.curViewDS[t].isHeader?e.classList.contains(c.listItem)&&(e.classList.remove(c.listItem),e.setAttribute("role","group"),e.classList.add(c.groupListItem)):e.classList.contains(c.groupListItem)&&(e.classList.remove(c.groupListItem),e.setAttribute("role","listitem"),e.classList.add(c.listItem)))},t.prototype.findDSAndIndexFromId=function(e,t){var i=this,s={};return t=this.listViewInstance.getElementUID(t),sf.base.isNullOrUndefined(t)||e.some((function(e,n){return!!(t[i.listViewInstance.fields.id]&&t[i.listViewInstance.fields.id].toString()===(e[i.listViewInstance.fields.id]&&e[i.listViewInstance.fields.id].toString())||t===e)&&(s.index=n,s.data=e,!0)})),s},t.prototype.getSelectedItems=function(){var e=this;if(!sf.base.isNullOrUndefined(this.activeIndex)||this.listViewInstance.showCheckBox&&this.uiIndices.activeIndices.length){var t=[],i=[];if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]){var s=this.listViewInstance.curViewDS;if(this.listViewInstance.showCheckBox){for(var n=this.uiIndices.activeIndices,a=0;a<n.length;a++)t.push(s[n[a]]);return{text:t,data:t,index:this.uiIndices.activeIndices.map((function(t){return e.listViewInstance.dataSource.indexOf(s[t])}))}}return{text:s[this.activeIndex],data:s[this.activeIndex],index:this.listViewInstance.dataSource.indexOf(s[this.activeIndex])}}var l=this.listViewInstance.curViewDS,r=this.listViewInstance.fields.text;if(this.listViewInstance.showCheckBox){var o=this.uiIndices.activeIndices;for(a=0;a<o.length;a++)i.push(l[o[a]][r]),t.push(l[o[a]]);var c=this.listViewInstance.dataSource instanceof sf.data.DataManager?l:this.listViewInstance.dataSource;return{text:i,data:t,index:this.uiIndices.activeIndices.map((function(e){return c.indexOf(l[e])}))}}var h=this.listViewInstance.dataSource instanceof sf.data.DataManager?l:this.listViewInstance.dataSource;return{text:l[this.activeIndex][this.listViewInstance.fields.text],data:l[this.activeIndex],index:h.indexOf(l[this.activeIndex])}}},t.prototype.selectItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);if(Object.keys(t).length){var i=this.activeIndex===t.index,s=void 0;if(this.activeIndex=t.index,this.listViewInstance.showCheckBox&&(-1===this.uiIndices.activeIndices.indexOf(t.index)?(s=!0,this.uiIndices.activeIndices.push(t.index)):(s=!1,this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(t.index),1)),this.listViewInstance.curUL.querySelector("."+c.focused)&&this.listViewInstance.curUL.querySelector("."+c.focused).classList.remove(c.focused)),this.listViewInstance.getLiFromObjOrElement(e))this.listViewInstance.showCheckBox?this.listViewInstance.setCheckboxLI(this.listViewInstance.getLiFromObjOrElement(e)):this.listViewInstance.setSelectLI(this.listViewInstance.getLiFromObjOrElement(e));else{var n=void 0;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0])n={text:this.listViewInstance.curViewDS[this.activeIndex],data:this.listViewInstance.curViewDS[this.activeIndex],index:this.activeIndex};else{var a=this.listViewInstance.curViewDS;n={text:a[this.activeIndex][this.listViewInstance.fields.text],data:a[this.activeIndex],index:this.activeIndex}}this.listViewInstance.showCheckBox?(n.isChecked=s,this.listViewInstance.trigger("select",n)):i||(this.listViewInstance.removeSelect(),this.listViewInstance.trigger("select",n))}}else sf.base.isNullOrUndefined(e)&&!this.listViewInstance.showCheckBox&&(this.listViewInstance.removeSelect(),this.activeIndex=void 0)},t.prototype.enableItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(t.index),1)},t.prototype.disableItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&-1===this.uiIndices.disabledItemIndices.indexOf(t.index)&&this.uiIndices.disabledItemIndices.push(t.index)},t.prototype.showItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(t.index),1)},t.prototype.hideItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&-1===this.uiIndices.hiddenItemIndices.indexOf(t.index)&&this.uiIndices.hiddenItemIndices.push(t.index)},t.prototype.removeItem=function(e){var t,i=this.listViewInstance.curViewDS,s=this.findDSAndIndexFromId(i,e);Object.keys(s).length&&(t=s.data,i[s.index-1]&&i[s.index-1].isHeader&&1===i[s.index-1].items.length?(this.removeUiItem(s.index-1),this.removeUiItem(s.index-1)):this.removeUiItem(s.index));var n=this.listViewInstance.dataSource instanceof sf.data.DataManager?this.listViewInstance.localData:this.listViewInstance.dataSource,a=n.indexOf(t);-1!==a&&(n.splice(a,1),this.listViewInstance.setViewDataSource(n)),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")},t.prototype.setCheckboxLI=function(e,t){var i=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex;this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex,e.classList.contains(c.selected)?-1===this.uiIndices.activeIndices.indexOf(i)&&this.uiIndices.activeIndices.push(i):this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(i),1)},t.prototype.setSelectLI=function(e,t){this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex},t.prototype.checkedItem=function(e){if(e){this.uiIndices.activeIndices=[],this.activeIndex=void 0;for(var t=this.listViewInstance.curViewDS,i=0;i<t.length;i++)t[i].isHeader||this.uiIndices.activeIndices.push(i)}else this.activeIndex=void 0,this.uiIndices.activeIndices=[]},t.prototype.addUiItem=function(e){var t=this.listViewInstance.curViewDS;if(this.changeUiIndices(e,!0),this.activeIndex&&this.activeIndex>=e&&this.activeIndex++,this.listViewInstance.showCheckBox&&t[e][this.listViewInstance.fields.isChecked]&&this.uiIndices.activeIndices.push(e),parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)||(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px"),parseFloat(this.bottomElement.style.height)){var i=this.listViewInstance.curUL.lastElementChild.previousSibling;(s=this.listViewInstance.getLiFromObjOrElement(t[e+1])||this.listViewInstance.getLiFromObjOrElement(t[e+2]))&&(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px",this.updateUI(i,e,s))}else{i=this.listViewInstance.curUL.firstElementChild.nextSibling;var s=void 0;s=Object.keys(this.listViewInstance.curViewDS).length-1===e?this.listViewInstance.curUL.lastElementChild:this.listViewInstance.getLiFromObjOrElement(t[e+1])||this.listViewInstance.getLiFromObjOrElement(t[e+2]),this.topElement.style.height=parseFloat(this.topElement.style.height)+this.listItemHeight+"px",this.uiFirstIndex++,this.uiLastIndex++,s&&(this.updateUI(i,e,s),this.listViewInstance.isWindow?window.scrollTo(0,pageYOffset+this.listItemHeight):this.listViewInstance.element.scrollTop+=this.listItemHeight)}this.totalHeight+=this.listItemHeight,this.listDiff=Math.round(parseFloat(this.topElement.style.height)/this.listItemHeight)},t.prototype.removeUiItem=function(e){this.totalHeight-=this.listItemHeight;var t=this.listViewInstance.curViewDS[e],i=this.listViewInstance.getLiFromObjOrElement(t);if(this.listViewInstance.curViewDS.splice(e,1),this.activeIndex&&this.activeIndex>=e&&this.activeIndex--,i)if(this.domItemCount>Object.keys(this.listViewInstance.curViewDS).length)sf.base.detach(i),this.domItemCount--,this.uiLastIndex--,this.totalHeight=0;else{if(i.classList.contains(c.disable)&&(i.classList.remove(c.disable),this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(e),1)),"none"===i.style.display&&(i.style.display="",this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(e),1)),this.listViewInstance.showCheckBox&&i.classList.contains(c.selected)){this.listViewInstance.removeSelect(),this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(e),1);var s=i.querySelector("."+c.checkboxWrapper);s.removeAttribute("aria-checked"),s.firstElementChild.classList.remove(c.checked),i.classList.contains(c.focused)&&(i.classList.remove(c.focused),this.activeIndex=void 0)}else i.classList.contains(c.selected)&&(this.listViewInstance.removeSelect(),this.activeIndex=void 0);parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)?parseFloat(this.bottomElement.style.height)?(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)-this.listItemHeight+"px",this.updateUI(i,this.uiLastIndex,this.bottomElement)):(this.topElement.style.height=parseFloat(this.topElement.style.height)-this.listItemHeight+"px",this.updateUI(i,this.uiFirstIndex-1,this.topElement.nextSibling),this.uiLastIndex--,this.uiFirstIndex--):this.updateUI(i,this.uiLastIndex,this.bottomElement)}this.changeUiIndices(e,!1),this.listDiff=Math.round(parseFloat(this.topElement.style.height)/this.listItemHeight)},t.prototype.changeUiIndices=function(e,t){for(var i=Object.keys(this.uiIndices),s=0;s<i.length;s++)this.uiIndices[i[s]]=this.uiIndices[i[s]].map((function(i){return i>=e?t?++i:--i:i}))},t.prototype.addItem=function(e,t,i){for(var s=0;s<e.length;s++){var n=e[s];if(i.push(n),this.listViewInstance.setViewDataSource(i),this.domItemCount)if(this.domItemCount<this.expectedDomItemCount){if(this.listViewInstance.findItemFromDS(i,t)instanceof Array){if(this.listViewInstance.ulElement){var a=this.listViewInstance.curViewDS.indexOf(n);this.createAndInjectNewItem(n,a),(l=this.listViewInstance.curViewDS[a-1])&&l.isHeader&&1===l.items.length&&(--a,this.createAndInjectNewItem(l,a))}this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")}}else{var l;a=this.listViewInstance.curViewDS.indexOf(n);this.addUiItem(a),(l=this.listViewInstance.curViewDS[a-1])&&l.isHeader&&1===l.items.length&&this.addUiItem(a-1)}else!this.listViewInstance.template&&!this.listViewInstance.groupTemplate||this.isNgTemplate()||(this.listViewInstance.listBaseOption.template=null,this.listViewInstance.listBaseOption.groupTemplate=null,this.listViewInstance.listBaseOption.itemCreated=this.createUIItem.bind(this)),this.uiVirtualization()}},t.prototype.createAndInjectNewItem=function(t,i){var s,n=e.ListBase.createListItemFromJson(this.listViewInstance.createElement,[t],this.listViewInstance.listBaseOption);s=Object.keys(this.listViewInstance.curViewDS).length-1===i?this.listViewInstance.curUL.lastElementChild:this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[i+1])||this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[i+2]),this.listViewInstance.ulElement.insertBefore(n[0],s),this.domItemCount++,this.bottomElementHeight<=0&&this.uiLastIndex++,this.refreshItemHeight()},t.prototype.createUIItem=function(e){var t=this.listViewInstance.template,i=this.listViewInstance.createElement("div"),s='<div class="e-text-content" role="presentation"> <span class="e-list-text"> ${'+this.listViewInstance.fields.text+"} </span></div>";if(this.listViewInstance.showCheckBox){if(this.listViewInstance.renderCheckbox(e),!sf.base.isNullOrUndefined(this.listViewInstance.virtualCheckBox.outerHTML)){var n=document.createElement("div");n.innerHTML=this.listViewInstance.template||s,n.children[0].classList.add("e-checkbox"),"Left"===this.listViewInstance.checkBoxPosition?n.children[0].classList.add("e-checkbox-left"):n.children[0].classList.add("e-checkbox-right"),"Left"===this.listViewInstance.checkBoxPosition?n.children[0].insertBefore(this.listViewInstance.virtualCheckBox,n.childNodes[0].children[0]):n.children[0].appendChild(this.listViewInstance.virtualCheckBox),this.listViewInstance.template=n.innerHTML}i.innerHTML=this.listViewInstance.template,this.listViewInstance.template=t}else i.innerHTML=this.listViewInstance.template||s;var a=i.getElementsByTagName("*"),l=this.listViewInstance.createElement("div");this.listViewInstance.fields.groupBy&&(l.innerHTML=this.listViewInstance.groupTemplate||s);var r=l.getElementsByTagName("*");e.curData.isHeader&&(this.headerData=e.curData),this.templateData=e.curData.isHeader?e.curData.items[0]:e.curData,e.item.innerHTML="",e.item.context={data:e.curData,nodes:{flatTemplateNodes:[],groupTemplateNodes:[]}};for(var o=0;o<a.length;o++)this.compileTemplate(a[o],e.item,!1);for(o=0;o<r.length;o++)this.compileTemplate(r[o],e.item,!0);e.item.context.template=e.curData.isHeader?i.firstElementChild:l.firstElementChild,e.item.context.type=e.curData.isHeader?"flatList":"groupList";var c=e.curData.isHeader?l:i;e.item.insertBefore(c.firstElementChild,null)},t.prototype.compileTemplate=function(e,t,i){this.textProperty(e,t,i),this.classProperty(e,t,i),this.attributeProperty(e,t,i)},t.prototype.onChange=function(e,t){t.context.data=e;var i=t.context.nodes.groupTemplateNodes,s=t.context.nodes.flatTemplateNodes;if(!sf.base.isNullOrUndefined(e.isHeader)&&e.isHeader&&"groupList"===t.context.type){var n=t.firstElementChild;sf.base.detach(t.firstElementChild),t.insertBefore(t.context.template,null),t.context.template=n,t.context.type="flatList";for(var a=0;a<i.length;a++)i[a].onChange(e)}else if(e.isHeader||"flatList"!==t.context.type)if(e.isHeader)for(a=0;a<i.length;a++)i[a].onChange(e);else for(a=0;a<s.length;a++)s[a].onChange(e);else{n=t.firstElementChild;sf.base.detach(t.firstElementChild),t.insertBefore(t.context.template,null),t.context.template=n,t.context.type="groupList";for(var a=0;a<s.length;a++)s[a].onChange(e)}},t.prototype.updateContextData=function(e,t,i){i?e.context.nodes.groupTemplateNodes.push(t):e.context.nodes.flatTemplateNodes.push(t)},t.prototype.classProperty=function(e,t,i){for(var s,n=new RegExp("\\${([^}]*)}","g"),a=[];null!==s;){var l=n.exec(e.className);a.push(l),null===(s=l)&&a.pop()}if(a&&a.length)for(var r=function(s){var n,l=a[s];n=-1!==l[1].indexOf("?")&&-1!==l[1].indexOf(":")?new Function("data","return "+l[1].replace(/\$/g,"data.")):new Function("data","return data."+l[1]);var r={};r.bindedvalue=n(i?o.headerData:o.templateData),r.onChange=function(t){r.bindedvalue&&sf.base.removeClass([e],r.bindedvalue.split(" ").filter((function(e){return e})));var i=n(t);i&&sf.base.addClass([e],i.split(" ").filter((function(e){return e}))),r.bindedvalue=i};for(var c=l[0].split(" "),h=0;h<c.length;h++)e.classList.remove(c[h]);r.bindedvalue&&sf.base.addClass([e],r.bindedvalue.split(" ").filter((function(e){return e}))),o.updateContextData(t,r,i)},o=this,c=0;c<a.length;c++)r(c)},t.prototype.attributeProperty=function(e,t,i){for(var s=[],n=0;n<e.attributes.length;n++)s.push(e.attributes[n].nodeName);-1!==s.indexOf("class")&&s.splice(s.indexOf("class"),1);var a=function(n){var a,r,o=s[n],c=new RegExp("\\${([^}]*)}","g").exec(o)||[],h=new RegExp("\\${([^}]*)}","g").exec(e.getAttribute(o))||[];if(c.length||h.length){c[1]&&(a=new Function("data","return data."+c[1])),h[1]&&(r=-1!==h[1].indexOf("?")&&-1!==h[1].indexOf(":")?new Function("data","return "+h[1].replace(/\$/g,"data.")):new Function("data","return data."+h[1]));var d={};d.bindedvalue=i?[void 0===c[1]?void 0:a(l.headerData),void 0===h[1]?void 0:r(l.headerData)]:[void 0===c[1]?void 0:a(l.templateData),void 0===h[1]?void 0:r(l.templateData)],d.attrName=void 0===d.bindedvalue[0]?o:d.bindedvalue[0],d.onChange=function(t){var i=void 0===d.bindedvalue[1]?e.getAttribute(d.attrName):r(t);e.removeAttribute(d.attrName),d.attrName=void 0===d.bindedvalue[0]?d.attrName:a(t),e.setAttribute(d.attrName,i),d.bindedvalue=[void 0===d.bindedvalue[0]?void 0:a(t),void 0===d.bindedvalue[1]?void 0:r(t)]};var u=void 0===d.bindedvalue[1]?e.getAttribute(o):d.bindedvalue[1];e.removeAttribute(o),e.setAttribute(d.attrName,u),l.updateContextData(t,d,i)}},l=this;for(n=0;n<s.length;n++)a(n)},t.prototype.textProperty=function(e,t,i){for(var s,n=new RegExp("\\${([^}]*)}","g"),a=[];null!==s;){var l=n.exec(e.innerText);a.push(l),null===(s=l)&&a.pop()}var r=Array.prototype.some.call(e.children,(function(e){return!!new RegExp("\\${([^}]*)}","g").exec(e.innerText)}));if(a&&a.length&&!r)for(var o=function(s){var n,l=a[s],r={};n=-1!==l[1].indexOf("?")&&-1!==l[1].indexOf(":")?new Function("data","return "+l[1].replace(/\$/g,"data.")):new Function("data","return data."+l[1]),r.bindedvalue=n(i?c.headerData:c.templateData),r.onChange=function(t){e.innerText=e.innerText.replace(r.bindedvalue,n(t)),r.bindedvalue=n(t)},e.innerText=e.innerText.replace(l[0],r.bindedvalue),c.updateContextData(t,r,i)},c=this,h=0;h<a.length;h++)o(h)},t.prototype.reRenderUiVirtualization=function(){this.wireScrollEvent(!0),this.listViewInstance.contentContainer&&sf.base.detach(this.listViewInstance.contentContainer),this.listViewInstance.preRender(),this.domItemCount=0,this.listViewInstance.header(),this.listViewInstance.setLocalData()},t.prototype.updateUI=function(t,i,s){var n=this.isNgTemplate()?this.onNgChange:this.onChange;if(this.listViewInstance.template||this.listViewInstance.groupTemplate){var a=this.listViewInstance.curViewDS[i];t.dataset.uid=a[this.listViewInstance.fields.id]?a[this.listViewInstance.fields.id].toString():e.ListBase.generateId(),n(a,t,this)}else this.updateUiContent(t,i);this.changeElementAttributes(t,i),s&&this.listViewInstance.ulElement.insertBefore(t,s)},t.prototype.onNgChange=function(e,t,i){for(var s=sf.base.compile(i.listViewInstance.template)(e);t.lastChild;)t.removeChild(t.lastChild);t.appendChild(s[0])},t.prototype.getModuleName=function(){return"virtualization"},t.prototype.destroy=function(){this.wireScrollEvent(!0)},t}(),p=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),m=function(e,t,i,s){var a,l=arguments.length,r=l<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===("undefined"==typeof Reflect?"undefined":n()(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(r=(l<3?a(r):l>3?a(t,i,r):a(t,i))||r);return l>3&&r&&Object.defineProperty(t,i,r),r},f=function(e){function t(t,i){var s=e.call(this,i,t)||this;return s.getHelper=function(e){var t,i=s.getSortableElement(e.sender.target);return!!s.isValidTarget(i,s)&&(s.helper?t=s.helper({sender:i,element:e.element}):((t=i.cloneNode(!0)).style.width=i.offsetWidth+"px",t.style.height=i.offsetHeight+"px"),sf.base.addClass([t],["e-sortableclone"]),s.element.appendChild(t),t)},s.onDrag=function(e){s.trigger("drag",{event:e.event,element:s.element,target:e.target});var t,i=s.getSortableInstance(e.target),n=s.getSortableElement(e.target,i);if((s.isValidTarget(n,i)||e.target.className.indexOf("e-list-group-item")>-1)&&s.curTarget!==n&&(!i.placeHolderElement||i.placeHolderElement!==e.target)){e.target.className.indexOf("e-list-group-item")>-1&&(n=e.target),s.curTarget=n;var a=s.getIndex(i.placeHolderElement,i);a=sf.base.isNullOrUndefined(a)?s.getIndex(s.target):s.getIndex(n,i)<a||!a?a:a-1,i.placeHolderElement=s.getPlaceHolder(n,i);var l=s.getIndex(n,i),r=i.element!==s.element?l:a<l?l+1:l;i.placeHolderElement?(e.target.className.indexOf("e-list-group-item")>-1?i.element.insertBefore(i.placeHolderElement,i.element.children[l]):i.element!==s.element&&r===i.element.childElementCount-1?i.element.appendChild(i.placeHolderElement):i.element.insertBefore(i.placeHolderElement,i.element.children[r]),s.refreshDisabled(a,l,i)):(s.updateItemClass(i),i.element.insertBefore(s.target,i.element.children[r]),s.refreshDisabled(a,l,i),s.curTarget=s.target,s.trigger("drop",{event:e.event,element:i.element,previousIndex:a,currentIndex:l,target:e.target,helper:i.element.lastChild,droppedElement:s.target,scope:s.scope}))}(i=s.getSortableInstance(s.curTarget),sf.base.isNullOrUndefined(n)&&e.target!==i.placeHolderElement)?s.isPlaceHolderPresent(i)&&s.removePlaceHolder(i):[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach((function(e){(t=s.getSortableInstance(e)).element&&t!==i&&s.removePlaceHolder(t)}))},s.onDragStart=function(e){s.target=s.getSortableElement(e.target);var t=!1;s.target.classList.add("e-grabbed"),s.curTarget=s.target,e.helper=document.getElementsByClassName("e-sortableclone")[0];var i={cancel:!1,element:s.element,target:s.target};s.trigger("beforeDragStart",i,(function(i){i.cancel&&(t=i.cancel,s.onDragStop(e))})),t||(sf.base.isBlazor?s.trigger("dragStart",{event:e.event,element:s.element,target:s.target,bindEvents:e.bindEvents,dragElement:e.dragElement}):s.trigger("dragStart",{event:e.event,element:s.element,target:s.target}))},s.onDragStop=function(e){var t,i,n,a=s.getSortableInstance(s.curTarget);if(t=s.getIndex(s.target),s.isPlaceHolderPresent(a)){var l=s.getIndex(a.placeHolderElement,a),r={previousIndex:t,currentIndex:l,target:e.target,droppedElement:s.target,helper:e.helper,cancel:!1,handled:!1};s.trigger("beforeDrop",r,(function(i){if(!i.cancel){if(n=i.handled,s.updateItemClass(a),i.handled){var l=s.target.cloneNode(!0);s.target.classList.remove("e-grabbed"),s.target=l}a.element.insertBefore(s.target,a.placeHolderElement);var r=s.getIndex(s.target,a);t=s===a&&t-r>1?t-1:t,s.trigger("drop",{event:e.event,element:a.element,previousIndex:t,currentIndex:r,target:e.target,helper:e.helper,droppedElement:s.target,scopeName:s.scope,handled:n})}sf.base.remove(a.placeHolderElement)}))}if(a=s.getSortableInstance(e.target),i=a.element.childElementCount,t=s.getIndex(s.target),a.element===e.target){var o={previousIndex:t,currentIndex:i,target:e.target,droppedElement:s.target,helper:e.helper,cancel:!1};s.trigger("beforeDrop",o,(function(n){n.cancel||(s.updateItemClass(a),a.element.appendChild(s.target),s.trigger("drop",{event:e.event,element:a.element,previousIndex:t,currentIndex:i,target:e.target,helper:e.helper,droppedElement:s.target,scopeName:s.scope}))}))}s.target.classList.remove("e-grabbed"),s.target=null,s.curTarget=null,sf.base.remove(e.helper),sf.base.getComponent(s.element,sf.base.Draggable).intDestroy(e.event)},s.bind(),s}var i;return p(t,e),i=t,t.prototype.bind=function(){this.element.id||(this.element.id=sf.base.getUniqueID("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()},t.prototype.initializeDraggable=function(){new sf.base.Draggable(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:"."+this.itemClass,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo})},t.prototype.getPlaceHolder=function(e,t){return t.placeHolder?(this.isPlaceHolderPresent(t)&&sf.base.remove(t.placeHolderElement),t.placeHolderElement=t.placeHolder({element:t.element,grabbedElement:this.target,target:e}),t.placeHolderElement.classList.add("e-sortable-placeholder"),t.placeHolderElement):null},t.prototype.isValidTarget=function(e,t){return e&&sf.base.compareElementParent(e,t.element)&&e.classList.contains(t.itemClass)&&!e.classList.contains("e-disabled")},t.prototype.removePlaceHolder=function(e){sf.base.remove(e.placeHolderElement),e.placeHolderElement=null},t.prototype.updateItemClass=function(e){this!==e&&(this.target.classList.remove(this.itemClass),this.target.classList.add(e.itemClass))},t.prototype.getSortableInstance=function(e){if(e=sf.base.closest(e,".e-"+this.getModuleName())){var t=sf.base.getComponent(e,i);return t.scope&&this.scope&&t.scope===this.scope?t:this}return this},t.prototype.refreshDisabled=function(e,t,i){if(i===this)for(var s=void 0,n=e<t,a=void 0,l=n?e:t,r=n?t:e;l<=r;)(s=this.element.children[l]).classList.contains("e-disabled")?(a=this.getIndex(s),this.element.insertBefore(s,this.element.children[n?a+2:a-1]),l=n?a+2:a+1):l++},t.prototype.getIndex=function(e,t){var i;return void 0===t&&(t=this),[].slice.call(t.element.children).forEach((function(t,s){t===e&&(i=s)})),i},t.prototype.getSortableElement=function(e,t){return void 0===t&&(t=this),sf.base.closest(e,"."+t.itemClass)},t.prototype.queryPositionInfo=function(e){return e.left=pageXOffset?parseFloat(e.left)-pageXOffset+"px":e.left,e.top=pageYOffset?parseFloat(e.top)-pageYOffset+"px":e.top,e},t.prototype.isPlaceHolderPresent=function(e){return e.placeHolderElement&&!!sf.base.closest(e.placeHolderElement,"#"+e.element.id)},t.prototype.moveTo=function(e,t,i){b(this.element,e,t,i)},t.prototype.destroy=function(){"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),sf.base.getComponent(this.element,sf.base.Draggable).destroy(),e.prototype.destroy.call(this)},t.prototype.getModuleName=function(){return"sortable"},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"itemClass":[].slice.call(this.element.children).forEach((function(i){i.classList.contains(t.itemClass)&&i.classList.remove(t.itemClass),e.itemClass&&i.classList.add(e.itemClass)}))}}},m([sf.base.Property(!1)],t.prototype,"enableAnimation",void 0),m([sf.base.Property(null)],t.prototype,"itemClass",void 0),m([sf.base.Property(null)],t.prototype,"scope",void 0),m([sf.base.Property()],t.prototype,"helper",void 0),m([sf.base.Property()],t.prototype,"placeHolder",void 0),m([sf.base.Event()],t.prototype,"drag",void 0),m([sf.base.Event()],t.prototype,"beforeDragStart",void 0),m([sf.base.Event()],t.prototype,"dragStart",void 0),m([sf.base.Event()],t.prototype,"beforeDrop",void 0),m([sf.base.Event()],t.prototype,"drop",void 0),t=i=m([sf.base.NotifyPropertyChanges],t)}(sf.base.Base);function b(e,t,i,s){var n=[];if(t||(t=e),i&&i.length?i.forEach((function(t){n.push(e.children[t])})):n=[].slice.call(e.children),sf.base.isNullOrUndefined(s))n.forEach((function(e){t.appendChild(e)}));else{var a=t.children[s];n.forEach((function(e){t.insertBefore(e,a)}))}}return d.Inject(u),e.classNames=c,e.FieldSettings=h,e.ListView=d,e.Virtualization=u,e.getFieldValues=t,e.Sortable=f,e.moveTo=b,e},sfBlazor.loadDependencies(sfBlazor.dependencyJson.lists,(function(){sf.lists=sf.lists({})}))}}]);